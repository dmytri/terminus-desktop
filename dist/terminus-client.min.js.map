{"version":3,"sources":["webpack://TerminusClient/webpack/bootstrap","webpack://TerminusClient/./node_modules/axios/lib/utils.js","webpack://TerminusClient/./lib/frameHelper.js","webpack://TerminusClient/./lib/errorMessage.js","webpack://TerminusClient/./lib/const.js","webpack://TerminusClient/./lib/utils.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/bind.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/buildURL.js","webpack://TerminusClient/./node_modules/axios/lib/cancel/isCancel.js","webpack://TerminusClient/./node_modules/axios/lib/defaults.js","webpack://TerminusClient/./node_modules/axios/lib/adapters/xhr.js","webpack://TerminusClient/./node_modules/axios/lib/core/createError.js","webpack://TerminusClient/./node_modules/axios/lib/core/mergeConfig.js","webpack://TerminusClient/./node_modules/axios/lib/cancel/Cancel.js","webpack://TerminusClient/./lib/connectionCapabilities.js","webpack://TerminusClient/./lib/connectionConfig.js","webpack://TerminusClient/./lib/terminusIDParser.js","webpack://TerminusClient/./lib/framePattern.js","webpack://TerminusClient/./index.js","webpack://TerminusClient/./lib/woqlClient.js","webpack://TerminusClient/./lib/dispatchRequest.js","webpack://TerminusClient/./node_modules/buffer/index.js","webpack://TerminusClient/(webpack)/buildin/global.js","webpack://TerminusClient/./node_modules/base64-js/index.js","webpack://TerminusClient/./node_modules/ieee754/index.js","webpack://TerminusClient/./node_modules/isarray/index.js","webpack://TerminusClient/./node_modules/axios/index.js","webpack://TerminusClient/./node_modules/axios/lib/axios.js","webpack://TerminusClient/./node_modules/is-buffer/index.js","webpack://TerminusClient/./node_modules/axios/lib/core/Axios.js","webpack://TerminusClient/./node_modules/axios/lib/core/InterceptorManager.js","webpack://TerminusClient/./node_modules/axios/lib/core/dispatchRequest.js","webpack://TerminusClient/./node_modules/axios/lib/core/transformData.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://TerminusClient/./node_modules/axios/lib/core/settle.js","webpack://TerminusClient/./node_modules/axios/lib/core/enhanceError.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/parseHeaders.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/cookies.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/combineURLs.js","webpack://TerminusClient/./node_modules/axios/lib/cancel/CancelToken.js","webpack://TerminusClient/./node_modules/axios/lib/helpers/spread.js","webpack://TerminusClient/./lib/objectFrame.js","webpack://TerminusClient/./lib/woqlResult.js","webpack://TerminusClient/./lib/woql.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isBuffer","toString","isArray","val","isObject","isFunction","forEach","obj","fn","length","isArrayBuffer","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","buffer","isString","isNumber","isUndefined","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","window","document","merge","result","assignValue","arguments","deepMerge","extend","a","b","thisArg","trim","str","replace","FrameHelper","standard_urls","rdf","rdfs","xsd","owl","tcs","tbs","xdd","v","terminus","vio","docs","prefix","url","this","node","hasChildNodes","removeChild","childNodes","parentNode","keys","Math","random","substring","Date","getTime","link","pref","full","ida","idb","unshorten","sha","getShorthand","shb","prefixes","validURL","bits","split","nurl","urlFragment","lastIndexOf","charAt","toUpperCase","slice","location","href","urlStr","stype","ext","view","type","viewIncludesProperties","parts","join","ty","parsed","parseXsdDate","parseXsdTime","parseXsdDateTime","year","month","day","push","tz","extractXsdTimezone","abs","parseInt","timezone","nparsed","hour","minute","second","ret","xparsed","addXsdPadding","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","convertTimestampToXsd","datetime","ptime","indexOf","dividor","vals","scriptid","src","callback","existingScript","getElementById","script","createElement","body","appendChild","onload","id","cssid","rel","getErrorAsMessage","api","err","response","data","formatErrorMessage","status","action","method","msg","nmsg","getAPIErrorMessage","getAccessDeniedMessage","accessDenied","db","server","getInvalidURIMessage","parseAPIError","text","e","json","error","headers","redirected","freeze","CONNECT","GET_SCHEMA","UPDATE_SCHEMA","UPDATE_DOCUMENT","CLASS_FRAME","WOQL_SELECT","GET_DOCUMENT","DELETE_DATABASE","DELETE_DOCUMENT","CREATE_DATABASE","CREATE_DOCUMENT","WOQL_UPDATE","authorityActionsToArr","Array","map","item","URIEncodePayload","payload","encodeURIComponent","payloadArr","keyElement","valueElement","args","apply","utils","encode","params","paramsSerializer","serializedParams","toISOString","JSON","stringify","hashmarkIndex","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","adapter","defaults","process","XMLHttpRequest","transformRequest","transformResponse","parse","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","common","settle","buildURL","parseHeaders","isURLSameOrigin","createError","config","Promise","resolve","reject","requestData","requestHeaders","request","auth","username","password","Authorization","btoa","open","onreadystatechange","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseType","responseText","statusText","onabort","onerror","ontimeout","cookies","xsrfValue","withCredentials","read","undefined","toLowerCase","setRequestHeader","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","then","cancel","abort","send","enhanceError","message","code","Error","config1","config2","prop","Cancel","UTILS","require","CONST","ErrorMessage","ConnectionCapabilities","connectionConfig","connection","setClientKey","getClientKey","serverURL","curl","addConnection","capabilities","capabilitiesKeys","pred","auths","scope","actions","actionsArr","j","nrec","serverConnected","capabilitiesPermit","dbid","connectionMode","client_checks_capabilities","rec","getServerRecord","getDBRecord","console","log","srvr","connectionObj","oid","dbCapabilityID","getServerDBRecords","dbrecs","removeDB","dbidCap","IDParser","ConnectionConfig","newParams","docid","setServer","setDB","doc","setDocument","connected_mode","include_key","includeKey","schemaURL","dbURL","queryURL","frameURL","docURL","platformEndpoint","baseURL","inputStr","context","parser","parseServerURL","parseDBID","setSchemaURL","parseSchemaURL","parseDocumentURL","setQueryURL","parseQueryURL","setClassFrameURL","parseClassFrameURL","server_url","setContext","validPrefixedURL","expandPrefixed","index","validIDString","stripOptionalPath","bit","FramePattern","pattern","setPattern","label","frame_type","subject","subjectClass","range","parent","children","depth","checkFrame","frame","rtype","getRendererType","illegalRuleType","checkFrameType","checkLabel","checkSubject","checkSubjectClass","checkProperty","checkDepth","checkRange","checkValue","checkParent","checkChildren","checkIndex","checkStatus","rsubj","IDsMatch","found","properties","renderer","values","isUpdated","isNew","numberMatch","propertyIDsMatch","valuesMatch","rangeIDsMatch","rcls","classIDsMatch","ftype","getLabel","stringMatch","compareIDs","vala","valb","eval","RegExp","test","isProperty","isData","renderer_type","constructor","FramePatternMatcher","FrameRule","rule","testRules","rules","onmatch","matched_rules","patternMatchesFrame","unpack","arr","nonstring","unpackFeatures","feats","extensions","fstr","fid","k","prettyPrint","frameType","kids","render","compare","collapse","hidden","showDisabledButtons","header","style","headerStyle","showEmpty","show_empty","dataviewer","features","headerFeatures","frametype","func","hf","f","applyFeatureProperty","nfeats","nfeat","fkey","rend","hstyle","header_style","show_disabled_buttons","header_features","WOQLClient","ObjectFrame","WOQLResult","WOQL","DispatchRequest","use_fetch","return_full_response","connect","URIError","self","dispatch","createDatabase","dburl","details","makeDocumentConsistentWithURL","opts","addOptionsToDocument","deleteDatabase","getSchema","schurl","updateSchema","createDocument","docurl","getDocument","updateDocument","deleteDocument","select","qurl","woql","q","addOptionsToWOQL","update","getClassFrame","cfurl","cls","pdoc","_","addKeyToPayload","dispatchFetch","redirect","referrer","hdrs","credentials","cache","Headers","fetch","ok","axios","btoaImplementation","Buffer","from","options","post","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","allocUnsafe","TypeError","array","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","len","checked","copy","fromObject","assertSize","size","loweredCase","utf8ToBytes","base64ToBytes","slowToString","start","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","indexSize","arrLength","valLength","String","buf","readUInt16BE","foundIndex","hexWrite","offset","Number","remaining","strLen","substr","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","fill","allocUnsafeSlow","_isBuffer","x","y","concat","list","pos","swap16","swap32","swap64","equals","inspect","max","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","set","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","dst","g","Function","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","num","output","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","Axios","mergeConfig","createInstance","defaultConfig","instance","instanceConfig","CancelToken","isCancel","all","promises","spread","default","InterceptorManager","dispatchRequest","interceptors","chain","interceptor","unshift","fulfilled","rejected","shift","getUri","handlers","use","eject","h","transformData","isAbsoluteURL","combineURLs","throwIfCancellationRequested","throwIfRequested","reason","fns","normalizedName","isAxiosError","description","number","fileName","lineNumber","columnNumber","stack","ignoreDuplicateOf","line","originURL","msie","userAgent","urlParsingNode","resolveURL","setAttribute","protocol","host","search","hash","hostname","port","pathname","requestURL","expires","path","domain","secure","cookie","toGMTString","decodeURIComponent","remove","now","relativeURL","executor","resolvePromise","token","source","dataframes","classframes","parentframe","empty","loadClassFrames","originalFrames","loadDataFrames","newDoc","PropertyFrame","cframe","predicate","DataFrame","subjid","load","ClassFrame","Restriction","restriction","loadRestriction","jsonld_context","cf","isValid","hasSchema","frames","domainValue","getPropertyClassFrame","isClassChoice","getChosenClassFrame","isLogic","getChosenFrame","addFrame","getAsFrame","ff","getAsFrames","isnew","restrictions","reset","props","clear","filter","ignore_failure","getProperties","filled","missing","getMissingPropertyList","nmissing","newb","getFilledPropertyList","fillFromSchema","newid","genBNID","pf","clone","cloned","getChild","childid","pframe","getProperty","addProperty","createEmpty","createEmptyChoice","clss","getClassChoices","df","addPropertyValue","addValue","removeProperty","removePropertyValue","removeValue","first","parentObject","root","renderProperties","sortProperties","nprops","unsorted","sort","standardCompare","cardControlAllows","hasRestriction","rest","currentnum","getSummary","propcount","kid","nframe","extract","extracts","updated","childUpdated","getComment","hasCardinalityRestriction","getRestriction","deletePropertyValue","gets","cvalues","fs","renderValues","sortedVals","sortValues","rangeValue","comment","save","originalValue","nrend","setNew","isValidType","dt","hasCardRestriction","lab","labelFromURL","getType","isObjectProperty","isDatatypeProperty","isRestriction","isDocument","isChoice","getStdURL","getChoiceOptions","elements","option","lang","getTypeShorthand","contents","normalizer","loadFromObjectFrame","par","child","getChosenClassFrames","objframe","chosen","nc","operands","dataframe","cloneDataFrame","other","choices","domcls","operand","cardinality","maxCardinality","minCardinality","nrest","results","query","bindings","cursor","no_compress","compress","getContext","nprop","shorten","nval","last","next","prev","compareValues","asc_or_desc","getVariableList","count","hasBindings","getBindings","Pattern","WOQLQuery","chain_ended","contains_update","paging_transitive_properties","vocab","loadDefaultVocabulary","tripleBuilder","nspaces","spaces","TripleBuilder","when","Query","Update","opt","into","or","and","not","triple","quad","isa","eq","JSON_or_IRI","delete_triple","S","P","O","delete_quad","G","add_triple","add_quad","vars","cols","as","vari","remote","file","group_by","gvarlist","groupedvar","groupquery","Q","lower","u","pad","input","unique","idgen","typecast","vara","varb","re","matches","less","v1","v2","greater","arith","plus","minus","times","divide","exp","div","var1","star","addClass","classid","graph","propid","deleteClass","deleteProperty","nodeid","isLiteralType","arr1","arr2","buildAsClauses","clauses","va","vb","ng","sq","nlist","nvalue","upd","advanceCursor","queries","cleanSubject","cleanPredicate","cleanObject","cleanGraph","cleanClass","last_index","varname","lastUpdate","Subject","Predicate","Object_or_Literal","Graph","cleanType","asArray","card","addPO","pn","entity","relationship","GraphIRI","Subj","Pred","Obj","getEverything","getAllDocuments","documentMetadata","concreteDocumentClasses","propertyMetadata","elementMetadata","classMetadata","getDataOfClass","getDataOfProperty","documentProperties","getDocumentConnections","getInstanceMeta","simpleGraphQuery","loadVocabulary","client","execute","spl","setVocabulary","getVocabulary","getLimit","getPagingProperty","setLimit","setPagingProperty","isPaged","getPage","psize","hasStart","getStart","setPage","pagenum","pstart","setStart","addStart","nextPage","firstPage","previousPage","npage","setPageSize","hasSelect","getSelectVariables","nq","defaultContext","DB_IRI","def","scm","subj","pageprop","indent","show_context","fluent","newlining_operators","operator","getWOQLPrelude","chainable","uncleanArguments","inline","lastArg","hasShortcut","getShortcut","argIsSubQuery","myas","lhs","rhs","uncleanArgument","allArgs","unclean","cstr","oval","uncleanObjectArgument","nstr","part","suff","printLine","ttype","evstr","unit","addEntry","getO","clause","alert","which","os","od","tb"],"mappings":"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","file":"terminus-client.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n","'use strict';\n\nvar bind = require('./helpers/bind');\nvar isBuffer = require('is-buffer');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n","/**\n * Helper functions for dealing with frames and linked data documents\n */\nconst FrameHelper = {\n\tstandard_urls: {\n\t\trdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n\t\trdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n\t\txsd: 'http://www.w3.org/2001/XMLSchema#',\n\t\towl: 'http://www.w3.org/2002/07/owl#',\n\t\ttcs: 'http://terminusdb.com/schema/tcs#',\n\t\ttbs: 'http://terminusdb.com/schema/tbs#',\n\t\txdd: 'http://terminusdb.com/schema/xdd#',\n\t\tv: 'http://terminusdb.com/woql/variable/',\n\t\tterminus: 'http://terminusdb.com/schema/terminus#',\n\t\tvio: 'http://terminusdb.com/schema/vio#',\n\t\tdocs: 'http://terminusdb.com/schema/documentation#'\n\t}\n};\n\nFrameHelper.addURLPrefix = function (prefix, url) {\n\tthis.standard_urls[prefix] = url;\n};\n\n\nFrameHelper.removeChildren = function (node) {\n\tif (node) {\n\t\twhile (node.hasChildNodes()) {\n\t\t\tnode.removeChild(node.childNodes[0]);\n\t\t}\n\t}\n};\n\nFrameHelper.removeElement = function (node) {\n\tif (node) {\n\t\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\nFrameHelper.empty = function (obj) {\n\t   // null and undefined are \"empty\"\n\tif (!obj) return true;\n\t// Assume if it has a length property with a non-zero value\n\t// that that property is correct.\n\tif (obj.length > 0) return false;\n\tif (obj.length === 0) return true;\n\t// Otherwise, does it have any properties of its own?\n\t// Note that this doesn't handle\n\t// toString and valueOf enumeration bugs in IE < 9\n\t// for (const key in obj) {\n\tif (typeof obj === 'object') {\n\t\tfor (const key of Object.keys(obj)) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) return false;\n\t\t}\n\t}\n\treturn true;\n};\n\nFrameHelper.genBNID = function () {\n\tconst r = Math.random().toString(36).substring(7);\n\tconst d = new Date();\n\tconst bnid = `_:${r}${d.getTime()}`;\n\treturn bnid;\n};\n\nFrameHelper.getShorthand = function (link) {\n\tif (typeof link === 'object' && link.length) link = link[0];\n\tif (link && typeof link === 'string') {\n\t\tfor (const pref of Object.keys(this.standard_urls)) {\n\t\t\tconst full = this.standard_urls[pref];\n\t\t\tif (link.substring(0, full.length) === full) {\n\t\t\t\tconst sh = `${pref}:${link.substring(full.length)}`;\n\t\t\t\treturn sh;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nFrameHelper.compareIDs = function (ida, idb) {\n\tif (ida === idb) return true;\n\tif (this.unshorten(ida) === idb) return true;\n\tif (this.unshorten(ida) === this.unshorten(idb)) return true;\n\tconst sha = this.getShorthand(ida);\n\tconst shb = this.getShorthand(idb);\n\tif (sha && ((sha === idb) || (sha === shb))) return true;\n\tif (shb && shb === ida) return true;\n\treturn false;\n};\n\n\nFrameHelper.shorten = function (url, prefixes) {\n\tfor (const pref in prefixes) {\n\t\tif (prefixes[pref] == url.substring(0, prefixes[pref].length)) {\n\t\t\treturn (`${pref}:${url.substring(prefixes[pref].length)}`);\n\t\t}\n\t}\n\treturn url;\n};\n\nFrameHelper.unshorten = function (url) {\n\tif (this.validURL(url)) return url;\n\tif (!url) return url;\n\tconst bits = url.split(':');\n\tif (bits[1]) {\n\t\tif (this.standard_urls[bits[0]]) {\n\t\t\treturn this.standard_urls[bits[0]] + bits[1];\n\t\t}\n\t}\n\treturn url;\n};\n\n// Valid URLs are those that start with http:// or https://\nFrameHelper.validURL = function (str) {\n\tif (str && (str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://')) return true;\n\treturn false;\n};\n\n\nFrameHelper.labelFromURL = function (url) {\n\tlet nurl = this.urlFragment(url);\n\tnurl = (nurl || url);\n\tif (nurl.lastIndexOf('/') < nurl.length - 1) {\n\t\tnurl = nurl.substring(nurl.lastIndexOf('/') + 1);\n\t}\n\tnurl = nurl.replace('_', ' ');\n\treturn nurl.charAt(0).toUpperCase() + nurl.slice(1);\n};\n\nFrameHelper.urlFragment = function (url) {\n\turl = (typeof url !== 'string') ? window.location.href : url;\n\tlet bits = url.split('#');\n\tif (bits.length <= 1) {\n\t\tif (!this.validURL(url)) {\n\t\t\tbits = url.split(':');\n\t\t}\n\t}\n\tif (bits.length >= 1) {\n\t\tconst [, urlStr] = bits;\n\n\t\tif (urlStr) {\n\t\t\tconst [baseUrl] = urlStr.split('?');\n\t\t\turl = baseUrl;\n\t\t}\n\t}\n\treturn url;\n};\n\nFrameHelper.isStringType = function (stype) {\n\tif (stype === 'http://www.w3.org/2001/XMLSchema#string') return true;\n\tif (stype === 'xsd:string') return true;\n\treturn false;\n};\n\nFrameHelper.lastURLBit = function (url) {\n\turl = (typeof url === 'undefined') ? window.location.href : url;\n\tconst [urlFirst] = url.split('#');\n\tconst [urlTmp] = urlFirst.split('?');\n\turl = urlTmp.substring(url.lastIndexOf('/') + 1);\n\treturn url;\n};\n\n\nFrameHelper.getStdURL = function (pref, ext, url) {\n\tif (this.standard_urls[pref]) {\n\t\tif (url) {\n\t\t\tif (url === this.standard_urls[pref] + ext) return url;\n\t\t} else {\n\t\t\treturn this.standard_urls[pref] + ext;\n\t\t}\n\t}\n\treturn false;\n};\n\nFrameHelper.viewIncludesProperties = function (view) {\n\tif (view === 'full' || view === 'production' || view === 'terse') {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nFrameHelper.viewIncludesChildren = function (view, type) {\n\treturn this.viewIncludesProperties(view, type);\n};\n\nFrameHelper.viewIncludesValue = function (view, type) {\n\treturn this.viewIncludesProperties(view, type);\n};\n\nFrameHelper.numberWithCommas = function (value) {\n\tif (value >= 1000 || value <= -1000) {\n\t    const parts = value.toString().split('.');\n\t    if (value <= -1000) parts[0] = parts[0].substring(1);\n\t    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n\t    if (value <= -1000) value = `-${parts.join('.')}`;\n\t    else value = parts.join('.');\n\t}\n\treturn value;\n};\n\nFrameHelper.datatypes = [\n\t'xdd:coordinate', 'xdd:coordinatePolyline',\n\t'xdd:coordinatePolygon', 'xdd:dateRange', 'xdd:gYearRange', 'xdd:integerRange',\n\t'xdd:decimalRange', 'xdd:cc', 'xdd:email', 'xdd:html', 'xdd:url', 'xsd:anySimpleType',\n\t'xsd:string', 'xsd:boolean', 'xsd:decimal', 'xsd:double', 'xsd:float', 'xsd:time', 'xsd:date',\n\t'xsd:dateTime', 'xsd:dateTimeStamp', 'xsd:gYear', 'xsd:gMonth', 'xsd:gDay', 'xsd:gYearMonth',\n\t'xsd:gMonthDay', 'xsd:duration', 'xsd:yearMonthDuration', 'xsd:dayTimeDuration',\n\t'xsd:byte', 'xsd:short', 'xsd:integer', 'xsd:long', 'xsd:unsignedByte',\t'xsd:unsignedInt',\n\t'xsd:unsignedLong',\t'xsd:nonNegativeInteger', 'xsd:positiveInteger', 'xsd:negativeInteger',\n\t'xsd:nonPositiveInteger', 'xsd:base64Binary', 'xsd:anyURI', 'xsd:language', 'xsd:normalizedString',\n\t'xsd:token', 'xsd:NMTOKEN',\t'xsd:Name',\t'xsd:NCName', 'xsd:NOTATION', 'xsd:QName', 'xsd:ID',\n\t'xsd:IDREF', 'xsd:ENTITY', 'rdf:XMLLiteral', 'rdf:PlainLiteral', 'rdfs:Literal', 'xdd:json'\n];\n\nFrameHelper.parseDate = function (ty, value) {\n\tlet parsed;\n\tif (ty === 'xsd:date') {\n\t\tparsed = this.parseXsdDate(value);\n\t} else if (ty === 'xsd:time') {\n\t\tparsed = this.parseXsdTime(value);\n\t} else if (ty === 'xsd:dateTime') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t} else if (ty === 'xsd:gYear') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gYearRange') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gMonth') {\n\t\tparsed = { month: value.substring(2) };\n\t} else if (ty === 'xsd:gDay') {\n\t\tparsed = { day: value };\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { year: bits[0], month: bits[1] };\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { month: bits[0], day: bits[1] };\n\t} else if (ty === 'xsd:dateTimeStamp') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t}\n\treturn parsed;\n};\n\nFrameHelper.parseXsdDate = function (val) {\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tlet year;\n\tif (val.substring(0, 1) === '-') {\n\t\tyear = val.substring(0, 5);\n\t} else {\n\t\tyear = val.substring(0, 4);\n\t}\n\tlet parsed;\n\tif (year && Math.abs(year) < 10000) {\n\t\tlet month = val.substring(year.length + 1, year.length + 3);\n\t\tif (month) { month = parseInt(month, 10); } else return false;\n\t\tlet day = val.substring(year.length + 4);\n\t\tif (day) day = parseInt(day, 10);\n\t\telse return false;\n\t\tparsed = {\n\t\t\tyear,\n\t\t\t   month,\n\t\t\t   day,\n\t\t\t   timezone: tz\n\t\t};\n\t}\n\treturn parsed;\n};\n\nFrameHelper.addXsdPadding = function (parsed) {\n\tconst nparsed = {};\n\tif (typeof parsed.year !== 'undefined' && parsed.year !== false && parsed.year < 1000) {\n\t\tif (Math.abs(parsed.year) < 10) nparsed.year = (parsed.year < 0 ? `-000${Math.abs(parsed.year)}` : `000${parsed.year}`);\n\t\telse if (Math.abs(parsed.year) < 100) nparsed.year = (parsed.year < 0 ? `-00${Math.abs(parsed.year)}` : `00${parsed.year}`);\n\t\telse nparsed.year = (parsed.year < 0 ? `-0${Math.abs(parsed.year)}` : `0${parsed.year}`);\n\t} else if (parsed.year) {\n\t\tnparsed.year = parsed.year;\n\t}\n\tif (typeof parsed.month !== 'undefined' && parsed.month !== false && parsed.month < 10) {\n\t\tnparsed.month = `0${parsed.month}`;\n\t} else if (parsed.month) {\n\t\tnparsed.month = parsed.month;\n\t}\n\tif (typeof parsed.day !== 'undefined' && parsed.day !== false && parsed.day < 10) {\n\t\tnparsed.day = `0${parsed.day}`;\n\t} else if (parsed.day) {\n\t\tnparsed.day = parsed.day;\n\t}\n\tif (typeof parsed.hour !== 'undefined' && parsed.hour !== false && parsed.hour < 10) {\n\t\tnparsed.hour = `0${parsed.hour}`;\n\t} else if (parsed.hour) {\n\t\tnparsed.hour = parsed.hour;\n\t}\n\tif (typeof parsed.minute !== 'undefined' && parsed.minute !== false && parsed.minute < 10) {\n\t\tnparsed.minute = `0${parsed.minute}`;\n\t} else if (parsed.minute) {\n\t\tnparsed.minute = parsed.minute;\n\t}\n\tif (typeof parsed.second !== 'undefined' && parsed.second !== false && parsed.second < 10) {\n\t\tnparsed.second = `0${parsed.second}`;\n\t} else if (parsed.second) {\n\t\tnparsed.second = parsed.second;\n\t}\n\treturn nparsed;\n};\n\n\nFrameHelper.xsdFromParsed = function (parsed, ty) {\n\tconst xparsed = this.addXsdPadding(parsed);\n\tlet ret;\n\tif (ty === 'xsd:gYear') {\n\t\tret = (xparsed.year ? xparsed.year : false);\n\t} else if (ty === 'xsd:time') {\n\t\treturn (xparsed.hour && xparsed.minute && xparsed.second) ? `${xparsed.hour}:${xparsed.minute}:${xparsed.second}` : false;\n\t} else if (ty === 'xsd:date') {\n\t\treturn (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}` : false;\n\t} else if (ty === 'xsd:dateTime' || ty === 'xsd:dateTimeStamp') {\n\t\tret = (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}T` : false;\n\t\tif (ret) ret += `${xparsed.hour ? xparsed.hour : '12'}:${xparsed.minute ? xparsed.minute : '00'}:${xparsed.second ? xparsed.second : '00'}`;\n\t} else if (ty === 'xsd:gMonth') {\n\t\tret = (xparsed.month ? `--${xparsed.month}` : false);\n\t} else if (ty === 'xsd:gDay') {\n\t\tret = (xparsed.day ? `---${xparsed.day}` : false);\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tret = (xparsed.year && xparsed.month) ? `${xparsed.year}-${xparsed.month}` : false;\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tret = (xparsed.day && xparsed.month) ? `--${xparsed.month}-${xparsed.day}` : false;\n\t}\n\tif (xparsed.timezone) {\n\t\tret += xparsed.timezone;\n\t}\n\treturn ret;\n};\n\n\nFrameHelper.parseXsdTime = function (val) {\n\tif (!val) return {};\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst parsed = {\n\t\thour: val.substring(0, 2),\n\t\tminute: val.substring(3, 5),\n\t\tsecond: val.substring(6),\n\t\ttimezone: tz\n\t};\n\treturn parsed;\n};\n\nFrameHelper.convertTimestampToXsd = function (val) {\n\t  const a = new Date(val * 1000);\n\t  const parsed = {\n\t\tyear: a.getFullYear(),\n\t\tmonth: a.getMonth() + 1,\n\t\tday: a.getDate(),\n\t\thour: a.getHours(),\n\t\tminute: a.getMinutes(),\n\t\tsecond: a.getSeconds()\n\t  };\n\t  return parsed;\n};\n\nFrameHelper.parseXsdDateTime = function (val) {\n\tif (!val) return {};\n\tif (typeof val === 'number') {\n\t\treturn this.convertTimestampToXsd(val);\n\t}\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst datetime = this.parseXsdDate(val);\n\tconst ptime = this.parseXsdTime(val.substring(val.indexOf('T') + 1));\n\n\tfor (const i of Object.keys(ptime)) {\n\t\tdatetime[i] = ptime[i];\n\t}\n\tdatetime.timezone = tz;\n\treturn datetime;\n};\n\nFrameHelper.extractXsdTimezone = function (val) {\n\tif (val && val.charAt(val.length - 1) === 'Z') {\n\t\treturn 'Z';\n\t}\n\tif (val && (val.charAt(val.length - 6) === '+' || val.charAt(val.length - 6) === '-')) {\n\t\tval.substring(val.length - 6);\n\t}\n\treturn false;\n};\n\nFrameHelper.parseRangeValue = function (val, dividor) {\n\tdividor = (dividor || ',');\n\tlet vals = [];\n\tif (typeof val === 'object' && val.length) {\n\t\tvals = val;\n\t} else if (val) {\n\t\tif (typeof val !== 'string') {\n\t\t\tval = `${val}`;\n\t\t}\n\t\tif (val.length && (val.charAt(0) === '[') && val.charAt(val.length - 1) === ']') {\n\t\t\tvals.push(val.substring(1, val.indexOf(dividor)));\n\t\t\tvals.push(val.substring(val.indexOf(dividor) + 1, val.length - 1));\n\t\t} else {\n\t\t\tvals.push(val);\n\t\t}\n\t}\n\treturn vals;\n};\n\nFrameHelper.loadDynamicScript = function (scriptid, src, callback) {\n\tconst existingScript = document.getElementById(scriptid);\n\tif (!existingScript) {\n\t\tconst script = document.createElement('script');\n\t\tscript.src = src; // URL for the third-party library being loaded.\n\t\tdocument.body.appendChild(script);\n\t\tscript.onload = function () {\n\t\t\tscript.id = scriptid; // do it here so it doesn't trigger the callback below on multiple calls\n\t\t\tif (callback) callback(scriptid);\n\t\t};\n\t}\n\tif (existingScript && callback) {\n\t\tcallback(scriptid);\n\t}\n};\n\nFrameHelper.loadDynamicCSS = function (cssid, src, callback) {\n\tconst existingScript = document.getElementById(cssid);\n\tif (!existingScript) {\n\t\tconst link = document.createElement('link');\n\t\tlink.href = src; // URL for the third-party library being loaded.\n\t\tlink.id = cssid; // e.g., googleMaps or stripe\n\t\tlink.rel = 'stylesheet';\n\t\tdocument.body.appendChild(link);\n\t\tlink.onload = function () {\n\t\t\tif (callback) callback(cssid);\n\t\t};\n\t}\n\tif (existingScript && callback) callback(cssid);\n};\n\nmodule.exports = FrameHelper;\n","function getErrorAsMessage(url, api, err) {\n\t// console.log('getErrorAsMessage');\n\tlet str = '';\n\tif (err.response) {\n\t\terr = err.response;\n\t\tif (err.data) str += `${formatErrorMessage(err.data)}`;\n\t} else if (err.body) str += `${formatErrorMessage(err.data)}`;\n\n\tif (err.status) str += `Code: ${err.status}`;\n\tif (err.action) str += `, Action: ${err.action}`;\n\tif (err.type) str += `, Type: ${err.type}`;\n\tif (url) str += `, url: ${url}`;\n\tif (api && api.method) str += `, method: ${api.method}`;\n\treturn str;\n}\n\nfunction formatErrorMessage(msg) {\n\tif (typeof msg === 'object') {\n\t\tlet nmsg = '';\n\t\tfor (const key of Object.keys(msg)) {\n\t\t\tnmsg += `${key} ${msg[key]} `;\n\t\t}\n\t\treturn nmsg;\n\t}\n\treturn msg;\n}\n\nfunction accessDenied(action, db, server) {\n\tconst err = {};\n\terr.status = 403;\n\terr.url = (server || '') + (db || '');\n\terr.type = 'client';\n\terr.action = action;\n\terr.body = `${err.action} not permitted for ${err.url}`;\n\treturn err;\n}\n\nfunction getAPIErrorMessage(url, api, err) {\n\treturn `API Error ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getAccessDeniedMessage(url, api, err) {\n\treturn `Access Denied ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getInvalidURIMessage(url, call) {\n\tconst str = `Invalid argument to\n            ${call}. \n            ${url}\n            is not a valid Terminus DB API endpoint`;\n\treturn str;\n}\n\n/**\n * Utility functions for generating and retrieving error messages\n * and storing error state\n */\n\nfunction parseAPIError(response) {\n\tconst err = {};\n\terr.status = response.status;\n\terr.type = response.type;\n\tif (response.data && typeof response.data === 'object') {\n\t\tlet msg;\n\t\ttry {\n\t\t\tmsg = response.text();\n\t\t} catch (e) {\n\t\t\ttry {\n\t\t\t\tmsg = response.json();\n\t\t\t} catch (error) {\n\t\t\t\tmsg = response.toString();\n\t\t\t}\n\t\t}\n\t\terr.body = msg;\n\t} else if (response.data) err.body = response.data;\n\terr.url = response.url;\n\terr.headers = response.headers;\n\terr.redirected = response.redirected;\n\treturn err;\n}\n\n\nmodule.exports = {\n\tgetErrorAsMessage,\n\tgetAPIErrorMessage,\n\tgetAccessDeniedMessage,\n\taccessDenied,\n\tgetInvalidURIMessage,\n\tparseAPIError\n};\n","\nmodule.exports = Object.freeze({\n\tCONNECT: 'connect',\n\tGET_SCHEMA: 'get_schema',\n\tUPDATE_SCHEMA: 'update_schema',\n\tUPDATE_DOCUMENT: 'update_document',\n\tCLASS_FRAME: 'class_frame',\n\tWOQL_SELECT: 'woql_select',\n\tGET_DOCUMENT: 'get_document',\n\tDELETE_DATABASE: 'delete_database',\n\tDELETE_DOCUMENT: 'delete_document',\n\tCREATE_DATABASE: 'create_database',\n\tCREATE_DOCUMENT: 'create_document',\n\tWOQL_UPDATE: 'woql_update'\n});\n\n/*\n{\"extends\": \"strongloop\",\n  \"env\": {\n\t\t\"browser\": true,\n\t\t\"node\": true,\n\t\t\"es6\": true\n  },\n  \"rules\":{\"max-len\": [\"error\", { \"code\": 100 }]},\n \"parserOptions\": { \"ecmaVersion\": 6 }}\n*/\n","function authorityActionsToArr(action) {\n\tif (Array.isArray(action) === false) return [];\n\n\treturn action.map(item => item['@id']);\n}\n\nfunction URIEncodePayload(payload) {\n\tif (typeof payload === 'string') return encodeURIComponent(payload);\n\tconst payloadArr = [];\n\tfor (const key of Object.keys(payload)) {\n\t\tif (typeof payload[key] === 'object') {\n\t\t\tfor (const keyElement of Object.keys(payload[key])) {\n\t\t\t\t const valueElement = payload[key][keyElement];\n\t\t\t\t payloadArr.push(`${encodeURIComponent(keyElement)}=${encodeURIComponent(valueElement)}`);\n\t\t\t}\n\t\t} else {\n\t\t\tpayloadArr.push(`${encodeURIComponent(key)}=${encodeURIComponent(payload[key])}`);\n\t\t}\n\t}\n\treturn payloadArr.join('&');\n}\n\nmodule.exports = { authorityActionsToArr, URIEncodePayload };\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  // Only Node.JS has a process variable that is of [[Class]] process\n  if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  } else if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  utils.forEach(['url', 'method', 'params', 'data'], function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(['headers', 'auth', 'proxy'], function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach([\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'maxContentLength',\n    'validateStatus', 'maxRedirects', 'httpAgent', 'httpsAgent', 'cancelToken',\n    'socketPath'\n  ], function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","const UTILS = require('./utils.js');\nconst CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n/*\n * Creates an entry in the connection registry for the server\n * and all the databases that the client has access to\n * maps the input authorties to a per-db array for internal storage and easy\n * access control checks\n * {doc:dbid => {terminus:authority =>\n * [terminus:woql_select, terminus:create_document, auth3, ...]}}\n *\n */\n\nfunction ConnectionCapabilities(connectionConfig, key) {\n\tthis.connection = {};\n\tthis.connectionConfig = connectionConfig;\n\tif (this.connectionConfig.server && key) {\n\t\tthis.setClientKey(this.connectionConfig.server, key);\n\t}\n}\n\nConnectionCapabilities.prototype.getClientKey = function (serverURL) {\n\tif (!serverURL) serverURL = this.connectionConfig.serverURL();\n\tif (serverURL && this.connection[serverURL]) return this.connection[serverURL].key;\n\treturn false;\n};\n\n\n/*\n * Utility functions for changing the state of connections with Terminus servers\n */\nConnectionCapabilities.prototype.setClientKey = function (curl, key) {\n\tif (typeof key === 'string' && key.trim()) {\n\t\tif (typeof this.connection[curl] === 'undefined') {\n\t\t\tthis.connection[curl] = {};\n\t\t}\n\t\tthis.connection[curl].key = key.trim();\n\t}\n};\n\n\n/**\n * @params {string} curl a valid terminusDB server URL\n * @params {object} capabilities it is the connect call response\n */\nConnectionCapabilities.prototype.addConnection = function (curl, capabilities) {\n\tif (typeof this.connection[curl] === 'undefined') {\n\t\tthis.connection[curl] = {};\n\t}\n\tconst capabilitiesKeys = capabilities ? Object.keys(capabilities) : [];\n\n\tfor (const pred of capabilitiesKeys) {\n\t    if (pred === 'terminus:authority' && capabilities[pred]) {\n\t      const auths = Array.isArray(capabilities[pred]) === true\n\t        ? capabilities[pred]\n\t        : [capabilities[pred]];\n\n\t      for (let i = 0; i < auths.length; i += 1) {\n\t        let scope = auths[i]['terminus:authority_scope'];\n\t        const actions = auths[i]['terminus:action'];\n\n\t        if (Array.isArray(scope) === false) scope = [scope];\n\t        const actionsArr = UTILS.authorityActionsToArr(actions);\n\n\t        for (let j = 0; j < scope.length; j += 1) {\n\t          const nrec = scope[j];\n\t          if (typeof this.connection[curl][nrec['@id']] === 'undefined') {\n\t            this.connection[curl][nrec['@id']] = nrec;\n\t          }\n\t          this.connection[curl][nrec['@id']]['terminus:authority'] = actionsArr;\n\t        }\n\t      }\n\t    } else {\n\t      this.connection[curl][pred] = capabilities[pred];\n\t    }\n\t}\n};\n\nConnectionCapabilities.prototype.serverConnected = function () {\n\treturn typeof this.connection[this.connectionConfig.server] !== 'undefined';\n};\n\nConnectionCapabilities.prototype.capabilitiesPermit = function (action, dbid, server) {\n\tif (!this.connectionConfig.connectionMode()\n         || this.connectionConfig.client_checks_capabilities !== true\n         || action === CONST.CONNECT) { return true; }\n\n\tserver = server || this.connectionConfig.server;\n\tdbid = dbid || this.connectionConfig.dbid;\n\n\tlet rec;\n\n\tif (action === CONST.CREATE_DATABASE) {\n\t\trec = this.getServerRecord(server);\n\t} else if (dbid) rec = this.getDBRecord(dbid);\n\telse console.log('no dbid', server, dbid);\n\tif (rec) {\n\t\tconst auths = rec['terminus:authority'];\n\t\tif (auths && auths.indexOf(`terminus:${action}`) !== -1) return true;\n\t} else {\n\t\tconsole.log('problem with ', this.connection, action, server, dbid);\n\t}\n\tthis.error = ErrorMessage.accessDenied(action, dbid, server);\n\treturn false;\n};\n\nConnectionCapabilities.prototype.getServerRecord = function (srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tconst connectionObj = this.connection[url] || {};\n\tconst okeys = Object.keys(connectionObj);\n\n\tfor (const oid of okeys) {\n\t\tif (this.connection[url][oid]['@type'] === 'terminus:Server') {\n\t\t\treturn this.connection[url][oid];\n\t\t}\n\t}\n\treturn false;\n};\n\nConnectionCapabilities.prototype.getDBRecord = function (dbid, srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tdbid = (dbid || this.connectionConfig.dbid);\n\tif (typeof this.connection[url] !== 'object') {\n\t\treturn false;\n\t}\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\tdbid = this.dbCapabilityID(dbid);\n\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\treturn undefined;\n};\n\nConnectionCapabilities.prototype.getServerDBRecords = function (srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tconst dbrecs = {};\n\tconst connectionObj = this.connection[url] || {};\n\n\tfor (const oid of Object.keys(connectionObj)) {\n\t\tif (this.connection[url][oid]['@type'] === 'terminus:Database') {\n\t\t\tdbrecs[oid] = this.connection[url][oid];\n\t\t}\n\t}\n\treturn dbrecs;\n};\n\n/*\n * removes a database record from the connection registry (after deletion, for example)\n */\nConnectionCapabilities.prototype.removeDB = function (dbid, srvr) {\n\tdbid = dbid || this.connectionConfig.dbid;\n\n\tif (dbid && this.connectionConfig.dbid && this.connectionConfig.dbid === dbid) {\n\t\tthis.connectionConfig.dbid = false;\n\t}\n\n\tconst url = srvr || this.connectionConfig.server;\n\tconst dbidCap = this.dbCapabilityID(dbid);\n\tif (dbidCap && this.connection[url] && this.connection[url][dbidCap]) {\n\t\tdelete this.connection[url][dbidCap];\n\t}\n};\n\n\nConnectionCapabilities.prototype.dbCapabilityID = function (dbid) {\n\treturn `doc:${dbid}`;\n};\n\nConnectionCapabilities.prototype.getDBRecord = function (dbid, srvr) {\n\tconst url = srvr || this.connectionConfig.server;\n\tdbid = dbid || this.connectionConfig.dbid;\n\tif (typeof this.connection[url] !== 'object') {\n\t\treturn false;\n\t}\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\tdbid = this.dbCapabilityID(dbid);\n\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\treturn undefined;\n};\n\nmodule.exports = ConnectionCapabilities;\n","\nconst IDParser = require('./terminusIDParser');\n\nfunction ConnectionConfig(params) {\n\tconst newParams = params || {};\n\tthis.server = false;\n\tthis.dbid = false;\n\tthis.docid = false;\n\tif (newParams.server) this.setServer(newParams.server);\n\tif (newParams.db) this.setDB(newParams.db);\n\tif (newParams.doc) this.setDocument(newParams.doc);\n\t/*\n     * client configuration options - connected_mode = connected\n     * tells the client to first connect to the server before invoking other services\n     */\n\n\tthis.connected_mode = newParams.connected_mode || 'connected';\n\t// include a terminus:user_key API key in the calls\n\tthis.include_key = newParams.include_key || true;\n\t// client side checking of access control (in addition to server-side access control)\n\tthis.client_checks_capabilities = newParams.client_checks_capabilities || true;\n}\n\nConnectionConfig.prototype.serverURL = function () {\n\treturn this.server;\n};\n\n\nConnectionConfig.prototype.connectionMode = function () {\n\treturn this.connected_mode === 'connected';\n};\n\nConnectionConfig.prototype.includeKey = function () {\n\treturn this.include_key === true;\n};\n\nConnectionConfig.prototype.schemaURL = function () {\n\treturn `${this.dbURL()}/schema`;\n};\nConnectionConfig.prototype.queryURL = function () {\n\treturn `${this.dbURL()}/woql`;\n};\nConnectionConfig.prototype.frameURL = function () {\n\treturn `${this.dbURL()}/frame`;\n};\nConnectionConfig.prototype.docURL = function () {\n\treturn `${this.dbURL()}/document/${this.docid ? this.docid : ''}`;\n};\n\nConnectionConfig.prototype.dbURL = function (call) {\n\t// url swizzling to talk to platform using server/dbid/platform/ pattern..\n\tif (this.platformEndpoint()) {\n\t\tconst baseURL = this.server.substring(0, this.server.lastIndexOf('/platform/'));\n\n\t\tif (!call || call !== 'create') {\n\t\t\treturn `${baseURL}/${this.dbid}/platform`;\n\t\t} if (call === 'platform') {\n\t\t\treturn `${baseURL}/${this.dbid}`;\n\t\t}\n\t}\n\treturn this.server + this.dbid;\n};\n\nConnectionConfig.prototype.platformEndpoint = function () {\n\tif (this.server && this.server.lastIndexOf('/platform/') === this.server.length - 10) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n/**\n * Utility functions for setting and parsing urls and determining\n * the current server, database and document\n */\nConnectionConfig.prototype.setServer = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseServerURL(inputStr)) {\n\t\tthis.server = parser.server();\n\t\tthis.dbid = false;\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setDB = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseDBID(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n// @param {string} inputStr TerminusDB server URL or a valid TerminusDB Id or omitted\n\nConnectionConfig.prototype.setSchemaURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseSchemaURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setDocument = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseDocumentURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tif (parser.dbid()) this.dbid = parser.dbid();\n\t\tif (parser.docid()) this.docid = parser.docid();\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setQueryURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseQueryURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setClassFrameURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseClassFrameURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nmodule.exports = ConnectionConfig;\n","/*\n11.75s$ npm install\n6.39s$ npm test\n*/\n/*\n * Helper class for parsing and decomposing Terminus URLs /\n * and dealing with namespace prefixed URLs\n */\n// const URL = require('url').URL;\n\n/*\n\"@context\": {\n    \"owl\":\"http://www.w3.org/2002/07/owl#\",\n    \"rdf\":\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"xsd\":\"http://www.w3.org/2001/XMLSchema#\"\n  } */\n\n\nfunction IDParser(context) {\n\tthis.context = context;\n\tthis.server_url = false;\n\tthis.db = false;\n\tthis.doc = false;\n}\n\nIDParser.prototype.server = function () {\n\treturn this.server_url;\n};\n\nIDParser.prototype.dbid = function () {\n\treturn this.db;\n};\n\nIDParser.prototype.docid = function () {\n\treturn this.doc;\n};\n\nIDParser.prototype.setContext = function (context) {\n\tthis.context = context;\n};\n\nIDParser.prototype.parseServerURL = function (str) {\n\tthis.server_url = false;\n\n\tif (this.validURL(str)) {\n\t\tthis.server_url = str;\n\t} else if (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tthis.server_url = this.expandPrefixed(str, this.context);\n\t}\n\n\tif (this.server_url && this.server_url.lastIndexOf('/') !== this.server_url.length - 1\n\t) {\n\t\tthis.server_url += '/';\n\t}\n\treturn this.server_url;\n};\n\nIDParser.prototype.parseDBID = function (str) {\n\tthis.db = false;\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tif (str.lastIndexOf('/') === str.length - 1) {\n\t\t\t// trim trailing slash\n\t\t\tstr = str.substring(0, str.length - 1);\n\t\t}\n\t\tconst index = str.lastIndexOf('/');\n\n\t\tconst serverURL = str.substring(0, index);\n\t\t// only dbNamer\n\t\tstr = str.substring(index + 1);\n\n\t\tif (this.parseServerURL(serverURL) === false) return false;\n\t}\n\n\tif (this.validIDString(str)) {\n\t\tthis.db = str;\n\t}\n\treturn this.db;\n};\n\nIDParser.prototype.parseDocumentURL = function (str) {\n\tthis.doc = false;\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\n\tif (this.validURL(str)) {\n\t\tlet dbURL = str;\n\t\tif (str.lastIndexOf('/document/') !== -1) {\n\t\t\t// get dbURL\n\t\t\tdbURL = str.substring(0, str.lastIndexOf('/document/'));\n\t\t\tstr = str.substring(str.lastIndexOf('/document/') + 10);\n\t\t}\n\t\tif (this.parseDBID(dbURL) === false) return false;\n\t}\n\tif (str.substring(0, 4) === 'doc:') str = str.substring(4);\n\t// check if the document's name hasn't space or '/'\n\tif (this.validIDString(str)) {\n\t\tthis.doc = str;\n\t}\n\treturn this.doc;\n};\n\nIDParser.prototype.parseSchemaURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'schema');\n\t}\n\treturn this.parseDBID(str);\n};\n\nIDParser.prototype.parseQueryURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'woql');\n\t\tstr = this.stripOptionalPath(str, 'query');\n\t}\n\treturn this.parseDBID(str);\n};\n\nIDParser.prototype.stripOptionalPath = function (str, bit) {\n\tif (str.indexOf(`/${bit}`) !== -1) str = str.substring(0, str.indexOf(`/${bit}`));\n\treturn str;\n};\n\nIDParser.prototype.parseClassFrameURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'frame');\n\t}\n\treturn this.parseDBID(str);\n};\n\n// Valid URLs are those that start with http:// or https://\nIDParser.prototype.validURL = function (str) {\n\tif (str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://') return true;\n\treturn false;\n};\n\nIDParser.prototype.validPrefixedURL = function (str, context) {\n\tif (typeof str !== 'string' || typeof context !== 'object') return false;\n\tconst parts = str.split(':');\n\tif (parts.length !== 2) return false;\n\tif (parts[0].length < 1 || parts[1].length < 1) return false;\n\tif (context && context[parts[0]] && this.validIDString(parts[1])) return true;\n\treturn false;\n};\n\nIDParser.prototype.validIDString = function (str) {\n\tif (typeof str !== 'string') return false;\n\tif (str.indexOf(':') !== -1 || str.indexOf(' ') !== -1 || str.indexOf('/') !== -1) return false;\n\treturn true;\n};\n\nIDParser.prototype.expandPrefixed = function (str, context) {\n\tconst parts = str.split(':');\n\treturn context[parts[0]] + parts[1];\n};\n\nmodule.exports = IDParser;\n","const FrameHelper = require('./frameHelper');\n/**\n * A frame pattern can have the following variables\n * renderer : object, property, data, * - matches a specific part of the frame\n * label : matches the label of a property\n * frame_type: object, data, document, id, oneOf\n * subject: id of the subject\n * subjectClass: class of the subject\n * range: type of a property (applies to property and data)\n * property: property id or list of property ids (parent property if it is an object or data)\n * value: value of the property\n * parent: a pattern relating to the parent of this frame\n * children: patterns for matching on the children of a frame\n * depth: how deep are we in the document? starts from 0\n * index: the index of a value in an array\n * status: updated, error, new, ok,\n */\n\nfunction FramePattern(pattern){\n\tif(pattern){\n\t\tthis.setPattern(pattern);\n\t}\n};\n\nFramePattern.prototype.setPattern = function(pattern){\n\tthis.scope = (pattern.scope ? pattern.scope: false);\n\tthis.label = (pattern.label ? pattern.label : false);\n\tthis.frame_type = (pattern.frame_type ? pattern.frame_type : false);\n\tthis.subject = (pattern.subject ? pattern.subject : false);\n\tthis.subjectClass = (pattern.subjectClass ? pattern.subjectClass : false);\n\tthis.range = (pattern.range ? pattern.range : false);\n\tthis.property = (pattern.property ? pattern.property : false);\n\tthis.value = (pattern.value ? pattern.value : false);\n\tthis.parent = (pattern.parent ? new FramePattern(pattern.parent) : false);\n\tthis.children = [];\n\tif (pattern.children) {\n\t\tfor (let i = 0; i < pattern.children.length; i++) {\n\t\t\tthis.children.push(new FramePattern(pattern.children[i]));\n\t\t}\n\t}\n\tthis.depth = (typeof pattern.depth !== 'undefined' ? pattern.depth : false);\n\tthis.index = (pattern.index ? pattern.index : false);\n\tthis.status = (pattern.status ? pattern.status : false);\n}\n\nFramePattern.prototype.checkFrame = function(frame){\n\tvar rtype = this.getRendererType(frame);\n\tif(!rtype) return false;\n\tif(this.scope && (this.scope != rtype) && (this.scope != \"*\" )) return false;\n\tif(this.illegalRuleType(rtype)) return false;\n\tif(this.frame_type && !this.checkFrameType(rtype, frame)) return false;\n\tif(this.label && !this.checkLabel(rtype, frame)) return false;\n\tif(this.subject && !this.checkSubject(rtype, frame)) return false;\n\tif(this.subjectClass && !this.checkSubjectClass(rtype, frame)) return false;\n\tif(this.property && !this.checkProperty(rtype, frame)) return false;\n\tif(this.depth !== false && !this.checkDepth(rtype, frame)) return false;\n\tif(this.range && !this.checkRange(rtype, frame)) return false;\n\tif(this.value && !this.checkValue(rtype, frame)) return false;\n\tif(this.parent && !this.checkParent(rtype, frame)) return false;\n\tif(this.children && this.children.length && !this.checkChildren(rtype, frame)) return false;\n\tif(this.index && !this.checkIndex(rtype, frame)) return false;\n\tif(this.status && !this.checkStatus(rtype, frame)) return false;\n\treturn true;\n};\n\nFramePattern.prototype.illegalRuleType = function (rtype) {\n\t// data frames have no children\n\tif (rtype == 'data' && this.children.length) return true;\n\t// object frames have no range\n\tif (rtype == 'object' && this.range) return true;\n\treturn false;\n};\n\n/* subject is an id or an array of ids,\n/* match is positive if the renderer's subject appears in the array or is the id\n */\nFramePattern.prototype.checkSubject = function (subject, frame) {\n\tif (typeof this.subject !== 'object' || !this.subject.length) this.subject = [this.subject];\n\tconst rsubj = frame.subject();\n\tfor (let i = 0; i < this.subject.length; i++) {\n\t\tif (this.IDsMatch(subject[i], rsubj)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n// at least one child must match all child rules\nFramePattern.prototype.checkChildren = function (rtype, frame) {\n\tfor (let i = 0; i < this.children.length; i++) {\n\t\tlet found = false;\n\t\tif (rtype == 'object') {\n\t\t\tfor (const prop in frame.properties) {\n\t\t\t\tif (this.children[i].checkFrame(frame.properties[prop])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (rtype == 'property') {\n\t\t\tfor (let j = 0; j <= renderer.values.length; j++) {\n\t\t\t\tif (this.children[j].checkFrame(frame.values[j])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!found) return false;\n\t}\n\treturn true;\n};\n\nFramePattern.prototype.checkStatus = function (rtype, frame) {\n\tif (typeof this.status !== 'object' || this.status.length == 0) this.status = [this.status];\n\tfor (let i = 0; i < this.status.length; i++) {\n\t\tif (this.status[i] == 'updated' && !frame.isUpdated()) return false;\n\t\tif (this.status[i] == 'new' && !frame.isNew()) return false;\n\t\tif (this.status[i] == 'unchanged' && frame.isUpdated()) return false;\n\t}\n\treturn true;\n};\n\nFramePattern.prototype.checkDepth = function (rtype, frame) {\n\treturn this.numberMatch(this.depth, frame.depth());\n};\n\nFramePattern.prototype.checkParent = function (rtype, frame) {\n\treturn this.parent.checkFrame(frame.parent);\n};\n\nFramePattern.prototype.checkIndex = function (rtype, frame) {\n\tif (rtype == 'data') {\n\t\treturn this.index == frame.index;\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkProperty = function (rtype, frame) {\n\tif (typeof this.property !== 'object' || !this.property.length) this.property = [this.property];\n\tfor (let i = 0; i < this.property.length; i++) {\n\t\tif (this.propertyIDsMatch(frame.property(), this.property[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n// returns true if any of the values are found\nFramePattern.prototype.checkValue = function (rtype, frame) {\n\tif (typeof this.value !== 'object' || !this.value.length) this.value = [this.value];\n\tfor (let i = 0; i < this.value.length; i++) {\n\t\tif (rtype == 'data') {\n\t\t\tif (this.valuesMatch(frame.value(), this.value[i])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if (rtype == 'property') {\n\t\t\tfor (let j = 0; j <= frame.values.length; j++) {\n\t\t\t\tif (this.getRendererType(frame.values[i]) == 'data'\n\t\t\t\t\t\t&& this.valuesMatch(frame.values[i].get(), this.value[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (rtype == 'object') {\n\t\t\tfor (const prop in frame.properties) {\n\t\t\t\tif (this.checkValue(this.getRendererType(frame.properties[prop]), frame.properties[prop])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkRange = function (rtype, frame) {\n\tif (typeof this.range !== 'object' || !this.range.length) this.range = [this.range];\n\tfor (let i = 0; i < this.range.length; i++) {\n\t\tif (this.rangeIDsMatch(frame.range(), this.range[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkSubjectClass = function (rtype, frame) {\n\tif (typeof this.subjectClass !== 'object' || !this.subjectClass.length) this.subjectClass = [this.subjectClass];\n\tconst rcls = frame.subjectClass();\n\tfor (let i = 0; i < this.subjectClass.length; i++) {\n\t\tif (this.classIDsMatch(this.subjectClass[i], rcls)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkFrameType = function (rtype, frame) {\n\tif (rtype == 'object') return this.frame_type == 'object';\n\tif (rtype == 'data') {\n\t\tif (frame.frame) {\n\t\t\treturn this.frame_type == frame.frame.ftype();\n\t\t}\n\t}\n\tif (rtype == 'property') return false;\n};\n\nFramePattern.prototype.checkLabel = function (rtype, frame) {\n\tif (typeof frame.getLabel !== 'function') {\n\t\tconsole.log(new Error('Rule passed to check label with broken renderer object - no getLabel'));\n\t\treturn false;\n\t}\n\treturn this.stringMatch(this.label, frame.getLabel());\n};\n\nFramePattern.prototype.IDsMatch = function (ida, idb) {\n\treturn FrameHelper.compareIDs(ida, idb);\n};\n\nFramePattern.prototype.classIDsMatch = function (ida, idb) {\n\treturn this.IDsMatch(ida, idb);\n};\nFramePattern.prototype.propertyIDsMatch = function (ida, idb) {\n\tconst match = this.IDsMatch(ida, idb);\n\treturn match;\n};\nFramePattern.prototype.rangeIDsMatch = function (ida, idb) {\n\treturn this.IDsMatch(ida, idb);\n};\nFramePattern.prototype.valuesMatch = function (vala, valb) {\n\treturn vala == valb;\n};\nFramePattern.prototype.numberMatch = function (vala, valb) {\n\tif (typeof vala === 'string') {\n\t\ttry {\n\t\t\treturn eval(valb + vala);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn vala === valb;\n};\n\nFramePattern.prototype.stringMatch = function (vala, valb) {\n\tconst pat = new RegExp(vala);\n\treturn pat.test(valb);\n};\n\nFramePattern.prototype.getRendererType = function (frame) {\n\tif (frame.isProperty()) return 'property';\n\tif (frame.isObject()) return 'object';\n\tif (frame.isData()) return 'data';\n\tif (frame.renderer_type) return frame.renderer_type;\n\tconsole.log(new Error(`frame configuration passed non-renderer type ${frame.constructor.name}`));\n\tconsole.log(renderer);\n\treturn false;\n};\n\n\n\n\n\n/**\n * FramePatternMatcher does pattern matching on frames\n * Does a given pattern match a given frame?\n */\nconst FramePatternMatcher = {}\n\n/**\n * Runs an array of matching rules across a frame and calls the passed onmatch function on each match\n * The optional onmatch function is called with each hit and is passed the frame and the rule that hit it.\n * A list of the matched rules is returned.\n *\n */\nFramePatternMatcher.testRules = function(rules, frame, onmatch){\n\tvar matched_rules = [];\n\tif(rules && rules.length){\n\t\tfor(var i = 0; i<rules.length; i++){\n\t\t\tvar match = (!rules[i].rule.pattern || FramePatternMatcher.patternMatchesFrame(rules[i].rule.pattern, frame));\n\t\t\tif(match){\n\t\t\t\tmatched_rules.push(rules[i]);\n\t\t\t\tif(onmatch && typeof onmatch == \"function\"){\n\t\t\t\t\tonmatch(frame, rules[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn matched_rules;\n}\n\n/**\n * Determines whether a given pattern matches a given frame\n */\nFramePatternMatcher.patternMatchesFrame = function(pattern, frame){\n\tif(typeof pattern == \"object\" && pattern.length){ //multiple patterns are ANDed\n\t\tfor(var i = 0 ; i<pattern.length; i++){\n\t\t\tvar fp = new FramePattern(pattern[i]);\n\t\t\tif(!fp.checkFrame(frame)) return false;\n\t\t}\n\t\treturn true;\n\t}\n\telse {\n\t\tvar fp = new FramePattern(pattern);\n\t\treturn fp.checkFrame(frame);\n\t}\n}\n\n\n\nfunction FrameRule(){\n\tthis.rule = { pattern: {} };\n\treturn this;\n};\n\n\nFrameRule.prototype.unpack = function(arr, nonstring){\n\tif(nonstring) var str = arr.join(\",\");\n\tvar str = \"'\" + arr.join(\"','\") + \"'\";\n\treturn str;\n}\n\nFrameRule.prototype.unpackFeatures = function(feats){\n\tlet extensions = {};\n\tvar fstr = \"\";\n\tfor(var i = 0; i<feats.length; i++){\n\t\tif(typeof feats[i] == \"string\"){\n\t\t\tfstr += '\"' + feats[i] + '\"';\n\t\t}\n\t\telse if(typeof feats[i] == \"object\"){\n\t\t\tvar fid = Object.keys(feats[i])[0];\n\t\t\tfstr += '\"' +  fid + '\"';\n\t\t\tfor(var prop in feats[i][fid]){\n\t\t\t\textensions[prop] = feats[i][fid][prop];\n\t\t\t}\n\t\t}\n\t\tif(i < feats.length - 1){\n\t\t\tfstr += \", \"\n\t\t}\n\t}\n\tfor(var k = 0; k < Object.keys(extensions).length; k++){\n\t\tvar ext = Object.keys(extensions)[k];\n\t\tvar val = extensions[ext];\n\t\tfstr += \").\" + ext + \"(\";\n\t\tif(typeof val == \"function\"){\n\t\t\tfstr += val;\n\t\t}\n\t\telse if(typeof val == \"string\"){\n\t\t\tfstr += '\"' + val + '\"';\n\t\t}\n\t\telse if(typeof val == \"object\"){\n\t\t\tfstr += JSON.stringify(val);\n\t\t}\n\t}\n\treturn fstr;\n}\n\nFrameRule.prototype.prettyPrint = function(type){\n\t//starts with obj. ...\n\tif(this.scope() == \"*\"){\n\t\tvar str = \"all()\";\n\t}\n\telse {\n\t\tvar str = this.scope() + \"()\";\n\t}\n\tif(typeof this.frameType() != \"undefined\"){\n\t\tstr += \".frame_type(\" + this.unpack(this.frameType()) + \")\";\n\t}\n\tif(typeof this.label() != \"undefined\"){\n\t\tstr += \".label(\" + this.unpack(this.label()) + \")\";\n\t}\n\tif(typeof this.subject() != \"undefined\"){\n\t\tstr += \".subject(\" + this.unpack(this.subject()) + \")\";\n\t}\n\tif(typeof this.subjectClass() != \"undefined\"){\n\t\tstr += \".subjectClass(\" + this.unpack(this.subjectClass()) + \")\";\n\t}\n\tif(typeof this.property() != \"undefined\"){\n\t\tstr += \".property(\" + this.unpack(this.property()) + \")\";\n\t}\n\tif(typeof this.range() != \"undefined\"){\n\t\tstr += \".range(\" + this.unpack(this.range()) + \")\";\n\t}\n\tif(typeof this.value() != \"undefined\"){\n\t\tstr += \".value(\" + this.unpack(this.value()) + \")\";\n\t}\n\tif(typeof this.children() != \"undefined\" && this.children.length > 0){\n\t\tstr += \".children(\\n\";\n\t\tvar kids = this.children();\n\t\tfor(var i = 0; i< kids.length; i++){\n\t\t\tstr += kids.prettyPrint() + \"\\n\";\n\t\t}\n\t\tstr += \")\";\n\t}\n\tif(typeof this.parent() != \"undefined\"){\n\t\tstr += \".parent(\" + this.parent.prettyPrint() + \")\";\n\t}\n\tif(typeof this.depth() != \"undefined\"){\n\t\tvar d = this.depth();\n\t\tif(typeof d == \"string\"){\n\t\t\tstr += \".depth('\" + this.depth() + \"')\";\n\t\t}\n\t\telse {\n\t\t\tstr += \".depth(\" + this.depth() + \")\";\n\t\t}\n\t}\n\tif(typeof this.index() != \"undefined\"){\n\t\tstr += \".index(\" + this.unpack(this.index(), true) + \")\";\n\t}\n\tif(typeof this.status() != \"undefined\"){\n\t\tstr += \".status(\" + this.unpack(this.status()) + \")\";\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \".renderer('\" + this.renderer() + \"')\";\n\t}\n\tif(typeof this.render() != \"undefined\"){\n\t\tstr += \".render(\" + this.render + \")\";\n\t}\n\tif(typeof this.compare() != \"undefined\"){\n\t\tstr += \".compare(\" + this.compare() + \")\";\n\t}\n\tif(typeof this.mode() != \"undefined\"){\n\t\tstr += \".mode('\" + this.mode() + \"')\";\n\t}\n\tif(typeof this.collapse() != \"undefined\"){\n\t\tstr += \".collapse(\" + this.collapse() + \")\";\n\t}\n\tif(typeof this.hidden() != \"undefined\"){\n\t\tstr += \".hidden(\" + this.hidden() + \")\";\n\t}\n\tif(typeof this.view() != \"undefined\"){\n\t\tstr += \".view('\" + this.view() + \"')\";\n\t}\n\tif(typeof this.showDisabledButtons() != \"undefined\"){\n\t\tstr += \".showDisabledButtons(\" + this.showDisabledButtons() + \")\";\n\t}\n\tif(typeof this.header() != \"undefined\"){\n\t\tstr += \".header(\" + this.header() + \")\";\n\t}\n\tif(typeof this.style() != \"undefined\"){\n\t\tstr += \".style(\\\"\" + this.style() + \"\\\")\";\n\t}\n\tif(typeof this.headerStyle() != \"undefined\"){\n\t\tstr += \".headerStyle(\\\"\" + this.headerStyle() + \"\\\")\";\n\t}\n\tif(typeof this.args() != \"undefined\"){\n\t\tstr += \".args(\" + JSON.stringify(this.args()) + \")\";\n\t}\n\tif(typeof this.showEmpty() != \"undefined\"){\n\t\tstr += \".showEmpty(\" + this.show_empty() + \")\";\n\t}\n\tif(typeof this.dataviewer() != \"undefined\"){\n\t\tstr += \".dataviewer(\\\"\" + this.dataviewer() + \"\\\")\";\n\t}\n\tif(typeof this.features() != \"undefined\"){\n\t\tstr += \".features(\" + this.unpackFeatures(this.features()) + \")\";\n\t}\n\tif(typeof this.headerFeatures() != \"undefined\"){\n\t\tstr += \".headerFeatures(\" + this.unpackFeatures(this.headerFeatures()) + \")\";\n\t}\n\treturn str;\n}\n\nFrameRule.prototype.scope = function(scope){\n\tif(typeof scope == \"undefined\") return this.rule.pattern.scope;\n\tthis.rule.pattern.scope = scope;\n\treturn this;\n};\n\nFrameRule.prototype.frameType = function(...frametype){\n\tif(typeof frametype == \"undefined\" || frametype.length == 0) return this.rule.pattern.frametype;\n\tthis.rule.pattern.frametype = frametype;\n\treturn this;\n};\n\nFrameRule.prototype.label = function(...label){\n\tif(typeof label == \"undefined\" || label.length == 0) return this.rule.pattern.label;\n\tthis.rule.pattern.label = label;\n\treturn this;\n};\n\nFrameRule.prototype.subject = function(...subject){\n\tif(typeof subject == \"undefined\" || subject.length == 0) return this.rule.pattern.subject;\n\tthis.rule.pattern.subject = subject;\n\treturn this;\n};\n\nFrameRule.prototype.subjectClass = function(...subjectClass){\n\tif(typeof subjectClass == \"undefined\" || subjectClass.length == 0) return this.rule.pattern.subjectClass;\n\tthis.rule.pattern.subjectClass = subjectClass;\n\treturn this;\n};\n\nFrameRule.prototype.property = function(...property){\n\tif(typeof property == \"undefined\" || property.length == 0) return this.rule.pattern.property;\n\tthis.rule.pattern.property = property;\n\treturn this;\n};\n\nFrameRule.prototype.depth = function(depth){\n\tif(typeof depth == \"undefined\") return this.rule.pattern.depth;\n\tthis.rule.pattern.depth = depth;\n\treturn this;\n};\n\nFrameRule.prototype.range = function(...range){\n\tif(typeof range == \"undefined\" || range.length == 0) return this.rule.pattern.range;\n\tthis.rule.pattern.range = range;\n\treturn this;\n};\n\nFrameRule.prototype.value = function(...value){\n\tif(typeof value == \"undefined\" || value.length == 0) return this.rule.pattern.value;\n\tthis.rule.pattern.value = value;\n\treturn this;\n};\n\nFrameRule.prototype.pattern = function () {\n\treturn this.rule.pattern;\n};\n\nFrameRule.prototype.json = function(json){\n\tif(!json) return this.rule;\n\tthis.rule = json;\n\treturn this;\n}\n\nFrameRule.prototype.parent = function(parent){\n\tif(typeof parent == \"undefined\") return this.rule.pattern.parent;\n\tthis.rule.pattern.parent = parent.pattern();\n\treturn this;\n};\n\nFrameRule.prototype.children = function(...children){\n\tif(typeof children == \"undefined\") return this.rule.pattern.children;\n\tif(typeof this.rule.pattern.children == \"undefined\"){\n\t\tthis.rule.pattern.children = [];\n\t}\n\tfor (let i = 0; i < children.length; i++) {\n\t\tthis.rule.pattern.children.push(children[i].pattern());\n\t}\n\treturn this;\n};\n\nFrameRule.prototype.index = function(...index){\n\tif(typeof index == \"undefined\" || index.length == 0) return this.rule.pattern.index;\n\tthis.rule.pattern.index = index;\n\treturn this;\n};\n\nFrameRule.prototype.status = function(...status){\n\tif(typeof status == \"undefined\" || status.length == 0) return this.rule.pattern.status;\n\tthis.rule.pattern.status = status;\n\treturn this;\n};\n\n/**\n * The below correspond to rule actions - what happens when a pattern matches\n */\n\n/**\n * These onces can apply to features - if the rule includes an earlier features or header_features call, subsequent render, style, hidden and args apply to it\n */\nFrameRule.prototype.render = function(func){\n\tif(!func) return this.rule.render;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"render\", func);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"render\", func);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.render = func;\n\t}\n\treturn this;\n}\n\nFrameRule.prototype.style = function(style){\n\tif(typeof style == \"undefined\") return this.rule.style;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"style\", style);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"style\", style);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.style = style;\n\t}\n\treturn this;\n};\n\n/**\n * The frame or feature will be hidden or unhidden (boolean)\n */\nFrameRule.prototype.hidden = function(m){\n\tif(typeof m == \"undefined\") return this.rule.hidden;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"hidden\", m);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"hidden\", m);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.hidden = m;\n\t}\n\treturn this;\n}\n\n/**\n * Specifies arguments to a renderer \n */\nFrameRule.prototype.args = function(json){\n\tif(!json) return this.rule.args;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"args\", json);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"args\", json);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.args = json;\n\t}\n\treturn this;\n}\n\n/**\n * Adds a property to a feature array\n */\nFrameRule.prototype.applyFeatureProperty = function(feats, prop, val){\n\tvar nfeats = [];\n\tfor(var i = 0; i<feats.length; i++){\n\t\tif(typeof feats[i] == \"string\"){\n\t\t\tvar nfeat = {};\n\t\t\tnfeat[feats[i]] = {};\n\t\t\tnfeat[feats[i]][prop] = val;\n\t\t\tnfeats.push(nfeat);\n\t\t}\n\t\telse if(typeof feats[i] == \"object\"){\n\t\t\tlet fkey = Object.keys(feats[i])[0];\n\t\t\tif(fkey){\n\t\t\t\tvar nfeat = feats[i];\n\t\t\t\tnfeat[fkey][prop] = val;\n\t\t\t\tnfeats.push(nfeat);\n\t\t\t}\n\t\t}\n\t}\n\treturn nfeats;\n}\n\t\n\n\n/**\n * These apply to regular frames\n */\nFrameRule.prototype.renderer = function(rend){\n\tif(!rend) return this.rule.renderer;\n\tthis.rule.renderer = rend;\n\treturn this;\n}\n\nFrameRule.prototype.headerStyle = function(hstyle){\n\tif(!hstyle) return this.rule.header_style;\n\tthis.rule.header_style = hstyle;\n\treturn this;\n}\n\n/**\n * Function which specifies the ordering of values in a frame\n */\nFrameRule.prototype.compare = function(func){\n\tif(!func) return this.rule.compare;\n\tthis.rule.compare = func;\n\treturn this;\n}\n\n/**\n * Edit / view mode\n */\nFrameRule.prototype.mode = function(m){\n\tif(!m) return this.rule.mode;\n\tthis.rule.mode = m;\n\treturn this;\n}\n\n/**\n * Specifies whether a frame should be presented in collapsed form or not\n */\nFrameRule.prototype.collapse = function(m){\n\tif(!m) return this.rule.collapse;\n\tthis.rule.collapse = m;\n\treturn this;\n}\n\n/**\n * Specifies whether a frame should include a view selector\n */\n\nFrameRule.prototype.view = function(m){\n\tif(!m) return this.rule.view;\n\tthis.rule.view = m;\n\treturn this;\n}\n\n/**\n * Should actions which are disabled in the given context be displayed?\n */\nFrameRule.prototype.showDisabledButtons = function(m){\n\tif(!m) return this.rule.show_disabled_buttons;\n\tthis.rule.show_disabled_buttons = m;\n\treturn this;\n}\n\nFrameRule.prototype.features = function(...m){\n\tif(typeof m == \"undefined\" || m.length == 0) return this.rule.features;\n\tthis.rule.features = m;\n\treturn this;\n}\n\nFrameRule.prototype.headerFeatures = function(...m){\n\tif(typeof m == \"undefined\" || m.length == 0) return this.rule.header_features;\n\tthis.rule.header_features = m;\n\treturn this;\n}\n\nFrameRule.prototype.header = function(m){\n\tif(!m) return this.rule.header;\n\tthis.rule.header = m;\n\treturn this;\n}\n\nFrameRule.prototype.showEmpty = function(m){\n\tif(!m) return this.rule.show_empty;\n\tthis.rule.show_empty = m;\n\treturn this;\n}\n\nFrameRule.prototype.dataviewer = function(m){\n\tif(!m) return this.rule.dataviewer;\n\tthis.rule.dataviewer = m;\n\treturn this;\n}\n\nmodule.exports = {FramePatternMatcher, FramePattern, FrameRule } ;\n","'use strict';\nmodule.exports = {\n\t\t\t\t WOQLClient:require('./lib/woqlClient'),\n                  ConnectionCapabilities:require('./lib/connectionCapabilities'),\n                  ConnectionConfig:require('./lib/connectionConfig'),\n                  IDParser:require('./lib/terminusIDParser'),\n                  ErrorMessage:require('./lib/errorMessage'),\n                  FrameHelper:require('./lib/frameHelper'),\n                  ObjectFrame:require('./lib/objectFrame'),\n                  WOQLResult:require('./lib/woqlResult'),\n                  WOQL:require('./lib/woql')};","\nconst CONST = require('./const');\nconst DispatchRequest = require('./dispatchRequest');\nconst ErrorMessage = require('./errorMessage');\nconst ConnectionCapabilities = require('./connectionCapabilities');\nconst ConnectionConfig = require('./connectionConfig');\nconst UTILS = require('./utils.js');\n\n/**\n * @file Javascript WOQL client object\n * @license Apache Version 2\n * @summary Simple Javascript Client for accessing the Terminus DB API\n */\n\n/**\n  * @param {Object} params\n  */\nfunction WOQLClient(params) {\n\t// current connection context variables\n\tconst key = params ? params.key : undefined;\n\tthis.use_fetch = false;\n\tthis.return_full_response = false;\n\tthis.connectionConfig = new ConnectionConfig(params);\n\tthis.connection = new ConnectionCapabilities(this.connectionConfig, key);\n}\n\nWOQLClient.CONST = CONST;\n\n/**\n * Connect to a Terminus server at the given URI with an API key\n * Stores the terminus:ServerCapability document returned\n * in the connection register which stores, the url, key, capabilities,\n * and database meta-data for the connected server\n *\n * If the curl argument is false or null,\n * this.connectionConfig.server will be used if present,\n * or the promise will be rejected.\n\n * @param  {string} curl Terminus server URI\n * @param  {string} API  key\n * @return {Promise}\n * @public\n */\nWOQLClient.prototype.connect = function (curl, key) {\n\tif (curl && !this.connectionConfig.setServer(curl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(curl, CONST.CONNECT))\n\t\t);\n\t}\n\tconst serverURL = this.connectionConfig.serverURL();\n\tif (key) {\n\t\tthis.connection.setClientKey(serverURL, key);\n\t}\n\t// unset the current server setting until successful connect\n\tthis.connectionConfig.server = false;\n\tconst self = this;\n\treturn this.dispatch(serverURL, CONST.CONNECT).then((response) => {\n\t\tself.connectionConfig.server = serverURL;\n\t\tself.connection.addConnection(serverURL, response);\n\t\treturn response;\n\t});\n};\n\n/**\n * Create a Terminus Database by posting\n * a terminus:Database document to the Terminus API\n *\n * The dburl argument can be\n *    1) a valid URL of a terminus database or\n *    2) a valid Terminus database id or\n *    3) can be omitted\n * \t\tin case 2) the current server will be used,\n * \t\tin case 3) the database id will be set from the @id field of the terminuse:Database document.\n *\n * The second (details) argument contains a terminus:Database document\n * with a mandatory rdfs:label field and an optional rdfs:comment field.\n * The third (key) argument contains an optional API key\n *\n * @param {string} dburl Terminus server URI or a TerminusID\n * @param {object} details\n * @param {string} key\n * @return {Promise}\n * @public\n */\nWOQLClient.prototype.createDatabase = function (dburl, details, key) {\n\tif (dburl && !this.connectionConfig.setDB(dburl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(dburl, 'Create Database'))\n\t\t);\n\t}\n\tif (\n\t\tdetails\n    && details['@id']\n    && !this.connectionConfig.setDB(details['@id'], details['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(details['@id'], 'Create Database'))\n\t\t);\n\t}\n\tdetails = this.makeDocumentConsistentWithURL(details, this.connectionConfig.dbURL());\n\n\tconst opts = {};\n\tif (key) {\n\t\topts.key = key;\n\t}\n\tconst doc = this.addOptionsToDocument(details, opts);\n\treturn this.dispatch(this.connectionConfig.dbURL('create'), CONST.CREATE_DATABASE, doc);\n};\n\n/**\n * Delete a Database\n * @param {String} dburl it is a terminusDB Url or a terminusDB Id\n * @param {String} key an optional API key\n * @return {Promise}\n *\n * if dburl is omitted, the current server and database will be used\n */\nWOQLClient.prototype.deleteDatabase = function (dburl, key) {\n\tif (dburl && !this.connectionConfig.setDB(dburl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(dburl, 'Delete Database'))\n\t\t);\n\t}\n\tconst opts = {};\n\n\tif (key) {\n\t\topts.key = key;\n\t}\n\n\tconst self = this;\n\treturn this.dispatch(`${this.connectionConfig.dbURL()}`, CONST.DELETE_DATABASE, opts).then(\n\t\t(response) => {\n\t\t\tself.connection.removeDB();\n\t\t\treturn response;\n\t\t}\n\t);\n};\n\n/**\n * Retrieves the schema of the specified database\n *\n * @param {string} schurl TerminusDB server URL or a valid TerminusDB Id or omitted\n * @param {object} opts is an options object\n * @return {Promise}\n *\n * opts.format is optional and defines which format is requested (*json / turtle)\n * opts.key is an optional API key\n */\nWOQLClient.prototype.getSchema = function (schurl, opts) {\n\tif (schurl && !this.connectionConfig.setSchemaURL(schurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(schurl, 'Get Schema'))\n\t\t);\n\t}\n\t// consoleco.log('schemaURL', this.connectionConfig.schemaURL());\n\treturn this.dispatch(this.connectionConfig.schemaURL(), CONST.GET_SCHEMA, opts);\n};\n\n/**\n * Updates the Schema of the specified database\n *\n * @param {string} schurl TerminusDB server URL or a valid TerminusDB Id or omitted\n * @param {object} doc is a valid owl ontology in json-ld or turtle format\n * @param {object} opts is an options object\n * @return {Promise}\n *\n * if omitted the current server and database will be used\n * opts.format is used to specify which format is being used (*json / turtle)\n * opts.key is an optional API key\n */\nWOQLClient.prototype.updateSchema = function (schurl, doc, opts) {\n\tif (schurl && !this.connectionConfig.setSchemaURL(schurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(schurl, 'Update Schema'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(doc, opts);\n\treturn this.dispatch(this.connectionConfig.schemaURL(), 'update_schema', doc);\n};\n\n/**\n * Creates a new document in the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus database (an id will be randomly assigned) or\n * 2) a valid URL or of a terminus document (the document will be given the passed URL) or\n * 3) a valid terminus document id (the current server and database will be used)\n * 4) can be omitted (the URL will be taken from the document if present)\n * The second argument (doc) is a valid document in json-ld\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.createDocument = function (docurl, doc, opts) {\n\tif (docurl && !this.connectionConfig.setDocument(docurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Create Document'))\n\t\t);\n\t} if (\n\t\tdoc\n    && doc['@id']\n    && !this.connectionConfig.setDocument(doc['@id'], doc['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(doc['@id'], 'Create Document'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(\n\t\tthis.makeDocumentConsistentWithURL(doc, this.connectionConfig.docURL()),\n\t\topts\n\t);\n\treturn this.dispatch(this.connectionConfig.docURL(), 'create_document', doc);\n};\n\n/**\n * Retrieves a document from the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database\n * the second argument (opts) is an options json -\n * \t\topts.key is an optional API key\n * \t\topts.shape is frame | *document\n */\nWOQLClient.prototype.getDocument = function (docurl, opts) {\n\tif (docurl && (!this.connectionConfig.setDocument(docurl) || !this.connectionConfig.docid)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Get Document'))\n\t\t);\n\t}\n\treturn this.dispatch(this.connectionConfig.docURL(), 'get_document', opts);\n};\n\n/**\n * Updates a document in the specified database with a new version\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database or\n * 3) omitted in which case the id will be taken from the document @id field\n * the second argument (doc) is a document in json-ld format\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.updateDocument = function (docurl, doc, opts) {\n\tif (docurl && !this.connectionConfig.setDocument(docurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Update Document'))\n\t\t);\n\t}\n\tif (doc && doc['@id']\n    && !this.connectionConfig.setDocument(doc['@id'], doc['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(doc['@id'], 'Update Document'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(\n\t\tthis.makeDocumentConsistentWithURL(doc, this.connectionConfig.docURL()),\n\t\topts\n\t);\n\treturn this.dispatch(this.connectionConfig.docURL(), 'update_document', doc);\n};\n\n/**\n * Deletes a document from the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database\n * 3) omitted - the current document will be used\n * the second argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.deleteDocument = function (docurl, opts) {\n\tif (docurl && (!this.connectionConfig.setDocument(docurl) || !this.connectionConfig.docid)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Delete Document'))\n\t\t);\n\t}\n\treturn this.dispatch(this.connectionConfig.docURL(), 'delete_document', opts);\n};\n\n/**\n * Executes a read-only WOQL query on the specified database and returns the results\n *\n * @param {string} qurl TerminusDB server URL or omitted (the current DB will be used)\n * @param {string} woql is a \"woql query select statement\"\n * @param {object} opts it can contents the API key (opts.key)\n *\n */\nWOQLClient.prototype.select = function (qurl, woql, opts) {\n\tif (qurl && !this.connectionConfig.setQueryURL(qurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(qurl, 'Select'))\n\t\t);\n\t}\n\tlet q = { 'terminus:query': JSON.stringify(woql) };\n\tq = this.addOptionsToWOQL(q, opts);\n\treturn this.dispatch(this.connectionConfig.queryURL(), CONST.WOQL_SELECT, q);\n};\n\n/**\n * Executes a WOQL query on the specified database which updates the state and returns the results\n *\n * The first (qurl) argument can be\n * 1) a valid URL of a terminus database or\n * 2) omitted - the current database will be used\n * the second argument (woql) is a woql select statement encoded as a string\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.update = function (qurl, woql, opts) {\n\tif (qurl && !this.connectionConfig.setQueryURL(qurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(qurl, 'Update'))\n\t\t);\n\t}\n\twoql = this.addOptionsToWOQL(woql, opts);\n\treturn this.dispatch(this.connectionConfig.queryURL(), 'woql_update', woql);\n};\n\n/**\n * Retrieves a WOQL query on the specified database which updates the state and returns the results\n *\n * The first (cfurl) argument can be\n * 1) a valid URL of a terminus database or\n * 2) omitted - the current database will be used\n * the second argument (cls) is the URL / ID of a document class that exists in the database schema\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.getClassFrame = function (cfurl, cls, opts) {\n\tif (cfurl && !this.connectionConfig.setClassFrameURL(cfurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(cfurl, 'Get Class Frame'))\n\t\t);\n\t}\n\tif (!opts) opts = {};\n\topts['terminus:class'] = cls;\n\treturn this.dispatch(this.connectionConfig.frameURL(), 'class_frame', opts);\n};\n\n/*\n * Utility functions for adding standard fields to API arguments\n */\nWOQLClient.prototype.addOptionsToWOQL = function (woql, opts) {\n\tif (opts && opts.key) {\n\t\twoql.key = opts.key;\n\t}\n\treturn woql;\n};\n\nWOQLClient.prototype.addOptionsToDocument = function (doc, opts) {\n\tconst pdoc = {};\n\tpdoc['@context'] = doc['@context'];\n\tif (pdoc['@context'] && doc['@id']) { // add blank node prefix as document base url\n\t\tpdoc['@context']._ = `${doc['@id']}/`;\n\t}\n\tif (opts && opts['terminus:encoding'] && opts['terminus:encoding'] === 'terminus:turtle') {\n\t\tpdoc['terminus:turtle'] = doc;\n\t\tpdoc['terminus:schema'] = this.connectionConfig.schemaURL();\n\t\tdelete pdoc['terminus:turtle']['@context'];\n\t} else {\n\t\tpdoc['terminus:document'] = doc;\n\t\tdelete pdoc['terminus:document']['@context'];\n\t}\n\tpdoc['@type'] = 'terminus:APIUpdate';\n\tif (opts && opts['terminus:user_key']) {\n\t\tpdoc['terminus:user_key'] = opts['terminus:user_key'];\n\t}\n\tif (opts && opts.key) {\n\t\tpdoc['terminus:user_key'] = opts.key;\n\t}\n\treturn pdoc;\n};\n\nWOQLClient.prototype.addKeyToPayload = function (payload, url) {\n\tif (typeof payload !== 'object')payload = {};\n\tif (payload.key) {\n\t\tpayload['terminus:user_key'] = payload.key;\n\t\tdelete payload.key;\n\t} else if (this.connection.getClientKey()) {\n\t\tpayload['terminus:user_key'] = this.connection.getClientKey();\n\t} else if (this.connection.getClientKey(url)) {\n\t\tpayload['terminus:user_key'] = this.connection.getClientKey(url);\n\t}\n\treturn payload;\n};\n\nWOQLClient.prototype.makeDocumentConsistentWithURL = function (doc, dburl) {\n\tdoc['@id'] = dburl;\n\treturn doc;\n};\n\nWOQLClient.prototype.dispatch = function (url, action, payload) {\n\tif (this.connectionConfig.includeKey()) {\n\t\tpayload = this.addKeyToPayload(payload, url);\n\t}\n\tif (this.use_fetch) {\n\t\treturn this.dispatchFetch(url, action, payload);\n\t}\n\treturn DispatchRequest(url, action, payload);\n};\n\n\nWOQLClient.prototype.dispatchFetch = function (url, action, payload) {\n\tconst api = {\n\t\t//mode: 'cors',  no-cors, cors, *same-origin\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrer: 'client', // no-referrer, *client\n\t};\n\tlet hdrs = {};\n\tif (this.connectionConfig.platformEndpoint()) {\n\t\tapi.credentials = 'include'; // include, *same-origin, omit\n\t}\n\tif (payload && payload['terminus:user_key']) {\n\t\thdrs = { Authorization: `Basic ${btoa(`:${payload['terminus:user_key']}`)}` };\n\t\tdelete (payload['terminus:user_key']);\n\t}\n\t// read only API calls - use GET\n\tswitch (action) {\n\tcase CONST.DELETE_DATABASE:\n\tcase CONST.DELETE_DOCUMENT:\n\t\tif (Object.keys(payload).length > 0) url += `?${UTILS.URIEncodePayload(payload)}`;\n\t\tapi.method = 'DELETE';\n\t\tapi.cache = 'no-cache';\n\t\tbreak;\n\tcase CONST.CREATE_DATABASE:\n\tcase CONST.UPDATE_SCHEMA:\n\tcase CONST.CREATE_DOCUMENT:\n\tcase CONST.UPDATE_DOCUMENT:\n\tcase CONST.WOQL_UPDATE:\n\t\tapi.method = 'POST';\n\t\tapi.cache = 'no-cache';\n\t\thdrs['Content-Type'] = 'application/json';\n\t\tapi.body = JSON.stringify(payload);\n\t\tbreak;\n\tcase CONST.GET_SCHEMA:\n\tcase CONST.CONNECT:\n\tcase CONST.CLASS_FRAME:\n\tcase CONST.WOQL_SELECT:\n\tcase CONST.GET_DOCUMENT:\n\tdefault:\n\t\tapi.method = 'GET';\n\t\tif (Object.keys(payload).length > 0) url += `?${UTILS.URIEncodePayload(payload)}`;\n\t}\n\tconst self = this;\n\tif (Object.keys(hdrs).length > 0) {\n\t\tapi.headers = new Headers(hdrs);\n\t}\n\treturn fetch(url, api).then((response) => {\n\t\tif (self.return_full_response) return response;\n\t\tif (response.ok) {\n\t\t\treturn response.json();\n\t\t}\n\t\tself.error = self.parseAPIError(response);\n\t\treturn Promise.reject(new Error(self.getAPIErrorMessage(url, api, self.error)));\n\t});\n};\n\nmodule.exports = WOQLClient;\n","const axios = require('axios');\nconst UTILS = require('./utils.js');\nconst CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n/*\nAccess-Control-Allow-Credentials   true\nAccess-Control-Allow-Headers  X-PINGOTHER, Content-Type\nAccess-Control-Allow-Methods GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS\nAccess-Control-Allow-Origin: http://localhost:3000 // WILD CARD WILL NOT WORK WHEN POSTING\n*/\n\nfunction btoaImplementation(str) {\n\ttry {\n\t\treturn btoa(str);\n\t} catch (err) {\n\t\t// console.log('in buffer')\n\t\treturn Buffer.from(str).toString('base64');\n\t}\n}\n\nfunction DispatchRequest(url, action, payload) {\n\t/*\n\t*CORS is only required when trying to fetch data from a browser,\n\t*as browsers by default will block requests to different origins\n\t*/\n\tconst options = {\n\t\tmode: 'cors', // no-cors, cors, *same-origin\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrer: 'client',\n\t\t// url:url,\n\t\t// no-referrer, *client\n\t};\n\tif (payload && payload['terminus:user_key']) {\n\t\toptions.headers = { Authorization: `Basic ${btoaImplementation(`:${payload['terminus:user_key']}`)}` };\n\t\tdelete (payload['terminus:user_key']);\n\t}\n\n\tswitch (action) {\n\tcase CONST.DELETE_DATABASE:\n\tcase CONST.DELETE_DOCUMENT:\n\t\tif (payload) {\n\t\t\tconst ext = UTILS.URIEncodePayload(payload);\n\t\t\tif (ext) url += `?${ext}`;\n\t\t}\n\t\treturn axios.delete(url, options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n\t\t\t\tthrow new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t});\n\tcase CONST.CREATE_DATABASE:\n\tcase CONST.UPDATE_SCHEMA:\n\tcase CONST.CREATE_DOCUMENT:\n\tcase CONST.UPDATE_DOCUMENT:\n\tcase CONST.WOQL_UPDATE:\n\t\toptions.headers = options.headers ? options.headers : {};\n\t\toptions.headers['Content-Type'] = 'application/json';\n\t\treturn axios.post(url, JSON.stringify(payload), options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n\t\t\t\tconst e = new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t\tif (err.response && err.response.data) e.data = err.response.data;\n\t\t\t\tthrow e;\n\t\t\t});\n\tcase CONST.GET_SCHEMA:\n\tcase CONST.CONNECT:\n\tcase CONST.CLASS_FRAME:\n\tcase CONST.WOQL_SELECT:\n\tcase CONST.GET_DOCUMENT:\n\tdefault:\n\t\tif (payload) {\n\t\t\tconst ext = UTILS.URIEncodePayload(payload);\n\t\t\tif (ext) url += `?${ext}`;\n\t\t}\n\t\treturn axios.get(url, options)\n\t\t\t.then((response => response.data))\n\t\t\t.catch((err) => {\n\t\t\t\tthrow new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t});\n\t}\n}\n\nmodule.exports = DispatchRequest;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\nmodule.exports = function isBuffer (obj) {\n  return obj != null && obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n  config.method = config.method ? config.method.toLowerCase() : 'get';\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","/**\n * Represents a frame for programmatic access to object frame, anywhere within a document\n * Recursive data structure where this.children contains an indexed array of object frames\n * and this.dataframes contains a property indexed array of data frames\n * Every object frame carries a reference to its classframe\n * This gives us instructions as to how to create new frames according to the schema\n * After that it's turtles all the way down.\n * @param cls - ID of the class (URL)\n * @param classframe - an array of frames representing a class\n * @param archetypes list of class frames\n * @param parent parent object\n * @returns\n */\nconst FrameHelper = require('./frameHelper');\nconst FramePattern = require('./framePattern');\n\nfunction ObjectFrame(cls, dataframes, classframes, parent, parentframe) {\n\t// the class of the frame - mandatory\n\tthis.empty();\n\tthis.cls = cls;\n\n\t// array of frames representing the full class frame\n\t// (optional - required to be able to safely add missing properties)\n\tif (classframes && typeof classframes === 'object') {\n\t\tthis.loadClassFrames(classframes);\n\t}\n\tif (dataframes && typeof dataframes === 'object') {\n\t\tthis.originalFrames = dataframes;\n\t\tthis.loadDataFrames(dataframes);\n\t} else {\n\t\tthis.originalFrames = false;\n\t}\n\t// parent object frame\n\tthis.parent = parent;\n\t// original frame used by parent to create me\n\tthis.parentframe = parentframe;\n\t// set to true if this is a newly created document\n\tthis.newDoc = false;\n}\n\n/**\n * Loads class frames for the object's class - the instructions about how to put an object together\n */\nObjectFrame.prototype.loadClassFrames = function (classframes) {\n\tfor (let j = 0; j < classframes.length; j += 1) {\n\t\tif (classframes[j]['@context']) this.jsonld_context = classframes[j]['@context'];\n\n\t\tconst cf = new ClassFrame(classframes[j]);\n\t\tif (cf.isValid()) {\n\t\t\tif(!this.classframes) this.classframes = {};\n\t\t\tif(typeof this.classframes[classframes[j].property] === 'undefined') {\n\t\t\t\tthis.classframes[classframes[j].property] = [];\n\t\t\t}\n\t\t\tthis.classframes[classframes[j].property] = cf;\n\t\t\tif (cf.isObject() && this.properties[classframes[j].property]) {\n\t\t\t\tfor (let i = 0; i < this.properties[classframes[j].property].values.length; i += 1) {\n\t\t\t\t\tthis.properties[classframes[j].property].values[i].loadClassFrames(classframes[j].frame);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n};\n\n/**\n * Does this object have a schema loaded?\n */\nObjectFrame.prototype.hasSchema = function () {\n\treturn !FrameHelper.empty(this.classframes);\n};\n\n/*\n * Loads an array of data frames into the object's internal index\n * {property: [frames]}\n */\nObjectFrame.prototype.loadDataFrames = function (frames) {\n\tif (typeof frames !== 'object' || !frames.length) return undefined;\n\tif (!this.originalFrames) this.originalFrames = frames;\n\tif (!this.subjid && frames[0].domainValue) this.subjid = frames[0].domainValue;\n\tfor (let i = 0; i < frames.length; i += 1) {\n\t\tif (frames[i]['@context']) this.jsonld_context = frames[i]['@context'];\n\t\tlet cframe = this.getPropertyClassFrame(frames[i].property, frames[i]);\n\t\tif (cframe.isClassChoice()) {\n\t\t\tcframe = cframe.getChosenClassFrame(frames[i].range);\n\t\t\tif (!cframe) {\n\t\t\t\tconsole.log(`no choice frame ${frames[i].range}`);\n\t\t\t}\n\t\t} else if (cframe.isLogic()) {\n\t\t\tcframe = cframe.getChosenFrame(frames[i]);\n\t\t}\n\t\tif (cframe) {\n\t\t\tif (typeof this.properties[frames[i].property] === 'undefined') {\n\t\t\t\tthis.properties[frames[i].property] = new PropertyFrame(frames[i].property, cframe, this);\n\t\t\t}\n\t\t\tthis.properties[frames[i].property].addFrame(frames[i]);\n\t\t}\n\t}\n\treturn this;\n};\n\n/*\n * Serialises the javascript object as an array of frames\n */\nObjectFrame.prototype.getAsFrame = function (prop, parent) {\n\tif (this.parentframe) return this.parentframe;\n\tconst ff = { type: 'objectProperty', property: prop };\n\tff.range = this.cls;\n\tff.domain = parent.cls;\n\tff.domainValue = parent.subjid;\n\tff.frame = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tff.frame = ff.frame.concat(ff.frame, this.properties[prop].getAsFrames());\n\t}\n\treturn ff;\n};\n\nObjectFrame.prototype.getAsFrames = function (prop, parent) {\n\tvar frames = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tframes = frames.concat(frames, this.properties[prop].getAsFrames());\n\t}\n\treturn frames;\n}\n\nObjectFrame.prototype.isnew = function () {\n\treturn this.newDoc;\n};\n\n/**\n * Cleans out object and sets everything empty\n */\nObjectFrame.prototype.empty = function () {\n\t// all indexed by property\n\tthis.properties = {};\n\tthis.restrictions = {};\n\tthis.subjid = false;\n\tthis.cls = false;\n};\n\n/*\n * Resets object state to original state\n */\nObjectFrame.prototype.reset = function (prop) {\n\tif (prop) {\n\t\tconst props = [];\n\t\tfor (let i = 0; i < this.originalFrames.length; i += 1) {\n\t\t\tif (this.originalFrames[i].property === prop) {\n\t\t\t\tprops.push(this.originalFrames[i]);\n\t\t\t}\n\t\t}\n\t\tif (this.properties[prop]) this.properties[prop] = [];\n\t\tthis.loadDataFrames(props);\n\t} else {\n\t\tthis.restrictions = {};\n\t\tthis.properties = {};\n\t\tthis.loadDataFrames(this.originalFrames);\n\t}\n};\n\n/*\n * Clears out any specific information from a tree\n */\nObjectFrame.prototype.clear = function () {\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.properties[prop].clear();\n\t}\n\treturn this;\n};\n\n/*\n * Filters the frame and its children\n */\nObjectFrame.prototype.filter = function (rules, onmatch, options) {\n\tconst cascading = (options && options.ignore_failure ? true : false);\n\tvar hits = FramePattern.FramePatternMatcher.testRules(rules, this, onmatch);\n\t//if(hits.length || cascading){\n\t\tfor (const prop of Object.keys(this.properties)) {\n\t\t\tthis.properties[prop].filter(rules, onmatch, options);\n\t\t}\n\t//}\n\treturn this;\n};\n\n\n/**\n * If a class frame is present, it is returned for the given property\n * If no class frame is present and an instance frame is passed in the\n * this enables make it up as you go along editing\n * second argument a class frame will be created from the instance frame.\n */\nObjectFrame.prototype.getPropertyClassFrame = function (prop, instance) {\n\tif (this.classframes && typeof this.classframes === 'object' && typeof this.classframes[prop] === 'object') {\n\t\treturn this.classframes[prop];\n\t}\n\tif (instance) {\n\t\tconst cf = new ClassFrame(instance);\n\t\treturn cf;\n\t}\n\tif (this.properties[prop]) {\n\t\treturn new ClassFrame(this.properties[prop].values[0]);\n\t}\n\treturn false;\n};\n\n/*\n * Returns a list of properties - type can be filled|missing|all\n */\nObjectFrame.prototype.getProperties = function (type) {\n\tif(type == \"filled\" || !this.classframes){\n\t\treturn Object.keys(this.properties);\n\t}\n\tif (type == 'missing') {\n\t\tconst filled = Object.keys(this.properties);\n\t\tconst all = Object.keys(this.classframes);\n\t\tconst missing = [];\n\t\tfor (let i = 0; i < all.length; i++) {\n\t\t\tif (filled.indexOf(all[i]) == -1 && missing.indexOf(all[i]) == -1) {\n\t\t\t\tmissing.push(all[i]);\n\t\t\t}\n\t\t}\n\t\treturn missing;\n\t}\n\treturn Object.keys(this.classframes);\n};\n\n/**\n * Missing properties are those that are present in the classframe,\n * but not instantiated in the current object frame\n * for this to work we need to load the frame with the associated classframe\n */\nObjectFrame.prototype.getMissingPropertyList = function () {\n\tvar missing = this.getProperties(\"missing\");\n\tconst nmissing = [];\n\tfor (let i = 0; i < missing.length; i++) {\n\t\tconst cframe = this.getPropertyClassFrame(missing[i]);\n\t\tconst newb = { label: cframe.getLabel(), value: missing[i] };\n\t\tnmissing.push(newb);\n\t}\n\treturn nmissing;\n};\n\n/**\n * List of properties that are filled in the object\n */\nObjectFrame.prototype.getFilledPropertyList = function () {\n\tvar props = this.getProperties(\"filled\");\n\tconst filled = [];\n\tfor (let i = 0; i < props.length; i++) {\n\t\tconst cframe = this.getPropertyClassFrame(props[i]);\n\t\tconst newb = { label: cframe.getLabel(), value: props[i] };\n\t\tfilled.push(newb);\n\t}\n\treturn filled;\n};\n\n/*\n * Fills the object frame from the schema - adding all the necessary property frames, etc to make it complete\n */\nObjectFrame.prototype.fillFromSchema = function (newid) {\n\tif (newid) this.subjid = newid;\n\tnewid = (newid || FrameHelper.genBNID());\n\tconst properties = {};\n\tif(this.classframes){\n\t\tfor (const prop of Object.keys(this.classframes)) {\n\t\t\tconst pf = this.getPropertyClassFrame(prop);\n\t\t\tproperties[prop] = new PropertyFrame(prop, pf, this);\n\t\t\tproperties[prop].fillFromSchema(newid);\n\t\t}\n\t}\n\tthis.properties = properties;\n\tthis.originalFrames = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.originalFrames.push(this.properties[prop].getAsFrames());\n\t}\n\treturn this;\n};\n\n/*\n * Clones an object frame to be a copy of the current frame\n */\nObjectFrame.prototype.clone = function (newid) {\n\tconst properties = {};\n\tconst cloned = new ObjectFrame(this.cls, false, false, this.parent);\n\tcloned.classframes = this.classframes;\n\tcloned.subjid = newid;\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tproperties[prop] = this.properties[prop].clone();\n\t}\n\tcloned.properties = properties;\n\treturn cloned;\n};\n\n\n/**\n * Returns a child frame with a particular id\n * If the second parameter is included, it will only look in that specific property\n * Otherwise searches all properties for the child\n */\nObjectFrame.prototype.getChild = function (childid, prop) {\n\tlet pframe = this.getProperty(prop);\n\tfor (let i = 0; i < pframe.values.length; pframe++) {\n\t\tif (pframe.values[i].isObject() && pframe.values[i].subject === childid) return pframe.values[i];\n\t}\n\tif (!prop) {\n\t\tfor (const key of Object.keys(this.properties)) {\n\t\t\tfor (let i = 0; i < this.properties[key].values.length; i += 1) {\n\t\t\t\tif (this.properties[key].values[i].subject() === childid) return this.properties[key].values[i];\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.addProperty = function (prop, cls) {\n\tconst cframe = this.getPropertyClassFrame(prop);\n\tconst nprop = new PropertyFrame(prop, cframe, this);\n\tif (nprop.isData()) {\n\t\tconst df = cframe.copy();\n\t\tdf.set('');\n\t}\n\tif (cframe.isObject()) {\n\t\tif (!cframe.isClassChoice()) {\n\t\t\tconst df = cframe.createEmpty(FrameHelper.genBNID());\n\t\t}\n\t\tif (cls) {\n\t\t\tconst df = cframe.createEmptyChoice(cls, FrameHelper.genBNID());\n\t\t}\n\t\tconst clss = cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst df = cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t}\n\t}\n\tif (typeof this.properties[prop] === 'undefined') {\n\t\tthis.properties[prop] = [];\n\t}\n\tthis.properties[prop].push(df);\n\treturn df;\n};\n\nObjectFrame.prototype.addPropertyValue = function (prop, value) {\n\tconst pframe = this.properties[prop];\n\treturn pframe.addValue(value);\n};\n\nObjectFrame.prototype.removeProperty = function (prop) {\n\tif (typeof this.properties[prop] !== 'undefined') {\n\t\tdelete (this.properties[prop]);\n\t}\n};\n\nObjectFrame.prototype.removePropertyValue = function (prop, value, index) {\n\tconst pframe = this.properties[prop];\n\tpframe.removeValue(value, index);\n\tif (pframe.values.length == 0) {\n\t\tthis.removeProperty(prop);\n\t}\n};\n\nObjectFrame.prototype.error = function (msg) {\n\tconsole.error(msg);\n};\n\n\nObjectFrame.prototype.subject = function () {\n\treturn this.subjid;\n};\n\nObjectFrame.prototype.get = ObjectFrame.prototype.subject;\n\nObjectFrame.prototype.isObject = function () { return true; };\nObjectFrame.prototype.isProperty = function () { return false; };\nObjectFrame.prototype.isData = function () { return false; };\n\n\nObjectFrame.prototype.subjectClass = function () {\n\treturn this.cls;\n};\n\nObjectFrame.prototype.depth = function () {\n\tif (this.parent) return (this.parent.depth() + 1);\n\treturn 0;\n};\n\nObjectFrame.prototype.getProperty = function (prop) {\n\treturn this.properties[prop];\n};\n\nObjectFrame.prototype.first = function (prop) {\n\tif (this.properties && this.properties[prop]) {\n\t\treturn this.properties[prop].first();\n\t}\n};\n\nObjectFrame.prototype.property = function (prop) {\n\tif (this.parent) return this.parent.property();\n\treturn false;\n};\n\nObjectFrame.prototype.parentObject = function () {\n\tif (this.parent && this.parent.parent) {\n\t\treturn this.parent.parent;\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.root = function () {\n\tif (this.parent) return false;\n\treturn true;\n};\n\nObjectFrame.prototype.renderProperties = function () {\n\tconst props = this.sortProperties();\n\tconst nprops = [];\n\tfor (let i = 0; i < props.length; i++) {\n\t\tif (this.properties[props[i]].render) {\n\t\t\tconst rend = this.properties[props[i]].render(this.properties[props[i]]);\n\t\t\tif (rend) nprops.push(rend);\n\t\t}\n\t}\n\treturn nprops;\n};\n\nObjectFrame.prototype.sortProperties = function () {\n\tconst unsorted = Object.keys(this.properties);\n\tif (this.compare) {\n\t\treturn unsorted.sort((a, b) => this.compare(a, b, this));\n\t}\n\treturn unsorted.sort((a, b) => this.standardCompare(a, b, this));\n};\n\n/*\n * Label first, then datatype properties, then object properties\n */\nObjectFrame.prototype.standardCompare = function (a, b, doc) {\n\tif (a == 'rdfs:label') return -1;\n\tif (b == 'rdfs:label') return 1;\n\tif (a == 'rdfs:comment') return -1;\n\tif (b == 'rdfs:comment') return 1;\n\tif (doc.properties[a].isData() && doc.properties[b].isObject()) return -1;\n\tif (doc.properties[b].isData() && doc.properties[a].isObject()) return 1;\n\treturn 0;\n};\n\nObjectFrame.prototype.cardControlAllows = function(action){\n\tif(!this.parent) return true;\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nObjectFrame.prototype.isUpdated = function(){\n\tvar i = 0;\n\tfor(var prop in this.properties){\n\t\tif(this.originalFrames[i] != prop) return true;\n\t\tif(this.properties[prop].isUpdated()) return true;\n\t\ti++;\n\t}\n\tif(i != this.originalFrames.length) return true;\n\treturn false;\n}\n\nObjectFrame.prototype.isNew = function(){\n\treturn (this.subject().substring(0, 2) == \"_:\");\n}\n\nObjectFrame.prototype.getSummary = function(){\n\tvar ret = { status: \"ok\" };\n\tif(this.isUpdated()) ret.status = \"updated\";\n\tif(this.isNew()) ret.status = \"new\";\n\tret.propcount = 0;\n\tfor(var prop in this.properties){\n\t\tret.propcount++;\n\t}\n\tret.long = ret.propcount + \" properties\";\n\treturn ret;\n}\n\nfunction PropertyFrame(property, cframe, parent) {\n\tthis.predicate = property;\n\tthis.cframe = cframe;\n\tthis.parent = parent;\n\tthis.values = [];\n}\n\nPropertyFrame.prototype.addFrame = function (frame) {\n\tif(this.cframe.isData()){\n\t\tvar df = new DataFrame(frame, this, this.values.length);\n\t\tthis.values.push(df);\n\t} else {\n\t\tconst kid = new ObjectFrame(this.range(), cframe.frame, frame.frame, this, frame);\n\t\tthis.values.push(kid);\n\t}\n};\n\nPropertyFrame.prototype.fillFromSchema = function (newid) {\n\tif (this.isData() || (this.isObject() && !this.isClassChoice())) {\n\t\tvar values = [];\n\t\tif (this.cframe.hasRestriction() && this.cframe.restriction.min) {\n\t\t\tfor (let i = 0; i < this.cframe.restriction.min; i += 1) {\n\t\t\t\tvar nframe = this.createEmpty(newid);\n\t\t\t\tnframe.parent = this;\n\t\t\t\tvalues.push(nframe);\n\t\t\t}\n\t\t} \n\t\telse {\n\t\t\tvar nframe = this.createEmpty(newid);\n\t\t\tnframe.parent = this;\n\t\t\tvalues.push(nframe);\n\t\t}\n\t\tthis.values = values;\n\t}\n\telse if (this.isClassChoice()) {\n\t\tconst clss = this.cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst empty = this.cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\tempty.parent = this;\n\t\t\tthis.values = [empty];\n\t\t}\n\t}\n};\n\nPropertyFrame.prototype.isData = function () {\n\treturn this.cframe.isData();\n};\n\nPropertyFrame.prototype.isObject = function () {\n\treturn this.cframe.isObject();\n};\n\nPropertyFrame.prototype.isProperty = function () {\n\treturn true;\n};\n\nPropertyFrame.prototype.property = function () {\n\treturn this.predicate;\n};\n\nPropertyFrame.prototype.extract = function () {\n \tconst extracts = [];\n \tfor (let i = 0; i < this.values.length; i++) {\n \t\tconst val = this.values[i].extract();\n \t\tif (val !== '' && val !== false && typeof val !== 'undefined') extracts.push(val);\n \t}\n\treturn extracts;\n};\n\nPropertyFrame.prototype.subject = function () {\n\treturn (this.parent ? this.parent.subject() : false);\n};\nPropertyFrame.prototype.subjectClass = function () {\n\treturn (this.parent ? this.parent.subjectClass() : false);\n};\nPropertyFrame.prototype.depth = function () {\n\treturn (this.parent ? this.parent.depth() : false);\n};\nPropertyFrame.prototype.updated = function () {\n\treturn (this.parent ? this.parent.childUpdated() : false);\n};\nPropertyFrame.prototype.range = function () {\n\treturn (this.cframe ? this.cframe.range : '');\n};\nPropertyFrame.prototype.getLabel = function () {\n\treturn (\n\t\tthis.cframe ? this.cframe.getLabel() : '');\n};\nPropertyFrame.prototype.getComment = function () {\n\treturn (this.cframe ? this.cframe.getComment() : false);\n};\nPropertyFrame.prototype.hasCardinalityRestriction = function () {\n\treturn (this.cframe ? this.cframe.hasRestriction() : false);\n};\nPropertyFrame.prototype.getRestriction = function () {\n\treturn (this.cframe ? this.cframe.restriction : false);\n};\nPropertyFrame.prototype.isClassChoice = function () {\n\treturn (this.cframe ? this.cframe.isClassChoice() : false);\n};\n\nPropertyFrame.prototype.deletePropertyValue = function (value, index) {\n\tthis.parent.removePropertyValue(this.property(), value, index);\n};\n\nPropertyFrame.prototype.get = function(){\n\tvar gets = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]) {\n\t\t\tvar x = this.values[i].get();\n\t\t\tif(x) gets.push(x);\n\t\t}\n\t}\n\treturn gets;\n}\n\nPropertyFrame.prototype.clear = function(){\n\tfor(var i = 0 ; i<this.values.length; i++){\n\t\tthis.values[i].clear();\n\t}\n}\n\nPropertyFrame.prototype.clone = function(){\n\tconst cvalues = [];\n\tconst cloned = new PropertyFrame(this.predicate, this.cframe, this.parent);\n\tfor(var i = 0 ; i<this.values.length; i++){\n\t\tcvalues.push(this.values[i].clone());\n\t}\n\tcloned.values = cvalues;\n\treturn cloned;\n\t//\n}\n\nPropertyFrame.prototype.getAsFrames = function(){\n\tvar fs = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]){\n\t\t\tif(this.isData()){\n\t\t\t\tfs.push(this.values[i].getAsFrame());\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfs = fs.concat(this.values[i].getAsFrames());\n\t\t\t}\n\t\t}\n\t}\n\treturn fs;\n}\n\nPropertyFrame.prototype.createEmpty = function(){\n\tif (this.cframe.isData()) {\n\t\tconst df = this.cframe.copy();\n\t\tdf.set('');\n\t\treturn df;\n\t}\n\telse if (this.cframe.isObject()) {\n\t\tif (!this.cframe.isClassChoice()) {\n\t\t\tconst df = this.cframe.createEmpty(FrameHelper.genBNID());\n\t\t\treturn df;\n\t\t}\n\t\tconst clss = this.cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst df = this.cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\treturn df;\n\t\t}\n\t}\n}\n\nPropertyFrame.prototype.filter = function (rules, onmatch, options) {\n\tconst cascading = (options && options.ignore_failure ? true : false);\n\tvar hits = FramePattern.FramePatternMatcher.testRules(rules, this, onmatch);\n\t//if(hits.length || cascading){\n\t\tfor (var i = 0; i<this.values.length; i++){\n\t\t\tthis.values[i].filter(rules, onmatch, options);\n\t\t}\n\t//}\n\treturn this;\n}\n\n/*\n * Shorthand functions to make it easier to access the underlying data\n */\n\nPropertyFrame.prototype.first = function () {\n\tif (this.values && this.values[0]) {\n\t\treturn this.values[0].get();\n\t}\n};\n\nPropertyFrame.prototype.renderValues = function(){\n\tvar sortedVals = this.sortValues();\n\tvar vals = [];\n\tfor(var i = 0; i<sortedVals.length; i++){\n\t\tif(sortedVals[i] && sortedVals[i].render){\n\t\t\tvar rend = sortedVals[i].render(sortedVals[i]);\n\t\t\tif(rend) vals.push(rend);\n\t\t}\n\t}\n\treturn vals;\n};\n\nPropertyFrame.prototype.sortValues = function () {\n\tif (this.compare) {\n\t\treturn this.values.sort((a, b) => this.compare(a, b, this));\n\t}\n\treturn this.values;\n};\n\nPropertyFrame.prototype.cardControlAllows = function(action){\n\tif(this.cframe.hasRestriction()){\n\t\tvar rest = this.cframe.restriction;\n\t\tvar currentnum = this.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nPropertyFrame.prototype.isUpdated = function(){\n\treturn true;\n\tif(this.values.length != this.originalValues.length) return true;\n\tfor(var i = 0 ; i < this.values.length; i++){\n\t\tif(this.cframe && this.cframe.isData()){\n\t\t\tif(this.values[i].value() != this.originalValues[i]){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif(this.values[i].subject() != this.originalValues[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(this.values[i].isUpdated()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\n\nfunction DataFrame(frame, parent, index) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tthis.index = index;\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nDataFrame.prototype.load = function (frame) {\n\tif (typeof frame !== 'object') {\n\t\tthis.error('No frame passed to load');\n\t\treturn;\n\t}\n\t// all the meta-data carried in frames:\n\tthis.type = frame.type;\n\tthis.predicate = frame.property;\n\tthis.range = frame.range;\n\tthis.rangeValue = frame.rangeValue;\n\tthis.domain = frame.domain;\n\tthis.domainValue = frame.domainValue;\n\tthis.frame = frame.frame;\n\tthis.label = frame.label;\n\tthis.comment = frame.comment;\n\tconst { restriction } = frame;\n\tthis.restriction = false;\n\tif (restriction && typeof restriction === 'object') {\n\t\tthis.restriction = new Restriction(restriction);\n\t}\n};\n\nDataFrame.prototype.filter = function (rules, onmatch) {\n\tFramePattern.FramePatternMatcher.testRules(rules, this, onmatch);\n\treturn this;\n};\n\nDataFrame.prototype.delete = function () {\n\tthis.parent.deletePropertyValue(this.get(), this.index);\n};\n\nDataFrame.prototype.save = function () {\n\tif (this.parent) {\n\t\tthis.parent.save();\n\t}\n};\n\nDataFrame.prototype.reset = function () {\n\tthis.set(this.originalValue);\n\t// this.redraw();\n};\n\nDataFrame.prototype.clone = function () {\n\tconst newb = this.parent.addPropertyValue(this.get());\n\tconst nrend = this.copy(newb);\n\tnrend.setNew();\n\tnrend.mode = 'edit';\n\tnrend.index = this.parent.values.length;\n\tthis.parent.values.push(nrend);\n};\n\n\nDataFrame.prototype.depth = function () { return (this.parent ? this.parent.depth() : false); };\nDataFrame.prototype.property = function () { return (this.parent ? this.parent.property() : false); };\nDataFrame.prototype.subject = function () { return (this.parent ? this.parent.subject() : false); };\nDataFrame.prototype.subjectClass = function () { return (this.parent ? this.parent.subjectClass() : false); };\nDataFrame.prototype.range = function () {\treturn (this.frame ? this.frame.range : false); };\n\nDataFrame.prototype.isValidType = function (dt) {\n\tconst vtypes = ['datatypeProperty', 'objectProperty', 'restriction '];\n\tif (vtypes.indexOf(dt) === -1) return false;\n\treturn true;\n};\n\n\nDataFrame.prototype.getAsFrame = function () {\n\t const ff = { type: this.type, property: this.property() };\n\t if (this.range) ff.range = this.range;\n\t if (this.rangeValue) ff.rangeValue = this.rangeValue;\n\t if (this.domain) ff.domain = this.domain;\n\t if (this.domainValue) ff.domainValue = this.domainValue;\n\t if (this.frame) ff.frame = this.frame;\n\t if (this.label) ff.label = this.label;\n\t if (this.comment) ff.comment = this.comment;\n\t return ff;\n};\n\nDataFrame.prototype.hasRestriction = function () {\n\t if (this.restriction) {\n\t\t return this.restriction.hasCardRestriction();\n\t }\n\t return false;\n};\n\nDataFrame.prototype.copy = function (newid) {\n\tconst copy = new DataFrame(this, this.parent);\n\tif (newid) copy.domainValue = newid;\n\treturn copy;\n};\n\nDataFrame.prototype.getLabel = function () {\n\tlet lab = '';\n\tif(this.predicate == \"rdfs:label\") return \"Name\";\n\tif(this.predicate == \"rdfs:comment\") return \"Description\";\n\tif (this.label && typeof this.label === 'object') lab = this.label['@value'];\n\tif (this.label && typeof this.label === 'string') lab = this.label;\n\t// always return something\n\tif (!lab && this.property()) lab = FrameHelper.labelFromURL(this.property());\n\tif (!lab) lab = FrameHelper.labelFromURL(this.cls);\n\treturn lab;\n};\n\nDataFrame.prototype.getType = function () {\n\tif (this.range) return this.range;\n\tif (this.rangeValue && this.rangeValue.type) return this.rangeValue.type;\n\treturn false;\n};\n\nObjectFrame.prototype.getLabel = DataFrame.prototype.getLabel;\n\nDataFrame.prototype.getComment = function () {\n\tlet comment = '';\n\tif (this.comment && typeof this.comment === 'object') comment = this.comment['@value'];\n\tif (this.comment && typeof this.comment === 'string') comment = this.comment;\n\treturn comment;\n};\n\nObjectFrame.prototype.getComment = DataFrame.prototype.getComment;\n\n\nDataFrame.prototype.error = function (msg) {\n\tif (msg)\tthis.err = msg;\n\treturn this.err;\n};\n\nDataFrame.prototype.isValid = function () {\n\tif (!(this.type && this.isValidType(this.type))) {\n\t\tthis.error(`Missing or Illegal Frame Type ${this.type}`);\n\t\treturn false;\n\t}\n\tif (!(this.predicate)) {\n\t\tthis.error('Missing Frame Property');\n\t\treturn false;\n\t}\n\tif (!(this.domain)) {\n\t\tthis.error('Missing Frame Domain');\n\t\treturn false;\n\t}\n\tif (!(this.range)) {\n\t\tthis.error('Missing Frame Range');\n\t\treturn false;\n\t}\n\tif (this.isObjectProperty() && !(this.frame && typeof this.frame === 'object')) {\n\t\tthis.error('Missing Object Frame');\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nDataFrame.prototype.isObjectProperty = function () {\n\treturn this.type === 'objectProperty';\n};\n\nDataFrame.prototype.isDatatypeProperty = function () {\n\treturn this.type === 'datatypeProperty';\n};\n\nDataFrame.prototype.isLogic = function () {\n\tif (this.type === 'and' || this.type === 'or' || this.type === 'xor') {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.isRestriction = function () {\n\treturn this.type === 'restriction';\n};\n\nDataFrame.prototype.ftype = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isDatatypeProperty()) return 'data';\n\tif (this.isChoice()) return 'oneOf';\n\tif (this.isObject()) return 'object';\n\tif (this.isLogic()) return 'logic';\n\tif (this.isClassChoice()) return 'class_choice';\n\treturn undefined;\n};\n\n\nDataFrame.prototype.isClassChoice = function () {\n\treturn (this.frame && this.frame.type === 'class_choice');\n};\n\nDataFrame.prototype.isString = function () {\n\tif (this.range === FrameHelper.getStdURL('xsd', 'string')) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.getChoiceOptions = function () {\n\tconst opts = [];\n\tfor (let i = 0; i < this.frame.elements.length; i += 1) {\n\t\tconst option = {};\n\t\tif (this.frame.elements[i].label) {\n\t\t\toption.label = this.frame.elements[i].label['@value'];\n\t\t} else {\n\t\t\toption.label = FrameHelper.labelFromURL(this.frame.elements[i].class);\n\t\t}\n\t\toption.value = this.frame.elements[i].class;\n\t\topts.push(option);\n\t}\n\treturn opts;\n};\n\nDataFrame.prototype.lang = function () {\n\treturn 'en';\n};\n\nDataFrame.prototype.isChoice = function () {\n\treturn (this.frame && this.frame.type === 'oneOf');\n};\n\nDataFrame.prototype.isDocument = function () {\n\treturn (this.frame && this.frame.type === 'document');\n};\n\nDataFrame.prototype.isData = function () {\n\treturn (this.isDocument() || this.isChoice() || this.isDatatypeProperty());\n};\n\nDataFrame.prototype.isObject = function () {\n\treturn (this.isObjectProperty() && this.frame && !(this.isChoice() || this.isDocument()));\n};\n\nDataFrame.prototype.isProperty = function () {\n\treturn false;\n};\n\nDataFrame.prototype.getTypeShorthand = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isChoice()) return 'choice';\n\tconst sh = FrameHelper.getShorthand(this.getType());\n\treturn (sh || this.getType());\n};\n\nDataFrame.prototype.get = function () {\n\tif (this.contents) {\n\t\treturn this.contents;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue && typeof this.rangeValue['@value'] !== 'undefined') {\n\t\treturn this.rangeValue['@value'];\n\t}\n\tif (this.isChoice() || this.isDocument()) {\n\t\treturn this.frame.domainValue;\n\t}\n\treturn '';\n};\n\nDataFrame.prototype.set = function (value, normalizer) {\n\tif (normalizer) value = normalizer(value, this);\n\tthis.contents = value;\n\tif (this.isChoice() || this.isDocument()) {\n\t\tthis.frame.domainValue = value;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue) {\n\t\tthis.rangeValue['@value'] = value;\n\t}\n};\n\nDataFrame.prototype.clear = function () {\n\tif (this.isDocument() || this.isChoice() || this.isDatatypeProperty()) {\n\t\tthis.set('');\n\t}\n};\n\nDataFrame.prototype.cardControlAllows = function(action){\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n\n/*\n * Class frames represent the archetypal version of a property frame as returned by the class frame api\n */\nfunction ClassFrame(frame, parent) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nClassFrame.prototype = DataFrame.prototype;\n\nClassFrame.prototype.loadFromObjectFrame = function (par, child) {\n\t// all the meta-data carried in frames:\n\tthis.type = 'objectProperty';\n\tthis.predicate = par.property;\n\tthis.range = par.range;\n\tthis.rangeValue = child.subjid;\n\tthis.domain = par.cls;\n\tthis.domainValue = par.subjid;\n\tthis.label = par.getLabel();\n\tthis.comment = par.getComment();\n\tthis.restriction = par.restriction;\n};\n\nClassFrame.prototype.createEmptyChoice = function (cls, newid) {\n\tconst cf = this.getChosenClassFrames(cls);\n\tconst objframe = new ObjectFrame(cls);\n\tif (newid) objframe.subjid = newid;\n\tobjframe.loadClassFrames(cf);\n\tconst fframe = objframe.fillFromSchema();\n\treturn fframe;\n};\n\nClassFrame.prototype.getChosenClassFrames = function (chosen) {\n\tlet nc = [];\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\tif (chosen === this.frame.operands[i][j].domain) {\n\t\t\t\tnc = nc.concat(this.frame.operands[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\treturn nc;\n};\n\nClassFrame.prototype.createEmpty = function (newid) {\n\tif (this.isObject()) {\n\t\tconst objframe = new ObjectFrame(this.range);\n\t\tif (newid) objframe.subjid = newid;\n\t\tobjframe.loadClassFrames(this.frame);\n\t\tconst fframe = objframe.fillFromSchema();\n\t\treturn fframe;\n\t}\n\tif (this.isData()) {\n\t\tconst dataframe = this.copy();\n\t\tdataframe.set('');\n\t\treturn dataframe;\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.cloneDataFrame = function (newid, other) {\n\treturn other;\n};\n\nClassFrame.prototype.clone = function (newid, other) {\n\tif (this.isObject()) {\n\t\tconsole.log('cannot clone class frame');\n\t} else if (this.isData()) {\n\t\treturn this.cloneDataFrame(newid, other);\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.getClassChoices = function () {\n\tconst choices = [];\n\tif (this.frame.operands) {\n\t\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\t\tconst domcls = this.frame.operands[i][j].domain;\n\t\t\t\tif (domcls && choices.indexOf(domcls) === -1) {\n\t\t\t\t\tchoices.push(domcls);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn choices;\n};\n\nClassFrame.prototype.getChosenClassFrame = function (chosen) {\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tconst operand = this.frame.operands[i];\n\t\tif (operand.length) {\n\t\t\tfor (let j = 0; j < operand.length; j += 1) {\n\t\t\t\tif (operand[j] && (chosen === operand[j].domain)) {\n\t\t\t\t\tconst cf = new ClassFrame(operand);\n\t\t\t\t\treturn cf;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (operand.range && chosen === operand.range) {\n\t\t\tconst cf = new ClassFrame(operand);\n\t\t\treturn cf;\n\t\t}\n\t}\n\treturn false;\n};\n\nClassFrame.prototype.getChosenFrame = function (dataframe) {\n\treturn dataframe;\n};\n\n\nfunction Restriction(restriction) {\n\tthis.min = 0;\n\tthis.max = 0;\n\tif (restriction) this.loadRestriction(restriction);\n}\n\nRestriction.prototype.hasCardRestriction = function () {\n\tif (this.min === 0 && this.max === 0) return false;\n\treturn true;\n};\n\nRestriction.prototype.loadRestriction = function (restriction) {\n\tif (typeof restriction.cardinality !== 'undefined') {\n\t\tthis.max = restriction.cardinality;\n\t\tthis.min = restriction.cardinality;\n\t} else if (typeof restriction.maxCardinality !== 'undefined') {\n\t\tthis.max = restriction.maxCardinality;\n\t} else if (typeof restriction.minCardinality !== 'undefined') {\n\t\tthis.min = restriction.minCardinality;\n\t} else if (typeof restriction.type !== 'undefined' && restriction.type === 'and' && typeof restriction.operands === 'object') {\n\t\tfor (let i = 0; i < restriction.operands.length; i += 1) {\n\t\t\tconst nrest = new Restriction(restriction.operands[i]);\n\t\t\tif (this.max === 0 && nrest.max > 0) this.max = nrest.max;\n\t\t\telse if (this.max > 0 && nrest.max > 0 && nrest.max < this.max) this.max = nrest.max;\n\t\t\tif (this.min === 0 && nrest.min > 0) this.min = nrest.min;\n\t\t\telse if (this.min > 0 && nrest.min > 0 && nrest.min > this.min) this.min = nrest.min;\n\t\t}\n\t}\n};\n\nmodule.exports = ObjectFrame;\n","const FrameHelper = require('./frameHelper');\n\nfunction WOQLResult(results, query, config) {\n\tthis.bindings = results.bindings;\n\tif(query.constructor.name == \"WOQLQuery\"){\n\t\tthis.query = query;\n\t}\n\telse {\n\t\tthis.query = query.query;\n\t}\n\tthis.cursor = 0;\n\tif (!(config && config.no_compress)) {\n\t\tconst context = (config && config.context ? config.context : false);\n\t\tthis.compress(context);\n\t}\n}\n\nWOQLResult.prototype.compress = function (context) {\n\tcontext = (context || this.query.getContext());\n\tfor (let i = 0; i < this.bindings.length; i++) {\n\t\tfor (const prop of Object.keys(this.bindings[i])) {\n\t\t\tconst nprop = FrameHelper.shorten(prop, context);\n\t\t\tconst nval = ((typeof this.bindings[i][prop] === 'string')\n\t\t\t\t? FrameHelper.shorten(this.bindings[i][prop], context)\n\t\t\t\t: this.bindings[i][prop]\n\t\t\t);\n\t\t\tdelete (this.bindings[i][prop]);\n\t\t\tthis.bindings[i][nprop] = nval;\n\t\t}\n\t}\n\treturn this;\n}\n\nWOQLResult.prototype.first = function () {\n\tthis.cursor = 0;\n\treturn this.bindings[0];\n};\n\nWOQLResult.prototype.last = function(){\n\tthis.cursor = this.bindings.length-1;\n\treturn this.bindings[this.bindings.length-1];\n}\n\nWOQLResult.prototype.next = function () {\n\tconst res = this.bindings[this.cursor];\n\tthis.cursor++;\n\treturn res;\n};\n\nWOQLResult.prototype.prev = function () {\n\tif (this.cursor > 0) {\n\t\tthis.cursor--;\n\t\treturn this.bindings[this.cursor];\n\t}\n};\n\nWOQLResult.prototype.compareValues = function(a, b, asc_or_desc){\n\tif(!a || !b) return 0;\n\tif(typeof a['@value'] != \"undefined\" && typeof b['@value'] != \"undefined\"){\n\t\ta = a['@value'];\n\t\tb = b['@value'];\n\t}\n\tif (a > b) {\n\t\treturn (asc_or_desc && asc_or_desc == 'asc' ? 1 : -1);\n\t}\n\tif (b > a) {\n\t\treturn (asc_or_desc && asc_or_desc == 'asc' ? -1 : 1);\n\t}\n};\n\nWOQLResult.prototype.sort = function(key, asc_or_desc){\n\tthis.bindings.sort((a, b) => {\n\t\treturn this.compareValues(a[key], b[key], asc_or_desc);\n\t});\n\tthis;\n}\n\nWOQLResult.prototype.getVariableList = function () {\n\tif (this.bindings && this.bindings[0]) {\n\t\treturn Object.keys(this.bindings[0]);\n\t}\n};\n\nWOQLResult.prototype.count = function () {\n\treturn this.bindings.length;\n};\n\nWOQLResult.prototype.hasBindings = function (result) {\n\treturn (this.bindings && this.count());\n};\n\nWOQLResult.prototype.getBindings = function () {\n\treturn this.bindings;\n};\n\nmodule.exports = WOQLResult;\n","/**\n * The WOQL object is a wrapper around the WOQL query object\n * Syntactic sugar to allow you to write WOQL.triple()... instead of new WOQLQuery().triple()\n * Every function matches one of the public api functions of the woql query object\n */\n\nconst FrameHelper = require('./frameHelper');\nconst Pattern = require('./framePattern');\n\nconst WOQL = {};\n\n/*\n * We expose all the real woql predicates via the WOQL object,\n * for ease of typing - all return a WOQL query object\n */\nWOQL.when = function(Query, Update){ return new WOQLQuery().when(Query, Update);}\nWOQL.opt = function(query){ return new WOQLQuery().opt(query); }\nWOQL.from = function(dburl, query){ return new WOQLQuery().from(dburl, query); }\nWOQL.into = function(dburl, query){ return new WOQLQuery().into(dburl, query); }\nWOQL.limit = function(limit, query){ return new WOQLQuery().limit(limit, query); }\nWOQL.start = function(start, query){ return new WOQLQuery().start(start, query); }\nWOQL.select = function(...list){ return new WOQLQuery().select(...list); }\nWOQL.or = function(...queries){\treturn new WOQLQuery().or(...queries); }\nWOQL.and = function(...queries){ return new WOQLQuery().and(...queries); }\nWOQL.not = function(query){ return new WOQLQuery().not(query); }\nWOQL.triple = function(a, b, c){ return new WOQLQuery().triple(a, b, c); }\nWOQL.quad = function(a, b, c, d){ return new WOQLQuery().quad(a, b, c, d); }\nWOQL.sub = function(a, b){ return new WOQLQuery().sub(a, b); }\nWOQL.isa = function(a, b){\treturn new WOQLQuery().isa(a, b);\t}\nWOQL.eq = function(a, b){ return new WOQLQuery().eq(a, b);}\nWOQL.trim = function(a, b){\treturn new WOQLQuery().trim(a, b);\t}\nWOQL.delete = function(JSON_or_IRI){ return new WOQLQuery().delete(JSON_or_IRI);\t}\nWOQL.delete_triple = function( S, P, O ){ return new WOQLQuery().delete_triple (S, P, O);\t}\nWOQL.delete_quad = function( S, P, O, G ){ return new WOQLQuery().delete_quad (S, P, O, G); }\nWOQL.add_triple = function( S, P, O ){ return new WOQLQuery().add_triple (S, P, O); }\nWOQL.add_quad = function( S, P, O, G ){ \treturn new WOQLQuery().add_quad (S, P, O, G);}\nWOQL.get = function(vars, cols, target){\treturn new WOQLQuery().get(vars, cols, target); }\nWOQL.as = function(map, vari){\treturn new WOQLQuery().as(map, vari); }\nWOQL.remote = function(url){\treturn new WOQLQuery().remote(url); }\nWOQL.file = function(url){\treturn new WOQLQuery().file(url); }\nWOQL.list = function(...vars){\treturn new WOQLQuery().list(...vars); }\nWOQL.group_by = function(gvarlist, groupedvar, groupquery, output){\treturn new WOQLQuery().group_by(gvarlist, groupedvar, groupquery, output); }\nWOQL.update = function(Q){\treturn new WOQLQuery().update(Q); }\n\n/* String and other processing functions */\nWOQL.concat = function(list, v){\treturn new WOQLQuery().concat(list, v); }\nWOQL.lower = function(u, l){\treturn new WOQLQuery().lower(u, l); }\nWOQL.pad = function(input, pad, len, output){\treturn new WOQLQuery().pad(input, pad, len, output); }\nWOQL.join = function(...list){\treturn new WOQLQuery().join(...list); }\nWOQL.unique = function(prefix, vari, type){\treturn new WOQLQuery().unique(prefix, vari, type); }\nWOQL.idgen = function(prefix, vari, type, output){\treturn new WOQLQuery().idgen(prefix, vari, type, output); }\nWOQL.typecast = function(vara, type, varb){\treturn new WOQLQuery().typecast(vara, type, varb); }\nWOQL.re = function(pattern, test, matches){\treturn new WOQLQuery().re(pattern, test, matches); }\n\nWOQL.less = function(v1, v2){\treturn new WOQLQuery().less(v1, v2); }\nWOQL.greater = function(v1, v2){\treturn new WOQLQuery().greater(v1, v2); }\n\n\n/* Mathematical Processing */\nWOQL.eval = function(arith, v){\treturn new WOQLQuery().eval(arith, v);}\nWOQL.plus = function(...args){\treturn new WOQLQuery().plus(...args);}\nWOQL.minus = function(...args){\treturn new WOQLQuery().minus(...args); }\nWOQL.times = function(...args){\treturn new WOQLQuery().times(...args); }\nWOQL.divide = function(...args){ return new WOQLQuery().divide(...args); }\nWOQL.exp = function(a, b){\treturn new WOQLQuery().exp(a, b); }\nWOQL.div = function(...args){\treturn new WOQLQuery().div(...args); }\nWOQL.comment = function(arg){\treturn new WOQLQuery().comment(arg); }\nWOQL.length = function(var1, res){\treturn new WOQLQuery().length(var1, res);}\n\n\n//language extensions that can be chained after 'grounded' stuff (clauses with a specific subject) sub, isa, delete_triple, add_triple, delete_quad, add_quad, node\n//WOQL.value = function(vars){\treturn new WOQLQuery().list(vars); }\n//These ones are special ones for dealing with the schema only...\nWOQL.star = function(G, S, P, O){\treturn new WOQLQuery().star(G, S, P, O); }\nWOQL.addClass = function(classid, graph){\treturn new WOQLQuery().addClass(classid, graph); }\nWOQL.addProperty = function(propid, type, graph){\treturn new WOQLQuery().addProperty(propid, type, graph); }\nWOQL.deleteClass = function(classid, graph){\treturn new WOQLQuery().deleteClass(classid, graph); }\nWOQL.deleteProperty = function(propid, type, graph){\treturn new WOQLQuery().deleteProperty(propid, type, graph); }\nWOQL.node = function(nodeid, type){\treturn new WOQLQuery().node(nodeid, type); }\n\n\n/*\n * Beneath here are pseudo predicates - they belong to the javascript object\n * but not to the WOQL language\n */\n//returns empty query object\nWOQL.query = function(){\treturn new WOQLQuery(); }\n//loads query from json\nWOQL.json = function(json){\treturn new WOQLQuery().json(json); }\n\nWOQL.rule = function(){ return new Pattern.FrameRule(); }\n//Simple utility function for typechecking\nWOQL.isLiteralType = function(t){\n\tif(t){\n\t\tvar pref = t.split(\":\");\n\t\tif(pref[0] == \"xdd\" || pref[0] == \"xsd\") return true;\n\t}\n\treturn false;\n}\n/**\n * The WOQL Query object implements the WOQL language via the fluent style\n * @param query - json version of query\n * @returns WOQLQuery object\n */\nfunction WOQLQuery(query){\n\tthis.query = (query ? query : {});\n\tthis.cursor = this.query;\n\tthis.chain_ended = false;\n\tthis.contains_update = false;\n\t// operators which preserve global paging\n\tthis.paging_transitive_properties = ['select', 'from', 'start', 'when', 'opt', 'limit'];\n\tthis.vocab = this.loadDefaultVocabulary();\n\t//object used to accumulate triples from fragments to support usage like node(\"x\").label(\"y\");\n\tthis.tripleBuilder = false;\n\treturn this;\n}\n\n/**\n * Takes an array of variables, an optional array of column names\n */\nWOQLQuery.prototype.get = function(arr1, arr2, target){\n\tif(arr1.json){\n\t\tvar map = arr1.json();\n\t\ttarget = arr2;\n\t}\n\telse {\n\t\tvar map = this.buildAsClauses(arr1, arr2);\n\t}\n\tif(target){\n\t\tif(target.json) target = target.json();\n\t\tthis.cursor['get'] = [map, target];\n\t}\n\telse {\n\t\tthis.cursor['get'] = [map, {}];\n\t\tthis.cursor = this.cursor[\"get\"][1];\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.buildAsClauses = function(vars, cols){\n\tvar clauses = [];\n\tif(vars && typeof vars == \"object\" && vars.length){\n\t\tfor(var i = 0; i<vars.length; i++){\n\t\t\tvar v = vars[i];\n\t\t\tif(cols && typeof cols == \"object\" && cols.length){\n\t\t\t\tvar c = cols[i];\n\t\t\t\tif(typeof c == \"string\"){\n\t\t\t\t\tc = {\"@value\": c};\n\t\t\t\t}\n\t\t\t\tclauses.push({as: [c, v]});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tv.as ? clauses.push(v) : clauses.push({as: [v]});\n\t\t\t}\n\t\t}\n\t}\n\treturn clauses;\n}\n\nWOQLQuery.prototype.typecast = function(va, type, vb){\n\tthis.cursor['typecast'] = [va, type, vb];\n\treturn this;\n}\n\nWOQLQuery.prototype.length = function(va, vb){\n\tthis.cursor['length'] = [va, vb];\n\treturn this;\n}\n\nWOQLQuery.prototype.re = function(p, s, m){\n\tthis.cursor['re'] = [p, s, m];\n\treturn this;\n}\n\nWOQLQuery.prototype.remote = function(json){\n\tthis.cursor['remote'] = [json];\n\treturn this;\n}\n\nWOQLQuery.prototype.file = function(json){\n\tthis.cursor['file'] = [json];\n\treturn this;\n}\n\n//WOQL.group_by = function(gvarlist, groupedvar, groupquery, output){\treturn new WOQLQuery().group_by(gvarlist, groupedvar, groupquery, output); }\n\nWOQLQuery.prototype.group_by = function(gvarlist, groupedvar, groupquery, output){\n\tvar args = [];\n\tthis.cursor['group_by'] = args;\n\tif(gvarlist.json){\n\t\targs.push(gvarlist.json());\n\t}\n\tif(gvarlist['list']){\n\t\targs.push(gvarlist);\n\t}\n\telse {\n\t\targs.push({'list': gvarlist});\n\t}\n\tif(typeof groupedvar == \"object\" && Array.isArray(groupedvar)){\n\t\tng = [];\n\t\tfor(var i = 0; i<groupedvar.length; i++){\n\t\t\tng.push(groupedvar[i].substring(0, 2) != \"v:\" ? \"v:\" + groupedvar[i] : groupedvar[i]);\n\t\t}\n\t\tgroupedvar = {\"list\": ng};\n\t}\n\telse if(typeof groupedvar == \"string\"){\n\t\tif(groupedvar.substring(0, 2) != \"v:\") groupedvar = \"v:\" + groupedvar;\n\t}\n\targs.push(groupedvar);\n\tif(output){\n\t\tgroupquery = groupquery.json ? groupquery.json() : groupquery;\n\t\targs.push(groupquery);\n\t}\n\telse {\n\t\toutput = groupquery;\n\t\tvar sq = {};\n\t\tthis.cursor = sq;\n\t\targs.push(sq);\n\t}\n\tif(output.substring(0, 2) != \"v:\") output = \"v:\" + output;\n\targs.push(output);\n\treturn this;\n}\n\nWOQLQuery.prototype.idgen = function(prefix, vari, type, mode){\n\tthis.cursor['idgen'] = [prefix];\n\tif(vari.json){\n\t\tthis.cursor['idgen'].push(vari.json());\n\t}\n\telse if(vari.list){\n\t\tthis.cursor['idgen'].push(vari);\n\t}\n\telse {\n\t\tthis.cursor['idgen'].push({\"list\": vari})\n\t}\n\tif(mode){\n\t\tthis.cursor['idgen'].push(mode);\n\t}\n\tthis.cursor['idgen'].push(type);\n\treturn this;\n}\n\n\nWOQLQuery.prototype.unique = function(prefix, vari, type){\n\tthis.cursor['unique'] = [prefix];\n\tif(vari.json){\n\t\tthis.cursor['unique'].push(vari.json());\n\t}\n\telse if(vari.list){\n\t\tthis.cursor['unique'].push(vari);\n\t}\n\telse {\n\t\tthis.cursor['unique'].push({\"list\": vari})\n\t}\n\tthis.cursor['unique'].push(type);\n\treturn this;\n}\n\n\nWOQLQuery.prototype.concat = function(list, v){\n\tif(typeof list == \"string\"){\n\t\tvar nlist = list.split(/(v:[\\w_]+)\\b/);\n\t\tvar nxlist = [];\n\t\tfor(var i = 1; i<nlist.length; i++){\n\t\t\tif(nlist[i-1].substring(nlist[i-1].length-1) == \"v\" && nlist[i].substring(0, 1) == \":\"){\n\t\t\t\tnlist[i-1] = nlist[i-1].substring(0, nlist[i-1].length-1);\n\t\t\t\tnlist[i] = nlist[i].substring(1);\n\t\t\t}\n\t\t}\n\t}\n\telse if(list.list){\n\t\tvar nlist = list.list;\n\t}\n\telse if(typeof list == \"object\"){\n\t\tvar nlist = list;\n\t}\n\tvar args = [];\n\tfor(var i = 0; i<nlist.length; i++){\n\t\tif(!nlist[i]) continue;\n\t\tif(typeof nlist[i] == \"string\"){\n\t\t\tif(nlist[i].substring(0, 2) == \"v:\"){\n\t\t\t\targs.push(nlist[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar nvalue = {\"@value\": nlist[i], \"@type\": \"xsd:string\"};\n\t\t\t\targs.push(nvalue);\n\t\t\t}\n\t\t}\n\t\telse if(nlist[i]){\n\t\t\targs.push(nlist[i]);\n\t\t}\n\t}\n\tif(v.indexOf(\":\") == -1) v = \"v:\" + v;\n\tthis.cursor['concat'] = [{\"list\": args}, v];\n\treturn this;\n};\n\nWOQLQuery.prototype.lower = function(u, l){\n\tthis.cursor['lower'] = [u, l];\n\treturn this;\n};\n\nWOQLQuery.prototype.pad = function(input, pad, len, output){\n\tthis.cursor['pad'] = [input, pad, len, output];\n\treturn this;\n}\n\nWOQLQuery.prototype.join = function(...list){\n\tthis.cursor['join'] = list;\n\treturn this;\n}\n\nWOQLQuery.prototype.less = function(v1, v2){\n\tthis.cursor['less'] = [v1, v2];\n\treturn this;\n}\n\nWOQLQuery.prototype.greater = function(v1, v2){\n\tthis.cursor['greater'] = [v1, v2];\n\treturn this;\n}\n\n\nWOQLQuery.prototype.list  = function(...vars){\n\tthis.cursor['list'] = vars;\n\treturn this;\n}\n\n\n/*\n * json version of query for passing to api\n */\nWOQLQuery.prototype.json = function(json){\n\tif(json){\n\t\tthis.query = json;\n\t\treturn this;\n\t}\n\treturn this.query;\n}\n\n/*\n * Functions which take a query as an argument advance the cursor to make the chaining of queries fall\n * into the corrent place in the encompassing json\n */\nWOQLQuery.prototype.when = function(Query, Update){\n\tif(typeof Query == 'boolean'){\n\t\tif(Query){\n\t\t\tthis.cursor[\"when\"] = [{\"true\": []}, {}];\n\t\t}\n\t\telse {\n\t\t\tthis.cursor[\"when\"] = [{\"false\": []}, {}];\n\t\t}\n\t}\n\telse {\n\t\tvar q = (Query.json ? Query.json() : Query);\n\t\tthis.cursor['when'] = [q, {}];\n\t}\n\tif(Update){\n\t\tvar upd = (Update.json ? Update.json() : Update);\n\t\tthis.cursor[\"when\"][1] = upd;\n\t}\n\tthis.cursor = this.cursor[\"when\"][1];\n\treturn this;\n}\n\nWOQLQuery.prototype.opt = function(query){\n\tif(query){\n\t\tvar q = ((typeof query.json == \"function\") ? query.json() : query);\n\t\tthis.cursor[\"opt\"] = [q];\n\t}\n\telse {\n\t\tthis.cursor['opt'] = [{}];\n\t\tthis.cursor = this.cursor[\"opt\"][0];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.from = function(dburl, query){\n\tthis.advanceCursor(\"from\", dburl);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.into = function(dburl, query){\n\tthis.advanceCursor(\"into\", dburl);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n};\n\n\nWOQLQuery.prototype.limit = function(limit, query){\n\tthis.advanceCursor(\"limit\", limit);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.start = function(start, query){\n\tthis.advanceCursor(\"start\", start);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.select = function (...list) {\n\tthis.cursor.select = list;\n\tconst index = list.length;\n\tif (typeof this.cursor.select[index - 1] === 'object') {\n\t\tthis.cursor.select[index - 1] = this.cursor.select[index - 1].json();\n\t} else {\n\t\tthis.cursor.select[index] = {};\n\t\tthis.cursor = this.cursor.select[index];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.and = function (...queries) {\n\tthis.cursor.and = [];\n\tfor (let i = 0; i < queries.length; i++) {\n\t\tif (queries[i].contains_update) this.contains_update = true;\n\t\tthis.cursor.and.push(queries[i].json());\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.or = function (...queries) {\n\tthis.cursor.or = [];\n\tfor (let i = 0; i < queries.length; i++) {\n\t\tif (queries[i].contains_update) this.contains_update = true;\n\t\tthis.cursor.or.push(queries[i].json());\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.not = function (query) {\n\tif (query) {\n\t\tif (query.contains_update) this.contains_update = true;\n\t\tthis.cursor.not = [query.json()];\n\t} else {\n\t\tthis.cursor.not = [{}];\n\t\tthis.cursor = this.cursor.not[0];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.triple = function(a, b, c){\n\tthis.cursor[\"triple\"] = [this.cleanSubject(a),this.cleanPredicate(b),this.cleanObject(c)];\n\treturn this.last(\"triple\", this.cleanSubject(a));\n}\n\nWOQLQuery.prototype.quad = function(a, b, c, g){\n\tthis.cursor[\"quad\"] = [this.cleanSubject(a),this.cleanPredicate(b),this.cleanObject(c),this.cleanGraph(g)];\n\treturn this.last(\"quad\", this.cleanSubject(a));\n}\n\nWOQLQuery.prototype.eq = function(a, b){\n\tthis.cursor[\"eq\"] = [this.cleanObject(a),this.cleanObject(b)];\n\treturn this.last();\n};\n\nWOQLQuery.prototype.sub = function(a, b){\n\tif(!b && this.tripleBuilder){\n\t\tthis.tripleBuilder.sub(this.cleanClass(a));\n\t\treturn this;\n\t}\n\tthis.cursor[\"sub\"] = [this.cleanClass(a),this.cleanClass(b)];\n\treturn this.last(\"sub\", a);\n}\n\nWOQLQuery.prototype.comment = function(val){\n\tif(val && val.json){\n\t\tthis.cursor['comment'] = [val.json()];\n\t}\n\telse if(typeof val == \"string\"){\n\t\tthis.cursor['comment'] = [{\"@value\": val, \"@language\": \"en\"}];\n\t}\n\telse if(typeof val == \"object\"){\n\t\tif(val.length) this.cursor['comment'] = val;\n\t\telse this.cursor['comment'] = [val];\n\t}\n\telse {\n\t\tthis.cursor['comment'] = [];\n\t}\n\tvar last_index = this.cursor['comment'].length;\n\tthis.cursor['comment'][last_index] = {};\n\tthis.cursor = this.cursor['comment'][last_index];\n\treturn this;\n}\n\n\nWOQLQuery.prototype.abstract = function(varname){\n\tif(varname){\n\t\treturn this.quad(varname, \"tcs:tag\", \"tcs:abstract\", \"db:schema\");\n\t}\n\telse if(this.tripleBuilder){\n\t\tthis.tripleBuilder.abstract();\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.isa = function(a, b){\n\tif(!b && this.tripleBuilder){\n\t\tthis.tripleBuilder.isa(this.cleanClass(a));\n\t\treturn this;\n\t}\n\tif(b){\n\t\tthis.cursor[\"isa\"] = [this.cleanClass(a),this.cleanClass(b)];\n\t\treturn this.last(\"isa\", a);\n\t}\n}\n\nWOQLQuery.prototype.trim = function(a, b){\n\tthis.cursor['trim'] = [a, b];\n\treturn this.last('trim', b);\n}\n\nWOQLQuery.prototype.eval = function(arith, v){\n\tarith = arith.json ? arith.json() : arith;\n\tthis.cursor['eval'] = [arith, v];\n\treturn this.last('eval', v);\n}\n\nWOQLQuery.prototype.plus = function (...args) {\n\tthis.cursor.plus = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.plus.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.minus = function (...args) {\n\tthis.cursor.minus = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.minus.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.times = function (...args) {\n\tthis.cursor.times = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.times.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.divide = function (...args) {\n\tthis.cursor.divide = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.divide.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.div = function (...args) {\n\tthis.cursor.div = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.div.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.exp = function (a, b) {\n\ta = (a.json ? a.json() : a);\n\tb = (b.json ? b.json() : b);\n\tthis.cursor.exp = [a, b];\n\treturn this.last();\n};\n\nWOQLQuery.prototype.delete = function (JSON_or_IRI) {\n\tthis.cursor.delete = [JSON_or_IRI];\n\treturn this.lastUpdate();\n};\n\nWOQLQuery.prototype.delete_triple = function( Subject, Predicate, Object_or_Literal ){\n\tthis.cursor['delete_triple'] = [this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal)];\n\treturn this.lastUpdate('delete_triple', this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.add_triple = function( Subject, Predicate, Object_or_Literal ){\n\tthis.cursor['add_triple'] =[this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal)];\n\treturn this.lastUpdate('add_triple', this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.delete_quad = function( Subject, Predicate, Object_or_Literal, Graph ){\n\tthis.cursor['delete_quad'] =[this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal),this.cleanGraph(Graph)];\n\treturn this.lastUpdate('delete_quad', this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.add_quad = function( Subject, Predicate, Object_or_Literal, Graph){\n\tthis.cursor['add_quad'] = [this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal),this.cleanGraph(Graph)];\n\treturn this.lastUpdate(\"add_quad\", this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.update = function(woql){\n\tthis.cursor['update'] = [ woql.json() ];\n\treturn this.lastUpdate();\n}\n\n/**\n * Schema manipulation shorthand\n */\nWOQLQuery.prototype.addClass = function(c, graph){\n\tif(c){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tc = (c.indexOf(\":\") == -1) ? \"scm:\" + c : c;\n\t\tthis.add_quad(c, \"rdf:type\", \"owl:Class\", graph);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.addProperty = function(p, t, g){\n\tt = (t ? t : \"xsd:string\");\n\tif(p){\n\t\tvar graph = (g ? this.cleanGraph(g) : \"db:schema\");\n\t\tp = (p.indexOf(\":\") == -1) ?  \"scm:\" + p : p;\n\t\tt = (t.indexOf(\":\") == -1) ? this.cleanType(t) : t ;\n\t\tvar tc = this.cursor;\n\t\tif(WOQL.isLiteralType(t)){\n\t\t\tthis.and(\n\t\t\t\tWOQL.add_quad(p, \"rdf:type\", \"owl:DatatypeProperty\", graph),\n\t\t\t\tWOQL.add_quad(p, \"rdfs:range\", t, graph)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tthis.and(\n\t\t\t\tWOQL.add_quad(p, \"rdf:type\", \"owl:ObjectProperty\", graph),\n\t\t\t\tWOQL.add_quad(p, \"rdfs:range\", t, graph)\n\t\t\t);\n\t\t}\n\t}\n\treturn this.lastUpdate(\"add_quad\", this.cleanClass(p));\n}\n\nWOQLQuery.prototype.deleteClass = function(c, graph){\n\tif(c){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tc = (c.indexOf(\":\") == -1) ?  \"scm:\" + c : c;\n\t\treturn this.and(\n\t\t\tWOQL.delete_quad(c, \"v:All\", \"v:Al2\", graph),\n\t\t\tWOQL.opt().delete_quad(\"v:Al3\", \"v:Al4\", c, graph)\n\t\t);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.deleteProperty = function(p, graph){\n\tif(p){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tp = (p.indexOf(\":\") == -1) ? \"scm:\" + p : p;\n\t\treturn this.and(\n\t\t\tWOQL.delete_quad(p, \"v:All\", \"v:Al2\", graph),\n\t\t\tWOQL.delete_quad(\"v:Al3\", \"v:Al4\", p, graph)\n\t\t);\n\t}\n\treturn this;\n}\n\n/**\n * Language elements that cannot be invoked from the top level and therefore are not exposed in the WOQL api\n */\nWOQLQuery.prototype.as = function(a, b){\n\tif(!a || !b) return;\n\tif(!this.asArray){\n\t\tthis.asArray = true;\n\t\tthis.query = [];\n\t}\n\tb = (b.indexOf(\":\") == -1 ? \"v:\" + b : b);\n\tvar val = (typeof a == \"object\" ? a : { \"@value\" : a});\n\tthis.query.push({as: [val, b]});\n\treturn this;\n}\n\n/**\n * WOQL API\n */\n\nWOQLQuery.prototype.node = function(node, type){\n\ttype = (type ? type : \"triple\");\n\tthis.tripleBuilder = new TripleBuilder(type, this.cursor, node);\n\treturn this;\n}\n\nWOQLQuery.prototype.max = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"max\");\n\treturn this;\n}\n\nWOQLQuery.prototype.cardinality = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"cardinality\");\n\treturn this;\n}\n\nWOQLQuery.prototype.min = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"min\");\n\treturn this;\n}\n\nWOQLQuery.prototype.graph = function(g){\n\tg = this.cleanGraph(g);\n\tvar t = (this.type == \"triple\") ? \"quad\" : false;\n\tif(this.type == \"add_triple\") t = \"add_quad\";\n\tif(this.type == \"delete_triple\") t = \"delete_quad\";\n\tif(!this.tripleBuilder){\n\t\tthis.tripleBuilder = new TripleBuilder(t, this.cursor);\n\t}\n\tthis.tripleBuilder.graph(g);\n\treturn this;\n}\n\nWOQLQuery.prototype.domain = function(d){\n\td = this.cleanClass(d);\n\tif(this.tripleBuilder) this.tripleBuilder.addPO('rdfs:domain',d);\n\treturn this;\n}\n\nWOQLQuery.prototype.label = function(l, lang){\n\tif(this.tripleBuilder) this.tripleBuilder.label(l, lang);\n\treturn this;\n}\n\nWOQLQuery.prototype.description = function(c, lang){\n\tif(this.tripleBuilder) this.tripleBuilder.description(c, lang);\n\treturn this;\n}\n\nWOQLQuery.prototype.parent = function(...p){\n\tif(this.tripleBuilder){\n\t\tfor(var i = 0 ; i<p.length; i++){\n\t\t\tvar pn = this.cleanClass(p[i]);\n\t\t\tthis.tripleBuilder.addPO('rdfs:subClassOf', pn);\n\t\t}\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.entity = function(...p){\n\treturn this.parent(\"tcs:Entity\");\n}\n\nWOQLQuery.prototype.relationship = function(...p){\n\treturn this.parent(\"tcs:Entity\");\n}\n\nWOQLQuery.prototype.property = function(p,val){\n\tif(this.tripleBuilder) {\n\t\tp = this.cleanPredicate(p);\n\t\tthis.tripleBuilder.addPO(p, val);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.star = function(GraphIRI, Subj, Pred, Obj){\n\tSubj = (Subj ? this.cleanSubject(Subj) : \"v:Subject\");\n\tPred = (Pred ? this.cleanPredicate(Pred) : \"v:Predicate\");\n\tObj = (Obj  ? this.cleanObject(Obj) : \"v:Object\");\n\tGraphIRI = (GraphIRI ? this.cleanGraph(GraphIRI) : false);\n\tif(GraphIRI){\n\t\treturn this.quad(Subj, Pred, Obj, GraphIRI);\n\t}\n\telse {\n\t\treturn this.triple(Subj, Pred, Obj);\n\t}\n}\n\n\nWOQLQuery.prototype.getEverything = function(GraphIRI){\n\tif(GraphIRI){\n\t\tGraphIRI = this.cleanGraph(GraphIRI);\n\t\treturn this.quad(\"v:Subject\", \"v:Predicate\", \"v:Object\", GraphIRI);\n\t}\n\telse {\n\t\treturn this.triple(\"v:Subject\", \"v:Predicate\", \"v:Object\");\n\t}\n}\n\nWOQLQuery.prototype.getAllDocuments = function(){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", \"rdf:type\", \"v:Type\"),\n\t\tWOQL.sub(\"v:Type\", \"tcs:Document\")\n\t);\n}\n\nWOQLQuery.prototype.documentMetadata = function(){\n\treturn this.and(\n\t\tWOQL.triple(\"v:ID\", \"rdf:type\", \"v:Class\"),\n\t\tWOQL.sub(\"v:Class\", \"tcs:Document\"),\n\t\tWOQL.opt().triple(\"v:ID\", \"rdfs:label\", \"v:Label\"),\n\t\tWOQL.opt().triple(\"v:ID\", \"rdfs:comment\", \"v:Comment\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:label\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:comment\", \"v:Type_Comment\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.concreteDocumentClasses = function(){\n\treturn this.and(\n\t\tWOQL.sub(\"v:Class\", \"tcs:Document\"),\n\t\tWOQL.not().abstract(\"v:Class\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:comment\", \"v:Comment\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.propertyMetadata = function(){\n\treturn this.and(\n\t\tWOQL.or(\n\t\t\tWOQL.quad(\"v:Property\", \"rdf:type\", \"owl:DatatypeProperty\", \"db:schema\"),\n\t\t\tWOQL.quad(\"v:Property\", \"rdf:type\", \"owl:ObjectProperty\", \"db:schema\")\n\t\t),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:range\", \"v:Range\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdf:type\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:domain\", \"v:Domain\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.elementMetadata = function(){\n\treturn this.and(\n\t\tWOQL.quad(\"v:Element\", \"rdf:type\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:subClassOf\", \"v:Parent\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:domain\", \"v:Domain\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:range\", \"v:Range\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.classMetadata = function(){\n\treturn this.and(\n\t\tWOQL.quad(\"v:Element\", \"rdf:type\", \"owl:Class\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getDataOfClass = function(chosen){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", \"rdf:type\", chosen),\n\t\tWOQL.opt().triple(\"v:Subject\", \"v:Property\", \"v:Value\")\n\t);\n}\n\nWOQLQuery.prototype.getDataOfProperty = function(chosen){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", chosen, \"v:Value\"),\n\t\tWOQL.opt().triple(\"v:Subject\", \"rdfs:label\", \"v:Label\")\n\t);\n}\n\nWOQLQuery.prototype.documentProperties = function(id){\n\treturn this.and(\n\t\tWOQL.triple(id, \"v:Property\", \"v:Property_Value\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:label\", \"v:Property_Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdf:type\", \"v:Property_Type\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getDocumentConnections = function(id){\n\treturn this.and(\n\t\tWOQL.or(\n\t\t\tWOQL.triple(id, \"v:Outgoing\", \"v:Entid\"),\n\t\t\tWOQL.triple(\"v:Entid\", \"v:Incoming\", id)\n\t\t),\n\t\tWOQL.isa(\"v:Entid\", \"v:Enttype\"),\n\t\tWOQL.sub(\"v:Enttype\", \"tcs:Document\"),\n\t\tWOQL.opt().triple(\"v:Entid\", \"rdfs:label\", \"v:Label\"),\n\t\tWOQL.opt().quad(\"v:Enttype\", \"rdfs:label\", \"v:Class_Label\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getInstanceMeta = function(url){\n\treturn this.and(\n\t\tWOQL.triple(url, \"rdf:type\", \"v:InstanceType\"),\n\t\tWOQL.opt().triple(url, \"rdfs:label\", \"v:InstanceLabel\"),\n\t\tWOQL.opt().triple(url, \"rdfs:comment\", \"v:InstanceComment\"),\n\t\tWOQL.opt().quad(\"v:InstanceType\", \"rdfs:label\", \"v:ClassLabel\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.simpleGraphQuery = function(){\n\treturn this.and(\n\t    WOQL.triple(\"v:Source\", \"v:Edge\", \"v:Target\"),\n\t    WOQL.isa(\"v:Source\", \"v:Source_Class\"),\n\t    WOQL.sub(\"v:Source_Class\", \"tcs:Document\"),\n\t    WOQL.isa(\"v:Target\", \"v:Target_Class\"),\n\t    WOQL.sub(\"v:Target_Class\", \"tcs:Document\"),\n\t    WOQL.opt().triple(\"v:Source\", \"rdfs:label\", \"v:Source_Label\"),\n\t    WOQL.opt().triple(\"v:Source\", \"rdfs:comment\", \"v:Source_Comment\"),\n\t    WOQL.opt().quad(\"v:Source_Class\", \"rdfs:label\", \"v:Source_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Source_Class\", \"rdfs:comment\", \"v:Source_Type_Comment\", \"db:schema\"),\n\t    WOQL.opt().triple(\"v:Target\", \"rdfs:label\", \"v:Target_Label\"),\n\t    WOQL.opt().triple(\"v:Target\", \"rdfs:comment\", \"v:Target_Comment\"),\n\t    WOQL.opt().quad(\"v:Target_Class\", \"rdfs:label\", \"v:Target_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Target_Class\", \"rdfs:comment\", \"v:Target_Type_Comment\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Edge\", \"rdfs:label\", \"v:Edge_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Edge\", \"rdfs:comment\", \"v:Edge_Type_Comment\", \"db:schema\")\n\t);\n}\n\n\n/**\n * Queries the schema graph and loads all the ids found there as vocabulary that can be used without prefixes\n * ignoring blank node ids\n */\nWOQLQuery.prototype.loadVocabulary = function(client){\n\tvar nw = new WOQLQuery().quad(\"v:S\", \"v:P\", \"v:O\", \"db:schema\");\n\tnw.execute(client).then( (result) => {\n\t\tif(result.bindings && result.bindings.length > 0){\n\t\t\tfor(var i = 0; i<result.bindings.length; i++){\n\t\t\t\tfor(var k in result.bindings[i]){\n\t\t\t\t\tvar v = result.bindings[i][k]\n\t\t\t\t\tif(typeof v == \"string\"){\n\t\t\t\t\t\tvar spl = v.split(\":\");\n\t\t\t\t\t\tif(spl.length == 2 && spl[1] && spl[0] != \"_\"){\n\t\t\t\t\t\t\tthis.vocab[spl[1]] = v;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\n\n/**\n * Provides the query with a 'vocabulary' a list of well known predicates that can be used without prefixes mapping: id: prefix:id ...\n */\nWOQLQuery.prototype.setVocabulary = function(vocab){\n\tthis.vocab = vocab;\n}\n\nWOQLQuery.prototype.getVocabulary = function(vocab){\n\treturn this.vocab;\n}\n\nWOQLQuery.prototype.getLimit = function(){\n\treturn this.getPagingProperty(\"limit\");\n}\n\nWOQLQuery.prototype.setLimit = function(l){\n\treturn this.setPagingProperty(\"limit\", l);\n}\n\nWOQLQuery.prototype.isPaged = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"limit\") return true;\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\treturn this.isPaged(q[prop][q[prop].length-1]);\n\t\t}\n\t}\n\treturn false;\n}\n\nWOQLQuery.prototype.getPage = function(){\n\tif(this.isPaged()){\n\t\tvar psize = this.getLimit();\n\t\tif(this.hasStart()){\n\t\t\tvar s = this.getStart();\n\t\t\treturn (parseInt(s / psize) + 1);\n\t\t}\n\t\telse return 1;\n\t}\n\telse return false;\n}\n\nWOQLQuery.prototype.setPage = function(pagenum){\n\tvar pstart = (this.getLimit() * (pagenum - 1));\n\tif(this.hasStart()){\n\t\tthis.setStart(pstart);\n\t}\n\telse {\n\t\tthis.addStart(pstart);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.nextPage = function(){\n\treturn this.setPage(this.getPage() + 1);\n}\n\nWOQLQuery.prototype.firstPage = function(){\n\treturn this.setPage(1);\n}\n\nWOQLQuery.prototype.previousPage = function(){\n\tconst npage = this.getPage() - 1;\n\tif(npage > 0) this.setPage(npage);\n\treturn this;\n}\n\nWOQLQuery.prototype.setPageSize = function(size){\n\tthis.setPagingProperty(\"limit\", size);\n\tif(this.hasStart()){\n\t\tthis.setStart(0);\n\t}\n\telse {\n\t\tthis.addStart(0);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.hasSelect = function(){\n\treturn (this.getPagingProperty(\"select\") ? true : false);\n}\n\nWOQLQuery.prototype.getSelectVariables = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"select\") {\n\t\t\tvar vars = q[prop].slice(0, q[prop].length - 1);\n\t\t\treturn vars;\n\t\t}\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar val = this.getSelectVariables(q[prop][q[prop].length-1]);\n\t\t\tif(typeof val != \"undefined\"){\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t}\n}\n\nWOQLQuery.prototype.hasStart = function(){\n\treturn (typeof this.getPagingProperty(\"start\") != \"undefined\");\n}\n\nWOQLQuery.prototype.getStart = function(){\n\treturn this.getPagingProperty(\"start\");\n}\n\nWOQLQuery.prototype.setStart = function(start){\n\treturn this.setPagingProperty(\"start\", start);\n}\n\nWOQLQuery.prototype.addStart = function(s){\n\tif(this.hasStart()) this.setStart(s);\n\telse {\n\t\tvar nq = {'start': [s, this.query]};\n\t\tthis.query = nq;\n\t}\n\treturn this;\n}\n\n\n/**\n * Executes the query using the passed client to connect to a server\n */\nWOQLQuery.prototype.execute = function(client){\n\tif(!this.query[\"@context\"]){\n\t\tthis.query['@context'] = this.defaultContext(client.connectionConfig.dbURL());\n\t\tvar json = this.json();\n\t}\n\telse {\n\t\tvar json = this.json();\n\t}\n\tif(this.contains_update){\n\t\treturn client.select(false, json);\n\t\t//return client.update(false, json);\n\t}\n\telse {\n\t\treturn client.select(false, json);\n\t}\n}\n\n/*\n * Internal State Control Functions\n * Not part of public API -\n */\n\n /**\n * Advances internal cursor to support chaining of calls: limit(50).start(50). rather than (limit, [50, (start, [50, (lisp-style (encapsulation)))))\n */\nWOQLQuery.prototype.advanceCursor = function(action, value){\n\tthis.cursor[action] = [value];\n\tthis.cursor[action][1] = {};\n\tthis.cursor = this.cursor[action][1];\n}\n\nWOQLQuery.prototype.loadDefaultVocabulary = function(){\n\tvar vocab = {};\n\tvocab.type = \"rdf:type\";\n\tvocab.label = \"rdfs:label\";\n\tvocab.Class = \"owl:Class\";\n\tvocab.DatatypeProperty = \"owl:DatatypeProperty\";\n\tvocab.ObjectProperty = \"owl:ObjectProperty\";\n\tvocab.Entity = \"tcs:Entity\";\n\tvocab.Document = \"tcs:Document\";\n\tvocab.Relationship = \"tcs:Relationship\";\n\tvocab.temporality = \"tcs:temporality\";\n\tvocab.geotemporality = \"tcs:geotemporality\";\n\tvocab.geography = \"tcs:geography\";\n\tvocab.abstract = \"tcs:abstract\";\n\tvocab.comment = \"rdfs:comment\";\n\tvocab.range = \"rdfs:range\";\n\tvocab.domain = \"rdfs:domain\";\n\tvocab.subClassOf = \"rdfs:subClassOf\";\n\tvocab.string = \"xsd:string\";\n\tvocab.integer = \"xsd:integer\";\n\tvocab.decimal = \"xsd:decimal\";\n\tvocab.email = \"xdd:email\";\n\tvocab.json = \"xdd:json\";\n\tvocab.dateTime = \"xsd:dateTime\";\n\tvocab.date = \"xsd:date\";\n\tvocab.coordinate = \"xdd:coordinate\";\n\tvocab.line = \"xdd:coordinatePolyline\";\n\tvocab.polygon = \"xdd:coordinatePolygon\";\n\treturn vocab;\n}\n\nWOQLQuery.prototype.defaultContext = function(DB_IRI){\n\tlet def = {}\n\tfor(var pref in FrameHelper.standard_urls){\n\t\tdef[pref] = FrameHelper.standard_urls[pref];\n\t}\n\tdef.scm = DB_IRI + \"/schema#\"\n\tdef.doc = DB_IRI + \"/document/\"\n\tdef.db = DB_IRI + \"/\";\n\treturn def;\n}\n\n\n\n/**\n * Called to indicate that this is the last call that is chainable - for example triple pattern matching..\n *\n */\nWOQLQuery.prototype.last = function(call, subject){\n\tthis.chain_ended = true;\n\tif(call) this.tripleBuilder = new TripleBuilder(call, this.cursor, this.cleanSubject(subject));\n\treturn this;\n}\n\nWOQLQuery.prototype.lastUpdate = function(call, subj){\n\tthis.contains_update = true;\n\tvar ret = this.last(call, subj);\n\treturn ret;\n}\n\n/**\n * Returns the value of one of the 'paging' related properties (limit, start,...)\n */\nWOQLQuery.prototype.getPagingProperty = function(pageprop, q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == pageprop) return q[prop][0];\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar val = this.getPagingProperty(pageprop, q[prop][q[prop].length-1]);\n\t\t\tif(typeof val != \"undefined\"){\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Sets the value of one of the paging_transitive_properties properties\n */\nWOQLQuery.prototype.setPagingProperty = function(pageprop, val, q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == pageprop) {\n\t\t\tq[prop][0] = val;\n\t\t}\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tthis.setPagingProperty(pageprop, val, q[prop][q[prop].length-1]);\n\t\t}\n\t}\n\treturn this;\n}\n\n/**\n * Retrieves the value of the current json-ld context\n */\nWOQLQuery.prototype.getContext = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"@context\") return q[prop];\n\t\tif(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar nq = q[prop][1];\n\t\t\tvar nc = this.getContext(nq);\n\t\t\tif(nc) return nc;\n\t\t}\n\t}\n}\n\n\n/**\n * Retrieves the value of the current json-ld context\n */\nWOQLQuery.prototype.context = function(c){\n\tthis.cursor['@context'] = c;\n}\n\n\n/*\n* Transforms from internal json representation to human writable WOQL.js format\n*/\nWOQLQuery.prototype.prettyPrint = function(indent, show_context, q, fluent){\n\tif(!this.indent) this.indent = indent;\n\tq = (q ? q : this.query);\n\tvar str = \"\";\n\tconst newlining_operators = [\"get\", \"from\", \"into\"];\n\tfor(var operator in q){\n\t\t//ignore context in pretty print\n\t\tif(operator == \"@context\") {\n\t\t\tif( show_context){\n\t\t\t\tvar c = this.getContext();\n\t\t\t\tif(c) str += \"@context: \" + JSON.stringify(c) + \"\\n\";\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\t//statement starts differently depending on indent and whether it is fluent style or regular function style\n\t\tstr += this.getWOQLPrelude(operator, fluent, indent - this.indent);\n\t\tvar val = q[operator];\n\t\tif(this.chainable(operator, val[val.length-1])){\n\t\t\t//all arguments up until the last are regular function arguments\n\t\t\tstr += this.uncleanArguments(operator,  val.slice(0, val.length-1), indent, show_context);\n\t\t\tif(newlining_operators.indexOf(operator) !== -1){\n\t\t\t\t//some fluent function calls demand a linebreak..\n\t\t\t\tstr += \"\\n\" + nspaces(indent-this.indent);\n\t\t\t}\n\t\t\t//recursive call to query included in tail\n\t\t\tstr += this.prettyPrint(indent, show_context, val[val.length-1], true);\n\t\t}\n\t\telse {\n\t\t\t//non chainable operators all live inside the function call parameters\n\t\t\tstr += this.uncleanArguments(operator,  val, indent, show_context);\n\t\t}\n\t}\n\t//remove any trailing dots in the chain (only exist in incompletely specified queries)\n\tif(str.substring(str.length-1) == \".\"){\n\t\tstr = str.substring(0, str.length-1);\n\t}\n\treturn str;\n}\n\n/**\n * Gets the starting characters for a WOQL query - varies depending on how the query is invoked and how indented it is\n */\nWOQLQuery.prototype.getWOQLPrelude = function(operator, fluent, inline){\n\tif(operator === \"true\" || operator === \"false\"){\n\t\treturn operator;\n\t}\n\tif(fluent){\n\t\treturn \".\" + operator;\n\t}\n\treturn (inline ? \"\\n\" + nspaces(inline) : \"\") + \"WOQL.\" + operator;\n}\n\n/**\n * Determines whether a given operator can have a chained query as its last argument\n */\nWOQLQuery.prototype.chainable = function(operator, lastArg){\n\tconst non_chaining_operators = [\"and\", \"or\"];\n\tif(lastArg && typeof lastArg == \"object\" && typeof lastArg['@value'] == \"undefined\"  && typeof lastArg['@type'] == \"undefined\"  && typeof lastArg['value'] == \"undefined\" && non_chaining_operators.indexOf(operator) == -1){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Transforms arguments to WOQL functions from the internal (clean) version, to the WOQL.js human-friendly version\n */\nWOQLQuery.prototype.uncleanArguments = function(operator, args, indent, show_context){\n\tstr = '(';\n\tconst args_take_newlines = [\"and\", \"or\"];\n\tif(this.hasShortcut(operator, args)){\n\t\treturn this.getShortcut(args, indent);\n\t}\n\telse {\n\t\tfor(var i = 0; i<args.length; i++){\n\t\t\tif(this.argIsSubQuery(operator, args[i], i)){\n\t\t\t\tstr += this.prettyPrint(indent + this.indent, show_context, args[i], false);\n\t\t\t}\n\t\t\telse if(operator == \"get\" && i == 0){ // weird one, needs special casing\n\t\t\t\tstr += \"\\n\" + nspaces(indent-this.indent) + \"WOQL\";\n\t\t\t\tfor(var j = 0; j < args[0].length; j++){\n\t\t\t\t\tvar myas = (args[0][j].as ? args[0][j].as : args[0][j]);\n\t\t\t\t\tvar lhs = myas[0];\n\t\t\t\t\tvar rhs = myas[1];\n\t\t\t\t\tif(typeof lhs == \"object\" && lhs['@value']){\n\t\t\t\t\t\tlhs = lhs['@value'];\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof lhs == \"object\") {\n\t\t\t\t\t\tlhs = JSON.stringify(lhs);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tlhs = '\"' + lhs + '\"'\n\t\t\t\t\t}\n\t\t\t\t\tstr += '.as(' + lhs;\n\t\t\t\t\tif(rhs) str += ', \"' + rhs + '\"';\n\t\t\t\t\tstr += \")\";\n\t\t\t\t\tstr += \"\\n\" + nspaces(indent);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstr += this.uncleanArgument(operator, args[i], i, args);\n\t\t\t}\n\t\t\tif(i < args.length -1) str +=  ',';\n\t\t}\n\t}\n\tif(args_take_newlines.indexOf(operator) != -1){\n\t\tstr += \"\\n\" + nspaces(indent-this.indent);\n\t}\n\tstr += \")\";\n\treturn str;\n}\n\n\n/**\n * Passed as arguments: 1) the operator (and, triple, not, opt, etc)\n * 2) the value of the argument\n * 3) the index (position) of the argument.\n */\nWOQLQuery.prototype.uncleanArgument = function(operator, val, index, allArgs){\n\t//numeric values go out untouched...\n\tconst numeric_operators = [\"limit\", \"start\", \"eval\", \"plus\", \"minus\", \"times\", \"divide\", \"exp\", \"div\"];\n\tif(operator == \"isa\"){\n\t\tval = (index == 0 ? this.unclean(val, 'subject') : this.unclean(val, 'class'));\n\t}\n\telse if(operator == \"sub\"){\n\t\tval = this.unclean(val, 'class');\n\t}\n\telse if([\"select\"].indexOf(operator) != -1){\n\t\tif(val.substring(0, 2) == \"v:\") val = val.substring(2);\n\t}\n\telse if([\"quad\", \"add_quad\", \"delete_quad\", \"add_triple\", \"delete_triple\", \"triple\"].indexOf(operator) != -1){\n\t\tswitch(index){\n\t\t\tcase 0: val = this.unclean(val, \"subject\"); break;\n\t\t\tcase 1: val = this.unclean(val, \"predicate\"); break;\n\t\t\tcase 2: val = this.unclean(val, \"object\"); break;\n\t\t\tcase 3: val = this.unclean(val, \"graph\"); break;\n\t\t}\n\t}\n\tif(typeof val == \"object\"){\n\t\tif(operator == \"concat\" && index == 0){\n\t\t\tvar cstr = \"\";\n\t\t\tif(val.list){\n\t\t\t\tfor(var i = 0 ; i<val.list.length; i++){\n\t\t\t\t\tif(val.list[i]['@value']) cstr += val.list[i]['@value'];\n\t\t\t\t\telse cstr += val.list[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar oval = '\"' + cstr + '\"';\n\t\t}\n\t\telse {\n\t\t\tvar oval = this.uncleanObjectArgument(operator, val, index);\n\t\t}\n\t\treturn oval;\n\t}\n\t//else if(numeric_operators.indexOf(operator) !== -1){\n\t//\treturn val;\n\t//}\n\tif(typeof val == \"string\"){\n\t\treturn '\"' + val + '\"';\n\t}\n\treturn val;\n}\n\n\n\nWOQLQuery.prototype.uncleanObjectArgument = function(operator, val, index){\n\tif(val['@value'] && (val['@language'] || (val['@type'] && val['@type'] == \"xsd:string\"))) return '\"' + val['@value'] + '\"';\n\tif(val['@value'] && (val['@type'] && val['@type'] == \"xsd:integer\")) return val['@value'];\n\tif(val['list']) {\n\t\tvar nstr = \"[\";\n\t\tfor(var i = 0 ; i<val['list'].length; i++){\n\t\t\tif(typeof val['list'][i] == \"object\"){\n\t\t\t\tnstr += this.uncleanObjectArgument(\"list\", val['list'][i], i);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnstr += '\"' + val['list'][i] + '\"';\n\t\t\t}\n\t\t\tif(i < val['list'].length-1){\n\t\t\t\tnstr += \",\";\n\t\t\t}\n\t\t}\n\t\tnstr += \"]\";\n\t\treturn nstr;\n\t}\n\treturn JSON.stringify(val);\n}\n\nWOQLQuery.prototype.argIsSubQuery = function(operator, arg, index){\n\tconst squery_operators = [\"and\", \"or\", \"when\", \"not\", \"opt\", \"exp\", \"minus\", \"div\", \"divide\", \"plus\", \"multiply\"];\n\tif(squery_operators.indexOf(operator) !== -1){\n\t\tif(arg && typeof arg != \"object\") return false;\n\t\treturn true;\n\t}\n\tif(operator == \"group_by\" && index == 2) return true;\n\telse return false;\n}\n\n/**\n * Goes from the properly prefixed clean internal version of a variable to the WOQL.js unprefixed form\n */\nWOQLQuery.prototype.unclean = function(s, part){\n\tif(typeof s != \"string\") return s;\n\tif(s.indexOf(\":\") == -1) return s;\n\tif(s.substring(0,4) == \"http\") return s;\n\tvar suff = s.split(\":\")[1];\n\tif(this.vocab && this.vocab[suff] && this.vocab[suff] == s){\n\t\treturn suff;\n\t}\n\tif(!part) return s;\n\tif(part == \"subject\" && (s.split(\":\")[0] == \"doc\")) return suff;\n\tif(part == \"class\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"predicate\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"type\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"graph\" && (s.split(\":\")[0] == \"db\")) return suff;\n\treturn s;\n}\n\nWOQLQuery.prototype.hasShortcut = function(operator, args, indent, show_context){\n\tif(operator == \"true\") return true;\n}\n\nWOQLQuery.prototype.getShortcut = function(operator, args, indent, show_context){\n\tif(operator == \"true\") return true;\n}\n\nfunction nspaces(n){\n\tlet spaces = \"\";\n\tfor(var i = 0; i<n; i++){\n\t\tspaces += \" \";\n\t}\n\treturn spaces;\n}\n\nWOQLQuery.prototype.printLine = function(indent, clauses){\n\treturn \"(\\n\" + nspaces(indent) + \"WOQL.\" + clauses.join(\",\\n\"+ nspaces(indent) + \"WOQL.\") + \"\\n\" + nspaces(indent - this.indent) + \")\";\n}\n\nWOQLQuery.prototype.cleanSubject = function(s){\n\tif(typeof s != \"string\") return s;\n\tif(s.indexOf(\":\") != -1) return s;\n\tif(this.vocab && this.vocab[s]) return this.vocab[s];\n\treturn \"doc:\" + s;\n}\n\nWOQLQuery.prototype.cleanPredicate = function(p){\n\tif(p.indexOf(\":\") != -1) return p;\n\tif(this.vocab && this.vocab[p]) return this.vocab[p];\n\treturn \"scm:\" + p;\n}\nWOQLQuery.prototype.cleanType = function(t){\n\tif(t.indexOf(\":\") != -1) return t;\n\tif(this.vocab && this.vocab[t]) return this.vocab[t];\n\treturn \"scm:\" + t;\n}\n\nWOQLQuery.prototype.cleanObject = function(o){\n\tif(typeof o != \"string\" || o.indexOf(\":\") != -1) return o;\n\tif(this.vocab && this.vocab[o]) return this.vocab[o];\n\treturn { \"@value\": o, \"@language\": \"en\"};\n}\n\nWOQLQuery.prototype.cleanGraph = function(g){\n\tif(g.indexOf(\":\") != -1) return g;\n\tif(this.vocab && this.vocab[g]) return this.vocab[g];\n\treturn \"db:\" + g;\n}\n\nWOQLQuery.prototype.cleanClass = function(c){\n\tif(c.indexOf(\":\") != -1) return c;\n\tif(this.vocab && this.vocab[c]) return this.vocab[c];\n\treturn \"scm:\" + c;\n}\n\n/*\n * higher level composite queries - not language or api elements\n */\n/**\n * Class for enabling building of triples from pieces\n * type is add_quad / remove_quad / add_triple / remove_triple\n */\nfunction TripleBuilder(type, cursor, s){\n\t//what accumulation type are we\n\tthis.type = type;\n\tthis.cursor = cursor;\n\tthis.subject = (s ? s : false);\n\tthis.g = false;\n}\n\nTripleBuilder.prototype.label = function(l, lang){\n\tlang = (lang ? lang : \"en\");\n\tif(l.substring(0, 2) == \"v:\"){\n\t\tvar d = {\"value\": l, \"@language\": lang }\n\t}\n\telse {\n\t\tvar d = {\"@value\": l, \"@language\": lang }\n\t}\n\tvar x = this.addPO('rdfs:label', d);\n\treturn x;\n}\n\nTripleBuilder.prototype.description = function(c, lang){\n\tlang = (lang ? lang : \"en\");\n\tif(c.substring(0, 2) == \"v:\"){\n\t\tvar d = {\"value\": c, \"@language\": lang }\n\t}\n\telse {\n\t\tvar d = {\"@value\": c, \"@language\": lang }\n\t}\n\treturn this.addPO('rdfs:comment', d);\n}\n\nTripleBuilder.prototype.addPO = function(p, o, g){\n\tif(this.type){\n\t\tvar ttype = (this.type == \"isa\" || this.type == \"sub\" ? \"triple\" : this.type);\n\t}\n\telse var ttype = \"triple\";\n\tvar evstr = ttype + '(\"' + this.subject + '\", \"' + p + '\", ';\n\tif(typeof o == \"string\"){\n\t\tevstr += \"'\" + o + \"'\";\n\t}\n\telse if(typeof o == \"object\"){\n\t\tevstr += JSON.stringify(o);\n\t}\n\telse {\n\t\tevstr += o;\n\t}\n\tif(ttype.substring(ttype.length-4) == \"quad\" || this.g){\n\t\tvar g = (g ? g : (this.g ? this.g : \"db:schema\"));\n\t\tevstr += ', \"' + g + '\"';\n\t}\n\tevstr += \")\";\n\ttry {\n\t\tvar unit = eval(\"new WOQLQuery().\" + evstr );\n\t\treturn this.addEntry(unit);\n\t}\n\tcatch(e){\n\t\tconsole.error(e);\n\t\treturn this;\n\t}\n}\n\nTripleBuilder.prototype.getO = function(s, p){\n\tif(this.cursor['and']){\n\t\tfor(var i = 0; i<this.cursor['and'].length; i++){\n\t\t\tvar clause = this.cursor['and'][i];\n\t\t\tvar key = Object.keys(clause)[0];\n\t\t\tif(clause[key][0] == s && clause[key][1] == p && clause[key][2]) return clause[key][2];\n\t\t}\n\t}\n\telse if(Object.keys(this.cursor)) {\n\t\tvar key =  Object.keys(this.cursor)[0];\n\t\tif(this.cursor[key][0] == s && this.cursor[key][1] == p && this.cursor[key][2])  return this.cursor[key][2];\n\t}\n\treturn false;\n}\n\nTripleBuilder.prototype.addEntry = function(unit){\n\tif(this.cursor[this.type]){\n\t\tvar next = {};\n\t\tnext[this.type] = this.cursor[this.type];\n\t\tthis.cursor['and'] = [next];\n\t\tdelete(this.cursor[this.type]);\n\t}\n\tif(this.cursor['and']){\n\t\tthis.cursor['and'].push(unit.json());\n\t}\n\telse {\n\t\tvar j = unit.json();\n\t\tif(j[this.type]) this.cursor[this.type] = j[this.type];\n\t\telse {\n\t\t\talert(JSON.stringify(j));\n\t\t}\n\t}\n\treturn this;\n}\n\nTripleBuilder.prototype.card = function(n, which){\n\tlet os = this.subject;\n\tthis.subject += \"_\" + which;\n\tthis.addPO('rdf:type', \"owl:Restriction\");\n\tthis.addPO(\"owl:onProperty\", os);\n\tswitch(which){\n\t\tcase \"max\": this.addPO(\"owl:maxCardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t\t\tbreak;\n\t\tcase \"min\": this.addPO(\"owl:minCardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t\t\tbreak;\n\t\tdefault: this.addPO(\"owl:cardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t}\n\tlet od = this.getO(os, \"rdfs:domain\");\n\tif(od){\n\t\tvar x = this.subject;\n\t\tthis.subject = od;\n\t\tthis.addPO(\"rdfs:subClassOf\", this.subject);\n\t\t//this.triples.push([od, \"rdfs:subClassOf\", this.subject]);\n\t}\n\tthis.subject = os;\n\treturn this;\n};\n\nTripleBuilder.prototype.isa = function(a){\n\tvar unit = new WOQLQuery.isa(this.subject, a);\n\tthis.tb.addEntry(unit);\n}\n\nTripleBuilder.prototype.graph = function(g){\n\tthis.g = g;\n}\n\nTripleBuilder.prototype.sub = function(s){\n\tvar unit = new WOQLQuery.sub(this.subject, s);\n\treturn this.addEntry(unit);\n}\n\nTripleBuilder.prototype.abstract = function(){\n\treturn this.addPO('tcs:tag', \"tcs:abstract\");\n}\n\nmodule.exports = WOQL;\n"],"sourceRoot":""}
var TerminusDashboard=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=44)}([function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(1),s={getSettingsControl:function(e){var t=document.createElement("icon");return"property"==e?t.setAttribute("class","fa fa-cog terminus-pointer"):"data"==e&&t.setAttribute("class","fa fa-edit terminus-pointer"),t.setAttribute("style","margin: 10px;"),t},getControlIcon:function(e){var t;switch(e){case"delete":t="-alt-delete";break;case"add":t="-plus";break;case"reset":t="-undo";break;case"save":t="-save";break;case"hide":t="-eye-slash"}return t},getSelectionControl:function(e,t,r,s){var o=document.createElement("select");o.setAttribute("class","terminus-frame-selector frame-control-selection "+e);for(var a=0;a<t.length;a++){var u=document.createElement("option");if("object"==i(t[a])){u.value=t[a].value;var c=t[a].label?document.createTextNode(t[a].label):document.createTextNode(n.UTILS.labelFromURL(t[a].value));u.appendChild(c)}else u.value=t[a],c=n.UTILS.labelFromURL(u.value),u.appendChild(document.createTextNode(c));r==u.value&&u.setAttribute("selected","selected"),o.appendChild(u)}return o.addEventListener("change",(function(){s(this.value)})),o},getModeSelectorDOM:function(e,t){var r=document.createElement("span");if(r.setAttribute("class","terminus-mode terminus-"+e+"-mode"),"view"==t.mode){var i=function(){t.setMode("edit")};r.appendChild(s.getActionControl("terminus-mode terminus-"+e+"-mode","edit"," Edit ",i))}else{if(t.isNew())return!1;i=function(){t.cancel()};r.appendChild(s.getActionControl(e,"cancel","Cancel",i))}return r},goToName:function(e,t,r){var i=window.location.href;if(i){var s=i.split("#")[0],o=n.UTILS.getShorthand(e);o||(o=e),(u=o.split(":")).length>1&&(o=u[1]);var a=o;if(t){var u,c=n.UTILS.getShorthand(t);c||(c=t),(u=c.split(":")).length>1&&(c=u[1]),a+="_"+c,r&&(a+="_"+r)}window.location=s+"#"+a}},wrapShortenedText:function(e,t,r,i){if(r&&t.length>r&&(e.setAttribute("title",t),t=t.substring(0,r)+"..."),t&&t.length>i){for(var n={},s=t.split(" "),o=0;o<s.length;o++){var a=s[o];if(a.length>i){e.setAttribute("title",t);var u=a.substring(0,i)+"...";n[a]=u}}for(var c in n)t=t.replace(c,n[c])}e.appendChild(document.createTextNode(t))},getVariableValueFromBinding:function(e,t){for(var r in t){if(r.substring(r.lastIndexOf("/")+1)==e){var n=t[r];return"object"==i(n)&&n["@value"]?n["@value"]:n}}return!1},getFrameDOM:function(e,t,r,i,n){if(t.display_options.hidden)return!1;var o=s.getFrameHolderDOM(e,t,r);if("function"==typeof t.display_options.header){var a=t.display_options.header(i);o.appendChild(a)}else{a=s.getFrameHeaderDOM(e,t,r,i);void 0!==t.display_options.header_style&&a.setAttribute("style",t.display_options.header_style),o.appendChild(a)}return o.appendChild(s.getFrameBodyDOM(e,t,r,n)),o},getFrameHolderDOM:function(e,t,r){var i="terminus-"+e+"-frame";if("page"==r)var n=document.createElement("div");else n=document.createElement("span");var s=i+" "+i+"-"+r+("object"==e&&t.parent?"":" terminus-root-frame")+" "+i+"-"+t.display_options.mode;if(n.setAttribute("class",s),"object"==e){n.setAttribute("data-class",t.subjectClass()),n.setAttribute("data-id",t.subject());var o=this.hash(t.subject())}else if("property"==e){n.setAttribute("data-property",t.property());o=this.hash(t.subject()+t.property())}else if("data"==e){n.setAttribute("data-value",t.get());o=this.hash(t.subject()+t.property()+t.index)}var a=document.createElement("a");return a.setAttribute("class","terminus-"+e+"-idmarker"),a.setAttribute("name",o),n.appendChild(a),n},getFrameHeaderDOM:function(e,t,r,i){var n="terminus-"+e+"-header";if("page"==r)var s=document.createElement("div");else s=document.createElement("span");return s.setAttribute("class",n+" "+n+"-"+r),i&&s.appendChild(i),s},getFrameBodyDOM:function(e,t,r,i){var n="terminus-"+e+"-properties";if("page"==r)var s=document.createElement("div");else s=document.createElement("span");return s.setAttribute("class",n+" "+n+"-"+r),i&&s.appendChild(i),s},hash:function(e){var t,r=0;if(0===e.length)return r;for(t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return r},getFeatureDOM:function(e,t,r,i,n,o){if("id"==t){if("object"==r)var a=e.subject();else if("property"==r)a=e.property();if("_:"==a)a="New Document";return s.getInfoboxDOM("object-id","ID",a,"The ID that identifies this document",i,n,o)}if("summary"==t){var u=e.getSummary();return s.getInfoboxDOM(r+"-summary",!1,u.long,u.status,i,n)}if("label"==t)return!!(c=e.getLabel())&&s.getInfoboxDOM(r+"-type",!1,c,!1,i,n);if("status"==t){u=e.getSummary();return s.getInfoboxDOM(r+"-status-"+u.status,!1,u.status,u.status,i,n)}if("comment"==t){var c=e.getComment();return s.getInfoboxDOM("property-comment",!1,c,!1,i,n)}if("type"==t){if("property"==r&&"edit"==i&&e.parent&&e.parent.isClassChoice()&&e.isNew())return this.getClassChoiceTypeSelector(e,i,n);if("object"==r)c=e.subjectClass();else if("property"==r)c=e.range();else if("data"==r)c=e.getType();return!!c&&s.getInfoboxDOM(r+"-type","Type",c,!1,i,n)}if("delete"==t){var l=function(){e.delete()},d=!1;if(!e.cardControlAllows("delete",r)){if(!e.display_options.show_disabled_buttons)return!1;d="Cardinality rules prevent deleting this element"}return s.getActionControl(r,"delete","Delete",l,d,i,n)}if("clone"==t){l=function(){e.clone()},d=!1;if(!e.cardControlAllows("clone",r)){if(!e.display_options.show_disabled_buttons)return!1;d="Cardinality rules prevent cloning this element"}return s.getActionControl(r,"clone","Clone",l,d,i,n)}if("reset"==t){l=function(){e.reset()},d=!1;if(!e.isUpdated()){if(!e.display_options.show_disabled_buttons)return!1;d="No changes have been made to this element"}return s.getActionControl(r,"reset","Reset",l,d,i,n)}if("mode"==t){l=function(){e.mode("edit")};return s.getActionControl(r,"mode","Edit",l,i,n)}if("hide"==t){l=function(){e.show()};return s.getActionControl(r,"hide","Hide",l,i,n)}if("update"==t){l=function(){e.save()};if(!e.isUpdated()&&e.display_options.show_disabled_buttons,n)return!1;d=!e.isUpdated()&&"No changes have been made to this element";return s.getActionControl(r,"save","Save",l,d,i,n)}return"viewer"!=t&&("view"==t?this.getViewEntryDOM(r,e,i,n):"cardinality"==t?this.getCardinalityDOM(r,e,i,n):"add"==t?this.getAddDOM(r,e,i,n):void 0)},getViewerSelectorDOM:function(e,t,r,i){if(viewers&&viewers.length){var n=document.createElement("span");n.setAttribute("class","terminus-"+e+"-viewer");var o=t.currentViewer(),a=s.getSelectionControl(e+"-viewer",viewers,o,(function(e){e&&t.setViewer(e)}),r,i);return n.appendChild(a),n}return!1},getViewEntryDOM:function(e,t,r,i){if("object"==e)var n=t.getFilledPropertyList();if(n&&n.length){var o=document.createElement("span");o.setAttribute("class","terminus-"+e+"-view-entry"),n.unshift({value:"",label:"View "+e});var a=s.getSelectionControl(e+"-view-entry",n,"",(function(e){e&&t.goToEntry(e)}),r,i);return o.appendChild(a),o}return!1},getCardinalityDOM:function(e,t,r,i){var n=t.getRestriction();if(n.min&&n.max)if(n.min==n.max)var o=n.min,a="Cardinality: "+n.min;else{o=n.min+"-"+n.max,a="Minimum Cardinality: "+n.min;a+=", Maximum Cardinality: "+n.max}else if(n.min)o=">"+(n.min-1),a="Minimum Cardinality: "+n.min;else{if(!n.max)return!1;o="<"+(n.max+1),a="Maximum Cardinality: "+n.max}return s.getInfoboxDOM("property-cardinality","Cardinality",o,a,r,i)},getClassChoiceTypeSelector:function(e,t,r){var i=e.parent.getAvailableClassChoices();if(i&&i.length){var n=document.createElement("span");n.setAttribute("class","terminus-property-change-class");var o=document.createElement("span");o.setAttribute("class","terminus-property-change-label"),o.appendChild(document.createTextNode("Type")),n.appendChild(o);var a=s.getSelectionControl("change-class",i,e.subjectClass(),(function(t){t&&e.changeClass(t)}),t,r);return n.appendChild(a),n}return!1},getAddDOM:function(e,t,r,i){if("property"==e){if(t.isClassChoice()){var n=t.getAvailableClassChoices();if(n&&n.length){(l=document.createElement("span")).setAttribute("class","terminus-property-add-class"),n.unshift({value:"",label:"Add Type"});var o=function(e){e&&t.addClass(e)},a=s.getSelectionControl("add-property",n,"",o,r,i);return l.appendChild(a),l}}if(t.cardControlAllows("add")||t.display_options.show_disabled_buttons){o=function(){t.add("edit")};var u=!t.cardControlAllows("add")&&"Cardinality Rules Forbid Add";return s.getActionControl(e+"-add-entry","add","Add",o,u,r,i)}}else{var c=t.getMissingPropertyList();if(c&&c.length){var l;(l=document.createElement("span")).setAttribute("class","terminus-"+e+"-add-entry"),c.unshift({value:"",label:"Add new "+e});o=function(r){r&&("object"==e?t.addNewProperty(r):"property"==e&&t.addNewValue(r))};if(t.cardControlAllows("add")||t.display_options.show_disabled_buttons){u=!t.cardControlAllows("add")&&"Cardinality rules forbid adding element",a=s.getSelectionControl(e+"-add-entry",c,"",o,u,r,i);return l.appendChild(a),l}}}return!1},getInfoboxDOM:function(e,t,r,i,n,s,o){var a=document.createElement("span");if(a.setAttribute("class","terminus-frame-infobox-box terminus-"+e),i&&a.setAttribute("title",i),s&&void 0!==s.label&&(t=s.label),!1!==t){t=s&&s.label?s.label:t;var u=document.createElement("span");u.setAttribute("class","terminus-frame-infobox-label terminus-"+e+"-label"),u.appendChild(document.createTextNode(t)),s&&s.headerStyle&&u.setAttribute("style",s.headerStyle),a.appendChild(u)}var c=document.createElement("span");if(c.setAttribute("class","terminus-frame-infobox-value terminus-"+e+"-value"),o)o.value=r,c.appendChild(o);else if(s&&s.removePrefixes&&r&&2==r.split(":").length){var l=r.split(":");sh=l[1],c.setAttribute("title",r),c.appendChild(document.createTextNode(sh))}else c.appendChild(document.createTextNode(r));return s&&s.bodyStyle&&c.setAttribute("style",s.bodyStyle),a.appendChild(c),s&&s.style&&a.setAttribute("style",s.style),a},getActionControl:function(e,t,r,i,n,s,o){var a=document.createElement("span");if(r=o&&void 0!==o.label?o.label:r,icon=!(!o||!o.icon)&&o.icon,icon){var u=document.createElement("i");u.setAttribute("class","fa "+icon),icon=u}var c=o&&o.tag?o.tag:"button",l=document.createElement(c);return icon&&l.appendChild(icon),r&&l.appendChild(document.createTextNode(" "+r+" ")),o&&o.title&&l.setAttribute("title",o.title),n&&l.setAttribute("title",n),a.appendChild(l),a},removeChildren:function(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.childNodes[0])},loadDynamicScript:function(e,t,r){var i=document.getElementById(e);if(!i){var n=document.createElement("script");n.src=t,document.body.appendChild(n),n.onload=function(){n.id=e,r&&r(e)}}i&&r&&r(e)},loadDynamicCSS:function(e,t,r){var i=document.getElementById(e);if(!i){var n=document.createElement("link");n.href=t,n.id=e,n.rel="stylesheet",document.body.appendChild(n),n.onload=function(){r&&r(e)}}i&&r&&r(e)},removeElement:function(e){e&&e.parentNode.removeChild(e)}};e.exports=s},function(e,t,r){e.exports={WOQLClient:r(47),ConnectionCapabilities:r(21),ConnectionConfig:r(22),IDParser:r(23),ErrorMessage:r(8),UTILS:r(2),WOQLResult:r(24),WOQLRule:r(5),FrameRule:r(7),View:r(71),DocumentFrame:r(38),WOQLGraph:r(32),WOQLTable:r(28),WOQLChooser:r(30),WOQLChart:r(34),WOQLStream:r(36),WOQL:r(25)}},function(e,t){
/**
 * @file Terminus Client Utility Functions
 * @license Apache Version 2
 * @summary Object for bunding up common Terminus Utility Functions 
 */
const r={standard_urls:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",owl:"http://www.w3.org/2002/07/owl#",tcs:"http://terminusdb.com/schema/tcs#",xdd:"http://terminusdb.com/schema/xdd#",v:"http://terminusdb.com/woql/variable/",terminus:"http://terminusdb.com/schema/terminus#",vio:"http://terminusdb.com/schema/vio#"},URIEncodePayload:function(e){if("string"==typeof e)return encodeURIComponent(e);const t=[];for(const r of Object.keys(e))if("object"==typeof e[r])for(const i of Object.keys(e[r])){const n=e[r][i];t.push(`${encodeURIComponent(i)}=${encodeURIComponent(n)}`)}else t.push(`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`);return t.join("&")},addURLPrefix:function(e,t){this.standard_urls[e]=t},empty:function(e){if(!e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"==typeof e)for(const t of Object.keys(e))if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},genBNID:function(){return`_:${Math.random().toString(36).substring(7)}${(new Date).getTime()}`},getShorthand:function(e){if("object"==typeof e&&e.length&&(e=e[0]),e&&"string"==typeof e)for(const t of Object.keys(this.standard_urls)){const r=this.standard_urls[t];if(e.substring(0,r.length)===r){return`${t}:${e.substring(r.length)}`}}return!1},compareIDs:function(e,t){if(e===t)return!0;if(this.unshorten(e)===t)return!0;if(this.unshorten(e)===this.unshorten(t))return!0;const r=this.getShorthand(e),i=this.getShorthand(t);return!(!r||r!==t&&r!==i)||!(!i||i!==e)},shorten:function(e,t){t=t||this.standard_urls;for(const r in t)if(t[r]==e.substring(0,t[r].length))return`${r}:${e.substring(t[r].length)}`;return e},unshorten:function(e){if(this.validURL(e))return e;if(!e)return e;const t=e.split(":");return t[1]&&this.standard_urls[t[0]]?this.standard_urls[t[0]]+t[1]:e},validURL:function(e){return!(!e||"http://"!==e.substring(0,7)&&"https://"!==e.substring(0,8))},labelFromURL:function(e){let t=this.urlFragment(e);return(t=t||e).lastIndexOf("/")<t.length-1&&(t=t.substring(t.lastIndexOf("/")+1)),(t=t.replace(/_/g," ")).charAt(0).toUpperCase()+t.slice(1)},urlFragment:function(e){let t=(e="string"!=typeof e?window.location.href:e).split("#");if(t.length<=1&&(this.validURL(e)||(t=e.split(":"))),t.length>=1){const[,r]=t;if(r){const[t]=r.split("?");e=t}}return e},lastURLBit:function(e){e=void 0===e?window.location.href:e;const[t]=e.split("#"),[r]=t.split("?");return e=r.substring(e.lastIndexOf("/")+1)},getStdURL:function(e,t,r){if(this.standard_urls[e]){if(!r)return this.standard_urls[e]+t;if(r===this.standard_urls[e]+t)return r}return!1},addNamespacesToVariables:function(e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(this.addNamespaceToVariable(e[r]));return t},addNamespaceToVariable:function(e){return"string"==typeof e&&"v:"!=e.substring(0,2)?"v:"+e:e},removeNamespaceFromVariable:function(e){return"v:"==e.substring(0,2)?e.substring(2):e},removeNamespacesFromVariables:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.removeNamespaceFromVariable(e[r]));return t},getConfigValue:function(e,t){if("string"==typeof e&&"v:"==e.substring(0,2)){var r=t[e];return r&&r["@value"]?r["@value"]:r}return e},TypeHelper:{}};r.TypeHelper.isStringType=function(e){return"http://www.w3.org/2001/XMLSchema#string"===e||"xsd:string"===e},r.TypeHelper.isDatatype=function(e){var t=r.shorten(e);return"xsd:"==t.substring(0,4)||"xdd:"==t.substring(0,4)},r.TypeHelper.numberWithCommas=function(e,t){if(t=t||",",e>=1e3||e<=-1e3){const r=e.toString().split(".");e<=-1e3&&(r[0]=r[0].substring(1)),r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),e=e<=-1e3?`-${r.join(".")}`:r.join(".")}return e},r.TypeHelper.datatypes=["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon","xdd:dateRange","xdd:gYearRange","xdd:integerRange","xdd:decimalRange","xdd:cc","xdd:email","xdd:html","xdd:url","xsd:anySimpleType","xsd:string","xsd:boolean","xsd:decimal","xsd:double","xsd:float","xsd:time","xsd:date","xsd:dateTime","xsd:dateTimeStamp","xsd:gYear","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:duration","xsd:yearMonthDuration","xsd:dayTimeDuration","xsd:byte","xsd:short","xsd:integer","xsd:long","xsd:unsignedByte","xsd:unsignedInt","xsd:unsignedLong","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger","xsd:base64Binary","xsd:anyURI","xsd:language","xsd:normalizedString","xsd:token","xsd:NMTOKEN","xsd:Name","xsd:NCName","xsd:NOTATION","xsd:QName","xsd:ID","xsd:IDREF","xsd:ENTITY","rdf:XMLLiteral","rdf:PlainLiteral","rdfs:Literal","xdd:json"],r.TypeHelper.parseRangeValue=function(e,t){t=t||",";let r=[];return"object"==typeof e&&e.length?r=e:e&&("string"!=typeof e&&(e=`${e}`),e.length&&"["===e.charAt(0)&&"]"===e.charAt(e.length-1)?(r.push(e.substring(1,e.indexOf(t))),r.push(e.substring(e.indexOf(t)+1,e.length-1))):r.push(e)),r},r.DateHelper={},r.DateHelper.parseXsdTime=function(e){if(!e)return{};const t=this.extractXsdTimezone(e);return t&&(e=e.substring(0,e.length-t.length)),{hour:e.substring(0,2),minute:e.substring(3,5),second:e.substring(6),timezone:t}},r.DateHelper.parseXsdDate=function(e){const t=this.extractXsdTimezone(e);let r,i;if(t&&(e=e.substring(0,e.length-t.length)),(r="-"===e.substring(0,1)?e.substring(0,5):e.substring(0,4))&&Math.abs(r)<1e4){let n=e.substring(r.length+1,r.length+3);if(!n)return!1;n=parseInt(n,10);let s=e.substring(r.length+4);if(!s)return!1;i={year:r,month:n,day:s=parseInt(s,10),timezone:t}}return i},r.DateHelper.parseDate=function(e,t){let r;if("xsd:date"===e)r=this.parseXsdDate(t);else if("xsd:time"===e)r=this.parseXsdTime(t);else if("xsd:dateTime"===e)r=this.parseXsdDateTime(t);else if("xsd:gYear"===e)r={year:t};else if("xsd:gYearRange"===e)r={year:t};else if("xsd:gMonth"===e)r={month:t.substring(2)};else if("xsd:gDay"===e)r={day:t};else if("xsd:gYearMonth"===e){const e=t.split("-");for(;e.length<2;)e.push("");r={year:e[0],month:e[1]}}else if("xsd:gMonthDay"===e){const e=t.split("-");for(;e.length<2;)e.push("");r={month:e[0],day:e[1]}}else"xsd:dateTimeStamp"===e&&(r=this.parseXsdDateTime(t));return r},r.DateHelper.addXsdPadding=function(e){const t={};return void 0!==e.year&&!1!==e.year&&e.year<1e3?Math.abs(e.year)<10?t.year=e.year<0?`-000${Math.abs(e.year)}`:`000${e.year}`:Math.abs(e.year)<100?t.year=e.year<0?`-00${Math.abs(e.year)}`:`00${e.year}`:t.year=e.year<0?`-0${Math.abs(e.year)}`:`0${e.year}`:e.year&&(t.year=e.year),void 0!==e.month&&!1!==e.month&&e.month<10?t.month=`0${e.month}`:e.month&&(t.month=e.month),void 0!==e.day&&!1!==e.day&&e.day<10?t.day=`0${e.day}`:e.day&&(t.day=e.day),void 0!==e.hour&&!1!==e.hour&&e.hour<10?t.hour=`0${e.hour}`:e.hour&&(t.hour=e.hour),void 0!==e.minute&&!1!==e.minute&&e.minute<10?t.minute=`0${e.minute}`:e.minute&&(t.minute=e.minute),void 0!==e.second&&!1!==e.second&&e.second<10?t.second=`0${e.second}`:e.second&&(t.second=e.second),t},r.DateHelper.xsdFromParsed=function(e,t){const r=this.addXsdPadding(e);let i;if("xsd:gYear"===t)i=!!r.year&&r.year;else{if("xsd:time"===t)return!!(r.hour&&r.minute&&r.second)&&`${r.hour}:${r.minute}:${r.second}`;if("xsd:date"===t)return!!(r.year&&r.month&&r.day)&&`${r.year}-${r.month}-${r.day}`;"xsd:dateTime"===t||"xsd:dateTimeStamp"===t?(i=!!(r.year&&r.month&&r.day)&&`${r.year}-${r.month}-${r.day}T`)&&(i+=`${r.hour?r.hour:"12"}:${r.minute?r.minute:"00"}:${r.second?r.second:"00"}`):"xsd:gMonth"===t?i=!!r.month&&`--${r.month}`:"xsd:gDay"===t?i=!!r.day&&`---${r.day}`:"xsd:gYearMonth"===t?i=!(!r.year||!r.month)&&`${r.year}-${r.month}`:"xsd:gMonthDay"===t&&(i=!(!r.day||!r.month)&&`--${r.month}-${r.day}`)}return r.timezone&&(i+=r.timezone),i},r.DateHelper.convertTimestampToXsd=function(e){const t=new Date(1e3*e);return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()}},r.DateHelper.parseXsdDateTime=function(e){if(!e)return{};if("number"==typeof e)return this.convertTimestampToXsd(e);const t=this.extractXsdTimezone(e);t&&(e=e.substring(0,e.length-t.length));const r=this.parseXsdDate(e),i=this.parseXsdTime(e.substring(e.indexOf("T")+1));for(const e of Object.keys(i))r[e]=i[e];return r.timezone=t,r},r.DateHelper.extractXsdTimezone=function(e){return e&&"Z"===e.charAt(e.length-1)?"Z":(!e||"+"!==e.charAt(e.length-6)&&"-"!==e.charAt(e.length-6)||e.substring(e.length-6),!1)},e.exports=r},function(e,t,r){"use strict";var i=r(13),n=r(56),s=Object.prototype.toString;function o(e){return"[object Array]"===s.call(e)}function a(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===s.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:n,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function r(r,i){"object"==typeof t[i]&&"object"==typeof r?t[i]=e(t[i],r):t[i]=r}for(var i=0,n=arguments.length;i<n;i++)c(arguments[i],r);return t},deepMerge:function e(){var t={};function r(r,i){"object"==typeof t[i]&&"object"==typeof r?t[i]=e(t[i],r):t[i]="object"==typeof r?e({},r):r}for(var i=0,n=arguments.length;i<n;i++)c(arguments[i],r);return t},extend:function(e,t,r){return c(t,(function(t,n){e[n]=r&&"function"==typeof t?i(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(module,exports,__webpack_require__){function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],i=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}
/**
 * @file Javascript Api explorer tool
 * @author Kitty Jose
 * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more
 *
 * @summary Set of functions used across scripts
 */var Codemirror=__webpack_require__(73),TerminusClient=__webpack_require__(1),HTMLHelper=__webpack_require__(0);function readFile(e){return window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.open("GET",e,!1),xmlhttp.send(),xmlDoc=xmlhttp.responseText,xmlDoc}function getFunctionSignature(e){var t={connect:{spec:"WOQLClient.connect(surl, key)",descr:"\n\nConnect to a Terminus server at the given URI with an API keyStores the terminus:ServerCapability document returned in the connection registerwhich stores, the url, key, capabilities, and database meta-data for the connected serverIf the curl argument is false or null, the this.server will be used if present, or the promise will be rejected.\n1)The first (surl) argument: {string} argument it is the Server Url\n2)The second(key) argument: {string} argument contains an API key",result:"HTTP 200 on success, 409 for already existing database, otherwise error code",args:{server_url:"url",key:"Api key"},options:{title:"",description:""}},create:{spec:"WOQLClient.createDatabase(dburl, details, key)",descr:"\n\nCreate a Terminus Database\n1)The first (dburl) argument:{string}, it is a terminusDB Url or a terminusDB Id \n2)The second(details) argument:{object}, details which is the payload\n which included information of the new database to be created\n3)The third (key) argument:{string}, contains an API key ",result:"HTTP 200 on success, 409 for already existing database, otherwise error code",args:{database_url:"url",details:"",key:" Api key"},options:{title:"",description:""}},delete:{spec:"WOQLClient.deleteDatabase(dburl, key)",descr:"\n\nDeletes a Database\n1)The first (dburl) argument: {string}, it is a terminusDB Url or a terminusDB Id \n2)The second(key) argument: {string}, contains an API key",result:"HTTP 200 on success, otherwise error code"},getSchema:{spec:"WOQLClient.getSchema(surl, options)",descr:"\n\nGets the schema of a database.\n1)The first (surl) argument: {string}, it is a dbUrl/schema\n2)The second(key) argument: {string}, contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",options:{format:"turtle"}},getClassFrames:{spec:"WOQLClient.getClassFrame = function(cfurl, cls, opts)",descr:"\n\nRetrieves a WOQL query on the specified database which updates the state and returns the results\nThe first (cfurl) argument can be\n1) a valid URL of a terminus database or\n2) omitted - the current database will be used\nthe second argument (cls) is the URL / ID of a document class that exists in the database schema\nthe third argument (opts) is an options json - opts.key is an optional API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",options:{format:"turtle"}},updateSchema:{spec:"WOQLClient.updateSchema(schurl, docs, options)",descr:"\n\nUpdates the Schema of the specified database\n1)The first (surl) argument :{string}, is a dbUrl/schema\n2)The second(docs) argument:{object}, is a valid owl ontology (new schema to be updated) in turtle format\n3)The third (key) argument:{string}, contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document:"doc"},options:{format:"turtle",editmode:"replace"}},createDocument:{spec:"WOQLClient.createDocument(docurl, document, options)",descr:"\n\nCreates a new document in the specified database\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\n2)The second(document) argument: {object}, is a valid document in json-ld\n3)The third (key) argument:{string}, contains an API key",result:"Created Document on success (HTTP 200), Violation Report Otherwise (HTTP 400+)",args:{document_url:"url",document:"doc"},options:{format:"turtle",fail_on_id_denied:!1}},viewDocument:{spec:"WOQLClient.getDocument(docurl, options)",descr:"\n\nRetrieves a document from the specified database\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\n2)The second (key) argument: {string}, contains an API key",result:"Document (HTTP 200), Violation Report Otherwise (HTTP 400+)",args:{document_url:"url"},options:{format:"turtle"}},updateDocument:{spec:"WOQLClient.updateDocument(docurl, document, options)",descr:"\n\nUpdates a document in the specified database with a new version\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\n2)The second(document) argument: {object}, is a valid document in json-ld\n3)The third (key) argument:{string} argument contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document_url:"url",document:"doc"},options:{format:"turtle",editmode:"replace"}},deleteDocument:{spec:"WOQLClient.deleteDocument(docurl, key)",descr:"\n\nDeletes a document from the specified database\n1)The first (docurl) argument: {string},is a dbUrl/document/document_id\n2)The second (key) argument: {string}, contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document_url:"url"}},select:{spec:"WOQLClient.select(dburl, query, options)",descr:"\n\nExecutes a read-only WOQL query on the specified database and returns the results\n1)The first (docurl) argument: {string}, is a terminusDB Url or a terminusDB Id\n2)The second (query) argument: {object}, a valid query in json-ld format \n3)The third (key) argument:{string}, contains an API key",result:"WOQL Result (HTTP 200), otherwise error code",args:{woql:"woql"}},update:{spec:"WOQLClient.update(dburl, query, options)",descr:"\n\nExecutes a WOQL query on the specified database which updates the state and returns the results\n1)The first (dburl) argument: {string}, is a terminusDB Url or a terminusDB Id\n2)The second (query) argument: {object}, a valid query in json-ld format \n3)The third (key) argument:{string}, contains an API key",result:"WOQL Result (HTTP 200), otherwise error code",args:{woql:"woql"}},lookup:{spec:"WOQLClient.lookup(database_url, woql, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url",term:"string"}},map:{spec:"WOQLClient.lookup(source, target, woql, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{source:"json",target:"json",woql:"json"}},getClassFrame:{spec:"WOQLClient.getClassFrame(class, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url"}},getPropertyFrame:{spec:"WOQLClient.getPropertyFrame(class, property, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url",property:"url"}},getFilledPropertyFrame:{spec:"WOQLClient.getPropertyFrame(document_url, property, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{document_url:"url",property:"url"}},getSubClasses:{spec:"WOQLClient.getSubClasses(class, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url"}}};return t[e]}function getHeaderDom(e){var t=document.createElement("div");t.setAttribute("class","terminus-module-head");var r=document.createElement("h3");return r.innerHTML=e,t.appendChild(r),t}function getButton(e){var t=document.createElement("button");return t.setAttribute("class","terminus-btn"),t.setAttribute("value",e),t.appendChild(document.createTextNode(e)),t}function getInfoAlertDom(e,t,r){var i=document.createElement("div");"info"==e?i.setAttribute("class","terminus-alert terminus-alert-success"):i.setAttribute("class","alert");var n=document.createElement("STRONG");n.innerHTML=t,i.appendChild(n);var s=document.createTextNode(r);return i.appendChild(s),i}function getResponse(e,t,r,i){var n=document.createElement("div");n.appendChild(getHeaderDom("Result"));var s=document.createElement("BR");n.appendChild(s);var o=JSON.stringify(r,0,4),a=document.createElement("pre");a.setAttribute("class","terminus-api-view terminus-scheme-pre"),a.innerHTML=o,stylizeCodeDisplay(i,a,n,"javascript")||n.appendChild(a);s=document.createElement("BR");return n.appendChild(s),e.appendChild(n),e}function showHttpResult(e,t,r,i){var n=document.createElement("BR");r.appendChild(n);n=document.createElement("BR");r.appendChild(n),r.appendChild(getHeaderDom("HTTP Header"));n=document.createElement("BR");r.appendChild(n);var s="",o=!0,a=!1,u=void 0;try{for(var c,l=e.headers[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var d=_slicedToArray(c.value,2),h=d[0],p=d[1];s=s+"".concat(h," = ").concat(p)+"\n"}}catch(e){a=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}var m=document.createElement("pre");m.setAttribute("class","terminus-api-signature-pre");var f=document.createTextNode(s);return m.appendChild(f),stylizeCodeDisplay(i,m,r,"message/http")||r.appendChild(m),e.json().then((function(e){getResponse(r,t,e,i)}))}function deleteStylizedEditor(e,t){if(e.pluginAvailable("codemirror")){var r=t.nextElementSibling;r.setAttribute("class","terminus-hide"),HTMLHelper.removeChildren(r)}}function stylizeEditor(e,t,r,i){if(e){var n=e.pluginAvailable("codemirror");if(!n)return;var s=new Codemirror(t,i,n)}else s=new Codemirror(t,i,{});var o=s.colorizeTextArea(r);s.updateTextArea(o)}function stylizeCodeDisplay(e,t,r,i){if(e){var n=e.pluginAvailable("codemirror");if(!n)return!1;var s=new Codemirror(t,i,n)}else s=new Codemirror(t,i,{});var o=s.colorizePre();return r&&r.appendChild(o),!0}function removeSelectedNavClass(e){var t=document.getElementsByClassName(e);if(!(t.length<1))for(var r=0;r<t.length+1;r++)t[r].classList.remove(e)}function setSelectedSubMenu(e){removeSelectedNavClass("terminus-submenu-selected"),e.classList.add("terminus-submenu-selected")}function setSelected(e,t){for(var r=e.parentElement,i=0;i<r.childNodes.length;i++)r.childNodes[i].classList.contains(t)&&r.childNodes[i].classList.remove(t);e.classList.add(t)}function tolggleContent(e,t){"block"===t.style.display?(removeSelectedNavClass("fa-chevron-up"),e.classList.add("fa-chevron-down"),t.style.display="none"):(removeSelectedNavClass("fa-chevron-down"),e.classList.add("fa-chevron-up"),t.style.display="block")}function activateSelectedNav(e,t){removeSelectedNavClass("terminus-selected"),e.classList.add("terminus-selected")}function hideDocumentSubMenus(e){e.classList.contains("terminus-display")&&(e.classList.remove("terminus-display"),e.classList.add("terminus-hide"))}function checkDocumentSubMenus(e){e.ui.showControl("get_document")&&hideDocumentSubMenus(document.getElementsByClassName("terminus-get-doc")[0]);e.ui.showControl("create_document")&&hideDocumentSubMenus(document.getElementsByClassName("terminus-create-doc")[0])}function toggleVisibility(e){e.classList.contains("terminus-display")?(e.classList.remove("terminus-display"),e.classList.add("terminus-hide")):e.classList.contains("terminus-hide")&&(e.classList.remove("terminus-hide"),e.classList.add("terminus-display"))}function extractValueFromCell(e){return(new DOMParser).parseFromString(e,"text/xml").firstChild.innerHTML}function displayDocumentSubMenus(e){e.showControl("get_document")&&showSubMenus(document.getElementsByClassName("terminus-get-doc")[0]);e.showControl("create_document")&&showSubMenus(document.getElementsByClassName("terminus-create-doc")[0])}function checkForMandatoryId(){var e=document.getElementsByClassName("terminus-object-id-input");if(e.length>0)return!!e[0].value||(e[0].setAttribute("placeholder","Required field"),e[0].style.background="#f8d7da",!1)}function showSubMenus(e){e.classList.remove("terminus-hide"),e.classList.add("terminus-display")}function getCurrentWoqlQueryObject(e,t){var r;switch(e||(e=t.query),e){case"Show_All_Schema_Elements":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).elementMetadata();break;case"Show_All_Classes":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).classMetadata();break;case"Show_All_Data":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).getEverything();break;case"Show_All_Documents":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).getAllDocuments();break;case"Show_All_Document_classes":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).documentMetadata();break;case"Show_Document_Classes":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).and(TerminusClient.WOQL.quad("v:Element","rdf:type","owl:Class","db:schema"),TerminusClient.WOQL.abstract("v:Element"),TerminusClient.WOQL.sub("v:Element","tcs:Document"),TerminusClient.WOQL.opt().quad("v:Element","rdfs:label","v:Label","db:schema"),TerminusClient.WOQL.opt().quad("v:Element","rdfs:comment","v:Comment","db:schema"));break;case"Show_All_Properties":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).propertyMetadata();break;default:console.log("Invalid query "+e+" passed in WOQLTextboxGenerator")}return r}function trimValue(e){return e.replace(/[\s\t\r\n\f]/g,""),e}function getqObjFromInput(q){var WOQL=TerminusClient.WOQL,query=q;try{var qObj=eval(query);return this.qObj=qObj,qObj}catch(e){console.log("Error in getting woql object ",e.toString())}}module.exports={tolggleContent:tolggleContent,removeSelectedNavClass:removeSelectedNavClass,stylizeCodeDisplay:stylizeCodeDisplay,stylizeEditor:stylizeEditor,deleteStylizedEditor:deleteStylizedEditor,showHttpResult:showHttpResult,getHeaderDom:getHeaderDom,getInfoAlertDom:getInfoAlertDom,getFunctionSignature:getFunctionSignature,toggleVisibility:toggleVisibility,extractValueFromCell:extractValueFromCell,displayDocumentSubMenus:displayDocumentSubMenus,setSelectedSubMenu:setSelectedSubMenu,checkForMandatoryId:checkForMandatoryId,activateSelectedNav:activateSelectedNav,getCurrentWoqlQueryObject:getCurrentWoqlQueryObject,getButton:getButton,trimValue:trimValue,setSelected:setSelected,getqObjFromInput:getqObjFromInput}},function(e,t,r){
/**
 * @file WOQL Rules 
 * @license Apache Version 2
 * @summary WOQL Rules support pattern matching on results of WOQL Queries 
 */
const i=r(26),n=r(2);function s(){i.TerminusRule.call(this),this.pattern=new o}function o(e){i.TerminusPattern.call(this,e)}s.prototype=Object.create(i.TerminusRule.prototype),s.prototype.constructor=i.TerminusRule,s.prototype.setVariables=function(e){return e&&e.length&&(this.pattern.variables=n.addNamespacesToVariables(e),this.current_variable=this.pattern.variables[this.pattern.variables.length-1]),this},s.prototype.vars=function(...e){return this.setVariables(e)},s.prototype.v=function(e){return e?(this.current_variable=n.addNamespaceToVariable(e),this):this.current_variable},s.prototype.edge=function(e,t){if(this.scope("edge"),e){let t=n.addNamespaceToVariable(e);this.setVariables([t]),this.pattern.source=t}if(t){let r=n.addNamespaceToVariable(t);e||this.setVariables([r]),this.pattern.target=r}return this},s.prototype.rownum=function(e){return void 0===e?this.pattern.rownum:(this.pattern.rownum=e,this)},s.prototype.in=function(...e){return this.current_variable&&(this.pattern.constraints||(this.pattern.constraints={}),this.pattern.constraints[this.current_variable]||(this.pattern.constraints[this.current_variable]=[]),this.pattern.constraints[this.current_variable].push(e)),this},s.prototype.filter=function(e){return this.current_variable&&(this.pattern.constraints||(this.pattern.constraints={}),this.pattern.constraints[this.current_variable]||(this.pattern.constraints[this.current_variable]=[]),this.pattern.constraints[this.current_variable].push(e)),this},s.prototype.matchRow=function(e,t,r,i){for(var n=[],s=0;s<e.length;s++)i&&this.rule&&void 0===this.rule[i]||e[s].pattern.matchRow(t,r)&&n.push(e[s]);return n},s.prototype.matchCell=function(e,t,r,i,n){for(var s=[],o=0;o<e.length;o++)n&&this.rule&&void 0===this.rule[n]||e[o].pattern.matchCell(t,r,i)&&s.push(e[o]);return s},s.prototype.matchColumn=function(e,t,r){for(var i=[],n=0;n<e.length;n++)r&&this.rule&&void 0===this.rule[r]||e[n].pattern.matchColumn(t)&&i.push(e[n]);return i},s.prototype.matchNode=function(e,t,r,i,n){for(var s=[],o=0;o<e.length;o++)n&&this.rule&&void 0===this.rule[n]||e[o].pattern.matchNode(t,r,i)&&s.push(e[o]);return s},s.prototype.matchPair=function(e,t,r,i,n){for(var s=[],o=0;o<e.length;o++)n&&this.rule&&void 0===this.rule[n]||e[o].pattern.matchPair(t,r,i)&&s.push(e[o]);return s},s.prototype.matchEdge=s.prototype.matchPair,o.prototype=Object.create(i.TerminusPattern.prototype),o.prototype.constructor=i.TerminusPattern,o.prototype.prettyPrint=function(e){var t=this.scope+"('";for(var r in this.variables&&(t+=this.variables.join("', '")),t+="')",void 0!==this.literal&&(t+=".literal("+this.literal+")"),void 0!==this.type&&(t+=".type("+this.unpack(this.type)+")"),void 0!==this.value&&(t+=".value("+this.unpack(this.value,!0)+")"),this.constraints){t+=".v('"+r+"')";for(var i=0;i<this.constraints[r].length;i++)"function"==typeof this.constraints[r][i]?t+=".filter("+this.constraints[r][i]+")":t+=".in("+json.unpack(this.constraints[r][i])+")"}return t},o.prototype.matchRow=function(e,t){return!(void 0!==this.rownum&&void 0!==t&&!this.numberMatch(this.rownum,t))&&((!this.scope||"row"==this.scope)&&!!this.testVariableConstraints(e))},o.prototype.matchCell=function(e,t,r){return!(void 0!==this.rownum&&void 0!==r&&!this.numberMatch(this.rownum,r))&&(!!this.testBasics("column",e[t])&&((!this.variables||!this.variables.length||-1!=this.variables.indexOf(t))&&!!this.testVariableConstraints(e)))},o.prototype.matchNode=function(e,t,r){return!!this.testBasics("node",e[t])&&((!this.variables||!this.variables.length||-1!=this.variables.indexOf(t))&&!!this.testVariableConstraints(e))},o.prototype.matchColumn=function(e){return(!this.scope||"column"==this.scope)&&(!this.variables||!this.variables.length||-1!=this.variables.indexOf(e))},o.prototype.matchPair=function(e,t,r){return(!this.scope||"edge"==this.scope)&&((!this.source||this.source==t)&&((!this.target||this.target==r)&&!!this.testVariableConstraints(e)))},o.prototype.testVariableConstraints=function(e){for(var t in this.constraints)if(!this.testVariableConstraint(t,e[t]))return!1;return!0},o.prototype.testVariableConstraint=function(e,t){if(!this.constraints[e])return!0;for(var r=0;r<this.constraints[e].length;r++)if(!this.testValue(t,this.constraints[e][r]))return!1;return!0},o.prototype.setPattern=function(e){for(var t in e)this[t]=e[t]},o.prototype.json=function(){var e={};return this.scope&&(e.scope=this.scope),this.value&&(e.value=this.value),this.rownum&&(e.rownum=this.rownum),this.variables&&(e.variables=this.variables),this.literal&&(e.literal=this.literal),this.type&&(e.type=this.type),this.constraints&&(e.constraints=this.constraints),this.source&&(e.source=this.source),this.target&&(e.target=this.target),e},e.exports=s},function(e,t,r){const i=r(5);function n(){this.rules=[]}function s(){i.call(this),this.rule={}}n.prototype.render=function(e){return e&&(this.view_render=e),this.view_render},n.prototype.renderer=function(e){return e&&(this.view_renderer=e),this.view_renderer},n.prototype.getRulesJSON=function(){let e=[];for(var t=0;t<this.rules.length;t++)e.push(this.rules[t].json());return e},n.prototype.getBasicJSON=function(){let e={};return this.view_render&&(e.render=this.view_render),this.view_renderer&&(e.renderer=this.view_renderer),e},n.prototype.loadBasicJSON=function(e){e.render&&(this.view_render=e.view_render),e.renderer&&(this.view_renderer=e.view_renderer)},n.prototype.getBasicprettyPrint=function(){let e="";return void 0!==this.render()&&(e+="view.render("+this.render()+")\n"),void 0!==this.renderer()&&(e+="view.renderer('"+this.renderer()+"')\n"),e},s.prototype=Object.create(i.prototype),s.prototype.constructor=i,s.prototype.prettyPrint=function(e){let t="";return this.pattern&&(t=this.pattern.prettyPrint(e)),void 0!==this.color()&&(t+=".color(["+this.color().join(",")+"])"),void 0!==this.hidden()&&(t+=".hidden("+this.hidden()+")"),void 0!==this.size()&&(t+=".size('"+this.size()+"')"),void 0!==this.icon()&&(t+=".icon("+JSON.stringify(this.icon())+")"),void 0!==this.text()&&(t+=".text("+JSON.stringify(this.text())+")"),void 0!==this.border()&&(t+=".border("+JSON.stringify(this.border())+")"),void 0!==this.args()&&(t+=".args("+JSON.stringify(this.args())+")"),void 0!==this.renderer()&&(t+=".renderer('"+this.renderer()+"')"),void 0!==this.render()&&(t+=".render("+this.render()+")"),void 0!==this.click()&&(t+=".click("+this.click()+")"),void 0!==this.hover()&&(t+=".hover("+this.hover()+")"),t},s.prototype.json=function(e){if(!e){var t={};return this.pattern&&(t.pattern=this.pattern.json()),t.rule=this.rule,t}return this.rule=e.rule||{},e.pattern&&this.pattern.setPattern(e.pattern),this},s.prototype.size=function(e){return void 0===e?this.rule.size:(this.rule.size=e,this)},s.prototype.color=function(e){return void 0===e?this.rule.color:(this.rule.color=e,this)},s.prototype.icon=function(e){return e?(this.rule.icon=e,this):this.rule.icon},s.prototype.text=function(e){return e?(this.rule.text=e,this):this.rule.text},s.prototype.border=function(e){return e?(this.rule.border=e,this):this.rule.border},s.prototype.renderer=function(e){return void 0===e?this.rule.renderer:(this.rule.renderer=e,this)},s.prototype.render=function(e){return void 0===e?this.rule.render:(this.rule.render=e,this)},s.prototype.click=function(e){return e?(this.rule.click=e,this):this.rule.click},s.prototype.hover=function(e){return e?(this.rule.hover=e,this):this.rule.hover},s.prototype.hidden=function(e){return void 0===e?this.rule.hidden:(this.rule.hidden=e,this)},s.prototype.args=function(e){return void 0===e?this.rule.args:(this.rule.args=e,this)},e.exports={WOQLViewRule:s,ViewConfig:n}},function(e,t,r){const i=r(26);function n(){i.TerminusRule.call(this),this.pattern=new s}function s(){i.TerminusPattern.call(this)}n.prototype=Object.create(i.TerminusRule.prototype),n.prototype.constructor=i.TerminusRule,n.prototype.testRules=function(e,t,r){var i=[];if(e&&e.length)for(var n=0;n<e.length;n++){(!e[n].pattern||this.patternMatchesFrame(e[n].pattern,t))&&(i.push(e[n]),r&&"function"==typeof r&&r(t,e[n]))}return i},n.prototype.patternMatchesFrame=function(e,t){return e.checkFrame?e.checkFrame(t):(new s).setPattern(e).checkFrame(t)},n.prototype.property=function(...e){return e&&0!=e.length?(this.pattern.property=e,this):this.pattern.property},n.prototype.frame_type=function(...e){return e&&0!=e.length?(this.pattern.frame_type=e,this):this.pattern.frame_type},n.prototype.label=function(...e){return e&&0!=e.length?(this.pattern.label=e,this):this.pattern.label},n.prototype.subject=function(...e){return e&&0!=e.length?(this.pattern.subject=e,this):this.pattern.subject},n.prototype.subjectClass=function(...e){return e&&0!=e.length?(this.pattern.subjectClass=e,this):this.pattern.subjectClass},n.prototype.range=function(...e){return e&&0!=e.length?(this.pattern.range=e,this):this.pattern.range},n.prototype.depth=function(e){return void 0===e?this.pattern.depth:(this.pattern.depth=e,this)},n.prototype.index=function(...e){return e&&0!=e.length?(this.pattern.index=e,this):this.pattern.index},n.prototype.status=function(...e){return e&&0!=e.length?(this.pattern.status=e,this):this.pattern.status},n.prototype.parent=function(e){return e?(this.pattern.parent=e,this):this.pattern.parent},n.prototype.children=function(...e){if(void 0===e||0==e.length)return this.pattern.children;void 0===this.pattern.children&&(this.pattern.children=[]);for(let t=0;t<e.length;t++)this.pattern.children.push(e[t]);return this},s.prototype=Object.create(i.TerminusPattern.prototype),s.prototype.constructor=i.TerminusPattern,s.prototype.setPattern=function(e){if(e.scope&&(this.scope=e.scope),void 0!==e.literal&&(this.literal=e.literal),void 0!==e.type&&(this.type=e.type),void 0!==e.label&&(this.label=e.label),void 0!==e.frame_type&&(this.frame_type=e.frame_type),void 0!==e.subject&&(this.subject=e.subject),void 0!==e.subjectClass&&(this.subjectClass=e.subjectClass),void 0!==e.range&&(this.range=e.range),void 0!==e.property&&(this.property=e.property),void 0!==e.value&&(this.value=e.value),void 0!==e.parent){let t=e.parent;"function"!=typeof t.json&&(t=(new s).setPattern(t)),this.parent=t}if(e.children){this.children=[];for(let r=0;r<e.children.length;r++){var t=e.children[r];"function"!=typeof t.json&&(t=(new s).setPattern(t)),this.children.push(t)}}void 0!==e.depth&&(this.depth=e.depth),void 0!==e.index&&(this.index=e.index),void 0!==e.status&&(this.status=e.status)},s.prototype.json=function(){var e={};if(void 0!==this.literal&&(e.literal=this.literal),this.type&&(e.type=this.type),this.scope&&(e.scope=this.scope),void 0!==this.value&&(e.value=this.value),void 0!==this.label&&(e.label=this.label),void 0!==this.frame_type&&(e.frame_type=this.frame_type),void 0!==this.subject&&(e.subject=this.subject),void 0!==this.subjectClass&&(e.subjectClass=this.subjectClass),void 0!==this.range&&(e.range=this.range),void 0!==this.property&&(e.property=this.property),void 0!==this.parent&&(e.parent=this.parent.json?this.parent.json():this.parent),void 0!==this.children){e.children=[];for(var t=0;t<this.children.length;t++)e.children.push(this.children[t].json?this.children[t].json():this.children[t])}return void 0!==this.depth&&(e.depth=this.depth),void 0!==this.index&&(e.index=this.index),void 0!==this.status&&(e.status=this.status),e},s.prototype.checkFrame=function(e){var t=this.getRendererType(e);return!!t&&((!this.scope||this.scope==t||"*"==this.scope)&&(!this.illegalRuleType(t)&&(!(this.frame_type&&!this.checkFrameType(t,e))&&(!(this.label&&!this.checkLabel(t,e))&&(!(this.subject&&!this.checkSubject(t,e))&&(!(this.subjectClass&&!this.checkSubjectClass(t,e))&&(!(this.property&&!this.checkProperty(t,e))&&(!(void 0!==this.depth&&!this.checkDepth(t,e))&&(!(this.range&&!this.checkRange(t,e))&&(!(void 0!==this.value&&!this.checkValue(t,e))&&(!(this.type&&!this.checkType(t,e))&&(!(void 0!==this.literal&&!this.checkLiteral(t,e))&&(!(this.parent&&!this.checkParent(t,e))&&(!(this.children&&this.children.length&&!this.checkChildren(t,e))&&(!(this.index&&!this.checkIndex(t,e))&&!(this.status&&!this.checkStatus(t,e)))))))))))))))))},s.prototype.prettyPrint=function(e){if("*"==this.scope)var t="all()";else t=this.scope+"()";if(void 0!==this.literal&&(t+=".literal("+this.literal+")"),void 0!==this.type&&(t+=".type("+this.unpack(this.type)+")"),void 0!==this.range&&(t+=".range("+this.unpack(this.range)+")"),void 0!==this.frame_type&&(t+=".frame_type("+this.unpack(this.frameType)+")"),void 0!==this.label&&(t+=".label("+this.unpack(this.label)+")"),void 0!==this.subject&&(t+=".subject("+this.unpack(this.subject)+")"),void 0!==this.subjectClass&&(t+=".subjectClass("+this.unpack(this.subjectClass)+")"),void 0!==this.property&&(t+=".property("+this.unpack(this.property)+")"),void 0!==this.value&&(t+=".value("+this.unpack(this.value,!0)+")"),void 0!==this.children&&this.children.length>0){t+=".children(\n";for(var r=this.children,i=0;i<r.length;i++)t+="View.pattern()."+r[i].prettyPrint(),i<r.length-1&&(t+=","),t+="\n";t+=")"}return void 0!==this.parent&&(t+=".parent(View.pattern()."+this.parent.prettyPrint()+")"),void 0!==this.depth&&(t+=".depth("+this.unpack(this.depth,!0)+")"),void 0!==this.index&&(t+=".index("+this.unpack(this.index,!0)+")"),void 0!==this.status&&(t+=".status("+this.unpack(this.status)+")"),t},s.prototype.illegalRuleType=function(e){return!("data"!=e||!this.children||!this.children.length)||!("object"!=e||!this.range)},s.prototype.checkSubject=function(e,t){"object"==typeof this.subject&&this.subject.length||(this.subject=[this.subject]);const r=t.subject();for(let t=0;t<this.subject.length;t++)if(this.IDsMatch(e[t],r))return!0;return!1},s.prototype.checkChildren=function(e,t){for(let r=0;r<this.children.length;r++){let i=!1;if("object"==e)for(const e in t.properties)this.children[r].checkFrame(t.properties[e])&&(i=!0);else if("property"==e)for(let e=0;e<=renderer.values.length;e++)this.children[e].checkFrame(t.values[e])&&(i=!0);if(!i)return!1}return!0},s.prototype.checkStatus=function(e,t){"object"==typeof this.status&&0!=this.status.length||(this.status=[this.status]);for(let e=0;e<this.status.length;e++){if("updated"==this.status[e]&&!t.isUpdated())return!1;if("new"==this.status[e]&&!t.isNew())return!1;if("unchanged"==this.status[e]&&t.isUpdated())return!1}return!0},s.prototype.checkDepth=function(e,t){return this.numberMatch(this.depth,t.depth())},s.prototype.checkParent=function(e,t){return this.parent.checkFrame(t.parent)},s.prototype.checkIndex=function(e,t){return"data"==e&&this.index==t.index},s.prototype.checkProperty=function(e,t){"object"==typeof this.property&&this.property.length||(this.property=[this.property]);for(let e=0;e<this.property.length;e++)if(this.propertyIDsMatch(t.property(),this.property[e]))return!0;return!1},s.prototype.checkType=function(e,t){if("object"==e)var r=t.subjectClass();else r=t.range();return Array.isArray(this.type)||(this.type=[this.type]),-1!==this.type.indexOf(r)},s.prototype.checkLiteral=function(e,t){return"object"!=e&&("property"!=e&&("data"!=e||t.isDatatypeProperty()))},s.prototype.checkValue=function(e,t){"object"==typeof this.value&&this.value.length||(this.value=[this.value]);for(let r=0;r<this.value.length;r++)if("data"==e){if(this.valuesMatch(t.value(),this.value[r]))return!0}else if("property"==e){for(let e=0;e<=t.values.length;e++)if("data"==this.getRendererType(t.values[r])&&this.valuesMatch(t.values[r].get(),this.value[r]))return!0}else if("object"==e)for(const e in t.properties)if(this.checkValue(this.getRendererType(t.properties[e]),t.properties[e]))return!0;return!1},s.prototype.checkRange=function(e,t){"object"==typeof this.range&&this.range.length||(this.range=[this.range]);for(let e=0;e<this.range.length;e++)if(this.rangeIDsMatch(t.range(),this.range[e]))return!0;return!1},s.prototype.checkSubjectClass=function(e,t){"object"==typeof this.subjectClass&&this.subjectClass.length||(this.subjectClass=[this.subjectClass]);const r=t.subjectClass();for(let e=0;e<this.subjectClass.length;e++)if(this.classIDsMatch(this.subjectClass[e],r))return!0;return!1},s.prototype.checkFrameType=function(e,t){return"object"==e?-1!=this.frame_type.indexOf("object"):"data"==e&&t.frame?-1!=this.frame_type.indexOf(t.frame.ftype()):"property"!=e&&void 0},s.prototype.checkLabel=function(e,t){if("function"!=typeof t.getLabel)return console.log(new Error("Rule passed to check label with broken renderer object - no getLabel")),!1;for(let e=0;e<this.label.length;e++)if(this.stringMatch(this.label[e],t.getLabel()))return!0;return!1},s.prototype.getRendererType=function(e){return e.isProperty()?"property":e.isObject()?"object":e.isData()?"data":e.renderer_type?e.renderer_type:(console.log(new Error(`frame configuration passed non-renderer type ${e.constructor.name}`)),console.log(renderer),!1)},e.exports=n},function(e,t){function r(e,t,r){let n="";return r.response?(r=r.response).data&&(n+=`${i(r.data)}`):r.body&&(n+=`${i(r.body)}`),e=e.split("?")[0],r.status&&(n+=`Code: ${r.status}`),r.action&&(n+=` Action: ${r.action}`),r.type&&(n+=` Type: ${r.type}`),e&&(n+=` url: ${e}`),t&&t.method&&(n+=` method: ${t.method}`),n}function i(e){if("object"==typeof e){let t="";for(const r of Object.keys(e))e[r]&&"object"!=typeof e[r]&&(t+=`${r} ${e[r]} `);return t}return e}e.exports={getErrorAsMessage:r,getAPIErrorMessage:function(e,t,i){return`API Error ${r(e,t,i)}`},getAccessDeniedMessage:function(e,t,i){return`Access Denied ${r(e,t,i)}`},accessDenied:function(e,t,r){const i={status:403};return i.url=(r||"")+(t||""),i.type="client",i.action=e,i.body=`${i.action} not permitted for ${i.url}`,i},getInvalidURIMessage:function(e,t){return`Invalid argument to\n            ${t}. \n            ${e}\n            is not a valid Terminus DB API endpoint`},parseAPIError:function(e){const t={};if(t.status=e.status,t.type=e.type,e.data&&"object"==typeof e.data){let r;try{r=e.text()}catch(t){try{r=e.json()}catch(t){r=e.toString()}}t.body=r}else e.data&&(t.body=e.data);return t.url=e.url,t.headers=e.headers,t.redirected=e.redirected,t}}},function(e,t,r){var i=r(75),n=r(104),s=r(1);function o(e){this.client=e}o.prototype.TerminusClient=function(){return s},o.prototype.getDocumentPane=function(e,t,r){var i=new n(this.client,e);return i.view=t,r?i.options(r):i.options(i.defaultPaneView),i},o.prototype.getDocument=function(e,t,r){return this.getDocumentPane(e,t)},o.prototype.getNewDocumentPane=function(e,t,r){var i=new n(this.client,!1,e);return i.view=t,r?i.options(r):i.options(i.defaultPaneView),i},o.prototype.getQueryPane=function(e,t,r,n,s){var o=new i(this.client,e,r);if(s?o.options(s):o.options(o.defaultQueryView),t&&t.length)for(var a=0;a<t.length;a++){var u=n&&n[a]?n[a]:o.defaultResultView;o.addView(t[a],u)}return o},o.prototype.getResult=function(e,t,r){return this.getQueryPane(e,[t],r)},e.exports=o},function(module,exports,__webpack_require__){var TerminusClient=__webpack_require__(1),UTILS=__webpack_require__(4),HTMLHelper=__webpack_require__(0);function TerminusCodeSnippet(e,t,r,i,n,s){this.language=e||"woql",this.mode=t||"view",this.width=i||1200,this.height=n||300,this.placeholder=s||"",this.format=r||"js",this.formats={js:"WOQL.js",jsonld:"JSON-LD"},"view"==this.mode?this.snippet=document.createElement("pre"):(this.snippet=document.createElement("textarea"),this.snippet.setAttribute("spellcheck","false"),this.snippet.setAttribute("class","terminus-code-snippet"))}TerminusCodeSnippet.prototype.setQuery=function(e){this.qObj=e,this.refreshContents()},TerminusCodeSnippet.prototype.serialise=function(e,t){return"js"==t?e.prettyPrint(4):JSON.stringify(e.json(),void 0,2)},TerminusCodeSnippet.prototype.parseText=function(text,format){try{var WOQL=TerminusClient.WOQL,View=TerminusClient.View;if("js"==format){var nw=eval(text);return"rule"==this.language?(this.view=view,view):nw}var qval=JSON.parse(text);return"woql"==this.language?WOQL.json(qval):View.loadConfig(qval)}catch(e){return this.error="Failed to parse Query "+e.toString()+" "+text,this.error}},TerminusCodeSnippet.prototype.getInputElement=function(){return this.snippet},TerminusCodeSnippet.prototype.readInput=function(){return"edit"==this.mode?(this.qObj=this.parseText(this.snippet.value,this.format),this.qObj):this.qObj},TerminusCodeSnippet.prototype.get=function(){return this.readInput()},TerminusCodeSnippet.prototype.getAsDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-snippet-container");var r=document.createElement("div");if(this.placeholder&&this.snippet.setAttribute("placeholder",this.placeholder),r.appendChild(this.getFormatButtons()),this.qObj){var i=this.serialise(this.qObj,this.format);"edit"==this.mode?this.snippet.value=i:this.snippet.appendChild(document.createTextNode(i))}else this.snippet.value="";if(r.appendChild(this.snippet),"edit"==this.mode){var n=document.createElement("span");n.setAttribute("class","terminus-query-submit-buttons");var s=this.getSubmitButton();n.appendChild(s),r.appendChild(n)}return t.appendChild(r),t},TerminusCodeSnippet.prototype.changeRuleView=function(e){this.snippet.value="view = WOQL."+e+"()",this.readInput(),this.submit(this.qObj)},TerminusCodeSnippet.prototype.getIconsDOM=function(){var e=document.createElement("span");e.setAttribute("class","terminus-snippet-icons");for(var t=0;t<this.view_types.length;t++){var r=document.createElement("span"),i=document.createElement("i");i.title=this.view_types[t].label,i.setAttribute("class",this.view_types[t].icon),r.appendChild(i),r.name=this.view_types[t].id;var n=this;r.addEventListener("click",(function(){n.view&&n.view.type==this.name||n.changeRuleView(this.name)})),r.addEventListener("mouseover",(function(){n.view&&n.view.type==this.name||(this.style.cursor="pointer")})),e.appendChild(r)}return e},TerminusCodeSnippet.prototype.getFormatButtons=function(){var e=document.createElement("span");for(f in e.setAttribute("class","terminus-snippet-panel"),this.formats){var t=document.createElement("button");t.setAttribute("value",f),t.setAttribute("class","terminus-snippet-button"),"js"==f&&t.classList.add("terminus-snippet-format-selected"),t.appendChild(document.createTextNode(this.formats[f]));var r=this;t.addEventListener("click",(function(){UTILS.setSelected(this,"terminus-snippet-format-selected");var e=r.parseText(r.snippet.value,r.format);r.format=this.value,e&&(r.qObj=e),r.refreshContents()})),e.appendChild(t)}return e},TerminusCodeSnippet.prototype.getSubmitButton=function(){var e=this,t=document.createElement("button");t.setAttribute("class","terminus-btn"),t.setAttribute("type","submit");var r="Submit";return"WOQL"==this.language?r="Submit Query":"rule"==this.language?r="Update View":"code"==this.language&&(r="Run Script"),t.appendChild(document.createTextNode(r)),t.addEventListener("click",(function(){e.readInput(),e.submit(e.qObj)})),t},TerminusCodeSnippet.prototype.submit=function(){alert("Submitted "+JSON.stringify(this.qObj))},TerminusCodeSnippet.prototype.removeCodeMirror=function(){var e=this.snippet.nextSibling;e&&e.classList.contains("CodeMirror")&&HTMLHelper.removeElement(e)},TerminusCodeSnippet.prototype.stylizeSnippet=function(){this.removeCodeMirror(),"view"==this.mode?UTILS.stylizeCodeDisplay(null,this.snippet,null,"javascript"):UTILS.stylizeEditor(null,this.snippet,"query","javascript")},TerminusCodeSnippet.prototype.refreshContents=function(e){if(e=e||this.qObj,HTMLHelper.removeChildren(this.snippet),"edit"==this.mode&&this.snippet.value,e){var t=this.serialise(this.qObj,this.format);if("edit"==this.mode){if(this.snippet.value=t,this.snippet.nextSibling){if(this.removeCodeMirror(),"js"==this.format)var r="javascript";else r="application/ld+json";UTILS.stylizeEditor(null,this.snippet,{width:this.width,height:this.height},r)}}else this.snippet.appendChild(document.createTextNode(t)),UTILS.stylizeCodeDisplay(null,this.snippet,null,r)}},module.exports=TerminusCodeSnippet},function(e,t){
/**
 * @file Terminus Constants
 * @license Apache Version 2
 * @summary Constants representing API actions
 */
e.exports=Object.freeze({CONNECT:"connect",GET_SCHEMA:"get_schema",UPDATE_SCHEMA:"update_schema",UPDATE_DOCUMENT:"update_document",CLASS_FRAME:"class_frame",WOQL_SELECT:"woql_select",GET_DOCUMENT:"get_document",DELETE_DATABASE:"delete_database",DELETE_DOCUMENT:"delete_document",CREATE_DATABASE:"create_database",CREATE_DOCUMENT:"create_document",WOQL_UPDATE:"woql_update"})},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0);function s(){this.preloaded=[],this.loaded=[],this.loading=[],this.precluded=[],this.plugins={},this.css_base="",this.plugins["font-awesome"]={label:"Font Awesome",css:["https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0-11/css/all.css"]},this.plugins.quill={label:"Quill",js:["https://cdn.quilljs.com/1.3.6/quill.min.js"],css:["https://cdn.quilljs.com/1.3.6/quill.snow.css"]},this.plugins.codemirror={label:"Code Mirror",js:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/xml/xml.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/css/css.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/turtle/turtle.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/javascript/javascript.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/anyword-hint.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/runmode/runmode.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/http/http.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/closebrackets.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/matchbrackets.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/display/placeholder.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/foldgutter.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/foldcode.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/indent-fold.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/markdown-fold.js"],css:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/neo.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/erlang-dark.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/foldgutter.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/eclipse.css"]},this.plugins.jquery={label:"jQuery",js:["https://code.jquery.com/jquery-2.2.4.min.js"]},this.plugins.jqueryui={label:"jQuery UI",css:["https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css"],js:["https://code.jquery.com/ui/1.12.0/jquery-ui.js"],requires:["jquery"]},this.plugins.datatables={label:"Data Tables",js:["https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js","https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.16/b-1.5.1/b-html5-1.5.1/datatables.min.js"],css:["https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css"],requires:["jquery"]},this.plugins.gmaps={label:"Google Maps",js:["https://maps.googleapis.com/maps/api/js"]},this.plugins.d3={label:"d3",js:["https://code.jquery.com/jquery-2.2.4.min.js"],requires:["jquery"]},this.plugins.select2={label:"Select 2",js:["https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"],css:["https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css"],requires:["jquery"]}}s.prototype.setPluginOptions=function(e){for(var t in e)if(this.plugins[t])for(var r in e[t])this.plugins[t][r]=e[t][r]},s.prototype.init=function(e,t){e&&this.setPluginOptions(e),this.calculatePreloaded();var r=this.calculateRequiredInitPlugins(e);if(r&&r[0].length)if(r[1].length){var i=this;this.loadPlugins(r[0],(function(){i.loadPlugins(r[1],t)}))}else this.loadPlugins(r[0],t);else t&&t()},s.prototype.calculateRequiredInitPlugins=function(e){if(e){var t=[];for(var r in e)e[r]&&-1==t.indexOf(r)&&("object"!=i(e[r])&&e[r]?t.push(r):"object"==i(e[r])&&(void 0===e[r].loaded||e[r].loaded)&&t.push(r))}else t=this.getDefaultPlugins();for(var n=[],s=0;s<t.length;s++)-1==this.loaded.indexOf(t[s])&&-1==this.preloaded.indexOf(t[s])&&n.push(t[s]);var o=[[],[]];for(s=0;s<n.length;s++)this.plugins[n[s]]&&(this.plugins[n[s]].requires&&this.plugins[n[s]].requires.length?o[1].push(n[s]):o[0].push(n[s]));return o},s.prototype.getAvailablePlugins=function(){return this.plugins},s.prototype.calculatePreloaded=function(){for(var e in this.plugins)this.pluginAvailable(e)&&this.preloaded.push(e)},s.prototype.pluginAvailable=function(e,t){if("object"==i(this.plugins[e])){var r=this.plugins[e];if(r.requires&&r.requires.length)for(var n=0;n<r.requires.length;n++)if(!this.pluginAvailable(r.requires[n],t))return!1;!!r.version&&r.version;switch(e){case"jquery":return"undefined"!=typeof jQuery;case"jqueryui":try{if("undefined"!=typeof jQuery&&jQuery.isFunction(jQuery.fn.slider))return!0}catch(e){}return!1;case"quill":return"undefined"!=typeof Quill;case"jsoneditor":return"undefined"!=typeof JSONEditor;case"codemirror":return"undefined"!=typeof CodeMirror&&this.plugins[e];case"font-awesome":return this.fontAwesomeCheck();case"datatables":return!("undefined"==typeof jQuery||!jQuery.isFunction(jQuery.fn.dataTable));case"select2":return!("undefined"==typeof jQuery||!jQuery.isFunction(jQuery.fn.select2));case"gmaps":return"undefined"!=typeof google&&void 0!==google.maps;case"openlayers":return"undefined"!=typeof ol&&void 0!==ol.Map;case"d3":return"undefined"!=typeof d3}}else console.log(new Error(e+" is not a supported plugin ID"));return!1},s.prototype.fontAwesomeCheck=function(){var e,t,r=document.createElement("span");if(r.className="fa",r.style.display="none",document.body){document.body.insertBefore(r,document.body.firstChild);var i=!1;return"Font Awesome 5 Free"==(e=r,t="font-family",window.getComputedStyle(e,null).getPropertyValue(t)).replace(/"/g,"")&&(i=!0),document.body.removeChild(r),i}return!1},s.prototype.getDefaultPlugins=function(){return["font-awesome"]},s.prototype.loadPlugins=function(e,t){for(var r=e.length,i=function(){--r<=1&&t&&t()},n=0;n<e.length;n++)this.loadPlugin(e[n],i)},s.prototype.loadPlugin=function(e,t){var r=this.plugins[e];if(r.css)for(var i=0;i<r.css.length;i++){var s=e+"_css_"+i;n.loadDynamicCSS(s,r.css[i])}var o=r.js?r.js:[];if("gmaps"==e&&r.key&&(o[0]+="?key="+r.key),r.plugin,"codemirror"==e){var a=o[0],u=e+"_js_"+(o.length-1);o.splice(0,1);var c=this;n.loadDynamicScript(u,a,(function(){c.loadPluginScripts(e,o,t)}))}else this.loadPluginScripts(e,o,t)},s.prototype.loadPluginScripts=function(e,t,r){var i=t.length-1,s=this,o=function(){0==i&&(-1==s.loaded.indexOf(e)&&s.loaded.push(e),-1!=s.loading.indexOf(e)&&s.loading.splice(s.loading.indexOf(e),1),r()),i--};0==t.length?this.loaded.push(e):this.loading.push(e);for(var a=0;a<t.length;a++){var u=e+"_js_"+a;n.loadDynamicScript(u,t[a],o)}},s.prototype.loadPageCSS=function(e){cssfid="terminus_client_css";var t=document.getElementById(cssfid);t&&t.parentNode.removeChild(t),e&&(cssurl=this.css_base+"css/"+e+".css",n.loadDynamicCSS(cssfid,cssurl))},s.prototype.pluginLoadable=function(e){return-1!==this.precluded.indexOf(e)||this.pluginLoadedOrLoading(e)},s.prototype.pluginLoadedOrLoading=function(e){return-1!=this.loaded.indexOf(e)||(-1!=this.preloaded.indexOf(e)||-1!=this.loading.indexOf(e))},s.prototype.disabled=function(e,t){if(-1!=this.precluded.indexOf(e))return!0;if(t.requires)for(var r=0;r<t.requires.length;r++)if(!this.pluginLoadedOrLoading(t.requires[r]))return!0;return!1},s.prototype.getPluginDOM=function(e,t,r){var i=document.createElement("a"),n=document.createElement("span");i.appendChild(n),n.setAttribute("class","terminus-plugin-control");var s=document.createElement("input");s.id="terminus-plugin-control-"+e,s.type="checkbox",-1!=this.preloaded.indexOf(e)?(s.checked=!0,s.disabled=!0):-1!=this.loaded.indexOf(e)?s.checked=!0:-1!=this.loading.indexOf(e)?s.checked=!0:this.disabled(e,t)&&(s.disabled=!0);var o=document.createElement("label");o.setAttribute("class","terminus-plugin-label terminus-pointer"),o.setAttribute("for",s.id),o.appendChild(document.createTextNode(t.label)),n.appendChild(o),n.appendChild(s);var a=this;return s.addEventListener("change",(function(){a.togglePlugin(e,r)})),i},s.prototype.togglePlugin=function(e,t){if(-1==this.loaded.indexOf(e)){this.loadPlugin(e,(function(){t.redraw()}))}else this.unloadPlugin(e);n.removeChildren(t.plugins),t.drawPlugins()},s.prototype.unloadPlugin=function(e){if(!this.plugins[e]||-1==this.loaded.indexOf(e))return console.log(new Error(e+" plugin unload request when it is not loaded")),!1;var t=this.plugins[e],r=t.js?t.js.length:0;t.plugin&&r++;for(var i=0;i<r;i++){var n=e+"_js_"+i;(s=document.getElementById(n))&&s.parentNode.removeChild(s)}r=t.css?t.css.length:0;for(i=0;i<r;i++){var s;n=e+"_css_"+i;(s=document.getElementById(n))&&s.parentNode.removeChild(s)}this.loaded.splice(this.loaded.indexOf(e),1)},s.prototype.getAsDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-plugin-manager");var r=document.createElement("span");r.setAttribute("class","terminus-plugin-control-header terminus-plugin-nav terminus-pointer"),r.appendChild(document.createTextNode("Plugins")),t.appendChild(r);var i=document.createElement("a");return this.showPlugins(i,e),r.appendChild(i),i.style.display="none",r.addEventListener("click",(function(){"none"==i.style.display?i.style.display="block":i.style.display="none"})),t},s.prototype.showPlugins=function(e,t){for(var r in e.setAttribute("style","background-color: #111;"),this.plugins)e.appendChild(this.getPluginDOM(r,this.plugins[r],t))},e.exports=s},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];return e.apply(t,r)}}},function(e,t,r){"use strict";var i=r(3);function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(i.isURLSearchParams(t))s=t.toString();else{var o=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(n(t)+"="+n(e))})))})),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";var i=r(3),n=r(61),s={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,u={adapter:("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?a=r(17):"undefined"!=typeof XMLHttpRequest&&(a=r(17)),a),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){u.headers[e]=i.merge(s)})),e.exports=u},function(e,t,r){"use strict";var i=r(3),n=r(62),s=r(14),o=r(64),a=r(65),u=r(18);e.exports=function(e){return new Promise((function(t,c){var l=e.data,d=e.headers;i.isFormData(l)&&delete d["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",m=e.auth.password||"";d.Authorization="Basic "+btoa(p+":"+m)}if(h.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?o(h.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};n(t,c,i),h=null}},h.onabort=function(){h&&(c(u("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){c(u("Network Error",e,null,h)),h=null},h.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},i.isStandardBrowserEnv()){var f=r(66),y=(e.withCredentials||a(e.url))&&e.xsrfCookieName?f.read(e.xsrfCookieName):void 0;y&&(d[e.xsrfHeaderName]=y)}if("setRequestHeader"in h&&i.forEach(d,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)})),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),c(e),h=null)})),void 0===l&&(l=null),h.send(l)}))}},function(e,t,r){"use strict";var i=r(63);e.exports=function(e,t,r,n,s){var o=new Error(e);return i(o,t,r,n,s)}},function(e,t,r){"use strict";var i=r(3);e.exports=function(e,t){t=t||{};var r={};return i.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(r[e]=t[e])})),i.forEach(["headers","auth","proxy"],(function(n){i.isObject(t[n])?r[n]=i.deepMerge(e[n],t[n]):void 0!==t[n]?r[n]=t[n]:i.isObject(e[n])?r[n]=i.deepMerge(e[n]):void 0!==e[n]&&(r[n]=e[n])})),i.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(i){void 0!==t[i]?r[i]=t[i]:void 0!==e[i]&&(r[i]=e[i])})),r}},function(e,t,r){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},function(e,t,r){
/**
 * @file Connection Capabilities
 * @license Apache Version 2
 * @summary Object which helps manage the capabilities available for a given TerminusDB connection
 * Creates an entry in the connection registry for the server
 * and all the databases that the client has access to
 * maps the input authorties to a per-db array for internal storage and easy
 * access control checks
 */
const i=r(11),n=r(8);function s(e,t){this.connection={},this.connectionConfig=e,this.connectionConfig.server&&t&&this.setClientKey(this.connectionConfig.server,t)}s.prototype.getClientKey=function(e){return e||(e=this.connectionConfig.serverURL()),!(!e||!this.connection[e])&&this.connection[e].key},s.prototype.setClientKey=function(e,t){"string"==typeof t&&t.trim()&&(void 0===this.connection[e]&&(this.connection[e]={}),this.connection[e].key=t.trim())},s.prototype.addConnection=function(e,t){void 0===this.connection[e]&&(this.connection[e]={});const r=t?Object.keys(t):[];for(const i of r)if("terminus:authority"===i&&t[i]){const r=!0===Array.isArray(t[i])?t[i]:[t[i]];for(let t=0;t<r.length;t+=1){let i=r[t]["terminus:authority_scope"];const n=r[t]["terminus:action"];!1===Array.isArray(i)&&(i=[i]);const s=Array.isArray(n)?n.map(e=>e["@id"]):[];for(let t=0;t<i.length;t+=1){const r=i[t];void 0===this.connection[e][r["@id"]]&&(this.connection[e][r["@id"]]=r),this.connection[e][r["@id"]]["terminus:authority"]=s}}}else this.connection[e][i]=t[i]},s.prototype.serverConnected=function(){return void 0!==this.connection[this.connectionConfig.server]},s.prototype.getServerRecord=function(e){const t=e||this.connectionConfig.server,r=this.connection[t]||{},i=Object.keys(r);for(const e of i)if("terminus:Server"===this.connection[t][e]["@type"])return this.connection[t][e];return!1},s.prototype.getDBRecord=function(e,t){const r=t||this.connectionConfig.server;return e=e||this.connectionConfig.dbid,"object"==typeof this.connection[r]&&(void 0!==this.connection[r][e]?this.connection[r][e]:(e=this.dbCapabilityID(e),void 0!==this.connection[r][e]?this.connection[r][e]:void 0))},s.prototype.getServerDBRecords=function(e){const t=e||this.connectionConfig.server,r={},i=this.connection[t]||{};for(const e of Object.keys(i))"terminus:Database"===this.connection[t][e]["@type"]&&(r[e]=this.connection[t][e]);return r},s.prototype.removeDB=function(e,t){(e=e||this.connectionConfig.dbid)&&this.connectionConfig.dbid&&this.connectionConfig.dbid===e&&(this.connectionConfig.dbid=!1);const r=t||this.connectionConfig.server,i=this.dbCapabilityID(e);i&&this.connection[r]&&this.connection[r][i]&&delete this.connection[r][i]},s.prototype.dbCapabilityID=function(e){return`doc:${e}`},s.prototype.capabilitiesPermit=function(e,t,r){let s;if(r=r||this.connectionConfig.server,t=t||this.connectionConfig.dbid,e===i.CREATE_DATABASE?s=this.getServerRecord(r):t?s=this.getDBRecord(t):console.log("no dbid provided in capabilities check ",r,t),s){const t=s["terminus:authority"];if(t&&-1!==t.indexOf(`terminus:${e}`))return!0}else console.log("No record found for connection: ",this.connection,e,r,t);return this.error=n.accessDenied(e,t,r),!1},e.exports=s},function(e,t,r){
/**
 * @file Terminus DB connection configuration
 * @license Apache Version 2
 * @summary Object representing the state of a connection to a terminus db - server url, current dbid, document id
 * along with some configuration information (key, connected mode, client_side_access_control)
 * provides methods for getting and setting connection parameters
 */
const i=r(23);function n(e){const t=e||{};this.server=!1,this.dbid=!1,this.docid=!1,t.server&&this.setServer(t.server),t.db&&this.setDB(t.db),t.doc&&this.setDocument(t.doc),this.include_key=t.include_key||!0}n.prototype.setServer=function(e,t){const r=new i(t);return!!r.parseServerURL(e)&&(this.server=r.server(),this.dbid=!1,this.docid=!1,!0)},n.prototype.serverURL=function(){return this.server},n.prototype.setDB=function(e,t){const r=new i(t);return!!r.parseDBID(e)&&(r.server()&&(this.server=r.server()),this.dbid=r.dbid(),this.docid=!1,!0)},n.prototype.dbURL=function(){return this.server+this.dbid},n.prototype.setSchemaURL=function(e,t){const r=new i(t);return!!r.parseSchemaURL(e)&&(r.server()&&(this.server=r.server()),this.dbid=r.dbid(),this.docid=!1,!0)},n.prototype.schemaURL=function(){return`${this.dbURL()}/schema`},n.prototype.setQueryURL=function(e,t){const r=new i(t);return!!r.parseQueryURL(e)&&(r.server()&&(this.server=r.server()),this.dbid=r.dbid(),this.docid=!1,!0)},n.prototype.queryURL=function(){return`${this.dbURL()}/woql`},n.prototype.setClassFrameURL=function(e,t){const r=new i(t);return!!r.parseClassFrameURL(e)&&(r.server()&&(this.server=r.server()),this.dbid=r.dbid(),this.docid=!1,!0)},n.prototype.frameURL=function(){return`${this.dbURL()}/frame`},n.prototype.setDocument=function(e,t){const r=new i(t);return!!r.parseDocumentURL(e)&&(r.server()&&(this.server=r.server()),r.dbid()&&(this.dbid=r.dbid()),r.docid()&&(this.docid=r.docid()),!0)},n.prototype.docURL=function(){return`${this.dbURL()}/document/${this.docid?this.docid:""}`},n.prototype.includeKey=function(){return!0===this.include_key},e.exports=n},function(e,t){
/**
 * @file Terminus ID Parser
 * @license Apache Version 2
 * @summary Object representing a terminus ID / URL 
 * Helper methods for parsing and decomposing Terminus URLs 
 * and dealing with namespace prefixed URLs
 */
function r(e){this.context=e,this.server_url=!1,this.db=!1,this.doc=!1}r.prototype.server=function(){return this.server_url},r.prototype.dbid=function(){return this.db},r.prototype.docid=function(){return this.doc},r.prototype.setContext=function(e){this.context=e},r.prototype.parseServerURL=function(e){return this.server_url=!1,this.validURL(e)?this.server_url=e:this.context&&this.validPrefixedURL(e,this.context)&&(this.server_url=this.expandPrefixed(e,this.context)),this.server_url&&this.server_url.lastIndexOf("/")!==this.server_url.length-1&&(this.server_url+="/"),this.server_url},r.prototype.parseDBID=function(e){if(this.db=!1,this.context&&this.validPrefixedURL(e,this.context)&&(e=this.expandPrefixed(e,this.context)),this.validURL(e)){e.lastIndexOf("/")===e.length-1&&(e=e.substring(0,e.length-1));const t=e.lastIndexOf("/"),r=e.substring(0,t);if(e=e.substring(t+1),!1===this.parseServerURL(r))return!1}return this.validIDString(e)&&(this.db=e),this.db},r.prototype.parseDocumentURL=function(e){if(this.doc=!1,this.context&&this.validPrefixedURL(e,this.context)&&(e=this.expandPrefixed(e,this.context)),this.validURL(e)){let t=e;if(-1!==e.lastIndexOf("/document/")&&(t=e.substring(0,e.lastIndexOf("/document/")),e=e.substring(e.lastIndexOf("/document/")+10)),!1===this.parseDBID(t))return!1}return"doc:"===e.substring(0,4)&&(e=e.substring(4)),this.validIDString(e)&&(this.doc=e),this.doc},r.prototype.parseSchemaURL=function(e){return this.context&&this.validPrefixedURL(e,this.context)&&(e=this.expandPrefixed(e,this.context)),this.validURL(e)&&(e=this.stripOptionalPath(e,"schema")),this.parseDBID(e)},r.prototype.parseQueryURL=function(e){return this.context&&this.validPrefixedURL(e,this.context)&&(e=this.expandPrefixed(e,this.context)),this.validURL(e)&&(e=this.stripOptionalPath(e,"woql"),e=this.stripOptionalPath(e,"query")),this.parseDBID(e)},r.prototype.stripOptionalPath=function(e,t){return-1!==e.indexOf(`/${t}`)&&(e=e.substring(0,e.indexOf(`/${t}`))),e},r.prototype.parseClassFrameURL=function(e){return this.context&&this.validPrefixedURL(e,this.context)&&(e=this.expandPrefixed(e,this.context)),this.validURL(e)&&(e=this.stripOptionalPath(e,"frame")),this.parseDBID(e)},r.prototype.validURL=function(e){return"http://"===e.substring(0,7)||"https://"===e.substring(0,8)},r.prototype.validPrefixedURL=function(e,t){if("string"!=typeof e||"object"!=typeof t)return!1;const r=e.split(":");return 2===r.length&&(!(r[0].length<1||r[1].length<1)&&!!(t&&t[r[0]]&&this.validIDString(r[1])))},r.prototype.validIDString=function(e){return"string"==typeof e&&(-1===e.indexOf(":")&&-1===e.indexOf(" ")&&-1===e.indexOf("/"))},r.prototype.expandPrefixed=function(e,t){const r=e.split(":");return t[r[0]]+r[1]},e.exports=r},function(e,t,r){
/**
 * @file WOQL Result Object
 * @license Apache Version 2
 * @summary Object representing the result of a WOQL Query
 */
const i=r(2),n=r(25);function s(e,t,r){if(this.bindings=e?e.bindings:[],this.query=t||n.query(),this.cursor=0,!r||!r.no_compress){const e=!(!r||!r.context)&&r.context;this.compress(e)}}s.prototype.compress=function(e){e=e||this.query.getContext();for(let t=0;t<this.bindings.length;t++)for(const r of Object.keys(this.bindings[t])){const n=i.shorten(r,e),s="string"==typeof this.bindings[t][r]?i.shorten(this.bindings[t][r],e):this.bindings[t][r];delete this.bindings[t][r],this.bindings[t][n]=s}return this},s.prototype.hasBindings=function(){return!(!this.bindings||!this.count())},s.prototype.getBindings=function(){return this.bindings},s.prototype.getVariableList=function(){return this.bindings&&this.bindings[0]?Object.keys(this.bindings[0]):[]},s.prototype.count=function(){return this.bindings.length},s.prototype.first=function(){return this.cursor=0,this.bindings[0]},s.prototype.last=function(){return this.cursor=this.bindings.length-1,this.bindings[this.bindings.length-1]},s.prototype.next=function(){if(this.cursor>=this.bindings.length)return!1;const e=this.bindings[this.cursor];return this.cursor++,e},s.prototype.prev=function(){if(this.cursor>0)return this.cursor--,this.bindings[this.cursor]},s.prototype.sort=function(e,t){this.bindings.sort((r,i)=>this.compareValues(r[e],i[e],t))},s.prototype.compareValues=function(e,t,r="asc"){return e&&t?(void 0!==e["@value"]&&void 0!==t["@value"]&&(e=e["@value"],t=t["@value"]),e>t?r&&"asc"==r?1:-1:t>e?r&&"asc"==r?-1:1:void 0):0},e.exports=s},function(module,exports,__webpack_require__){const UTILS=__webpack_require__(2),WOQLRule=__webpack_require__(5),FrameRule=__webpack_require__(7),WOQL={};function WOQLQuery(e){return this.query=e||{},this.cursor=this.query,this.chain_ended=!1,this.contains_update=!1,this.paging_transitive_properties=["select","from","start","when","opt","limit"],this.vocab=this.loadDefaultVocabulary(),this.tripleBuilder=!1,this}function nspaces(e){let t="";for(var r=0;r<e;r++)t+=" ";return t}function TripleBuilder(e,t,r){this.type=e,this.cursor=t,this.subject=r||!1,this.g=!1}WOQL.when=function(e,t){return(new WOQLQuery).when(e,t)},WOQL.opt=function(e){return(new WOQLQuery).opt(e)},WOQL.from=function(e,t){return(new WOQLQuery).from(e,t)},WOQL.into=function(e,t){return(new WOQLQuery).into(e,t)},WOQL.limit=function(e,t){return(new WOQLQuery).limit(e,t)},WOQL.start=function(e,t){return(new WOQLQuery).start(e,t)},WOQL.select=function(...e){return(new WOQLQuery).select(...e)},WOQL.or=function(...e){return(new WOQLQuery).or(...e)},WOQL.and=function(...e){return(new WOQLQuery).and(...e)},WOQL.not=function(e){return(new WOQLQuery).not(e)},WOQL.triple=function(e,t,r){return(new WOQLQuery).triple(e,t,r)},WOQL.quad=function(e,t,r,i){return(new WOQLQuery).quad(e,t,r,i)},WOQL.sub=function(e,t){return(new WOQLQuery).sub(e,t)},WOQL.isa=function(e,t){return(new WOQLQuery).isa(e,t)},WOQL.eq=function(e,t){return(new WOQLQuery).eq(e,t)},WOQL.trim=function(e,t){return(new WOQLQuery).trim(e,t)},WOQL.delete=function(e){return(new WOQLQuery).delete(e)},WOQL.delete_triple=function(e,t,r){return(new WOQLQuery).delete_triple(e,t,r)},WOQL.delete_quad=function(e,t,r,i){return(new WOQLQuery).delete_quad(e,t,r,i)},WOQL.add_triple=function(e,t,r){return(new WOQLQuery).add_triple(e,t,r)},WOQL.add_quad=function(e,t,r,i){return(new WOQLQuery).add_quad(e,t,r,i)},WOQL.get=function(e,t,r){return(new WOQLQuery).get(e,t,r)},WOQL.as=function(e,t){return(new WOQLQuery).as(e,t)},WOQL.remote=function(e,t){return(new WOQLQuery).remote(e,t)},WOQL.file=function(e,t){return(new WOQLQuery).file(e,t)},WOQL.list=function(...e){return(new WOQLQuery).list(...e)},WOQL.order_by=function(e,t){return(new WOQLQuery).order_by(e,t)},WOQL.asc=function(e){return(new WOQLQuery).asc(e)},WOQL.desc=function(e){return(new WOQLQuery).desc(e)},WOQL.group_by=function(e,t,r,i){return(new WOQLQuery).group_by(e,t,r,i)},WOQL.update=function(e){return(new WOQLQuery).update(e)},WOQL.concat=function(e,t){return(new WOQLQuery).concat(e,t)},WOQL.lower=function(e,t){return(new WOQLQuery).lower(e,t)},WOQL.pad=function(e,t,r,i){return(new WOQLQuery).pad(e,t,r,i)},WOQL.join=function(...e){return(new WOQLQuery).join(...e)},WOQL.unique=function(e,t,r){return(new WOQLQuery).unique(e,t,r)},WOQL.idgen=function(e,t,r,i){return(new WOQLQuery).idgen(e,t,r,i)},WOQL.typecast=function(e,t,r){return(new WOQLQuery).typecast(e,t,r)},WOQL.cast=WOQL.typecast,WOQL.re=function(e,t,r){return(new WOQLQuery).re(e,t,r)},WOQL.less=function(e,t){return(new WOQLQuery).less(e,t)},WOQL.greater=function(e,t){return(new WOQLQuery).greater(e,t)},WOQL.eval=function(e,t){return(new WOQLQuery).eval(e,t)},WOQL.plus=function(...e){return(new WOQLQuery).plus(...e)},WOQL.minus=function(...e){return(new WOQLQuery).minus(...e)},WOQL.times=function(...e){return(new WOQLQuery).times(...e)},WOQL.divide=function(...e){return(new WOQLQuery).divide(...e)},WOQL.exp=function(e,t){return(new WOQLQuery).exp(e,t)},WOQL.div=function(...e){return(new WOQLQuery).div(...e)},WOQL.comment=function(e){return(new WOQLQuery).comment(e)},WOQL.length=function(e,t){return(new WOQLQuery).length(e,t)},WOQL.star=function(e,t,r,i){return(new WOQLQuery).star(e,t,r,i)},WOQL.add_class=function(e,t){return(new WOQLQuery).add_class(e,t)},WOQL.add_property=function(e,t,r){return(new WOQLQuery).add_property(e,t,r)},WOQL.delete_class=function(e,t){return(new WOQLQuery).delete_class(e,t)},WOQL.delete_property=function(e,t,r){return(new WOQLQuery).delete_property(e,t,r)},WOQL.node=function(e,t){return(new WOQLQuery).node(e,t)},WOQL.insert=function(e,t,r){var i=new WOQLQuery;return r?i.add_quad(e,"rdf:type",i.cleanType(t),r):i.add_triple(e,"rdf:type",i.cleanType(t))},WOQL.doctype=function(e,t){return(new WOQLQuery).add_class(e,t).parent("Document")},WOQL.query=function(){return new WOQLQuery},WOQL.json=function(e){return(new WOQLQuery).json(e)},WOQLQuery.prototype.get=function(e,t,r){if(e.json){var i=e.json();r=t}else i=this.buildAsClauses(e,t);return r?(r.json&&(r=r.json()),this.cursor.get=[i,r]):(this.cursor.get=[i,{}],this.cursor=this.cursor.get[1]),this},WOQLQuery.prototype.buildAsClauses=function(e,t){var r=[];if(e&&"object"==typeof e&&e.length)for(var i=0;i<e.length;i++){var n=e[i];if(t&&"object"==typeof t&&t.length){var s=t[i];"string"==typeof s&&(s={"@value":s}),r.push({as:[s,n]})}else n.as?r.push(n):r.push({as:[n]})}return r},WOQLQuery.prototype.typecast=function(e,t,r){return this.cursor.typecast=[e,t,r],this},WOQLQuery.prototype.cast=WOQLQuery.prototype.typecast,WOQLQuery.prototype.length=function(e,t){return this.cursor.length=[e,t],this},WOQLQuery.prototype.remote=function(e,t){return this.cursor.remote=t?[e,t]:[e],this},WOQLQuery.prototype.file=function(e,t){return this.cursor.file=t?[e,t]:[e],this},WOQLQuery.prototype.order_by=function(e,t,r){let i=e;if(e.json&&(i=e.json()),"object"!=typeof i&&(i=[i]),Array.isArray(i)){const e=UTILS.addNamespacesToVariables(i);(i={})[t=t||"asc"]=e}return this.advanceCursor("order_by",i),r&&(this.cursor=r.json?r.json():r),this},WOQLQuery.prototype.asc=function(e){return Array.isArray(e)||(e=[e]),this.cursor.asc=e,this},WOQLQuery.prototype.desc=function(e){return Array.isArray(e)||(e=[e]),this.cursor.desc=e,this},WOQLQuery.prototype.group_by=function(e,t,r,i){var n=[];if(this.cursor.group_by=n,e.json&&n.push(e.json()),e.list?n.push(e):n.push({list:e}),"object"==typeof t&&Array.isArray(t)){t={list:UTILS.addNamespacesToVariables(t)}}else"string"==typeof t&&(t=UTILS.addNamespaceToVariable(t));if(n.push(t),i)r=r.json?r.json():r,n.push(r);else{i=r;var s={};this.cursor=s,n.push(s)}return n.push(UTILS.addNamespaceToVariable(i)),this},WOQLQuery.prototype.idgen=function(e,t,r,i){return this.cursor.idgen=[e],t.json?this.cursor.idgen.push(t.json()):t.list?this.cursor.idgen.push(t):this.cursor.idgen.push({list:t}),i&&this.cursor.idgen.push(i),this.cursor.idgen.push(r),this},WOQLQuery.prototype.unique=function(e,t,r){return this.cursor.unique=[e],t.json?this.cursor.unique.push(t.json()):t.list?this.cursor.unique.push(t):this.cursor.unique.push({list:t}),this.cursor.unique.push(r),this},WOQLQuery.prototype.re=function(e,t,r){return"string"==typeof e&&"v:"!=e.substring(0,2)&&(e={"@value":e,"@type":"xsd:string"}),"string"==typeof t&&"v:"!=t.substring(0,2)&&(t={"@value":t,"@type":"xsd:string"}),"string"==typeof r&&(r=[r]),r.list||(r={list:r}),this.cursor.re=[e,t,r],this},WOQLQuery.prototype.concat=function(e,t){if("string"==typeof e)for(var r=e.split(/(v:[\w_]+)\b/),i=1;i<r.length;i++)"v"==r[i-1].substring(r[i-1].length-1)&&":"==r[i].substring(0,1)&&(r[i-1]=r[i-1].substring(0,r[i-1].length-1),r[i]=r[i].substring(1));else if(e.list)r=e.list;else if("object"==typeof e)r=e;var n=[];for(i=0;i<r.length;i++)if(r[i])if("string"==typeof r[i])if("v:"==r[i].substring(0,2))n.push(r[i]);else{var s={"@value":r[i],"@type":"xsd:string"};n.push(s)}else r[i]&&n.push(r[i]);return-1==t.indexOf(":")&&(t="v:"+t),this.cursor.concat=[{list:n},t],this},WOQLQuery.prototype.lower=function(e,t){return this.cursor.lower=[e,t],this},WOQLQuery.prototype.pad=function(e,t,r,i){return this.cursor.pad=[e,t,r,i],this},WOQLQuery.prototype.join=function(...e){return this.cursor.join=e,this},WOQLQuery.prototype.less=function(e,t){return this.cursor.less=[e,t],this},WOQLQuery.prototype.greater=function(e,t){return this.cursor.greater=[e,t],this},WOQLQuery.prototype.list=function(...e){return this.cursor.list=e,this},WOQLQuery.prototype.json=function(e){return e?(this.query=e,this):this.query},WOQLQuery.prototype.when=function(e,t){if("boolean"==typeof e)this.cursor.when=e?[{true:[]},{}]:[{false:[]},{}];else{var r=e.json?e.json():e;this.cursor.when=[r,{}]}if(t){var i=t.json?t.json():t;this.cursor.when[1]=i}return this.cursor=this.cursor.when[1],this},WOQLQuery.prototype.opt=function(e){if(e){var t="function"==typeof e.json?e.json():e;this.cursor.opt=[t]}else this.cursor.opt=[{}],this.cursor=this.cursor.opt[0];return this},WOQLQuery.prototype.from=function(e,t){return this.advanceCursor("from",e),t&&(this.cursor=t.json?t.json():t),this},WOQLQuery.prototype.into=function(e,t){return this.advanceCursor("into",e),t&&(this.cursor=t.json?t.json():t),this},WOQLQuery.prototype.limit=function(e,t){return this.advanceCursor("limit",e),t&&(this.cursor=t.json?t.json():t),this},WOQLQuery.prototype.start=function(e,t){return this.advanceCursor("start",e),t&&(this.cursor=t.json()),this},WOQLQuery.prototype.select=function(...e){this.cursor.select=e;const t=e.length;return"object"==typeof this.cursor.select[t-1]?this.cursor.select[t-1]=this.cursor.select[t-1].json():(this.cursor.select[t]={},this.cursor=this.cursor.select[t]),this},WOQLQuery.prototype.and=function(...e){this.cursor.and=[];for(let r=0;r<e.length;r++){e[r].contains_update&&(this.contains_update=!0);var t=e[r].json?e[r].json():e[r];t.and?this.cursor.and=this.cursor.and.concat(t.and):this.cursor.and.push(t)}return this},WOQLQuery.prototype.or=function(...e){this.cursor.or=[];for(let r=0;r<e.length;r++){e[r].contains_update&&(this.contains_update=!0);var t=e[r].json?e[r].json():e[r];this.cursor.or.push(t)}return this},WOQLQuery.prototype.not=function(e){return e?(e.contains_update&&(this.contains_update=!0),e.json&&(e=e.json()),this.cursor.not=[e]):(this.cursor.not=[{}],this.cursor=this.cursor.not[0]),this},WOQLQuery.prototype.triple=function(e,t,r){return this.cursor.triple=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r)],this.chainable("triple",this.cleanSubject(e))},WOQLQuery.prototype.quad=function(e,t,r,i){return this.cursor.quad=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r),this.cleanGraph(i)],this.chainable("quad",this.cleanSubject(e))},WOQLQuery.prototype.eq=function(e,t){return this.cursor.eq=[this.cleanObject(e),this.cleanObject(t)],this.last()},WOQLQuery.prototype.sub=function(e,t){return!t&&this.tripleBuilder?(this.tripleBuilder.sub(this.cleanClass(e)),this):(this.cursor.sub=[this.cleanClass(e),this.cleanClass(t)],this.last("sub",e))},WOQLQuery.prototype.comment=function(e){e&&e.json?this.cursor.comment=[e.json()]:"string"==typeof e?this.cursor.comment=[{"@value":e,"@language":"en"}]:"object"==typeof e?e.length?this.cursor.comment=e:this.cursor.comment=[e]:this.cursor.comment=[];var t=this.cursor.comment.length;return this.cursor.comment[t]={},this.cursor=this.cursor.comment[t],this},WOQLQuery.prototype.abstract=function(e){return e?this.quad(e,"tcs:tag","tcs:abstract","db:schema"):(this.tripleBuilder&&this.tripleBuilder.abstract(),this)},WOQLQuery.prototype.isa=function(e,t){return!t&&this.tripleBuilder?(this.tripleBuilder.isa(this.cleanClass(e)),this):t?(this.cursor.isa=[this.cleanClass(e),this.cleanClass(t)],this.chainable("isa",e)):void 0},WOQLQuery.prototype.trim=function(e,t){return this.cursor.trim=[e,t],this.chainable("trim",t)},WOQLQuery.prototype.eval=function(e,t){return e=e.json?e.json():e,this.cursor.eval=[e,t],this.chainable("eval",t)},WOQLQuery.prototype.plus=function(...e){this.cursor.plus=[];for(var t=0;t<e.length;t++)this.cursor.plus.push(e[t].json?e[t].json():e[t]);return this.last()},WOQLQuery.prototype.minus=function(...e){this.cursor.minus=[];for(var t=0;t<e.length;t++)this.cursor.minus.push(e[t].json?e[t].json():e[t]);return this.last()},WOQLQuery.prototype.times=function(...e){this.cursor.times=[];for(var t=0;t<e.length;t++)this.cursor.times.push(e[t].json?e[t].json():e[t]);return this.last()},WOQLQuery.prototype.divide=function(...e){this.cursor.divide=[];for(var t=0;t<e.length;t++)this.cursor.divide.push(e[t].json?e[t].json():e[t]);return this.last()},WOQLQuery.prototype.div=function(...e){this.cursor.div=[];for(var t=0;t<e.length;t++)this.cursor.div.push(e[t].json?e[t].json():e[t]);return this.last()},WOQLQuery.prototype.exp=function(e,t){return e=e.json?e.json():e,t=t.json?t.json():t,this.cursor.exp=[e,t],this.last()},WOQLQuery.prototype.delete=function(e){return this.cursor.delete=[e],this.lastUpdate()},WOQLQuery.prototype.delete_triple=function(e,t,r){return this.cursor.delete_triple=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r)],this.chainableUpdate("delete_triple",e)},WOQLQuery.prototype.add_triple=function(e,t,r){return this.cursor.add_triple=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r)],this.chainableUpdate("add_triple",e)},WOQLQuery.prototype.delete_quad=function(e,t,r,i){return this.cursor.delete_quad=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r),this.cleanGraph(i)],this.chainableUpdate("delete_quad",e)},WOQLQuery.prototype.add_quad=function(e,t,r,i){return this.cursor.add_quad=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r),this.cleanGraph(i)],this.chainableUpdate("add_quad",e)},WOQLQuery.prototype.update=function(e){return this.cursor.update=[e.json()],this.lastUpdate()},WOQLQuery.prototype.add_class=function(e,t){return e&&(t=t?this.cleanGraph(t):"db:schema",e=-1==e.indexOf(":")?"scm:"+e:e,this.adding_class=e,this.add_quad(e,"rdf:type","owl:Class",t)),this},WOQLQuery.prototype.add_property=function(e,t,r){if(t=t||"xsd:string",e){var i=r?this.cleanGraph(r):"db:schema";e=-1==e.indexOf(":")?"scm:"+e:e,t=-1==t.indexOf(":")?this.cleanType(t):t;this.cursor;var n=t.split(":");!n[0]||"xdd"!=n[0]&&"xsd"!=n[0]?this.and(WOQL.add_quad(e,"rdf:type","owl:ObjectProperty",i),WOQL.add_quad(e,"rdfs:range",t,i)):this.and(WOQL.add_quad(e,"rdf:type","owl:DatatypeProperty",i),WOQL.add_quad(e,"rdfs:range",t,i))}return this.chainableUpdate("add_quad",e)},WOQLQuery.prototype.delete_class=function(e,t){return e?(t=t?this.cleanGraph(t):"db:schema",e=-1==e.indexOf(":")?"scm:"+e:e,this.and(WOQL.delete_quad(e,"v:All","v:Al2",t),WOQL.opt().delete_quad("v:Al3","v:Al4",e,t))):this},WOQLQuery.prototype.delete_property=function(e,t){return e?(t=t?this.cleanGraph(t):"db:schema",e=-1==e.indexOf(":")?"scm:"+e:e,this.and(WOQL.delete_quad(e,"v:All","v:Al2",t),WOQL.delete_quad("v:Al3","v:Al4",e,t))):this},WOQLQuery.prototype.as=function(e,t){if(e){if(this.asArray||(this.asArray=!0,this.query=[]),t){t=-1==t.indexOf(":")?"v:"+t:t;var r="object"==typeof e?e:{"@value":e};this.query.push({as:[r,t]})}else e=-1==e.indexOf(":")?"v:"+e:e,this.query.push({as:[e]});return this}},WOQLQuery.prototype.node=function(e,t){return t=t||"triple",this.tripleBuilder=new TripleBuilder(t,this.cursor,e),this},WOQLQuery.prototype.max=function(e){return this.tripleBuilder&&this.tripleBuilder.card(e,"max"),this},WOQLQuery.prototype.cardinality=function(e){return this.tripleBuilder&&this.tripleBuilder.card(e,"cardinality"),this},WOQLQuery.prototype.min=function(e){return this.tripleBuilder&&this.tripleBuilder.card(e,"min"),this},WOQLQuery.prototype.graph=function(e){e=this.cleanGraph(e);var t="triple"==this.type&&"quad";return"add_triple"==this.type&&(t="add_quad"),"delete_triple"==this.type&&(t="delete_quad"),this.tripleBuilder||(this.tripleBuilder=new TripleBuilder(t,this.cursor)),this.tripleBuilder.graph(e),this},WOQLQuery.prototype.domain=function(e){return e=this.cleanClass(e),this.tripleBuilder&&this.tripleBuilder.addPO("rdfs:domain",e),this},WOQLQuery.prototype.label=function(e,t){return this.tripleBuilder&&this.tripleBuilder.label(e,t),this},WOQLQuery.prototype.description=function(e,t){return this.tripleBuilder&&this.tripleBuilder.description(e,t),this},WOQLQuery.prototype.parent=function(...e){if(this.tripleBuilder)for(var t=0;t<e.length;t++){var r=this.cleanClass(e[t]);this.tripleBuilder.addPO("rdfs:subClassOf",r)}return this},WOQLQuery.prototype.entity=function(...e){return this.parent("tcs:Entity")},WOQLQuery.prototype.relationship=function(...e){return this.parent("tcs:Entity")},WOQLQuery.prototype.property=function(e,t){if(this.tripleBuilder){if(this.adding_class){var r=WOQL.add_property(e,t).domain(this.adding_class);return r.query.and.push(this.json()),r.adding_class=this.adding_class,r}e=this.cleanPredicate(e),this.tripleBuilder.addPO(e,t)}return this},WOQLQuery.prototype.star=function(e,t,r,i){return t=t?this.cleanSubject(t):"v:Subject",r=r?this.cleanPredicate(r):"v:Predicate",i=i?this.cleanObject(i):"v:Object",(e=!!e&&this.cleanGraph(e))?this.quad(t,r,i,e):this.triple(t,r,i)},WOQLQuery.prototype.getEverything=function(e){return e?(e=this.cleanGraph(e),this.quad("v:Subject","v:Predicate","v:Object",e)):this.triple("v:Subject","v:Predicate","v:Object")},WOQLQuery.prototype.getAllDocuments=function(){return this.and(WOQL.triple("v:Subject","rdf:type","v:Type"),WOQL.sub("v:Type","tcs:Document"))},WOQLQuery.prototype.documentMetadata=function(){return this.and(WOQL.triple("v:ID","rdf:type","v:Class"),WOQL.sub("v:Class","tcs:Document"),WOQL.opt().triple("v:ID","rdfs:label","v:Label"),WOQL.opt().triple("v:ID","rdfs:comment","v:Comment"),WOQL.opt().quad("v:Class","rdfs:label","v:Type","db:schema"),WOQL.opt().quad("v:Class","rdfs:comment","v:Type_Comment","db:schema"))},WOQLQuery.prototype.concreteDocumentClasses=function(){return this.and(WOQL.sub("v:Class","tcs:Document"),WOQL.not().abstract("v:Class"),WOQL.opt().quad("v:Class","rdfs:label","v:Label","db:schema"),WOQL.opt().quad("v:Class","rdfs:comment","v:Comment","db:schema"))},WOQLQuery.prototype.propertyMetadata=function(){return this.and(WOQL.or(WOQL.quad("v:Property","rdf:type","owl:DatatypeProperty","db:schema"),WOQL.quad("v:Property","rdf:type","owl:ObjectProperty","db:schema")),WOQL.opt().quad("v:Property","rdfs:range","v:Range","db:schema"),WOQL.opt().quad("v:Property","rdf:type","v:Type","db:schema"),WOQL.opt().quad("v:Property","rdfs:label","v:Label","db:schema"),WOQL.opt().quad("v:Property","rdfs:comment","v:Comment","db:schema"),WOQL.opt().quad("v:Property","rdfs:domain","v:Domain","db:schema"))},WOQLQuery.prototype.elementMetadata=function(){return this.and(WOQL.quad("v:Element","rdf:type","v:Type","db:schema"),WOQL.opt().quad("v:Element","tcs:tag","v:Abstract","db:schema"),WOQL.opt().quad("v:Element","rdfs:label","v:Label","db:schema"),WOQL.opt().quad("v:Element","rdfs:comment","v:Comment","db:schema"),WOQL.opt().quad("v:Element","rdfs:subClassOf","v:Parent","db:schema"),WOQL.opt().quad("v:Element","rdfs:domain","v:Domain","db:schema"),WOQL.opt().quad("v:Element","rdfs:range","v:Range","db:schema"))},WOQLQuery.prototype.classMetadata=function(){return this.and(WOQL.quad("v:Element","rdf:type","owl:Class","db:schema"),WOQL.opt().quad("v:Element","rdfs:label","v:Label","db:schema"),WOQL.opt().quad("v:Element","rdfs:comment","v:Comment","db:schema"),WOQL.opt().quad("v:Element","tcs:tag","v:Abstract","db:schema"))},WOQLQuery.prototype.getDataOfClass=function(e){return this.and(WOQL.triple("v:Subject","rdf:type",e),WOQL.opt().triple("v:Subject","v:Property","v:Value"))},WOQLQuery.prototype.getDataOfProperty=function(e){return this.and(WOQL.triple("v:Subject",e,"v:Value"),WOQL.opt().triple("v:Subject","rdfs:label","v:Label"))},WOQLQuery.prototype.documentProperties=function(e){return this.and(WOQL.triple(e,"v:Property","v:Property_Value"),WOQL.opt().quad("v:Property","rdfs:label","v:Property_Label","db:schema"),WOQL.opt().quad("v:Property","rdf:type","v:Property_Type","db:schema"))},WOQLQuery.prototype.getDocumentConnections=function(e){return this.and(WOQL.eq("v:Docid",e),WOQL.or(WOQL.triple(e,"v:Outgoing","v:Entid"),WOQL.triple("v:Entid","v:Incoming",e)),WOQL.triple("v:Entid","type","v:Enttype"),WOQL.sub("v:Enttype","tcs:Document"),WOQL.opt().triple("v:Entid","rdfs:label","v:Label"),WOQL.opt().quad("v:Enttype","rdfs:label","v:Class_Label","db:schema"))},WOQLQuery.prototype.getAllDocumentConnections=function(){return this.and(WOQL.sub("v:Enttype","tcs:Document"),WOQL.triple("v:doc1","type","v:Enttype"),WOQL.triple("v:doc1","v:Predicate","v:doc2"),WOQL.triple("v:doc2","type","v:Enttype2"),WOQL.sub("v:Enttype2","tcs:Document"),WOQL.opt().triple("v:doc1","rdfs:label","v:Label1"),WOQL.opt().triple("v:doc2","rdfs:label","v:Label2"),WOQL.not().eq("v:doc1","v:doc2"))},WOQLQuery.prototype.getInstanceMeta=function(e){return this.and(WOQL.triple(e,"rdf:type","v:InstanceType"),WOQL.opt().triple(e,"rdfs:label","v:InstanceLabel"),WOQL.opt().triple(e,"rdfs:comment","v:InstanceComment"),WOQL.opt().quad("v:InstanceType","rdfs:label","v:ClassLabel","db:schema"))},WOQLQuery.prototype.simpleGraphQuery=function(){return this.and(WOQL.triple("v:Source","v:Edge","v:Target"),WOQL.isa("v:Source","v:Source_Class"),WOQL.sub("v:Source_Class","tcs:Document"),WOQL.isa("v:Target","v:Target_Class"),WOQL.sub("v:Target_Class","tcs:Document"),WOQL.opt().triple("v:Source","rdfs:label","v:Source_Label"),WOQL.opt().triple("v:Source","rdfs:comment","v:Source_Comment"),WOQL.opt().quad("v:Source_Class","rdfs:label","v:Source_Type","db:schema"),WOQL.opt().quad("v:Source_Class","rdfs:comment","v:Source_Type_Comment","db:schema"),WOQL.opt().triple("v:Target","rdfs:label","v:Target_Label"),WOQL.opt().triple("v:Target","rdfs:comment","v:Target_Comment"),WOQL.opt().quad("v:Target_Class","rdfs:label","v:Target_Type","db:schema"),WOQL.opt().quad("v:Target_Class","rdfs:comment","v:Target_Type_Comment","db:schema"),WOQL.opt().quad("v:Edge","rdfs:label","v:Edge_Type","db:schema"),WOQL.opt().quad("v:Edge","rdfs:comment","v:Edge_Type_Comment","db:schema"))},WOQLQuery.prototype.loadVocabulary=function(e){(new WOQLQuery).quad("v:S","v:P","v:O","db:schema").execute(e).then(e=>{if(e.bindings&&e.bindings.length>0)for(var t=0;t<e.bindings.length;t++)for(var r in e.bindings[t]){var i=e.bindings[t][r];if("string"==typeof i){var n=i.split(":");2==n.length&&n[1]&&"_"!=n[0]&&(this.vocab[n[0]]=n[1])}}})},WOQLQuery.prototype.setVocabulary=function(e){this.vocab=e},WOQLQuery.prototype.getVocabulary=function(e){return this.vocab},WOQLQuery.prototype.getLimit=function(){return this.getPagingProperty("limit")},WOQLQuery.prototype.setLimit=function(e){return this.setPagingProperty("limit",e)},WOQLQuery.prototype.isPaged=function(e){e=e||this.query;for(const t of Object.keys(e)){if("limit"==t)return!0;if(-1!==this.paging_transitive_properties.indexOf(t))return this.isPaged(e[t][e[t].length-1])}return!1},WOQLQuery.prototype.getPage=function(){if(this.isPaged()){var e=this.getLimit();if(this.hasStart()){var t=this.getStart();return parseInt(t/e)+1}return 1}return!1},WOQLQuery.prototype.setPage=function(e){var t=this.getLimit()*(e-1);return this.hasStart()?this.setStart(t):this.addStart(t),this},WOQLQuery.prototype.nextPage=function(){return this.setPage(this.getPage()+1)},WOQLQuery.prototype.firstPage=function(){return this.setPage(1)},WOQLQuery.prototype.previousPage=function(){const e=this.getPage()-1;return e>0&&this.setPage(e),this},WOQLQuery.prototype.setPageSize=function(e){return this.setPagingProperty("limit",e),this.hasStart()?this.setStart(0):this.addStart(0),this},WOQLQuery.prototype.hasSelect=function(){return!!this.getPagingProperty("select")},WOQLQuery.prototype.getSelectVariables=function(e){e=e||this.query;for(const r of Object.keys(e)){if("select"==r)return e[r].slice(0,e[r].length-1);if(-1!==this.paging_transitive_properties.indexOf(r)){var t=this.getSelectVariables(e[r][e[r].length-1]);if(void 0!==t)return t}}},WOQLQuery.prototype.hasStart=function(){return void 0!==this.getPagingProperty("start")},WOQLQuery.prototype.getStart=function(){return this.getPagingProperty("start")},WOQLQuery.prototype.setStart=function(e){return this.setPagingProperty("start",e)},WOQLQuery.prototype.addStart=function(e){if(this.hasStart())this.setStart(e);else{var t={start:[e,this.query]};this.query=t}return this},WOQLQuery.prototype.execute=function(e){if(this.query["@context"])t=this.json();else{this.query["@context"]=this.defaultContext(e.connectionConfig.dbURL());var t=this.json()}return this.contains_update,e.select(!1,t)},WOQLQuery.prototype.advanceCursor=function(e,t){this.cursor[e]=[t],this.cursor[e][1]={},this.cursor=this.cursor[e][1]},WOQLQuery.prototype.loadDefaultVocabulary=function(){var e={type:"rdf:type",label:"rdfs:label",Class:"owl:Class",DatatypeProperty:"owl:DatatypeProperty",ObjectProperty:"owl:ObjectProperty",Entity:"tcs:Entity",Document:"tcs:Document",Relationship:"tcs:Relationship",temporality:"tcs:temporality",geotemporality:"tcs:geotemporality",geography:"tcs:geography",abstract:"tcs:abstract",comment:"rdfs:comment",range:"rdfs:range",domain:"rdfs:domain",subClassOf:"rdfs:subClassOf",string:"xsd:string",integer:"xsd:integer",decimal:"xsd:decimal",email:"xdd:email",json:"xdd:json",dateTime:"xsd:dateTime",date:"xsd:date",coordinate:"xdd:coordinate",line:"xdd:coordinatePolyline",polygon:"xdd:coordinatePolygon"};return e},WOQLQuery.prototype.defaultContext=function(e){let t={};for(var r in UTILS.standard_urls)t[r]=UTILS.standard_urls[r];return t.scm=e+"/schema#",t.doc=e+"/document/",t.db=e+"/",t},WOQLQuery.prototype.last=function(){return this.chain_ended=!0,this},WOQLQuery.prototype.lastUpdate=function(){return this.contains_update=!0,this.last(),this},WOQLQuery.prototype.chainable=function(e,t){return this.tripleBuilder=new TripleBuilder(e,this.cursor,this.cleanSubject(t)),this.last(),this},WOQLQuery.prototype.chainableUpdate=function(e,t){return this.tripleBuilder=new TripleBuilder(e,this.cursor,this.cleanSubject(t)),this.lastUpdate()},WOQLQuery.prototype.getPagingProperty=function(e,t){t=t||this.query;for(const i of Object.keys(t)){if(i==e)return t[i][0];if(-1!==this.paging_transitive_properties.indexOf(i)){var r=this.getPagingProperty(e,t[i][t[i].length-1]);if(void 0!==r)return r}}},WOQLQuery.prototype.setPagingProperty=function(e,t,r){r=r||this.query;for(const i of Object.keys(r))i==e?r[i][0]=t:-1!==this.paging_transitive_properties.indexOf(i)&&this.setPagingProperty(e,t,r[i][r[i].length-1]);return this},WOQLQuery.prototype.getContext=function(e){e=e||this.query;for(const i of Object.keys(e)){if("@context"==i)return e[i];if(-1!==this.paging_transitive_properties.indexOf(i)){var t=e[i][1],r=this.getContext(t);if(r)return r}}},WOQLQuery.prototype.context=function(e){this.cursor["@context"]=e},WOQLQuery.prototype.prettyPrint=function(e,t,r,i){this.indent||(this.indent=e),r=r||this.query;var n="";const s=["get","from","into"];for(var o in r)if("@context"!=o){n+=this.getWOQLPrelude(o,i,e-this.indent);var a=r[o];this.isChainable(o,a[a.length-1])?(n+=this.uncleanArguments(o,a.slice(0,a.length-1),e,t),-1!==s.indexOf(o)&&(n+="\n"+nspaces(e-this.indent)),n+=this.prettyPrint(e,t,a[a.length-1],!0)):this.hasShortcut(o,a,e)||(n+=this.uncleanArguments(o,a,e,t))}else if(t){var u=this.getContext();u&&(n+="@context: "+JSON.stringify(u)+"\n")}return"."==n.substring(n.length-1)&&(n=n.substring(0,n.length-1)),n},WOQLQuery.prototype.getWOQLPrelude=function(e,t,r){return"true"===e||"false"===e?e:t?"."+e:(r?"\n"+nspaces(r):"")+"WOQL."+e},WOQLQuery.prototype.isChainable=function(e,t){return!(!t||"object"!=typeof t||void 0!==t["@value"]||void 0!==t["@type"]||void 0!==t.value||-1!=["and","or","remote","file","re"].indexOf(e))},WOQLQuery.prototype.uncleanArguments=function(e,t,r,i){if(this.hasShortcut(e,t))return this.getShortcut(e,t,r);let n="(";for(var s=0;s<t.length;s++){if(this.argIsSubQuery(e,t[s],s))n+=this.prettyPrint(r+this.indent,i,t[s],!1);else if("get"==e&&0==s){n+="\n"+nspaces(r-this.indent)+"WOQL";for(var o=0;o<t[0].length;o++){var a=t[0][o].as?t[0][o].as:t[0][o],u=a[0],c=a[1];"object"==typeof u&&u["@value"]&&(u=u["@value"]),n+=".as("+(u="object"==typeof u?JSON.stringify(u):'"'+u+'"'),c&&(n+=', "'+c+'"'),n+=")",n+="\n"+nspaces(r)}}else n+=this.uncleanArgument(e,t[s],s,t);s<t.length-1&&(n+=",")}return-1!=["and","or"].indexOf(e)&&(n+="\n"+nspaces(r-this.indent)),n+=")"},WOQLQuery.prototype.uncleanArgument=function(e,t,r,i){if("isa"==e)t=0==r?this.unclean(t,"subject"):this.unclean(t,"class");else if("sub"==e)t=this.unclean(t,"class");else if(-1!=["select"].indexOf(e))"v:"==t.substring(0,2)&&(t=t.substring(2));else if(-1!=["quad","add_quad","delete_quad","add_triple","delete_triple","triple"].indexOf(e))switch(r){case 0:t=this.unclean(t,"subject");break;case 1:t=this.unclean(t,"predicate");break;case 2:t=this.unclean(t,"object");break;case 3:t=this.unclean(t,"graph")}if("object"==typeof t){if("concat"==e&&0==r){var n="";if(t.list)for(var s=0;s<t.list.length;s++)t.list[s]["@value"]?n+=t.list[s]["@value"]:n+=t.list[s];var o='"'+n+'"'}else o=this.uncleanObjectArgument(e,t,r);return o}return"string"==typeof t?'"'+t+'"':t},WOQLQuery.prototype.uncleanObjectArgument=function(e,t,r){if(t["@value"]&&(t["@language"]||t["@type"]&&"xsd:string"==t["@type"]))return'"'+t["@value"]+'"';if(t["@value"]&&t["@type"]&&"xsd:integer"==t["@type"])return t["@value"];if(t.list){for(var i="[",n=0;n<t.list.length;n++)"object"==typeof t.list[n]?i+=this.uncleanObjectArgument("list",t.list[n],n):i+='"'+t.list[n]+'"',n<t.list.length-1&&(i+=",");return i+="]"}return JSON.stringify(t)},WOQLQuery.prototype.argIsSubQuery=function(e,t,r){return-1!==["and","or","when","not","opt","exp","minus","div","divide","plus","multiply"].indexOf(e)?!t||"object"==typeof t:"group_by"==e&&2==r},WOQLQuery.prototype.unclean=function(e,t){if("string"!=typeof e)return e;if(-1==e.indexOf(":"))return e;if("http"==e.substring(0,4))return e;var r=e.split(":")[1];return this.vocab&&this.vocab[r]&&this.vocab[r]==e?r:t?"subject"==t&&"doc"==e.split(":")[0]?r:"class"==t&&"scm"==e.split(":")[0]?r:"predicate"==t&&"scm"==e.split(":")[0]?r:"type"==t&&"scm"==e.split(":")[0]?r:"graph"==t&&"db"==e.split(":")[0]?r:e:e},WOQLQuery.prototype.hasShortcut=function(e,t,r){return"true"==e},WOQLQuery.prototype.getShortcut=function(e,t,r){if("true"==e)return!0},WOQLQuery.prototype.printLine=function(e,t){return"(\n"+nspaces(e)+"WOQL."+t.join(",\n"+nspaces(e)+"WOQL.")+"\n"+nspaces(e-this.indent)+")"},WOQLQuery.prototype.cleanSubject=function(e){return"string"!=typeof e?e:-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:"doc:"+e},WOQLQuery.prototype.cleanPredicate=function(e){return-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:"scm:"+e},WOQLQuery.prototype.cleanType=function(e){return-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:"scm:"+e},WOQLQuery.prototype.cleanObject=function(e){return"string"!=typeof e||-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:{"@value":e,"@language":"en"}},WOQLQuery.prototype.cleanGraph=function(e){return-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:"db:"+e},WOQLQuery.prototype.cleanClass=function(e){return-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:"scm:"+e},TripleBuilder.prototype.label=function(e,t){if(t=t||"en","v:"==e.substring(0,2))var r=e;else r={"@value":e,"@language":t};return this.addPO("rdfs:label",r)},TripleBuilder.prototype.description=function(e,t){if(t=t||"en","v:"==e.substring(0,2))var r=e;else r={"@value":e,"@language":t};return this.addPO("rdfs:comment",r)},TripleBuilder.prototype.addPO=function(p,o,g){if(this.type)var ttype="isa"==this.type||"sub"==this.type?"triple":this.type;else var ttype="triple";var evstr=ttype+'("'+this.subject+'", "'+p+'", ';if(evstr+="string"==typeof o?"'"+o+"'":"object"==typeof o?JSON.stringify(o):o,"quad"==ttype.substring(ttype.length-4)||this.g){var g=g||(this.g?this.g:"db:schema");evstr+=', "'+g+'"'}evstr+=")";try{var unit=eval("new WOQLQuery()."+evstr);return this.addEntry(unit)}catch(e){return console.error(e),this}},TripleBuilder.prototype.getO=function(e,t){if(this.cursor.and)for(var r=0;r<this.cursor.and.length;r++){var i=this.cursor.and[r];if(i[n=Object.keys(i)[0]][0]==e&&i[n][1]==t&&i[n][2])return i[n][2]}else if(Object.keys(this.cursor)){var n=Object.keys(this.cursor)[0];if(this.cursor[n][0]==e&&this.cursor[n][1]==t&&this.cursor[n][2])return this.cursor[n][2]}return!1},TripleBuilder.prototype.addEntry=function(e){if(this.cursor[this.type]){var t={};t[this.type]=this.cursor[this.type],this.cursor.and=[t],delete this.cursor[this.type]}if(this.cursor.and)this.cursor.and.push(e.json());else{var r=e.json();r[this.type]?this.cursor[this.type]=r[this.type]:alert(JSON.stringify(r))}return this},TripleBuilder.prototype.card=function(e,t){let r=this.subject;switch(this.subject+="_"+t,this.addPO("rdf:type","owl:Restriction"),this.addPO("owl:onProperty",r),t){case"max":this.addPO("owl:maxCardinality",{"@value":e,"@type":"xsd:nonNegativeInteger"});break;case"min":this.addPO("owl:minCardinality",{"@value":e,"@type":"xsd:nonNegativeInteger"});break;default:this.addPO("owl:cardinality",{"@value":e,"@type":"xsd:nonNegativeInteger"})}let i=this.getO(r,"rdfs:domain");if(i){var n=this.subject;this.subject=i,this.addPO("rdfs:subClassOf",n)}return this.subject=r,this},TripleBuilder.prototype.isa=function(e){var t=new WOQLQuery.isa(this.subject,e);this.tb.addEntry(t)},TripleBuilder.prototype.graph=function(e){this.g=e},TripleBuilder.prototype.sub=function(e){var t=new WOQLQuery.sub(this.subject,e);return this.addEntry(t)},TripleBuilder.prototype.abstract=function(){return this.addPO("tcs:tag","tcs:abstract")},module.exports=WOQL},function(module,exports,__webpack_require__){
/**
 * @file Terminus Rules
 * @license Apache Version 2
 * @summary Abstract object to support applying matching rules to result sets and documents
 * sub-classes are FrameRule and WOQLRule - this just has common functions
 */
const UTILS=__webpack_require__(2);function TerminusRule(){}function TerminusPattern(e){}TerminusRule.prototype.literal=function(e){return void 0===e?this.pattern.literal:(this.pattern.literal=e,this)},TerminusRule.prototype.type=function(...e){return void 0===e||0==e.length?this.pattern.type:(this.pattern.type=e,this)},TerminusRule.prototype.scope=function(e){return void 0===e?this.pattern.scope:(this.pattern.scope=e,this)},TerminusRule.prototype.value=function(...e){return void 0===e?this.pattern.value:(this.pattern.value=e,console.log(this.pattern.value),this)},TerminusRule.prototype.json=function(e){if(!e){var t={};return this.pattern&&(t.pattern=this.pattern.json()),this.rule&&(t.rule=this.rule),t}return e.pattern&&this.pattern.setPattern(e.pattern),e.rule&&(this.rule=e.rule),this},TerminusPattern.prototype.setPattern=function(e){void 0!==e.literal&&(this.literal=e.literal),e.type&&(this.type=e.type),e.scope&&(this.scope=e.scope),e.value&&(this.value=e.value)},TerminusPattern.prototype.json=function(){var e={};return void 0!==this.literal&&(e.literal=this.literal),this.type&&(e.type=this.type),this.scope&&(e.scope=this.scope),this.value&&(e.value=this.value),e},TerminusPattern.prototype.testBasics=function(e,t){if(this.scope&&e&&this.scope!=e)return!1;if(this.type){var r=t["@type"];if(!r||!this.testValue(r,this.type))return!1}return(void 0===this.literal||this.literal==!(void 0===t["@type"]))&&!(void 0!==this.value&&!this.testValue(t,this.value))},TerminusPattern.prototype.testValue=function(e,t){var r=e["@value"]?e["@value"]:e;if("function"==typeof t)return t(r);t&&!Array.isArray(t)&&(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];if("string"==typeof r){if(this.stringMatch(n,r))return!0}else if("number"==typeof r&&this.numberMatch(n,r))return!0}return!1},TerminusPattern.prototype.unpack=function(e,t){var r="";if(t)for(var i=0;i<e.length;i++)"string"==typeof e[i]?r+='"'+e[i]+'"':r+=e[i],i<e.length-1&&(r+=", ");else r='"'+e.join('","')+'"';return r},TerminusPattern.prototype.IDsMatch=function(e,t){return UTILS.compareIDs(e,t)},TerminusPattern.prototype.classIDsMatch=function(e,t){return this.IDsMatch(e,t)},TerminusPattern.prototype.propertyIDsMatch=function(e,t){return this.IDsMatch(e,t)},TerminusPattern.prototype.rangeIDsMatch=function(e,t){return this.IDsMatch(e,t)},TerminusPattern.prototype.valuesMatch=function(e,t){return e==t},TerminusPattern.prototype.numberMatch=function(vala,valb){if("string"==typeof vala)try{return eval(valb+vala)}catch(e){return!1}return vala===valb},TerminusPattern.prototype.stringMatch=function(e,t){if("/"==e.substring(0,1)){return new RegExp(e.substring(1)).test(t)}return e===t},module.exports={TerminusRule:TerminusRule,TerminusPattern:TerminusPattern}},function(e,t,r){const i=r(6),n=r(28),s=r(2);function o(){i.ViewConfig.call(this),this.type="table"}function a(){i.WOQLViewRule.call(this)}o.prototype=Object.create(i.ViewConfig.prototype),o.prototype.constructor=i.ViewConfig,o.prototype.create=function(e){return new n(e,this)},o.prototype.json=function(){let e=[];for(var t=0;t<this.rules.length;t++)e.push(this.rules[t].json());var r={};return void 0!==this.column_order()&&(r.column_order=this.column_order()),void 0!==this.pagesize()&&(r.pagesize=this.pagesize()),void 0!==this.renderer()&&(r.renderer=this.renderer()),void 0!==this.pager()&&(r.pager=this.pager()),void 0!==this.page()&&(r.page=this.page()),void 0!==this.changesize()&&(r.changesize=this.changesize()),{table:r,rules:e}},o.prototype.loadJSON=function(e,t){for(var r=[],i=0;i<t.length;i++){var n=new a;n.json(t[i]),r.push(n)}return this.rules=r,void 0!==e.column_order&&this.column_order(...e.column_order),void 0!==e.pagesize&&this.pagesize(e.pagesize),void 0!==e.renderer&&this.renderer(e.renderer),void 0!==e.pager&&this.pager(e.pager),void 0!==e.page&&this.page(e.page),void 0!==e.changesize&&this.changesize(e.changesize),this},o.prototype.prettyPrint=function(){var e="view = View.table();\n";void 0!==this.column_order()&&(e+="view.column_order('"+this.column_order()+"')\n"),void 0!==this.pagesize()&&(e+="view.pagesize("+this.pagesize()+")\n"),void 0!==this.renderer()&&(e+="view.renderer('"+this.renderer()+"')\n"),void 0!==this.pager()&&(e+="view.pager("+this.pager()+")\n"),void 0!==this.page()&&(e+="view.page("+this.page()+")\n"),void 0!==this.changesize()&&(e+="view.changesize("+this.changesize()+")\n");for(var t=0;t<this.rules.length;t++){let r=this.rules[t].prettyPrint();r&&(e+="view."+r+"\n")}return e},o.prototype.renderer=function(e){return e?(this.trenderer=e,this):this.trenderer},o.prototype.column_order=function(...e){return void 0===e||0==e.length?this.order:(this.order=s.addNamespacesToVariables(e),this)},o.prototype.pager=function(e){return void 0===e?this.show_pager:(this.show_pager=e,this)},o.prototype.changesize=function(e){return void 0===e?this.change_pagesize:(this.change_pagesize=e,this)},o.prototype.pagesize=function(e){return void 0===e?this.show_pagesize:(this.show_pagesize=e,this)},o.prototype.page=function(e){return void 0===e?this.show_pagenumber:(this.show_pagenumber=e,this)},o.prototype.column=function(...e){let t=(new a).scope("column");return t.setVariables(e),this.rules.push(t),t},o.prototype.row=function(){let e=(new a).scope("row");return this.rules.push(e),e},a.prototype=Object.create(i.WOQLViewRule.prototype),a.prototype.constructor=i.WOQLViewRule,a.prototype.header=function(e){return void 0===e?this.rule.header:(this.rule.header=e,this)},a.prototype.prettyPrint=function(e){var t=i.WOQLViewRule.prototype.prettyPrint.apply(this);return void 0!==this.header()&&(t+=".header("+this.header()+")"),t},e.exports=o},function(e,t,r){const i=r(27),n=r(2),s=r(5),o=r(24);function a(e,t){return this.client=e,this.config=t||new i,this}function u(e,t){this.datavalue="unknown"==e?"":e,this.datatype=t}a.prototype.options=function(e){return this.config=e,this},a.prototype.setResult=function(e){return this.result=e,this},a.prototype.count=function(){return this.result.count()},a.prototype.first=function(){return this.result.first()},a.prototype.prev=function(){return this.result.prev()},a.prototype.next=function(){return this.result.next()},a.prototype.canAdvancePage=function(){return this.result.count()==this.result.query.getLimit()},a.prototype.canChangePage=function(){return this.canAdvancePage()||this.canRetreatPage()},a.prototype.canRetreatPage=function(){return this.result.query.getPage()>1},a.prototype.getPageSize=function(){return this.result.query.getLimit()},a.prototype.setPage=function(e){return this.result.query.setPage(e)},a.prototype.getPage=function(){return this.result.query.getPage()},a.prototype.setPageSize=function(e){return this.update(this.result.query.setPageSize(e))},a.prototype.nextPage=function(){return this.update(this.result.query.nextPage())},a.prototype.firstPage=function(){return this.update(this.result.query.firstPage())},a.prototype.previousPage=function(){return this.update(this.result.query.previousPage())},a.prototype.getColumnsToRender=function(){if(this.hasColumnOrder())var e=this.getColumnOrder();else if(this.result.query.hasSelect())e=this.result.query.getSelectVariables();else e=this.result.getVariableList();var t=this;return e?e.filter(e=>!t.hidden(e)):[]},a.prototype.getColumnHeaderContents=function(e){e=n.addNamespaceToVariable(e);let t=(new s).matchColumn(this.config.rules,e,"header");if(t&&t.length){let r=t[t.length-1].rule.header;return"string"==typeof r?document.createTextNode(r):"function"==typeof r?r(e):r}var r=n.labelFromURL(e);return document.createTextNode(r)},a.prototype.hidden=function(e){colid=n.addNamespaceToVariable(e);let t=(new s).matchColumn(this.config.rules,colid,"hidden");return!!t.length&&t[t.length-1].rule.hidden},a.prototype.update=function(e){return e.execute(this.client).then(t=>{var r=new o(t,e);return this.setResult(r),this.notify&&this.notify(r),r})},a.prototype.hasDefinedEvent=function(e,t,r,i,n){if("row"==r)var o=(new s).matchRow(this.config.rules,e,this.result.cursor,i);else o=(new s).matchCell(this.config.rules,e,t,this.result.cursor,i);return!(!o||!o.length)},a.prototype.getDefinedEvent=function(e,t,r,i,n){if("row"==r)var o=(new s).matchRow(this.config.rules,e,this.result.cursor,i);else o=(new s).matchCell(this.config.rules,e,t,this.result.cursor,i);if(o&&o.length)return o[o.length-1].rule[i]},a.prototype.getRowClick=function(e){return this.getDefinedEvent(e,!1,"row","click")},a.prototype.getCellClick=function(e,t){return this.getDefinedEvent(e,t,"column","click")},a.prototype.getRowHover=function(e){return this.getDefinedEvent(e,!1,"row","hover")},a.prototype.getCellHover=function(e,t){return this.getDefinedEvent(e,t,"column","hover")},a.prototype.getColumnOrder=function(){return this.config.column_order()},a.prototype.hasColumnOrder=a.prototype.getColumnOrder,a.prototype.hasCellClick=a.prototype.getCellClick,a.prototype.hasRowClick=a.prototype.getRowClick,a.prototype.hasCellHover=a.prototype.getCellHover,a.prototype.hasRowHover=a.prototype.getRowHover,a.prototype.getRenderer=function(e,t,r){var i=this.getSpecificRender(e,t);if(i)return i;let n=this.getDefinedEvent(t,e,"column","renderer",r),s=this.getDefinedEvent(t,e,"column","args",r);if(!n){let r=this.getRendererForDatatype(t[e]);n=r.name,s||(s=r.args)}return n?this.datatypes.createRenderer(n,s):void 0},a.prototype.renderValue=function(e,t,r,i){if(t&&t["@type"]){e.type=t["@type"];var n=new u(t["@value"],t["@type"],r,i)}else if(t&&t["@language"]){e.type="xsd:string";n=new u(t["@value"],e.type,r,i)}else if(t&&"string"==typeof t){e.type="id";n=new u(t,"id",r,i)}return n?e.renderValue(n):""},u.prototype.value=function(e){return e?(this.datavalue=e,this):this.datavalue},a.prototype.getRendererForDatatype=function(e){return e&&e["@type"]?this.datatypes.getRenderer(e["@type"],e["@value"]):e&&e["@language"]?this.datatypes.getRenderer("xsd:string",e["@value"]):!(!e||"string"!=typeof e)&&this.datatypes.getRenderer("id",e)},a.prototype.getSpecificRender=function(e,t){return this.getDefinedEvent(t,e,"column","render")},e.exports=a},function(e,t,r){const i=r(6),n=r(30),s=r(2);function o(){i.ViewConfig.call(this),this.type="chooser"}function a(e){i.WOQLViewRule.call(this,e)}o.prototype=Object.create(i.ViewConfig.prototype),o.prototype.constructor=i.ViewConfig,o.prototype.create=function(e){return new n(e,this)},o.prototype.prettyPrint=function(){var e="view = View.chooser();\n";e+=this.getBasicPrettyPrint(),void 0!==this.change()&&(e+="view.change("+this.change()+")\n"),void 0!==this.show_empty()&&(e+="view.show_empty('"+this.show_empty()+"')\n"),void 0!==this.values()&&(e+="view.values('"+s.removeNamespaceFromVariable(this.values())+"')\n"),void 0!==this.labels()&&(e+="view.labels('"+s.removeNamespaceFromVariable(this.labels())+"')\n"),void 0!==this.titles()&&(e+="view.titles('"+s.removeNamespaceFromVariable(this.titles())+"')\n"),void 0!==this.sort()&&(e+="view.sort("+this.sort()+")\n"),void 0!==this.direction()&&(e+="view.direction('"+this.direction()+"')\n");for(var t=0;t<this.rules.length;t++)e+="view."+this.rules[t].prettyPrint("chooser")+"\n";return e},o.prototype.json=function(){var e=this.getBasicJSON();return void 0!==this.change()&&(e.change=this.change()),void 0!==this.show_empty()&&(e.show_empty=this.show_empty()),void 0!==this.values()&&(e.values=this.values()),void 0!==this.labels()&&(e.labels=this.labels()),void 0!==this.titles()&&(e.titles=this.titles()),void 0!==this.sort()&&(e.sort=this.sort()),void 0!==this.direction()&&(e.direction=this.direction()),{chooser:e,rules:this.getRulesJSON()}},o.prototype.loadJSON=function(e,t){for(var r=[],i=0;i<t.length;i++){var n=new a;n.json(t[i]),r.push(n)}this.rules=r,this.loadBasicJSON(e),void 0!==e.change&&this.change(e.change),void 0!==e.show_empty&&this.show_empty(e.show_empty),void 0!==e.values&&this.values(e.values),void 0!==e.labels&&this.labels(e.labels),void 0!==e.titles&&this.titles(e.titles),void 0!==e.sort&&this.sort(e.sort),void 0!==e.direction&&this.direction(e.direction)},o.prototype.change=function(e){return void 0!==e?(this.onChange=e,this):this.onChange},o.prototype.show_empty=function(e){return void 0!==e?(this.placeholder=e,this):this.placeholder},o.prototype.rule=function(e){let t=(new a).scope("row");return this.rules.push(t),e&&t.vars(e),t},o.prototype.values=function(e){return void 0!==e?("v:"!=e.substring(0,2)&&(e="v:"+e),this.value_variable=e,this):this.value_variable},o.prototype.labels=function(e){return e?("v:"!=e.substring(0,2)&&(e="v:"+e),this.label_variable=e,this):this.label_variable},o.prototype.titles=function(e){return e?("v:"!=e.substring(0,2)&&(e="v:"+e),this.title_variable=e,this):this.title_variable},o.prototype.sort=function(e){return e?("v:"!=e.substring(0,2)&&(e="v:"+e),this.sort_variable=e,this):this.sort_variable},o.prototype.direction=function(e){return e?(this.sort_direction=e,this):this.sort_direction},a.prototype=Object.create(i.WOQLViewRule.prototype),a.prototype.constructor=i.WOQLViewRule,a.prototype.label=function(e){return e?(this.rule.label=e,this):this.rule.label},a.prototype.title=function(e){return e?(this.rule.title=e,this):this.rule.title},a.prototype.values=function(e){return e?(this.rule.values=e,this):this.rule.values},a.prototype.selected=function(e){return void 0!==e?(this.rule.selected=e,this):this.rule.selected},a.prototype.prettyPrint=function(e){var t=WOQLViewRule.prototype.prettyPrint.apply(this);return void 0!==this.selected()&&(t+=".selected("+this.selected()+")"),void 0!==this.label()&&(t+='.label("'+this.label()+'")'),void 0!==this.title()&&(t+='.title("'+this.title()+'")'),void 0!==this.values()&&(t+='.values("'+this.values()+'")'),t},e.exports=o},function(e,t,r){const i=r(29),n=r(2),s=r(5);function o(e,t){return this.client=e,this.config=t||new i,this.selected=!1,this.cursor=0,this}o.prototype.options=function(e){return this.config=e,this},o.prototype.set=function(e){if(this.selected!=e){this.selected=e;let t=this.config.change;t&&t(e)}},o.prototype.setResult=function(e){this.result=e,this.choices=[];let t=0;const r=e.getVariableList();for(!this.config.values()&&r.length&&this.config.values(r[0]),this.config.sort()&&this.result.sort(this.config.sort(),this.config.direction());row=this.result.next();)row&&this.includeRow(row,this.result.cursor)&&this.choices.push(this.rowToChoice(row,t++));return this},o.prototype.includeRow=function(e,t){const r=(new s).matchRow(this.config.rules,e,t,"hidden");for(var i=0;i<r.length;i++)if(r[i].rule.hidden)return!1;return!0},o.prototype.rowToChoice=function(e,t){var r={id:this.getRowID(e)};return r.label=this.getLabelFromBinding(e,t),r.title=this.getTitleFromBinding(e,t),r.selected=this.getSelectedFromBinding(e,t),r},o.prototype.getRowID=function(e){var t=e[this.config.values()];return t["@value"]?t["@value"]:t},o.prototype.getLabelFromBinding=function(e,t){let r=this.getSpecialRenderer(e,t,"label");if(r)return this.renderSpecial(r,e,t);if(this.config.labels()&&e[this.config.labels()]){var i=e[this.config.labels()];if(i["@value"]&&(i=i["@value"]),"unknown"!=i)return i}return n.labelFromURL(this.getRowID(e))},o.prototype.getTitleFromBinding=function(e,t){let r=this.getSpecialRenderer(e,t,"title");if(r)return this.renderSpecial(r,e,t);if(this.config.titles()&&e[this.config.titles()]){var i=e[this.config.titles()];if(i["@value"]&&(i=i["@value"]),"unknown"!=i)return i}return!1},o.prototype.getSelectedFromBinding=function(e,t){const r=(new s).matchRow(this.config.rules,e,t,"selected");return!(!r||!r.length)&&r[r.length-1].rule.selected},o.prototype.render=function(){if(this.renderer)return this.renderer.render(this)},o.prototype.setRenderer=function(e){return this.renderer=e,this},o.prototype.getSpecialRenderer=function(e,t,r){const i=(new s).matchRow(this.config.rules,e,t,r);for(var n=0;n<i.length;n++)if(i[n].rule[r])return i[n].rule[r];return!1},o.prototype.renderSpecial=function(e,t,r){return e&&"function"==typeof e?e(t):e&&"string"==typeof e?e:void 0},o.prototype.count=function(){return this.result.count()},o.prototype.first=function(){return this.cursor=0,this.choices[this.cursor]},o.prototype.next=function(){const e=this.choices[this.cursor];return this.cursor++,e},o.prototype.prev=function(){if(this.cursor>0)return this.cursor--,this.choices[this.cursor]},e.exports=o},function(e,t,r){const i=r(6),n=r(32),s=r(2);function o(){i.ViewConfig.call(this),this.type="graph"}function a(e){i.WOQLViewRule.call(this,e)}o.prototype=Object.create(i.ViewConfig.prototype),o.prototype.constructor=i.ViewConfig,o.prototype.create=function(e){return new n(e,this)},o.prototype.literals=function(e){return void 0!==e?(this.show_literals=e,this):this.show_literals},o.prototype.source=function(e){return e?("v:"!=e.substring(0,2)&&(e="v:"+e),this.source_variable=e,this):this.source_variable},o.prototype.fontfamily=function(e){return void 0!==e?(this.fontfam=e,this):this.fontfam},o.prototype.show_force=function(e){return void 0!==e?(this.force=e,this):this.force},o.prototype.fix_nodes=function(e){return void 0!==e?(this.fixed=e,this):this.fixed},o.prototype.explode_out=function(e){return void 0!==e?(this.explode=e,this):this.explode},o.prototype.selected_grows=function(e){return void 0!==e?(this.bigsel=e,this):this.bigsel},o.prototype.width=function(e){return void 0!==e?(this.gwidth=e,this):this.gwidth},o.prototype.height=function(e){return void 0!==e?(this.gheight=e,this):this.gheight},o.prototype.edges=function(...e){if(e&&e.length){for(var t=[],r=0;r<e.length;r++)t.push(s.addNamespacesToVariables(e[r]));return this.show_edges=t,this}return this.show_edges},o.prototype.edge=function(e,t){let r=(new a).edge(e,t);return this.rules.push(r),r},o.prototype.node=function(...e){let t=new a;return e&&e.length?t.scope("node").setVariables(e):t.scope("row"),this.rules.push(t),t},o.prototype.loadJSON=function(e,t){for(var r=[],i=0;i<t.length;i++){var n=new a;n.json(t[i]),r.push(n)}this.rules=r,void 0!==e.literals&&this.literals(e.literals),void 0!==e.source&&this.source(e.source),void 0!==e.fontfamily&&this.fontfamily(e.fontfamily),void 0!==e.show_force&&this.show_force(e.show_force),void 0!==e.fix_nodes&&this.fix_nodes(e.fix_nodes),void 0!==e.explode_out&&this.explode_out(e.explode_out),void 0!==e.selected_grows&&this.selected_grows(e.selected_grows),void 0!==e.width&&this.width(e.width),void 0!==e.height&&this.height(e.height),void 0!==e.edges&&this.edges(...e.edges)},o.prototype.prettyPrint=function(){var e="view = View.graph();\n";if(void 0!==this.literals()&&(e+="view.literals('"+this.literals()+"')\n"),void 0!==this.source()&&(e+="view.source('"+s.removeNamespaceFromVariable(this.source())+"')\n"),void 0!==this.fontfamily()&&(e+="view.fontfamily('"+this.fontfamily()+"')\n"),void 0!==this.show_force()&&(e+="view.show_force('"+this.show_force()+"')\n"),void 0!==this.fix_nodes()&&(e+="view.fix_nodes('"+this.fix_nodes()+"')\n"),void 0!==this.explode_out()&&(e+="view.explode_out('"+this.explode_out()+"')\n"),void 0!==this.selected_grows()&&(e+="view.selected_grows('"+this.selected_grows()+"')\n"),void 0!==this.width()&&(e+="view.width('"+this.width()+"')\n"),void 0!==this.height()&&(e+="view.height('"+this.height()+"')\n"),void 0!==this.edges()){for(var t=this.edges(),r=[],i=0;i<t.length;i++)r.push("['"+t[i][0]+", "+t[i][1]+"']");e+="view.edges('"+r.join(", ")+"')\n"}for(i=0;i<this.rules.length;i++){let t=this.rules[i].prettyPrint();t&&(e+="view."+t+"\n")}return e},o.prototype.json=function(){let e=[];for(var t=0;t<this.rules.length;t++)e.push(this.rules[t].json());var r={};return void 0!==this.literals()&&(r.literals=this.literals()),void 0!==this.source()&&(r.source=this.source()),void 0!==this.fontfamily()&&(r.fontfamily=this.fontfamily()),void 0!==this.show_force()&&(r.show_force=this.show_force()),void 0!==this.fix_nodes()&&(r.fix_nodes=this.fix_nodes()),void 0!==this.explode_out()&&(r.explode_out=this.explode_out()),void 0!==this.selected_grows()&&(r.selected_grows=this.selected_grows()),void 0!==this.width()&&(r.width=this.width()),void 0!==this.height()&&(r.height=this.height()),void 0!==this.edges()&&(r.edges=this.edges()),{graph:r,rules:e}},a.prototype=Object.create(i.WOQLViewRule.prototype),a.prototype.constructor=i.WOQLViewRule,a.prototype.charge=function(e){return void 0===e?this.rule.charge:(this.rule.charge=e,this)},a.prototype.collisionRadius=function(e){return void 0===e?this.rule.collisionRadius:(this.rule.collisionRadius=e,this)},a.prototype.arrow=function(e){return e?(this.rule.arrow=e,this):this.rule.arrow},a.prototype.distance=function(e){return void 0!==e?(this.rule.distance=e,this):this.rule.distance},a.prototype.symmetric=function(e){return void 0!==e?(this.rule.symmetric=e,this):this.rule.symmetric},a.prototype.weight=function(e){return void 0!==e?(this.rule.weight=e,this):this.rule.weight},a.prototype.prettyPrint=function(e){var t=i.WOQLViewRule.prototype.prettyPrint.apply(this);return void 0!==this.charge()&&(t+=".charge('"+this.charge()+"')"),void 0!==this.distance()&&(t+=".distance('"+this.distance()+"')"),void 0!==this.weight()&&(t+=".weight('"+this.weight()+"')"),void 0!==this.symmetric()&&(t+=".symmetric("+this.symmetric()+")"),void 0!==this.collisionRadius()&&(t+=".collisionRadius("+this.collisionRadius()+")"),void 0!==this.arrow()&&(t+=".arrow("+JSON.stringify(this.arrow())+")"),t},e.exports=o},function(e,t,r){const i=r(31),n=r(2),s=r(5);function o(e,t){this.client=e,this.config=t||new i,this.nodes=[],this.edges=[]}o.prototype.options=function(e){return this.config=e,this},o.prototype.setResult=function(e){this.result=e,this.calculateVariableTypes(e)},o.prototype.calculateVariableTypes=function(){var e=this.result.getBindings();if(e&&e.length)for(var t=0;t<e.length;t++)this.extractFromBinding(e[t],t);this.edges=this.combineEdges(this.edges),this.nodes=this.combineNodes(this.nodes)},o.prototype.extractFromBinding=function(e,t){if(this.includeRow(e,t)){var r=[],i=[];for(var s in e)"string"==typeof e[s]?e[s]&&"unknown"!=e[s]&&this.includeNode(s,e)&&r.push(s):e[s]["@value"]&&this.includeLiteralNode(s,e)&&i.push(s);if(0==r.length)return;for(var o=0;o<i.length;o++){var a=n.genBNID().substring(2);let t=this.getLiteralOwner(r,i[o],e);t&&(this.addAdornedNode(a,i[o],e),this.addAdornedEdge(e[t],a,t,i[o],e))}this.createEdgesFromIDs(r,e);for(o=0;o<r.length;o++){var u=e[r[o]];this.addAdornedNode(u,r[o],e)}}},o.prototype.addAdornedEdge=function(e,t,r,i,o){var a={type:"link",target:t,source:e,text:i};const u=(new s).matchEdge(this.config.rules,o,r,i);for(var c=!1,l=0;l<u.length;l++){var d=u[l].rule;void 0!==d.hidden&&(c=d.hidden),d.size&&(a.radius=n.getConfigValue(d.size,o)),d.text&&(a.text=n.getConfigValue(d.text,o)),d.color&&(a.color=n.getConfigValue(d.color,o)),d.distance&&(a.distance=n.getConfigValue(d.distance,o)),d.arrow&&(a.arrow=n.getConfigValue(d.arrow,o)),d.symmetric&&(a.symmetric=n.getConfigValue(d.symmetric,o)),d.weight&&(a.weight=n.getConfigValue(d.weight,o))}c||this.edges.push(a)},o.prototype.addAdornedNode=function(e,t,r){var i={type:"node",id:e,nodetype:t};const o=(new s).matchNode(this.config.rules,r,t,e);for(var a=0;a<o.length;a++){var u=o[a].rule;u.size&&(i.radius=n.getConfigValue(u.size,r)),u.color&&(i.color=n.getConfigValue(u.color,r)),u.charge&&(i.charge=n.getConfigValue(u.charge,r)),u.collisionRadius&&(i.collisionRadius=n.getConfigValue(u.collisionRadius,r)),u.icon&&(i.icon=n.getConfigValue(u.icon,r)),u.text&&(i.text=n.getConfigValue(u.text,r)),u.border&&(i.border=n.getConfigValue(u.border,r))}i.text||("string"==typeof r[t]?i.text=r[t]:r[t]["@value"]&&(i.text=r[t]["@value"])),this.nodes.push(i)},o.prototype.getLiteralOwner=function(e,t,r){var i=this.config.source();if(i&&r[i])return i;var n=this.config.edges();if(n){for(var s=0;s<n.length;s++)if(n[s][1]==t)return n[s][0];return!1}return e[0]},o.prototype.createEdgesFromIDs=function(e,t){if(e.length<2)return;var r=this.config.source();let i=this.config.edges();if(!r&&i&&i.length)for(var n=0;n<i.length;n++)-1!=e.indexOf(i[n][0])&&-1!=e.indexOf(i[n][1])&&this.addAdornedEdge(t[i[n][0]],t[i[n][1]],i[n][0],i[n][1],t);else{var s=r&&-1!=e.indexOf(r)?r:e[0];for(n=0;n<e.length;n++)e[n]!=s&&this.addAdornedEdge(t[s],t[e[n]],s,e[n],t)}},o.prototype.getEdges=function(){return this.edges},o.prototype.combineNodes=function(e){for(var t={},r=0;r<e.length;r++){var i=e[r];if(-1!=this.nodes_referenced_by_edges.indexOf(i.id))if(void 0===t[i.id])t[i.id]=i;else for(var n in i)void 0===t[i.id][n]&&(t[i.id][n]=i[n])}return Object.values(t)},o.prototype.combineEdges=function(e){this.nodes_referenced_by_edges=[];for(var t={},r=0;r<e.length;r++){var i=e[r];if(void 0===t[i.source]&&(t[i.source]={}),void 0===t[i.source][i.target])t[i.source][i.target]=i;else for(var n in i)void 0===t[i.source][i.target][n]&&(t[i.source][i.target][n]=i[n]);-1==this.nodes_referenced_by_edges.indexOf(i.source)&&this.nodes_referenced_by_edges.push(i.source),-1==this.nodes_referenced_by_edges.indexOf(i.target)&&this.nodes_referenced_by_edges.push(i.target)}var s=[];for(var n in t)for(var o in t[n])s.push(t[n][o]);return s},o.prototype.getNodes=function(){return this.nodes},o.prototype.includeNode=function(e,t){const r=(new s).matchNode(this.config.rules,t,e,!1,"hidden");for(var i=0;i<r.length;i++)if(r[i].rule.hidden)return!1;return!0},o.prototype.includeLiteralNode=function(e,t){let r=this.config.literals();if(void 0!==r&&!r)return!1;const i=(new s).matchNode(this.config.rules,t,e,!1,"hidden");for(var n=0;n<i.length;n++)if(i[n].rule.hidden)return!1;return!0},o.prototype.includeRow=function(e,t){const r=(new s).matchRow(this.config.rules,e,t,"hidden");for(var i=0;i<r.length;i++)if(r[i].rule.hidden)return!1;return!0},e.exports=o},function(e,t,r){const i=r(6);r(34);function n(){i.ViewConfig.call(this),this.type="chart"}function s(){i.WOQLViewRule.call(this)}n.prototype=Object.create(i.ViewConfig.prototype),n.prototype.constructor=i.ViewConfig,n.prototype.prettyPrint=function(){for(var e="view = View.chart();\n",t=0;t<this.rules.length;t++)e+="view."+this.rules[t].prettyPrint()+"\n";return void 0!==this.margin()&&(e+="view.margin("+this.margin()+")\n"),void 0!==this.title()&&(e+="view.title('"+this.title()+"')\n"),void 0!==this.description()&&(e+="view.description('"+this.description()+"')\n"),void 0!==this.layout()&&(e+="view.layout('"+this.layout()+"')\n"),e+=this.getBasicPrettyPrint()},n.prototype.json=function(){var e={};return void 0!==this.margin()&&(e.margin=this.margin()),void 0!==this.title()&&(e.title=this.title()),void 0!==this.description()&&(e.description=this.description()),void 0!==this.layout()&&(e.layout=this.layout()),{chart:e,rules:this.getRulesJSON()}},n.prototype.loadJSON=function(e,t){this.loadBasicJSON(e);for(var r=[],i=0;i<t.length;i++){var n=new s;n.json(t[i]),r.push(n)}this.rules=r,void 0!==e.margin&&this.margin(e.margin),void 0!==e.title&&this.title(e.title),void 0!==e.description&&this.description(e.description),void 0!==e.layout&&this.layout(e.layout)},n.prototype.title=function(e){return void 0===e?this._title:(this._title=e,this)},n.prototype.description=function(e){return e?(this._description=e,this):this._description},n.prototype.layout=function(e){return e?(this._layout=e,this):this._layout},n.prototype.margin=function(e){return e?(this._margin=e,this):this._margin},n.prototype.create=function(e){return new n(e,this)},n.prototype.xAxis=function(...e){let t=(new s).scope("XAxis");return t.setVariables(e),this.rules.push(t),t},n.prototype.bar=function(...e){let t=(new s).scope("Bar");return t.setVariables(e),this.rules.push(t),t},n.prototype.line=function(...e){let t=(new s).scope("Line");return t.setVariables(e),this.rules.push(t),t},n.prototype.point=function(...e){let t=(new s).scope("Point");return t.setVariables(e),this.rules.push(t),t},n.prototype.area=function(...e){let t=(new s).scope("Area");return t.setVariables(e),this.rules.push(t),t},s.prototype=Object.create(i.WOQLViewRule.prototype),s.prototype.constructor=i.WOQLViewRule,s.prototype.style=function(e,t){return t?(this.rule[e]=t,this):this.rule[e]},s.prototype.label=function(e){return e?(this.rule.label=e,this):this.rule.label},s.prototype.legendType=function(e){return e?(this.rule.legendType=e,this):this.rule.legendType},s.prototype.fill=function(e){return e?(this.rule.fill=e,this):this.rule.fill},s.prototype.stroke=function(e){return e?(this.rule.stroke=e,this):this.rule.stroke},s.prototype.strokeWidth=function(e){return void 0!==e?(this.rule.strokeWidth=e,this):this.rule.strokeWidth},s.prototype.dot=function(e){return void 0!==e?(this.rule.dot=e,this):this.rule.dot},s.prototype.labelRotate=function(e){return e?(this.rule.labelRotate=e,this):this.rule.labelRotate},s.prototype.type=function(e){return e?(this.rule.type=e,this):this.rule.type},s.prototype.axisDomain=function(e){return e?(this.rule.domain=e,this):this.rule.domain},s.prototype.barSize=function(e){return e?(this.rule.barSize=e,this):this.rule.barSize},e.exports=n},function(e,t,r){const i=r(33);function n(e,t){return this.client=e,this.config=t||new i,this}n.prototype.options=function(e){return this.config=e,this},n.prototype.setResult=function(e){return this.result=e,this}},function(e,t,r){const i=r(6),n=r(36);function s(){i.ViewConfig.call(this),this.type="stream"}function o(){i.WOQLViewRule.call(this)}s.prototype=Object.create(i.ViewConfig.prototype),s.prototype.constructor=i.ViewConfig,s.prototype.create=function(e){return new n(e,this)},s.prototype.row=function(){var e=(new o).scope("row");return this.rules.push(e),e},s.prototype.template=function(e){return e?(this.mtemplate=e,this):this.mtemplate},s.prototype.prettyPrint=function(){var e="view = View.stream();\n";void 0!==this.template()&&(e+="view.template("+JSON.stringify(this.template())+")\n");for(var t=0;t<this.rules.length;t++)e+="view."+this.rules[t].prettyPrint()+"\n";return e},s.prototype.loadJSON=function(e,t){for(var r=[],i=0;i<t.length;i++){var n=new o;n.json(t[i]),r.push(n)}this.rules=r,e.template&&(this.mtemplate=e.template)},s.prototype.json=function(){let e=[];for(var t=0;t<this.rules.length;t++)e.push(this.rules[t].json());var r={};return this.mtemplate&&(r.template=this.mtemplate),{stream:r,rules:e}},o.prototype=Object.create(i.WOQLViewRule.prototype),o.prototype.constructor=i.WOQLViewRule,o.prototype.template=function(e){return e?(this.rule.template=e,this):this.rule.template},e.exports=s},function(e,t,r){const i=r(35);function n(e,t){return this.client=e,this.config=t||new i,this}n.prototype.options=function(e){return this.config=e,this},n.prototype.setResult=function(e){this.result=e},e.exports=n},function(e,t,r){const i=r(6),n=r(7),s=r(38);function o(){i.ViewConfig.call(this),this.type="document"}function a(){n.call(this),this.rule={}}o.prototype=Object.create(i.ViewConfig.prototype),o.prototype.constructor=i.ViewConfig,o.prototype.create=function(e){return new s(e,this)},o.prototype.prettyPrint=function(){var e="view = View.document();\n";e+=this.getBasicPrettyPrint(),void 0!==this.load_schema()&&(e+="view.load_schema("+this.load_schema()+")\n");for(var t=0;t<this.rules.length;t++)e+="view."+this.rules[t].prettyPrint()+"\n";return e},o.prototype.json=function(){var e=this.getBasicJSON();return void 0!==this.load_schema()&&(e.load_schema=this.load_schema()),{frame:e,rules:this.getRulesJSON()}},o.prototype.loadJSON=function(e,t){for(var r=[],i=0;i<t.length;i++){var n=new a;n.json(t[i]),r.push(n)}return this.rules=r,this.loadBasicJSON(e),void 0!==e.load_schema&&this.load_schema(e.load_schema),this},o.prototype.json_rules=function(){let e=[];for(var t=0;t<this.rules.length;t++)e.push(this.rules[t].json());return e},o.prototype.load_schema=function(e){return void 0===e?this.get_schema:(this.get_schema=e,this)},o.prototype.show_all=function(e){return this.all().renderer(e),this},o.prototype.show_parts=function(e,t,r){return this.object().renderer(e),this.property().renderer(t),this.data().renderer(r),this},o.prototype.object=function(){let e=(new a).scope("object");return this.rules.push(e),e},o.prototype.property=function(){let e=(new a).scope("property");return this.rules.push(e),e},o.prototype.scope=function(e){let t=(new a).scope(e);return this.rules.push(t),t},o.prototype.data=function(){let e=(new a).scope("data");return this.rules.push(e),e},o.prototype.all=function(){let e=(new a).scope("*");return this.rules.push(e),e},o.prototype.setFrameDisplayOptions=function(e,t){void 0===e.display_options&&(e.display_options={}),void 0!==t.mode()&&(e.display_options.mode=t.mode()),void 0!==t.view()&&(e.display_options.view=t.view()),void 0!==t.showDisabledButtons()&&(e.display_options.show_disabled_buttons=t.showDisabledButtons()),void 0!==t.hidden()&&(e.display_options.hidden=t.hidden()),void 0!==t.collapse()&&(e.display_options.collapse=t.collapse()),void 0!==t.style()&&(e.display_options.style=t.style()),void 0!==t.headerStyle()&&(e.display_options.header_style=t.headerStyle()),void 0!==t.features()&&(e.display_options.features=this.setFrameFeatures(e.display_options.features,t.features())),void 0!==t.headerFeatures()&&(e.display_options.header_features=this.setFrameFeatures(e.display_options.header_features,t.headerFeatures())),void 0!==t.header()&&(e.display_options.header=t.header()),void 0!==t.showEmpty()&&(e.display_options.show_empty=t.showEmpty()),void 0!==t.dataviewer()&&(e.display_options.dataviewer=t.dataviewer()),void 0!==t.args()&&(e.display_options.args=this.setFrameArgs(e.display_options.args,t.args()))},o.prototype.setFrameFeatures=function(e,t){if(!e||!e.length)return t;if(!t||!t.length)return e;let r=[];for(var i=0;i<e.length;i++){var n="string"==typeof e[i]?e[i]:Object.keys(e[i])[0];r.push(n)}for(var s=0;s<t.length;s++){var o="string"==typeof t[s]?t[s]:Object.keys(t[s])[0],a=r.indexOf(o);if(-1==a)e.push(t[s]);else if("object"==typeof t[s]){var u=e[a];if("string"==typeof u)e[a]=t[s];else if("object"==typeof u){var c=t[s][o];for(var l in c)e[a][o][l]=c[l]}}}return e},o.prototype.setFrameArgs=function(e,t){if(!e)return t;if(!t)return e;for(var r in t)e[r]=t[r];return e},a.prototype=Object.create(n.prototype),a.prototype.constructor=n,a.prototype.renderer=function(e){return void 0===e?this.rule.renderer:(this.rule.renderer=e,this)},a.prototype.compare=function(e){return void 0===e?this.rule.compare:(this.rule.compare=e,this)},a.prototype.mode=function(e){return void 0===e?this.rule.mode:(this.rule.mode=e,this)},a.prototype.collapse=function(e){return void 0===e?this.rule.collapse:(this.rule.collapse=e,this)},a.prototype.view=function(e){return e?(this.rule.view=e,this):this.rule.view},a.prototype.showDisabledButtons=function(e){return void 0===e?this.rule.show_disabled_buttons:(this.rule.show_disabled_buttons=e,this)},a.prototype.header=function(e){return e?(this.rule.header=e,this):this.rule.header},a.prototype.headerStyle=function(e){return e?(this.rule.headerStyle=e,this):this.rule.headerStyle},a.prototype.showEmpty=function(e){return e?(this.rule.show_empty=e,this):this.rule.show_empty},a.prototype.dataviewer=function(e){return e?(this.rule.dataviewer=e,this):this.rule.dataviewer},a.prototype.features=function(...e){return void 0===e||0==e.length?this.rule.features:(this.rule.features=e,this)},a.prototype.headerFeatures=function(...e){return void 0===e||0==e.length?this.rule.header_features:(this.rule.header_features=e,this)},a.prototype.render=function(e){if(!e)return this.rule.render;var t=this.headerFeatures(),r=this.features();if(t&&t.length){var i=this.applyFeatureProperty(t,"render",e);this.headerFeatures(...i)}else if(r&&r.length){i=this.applyFeatureProperty(r,"render",e);this.features(...i)}else this.rule.render=e;return this},a.prototype.style=function(e){if(void 0===e)return this.rule.style;var t=this.headerFeatures(),r=this.features();if(t&&t.length){var i=this.applyFeatureProperty(t,"style",e);this.headerFeatures(...i)}else if(r&&r.length){i=this.applyFeatureProperty(r,"style",e);this.features(...i)}else this.rule.style=e;return this},a.prototype.hidden=function(e){if(void 0===e)return this.rule.hidden;var t=this.headerFeatures(),r=this.features();if(t&&t.length){var i=this.applyFeatureProperty(t,"hidden",e);this.headerFeatures(...i)}else if(r&&r.length){i=this.applyFeatureProperty(r,"hidden",e);this.features(...i)}else this.rule.hidden=e;return this},a.prototype.args=function(e){if(!e)return this.rule.args;var t=this.headerFeatures(),r=this.features();if(t&&t.length){var i=this.applyFeatureProperty(t,"args",e);this.headerFeatures(...i)}else if(r&&r.length){i=this.applyFeatureProperty(r,"args",e);this.features(...i)}else this.rule.args=e;return this},a.prototype.applyFeatureProperty=function(e,t,r){for(var i=[],n=0;n<e.length;n++){if("string"==typeof e[n])(s={})[e[n]]={},s[e[n]][t]=r,i.push(s);else if("object"==typeof e[n]){let o=Object.keys(e[n])[0];var s;if(o)(s=e[n])[o][t]=r,i.push(s)}}return i},a.prototype.unpackFeatures=function(e){let t={};for(var r="",i=0;i<e.length;i++){if("string"==typeof e[i])r+='"'+e[i]+'"';else if("object"==typeof e[i]){var n=Object.keys(e[i])[0];for(var s in r+='"'+n+'"',e[i][n])t[s]=e[i][n][s]}i<e.length-1&&(r+=", ")}for(var o=0;o<Object.keys(t).length;o++){var a=Object.keys(t)[o],u=t[a];r+=")."+a+"(","function"==typeof u?r+=u:"string"==typeof u?r+='"'+u+'"':"object"==typeof u&&(r+=JSON.stringify(u))}return r},a.prototype.prettyPrint=function(){return this.pattern&&(str=this.pattern.prettyPrint()),void 0!==this.renderer()&&(str+=".renderer('"+this.renderer()+"')"),void 0!==this.render()&&(str+=".render("+this.render+")"),void 0!==this.compare()&&(str+=".compare("+this.compare()+")"),void 0!==this.mode()&&(str+=".mode('"+this.mode()+"')"),void 0!==this.collapse()&&(str+=".collapse("+this.collapse()+")"),void 0!==this.hidden()&&(str+=".hidden("+this.hidden()+")"),void 0!==this.view()&&(str+=".view('"+this.view()+"')"),void 0!==this.showDisabledButtons()&&(str+=".showDisabledButtons("+this.showDisabledButtons()+")"),void 0!==this.header()&&(str+=".header("+this.header()+")"),void 0!==this.style()&&(str+='.style("'+this.style()+'")'),void 0!==this.headerStyle()&&(str+='.headerStyle("'+this.headerStyle()+'")'),void 0!==this.args()&&(str+=".args("+JSON.stringify(this.args())+")"),void 0!==this.showEmpty()&&(str+=".showEmpty("+this.show_empty()+")"),void 0!==this.dataviewer()&&(str+='.dataviewer("'+this.dataviewer()+'")'),void 0!==this.features()&&(str+=".features("+this.unpackFeatures(this.features())+")"),void 0!==this.headerFeatures()&&(str+=".headerFeatures("+this.unpackFeatures(this.headerFeatures())+")"),str},e.exports=o},function(e,t,r){const i=r(72),n=r(37),s=r(2);function o(e,t){this.client=e,this.config=t||new n,this.load_schema=!1}o.prototype.options=function(e){return this.config=e,this},o.prototype.db=function(e){return this.client.connectionConfig.setDB(e),this},o.prototype.load=function(e,t){return e?("doc:"==e.substring(0,4)&&(e=e.substring(4)),this.config.load_schema()?this.loadComplete(e,t):this.loadDocument(e)):t?this.loadSchema(t):void 0},o.prototype.loadDocument=function(e,t){return t=t||"terminus:frame",this.client.getDocument(e,{"terminus:encoding":t}).then(e=>{"terminus:frame"==t?this.loadDataFrames(e):this.loadJSON(e)})},o.prototype.loadSchema=function(e,t){var r=s.unshorten(e);return this.client.getClassFrame(t,r).then(e=>this.loadSchemaFrames(e,r))},o.prototype.loadComplete=function(e,t){return t?Promise.all([this.loadDocument(e),this.loadDocumentSchema(t)]):this.loadDocument(e).then(e=>{this.loadSchema(this.document.cls)})},o.prototype.loadJSON=function(e,t){return this.docid?this.loadDocument(this.docid):this.clsid?this.loadDocumentSchema(this.clsid):void console.error("Either docid or clid must be set before load is called")},o.prototype.loadDataFrames=function(e,t,r){t||(this.document?t=this.document.cls:e&&e.length&&e[0]&&e[0].domain&&(t=e[0].domain)),t?this.document?this.document.loadDataFrames(e):this.document=new i(t,e,r):console.log("Missing Class Failed to add dataframes due to missing class")},o.prototype.loadSchemaFrames=function(e,t){t||e&&e.length&&e[0]&&e[0].domain&&(t=e[0].domain),t?(this.document||(this.document=new i(t)),e&&(this.document.loadClassFrames(e),this.document.subjid||(this.document.newDoc=!0,this.document.fillFromSchema("_:")))):console.log("Missing Class","Failed to add class frames due to missing both class and classframes")},o.prototype.applyRules=function(e,t,r){e=e||this.document,t=t||this.config;e.filter(t.rules,(function(e,i){t.setFrameDisplayOptions(e,i),r&&r(e,i)}))},e.exports=o},function(module,exports,__webpack_require__){var HTMLStringViewer=__webpack_require__(77),HTMLStringEditor=__webpack_require__(78),HTMLBooleanViewer=__webpack_require__(79),HTMLBooleanEditor=__webpack_require__(80),HTMLChoiceViewer=__webpack_require__(81),HTMLChoiceEditor=__webpack_require__(82),HTMLCoordinateViewer=__webpack_require__(83),HTMLCoordinateEditor=__webpack_require__(84),HTMLDateViewer=__webpack_require__(85),HTMLDateEditor=__webpack_require__(86),HTMLEntityViewer=__webpack_require__(87),HTMLEntityEditor=__webpack_require__(88),HTMLImageViewer=__webpack_require__(89),HTMLImageEditor=__webpack_require__(90),HTMLLinkViewer=__webpack_require__(91),HTMLNumberViewer=__webpack_require__(92),HTMLRangeViewer=__webpack_require__(93),HTMLRangeEditor=__webpack_require__(94),GoogleMapEditor=__webpack_require__(95),GoogleMapViewer=__webpack_require__(96),HTMLMarkupEditor=__webpack_require__(97),S2EntityEditor=__webpack_require__(98);function initialiseDataRenderers(e,t,r){e.registerViewerForTypes("HTMLBooleanViewer",{label:"Checkbox Viewer"},["xsd:boolean"]),e.registerEditorForTypes("HTMLBooleanEditor",{label:"Checkbox Editor"},["xsd:boolean"]),e.registerViewerForTypes("HTMLChoiceViewer",{label:"Choice Viewer"},["oneOf"]),e.registerEditorForTypes("HTMLChoiceEditor",{label:"Choice Selector"},["oneOf"]),e.registerViewerForTypes("HTMLCoordinateViewer",{label:"Coordinate Viewer"},["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),e.registerEditorForTypes("HTMLCoordinateEditor",{label:"Coordinate Editor"},["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),e.registerViewerForTypes("HTMLDateViewer",{label:"Date Viewer"},["xsd:time","xsd:date","xsd:dateTime","xsd:gYear","xsd:gYearRange","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:dateTimeStamp"]),e.registerEditorForTypes("HTMLDateEditor",{label:"Date Editor"},["xsd:time","xsd:date","xsd:dateRange","xsd:dateTime","xsd:gYear","xsd:gYearRange","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:dateTimeStamp"]);var i={label:"Document Viewer"};r&&r.HTMLEntityViewer&&(i.args=r.HTMLEntityViewer),e.registerViewerForTypes("HTMLEntityViewer",i,["document"]),e.registerEditorForTypes("HTMLEntityEditor",{label:"Document Selector"},["document"]),e.registerViewerForTypes("HTMLImageViewer",{label:"Image Viewer"},["xdd:url","xsd:anyURI","xsd:base64Binary"]),e.registerEditorForTypes("HTMLImageEditor",{label:"Image Editor"},["xsd:base64Binary"]),e.registerViewerForTypes("HTMLImageViewer",{label:"Image Viewer"},["xdd:url","xsd:anyURI","xsd:base64Binary"]),e.registerEditorForTypes("HTMLImageEditor",{label:"Image Editor"},["xsd:base64Binary"]),e.registerViewerForTypes("HTMLLinkViewer",{label:"Link Viewer"},["xdd:url","xsd:anyURI"]),e.registerViewerForTypes("HTMLNumberViewer",{label:"Number with commas"},["xsd:decimal","xsd:double","xsd:float","xsd:short","xsd:integer","xsd:long","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger"]),e.registerViewerForTypes("HTMLRangeViewer",{label:"Range Viewer"},["xdd:gYearRange","xdd:dateRange","xdd:integerRange","xdd:decimalRange"]),e.registerEditorForTypes("HTMLRangeEditor",{label:"Range Editor"},["xdd:gYearRange","xdd:dateRange","xdd:integerRange","xdd:decimalRange"]),e.universalEditor="HTMLStringEditor",e.universalViewer="HTMLStringViewer",addPlugins(e,t),e.createRenderer=function(e,t){return createDataRenderer(e,t)}}function createDataRenderer(type,options){try{var viewer=eval("new "+type+"."+type+"()");viewer.options&&viewer.options(options)}catch(e){return!1}return viewer}function addPlugins(e,t){t&&-1!=t.indexOf("gmaps")&&(e.registerEditorForTypes("GoogleMapEditor",{label:"Google Map Editor"},["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),e.registerViewerForTypes("GoogleMapViewer",{label:"Google Map Editor"},["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"])),t&&-1!=t.indexOf("quill")&&e.registerEditorForTypes("HTMLMarkupEditor",{label:"Quill WYSIWIG HTML Editor"},["xdd:html"]),t&&-1!=t.indexOf("select2")&&e.registerEditorForFrameType("S2EntityEditor",{label:"S2 Autocomplete Selector"},"document")}module.exports={createDataRenderer:createDataRenderer,initialiseDataRenderers:initialiseDataRenderers}},function(e,t){function r(){this.months=["January","Februrary","March","April","May","June","July","August","September","October","November","December"]}r.prototype.getMonthName=function(e){return this.months[e-1]},e.exports={HTMLDateHelper:r}},function(e,t){function r(e){this.polygon=!1,this.polyline=!1,this.markers=[],this.init(e)}r.prototype.init=function(e){this.type=e&&e.type?e.type:"Shape",this.width=e&&e.width?e.width:"400px",this.height=e&&e.height?e.height:"400px",this.mapLat=e&&e.mapLat?e.mapLat:"41.9010004",this.mapLong=e&&e.mapLong?e.mapLong:"12.500061500000015",this.zoom=e&&e.zoom?e.zoom:3,this.stroke=e&&e.stroke?e.stroke:{color:"#FF0000",opacity:.3,weight:3},this.fill=e&&e.fill?e.fill:{color:"#FF0000",opacity:.1},this.line=e&&e.line?e.line:{color:"#000000",opacity:.9,weight:3}},r.prototype.destroy=function(){this.clear()},r.prototype.translatePolygonToArray=function(e){for(var t="[",r=e.getPath(),i=!1,n=0;n<r.getLength();n++){i&&(t+=",");var s=r.getAt(n);t=t+"["+s.lat()+","+s.lng()+"]",i=!0}return t+="]"},r.prototype.translateArrayToPolygon=function(e){for(var t=JSON.parse(e),r=[],i=0;i<t.length;i++){var n={};n.lat=t[i][0],n.lng=t[i][1],r.push(n)}return r},r.prototype.createPolygon=function(e,t){var r=new google.maps.Polygon({paths:e,strokeColor:this.stroke.color,strokeOpacity:this.stroke.opacity,strokeWeight:this.stroke.weight,fillColor:this.fill.color,fillOpacity:this.fill.opacity});return r.setMap(t),r},r.prototype.createPolyline=function(e){var t={strokeColor:this.line.color,strokeOpacity:this.line.opacity,strokeWeight:this.line.weight};return e&&(t.paths=e),new google.maps.Polyline(t)},r.prototype.clearMarkers=function(){for(var e=0;e<this.markers.length;e++)this.markers[e].setMap(null);this.markers.length=0},r.prototype.addMarker=function(e,t,r,i,n){var s={position:e,map:t};i&&(s.title=i);var o=new google.maps.Marker(s),a=this;if(0==this.markers.length&&"xdd:coordinatePolygon"==n&&o.addListener("click",(function(){var e=a.getCoordsFromMarkers();a.polygon=a.createPolygon(e,t),a.clearMarkers(),a.polyline.setMap(null),r.set(a.translatePolygonToArray(a.polygon))})),this.markers.push(o),"xdd:coordinatePolyline"==n){var u=this.translatePolygonToArray(this.polyline);r.set(u)}return o},r.prototype.getCoordsFromMarkers=function(){return this.polyline.getPath()},r.prototype.clear=function(){this.polygon&&(this.polygon.setMap(null),this.polygon=!1),this.polyline&&(this.clearMarkers(),this.polyline.setMap(null))},r.prototype.initMap=function(e,t,r){if(e.style.width=this.width,e.style.height=this.height,"undefined"==typeof google)return alert("google is not effing loaded"),!1;var i=new google.maps.Map(e,{zoom:this.zoom,center:{lat:parseFloat(this.mapLat),lng:parseFloat(this.mapLong)}});if("xdd:coordinatePolygon"==r){this.polyline=this.createPolyline(),this.polyline.setMap(i);var n=t?this.translateArrayToPolygon(t):[];t&&(this.polygon=this.createPolygon(n,i))}else if("xdd:coordinatePolyline"==r){n=t?this.translateArrayToPolygon(t):[];this.polyline=this.createPolyline(),this.polyline.setMap(i),t&&this.polyline.setPath(n)}else if("xdd:coordinate"==r&&t){this.clearMarkers();var s={position:{lat:parseFloat(t.substring(1,t.indexOf(","))),lng:parseFloat(t.substring(t.indexOf(",")+1,t.length-1))},map:i},o=new google.maps.Marker(s);this.markers.push(o)}return google.maps.event.trigger(i,"resize"),i},e.exports=r},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){this.registeredDataViewers={},this.registeredDataEditors={},this.defaultViewers={},this.defaultEditors={},this.universalViewer=!1,this.universalEditor=!1,e&&this.options(e),this.specials=["document","oneOf","id","contained","structural"]}i.prototype.options=function(e){this.universalViewer=!(!e||!e.universalViewer)&&e.universalViewer,this.universalEditor=!(!e||!e.universalEditor)&&e.universalEditor,this.editor=!(!e||!e.editor)&&e.editor},i.prototype.getValidDataViewerList=function(e){var t=[];return e&&void 0!==this.registeredDataViewers[e]&&(t=t.concat(this.registeredDataViewers[e])),this.universalViewer&&-1==t.indexOf(this.universalViewer)&&t.push(this.universalViewer),t},i.prototype.getValidDataEditorList=function(e){var t=[];if(e&&void 0!==this.registeredDataEditors[e]){var r=this.registeredDataEditors[e];if(r)for(var i=0;i<r.length;i++)-1==t.indexOf(r[i])&&t.push(r[i])}return void 0!==this.registeredDataEditors[e]&&(t=t.concat(this.registeredDataEditors[e])),this.universalEditor&&-1==t.indexOf(this.universalEditor)&&t.push(this.universalEditor),t},i.prototype.getEditorForDataFrame=function(e){var t=this.getValidDataEditorList(e);return this.defaultEditors[e]&&t[this.defaultEditors[e]]?t[this.defaultEditors[e]]:t?t[Object.keys(t)[0]]:this.universalEditor?this.universalEditor:void 0},i.prototype.getViewerForDataFrame=function(e){var t=this.getValidDataViewerList(e);return this.defaultViewers[e]&&t[this.defaultViewers[e]]?t[this.defaultViewers[e]]:t?t[Object.keys(t)[0]]:this.universalViewer?this.universalViewer:void 0},i.prototype.registerViewerForTypes=function(e,t,r){for(var i=0;i<r.length;i++)void 0===this.registeredDataViewers[r[i]]&&(this.registeredDataViewers[r[i]]={}),this.registeredDataViewers[r[i]][e]||(this.registeredDataViewers[r[i]][e]=t)},i.prototype.registerEditorForTypes=function(e,t,r){for(var i=0;i<r.length;i++)void 0===this.registeredDataEditors[r[i]]&&(this.registeredDataEditors[r[i]]={}),this.registeredDataEditors[r[i]][e]||(this.registeredDataEditors[r[i]][e]=t)},i.prototype.getRenderer=function(e,t){var i={},n=this.getViewerForDataFrame(e);return!!n&&("object"==r(n)?(i.name=Object.keys(n)[0],n[i.name].label&&(i.label=n[i.name].label),n[i.name].args&&(i.args=n[i.name].args)):i.name=n,i)},i.prototype.getEditor=function(e,t){var i={},n=this.getEditorForDataFrame(e);return!!n&&("object"==r(n)?(i.name=Object.keys(n)[0],n[i.name].label&&(i.label=n[i.name].label),n[i.name].args&&(i.args=n[i.name].args)):i.name=n,i)},e.exports=i},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){this.ui=t,this.vios=[];for(var r=[],i=0;i<e.length;i++)r.push(e[i]);for(i=0;i<r.length;i++)this.vios.push(new n(r[i],this.ui))}function n(e,t){this.ui=t,this.vio=e}i.prototype.getAsDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-violations terminus-show-msg-vio");var r=document.createElement("div");r.setAttribute("class","terminus-violations-heading"),t.appendChild(r);var i=this.vios.length+(this.vios.length>1?" Violations Detected":" Violation Detected");e&&(i+=" "+e),r.appendChild(document.createTextNode(i));for(var n=0;n<this.vios.length;n++)t.appendChild(this.vios[n].getAsDOM());return t},n.prototype.getAsDOM=function(){var e=document.createElement("div");if(e.setAttribute("class","terminus-violation"),this.vio["@type"]){var t=this.vio["vio:message"]||{"@value":""};e.appendChild(this.getPropertyAsDOM(this.vio["@type"],t))}for(var r in this.vio)"vio:message"!=r&&"@type"!=r&&e.appendChild(this.getPropertyAsDOM(r,this.vio[r]));return e},n.prototype.getPropertyAsDOM=function(e,t){var i=document.createElement("div");i.setAttribute("class","terminus-violation-property");var n=document.createElement("span");n.setAttribute("class","terminus-label terminus-violation-property-label"),n.appendChild(document.createTextNode(e));var s=document.createElement("span");s.setAttribute("class","terminus-violation-property-value");var o=t["@value"]||t;return o&&"object"!=r(o)&&s.appendChild(document.createTextNode(o)),i.appendChild(n),i.appendChild(s),i},e.exports=i},function(e,t,r){var i=r(45),n=r(9);e.exports={TerminusUI:i,TerminusViewer:n}},function(e,t,r){var i=r(46),n=r(74),s=r(43),o=r(106),a=r(108),u=r(109),c=r(111),l=r(12),d=r(4),h=r(0),p=r(1);function m(e){this.client=new p.WOQLClient,this.controls=[],this.setOptions(e)}m.prototype.connect=function(e){var t=this;this.client.connectionConfig.server=!1;var r=!(!e||!e.key)&&e.key;return this.showBusy("Connecting to server at "+e.server),this.client.connect(e.server,r).then((function(r){return t.clearBusy(),e&&e.db&&t.getDBRecord(e.db)?(t.connectToDB(e.db),e.document&&t.showView("get_document")?r=t.showDocumentPage(e.document):e.schema&&t.showView("get_schema")?r=t.showSchemaPage(e.schema):e.query&&t.showView("woql_select")?t.showQueryPage(e.query):e.explorer&&t.showView("api_explorer")?t.showExplorer(e.explorer):t.showDBMainPage()):t.showServerMainPage(),t.redraw(),r})).catch((function(e){throw t.clearBusy(),t.showError(e),e}))},m.prototype.createDatabase=function(e){var t=this;if(!e.id||!e.title)return Promise.reject(new Error(t.getBadArguments("createDatabase","ID and title are mandatory fields")));var r=e.id;t.showBusy("Creating Database "+e.title+" with id "+r);var i=this.generateNewDatabaseDocument(e);return this.client.createDatabase(r,i).then((function(e){return t.clearBusy(),t.refreshDBList().then((function(e){if(!(crec=t.client.connection.getDBRecord(r)))return Promise.reject(new Error(t.getCrashString("createDatabase","Failed to retrieve record of created database "+r)));t.client.connectionConfig.dbid=r,t.showDBMainPage(),t.showMessage("Successfully Created Database "+r,"success")}))})).catch((function(e){t.clearBusy(),t.showError(e)}))},m.prototype.deleteDatabase=function(e){var t=this,r=this.client.connection.getDBRecord(),i=e||this.db(),n=r&&r["rdfs:label"]&&r["rdfs:label"]["@value"]?r["rdfs:label"]["@value"]+" (id: "+i+")":i;return this.showBusy("Deleting database "+n),this.client.deleteDatabase(i).then((function(e){return t.clearBusy(),t.showServerMainPage(),t.showMessage("Successfully Deleted Database "+n,"warning"),t.refreshDBList(),e})).catch((function(e){t.clearBusy(),t.showError(e)}))},m.prototype.generateNewDatabaseDocument=function(e){var t={"@context":{rdfs:"http://www.w3.org/2000/01/rdf-schema#",terminus:"http://terminusdb.com/schema/terminus#"},"@type":"terminus:Database"};return e.title&&(t["rdfs:label"]={"@language":"en","@value":e.title}),e.description&&(t["rdfs:comment"]={"@language":"en","@value":e.description}),t["terminus:allow_origin"]={"@type":"xsd:string","@value":"*"},t},m.prototype.getBadArguments=function(e,t){return"Bad arguments to "+e+": "+t},m.prototype.getCrashString=function(e,t){return"Results from "+e+" indicate the possibility of a system failure "+t},m.prototype.load=function(e,t){var r={};return e&&-1!=e.indexOf("/document/")?(e=e.substring(0,e.indexOf("/document/")),r.document=e.substring(e.indexOf("/document/")+10)):e&&-1!=e.indexOf("/schema")?(e=e.substring(0,e.indexOf("/schema")),r.schema={}):e&&-1!=e.indexOf("/woql")&&(e=e.substring(0,e.indexOf("/query")),r.query=e.substring(e.indexOf("/query")+7)),r.server=e,t&&(r.key=t),this.connect(r)},m.prototype.getConnectionEndpoint=function(e){return e&&-1!=e.lastIndexOf("/schema")?e.substring(0,e.lastIndexOf("/schema")):e&&-1!=e.lastIndexOf("/document")?e.substring(0,e.lastIndexOf("/document")):e&&-1!=e.lastIndexOf("/frame")?e.substring(0,e.lastIndexOf("/frame")):e&&-1!=e.lastIndexOf("/woql")?e.substring(0,e.lastIndexOf("/woql")):e},m.prototype.server=function(){return this.client.connectionConfig.server},m.prototype.db=function(){return this.client.connectionConfig.dbid},m.prototype.clearServer=function(){this.client.connectionConfig.server=!1},m.prototype.connectToDB=function(e){this.client.connectionConfig.dbid=e,p.UTILS.addURLPrefix("doc",this.client.connectionConfig.dbURL()+"/document/"),p.UTILS.addURLPrefix("scm",this.client.connectionConfig.dbURL()+"/schema#")},m.prototype.clearDB=function(){this.client.connectionConfig.dbid=!1},m.prototype.removeDB=function(e,t){this.client.connection.removeDB(e,t)},m.prototype.getDBRecord=function(e,t){return this.client.connection.getDBRecord(e,t)},m.prototype.refreshDBList=function(){return this.client.connect()},m.prototype.showServerMainPage=function(){this.viewer=new u.TerminusServerViewer(this),this.redrawMainPage()},m.prototype.showCollaboratePage=function(){this.viewer=new c(this),this.redrawMainPage()},m.prototype.showLoadURLPage=function(e){this.viewer=new c(this,e),this.redrawMainPage()},m.prototype.showDBMainPage=function(){this.viewer=new n.TerminusDBViewer(this),this.page="db",this.redraw()},m.prototype.showCreateDBPage=function(){this.viewer=new n.TerminusDBCreator(this),this.redrawMainPage()},m.prototype.showSchemaPage=function(e){this.viewer=new a(this),this.redrawMainPage()},m.prototype.showQueryPage=function(e){this.viewer=new o(this,e,this.options),this.redrawMainPage()},m.prototype.showDocumentPage=function(e){this.viewer=new n.TerminusDBViewer(this),this.page="docs",e&&(this.viewer.docid=e),this.redrawMainPage()},m.prototype.showCreateDocument=function(e){this.viewer=new TerminusDocumentViewer(this,"create",this.getDocCreatorOptions());var t=this.viewer.loadCreateDocument(e);return this.redrawMainPage(),t},m.prototype.redrawMainPage=function(){if(h.removeChildren(this.mainDOM),this.viewer&&this.mainDOM){var e=this.viewer.getAsDOM();this.mainDOM.appendChild(e)}},m.prototype.deleteDBPermitted=function(e){return"terminus"!=e&&!!this.client.connection.capabilitiesPermit("delete_database",e)},m.prototype.getDeleteDBButton=function(e){if(!this.deleteDBPermitted(e))return!1;var t=document.createElement("i");t.setAttribute("class","terminus-db-list-del-icon fa fa-trash");var r,i=this;return t.addEventListener("click",(r=e,function(){1==confirm("This action is irreversible, it will remove the database from the system permanently. Are you sure you want to delete ".concat(r," Database?"))&&i.deleteDatabase(r)})),t},m.prototype.showResult=function(e){this.showMessage(e,"success")},m.prototype.showError=function(e){this.showMessage(e,"error")},m.prototype.showWarning=function(e){this.showMessage(e,"warning")},m.prototype.clearMessages=function(e){this.messages&&h.removeChildren(this.messages)},m.prototype.clearMainPage=function(){this.main&&h.removeChildren(this.main)},m.prototype.setMessageDOM=function(e){this.messages=e},m.prototype.setbuttonControls=function(e){this.buttons=e},m.prototype.setControllerDOM=function(e){this.controller=e},m.prototype.setExplorerDOM=function(e){this.explorer=e},m.prototype.setPluginsDOM=function(e){this.plugins=e},m.prototype.setViewerDOM=function(e){this.mainDOM=e},m.prototype.draw=function(e,t){e&&e.viewer&&this.setViewerDOM(e.viewer),e&&e.buttons&&this.setbuttonControls(e.buttons),e&&e.messages&&this.setMessageDOM(e.messages),e&&e.controller&&this.setControllerDOM(e.controller),e&&e.plugins&&this.setPluginsDOM(e.plugins),this.plugins&&this.drawPlugins(),this.buttons;var r=this;if(t&&t.server){if(void 0===this.client.connection.connection[t.server])return this.connect(t).catch((function(e){r.showLoadURLPage()}))}else this.showLoadURLPage()},m.prototype.redraw=function(e){this.clearMessages(),this.redrawControls(),this.explorer&&h.removeChildren(this.explorer),this.viewer&&this.redrawMainPage(),e&&this.showMessage(e)},m.prototype.toggleDashboardWidget=function(e){h.removeChildren(this.controller),h.removeChildren(this.explorer),d.removeSelectedNavClass("terminus-dashboard-selected"),e.classList.add("terminus-dashboard-selected")},m.prototype.toggleControl=function(){},m.prototype.redrawControls=function(){this.controller&&(h.removeChildren(this.controller),this.drawControls())},m.prototype.drawControls=function(){this.controls=[],this.loadControls();for(var e=0;e<this.controls.length;e++){var t=this.controls[e];t&&(nd=t.getAsDOM())&&this.controller.appendChild(nd)}},m.prototype.drawExplorer=function(){if(this.explorer&&this.showControl("api_explorer")){var e=new i(this);ae=e.getAsDOM(),this.explorer.appendChild(ae),this.explorer.style.display="block"}},m.prototype.loadControls=function(){var e;this.showControl("server")&&((e=new u.TerminusServerController(this))&&this.controls.push(e),this.db()&&this.showControl("db")&&(e=new n.TerminusDBController(this))&&this.controls.push(e))},m.prototype.showControl=function(e){return-1!=this.show_controls.indexOf(e)&&(!!this.pseudoCapability(e)||!!this.client.connection.capabilitiesPermit(e))},m.prototype.showView=function(e){return-1!=this.show_views.indexOf(e)&&(!!this.pseudoCapability(e)||!!this.client.connection.capabilitiesPermit(e))},m.prototype.clearBusy=function(e){this.clearMessages(),this.viewer&&"function"==typeof this.viewer.busy&&this.viewer.busy(!1)},m.prototype.getBusyLoader=function(e){var t=document.createElement("div"),r=document.createElement("div");r.setAttribute("class","term-progress-bar-container"),t.appendChild(r);var i=document.createElement("div");i.setAttribute("class","term-progress-bar term-stripes animated reverse slower"),r.appendChild(i);var n=document.createElement("span");n.setAttribute("class","term-progress-bar-inner"),i.appendChild(n),e.appendChild(t)},m.prototype.showMessage=function(e,t){if(this.messages){h.removeChildren(this.messages);var r=document.createElement("div");switch(t){case"busy":var i=document.createElement("div");i.setAttribute("class","terminus-busy-msg"),i.appendChild(document.createTextNode(e)),r.appendChild(i),this.getBusyLoader(r);break;case"success":r.setAttribute("class","terminus-show-msg-success"),r.appendChild(document.createTextNode(e));break;case"error":r.setAttribute("class","terminus-show-msg-error"),r.appendChild(document.createTextNode(e));break;case"info":r.setAttribute("class","terminus-show-msg-info"),r.appendChild(document.createTextNode(e));break;case"warning":r.setAttribute("class","terminus-show-msg-warning"),r.appendChild(document.createTextNode(e))}this.messages.appendChild(r)}},m.prototype.showViolations=function(e,t){var r=new s(e,this);if(this.messages){var i="schema"==t?" in Schema":" in Document";h.removeChildren(this.messages),this.messages.appendChild(r.getAsDOM(i))}},m.prototype.showBusy=function(e){this.showMessage(e,"busy"),this.viewer&&"function"==typeof this.viewer.busy&&this.viewer.busy(e)},m.prototype.pseudoCapability=function(e){return-1!=["server","db","collaborate","change-server","api_explorer","import_schema","add_new_library"].indexOf(e)},m.prototype.setOptions=function(e){this.show_controls=e&&e.controls?e.controls:["server","db","change-server","schema_format","import_schema","class_frame","create_database","collaborate","get_document","update_schema","get_schema","woql_select"],this.show_views=e&&e.views?e.views:this.show_controls,e.document&&(this.document_options=e.document),e.schema&&(this.schema_options=e.schema),this.piman=new l;this.piman.init(e.plugins,(function(){})),e.css&&this.piman&&this.piman.loadPageCSS(e.css),this.loadControls()},m.prototype.pluginAvailable=function(e){return this.piman.pluginAvailable(e)},m.prototype.drawPlugins=function(){if(!this.piman)return console.log(new Error("No plugin manager initialised in UI object")),!1;this.plugins.appendChild(this.piman.getAsDOM(this))},m.prototype.getDocViewerOptions=function(){return!(!this.document_options||!this.document_options.view)&&this.document_options.view},m.prototype.getDocCreatorOptions=function(){return!(!this.document_options||!this.document_options.view)&&this.document_options.view},m.prototype.getClassFrameOptions=function(){return this.viewdoc_options},e.exports=m},function(e,t,r){
/**
 * @file Javascript Api explorer tool
 * @author Kitty Jose
 * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more
 *
 * @summary Displays a demo and description of api calls from WOQLCLient and what happens under the hood of api calls
 */
var i=r(12),n=r(4),s=r(1),o=r(0),a={mainNav:{connect:{navText:"Connect API",action:"connect",icon:"link",defaultSelected:!0},database:{navText:"Database API",action:"create",icon:"database"},schema:{navText:"Schema API",action:"schema",icon:"cog"},document:{navText:"Document API",action:"document",icon:"file"},query:{navText:"Query API",action:"query",icon:"search"}},subNav:{database:{createDatabase:{navText:"Create database",action:"create",icon:"plus",defaultSelected:!0},deleteDatabase:{navText:"Delete database",action:"delete",icon:"trash-alt"}},schema:{getSchema:{navText:"View Schema",action:"getSchema",icon:"eye",defaultSelected:!0},updateSchema:{navText:"Update Schema",action:"updateSchema",icon:"arrow-up"},getClassFrames:{navText:"Get Class Frames",action:"getClassFrames",icon:"share-alt"}},document:{viewDocument:{navText:"View Document",action:"viewDocument",icon:"eye",defaultSelected:!0},createDocument:{navText:"Create Document",action:"createDocument",icon:"plus"},updateDocument:{navText:"Update Document",action:"updateDocument",icon:"arrow-up"},deleteDocument:{navText:"Delete Document",action:"deleteDocument",icon:"trash-alt"}},query:{select:{navText:"Select",action:"select",icon:"mouse-pointer",defaultSelected:!0},update:{navText:"Update",action:"update",icon:"arrow-up"}}}};function u(e){this.ui=e,this.viewer=e.mainDOM,this.client=new s.WOQLClient,this.client.use_fetch=!0,this.client.return_full_response=!0,this.pman=new i}u.prototype.getAsDOM=function(){var e=document.createElement("div");return e.setAttribute("class","terminus-db-controller"),this.ui&&(this.getApiNav(e,this.viewer),this.getApiExplorerDom("connect",this.viewer)),e},u.prototype.setSelectedNavMenu=function(e){n.removeSelectedNavClass("terminus-selected"),e.classList.add("terminus-selected")},u.prototype.navOnSelect=function(e,t,r){n.removeSelectedNavClass("terminus-selected"),t.classList.add("terminus-selected"),this.getApiExplorerDom(e,r)},u.prototype.createNavs=function(e,t,r){var i=document.createElement("a");i.setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer"),e.defaultSelected&&i.classList.add("terminus-selected");var n=this;i.addEventListener("click",(function(){n.navOnSelect(e.action,this,t)}));var s=document.createElement("i");s.setAttribute("class","terminus-menu-icon fa fa-"+e.icon),i.appendChild(s);var o=document.createTextNode(e.navText);i.appendChild(o),r.appendChild(i)},u.prototype.getApiNav=function(e,t){var r=document.createElement("div");e.appendChild(r);var i=document.createElement("ul");for(var n in i.setAttribute("class","terminus-ul"),r.appendChild(i),a.mainNav)a.mainNav.hasOwnProperty(n)&&this.createNavs(a.mainNav[n],t,i);return e},u.prototype.getApiExplorerDom=function(e,t){o.removeChildren(t);var r=document.createElement("div");t.appendChild(r),(a=document.createElement("div")).setAttribute("class","container-fluid"),r.appendChild(a);var i=document.createElement("div");i.setAttribute("class","row-fluid"),a.appendChild(i);var n=document.createElement("div");n.setAttribute("class","terminus-module-body"),i.appendChild(n);var s=document.createElement("div");s.setAttribute("class","terminus-module-body terminus-module-body-white-bg terminus-module-body-width"),n.appendChild(s);var a=document.createElement("div");switch(e){case"connect":var u=this.getConnectExplorer(a);s.appendChild(u);break;case"create":u=this.getDatabaseExplorer(a);s.appendChild(u);break;case"schema":u=this.getSchemaApi(a);s.appendChild(u);break;case"document":u=this.getDocumentApi(a);s.appendChild(u);break;case"query":u=this.getQueryApi(a);s.appendChild(u)}return r},u.prototype.changeSubApiDom=function(e,t,r,i){switch(o.removeChildren(i),e){case"database":var n=this.getDatabaseDom(t,i);break;case"schema":case"document":n=this.getShowApiDom(t,i);break;case"query":n=this.getQueryApiDom(t,i);break;default:console.log("Invalid Api Config")}r.appendChild(n)},u.prototype.subNavOnSelect=function(e,t,r,i,s){n.setSelectedSubMenu(r),this.changeSubApiDom(e,t.action,i,s)},u.prototype.createSubNavs=function(e,t,r,i,n){if("getClassFrames"!=t.action){var s=document.createElement("a");s.setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer"),t.defaultSelected&&s.classList.add("terminus-submenu-selected");var o=this;s.addEventListener("click",(function(){o.subNavOnSelect(e,t,this,r,i)}));var a=document.createElement("i");a.setAttribute("class","terminus-menu-icon fa fa-"+t.icon),s.appendChild(a);var u=document.createTextNode(t.navText);s.appendChild(u),n.appendChild(s)}},u.prototype.getConnectExplorer=function(e){var t=document.createElement("BR");e.appendChild(t);var r=this.getSignature("connect");e.appendChild(r),e.appendChild(n.getHeaderDom("Parameters"));t=document.createElement("BR");return e.appendChild(t),this.getForm("",e,!0,"connect","URL : server_url"),e},u.prototype.getDatabaseExplorer=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var i in r.setAttribute("class","terminus-ul-horizontal"),a.subNav.database)a.subNav.database.hasOwnProperty(i)&&this.createSubNavs("database",a.subNav.database[i],e,t,r);e.appendChild(r);var n=this.getDatabaseDom(a.subNav.database.createDatabase.action,t);return e.appendChild(n),e},u.prototype.getSchemaApi=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var i in r.setAttribute("class","terminus-ul-horizontal"),a.subNav.schema)a.subNav.schema.hasOwnProperty(i)&&this.createSubNavs("schema",a.subNav.schema[i],e,t,r);e.appendChild(r);var n=this.getShowApiDom(a.subNav.schema.getSchema.action,t);return e.appendChild(n),e},u.prototype.getDocumentApi=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var i in r.setAttribute("class","terminus-ul-horizontal"),a.subNav.document)a.subNav.document.hasOwnProperty(i)&&this.createSubNavs("document",a.subNav.document[i],e,t,r);e.appendChild(r);var n=this.getShowApiDom(a.subNav.document.viewDocument.action,t);return e.appendChild(n),e},u.prototype.getQueryApi=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var i in r.setAttribute("class","terminus-ul-horizontal"),a.subNav.query)a.subNav.query.hasOwnProperty(i)&&this.createSubNavs("query",a.subNav.query[i],e,t,r);e.appendChild(r);var n=this.getQueryApiDom(a.subNav.query.select.action,t);return e.appendChild(n),e},u.prototype.getDatabaseDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var i=this.getSignature(e);t.appendChild(i),t.appendChild(n.getHeaderDom("Parameters"));r=document.createElement("BR");return t.appendChild(r),"create"==e?this.getForm(null,t,!1,e,"URL : server/database_id"):this.getForm(null,t,!0,e,"URL : server/database_id"),t},u.prototype.getServerForm=function(){var e=document.createElement("form");e.setAttribute("class","terminus-form-horizontal row-fluid"),(r=document.createElement("div")).setAttribute("class","terminus-control-group"),e.appendChild(r);var t=document.createElement("label");t.setAttribute("class","terminus-control-label"),t.setAttribute("for","basicinput"),t.innerHTML="Url:",r.appendChild(t),(s=document.createElement("div")).setAttribute("class","terminus-controls"),r.appendChild(s);var r,i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("id","basicinput"),i.setAttribute("class","terminus-input-text"),i.setAttribute("placeholder","URL : server_url"),this.val&&(i.value=this.val),s.appendChild(i),(r=document.createElement("div")).setAttribute("class","terminus-control-group"),e.appendChild(r);var s,a=document.createElement("label");a.setAttribute("class","terminus-control-label"),a.setAttribute("for","basicinput"),a.innerHTML="Key:",r.appendChild(a),(s=document.createElement("div")).setAttribute("class","terminus-controls"),r.appendChild(s);var u=document.createElement("input");u.setAttribute("type","text"),u.setAttribute("id","basicinput"),u.setAttribute("class","span8 terminus-input-text"),u.setAttribute("placeholder","Key : key"),this.val&&(u.value=this.val),s.appendChild(u);var c=document.createElement("button");c.setAttribute("class","terminus-btn terminus-send-api-btn"),c.setAttribute("type","button"),c.innerHTML="Send Api";var l=document.createElement("div");e.appendChild(c),e.appendChild(l);var d=this;return c.addEventListener("click",(function(){var e=function(){var e={};return e.url=i.value,e.key=u.value,e}();d.client.connect(e.url,e.key).then((function(e){o.removeChildren(l);n.showHttpResult(e,"connect",l,d.ui)}))})),e},u.prototype.getDatabaseExplorer=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var i in r.setAttribute("class","terminus-ul-horizontal"),a.subNav.database)a.subNav.database.hasOwnProperty(i)&&this.createSubNavs("database",a.subNav.database[i],e,t,r);e.appendChild(r);var n=this.getDatabaseDom(a.subNav.database.createDatabase.action,t);return e.appendChild(n),e},u.prototype.getShowApiDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var i=this.getSignature(e);t.appendChild(i),t.appendChild(n.getHeaderDom("Parameters"));r=document.createElement("BR");switch(t.appendChild(r),e){case"getSchema":this.getForm("schema",t,!0,e,"URL : server/database_id");break;case"getClassFrames":this.getForm("getClassFrames",t,!0,e,"URL : server/database_id");break;case"updateSchema":this.getForm("schema",t,!1,e,"URL : server/database_id");break;case"viewDocument":case"deleteDocument":this.getForm("document",t,!0,e,"URL : server/database_id/document/document_id");break;case"createDocument":case"updateDocument":this.getForm("document",t,!1,e,"URL : server/database_id/document/document_id");break;default:console.log("Invalid Api Call on form")}return t},u.prototype.getQueryApiDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var i=this.getSignature(e);t.appendChild(i),t.appendChild(n.getHeaderDom("Parameters"));r=document.createElement("BR");return t.appendChild(r),this.getForm("query",t,!1,e,"URL : server/database_id"),t},u.prototype.getForm=function(e,t,r,i,s){var o=document.createElement("form");o.setAttribute("class","terminus-form-horizontal row-fluid"),(p=document.createElement("div")).setAttribute("class","terminus-control-group"),o.appendChild(p);var a=document.createElement("label");a.setAttribute("class","terminus-control-label"),a.setAttribute("for","basicinput"),a.innerHTML="Url:",p.appendChild(a),(m=document.createElement("div")).setAttribute("class","terminus-controls"),p.appendChild(m);var u=document.createElement("input");switch(u.setAttribute("type","text"),u.setAttribute("id","basicinput"),u.setAttribute("class","span8 terminus-input-text"),u.setAttribute("placeholder",s),m.appendChild(u),e){case"getClassFrames":(p=document.createElement("div")).setAttribute("class","terminus-control-group"),o.appendChild(p);var c=document.createElement("label");c.setAttribute("class","terminus-control-label"),c.setAttribute("for","basicinput"),c.innerHTML="Url/ ID:",p.appendChild(c),(m=document.createElement("div")).setAttribute("class","terminus-controls"),p.appendChild(m);var l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("id","basicinput"),l.setAttribute("class","span8 terminus-input-text"),l.setAttribute("placeholder","Url or ID of document class"),m.appendChild(l)}(p=document.createElement("div")).setAttribute("class","terminus-control-group"),o.appendChild(p);var d=document.createElement("label");d.setAttribute("class","terminus-control-label"),d.setAttribute("for","basicinput"),d.innerHTML="Key:",p.appendChild(d),(m=document.createElement("div")).setAttribute("class","terminus-controls"),p.appendChild(m);var h=document.createElement("input");if(h.setAttribute("type","text"),h.setAttribute("id","basicinput"),h.setAttribute("class","span8 terminus-input-text"),h.setAttribute("placeholder","Key"),m.appendChild(h),!r){var p;(p=document.createElement("div")).setAttribute("class","terminus-control-group"),o.appendChild(p);var m,f=document.createElement("label");f.setAttribute("class","terminus-control-label"),f.setAttribute("for","basicinput"),"query"==e&&(f.innerHTML="Query:"),f.innerHTML="Document:",p.appendChild(f),(m=document.createElement("div")).setAttribute("class","terminus-controls"),p.appendChild(m);var y=document.createElement("textarea");m.appendChild(y),y.setAttribute("class","terminus-api-explorer-text-area"),n.stylizeEditor(this.ui,y,"api-doc","javascript")}t.appendChild(o);var g={};g.url=u,g.key=h,"getClassFrames"==e&&(g.docUrl=l),r||(g.doc=y);var v=this.getApiSendButton(i,g);t.appendChild(v)},u.prototype.getApiForm=function(e,t){var r=document.createElement("form");r.setAttribute("class","terminus-form-horizontal row-fluid");var i=document.createElement("button");i.setAttribute("class","terminus-btn terminus-send-api-btn"),i.setAttribute("type","button"),i.innerHTML="Send Api",r.appendChild(i);var s=document.createElement("div");r.appendChild(s);var a=this;switch(e){case"getSchema":i.addEventListener("click",(function(){var e={};e["terminus:encoding"]=t.enc.value,e["terminus:user_key"]="terminus:turtle";var r=t.url.value;a.client.getSchema(r,e).then((function(e){o.removeChildren(s);n.showHttpResult(e,"getSchema",s,a.ui)}))}));break;case"updateSchema":i.addEventListener("click",(function(){var e=this;opts={},opts["terminus:encoding"]=t.enc.value,opts["terminus:user_key"]="terminus:turtle";var r=t.url.value;a.client.connectionConfig.connected_mode=!1,a.client.updateSchema(r,t.doc.value,opts).then((function(t){var r=document.createElement("textarea");r.setAttribute("readonly",!0),r.innerHTML=t,e.parentNode.appendChild(r),n.stylizeEditor(this.ui,txtar,"schema","turtle")}))}));break;case"viewDocument":i.addEventListener("click",(function(){var r=t.value,i={format:"turtle"};a.client.getDocument(r,i).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"deleteDocument":i.addEventListener("click",(function(){var r=t.value;a.client.deleteDocument(r,{}).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"createDocument":i.addEventListener("click",(function(){var r=t.schemaUrlDom.value,i=t.htmlEditor.getValue();opts={},a.client.createDocument(r,i,opts).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"updateDocument":i.addEventListener("click",(function(){var r=t.schemaUrlDom.value,i=t.htmlEditor.getValue();opts={},opts.editmode="replace",opts.format="json",a.client.updateDocument(r,i,opts).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}))}var u=document.createElement("BR");r.appendChild(u);u=document.createElement("BR");return r.appendChild(u),r},u.prototype.getApiSendButton=function(e,t){var r=document.createElement("form");r.setAttribute("class","terminus-form-horizontal row-fluid");var i=document.createElement("button");i.setAttribute("class","terminus-btn terminus-send-api-btn"),i.setAttribute("type","button"),i.innerHTML="Send Api",r.appendChild(i);var s=document.createElement("div");r.appendChild(s);var a=this;switch(e){case"connect":i.addEventListener("click",(function(){a.client.connect(t.url.value,t.key.value).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"create":i.addEventListener("click",(function(r){a.client.createDatabase(t.url.value,JSON.parse(t.doc.value),t.key.value).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"delete":i.addEventListener("click",(function(){a.client.deleteDatabase(t.url.value,t.key.value).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"getSchema":i.addEventListener("click",(function(){var r={"terminus:encoding":"terminus:turtle"};r["terminus:user_key"]=t.key.value;var i=t.url.value;a.client.getSchema(i,r).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"updateSchema":i.addEventListener("click",(function(){opts={},opts["terminus:encoding"]="terminus:turtle",opts["terminus:user_key"]=t.key.value;t.doc.value;var r=t.url.value;a.client.connectionConfig.connected_mode=!1,a.client.updateSchema(r,t.doc.value,opts).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"getClassFrames":i.addEventListener("click",(function(r){t.url.value;opts={},opts.explorer=!0,a.client.getClassFrame(t.url,JSON.parse(t.docUrl.value),opts).then((function(t){var r=buttonSelf.parentNode;n.showHttpResult(t,e,r,a.ui)}))}));break;case"viewDocument":i.addEventListener("click",(function(){var r=t.url.value,i={"terminus:encoding":"jsonld"};i["terminus:user_key"]=t.key.value,a.client.getDocument(r,i).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"deleteDocument":i.addEventListener("click",(function(){var r=t.url.value,i={};i.key=t.key.value,a.client.deleteDocument(r,i).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"createDocument":i.addEventListener("click",(function(){var r=t.url.value,i=t.doc.value;opts={},opts["terminus:encoding"]="jsonld",opts["terminus:user_key"]=t.key.value,a.client.createDocument(r,JSON.parse(i),opts).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"updateDocument":i.addEventListener("click",(function(){var r=t.url.value,i=t.doc.value;opts={},opts["terminus:encoding"]="jsonld",opts["terminus:user_key"]=t.key.value,a.client.updateDocument(r,JSON.parse(i),opts).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"select":i.addEventListener("click",(function(){var r={};r.key=t.key.value;var i=JSON.parse(t.doc.value);a.client.select(t.url.value,i,r).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;case"update":i.addEventListener("click",(function(){var r={};r.key=t.key.value;var i=JSON.parse(t.doc.value);a.client.update(t.url.value,i,r).then((function(t){o.removeChildren(s);n.showHttpResult(t,e,s,a.ui)}))}));break;default:console.log("Invalid Api call on button")}var u=document.createElement("BR");r.appendChild(u);u=document.createElement("BR");return r.appendChild(u),r},u.prototype.getSignature=function(e){var t=document.createElement("div"),r=document.createElement("button");r.appendChild(document.createTextNode("Click to read API Signature")),r.setAttribute("class","terminus-collapsible"),ic=document.createElement("i"),ic.setAttribute("class","terminus-cheveron-float fa fa-chevron-down"),r.appendChild(ic),t.appendChild(r);var i=document.createElement("BR");t.appendChild(i);var s=document.createElement("div");s.setAttribute("class","terminus-collapsible-content content");var o=n.getFunctionSignature(e),a=document.createTextNode(o.spec),u=document.createElement("pre");u.setAttribute("class","terminus-api-signature-pre"),u.appendChild(a);a=document.createTextNode(o.descr);u.appendChild(a);i=document.createElement("BR");u.appendChild(i);i=document.createElement("BR");u.appendChild(i);a=document.createTextNode(o.result);u.appendChild(a),s.appendChild(u),t.appendChild(s);i=document.createElement("BR");return t.appendChild(i),r.addEventListener("click",(function(){n.tolggleContent(ic,s)})),t},e.exports=u},function(e,t,r){
/**
 * @file Javascript WOQL client object
 * @license Apache Version 2
 * @summary Simple Javascript Client for accessing the Terminus DB API
 */
const i=r(11),n=r(48),s=r(8),o=r(21),a=r(22),u=r(2);function c(e){const t=e&&e.key?e.key:void 0;this.use_fetch=!1,this.return_full_response=!1,this.connectionConfig=new a(e),this.connection=new o(this.connectionConfig,t)}c.CONST=i,c.prototype.connect=function(e,t,r){if(e&&!this.connectionConfig.setServer(e))return Promise.reject(new URIError(s.getInvalidURIMessage(e,i.CONNECT)));const n=this.connectionConfig.serverURL();return t&&this.connection.setClientKey(n,t),this.connectionConfig.server=!1,this.dispatch(n,i.CONNECT).then(e=>(this.connectionConfig.server=n,r&&(this.connectionConfig.dbid=r),this.connection.addConnection(n,e),e))},c.prototype.createDatabase=function(e,t,r){if(e&&!this.connectionConfig.setDB(e))return Promise.reject(new URIError(s.getInvalidURIMessage(e,"Create Database")));if(t&&t["@id"]&&!this.connectionConfig.setDB(t["@id"],t["@context"]))return Promise.reject(new URIError(s.getInvalidURIMessage(t["@id"],"Create Database")));t=this.makeDocumentConsistentWithURL(t,this.connectionConfig.dbURL());const n={};r&&(n.key=r);const o=this.addOptionsToDocument(t,n);return this.dispatch(this.connectionConfig.dbURL("create"),i.CREATE_DATABASE,o)},c.prototype.deleteDatabase=function(e,t){if(e&&!this.connectionConfig.setDB(e))return Promise.reject(new URIError(s.getInvalidURIMessage(e,"Delete Database")));const r=this.connectionConfig.dbid,n={};t&&(n.key=t);const o=this;return this.dispatch(`${this.connectionConfig.dbURL()}`,i.DELETE_DATABASE,n).then(e=>(o.connection.removeDB(r),e))},c.prototype.getSchema=function(e,t){return e&&!this.connectionConfig.setSchemaURL(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Get Schema"))):this.dispatch(this.connectionConfig.schemaURL(),i.GET_SCHEMA,t)},c.prototype.updateSchema=function(e,t,r){return e&&!this.connectionConfig.setSchemaURL(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Update Schema"))):(t=this.addOptionsToDocument(t,r),this.dispatch(this.connectionConfig.schemaURL(),"update_schema",t))},c.prototype.createDocument=function(e,t,r){return e&&!this.connectionConfig.setDocument(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Create Document"))):t&&t["@id"]&&!this.connectionConfig.setDocument(t["@id"],t["@context"])?Promise.reject(new URIError(s.getInvalidURIMessage(t["@id"],"Create Document"))):(t=this.addOptionsToDocument(this.makeDocumentConsistentWithURL(t,this.connectionConfig.docURL()),r),this.dispatch(this.connectionConfig.docURL(),"create_document",t))},c.prototype.getDocument=function(e,t){return!e||this.connectionConfig.setDocument(e)&&this.connectionConfig.docid?this.dispatch(this.connectionConfig.docURL(),"get_document",t):Promise.reject(new URIError(s.getInvalidURIMessage(e,"Get Document")))},c.prototype.updateDocument=function(e,t,r){return e&&!this.connectionConfig.setDocument(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Update Document"))):t&&t["@id"]&&!this.connectionConfig.setDocument(t["@id"],t["@context"])?Promise.reject(new URIError(s.getInvalidURIMessage(t["@id"],"Update Document"))):(t=this.addOptionsToDocument(this.makeDocumentConsistentWithURL(t,this.connectionConfig.docURL()),r),this.dispatch(this.connectionConfig.docURL(),"update_document",t))},c.prototype.deleteDocument=function(e,t){return!e||this.connectionConfig.setDocument(e)&&this.connectionConfig.docid?this.dispatch(this.connectionConfig.docURL(),"delete_document",t):Promise.reject(new URIError(s.getInvalidURIMessage(e,"Delete Document")))},c.prototype.select=function(e,t,r){if(e&&!this.connectionConfig.setQueryURL(e))return Promise.reject(new URIError(s.getInvalidURIMessage(e,"Select")));let n={"terminus:query":JSON.stringify(t)};return n=this.addOptionsToWOQL(n,r),this.dispatch(this.connectionConfig.queryURL(),i.WOQL_SELECT,n)},c.prototype.update=function(e,t,r){return e&&!this.connectionConfig.setQueryURL(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Update"))):(t=this.addOptionsToWOQL(t,r),this.dispatch(this.connectionConfig.queryURL(),"woql_update",t))},c.prototype.getClassFrame=function(e,t,r){return e&&!this.connectionConfig.setClassFrameURL(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Get Class Frame"))):(r||(r={}),r["terminus:class"]=t,this.dispatch(this.connectionConfig.frameURL(),"class_frame",r))},c.prototype.addOptionsToWOQL=function(e,t){return t&&t.key&&(e.key=t.key),e},c.prototype.addOptionsToDocument=function(e,t){const r={};return r["@context"]=e["@context"],r["@context"]&&e["@id"]&&(r["@context"]._=`${e["@id"]}/`),t&&t["terminus:encoding"]&&"terminus:turtle"===t["terminus:encoding"]?(r["terminus:turtle"]=e,r["terminus:schema"]=this.connectionConfig.schemaURL(),delete r["terminus:turtle"]["@context"]):(r["terminus:document"]=e,delete r["terminus:document"]["@context"]),r["@type"]="terminus:APIUpdate",t&&t["terminus:user_key"]&&(r["terminus:user_key"]=t["terminus:user_key"]),t&&t.key&&(r["terminus:user_key"]=t.key),r},c.prototype.addKeyToPayload=function(e,t){return"object"!=typeof e&&(e={}),e.key?(e["terminus:user_key"]=e.key,delete e.key):this.connection.getClientKey()?e["terminus:user_key"]=this.connection.getClientKey():this.connection.getClientKey(t)&&(e["terminus:user_key"]=this.connection.getClientKey(t)),e},c.prototype.makeDocumentConsistentWithURL=function(e,t){return e["@id"]=t,e},c.prototype.dispatch=function(e,t,r){return this.connectionConfig.includeKey()&&(r=this.addKeyToPayload(r,e)),this.use_fetch?this.dispatchFetch(e,t,r):n(e,t,r)},c.prototype.dispatchFetch=function(e,t,r){const n={redirect:"follow",referrer:"client"};let s={};switch(r&&r["terminus:user_key"]&&(s={Authorization:`Basic ${btoa(`:${r["terminus:user_key"]}`)}`},delete r["terminus:user_key"]),t){case i.DELETE_DATABASE:case i.DELETE_DOCUMENT:Object.keys(r).length>0&&(e+=`?${u.URIEncodePayload(r)}`),n.method="DELETE",n.cache="no-cache";break;case i.CREATE_DATABASE:case i.UPDATE_SCHEMA:case i.CREATE_DOCUMENT:case i.UPDATE_DOCUMENT:case i.WOQL_UPDATE:n.method="POST",n.cache="no-cache",s["Content-Type"]="application/json",n.body=JSON.stringify(r);break;case i.GET_SCHEMA:case i.CONNECT:case i.CLASS_FRAME:case i.WOQL_SELECT:case i.GET_DOCUMENT:default:n.method="GET",Object.keys(r).length>0&&(e+=`?${u.URIEncodePayload(r)}`)}const o=this;return Object.keys(s).length>0&&(n.headers=new Headers(s)),fetch(e,n).then(t=>o.return_full_response?t:t.ok?t.json():(o.error=o.parseAPIError(t),Promise.reject(new Error(o.getAPIErrorMessage(e,n,o.error)))))},e.exports=c},function(e,t,r){(function(t){
/**
 * @file Dispatch Request
 * @license Apache Version 2
 * @summary Functions for dispatching API requests via the axios library. 
 */
const i=r(54),n=r(2),s=r(11),o=r(8);function a(e){try{return btoa(e)}catch(r){return t.from(e).toString("base64")}}e.exports=function(e,t,r){const u={mode:"cors",redirect:"follow",referrer:"client"};switch(r&&r["terminus:user_key"]&&(u.headers={Authorization:`Basic ${a(`:${r["terminus:user_key"]}`)}`},delete r["terminus:user_key"]),t){case s.DELETE_DATABASE:case s.DELETE_DOCUMENT:if(r){const t=n.URIEncodePayload(r);t&&(e+=`?${t}`)}return i.delete(e,u).then(e=>e.data).catch(t=>{throw new Error(o.getAPIErrorMessage(e,u,t))});case s.CREATE_DATABASE:case s.UPDATE_SCHEMA:case s.CREATE_DOCUMENT:case s.UPDATE_DOCUMENT:case s.WOQL_UPDATE:return u.headers=u.headers?u.headers:{},u.headers["Content-Type"]="application/json",i.post(e,JSON.stringify(r),u).then(e=>e.data).catch(t=>{const r=new Error(o.getAPIErrorMessage(e,u,t));throw t.response&&t.response.data&&(r.data=t.response.data),r});case s.GET_SCHEMA:case s.CONNECT:case s.CLASS_FRAME:case s.WOQL_SELECT:case s.GET_DOCUMENT:default:if(r){const t=n.URIEncodePayload(r);t&&(e+=`?${t}`)}return i.get(e,u).then(e=>e.data).catch(t=>{let r=new Error(o.getAPIErrorMessage(e,u,t));throw t.response&&t.response.data&&(r.data=t.response.data),r})}}}).call(this,r(49).Buffer)},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=r(51),n=r(52),s=r(53);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,r)}function c(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,r,i):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(t,r),n=(e=a(e,i)).write(t,r);n!==i&&(e=e.slice(0,n));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|p(t.length);return 0===(e=a(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):h(e,t);if("Buffer"===t.type&&s(t.data))return h(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|p(t.length);e=a(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(e).length;default:if(i)return I(e).length;t=(""+t).toLowerCase(),i=!0}}function f(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return S(this,t,r);case"utf8":case"utf-8":return D(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return L(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function y(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function g(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=u.from(t,i)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,i,n);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,i,n){var s,o=1,a=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var l=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){for(var d=!0,h=0;h<u;h++)if(c(e,s+h)!==c(t,h)){d=!1;break}if(d)return s}return-1}function b(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[r+o]=a}return o}function w(e,t,r,i){return F(I(t,e.length-r),e,r,i)}function C(e,t,r,i){return F(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function x(e,t,r,i){return C(e,t,r,i)}function _(e,t,r,i){return F(B(t),e,r,i)}function O(e,t,r,i){return F(function(e,t){for(var r,i,n,s=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),i=r>>8,n=r%256,s.push(n),s.push(i);return s}(t,e.length-r),e,r,i)}function L(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function D(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var s,o,a,u,c=e[n],l=null,d=c>239?4:c>223?3:c>191?2:1;if(n+d<=r)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(s=e[n+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=e[n+1],o=e[n+2],128==(192&s)&&128==(192&o)&&(u=(15&c)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[n+1],o=e[n+2],a=e[n+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l),n+=d}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=E));return r}(i)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,i){return l(t),t<=0?a(e,t):void 0!==r?"string"==typeof i?a(e,t).fill(r,i):a(e,t).fill(r):a(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=u.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?D(this,0,e):f.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,i,n){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(n>>>=0)-(i>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(i,n),l=e.slice(t,r),d=0;d<a;++d)if(c[d]!==l[d]){s=c[d],o=l[d];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},u.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return C(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function T(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function A(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function S(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",s=t;s<r;++s)n+=V(e[s]);return n}function Q(e,t,r){for(var i=e.slice(t,r),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,i,n,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function j(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,s=Math.min(e.length-r,2);n<s;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function k(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,s=Math.min(e.length-r,4);n<s;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function R(e,t,r,i,n,s){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(e,t,r,i,s){return s||R(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function W(e,t,r,i,s){return s||R(e,0,r,8),n.write(e,t,r,i,52,8),r+8}u.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var n=t-e;r=new u(n,void 0);for(var s=0;s<n;++s)r[s]=this[s+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},u.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=t,n=1,s=this[e+--i];i>0&&(n*=256);)s+=this[e+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),n.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),n.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),n.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),n.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return N(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return N(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return W(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return W(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,s=i-r;if(this===e&&r<t&&t<i)for(n=s-1;n>=0;--n)e[n+t]=this[n+r];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},u.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var o=u.isBuffer(e)?e:I(new u(e,i).toString()),a=o.length;for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function I(e,t){var r;t=t||1/0;for(var i=e.length,n=null,s=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function B(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(50))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,i=c(e),o=i[0],a=i[1],u=new s(function(e,t,r){return 3*(t+r)/4-r}(0,o,a)),l=0,d=a>0?o-4:o;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,s=[],o=0,a=r-n;o<a;o+=16383)s.push(l(e,o,o+16383>a?a:o+16383));1===n?(t=e[r-1],s.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],s.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return s.join("")};for(var i=[],n=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)i[a]=o[a],n[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var n,s,o=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(i[(s=n)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,i,n){var s,o,a=8*n-i-1,u=(1<<a)-1,c=u>>1,l=-7,d=r?n-1:0,h=r?-1:1,p=e[t+d];for(d+=h,s=p&(1<<-l)-1,p>>=-l,l+=a;l>0;s=256*s+e[t+d],d+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=i;l>0;o=256*o+e[t+d],d+=h,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),s-=c}return(p?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,r,i,n,s){var o,a,u,c=8*s-n-1,l=(1<<c)-1,d=l>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,m=i?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+d>=1?h/u:h*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(t*u-1)*Math.pow(2,n),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,n),o=0));n>=8;e[r+p]=255&a,p+=m,a/=256,n-=8);for(o=o<<n|a,c+=n;c>0;e[r+p]=255&o,p+=m,o/=256,c-=8);e[r+p-m]|=128*f}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){e.exports=r(55)},function(e,t,r){"use strict";var i=r(3),n=r(13),s=r(57),o=r(19);function a(e){var t=new s(e),r=n(s.prototype.request,t);return i.extend(r,s.prototype,t),i.extend(r,t),r}var u=a(r(16));u.Axios=s,u.create=function(e){return a(o(u.defaults,e))},u.Cancel=r(20),u.CancelToken=r(69),u.isCancel=r(15),u.all=function(e){return Promise.all(e)},u.spread=r(70),e.exports=u,e.exports.default=u},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,r){"use strict";var i=r(3),n=r(14),s=r(58),o=r(59),a=r(19);function u(e){this.defaults=e,this.interceptors={request:new s,response:new s}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[o,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},u.prototype.getUri=function(e){return e=a(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}})),e.exports=u},function(e,t,r){"use strict";var i=r(3);function n(){this.handlers=[]}n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},function(e,t,r){"use strict";var i=r(3),n=r(60),s=r(15),o=r(16),a=r(67),u=r(68);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!a(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=n(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=n(t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=n(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var i=r(3);e.exports=function(e,t,r){return i.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t,r){"use strict";var i=r(3);e.exports=function(e,t){i.forEach(e,(function(r,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[i])}))}},function(e,t,r){"use strict";var i=r(18);e.exports=function(e,t,r){var n=r.config.validateStatus;!n||n(r.status)?e(r):t(i("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(e,t,r){"use strict";e.exports=function(e,t,r,i,n){return e.config=t,r&&(e.code=r),e.request=i,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var i=r(3),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,o={};return e?(i.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),r=i.trim(e.substr(s+1)),t){if(o[t]&&n.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o}},function(e,t,r){"use strict";var i=r(3);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var i=e;return t&&(r.setAttribute("href",i),i=r.href),r.setAttribute("href",i),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=i.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var i=r(3);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,r,n,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),i.isString(n)&&a.push("path="+n),i.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var i=r(20);function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new i(e),t(r.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){const i=r(27),n=r(29),s=r(31),o=r(33),a=r(35),u=r(37),c=r(5),l=r(7),d={table:function(){return new i},chart:function(){return new o},graph:function(){return new s},chooser:function(){return new n},stream:function(){return new a},document:function(){return new u},loadConfig:function(e){if(e.table)(t=new i).loadJSON(e.table,e.rules);else if(e.chooser){(t=new n).loadJSON(e.chooser,e.rules)}else if(e.graph){(t=new s).loadJSON(e.graph,e.rules)}else if(e.chart){(t=new o).loadJSON(e.chart,e.rules)}else if(e.stream){(t=new a).loadJSON(e.stream,e.rules)}else if(e.frame){var t;(t=new u).loadJSON(e.frame,e.rules)}return t},rule:function(e){return e&&"frame"==e?new l:new c},pattern:function(e){return e&&"woql"==e?(new c).pattern:(new l).pattern},matchRow:function(e,t,r,i){return(new c).matchRow(e,t,r,i)},matchColumn:function(e,t,r){return(new c).matchColumn(e,t,r)},matchCell:function(e,t,r,i,n){return(new c).matchCell(e,t,r,i,n)},matchNode:function(e,t,r,i,n){return(new c).matchNode(e,t,r,i,n)},matchEdge:function(e,t,r,i,n){return(new c).matchPair(e,t,r,i,n)},matchFrame:function(e,t,r){return(new l).testRules(e,t,r)}};e.exports=d},function(e,t,r){
/**
 * @file Javascript Terminus Document Classes
 * @license Apache Version 2
 * @summary Helper classes for accessing documents returned by the Terminus DB API programmatically
 * 
 * Usage: let doc = new TerminusDocument(client);
 * 
 * These set the objects document property and return promises:
 *  
 * doc.loadDocument(URL) //.then(() => console.log(this.document));
 * doc.loadComplete(URL, CLS) // .then(() => console.log(this.document))
 * doc.loadSchema(cls) //.then(() => console.log(this.document))
 * 
 * These just set the object's document property 
 * doc.loadJSON(json_frames, cls) //console.log(this.document)
 * doc.loadDataFrames(json_frames, cls)
 * doc.loadClassFrames(json_frames, cls)
 * 
 */
const i=r(2),n=r(7);function s(e,t,r,i,n){this.empty(),this.cls=e,r&&"object"==typeof r&&this.loadClassFrames(r),t&&"object"==typeof t?(this.originalFrames=t,this.loadDataFrames(t)):this.originalFrames=!1,this.parent=i,this.parentframe=n,this.newDoc=!1}function o(e,t,r){this.predicate=e,this.cframe=t,this.parent=r,this.values=[]}function a(e,t,r){this.err=!1,this.parent=t,this.subjid=!!t&&t.subjid,this.index=r,e&&this.load(e)}function u(e,t){this.err=!1,this.parent=t,this.subjid=!!t&&t.subjid,e&&this.load(e)}function c(e){this.min=0,this.max=0,e&&this.loadRestriction(e)}s.prototype.loadClassFrames=function(e){for(let t=0;t<e.length;t+=1){e[t]["@context"]&&(this.jsonld_context=e[t]["@context"]);const r=new u(e[t]);if(r.isValid()&&(this.classframes||(this.classframes={}),void 0===this.classframes[e[t].property]&&(this.classframes[e[t].property]=[]),this.classframes[e[t].property]=r,r.isObject()&&this.properties[e[t].property]))for(let r=0;r<this.properties[e[t].property].values.length;r+=1)this.properties[e[t].property].values[r].loadClassFrames(e[t].frame)}return this},s.prototype.hasSchema=function(){return!i.empty(this.classframes)},s.prototype.loadDataFrames=function(e){if("object"==typeof e&&e.length){this.originalFrames||(this.originalFrames=e),!this.subjid&&e[0].domainValue&&(this.subjid=e[0].domainValue);for(let t=0;t<e.length;t+=1){e[t]["@context"]&&(this.jsonld_context=e[t]["@context"]);let r=this.getPropertyClassFrame(e[t].property,e[t]);r&&r.isClassChoice()?(r=r.getChosenClassFrame(e[t].range))||console.log(`no choice frame ${e[t].range}`):r&&r.isLogic()&&(r=r.getChosenFrame(e[t])),r&&(void 0===this.properties[e[t].property]&&(this.properties[e[t].property]=new o(e[t].property,r,this)),this.properties[e[t].property].addFrame(e[t]))}return this}},s.prototype.getAsFrame=function(e,t){if(this.parentframe)return this.parentframe;const r={type:"objectProperty",property:e};r.range=this.cls,r.domain=t.cls,r.domainValue=t.subjid,r.frame=[];for(const e of Object.keys(this.properties))r.frame=r.frame.concat(r.frame,this.properties[e].getAsFrames());return r},s.prototype.getAsFrames=function(e,t){var r=[];for(const e of Object.keys(this.properties))r=r.concat(r,this.properties[e].getAsFrames());return r},s.prototype.empty=function(){this.properties={},this.restrictions={},this.subjid=!1,this.cls=!1},s.prototype.reset=function(e){if(e){const t=[];for(let r=0;r<this.originalFrames.length;r+=1)this.originalFrames[r].property===e&&t.push(this.originalFrames[r]);this.properties[e]&&(this.properties[e]=[]),this.loadDataFrames(t)}else this.restrictions={},this.properties={},this.loadDataFrames(this.originalFrames)},s.prototype.clear=function(){for(const e of Object.keys(this.properties))this.properties[e].clear();return this},s.prototype.filter=function(e,t){(new n).testRules(e,this,t);for(const r of Object.keys(this.properties))this.properties[r].filter(e,t);return this},s.prototype.getPropertyClassFrame=function(e,t){if(this.classframes&&"object"==typeof this.classframes&&"object"==typeof this.classframes[e])return this.classframes[e];if(t){return new u(t)}return!!this.properties[e]&&new u(this.properties[e].values[0])},s.prototype.getProperties=function(e){if("filled"==e||!this.classframes)return Object.keys(this.properties);if("missing"==e){const e=Object.keys(this.properties),t=Object.keys(this.classframes),r=[];for(let i=0;i<t.length;i++)-1==e.indexOf(t[i])&&-1==r.indexOf(t[i])&&r.push(t[i]);return r}return Object.keys(this.classframes)},s.prototype.getMissingPropertyList=function(){var e=this.getProperties("missing");const t=[];for(let i=0;i<e.length;i++){const n=this.getPropertyClassFrame(e[i]);if(n)var r={label:n.getLabel(),value:e[i]};else r={label:e[i],value:e[i]};t.push(r)}return t},s.prototype.getFilledPropertyList=function(){var e=this.getProperties("filled");const t=[];for(let i=0;i<e.length;i++){const n=this.getPropertyClassFrame(e[i]);if(n)var r={label:n.getLabel(),value:e[i]};else r={label:e[i],value:e[i]};t.push(r)}return t},s.prototype.fillFromSchema=function(e){e&&(this.subjid=e),e=e||i.genBNID();const t={};if(this.classframes)for(const r of Object.keys(this.classframes)){const i=this.getPropertyClassFrame(r);t[r]=new o(r,i,this),t[r].fillFromSchema(e)}this.properties=t,this.originalFrames=[];for(const e of Object.keys(this.properties))this.originalFrames.push(this.properties[e].getAsFrames());return this},s.prototype.clone=function(e){const t={},r=new s(this.cls,!1,!1,this.parent);r.classframes=this.classframes,r.subjid=e;for(const e of Object.keys(this.properties))t[e]=this.properties[e].clone();return r.properties=t,r},s.prototype.getChild=function(e,t){let r=this.getProperty(t);for(let t=0;t<r.values.length;r++)if(r.values[t].isObject()&&r.values[t].subject===e)return r.values[t];if(!t)for(const t of Object.keys(this.properties))for(let r=0;r<this.properties[t].values.length;r+=1)if(this.properties[t].values[r].subject()===e)return this.properties[t].values[r];return!1},s.prototype.addProperty=function(e,t){const r=this.getPropertyClassFrame(e);var n=!1;if(r){const s=new o(e,r,this);if(r.isObject()){r.isClassChoice()||(n=r.createEmpty(i.genBNID())),t&&(n=r.createEmptyChoice(t,i.genBNID()));const e=r.getClassChoices();e&&e.length&&(n=r.createEmptyChoice(e[0],i.genBNID()))}else n=r.createEmpty();return n&&s.addValueFrame(n),void 0===this.properties[e]&&(this.properties[e]=[]),this.properties[e].push(s),s}return!1},s.prototype.addPropertyValue=function(e,t){return this.properties[e].addValue(t)},s.prototype.removeProperty=function(e){void 0!==this.properties[e]&&delete this.properties[e]},s.prototype.removePropertyValue=function(e,t,r){const i=this.properties[e];i.removeValue(t,r),0==i.values.length&&this.removeProperty(e)},s.prototype.error=function(e){console.error(e)},s.prototype.extract=function(){var e={};for(var t in this.properties)for(var r=0;r<this.properties[t].length;r++){var n=this.properties[t][r].extract();i.empty(n)||(void 0===e[t]&&(e[t]=[]),e[t]=e[t].concat(n))}return(!i.empty(e)||!this.parent)&&this.extractJSONLD(e)},s.prototype.extractJSONLD=function(e){return e["@type"]=this.cls,"_:"!=this.subject()&&(e["@id"]=this.subject()),this.jsonld_context&&(e["@context"]=this.jsonld_context),e},s.prototype.subject=function(){return this.subjid},s.prototype.get=s.prototype.subject,s.prototype.set=function(e){this.subjid=e},s.prototype.isObject=function(){return!0},s.prototype.isProperty=function(){return!1},s.prototype.isData=function(){return!1},s.prototype.subjectClass=function(){return this.cls},s.prototype.depth=function(){return this.parent?this.parent.depth()+1:0},s.prototype.getProperty=function(e){return this.properties[e]},s.prototype.first=function(e){if(this.properties&&this.properties[e])return this.properties[e].first()},s.prototype.property=function(e){return!!this.parent&&this.parent.property()},s.prototype.parentObject=function(){return!(!this.parent||!this.parent.parent)&&this.parent.parent},s.prototype.root=function(){return!this.parent},s.prototype.renderProperties=function(){const e=this.sortProperties(),t=[];for(let r=0;r<e.length;r++)if(this.properties[e[r]].render){const i=this.properties[e[r]].render(this.properties[e[r]]);i&&t.push(i)}return t},s.prototype.sortProperties=function(){const e=Object.keys(this.properties);return this.compare?e.sort((e,t)=>this.compare(e,t,this)):e.sort((e,t)=>this.standardCompare(e,t,this))},s.prototype.standardCompare=function(e,t,r){return"rdfs:label"==e?-1:"rdfs:label"==t?1:"rdfs:comment"==e?-1:"rdfs:comment"==t?1:r.properties[e].isData()&&r.properties[t].isObject()?-1:r.properties[t].isData()&&r.properties[e].isObject()?1:0},s.prototype.cardControlAllows=function(e){if(!this.parent)return!0;if(this.parent.cframe.hasRestriction()){var t=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min&&r<=t.min)return!1}return!0},s.prototype.isUpdated=function(){var e=0;for(var t in this.properties){if(this.originalFrames[e]!=t)return!0;if(this.properties[t].isUpdated())return!0;e++}return e!=this.originalFrames.length},s.prototype.isNew=function(){return"_:"==this.subject().substring(0,2)},s.prototype.getSummary=function(){var e={status:"ok"};for(var t in this.isUpdated()&&(e.status="updated"),this.isNew()&&(e.status="new"),e.propcount=0,this.properties)e.propcount++;return e.long=e.propcount+" properties",e},o.prototype.addFrame=function(e){if(this.cframe.isData()){var t=new a(e,this,this.values.length);this.values.push(t)}else{const t=new s(this.range(),this.cframe.frame,e.frame,this,e);this.values.push(t)}},o.prototype.addValueFrame=function(e){e.parent=this,e.index=this.values.length,this.values.push(e)},o.prototype.fillFromSchema=function(e){if(this.isData()||this.isObject()&&!this.isClassChoice()){var t=[];if(this.cframe.hasRestriction()&&this.cframe.restriction.min)for(let i=0;i<this.cframe.restriction.min;i+=1){var r;(r=this.createEmpty(e)).parent=this,t.push(r)}else(r=this.createEmpty(e)).parent=this,t.push(r);this.values=t}else if(this.isClassChoice()){const e=this.cframe.getClassChoices();if(e&&e.length){const t=this.cframe.createEmptyChoice(e[0],i.genBNID());t.parent=this,this.values=[t]}}},o.prototype.isData=function(){return this.cframe.isData()},o.prototype.isObject=function(){return this.cframe.isObject()},o.prototype.isProperty=function(){return!0},o.prototype.property=function(){return this.predicate},o.prototype.extract=function(){const e=[];for(let t=0;t<this.values.length;t++){const r=this.values[t].extract();""!==r&&!1!==r&&void 0!==r&&e.push(r)}return e},o.prototype.subject=function(){return!!this.parent&&this.parent.subject()},o.prototype.subjectClass=function(){return!!this.parent&&this.parent.subjectClass()},o.prototype.depth=function(){return!!this.parent&&this.parent.depth()},o.prototype.updated=function(){return!!this.parent&&this.parent.childUpdated()},o.prototype.range=function(){return this.cframe?this.cframe.range:""},o.prototype.getLabel=function(){return this.cframe?this.cframe.getLabel():""},o.prototype.getComment=function(){return!!this.cframe&&this.cframe.getComment()},o.prototype.hasCardinalityRestriction=function(){return!!this.cframe&&this.cframe.hasRestriction()},o.prototype.getRestriction=function(){return!!this.cframe&&this.cframe.restriction},o.prototype.isClassChoice=function(){return!!this.cframe&&this.cframe.isClassChoice()},o.prototype.deletePropertyValue=function(e,t){this.parent.removePropertyValue(this.property(),e,t)},o.prototype.get=function(){for(var e=[],t=0;t<this.values.length;t++)if(this.values[t]){var r=this.values[t].get();r&&e.push(r)}return e},o.prototype.set=function(e){for(var t=0;t<this.values.length;t++)this.values[t]&&this.values[t].set(e)},o.prototype.clear=function(){for(var e=0;e<this.values.length;e++)this.values[e].clear()},o.prototype.clone=function(){const e=[],t=new o(this.predicate,this.cframe,this.parent);for(var r=0;r<this.values.length;r++)e.push(this.values[r].clone());return t.values=e,t},o.prototype.getAsFrames=function(){for(var e=[],t=0;t<this.values.length;t++)this.values[t]&&(this.isData()?e.push(this.values[t].getAsFrame()):e=e.concat(this.values[t].getAsFrames()));return e},o.prototype.createEmpty=function(){if(this.cframe.isData()){const e=this.cframe.copy();return e.set(""),e}if(this.cframe.isObject()){if(!this.cframe.isClassChoice()){return this.cframe.createEmpty(i.genBNID())}const e=this.cframe.getClassChoices();if(e&&e.length){return this.cframe.createEmptyChoice(e[0],i.genBNID())}}},o.prototype.filter=function(e,t){(new n).testRules(e,this,t);for(var r=0;r<this.values.length;r++)this.values[r].filter(e,t);return this},o.prototype.first=function(){if(this.values&&this.values[0])return this.values[0].get()},o.prototype.renderValues=function(){for(var e=this.sortValues(),t=[],r=0;r<e.length;r++)if(e[r]&&e[r].render){var i=e[r].render(e[r]);i&&t.push(i)}return t},o.prototype.sortValues=function(){return this.compare?this.values.sort((e,t)=>this.compare(e,t,this)):this.values},o.prototype.cardControlAllows=function(e){if(this.cframe.hasRestriction()){var t=this.cframe.restriction,r=this.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min)return!1}return!0},o.prototype.isUpdated=function(){return!0},a.prototype.load=function(e){if("object"!=typeof e)return void this.error("No frame passed to load");this.type=e.type,this.predicate=e.property,this.range=e.range,this.rangeValue=e.rangeValue,this.domain=e.domain,this.domainValue=e.domainValue,this.frame=e.frame,this.label=e.label,this.comment=e.comment;const{restriction:t}=e;this.restriction=!1,t&&"object"==typeof t&&(this.restriction=new c(t))},a.prototype.filter=function(e,t){(new n).testRules(e,this,t);return this},a.prototype.delete=function(){this.parent.deletePropertyValue(this.get(),this.index)},a.prototype.save=function(){this.parent&&this.parent.save()},a.prototype.reset=function(){this.set(this.originalValue)},a.prototype.clone=function(){const e=this.parent.addPropertyValue(this.get()),t=this.copy(e);t.setNew(),t.mode="edit",t.index=this.parent.values.length,this.parent.values.push(t)},a.prototype.depth=function(){return!!this.parent&&this.parent.depth()},a.prototype.property=function(){return!!this.parent&&this.parent.property()},a.prototype.subject=function(){return!!this.parent&&this.parent.subject()},a.prototype.subjectClass=function(){return!!this.parent&&this.parent.subjectClass()},a.prototype.type=function(){return!!this.range&&this.range},a.prototype.isValidType=function(e){return-1!==["datatypeProperty","objectProperty","restriction "].indexOf(e)},a.prototype.getAsFrame=function(){const e={type:this.type,property:this.property()};return this.range&&(e.range=this.range),this.rangeValue&&(e.rangeValue=this.rangeValue),this.domain&&(e.domain=this.domain),this.domainValue&&(e.domainValue=this.domainValue),this.frame&&(e.frame=this.frame),this.label&&(e.label=this.label),this.comment&&(e.comment=this.comment),e},a.prototype.hasRestriction=function(){return!!this.restriction&&this.restriction.hasCardRestriction()},a.prototype.copy=function(e){const t=new a(this,this.parent);return e&&(t.domainValue=e),t},a.prototype.getLabel=function(){let e="";return"rdfs:label"==this.predicate?"Name":"rdfs:comment"==this.predicate?"Description":(this.label&&"object"==typeof this.label&&(e=this.label["@value"]),this.label&&"string"==typeof this.label&&(e=this.label),!e&&this.property()&&(e=i.labelFromURL(this.property())),e||(e=i.labelFromURL(this.cls)),e)},a.prototype.getType=function(){return this.range?this.range:!(!this.rangeValue||!this.rangeValue.type)&&this.rangeValue.type},s.prototype.getLabel=a.prototype.getLabel,a.prototype.getComment=function(){let e="";return this.comment&&"object"==typeof this.comment&&(e=this.comment["@value"]),this.comment&&"string"==typeof this.comment&&(e=this.comment),e},s.prototype.getComment=a.prototype.getComment,a.prototype.error=function(e){return e&&(this.err=e),this.err},a.prototype.isValid=function(){return this.type&&this.isValidType(this.type)?this.predicate?this.domain?this.range?!(this.isObjectProperty()&&(!this.frame||"object"!=typeof this.frame))||(this.error("Missing Object Frame"),!1):(this.error("Missing Frame Range"),!1):(this.error("Missing Frame Domain"),!1):(this.error("Missing Frame Property"),!1):(this.error(`Missing or Illegal Frame Type ${this.type}`),!1)},a.prototype.isObjectProperty=function(){return"objectProperty"===this.type},a.prototype.isDatatypeProperty=function(){return"datatypeProperty"===this.type},a.prototype.isLogic=function(){return"and"===this.type||"or"===this.type||"xor"===this.type},a.prototype.isRestriction=function(){return"restriction"===this.type},a.prototype.ftype=function(){return this.isDocument()?"document":this.isDatatypeProperty()?"data":this.isChoice()?"oneOf":this.isObject()?"object":this.isLogic()?"logic":this.isClassChoice()?"class_choice":void 0},a.prototype.isClassChoice=function(){return this.frame&&"class_choice"===this.frame.type},a.prototype.isString=function(){return this.range===i.getStdURL("xsd","string")},a.prototype.getChoiceOptions=function(){const e=[];for(let t=0;t<this.frame.elements.length;t+=1){const r={};this.frame.elements[t].label?r.label=this.frame.elements[t].label["@value"]:r.label=i.labelFromURL(this.frame.elements[t].class),r.value=this.frame.elements[t].class,e.push(r)}return e},a.prototype.lang=function(){return"en"},a.prototype.isChoice=function(){return this.frame&&"oneOf"===this.frame.type},a.prototype.isDocument=function(){return this.frame&&"document"===this.frame.type},a.prototype.isData=function(){return this.isDocument()||this.isChoice()||this.isDatatypeProperty()},a.prototype.isObject=function(){return this.isObjectProperty()&&this.frame&&!(this.isChoice()||this.isDocument())},a.prototype.isProperty=function(){return!1},a.prototype.getTypeShorthand=function(){if(this.isDocument())return"document";if(this.isChoice())return"choice";return i.getShorthand(this.getType())||this.getType()},a.prototype.get=function(){return this.contents?this.contents:this.isDatatypeProperty()&&this.rangeValue&&void 0!==this.rangeValue["@value"]?this.rangeValue["@value"]:this.isChoice()||this.isDocument()?this.frame.domainValue:""},a.prototype.set=function(e,t){t&&(e=t(e,this)),this.contents=e,(this.isChoice()||this.isDocument())&&(this.frame.domainValue=e),this.isDatatypeProperty()&&this.rangeValue&&(this.rangeValue["@value"]=e)},a.prototype.clear=function(){(this.isDocument()||this.isChoice()||this.isDatatypeProperty())&&this.set("")},a.prototype.cardControlAllows=function(e){if(this.parent.cframe.hasRestriction()){var t=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min&&r<=t.min)return!1}return!0},a.prototype.extract=function(){var e=this.get();if(""!==e&&!1!==e){if(this.isDatatypeProperty()){var t={"@value":this.get()};return this.isString()?t["@language"]=this.lang():t["@type"]=this.getType(),t}if(this.isChoice()||this.isDocument())return{"@id":e}}return e},u.prototype=a.prototype,u.prototype.loadFromObjectFrame=function(e,t){this.type="objectProperty",this.predicate=e.property,this.range=e.range,this.rangeValue=t.subjid,this.domain=e.cls,this.domainValue=e.subjid,this.label=e.getLabel(),this.comment=e.getComment(),this.restriction=e.restriction},u.prototype.createEmptyChoice=function(e,t){const r=this.getChosenClassFrames(e),i=new s(e);return t&&(i.subjid=t),i.loadClassFrames(r),i.fillFromSchema()},u.prototype.getChosenClassFrames=function(e){let t=[];for(let r=0;r<this.frame.operands.length;r+=1)for(let i=0;i<this.frame.operands[r].length;i+=1)e===this.frame.operands[r][i].domain&&(t=t.concat(this.frame.operands[r][i]));return t},u.prototype.createEmpty=function(e){if(this.isObject()){const t=new s(this.range);return e&&(t.subjid=e),t.loadClassFrames(this.frame),t.fillFromSchema()}if(this.isData()){const e=this.copy();return e.set(""),e}},u.prototype.cloneDataFrame=function(e,t){return t},u.prototype.clone=function(e,t){if(this.isObject())console.log("cannot clone class frame");else if(this.isData())return this.cloneDataFrame(e,t)},u.prototype.getClassChoices=function(){const e=[];if(this.frame.operands)for(let t=0;t<this.frame.operands.length;t+=1)for(let r=0;r<this.frame.operands[t].length;r+=1){const i=this.frame.operands[t][r].domain;i&&-1===e.indexOf(i)&&e.push(i)}return e},u.prototype.getChosenClassFrame=function(e){for(let t=0;t<this.frame.operands.length;t+=1){const r=this.frame.operands[t];if(r.length){for(let t=0;t<r.length;t+=1)if(r[t]&&e===r[t].domain){return new u(r)}}else if(r.range&&e===r.range){return new u(r)}}return!1},u.prototype.getChosenFrame=function(e){return e},c.prototype.hasCardRestriction=function(){return 0!==this.min||0!==this.max},c.prototype.loadRestriction=function(e){if(void 0!==e.cardinality)this.max=e.cardinality,this.min=e.cardinality;else if(void 0!==e.maxCardinality)this.max=e.maxCardinality;else if(void 0!==e.minCardinality)this.min=e.minCardinality;else if(void 0!==e.type&&"and"===e.type&&"object"==typeof e.operands)for(let t=0;t<e.operands.length;t+=1){const r=new c(e.operands[t]);0===this.max&&r.max>0?this.max=r.max:this.max>0&&r.max>0&&r.max<this.max&&(this.max=r.max),0===this.min&&r.min>0?this.min=r.min:this.min>0&&r.min>0&&r.min>this.min&&(this.min=r.min)}},e.exports=s},function(e,t,r){function i(e,t,r){this.textdom=e,this.mode=t,function(e){for(var t in e)return!1;return!0}(r)&&(this.darkMode=r.darkMode),this.jsonldCheck(t)&&(this.mode="javascript")}i.prototype.colorizeTextArea=function(e){var t=CodeMirror.fromTextArea(this.textdom,{mode:this.mode,firstLineNumber:1,lineNumbers:!0,styleActiveLine:!0,lineWrapping:!0,smartIndent:!0,indentWithTabs:!0,newlineAndIndent:!0,autoCloseBrackets:!0,matchBrackets:{afterCursor:!0},extraKeys:{"Ctrl-F":"find","Ctrl-Q":function(e){e.foldCode(e.getCursor())}},refresh:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]});return t.foldCode(CodeMirror.Pos(13,0)),this.setCodemirrorSize(t,e),t.defaultCharWidth("20px"),t.setOption("theme","erlang-dark"),t},i.prototype.setCodemirrorSize=function(e,t){switch(t){case"query":e.setSize("auto","400");break;case"schema":e.setSize("auto","1550");break;case"document":e.setSize("765","500");break;case"api-doc":e.setSize("800","500");break;case"doc-json":e.setSize("1410","auto");break;case"doc-json-create":e.setSize("1410","500")}},i.prototype.updateTextArea=function(e){e.save(),setTimeout((function(){e.refresh()}),1),e.on("change",(function(){e.save()}))},i.prototype.colorizePre=function(){CodeMirror.runMode(this.textdom.innerText,this.mode,this.textdom);var e="cm-s-erlang-dark";return this.textdom.setAttribute("class","CodeMirror CodeMirror-wrap "+e+" terminus-wrap-text terminus-wrapper-height "),this.textdom},i.prototype.jsonldCheck=function(e){if("jsonld"==e)return!0},e.exports=i},function(e,t,r){var n=r(4),s=r(1),o=r(0),a=r(9);function u(e){this.ui=e,this.tv=new a(e.client),this.container=document.createElement("span"),this.container.setAttribute("class","terminus-main-page"),this.pages=["home"]}function c(e){this.ui=e}function l(e){this.ui=e}u.prototype.getDatabaseDocumentConfig=function(){var e="display: block; padding: 0.3em 1em;",t="display: inline-block; min-width: 100px; font-weight: 600; color: #446ba0;",r="font-weight: 400; color: #002856;",i=s.View.document();return i.show_all("SimpleFrameViewer"),i.object().style("padding: 8px; border: 1px solid #afafaf; background-color: #efefef;"),i.object().headerFeatures("id").style(e).args({headerStyle:t+" padding-right: 10px;",bodyStyle:r,label:"Database ID",removePrefixes:!0}),i.object().headerFeatures("type").style(e).args({headerStyle:t+" padding-right: 10px;",bodyStyle:r}),i.object().features("value").style(e),i.property().features("label").style(t),i.property().features("label","value"),i.property().property("terminus:id").hidden(!0),i.data().features("value").style(r),i},u.prototype.getDocumentsQueryPane=function(e,t){var r=s.View.table();r.column("ID").header("Document ID"),r.column("Label").header("Name"),r.column("Comment").header("Description"),r.column_order("ID","Label","Type","Comment");var i=this;return r.row().click((function(r){i.showDocumentPage(r["v:ID"],t,!1,e)})),this.tv.getResult(e.query,r,e)},u.prototype.getCreateDataPaneConfig=function(){return{showQuery:!1,editQuery:!1}},u.prototype.getCreateDocumentConfig=function(){var e="display: block; padding: 0.3em 1em;",t="display: inline-block; min-width: 100px; font-weight: 600; color: #446ba0;",r="font-weight: 400; color: #002856;",i=s.View.document().load_schema(!0);return i.all().mode("edit"),i.show_all("SimpleFrameViewer"),i.object().style("padding: 8px; border: 1px solid #afafaf; background-color: #efefef;"),i.object().depth(0).headerFeatures("id").style(e).args({headerStyle:t+" padding-right: 10px;",bodyStyle:r,label:"Document ID",removePrefixes:!0}),i.object().headerFeatures("type").style(e).args({headerStyle:t+" padding-right: 10px;",bodyStyle:r}),i.object().features("value").style(e),i.property().features("label").style(t),i.property().features("label","value"),i.property().property("terminus:id").hidden(!0),i.data().features("value").style(r),i},u.prototype.getShowDocumentConfig=function(){var e=s.View.document().load_schema(!0);return e.show_all("SimpleFrameViewer"),e.object().depth(0).style("border: 1px solid #aaa; background-color: #fafafd").headerStyle("background-color: #002856; color: white; padding: 8px; display: block; "),e.object().headerFeatures("id","type").args({headerStyle:"text-align: right; display: inline-block; width: 200px; padding-right: 10px; text-weight: 600px; color: white"}),e.object().features("value").style("display: block; padding: 1.5em 1em 0.8em 1em; position: relative;"),e.property().features("label","value"),e.property().features("label").style("text-align: right; display: inline-block; width: 200px; padding-right: 10px; font-weight: 600; color: #002856"),e.property().features("value").style("display: inline-block; vertical-align: top"),e.data().features("value").style("color: #002856; display: block; margin-bottom: 1em;"),e},u.prototype.getDocumentsGraphConfig=function(e){var t=s.View.graph();return t.literals(!1),t.height(800).width(1250),t.edges(["v:doc1","v:doc2"],["v:doc1","v:Enttype"],["v:doc2","v:Enttype2"]),t.node("v:Label","v:Label2","v:Predicate").hidden(!0),t.edge("v:doc1","v:doc2").distance(100).text("v:Predicate"),t.edge("v:doc1","v:Enttype").distance(100).text("Class"),t.edge("v:doc2","v:Enttype2").distance(100).text("Class"),t.node("v:Enttype").text("v:Enttype").color([200,250,200]).icon({label:!0,color:[15,50,10]}).collisionRadius(80),t.node("v:Enttype2").text("v:Enttype2").color([200,250,200]).icon({label:!0,color:[15,50,10]}).collisionRadius(80),t.node("v:doc1").size(24).text("v:Label1").icon({label:!0,color:[15,50,10]}).collisionRadius(80),t.node("v:doc2").size(24).text("v:Label2").icon({label:!0,color:[15,50,10]}).collisionRadius(80),t},u.prototype.showDocumentGraph=function(e){var t=this.ui.client.connectionConfig.dbURL(),r=s.WOQL.from(t).limit(200).getAllDocumentConnections(),i=this.tv.getResult(r,this.getDocumentsGraphConfig()),n=this.getLoaderDOM("Terminus Server is generating the document graph");e.appendChild(n),e.appendChild(i.getAsDOM()),this.graph_query_pane=i,i.load().finally((function(){return e.removeChild(n)}))},u.prototype.showDocumentConnections=function(e,t,r,i){var n=s.WOQL.limit(50).getDocumentConnections(e),o=s.View.table().column_order("Outgoing","Incoming","Entid","Label","Enttype","Class_Label");o.column("Entid").hidden(!0),o.column("Enttype").hidden(!0),o.column("Label").header("Document Name"),o.column("Class_Label").header("Type"),o.column("Incoming").header("Incoming Link"),o.column("Outgoing").header("Outgoing Link");var a=this;o.row().click((function(e){a.showDocumentPage(e["v:Entid"],r,!1,i)}));var u=s.View.graph();u.literals(!1),u.height(800).width(1250),u.edges(["v:Docid","v:Entid"],["v:Entid","v:Docid"]),u.node("Outgoing","Incoming","Label","Enttype","Class_Label").hidden(!0),u.edge("v:Entid","v:Docid").v("v:Incoming").in("unknown").hidden(!0),u.edge("v:Entid","v:Docid").distance(200).text("v:Incoming").color([255,0,0]),u.edge("v:Docid","v:Entid").v("v:Outgoing").in("unknown").hidden(!0),u.edge("v:Docid","v:Entid").distance(200).text("v:Outgoing").color([0,0,255]),u.node("v:Docid").text("v:Docid").icon({label:!0}),u.node("v:Entid").text("v:Label");var c=document.createElement("h3");c.style="margin-top: 1.5em; margin-bottom: -32px; color: #224488;",c.appendChild(document.createTextNode("Links from other documents"));var l={intro:c,viewers:[u]},d=this.tv.getQueryPane(n,[o],!1,[l]),h=this.getLoaderDOM("Fetching document relationship table");t.appendChild(h),t.appendChild(d.getAsDOM()),d.load().finally((function(){return t.removeChild(h)}))},u.prototype.createFullDocumentPane=function(e,t,r,i,n){var s=this,o={HTMLEntityViewer:{onclick:function(e){s.showDocumentPage(e,i,!1,n)}}};return this.tv.getDocumentPane(e,t,o)},u.prototype.getAsDOM=function(){var e=this;o.removeChildren(this.container);var t=s.WOQL,r=this.ui.client.connectionConfig.dbURL(),i=t.from(r).limit(20).documentMetadata();return i.execute(this.ui.client).then((function(n){var o=new s.WOQLResult(n,i),a=t.from(r).concreteDocumentClasses();a.execute(e.ui.client).then((function(t){var r=new s.WOQLResult(t,a),i=e.getBodyAsDOM(o,r);i&&e.container.appendChild(i)}))})).catch((function(t){e.ui.showError(t)})),this.container},u.prototype.getBodyAsDOM=function(e,t){return this.body?o.removeChildren(this.body):(this.body=document.createElement("div"),this.body.setAttribute("class","terminus-home-body terminus-document-view")),"docs"==this.ui.page?this.docid?this.showDocumentPage(this.docid,t,this.body,e):this.getDocumentsDOM(e,t,this.body):this.getHomeDOM(e,t,this.body),this.body},u.prototype.getHomeDOM=function(e,t,r){var i=this.showHappyBox("dbhome","demo");r.appendChild(i);var n=this.getDatabaseDocumentConfig(),s=document.createElement("span");i.appendChild(s);var o=this.ui.db();if(this.ui.connectToDB("terminus"),this.insertDocument("doc:"+o,s,n),this.ui.connectToDB(o),e.count()>0)r.appendChild(this.showHappyBox("dbhome","intro")),r.appendChild(this.showHappyBox("happy","query"));else if(t.count()>0){var a=this.getCreateDataChooser(t,e);t.count()<=3?(r.appendChild(this.showHappyBox("empty","schema")),r.appendChild(this.showHappyBox("empty","query"))):(r.appendChild(this.showHappyBox("happy","docs",a)),r.appendChild(this.showHappyBox("happy","query")))}else r.appendChild(this.showHappyBox("empty","schema")),r.appendChild(this.showHappyBox("empty","query"));var u=this.getDeleteDatabaseWidget("fa-2x");return u&&r.appendChild(this.showHappyBox("happy","delete",u)),r},u.prototype.getDocumentsDOM=function(e,t,r){var i=this.getDocumentsMenu(e,t,r);if(i&&r.appendChild(i),this.tableDOM=document.createElement("span"),r.appendChild(this.tableDOM),this.graphDOM=document.createElement("span"),this.graphDOM.setAttribute("class","terminus-documents-graph"),this.graphDOM.style.display="none",r.appendChild(this.graphDOM),e.count()>0)this.document_table||(this.document_table=this.getDocumentsQueryPane(e,t)),this.tableDOM.appendChild(this.document_table.getAsDOM()),this.showDocumentGraph(this.graphDOM);else{var n=this.getCreateDataChooser(t,e);t.count()<=3?(this.ui.showWarning("The database must have a schema before you can add documents to it"),r.appendChild(this.showHappyBox("empty","schema")),r.appendChild(this.showHappyBox("empty","query"))):(this.ui.showWarning("No documents have been added to the database"),r.appendChild(this.showHappyBox("happy","docs",n)),r.appendChild(this.showHappyBox("happy","query")))}return r},u.prototype.showDocumentPage=function(e,t,r,i){var n=this;this.ui.clearMessages(),o.removeChildren(r),this.ui.page="docs",this.ui.redrawControls();var s=e.substring(0,4);"doc:"!=s&&"http"!=s&&(e="doc:"+e);var a=this.getShowDocumentConfig(),u=this.createFullDocumentPane(e,a,r,t,i);this.docid=e,this.pages.push(e);var c=document.createElement("span");this.showDocumentConnections(e,c,t,i);return u.load().then((function(){o.removeChildren(n.container);var r=n.getNavigationDOM(t,i);n.container.appendChild(r);var s=n.getDocumentsMenu(i,t,n.container,e);s&&n.container.appendChild(s);var a=u.getAsDOM();n.container.appendChild(a),n.container.appendChild(c)})).catch((function(e){n.ui.showError(e)}))},u.prototype.loadCreateDocumentPage=function(e,t,r){var i=this;this.ui.page="docs",this.ui.redrawControls();var n=s.WOQL,a=this.ui.client.connectionConfig.dbURL(),u=this.getCreateDocumentConfig(),c=this.tv.getNewDocumentPane(e,u);if(c.documentLoader=this.getShowDocumentControl(t,r),t&&t.count()>0){var l=this.getCreateDataChooser(t,r);c.setClassLoader(l)}else{var d=n.from(a).concreteDocumentClasses();d.execute(this.ui.client).then((function(e){t=t||new s.WOQLResult(e,d);var n=i.getCreateDataChooser(t,r);c.setClassLoader(n)}))}this.container.appendChild(c.getAsDOM()),c.load().then((function(){o.removeChildren(i.container);var e=i.getNavigationDOM(t,r);i.container.appendChild(e),i.container.appendChild(c.getAsDOM())}))},u.prototype.getDocumentsMenu=function(e,t,r,i){var n=document.createElement("div");n.setAttribute("class","terminus-home-actions");var s=document.createElement("span");if(n.appendChild(s),e.count()>0){var o=this.getShowDocumentControl(t,e,r);if(s.appendChild(o),!i){var a=this.getToggleGraphTableDOM();a&&n.appendChild(a)}}return n},u.prototype.getLoaderDOM=function(e){var t=document.createElement("div");return t.setAttribute("class","terminus-busy-msg"),t.appendChild(document.createTextNode(e)),this.ui.getBusyLoader(t,e),t},u.prototype.redrawDocumentPage=function(){"graph"==this.docview?(this.tableDOM.style.display="none",this.graphDOM.style.display="inline"):(this.tableDOM.style.display="inline",this.graphDOM.style.display="none")},u.prototype.getToggleGraphTableDOM=function(){var e=this,t=document.createElement("span");t.setAttribute("class","terminus-toggle-documents");var r=document.createElement("span"),i=document.createElement("span");t.appendChild(r),t.appendChild(i);var n=document.createElement("i");n.setAttribute("class","fa fa-table"),n.classList.add("terminus-result-view-icon");var s=document.createElement("i");r.appendChild(n),i.appendChild(s),i.setAttribute("title","Click to view a graph of the links between the documents in the database"),r.setAttribute("title","Switch back to a regular table of documents"),s.setAttribute("class","fas fa-code-branch"),s.classList.add("terminus-result-view-icon"),this.docview&&"graph"==this.docview?i.style.display="none":r.style.display="none";var o=function(e){r.addEventListener("mouseover",(function(){this.style.cursor="pointer"}))};return o(),o(),i.addEventListener("click",(function(){e.docview&&"graph"==e.docview||(e.graph_query_pane||e.showDocumentGraph(e.graphDOM),e.docview="graph",i.style.display="none",e.graphDOM.style.display="inline",r.style.display="inline",e.tableDOM.style.display="none")})),n.addEventListener("click",(function(){e.docview&&"table"!=e.docview&&(e.docview="table",r.style.display="none",i.style.display="inline",e.graphDOM.style.display="none",e.tableDOM.style.display="inline")})),t.appendChild(r),t.appendChild(i),t},u.prototype.getDeleteDatabaseWidget=function(e){if("terminus"!=this.ui.db()){var t=document.createElement("span");t.setAttribute("class","terminus-db-widget"),o.removeChildren(this.container);var r=document.createElement("button");r.setAttribute("class","terminus-btn terminus-btn-float-right terminus-home-del"),r.setAttribute("type","button"),r.appendChild(document.createTextNode("Delete Database"));var i=document.createElement("i"),n="fa fa-trash fa-2x terminus-icon-padding"+(e?" "+e:"");i.setAttribute("class",n),r.appendChild(i);var s=this.ui.getDBRecord();if(s)s["rdfs:label"]&&s["rdfs:label"]["@value"]?s["rdfs:label"]["@value"]:this.ui.db();else this.ui.db();var a=this.ui.db(),u=this.ui.getDeleteDBButton(a);return u&&t.appendChild(u),t}},u.prototype.styleCreateDocumentChooser=function(){var e=document.getElementsByClassName("woql-chooser");for(i=0;i<e.length;i++)if("select"==e[i].type){e[i].classList.add("terminus-form-doc-value");var t=this;e[i].addEventListener("change",(function(){t.showCreateDocument(this.value)}))}},u.prototype.getCreateDataChooser=function(e,t,r,i){i=i||"Create a New Document";var n=s.View.chooser().values("Class").labels("Label").titles("Comment").show_empty(i),o=this;return n.change=r||function(r){r&&o.loadCreateDocumentPage(r,e,t)},this.tv.getResult(e.query,n,e).getAsDOM()},u.prototype.showHappyBox=function(e,t,r){var i=document.createElement("div");i.setAttribute("class","terminus-welcome-box terminus-no-res-alert");var n=this,s={};if("schema"==t)s.title="happy"==e?"Document Classes Created":"Create Schema from OWL",s.text="happy"==e?"You have successfully created a schema with valid document classes!":"You can create a schema for your database from an OWL document",s.css="fa fa-cog fa-2x terminus-welcome-icons";else if("docs"==t)s.css="fa fa-book fa-2x terminus-welcome-icons",s.title="Create Documents",s.text="happy"==e?"Add data to the system through easy to use automatically generated forms for each document type":"You should create a schema and add at least one document classes before you add data to the system";else if("intro"==t)s.css="fa fa-book fa-2x terminus-welcome-icons",s.title="View Documents",s.text="View the documents in the database and add new ones";else if("query"==t)s.css="fa fa-search fa-2x terminus-welcome-icons",s.title="happy"==e?"Run Queries":"Create Schema with Queries",s.text="happy"==e?"You can add data to the system with queries and scripts, and import data directly from CSVs and URLs":"You can write WOQL queries to create a schema through our query interface";else if("demo"==t){s.css="fa fa-database fa-2x terminus-welcome-icons";var o=this.ui.getDBRecord();if(o)var a=o["rdfs:label"]&&o["rdfs:label"]["@value"]?o["rdfs:label"]["@value"]:this.ui.db();else a=this.ui.db();s.title=a,s.text=""}else"delete"==t&&(s.css="fa fa-trash fa-2x terminus-welcome-icons terminus-db-list-del-icon",s.title="Delete Database",s.text="This will delete all data and permanently remove all record of this database from the system");var u=document.createElement("span");u.setAttribute("class","terminus-db-widget");var c=document.createElement("i");c.setAttribute("class",s.css),u.appendChild(c),i.appendChild(u);var l=document.createElement("span");l.appendChild(document.createElement("strong").appendChild(document.createTextNode(s.title))),l.classList.add("terminus-welcome-title"),i.appendChild(l);var d=document.createElement("p");return d.setAttribute("class","terminus-welcome-body"),d.appendChild(document.createTextNode(s.text)),i.appendChild(d),"schema"==t&&i.addEventListener("click",(function(){n.ui.page="schema",n.ui.showSchemaPage(),n.ui.clearMessages(),n.ui.redrawControls()})),"delete"==t&&u.addEventListener("click",(function(){n.ui.clearMessages();var e=n.ui.db();1==confirm("This action is irreversible, it will remove the database from the system permanently. Are you sure you want to delete ".concat(e," Database?"))&&(n.ui.deleteDatabase(),n.ui.client.connectionConfig.dbid=!1,n.ui.redrawControls())})),"intro"==t&&i.addEventListener("click",(function(){n.ui.page="docs",n.ui.showDocumentPage(),n.ui.clearMessages(),n.ui.redrawControls()})),"query"==t&&i.addEventListener("click",(function(){n.ui.page="query",n.ui.showQueryPage(),n.ui.clearMessages(),n.ui.redrawControls()})),"query"!=t&&"schema"!=t&&"intro"!=t||i.addEventListener("mouseover",(function(){this.style.cursor="pointer"})),i},u.prototype.getNavigationDOM=function(e,t){var r=this,i=document.createElement("span");i.setAttribute("class","terminus-back-to-home terminus-backtohome-span");var n=document.createElement("span");n.setAttribute("class","fa fas fa-arrow-left"),i.appendChild(n);var s=this.pages[this.pages.length-2];if(s){var o="home"==s?"document list":s;i.appendChild(document.createTextNode(" back to "+o))}else this.pages.push("home"),i.appendChild(document.createTextNode(" back to document list "));return i.addEventListener("click",(function(){var i=r.pages.pop();"home"==(s=r.pages[r.pages.length-1])?(delete r.docid,r.getAsDOM()):(i=r.pages.pop(),r.docid=i,r.showDocumentPage(i,e,!1,t))})),i.addEventListener("mouseover",(function(){this.style.cursor="pointer"})),i},u.prototype.insertDocument=function(e,t,r,i){var n=this,s=this.tv.getDocument(e,r);s.load().then((function(){i&&o.removeChildren(t),t.appendChild(s.getAsDOM())})).catch((function(e){return n.ui.showError(e)}))},u.prototype.getShowDocumentControl=function(e,t,r){var i=document.createElement("span");i.setAttribute("class","terminus-get-doc terminus-document-chooser terminus-form-horizontal terminus-control-group");var n=document.createElement("span");n.setAttribute("class","terminus-document-chooser-label terminus-doc-control-label terminus-control-label-padding");var s=document.createElement("input");s.setAttribute("class","terminus-form-doc-value terminus-document-chooser terminus-doc-input-text"),s.setAttribute("placeholder","Enter Document ID to view ...");var o=document.createElement("button");o.setAttribute("class","terminus-control-button terminus-document-button terminus-btn"),o.setAttribute("title","Enter Document ID to view");var a=document.createElement("i");a.setAttribute("class","fa fa-caret-left"),o.appendChild(a),o.appendChild(document.createTextNode(" Load "));var u=document.createElement("i");u.setAttribute("class","fa fa-caret-right"),o.appendChild(u);var c=this;return o.addEventListener("click",(function(){s.value&&c.showDocumentPage(s.value,e,r,t)})),s.addEventListener("keyup",(function(i){i.preventDefault(),13===i.keyCode&&s.value&&c.showDocumentPage(s.value,e,r,t)})),i.appendChild(n),i.appendChild(s),i.appendChild(o),i},c.prototype.getAsDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-db-creator");var r=document.createElement("h3");r.setAttribute("class","terminus-db-creator-title terminus-module-head"),r.appendChild(n.getHeaderDom("Create Database")),t.appendChild(r);var i=document.createElement("div");i.setAttribute("class","terminus-form-border "),t.appendChild(i);var s=document.createElement("div");s.setAttribute("class","terminus-form-margin-top"),i.appendChild(s),(a=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-id-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("ID")),a.appendChild(u);var o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("class","terminus-form-value terminus-input-text"),o.setAttribute("placeholder","No spaces or special characters allowed in IDs"),a.appendChild(o),i.appendChild(a),(a=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-title-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("Title"));var a,u,c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("placeholder","A brief title for the Database"),c.setAttribute("class","terminus-form-value terminus-input-text"),a.appendChild(u),a.appendChild(c),i.appendChild(a),(a=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(u=document.createElement("span")).setAttribute("class","terminus-title-label terminus-form-label terminus-control-label"),u.appendChild(document.createTextNode("Description")),a.appendChild(u);var l=document.createElement("textarea");l.setAttribute("class","terminus-textarea terminus-db-description terminus-textarea "),l.setAttribute("placeholder","A short text describing the database and its purpose"),a.appendChild(l),i.appendChild(a);var d=document.createElement("div");d.setAttribute("class","terminus-control-buttons");var h=document.createElement("button");h.setAttribute("class","terminus-control-button terminus-cancel-db-button terminus-btn terminus-btn-float-right"),h.appendChild(document.createTextNode("Cancel"));var p=document.createElement("button");p.setAttribute("class","terminus-control-button terminus-create-db-button terminus-btn terminus-btn-float-right"),p.appendChild(document.createTextNode("Create"));var m=this;return p.addEventListener("click",(function(){var e=function(){var e={};return e.id=o.value,e.title=c.value,e.description=l.value,e}();m.ui.createDatabase(e)})),h.addEventListener("click",(function(){m.ui.showServerMainPage()})),d.appendChild(h),d.appendChild(p),i.appendChild(d),t},l.prototype.getAsDOM=function(){var e=this,t=document.createElement("div");if(t.setAttribute("class","terminus-db-controller"),this.ui&&this.ui.db()){document.createElement("div").setAttribute("class","terminus-field terminus-db-connection");var r=this.ui.client.connection.getDBRecord(),i=r&&r["rdfs:label"]&&r["rdfs:label"]["@value"]?r["rdfs:label"]["@value"]:this.ui.db(),s=document.createElement("div");s.setAttribute("class","span3"),t.appendChild(s);var o=document.createElement("ul");o.setAttribute("class","terminus-ul"),s.appendChild(o);var a=document.createElement("a");a.setAttribute("class",'terminus-dashboard-info terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer"'),a.appendChild(document.createTextNode(i)),o.appendChild(a);var u=this.ui.page?this.ui.page:"db";if(this.ui.showControl("db")&&("db"==u&&(a.classList.add("terminus-selected"),e.ui.page="db"),a.addEventListener("click",(function(t){t.stopPropagation(),e.ui.showDBMainPage(),e.ui.page="db",e.ui.clearMessages(),e.ui.redrawControls()}))),this.ui.showControl("get_document")){var c=this.getControlHTML("Documents","fas fa fa-book");"docs"==u&&c.classList.add("terminus-selected"),c.addEventListener("click",(function(t){t.stopPropagation(),e.ui.showDocumentPage(),e.ui.clearMessages(),e.ui.page="docs",e.ui.redrawControls()})),o.appendChild(c)}if(this.ui.showControl("delete_database"))(c=this.getControlHTML("Delete Database","fa-trash-alt")).addEventListener("click",(function(t){n.activateSelectedNav(this,e),e.ui.clearMessages(),e.ui.deleteDatabase()})),o.appendChild(c);if(this.ui.showControl("woql_select")){c=this.getControlHTML("Query","fa-search");"query"==u&&c.classList.add("terminus-selected"),c.addEventListener("click",(function(t){n.activateSelectedNav(this,e),t.stopPropagation(),e.ui.page="query",e.ui.showQueryPage(),e.ui.clearMessages(),e.ui.redrawControls()})),o.appendChild(c)}if(this.ui.showControl("get_schema")){c=this.getControlHTML("Schema","fa-cog");"schema"==u&&c.classList.add("terminus-selected"),c.addEventListener("click",(function(){n.activateSelectedNav(this,e),e.ui.page="schema",e.ui.showSchemaPage(),e.ui.clearMessages(),e.ui.redrawControls()})),o.appendChild(c)}}return t},l.prototype.getControlHTML=function(e,t,r){var i=document.createElement("a");i.setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var n=document.createElement("i");n.setAttribute("class","terminus-menu-icon fa "+t),i.appendChild(n);var s=document.createTextNode(e);return i.appendChild(s),i},e.exports={TerminusDBViewer:u,TerminusDBController:l,TerminusDBCreator:c}},function(module,exports,__webpack_require__){var TerminusClient=__webpack_require__(1),TerminusCodeSnippet=__webpack_require__(10),ResultPane=__webpack_require__(76),UTILS=__webpack_require__(4),HTMLHelper=__webpack_require__(0),TerminusViolations=__webpack_require__(43);function QueryPane(e,t,r){this.client=e,this.query=t,this.result=r,this.views=[],this.container=document.createElement("span"),this.messages=document.createElement("div"),this.messages.setAttribute("class","terminus-query-messages"),this.defaultResultView={showConfig:!1,editConfig:!1},this.defaultQueryView={showQuery:!1,editQuery:!1}}QueryPane.prototype.load=function(e){var t=this;return this.query.execute(this.client).then((function(e){var r=new TerminusClient.WOQLResult(e,t.query);t.updateResult(r)}))},QueryPane.prototype.fireDefaultQueries=function(){var e,t=this,r=TerminusClient.WOQL;(e=r.query().classMetadata()).execute(this.client).then((function(r){var i=new TerminusClient.WOQLResult(r,e);t.classMetaDataRes=i})),(e=r.query().propertyMetadata()).execute(this.client).then((function(r){var i=new TerminusClient.WOQLResult(r,e);t.propertyMetaDataRes=i}))},QueryPane.prototype.options=function(e){this.showQuery=!(!e||void 0===e.showQuery)&&e.showQuery,this.editQuery=!(!e||void 0===e.editQuery)&&e.editQuery,this.showHeader=!(!e||void 0===e.showHeader)&&e.showHeader,this.addViews=!(!e||void 0===e.addViews)&&e.addViews,this.intro=!(!e||void 0===e.intro)&&e.intro;var t=e&&void 0!==e.css?e.css:"terminus-query-pane-cont";return this.container.setAttribute("class",t),this},QueryPane.prototype.getSection=function(e){var t=document.createElement("button");return t.setAttribute("class","terminus-query-section"),t.appendChild(document.createTextNode(e)),t},QueryPane.prototype.clearSubMenus=function(e){for(var t=e.parentElement.parentElement.getElementsByClassName("terminus-queries-submenu"),r=0;r<t.length;r++)HTMLHelper.removeChildren(t[r])},QueryPane.prototype.getResults=function(e){e&&this.input.setQuery(e),HTMLHelper.removeChildren(this.sampleQueryDOM),this.sampleQueryDOM.appendChild(document.createTextNode(" Saved Queries ")),this.input.refreshContents()},QueryPane.prototype.AddEvents=function(e,t){var r=this;e.addEventListener("click",(function(){var e,i=TerminusClient.WOQL;switch(r.clearSubMenus(this),this.value){case"Show All Schema Elements":e=i.query().elementMetadata();break;case"Show All Classes":e=i.query().classMetadata();break;case"Show All Properties":e=i.query().propertyMetadata();break;case"Show Document Classes":e=i.query().concreteDocumentClasses();break;case"Show All Data":e=i.query().getEverything();break;case"Show all documents":e=i.query().documentMetadata();break;case"Show data of chosen type":var n=t||"scm:"+this.innerText;e=i.query().getDataOfClass(n);break;case"Show data of chosen property":n=t||"scm:"+this.innerText;e=i.query().getDataOfProperty(n);break;case"Show data of type":case"Show data for property":return;default:console.log("Invalid Type of query")}r.getResults(e)}))},QueryPane.prototype.getQueryMenu=function(e){var t=document.createElement("button");return t.setAttribute("class","terminus-load-queries"),t.setAttribute("value",e),t.appendChild(document.createTextNode(e)),this.AddEvents(t),t},QueryPane.prototype.getSubDataMenu=function(e,t,r){var i=document.createElement("button");return i.setAttribute("class","terminus-load-queries"),i.setAttribute("value",e),i.appendChild(document.createTextNode(t)),this.AddEvents(i,r),i},QueryPane.prototype.getSchemaSection=function(e){var t=this.getSection("Schema Queries");e.appendChild(t);var r=this.getQueryMenu("Show All Schema Elements");e.appendChild(r);r=this.getQueryMenu("Show All Classes");e.appendChild(r);r=this.getQueryMenu("Show Document Classes");e.appendChild(r);r=this.getQueryMenu("Show All Properties");e.appendChild(r)},QueryPane.prototype.checkIfDataMenuOpen=function(e){var t=!1;if(e.children.length)for(var r=0;r<e.children.length;r++){var i=e.getElementsByClassName("terminus-queries-submenu");if(i.length)for(var n=0;n<i.length;n++)HTMLHelper.removeElement(i[n]),t=!0}return t},QueryPane.prototype.showDataOfTypeEvent=function(e){var t=this;e.addEventListener("click",(function(){if(!t.checkIfDataMenuOpen(this)){var r=document.createElement("div");if(r.setAttribute("class","terminus-queries-submenu"),t.classMetaDataRes&&t.classMetaDataRes.hasBindings())for(var i=0;i<t.classMetaDataRes.bindings.length;i++){var n=t.classMetaDataRes.bindings[i]["v:Label"]["@value"],s=t.classMetaDataRes.bindings[i]["v:Element"];r.appendChild(t.getSubDataMenu("Show data of chosen type",n,s))}e.appendChild(r)}}))},QueryPane.prototype.showPropertyOfTypeEvent=function(e){var t=this;e.addEventListener("click",(function(){if(!t.checkIfDataMenuOpen(this)){var r=document.createElement("div");if(r.setAttribute("class","terminus-queries-submenu"),t.propertyMetaDataRes&&t.propertyMetaDataRes.hasBindings())for(var i=0;i<t.propertyMetaDataRes.bindings.length;i++){var n=t.propertyMetaDataRes.bindings[i]["v:Label"]["@value"],s=t.propertyMetaDataRes.bindings[i]["v:Property"];r.appendChild(t.getSubDataMenu("Show data of chosen property",n,s))}e.appendChild(r)}}))},QueryPane.prototype.addCheveronIcon=function(e){var t=document.createElement("i");t.setAttribute("class","fa fa-chevron-right terminus-query-section"),e.appendChild(t)},QueryPane.prototype.getDataSection=function(e){var t=this.getSection("Data Queries");e.appendChild(t),(r=document.createElement("div")).setAttribute("class","terminus-query-submenu"),e.appendChild(r);var r,i=this.getQueryMenu("Show data of type");r.appendChild(i),this.addCheveronIcon(i),this.showDataOfTypeEvent(i),(r=document.createElement("div")).setAttribute("class","terminus-query-submenu"),e.appendChild(r);i=this.getQueryMenu("Show data for property");r.appendChild(i),this.showPropertyOfTypeEvent(i),this.addCheveronIcon(i);i=this.getQueryMenu("Show All Data");e.appendChild(i)},QueryPane.prototype.fireDocumentEvent=function(e){var t=TerminusClient.WOQL.query().documentProperties(e);this.getResults(t)},QueryPane.prototype.getEnterDocumentIdDOM=function(){var e=document.createElement("span");e.setAttribute("class","terminus-display-flex");var t=document.createElement("input");t.setAttribute("class","terminus-doc-id-input"),t.setAttribute("placeholder","doc:myDocId");var r=document.createElement("button");r.setAttribute("class","terminus-btn terminus-doc-id-input-submit"),r.appendChild(document.createTextNode("Submit"));var i=this;return r.addEventListener("click",(function(){i.fireDocumentEvent(t.value)})),e.appendChild(t),e.appendChild(r),e},QueryPane.prototype.getDocumentSection=function(e){var t=this.getSection("Document Queries");e.appendChild(t);var r=this.getQueryMenu("Show all documents");e.appendChild(r),e.appendChild(this.getEnterDocumentIdDOM())},QueryPane.prototype.getQueryMenuBlock=function(){var e=document.createElement("div");return e.setAttribute("class","terminus-load-queries"),this.getSchemaSection(e),this.getDataSection(e),this.getDocumentSection(e),e},QueryPane.prototype.getSampleQueriesDOM=function(){var e=document.createElement("icon");e.setAttribute("class","fa fa-ellipsis-v terminus-ellipsis-icon"),e.setAttribute("title","Click to load sample Queries"),e.setAttribute("value",!1),e.appendChild(document.createTextNode(" Saved Queries ")),this.sampleQueryDOM=e;var t=this;return e.addEventListener("click",(function(e){if(e.target===this)if(this.children.length)HTMLHelper.removeChildren(this),this.appendChild(document.createTextNode(" Saved Queries "));else{var r=t.getQueryMenuBlock();this.appendChild(r)}})),e},QueryPane.prototype.getAsDOM=function(){var e=this;if(this.intro&&this.container.appendChild(UTILS.getHeaderDom(this.intro)),this.showQuery){var t=function(){"always"!=a.showQuery&&(i.title="Click to Hide Query",o.setAttribute("class","fas fa fa-times-circle")),i.classList.remove("terminus-click-to-view-query"),i.nextSibling?a.container.insertBefore(s,i.nextSibling):a.container.appendChild(s);var e=a.getSampleQueriesDOM(),t=document.createElement("span");t.setAttribute("class","sample-queries-pane"),t.appendChild(e),s.appendChild(t),a.input.stylizeSnippet()},r=function(){i.title="Click to View Query",o.setAttribute("class","fas fa fa-search terminus-query-view-icon"),i.classList.add("terminus-click-to-view-query"),a.container.removeChild(s)};this.fireDefaultQueries();var i=document.createElement("span");i.setAttribute("class","pane-config-icons"),this.querySnippet=i,this.container.appendChild(i);var n=this.editQuery?"edit":"view";this.input=this.createInput(n);var s=this.input.getAsDOM(!0);document.createElement("span").setAttribute("class","query-pane-config");var o=document.createElement("i");i.appendChild(o);var a=this;i.addEventListener("click",(function(){e.showingQuery?r():t(),e.showingQuery=!e.showingQuery})),t(),"icon"==this.showQuery&&r()}this.resultDOM=document.createElement("span"),this.showQuery?this.resultDOM.setAttribute("class","terminus-query-results-full"):this.resultDOM.setAttribute("class","terminus-query-results"),this.resultDOM.appendChild(this.messages),0==this.views.length&&this.addView(TerminusClient.View.table(),this.defaultResultView);for(var u=0;u<this.views.length;u++){var c=this.views[u].getAsDOM();if(c){if(this.showHeader)this.views.length;this.resultDOM.appendChild(c)}}return this.container.appendChild(this.resultDOM),this.addViews&&this.container.appendChild(this.getAddViewControl()),this.container},QueryPane.prototype.getResultPaneHeader=function(e){var t=document.createElement("div"),r=document.createElement("button");if(r.setAttribute("class","terminus-btn terminus-query-btn"),r.appendChild(document.createTextNode("Save")),t.appendChild(r),e){var i=document.createElement("button");i.setAttribute("class","terminus-btn terminus-query-btn"),i.appendChild(document.createTextNode("Close")),t.appendChild(i)}var n=document.createElement("button");return n.setAttribute("class","terminus-btn terminus-query-btn"),n.appendChild(document.createTextNode("Collapse")),t.appendChild(n),t},QueryPane.prototype.createInput=function(e){var t=new TerminusCodeSnippet("woql",e,null,800);this.query&&t.setQuery(this.query);var r=this;return t.submit=function(e){r.submitQuery(e)},t},QueryPane.prototype.updateQuery=function(e){this.query=e,this.input&&this.input.setQuery(this.query)},QueryPane.prototype.updateResult=function(e){this.result=e,this.updateQuery(e.query),this.refreshViews()},QueryPane.prototype.addView=function(e,t){var r=new ResultPane(this.client,this,e).options(t);return this.result&&r.setResult(this.result),this.views.push(r),r},QueryPane.prototype.empty=function(){return void 0===this.query},QueryPane.prototype.clearMessages=function(){this.messages.children.length&&HTMLHelper.removeChildren(this.messages)},QueryPane.prototype.getBusyLoader=function(){var e=document.createElement("div");e.setAttribute("class","term-progress-bar-container");var t=document.createElement("div");t.setAttribute("class","term-progress-bar term-stripes animated reverse slower"),e.appendChild(t);var r=document.createElement("span");return r.setAttribute("class","term-progress-bar-inner"),t.appendChild(r),e},QueryPane.prototype.showBusy=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-busy-msg"),t.appendChild(document.createTextNode(e)),t.appendChild(this.getBusyLoader()),this.messages.appendChild(t)},QueryPane.prototype.showError=function(e){this.showMessage(e,"error")},QueryPane.prototype.showMessage=function(e,t){var r=document.createElement("div");r.setAttribute("class","terminus-show-msg-"+t),r.appendChild(document.createTextNode(e)),this.messages.appendChild(r)},QueryPane.prototype.showNoBindings=function(){nor=document.createElement("div"),nor.setAttribute("class","terminus-show-msg-warning"),nor.appendChild(document.createTextNode("No results available for this query")),this.clearMessages(),this.messages.appendChild(nor)},QueryPane.prototype.submitQuery=function(e){var t=this;if(this.clearMessages(),e||this.showError("Query could not be extracted from input box - remember that the last element in the query must be a WOQL object"),"string"!=typeof e){this.query=e,this.showBusy("Fetching results ...");var r=Date.now();e.execute(this.client).then((function(i){var n=new TerminusClient.WOQLResult(i,e);if(t.result=n,t.clearMessages(),t.result.hasBindings()){var s=Date.now()-r;t.showMessage("Query returned "+t.result.count()+" results in "+s/1e3+" seconds","info"),t.refreshViews()}else t.showNoBindings()})).catch((function(e){t.clearMessages(),e.data&&e.data["terminus:witnesses"]?t.showViolations(e.data["terminus:witnesses"]):t.showError(e)}))}else this.showError(e)},QueryPane.prototype.refreshViews=function(){for(var e=0;e<this.views.length;e++)this.views[e].updateResult(this.result)},QueryPane.prototype.showViolations=function(e){var t=new TerminusViolations(e,this);this.messages.appendChild(t.getAsDOM(""))},QueryPane.prototype.getAddViewControl=function(){var vd=document.createElement("div");vd.setAttribute("class","terminus-add-view-selector");var self=this,WOQL=TerminusClient.WOQL,newView=function newView(val){self.selector.value="";var c=eval("WOQL."+val+"()"),nv=self.addView(c,self.defaultResultView);self.result&&nv.setResult(self.result);var vdom=nv.getAsDOM();vdom&&self.resultDOM.appendChild(vdom)},opts=[{value:"",label:"Add another view of results"},{value:"table",label:"Add Table View"},{value:"stream",label:"Add Stream View"},{value:"graph",label:"Add Graph View"},{value:"chooser",label:"Add Drop-down View"},{value:"map",label:"Add Map View"}],sel=HTMLHelper.getSelectionControl("view",opts,!1,newView);return this.selector=sel,vd.appendChild(sel),vd},module.exports=QueryPane},function(e,t,r){var i=r(10),n=r(39),s=r(42),o=r(99),a=r(100),u=r(102),c=r(103),l=r(0);function d(e,t,r){this.client=e,this.qp=t,this.config=r,this.container=document.createElement("span"),this.container.setAttribute("class","terminus-result-pane")}d.prototype.options=function(e){return this.showConfig=!(!e||void 0===e.showConfig)&&e.showConfig,this.editConfig=!(!e||void 0===e.editConfig)&&e.editConfig,this.changeViewType=!e||void 0===e.changeViewType||e.changeViewType,this.intro=!(!e||void 0===e.intro)&&e.intro,this.renderers=e&&e.renderers?e.renderers:{table:new o,graph:new a,stream:new u,chooser:new c},this.config&&(this.viewers=[this.config]),this.viewers=e&&void 0!==e.viewers?this.viewers.concat(e.viewers):this.viewers,this.currentViewer=0,this},d.prototype.getRenderer=function(){return this.config&&this.config.renderer()?this.config.renderer():!(!this.config.type||!this.renderers[this.config.type])&&this.renderers[this.config.type]},d.prototype.getAsDOM=function(){var e=this;if(this.intro){var t="string"==typeof this.intro?document.createTextNode(this.intro):this.intro;this.container.appendChild(t)}var r=document.createElement("span");if(r.setAttribute("class","pane-config-icons"),this.container.appendChild(r),this.resultDOM=document.createElement("span"),this.resultDOM.setAttribute("class","terminus-result-view"),this.result&&this.resultDOM.appendChild(this.getResultDOM()),this.container.appendChild(this.resultDOM),this.showConfig){var i=function(){r.title="Click to Hide View Configuration",u.setAttribute("class","fas fa fa-times-circle"),r.nextSibling?(c.container.insertBefore(o,r.nextSibling),c.input.snippet.value&&c.input.stylizeSnippet()):(c.container.appendChild(o),c.input.snippet.value&&c.input.stylizeSnippet())},n=function(){r.title="Click to View Configuration",u.setAttribute("class","terminus-result-icons terminus-result-view-icon "+c.getViewConfigIconClass()),c.container.removeChild(o)};this.showingQuery="icon"!=this.showConfig;var s=this.editConfig?"edit":"view";this.input=this.createInput(s);var o=this.input.getAsDOM(),a=document.createElement("span");a.addEventListener("mouseover",(function(){this.style.cursor="pointer"})),a.setAttribute("class","result-pane-config");var u=document.createElement("i");a.appendChild(u),r.appendChild(a);var c=this;a.addEventListener("click",(function(){e.showingQuery?n():i(),e.showingQuery=!e.showingQuery})),i(),"icon"==this.showConfig&&n()}return this.changeViewType&&(cvicons=this.getViewTypeIconDOM(o),cvicons&&r.prepend(cvicons)),this.container},d.prototype.getViewConfigIconClass=function(){return this.changeViewType&&this.viewers.length>1?"fas fa fa-vial":this.viewers[this.currentViewer].icon?this.viewers[this.currentViewer].icon:this.getDefaultViewerIcon(this.viewers[this.currentViewer]).icon},d.prototype.getViewTypeIconDOM=function(e,t){var r=document.createElement("span");if(r.setAttribute("class","terminus-result-icons"),this.viewers.length>1)for(var i=0;i<this.viewers.length;i++){var n=this.getIconForViewer(this.viewers[i],i,r);r.appendChild(n)}return r},d.prototype.changeViewerType=function(e,t){this.currentViewer=t,this.config=e,this.input?(this.input.setQuery(e),this.input.submit(this.input.qObj)):this.updateView(e)},d.prototype.getDefaultViewerIcon=function(e){return{table:{label:"Table",icon:"fa fa-table"},graph:{label:"Graph",icon:"fas fa-code-branch"},chooser:{label:"Drop-down List",icon:"fas fa-caret-down"},stream:{label:"Result Stream",icon:"fa fa-list"}}[e.type]},d.prototype.getIconForViewer=function(e,t,r){var i=this,n=document.createElement("span"),s=document.createElement("i"),o=this.getDefaultViewerIcon(e);s.title=e.label?e.label:o.label;var a=e.icon?e.icon:o.icon;return s.setAttribute("class",a),s.classList.add("terminus-result-view-icon"),n.appendChild(s),this.currentViewer==t?(n.setAttribute("class","result-icon-selected selected terminus-result-selected"),s.classList.add("terminus-view-selected")):(n.setAttribute("class","result-icon-selectable selectable"),n.addEventListener("mouseover",(function(){this.style.cursor="pointer"}))),n.addEventListener("click",(function(){i.changeViewerType(e,t),l.removeChildren(r);for(var n=0;n<i.viewers.length;n++){var s=i.getIconForViewer(i.viewers[n],n,r);r.appendChild(s)}})),n},d.prototype.createInput=function(e){var t=new i("rule",e);this.config&&t.setQuery(this.config);var r=this;return t.submit=function(e){r.updateView(e)},t},d.prototype.setResult=function(e){this.result=e},d.prototype.updateResult=function(e){this.result=e,l.removeChildren(this.resultDOM),this.resultDOM.appendChild(this.getResultDOM())},d.prototype.updateView=function(e){this.config=e,l.removeChildren(this.resultDOM),this.result&&this.resultDOM.appendChild(this.getResultDOM())},d.prototype.getResultDOM=function(){var e=document.createElement("span");e.setAttribute("class","terminus-query-results");var t=this.config.create(this.client);t.datatypes=new s,n.initialiseDataRenderers(t.datatypes);var r=this;t.notify=function(e){r.qp.updateResult(e)},this.result.first(),t.setResult(this.result);var i=this.getRenderer();return e.appendChild(i.render(t)),e},e.exports=d},function(e,t,r){var i=r(0);function n(e){this.options(e)}n.prototype.options=function(e){this.size=!(!e||!e.size)&&e.size,this.css=e&&e.css?"terminus-literal-value "+e.css:"terminus-literal-value",this.max_word_size=!(!e||!e.max_word_size)&&e.max_word_size,this.max_cell_size=!(!e||!e.max_cell_size)&&e.max_cell_size,this.show_types=!(!e||!e.show_types)&&e.show_types},n.prototype.renderFrame=function(e,t){var r=e.get();return this.render(r)},n.prototype.renderValue=function(e){return this.render(e.value())},n.prototype.render=function(e){var t=document.createElement("span");return t.setAttribute("class",this.css),t.setAttribute("data-value",e),this.show_types&&"id"!=this.type&&(e+=" ("+this.type+")"),this.max_word_size||this.max_cell_size?i.wrapShortenedText(t,e,this.max_cell_size,this.max_word_size):(e=document.createTextNode(e),t.appendChild(e)),t},e.exports={HTMLStringViewer:n}},function(e,t){function r(e){this.options(e)}r.prototype.options=function(e){this.css=e&&e.css?"terminus-literal-value "+e.css:"terminus-literal-value",this.opts=e},r.prototype.renderFrame=function(e,t){var r=e.get();if(this.opts&&void 0!==this.opts.big?this.opts.big:this.isBigType(this.type,r)){var i=document.createElement("textarea");this.css+=" terminus-literal-big-value"}else{var n=this.opts&&void 0!==this.opts.size?this.opts.size:this.getTypeSize(this.type,r);(i=document.createElement("input")).setAttribute("type","text"),i.setAttribute("size",n)}i.setAttribute("class",this.css),i.setAttribute("data-value",r),i.value=r;return i.addEventListener("input",(function(){e.set(this.value)})),i},r.prototype.isBigType=function(e,t){if(t&&t.length&&t.length>100)return!0;return-1!=["xdd:coordinatePolyline","xdd:coordinatePolygon","xsd:base64Binary","xdd:html","xdd:json","rdf:XMLLiteral"].indexOf(e)},r.prototype.getTypeSize=function(e,t){if(t&&t.length&&t.length>40)return 80;return-1!=["xdd:url","xdd:coordinate","xsd:anyURI"].indexOf(e)?80:-1!=["xsd:gYearMonth","xdd:gYearRange","xsd:decimal","xsd:float","xsd:time","xsd:date","xsd:dateTimeStamp","xsd:gYearMonth","xsd:gMonthDay","xsd:duration","xsd:yearMonthDuration","xsd:dayTimeDuration","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger","xsd:integer","xsd:unsignedInt"].indexOf(e)?16:-1!=["xsd:boolean","xsd:gYear","xsd:gMonth","xsd:gDay","xsd:byte","xsd:short","xsd:unsignedByte","xsd:language"].indexOf(e)?8:32},e.exports={HTMLStringEditor:r}},function(e,t){function r(e){this.options(e)}r.prototype.options=function(e){this.css="terminus-literal-value terminus-literal-value-boolean "+(e&&e.css?e.css:"")},r.prototype.renderFrame=function(e,t){return this.render(e.get())},r.prototype.renderValue=function(e){return this.render(e.value())},r.prototype.render=function(e){var t=document.createElement("span");if(t.setAttribute("class",this.css),e){var r=document.createTextNode(e);t.appendChild(r)}return t},e.exports={HTMLBooleanViewer:r}},function(e,t){function r(e){this.options(e)}r.prototype.options=function(e){this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:"")},r.prototype.renderFrame=function(e,t){var r=e.get(),i=document.createElement("input");return i.setAttribute("type","checkbox"),r&&i.setAttribute("checked","checked"),i.addEventListener("change",(function(){r?e.set(""):e.set("true")})),i},e.exports={HTMLBooleanEditor:r}},function(e,t,r){var i=r(1);function n(e){}n.prototype.options=function(e){},n.prototype.renderFrame=function(e,t){var r=e.get();return e.frame&&e.frame.elements&&(this.elements=e.frame.elements),this.render(r)},n.prototype.renderValue=function(e){return this.render(e.value())},n.prototype.render=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-literal-value terminus-choice-value"),t.setAttribute("data-value",e);var r=!1;if(e&&this.elements)for(var n=0;n<this.elements.length;n++){var s=this.elements[n];s.class!=e||s.label&&s.label["@value"]&&(r=s.label["@value"])}return e&&!r&&(r=i.UTILS.labelFromURL(e)),r&&t.appendChild(document.createTextNode(r)),t},e.exports={HTMLChoiceViewer:n}},function(e,t,r){var i=r(0);function n(e){}n.prototype.renderFrame=function(e,t){var r=e.get();document.createElement("select").setAttribute("class","terminus-choice-picker");var n=e.getChoiceOptions();n.unshift({value:"",label:"Not Specified"});return i.getSelectionControl("select-choice",n,r,(function(t){e.set(t)}))},e.exports={HTMLChoiceEditor:n}},function(e,t){function r(e){this.inputs=[]}r.prototype.parseValue=function(e){try{var t=!!e&&JSON.parse(e);return t&&"xdd:coordinate"==this.type&&(t=[t]),t}catch(t){return this.error=this.type+" value "+e+" failed to parse as json",t.toString(),[]}},r.prototype.renderFrame=function(e,t){return this.render(e.get())},r.prototype.renderValue=function(e){return this.render(e.value())},r.prototype.render=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-literal-value terminus-literal-coordinate"),e){t.setAttribute("data-value",e);var r=this.parseValue(e);if(r)for(var i=0;i<r.length;i++){var n=document.createElement("span");n.setAttribute("class","latlong"),n.appendChild(document.createTextNode("Latitude: ")),n.appendChild(document.createTextNode(r[i][0]+" ° ")),n.appendChild(document.createTextNode("Longitude: ")),n.appendChild(document.createTextNode(r[i][1]+" °")),t.appendChild(n)}else t.setAttribute("title",this.error)}return t},e.exports={HTMLCoordinateViewer:r}},function(e,t){function r(e){this.inputs=[]}r.prototype.getInputDOMs=function(e,t,r){var i=document.createElement("input");i.setAttribute("type","text"),i.value=e;var n=document.createElement("input");return n.setAttribute("type","text"),n.value=t,i.addEventListener("change",r),n.addEventListener("change",r),[i,n]},r.prototype.getLatLongDOM=function(e,t,r,i,n){var s=document.createElement("span");s.setAttribute("class","terminus-lat-long");var o=document.createElement("span");if(o.setAttribute("class","terminus-lat-long-col"),s.appendChild(o),i>2||"xdd:coordinatePolyline"==r&&i>1){var a=document.createElement("button");a.setAttribute("class","delete-coordinate"),a.appendChild(document.createTextNode("Remove")),a.addEventListener("click",(function(){t.value="",e.value="",n.removeChild(s)})),o.appendChild(a)}return s.appendChild(document.createTextNode("Latitude: ")),s.appendChild(e),s.appendChild(document.createTextNode(" ° ")),s.appendChild(document.createTextNode("  Longitude: ")),s.appendChild(t),s.appendChild(document.createTextNode(" ° ")),s},r.prototype.renderFrame=function(e,t){var r=e.get(),i=document.createElement("span");i.setAttribute("class","terminus-literal-value terminus-literal-coordinate"),i.setAttribute("data-value",r);try{var n=!!r&&JSON.parse(r)}catch(e){this.error=this.type+" failed to parse as json",e.toString();n=!1}var s=this,o=function(){for(var t=[],r=0;r<s.inputs.length;r++)if(s.inputs[r][0].value&&s.inputs[r][1].value){var i="["+s.inputs[r][0].value+","+s.inputs[r][1].value+"]";t.push(i)}if(0==t.length)e.set("");else if("xdd:coordinate"==this.type)e.set(t[0]);else{var n="[";for(r=0;r<t.length;r++)n+=t[r],r+1<t.length&&(n+=",");n+="]",e.set(n)}};n||("xdd:coordinate"==this.type?n=["",""]:(n=[["",""],["",""]],"xdd:coordinatePolygon"==this.type&&n.push(["",""]))),"xdd:coordinate"==this.type&&(n=[n]);for(var a=0;a<n.length;a++)this.inputs.push(this.getInputDOMs(n[a][0],n[a][1],o));var u=document.createElement("span");for(a=0;a<this.inputs.length;a++){var c=this.getLatLongDOM(this.inputs[a][0],this.inputs[a][1],this.type,a,u);u.appendChild(c)}i.appendChild(u);s=this;if("xdd:coordinate"!=this.type){var l=document.createElement("span");l.setAttribute("class","terminus-add-coordinate");var d=document.createElement("button");d.setAttribute("class","terminus-add-coordinate"),d.appendChild(document.createTextNode("Add")),d.addEventListener("click",(function(){var e=s.getInputDOMs("","",o),t=s.getLatLongDOM(e[0],e[1],this.type,s.inputs.length,u);u.appendChild(t),s.inputs.push(e)})),l.appendChild(d),i.appendChild(l)}return i},e.exports={HTMLCoordinateEditor:r}},function(e,t,r){var i=r(40),n=r(1);function s(e){this.options(e)}s.prototype.options=function(e){this.max=!(!e||!e.max)&&e.max,this.min=!(!e||!e.min)&&e.min,this.allowbce=!(!e||!e.allowbce)&&e.allowbce,this.date_spacer="/",this.time_spacer=":",this.datetime_separator=", ",this.helper=new i.HTMLDateHelper},s.prototype.renderFrame=function(e,t){return this.render(e.get())},s.prototype.renderValue=function(e){return this.render(e.value())},s.prototype.render=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-literal-value terminus-literal-date"),t.setAttribute("data-value",e),e){var r=n.UTILS.DateHelper.parseDate(this.type,e),i=this.getDateComponentDOM(r),s=this.getTimeComponentDOM(r);s&&t.appendChild(s),s&&i&&t.appendChild(document.createTextNode(this.datetime_separator)),i&&t.appendChild(i)}return t},s.prototype.getTimeComponentDOM=function(e,t){var r=!!e.hour&&document.createElement("span");r&&(r.setAttribute("class","terminus-time-hour"),r.appendChild(document.createTextNode(e.hour)));var i=void 0!==e.minute&&document.createElement("span");if(i){i.setAttribute("class","terminus-time-minute");var n=(e.minute,e.minute);i.appendChild(document.createTextNode(n))}var s=void 0!==e.second&&document.createElement("span");if(s){s.setAttribute("class","terminus-time-second");var o=(e.second,e.second);s.appendChild(document.createTextNode(o))}var a=!!e.timezone&&document.createElement("span");if(a&&(s.setAttribute("class","terminus-time-timezone"),s.appendChild(document.createTextNode(e.timezone))),r||i||s||a){var u=document.createElement("span");return u.setAttribute("class","terminus-time-components time-"+t),r&&u.appendChild(r),i&&(r&&u.appendChild(document.createTextNode(this.time_spacer)),u.appendChild(i)),s&&((i||r)&&u.appendChild(document.createTextNode(this.time_spacer)),u.appendChild(s)),a&&(u.appendChild(document.createTextNode(" (Timezone: ")),u.appendChild(s),u.appendChild(document.createTextNode(")"))),u}return!1},s.prototype.getDateComponentDOM=function(e,t){var r=!!e.year&&document.createElement("span");r&&(r.setAttribute("class","terminus-date-year"),r.appendChild(document.createTextNode(e.year)));var i=!!e.month&&document.createElement("span");i&&(i.setAttribute("class","terminus-date-month"),i.appendChild(document.createTextNode(this.helper.getMonthName(e.month))));var n=!!e.day&&document.createElement("span");if(n&&(n.setAttribute("class","terminus-date-day"),n.appendChild(document.createTextNode(e.day))),r||i||n){var s=document.createElement("span");return n&&s.appendChild(n),i&&(n&&s.appendChild(document.createTextNode(this.date_spacer)),s.appendChild(i)),r&&((i||n)&&s.appendChild(document.createTextNode(this.date_spacer)),s.appendChild(r)),s}return!1},e.exports={HTMLDateViewer:s}},function(e,t,r){var i=r(40),n=r(1);function s(e){this.options(e)}s.prototype.options=function(e){this.max=!(!e||!e.max)&&e.max,this.min=!(!e||!e.min)&&e.min,this.allowbce=!(!e||!e.allowbce)&&e.allowbce,this.date_spacer="/",this.time_spacer=":",this.datetime_separator=", ",this.helper=new i.HTMLDateHelper},s.prototype.renderFrame=function(e,t){var r=e.get(),i=document.createElement("span");i.setAttribute("class","terminus-literal-value terminus-literal-date"),i.setAttribute("data-value",r),this.parsed=r?n.UTILS.DateHelper.parseDate(this.type,r):{};var s=this.getDateComponentDOM(this.parsed,this.type,e),o=this.getTimeComponentDOM(this.parsed,this.type,e);return o&&i.appendChild(o),o&&s&&i.appendChild(document.createTextNode(this.datetime_separator)),s&&i.appendChild(s),i},s.prototype.set=function(e,t,r,i){this.parsed[e]=t;var s=n.UTILS.DateHelper.xsdFromParsed(this.parsed,i);s&&r.set(s)},s.prototype.getTimeComponentDOM=function(e,t,r){if(-1==["xsd:dateTime","xsd:dateTimeStamp","xsd:time"].indexOf(t))return!1;var i=this,n=document.createElement("input");n.setAttribute("class","terminus-hour-input terminus-hour-"+t),n.setAttribute("size",2),n.setAttribute("placeholder","HH"),n.value=e.hour?e.hour:"",n.addEventListener("input",(function(){i.set("hour",this.value,r,t)}));var s=document.createElement("input");s.setAttribute("class","terminus-minute-input terminus-minute-"+t),s.setAttribute("size",2),s.setAttribute("placeholder","MM"),s.value=e.minute?e.minute:"",s.addEventListener("input",(function(){i.set("minute",this.value,r,t)}));var o=document.createElement("input");o.setAttribute("class","terminus-second-input terminus-second-"+t),o.setAttribute("size",8),o.setAttribute("placeholder","SS.sss..."),o.value=e.second?e.second:"",o.addEventListener("input",(function(){i.set("second",this.value,r,t)}));var a=document.createElement("span");return a.appendChild(n),a.appendChild(document.createTextNode(this.time_spacer)),a.appendChild(s),a.appendChild(document.createTextNode(this.time_spacer)),a.appendChild(o),a},s.prototype.getDateComponentDOM=function(e,t,r){var i=this;if(-1!=["xsd:date","xsd:dateTime","xsd:gYear","xsd:gYearMonth","xsd:dateTimeStamp"].indexOf(t)){var n=document.createElement("input");n.setAttribute("class","terminus-year-input terminus-year-"+t),n.setAttribute("size",6),n.setAttribute("placeholder","YYYY"),n.value=e.year?e.year:"",n.addEventListener("input",(function(){i.set("year",this.value,r,t)}))}if(-1!=["xsd:date","xsd:dateTime","xsd:gYearMonth","xsd:dateTimeStamp","xsd:gMonth","xsd:gMonthDay"].indexOf(t)){var s=document.createElement("select");s.setAttribute("class","terminus-month-input terminus-month-"+t);for(var o=0;o<this.helper.months.length;o++){var a=document.createElement("option");a.value=o+1,a.appendChild(document.createTextNode(this.helper.months[o])),e.month&&e.month==o+1&&(a.selected=!0),s.appendChild(a)}s.addEventListener("change",(function(){i.set("month",this.value,r,t)}))}if(-1!=["xsd:date","xsd:dateTime","xsd:dateTimeStamp","xsd:gDay","xsd:gMonthDay"].indexOf(t)){var u=document.createElement("input");u.setAttribute("class","terminus-day-input terminus-day-"+t),u.setAttribute("size",2),u.setAttribute("placeholder","DD"),u.value=e.day?e.day:"",u.addEventListener("input",(function(){i.set("day",this.value,r,t)}))}if(n||s||u){var c=document.createElement("span");return u&&c.appendChild(u),s&&(u&&c.appendChild(document.createTextNode(this.date_spacer)),c.appendChild(s)),n&&((s||u)&&c.appendChild(document.createTextNode(this.date_spacer)),c.appendChild(n)),c}return!1},e.exports={HTMLDateEditor:s}},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0);function s(e){this.options(e)}s.prototype.options=function(e){this.onclick=!(!e||!e.onclick)&&e.onclick},s.prototype.renderFrame=function(e,t){return this.render(e.get())},s.prototype.renderValue=function(e){return this.render(e.value())},s.prototype.render=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-literal-value terminus-entity-reference-value");if(this.holder)return this.holder;if(e){var r=this.showValue(e);t.appendChild(r)}return t},s.prototype.showValue=function(e){if(this.onclick){var t=this,r=document.createElement("a");return r.style.color="#0000aa",r.appendChild(document.createTextNode(e)),r.addEventListener("click",(function(r){t.onclick(e)})),r.addEventListener("mouseover",(function(e){r.style.cursor="pointer"})),r}return document.createTextNode(e)},s.prototype.getEntityViewHTML=function(e,t,r){var i=document.createElement("span"),s=this;return i.setAttribute("class","terminus-internal-link"),i.appendChild(r.internalLink(e)),(controller=renderer.getController())&&controller.getInstanceMeta(e).then((function(t){var o=s.getEntityLabel(e,t,r);o&&(n.removeChildren(i),i.appendChild(o))})),i},s.prototype.getEntityLabel=function(e,t,r){var s=document.createElement("span");if(t&&(il=n.getVariableValueFromBinding("InstanceLabel",t))){s.appendChild(r.internalLink(e,il));var o=e+" Type: "+n.getVariableValueFromBinding("InstanceType",t),a=n.getVariableValueFromBinding("InstanceComment",t);return"object"==i(a)&&a["@value"]&&(o+=" "+a["@value"]),s.setAttribute("title",o),s}return!1},e.exports={HTMLEntityViewer:s}},function(e,t){function r(e){}r.prototype.renderFrame=function(e,t){var r=e.get(),i=document.createElement("input");i.setAttribute("class","terminus-literal-value terminus-entity-reference-value"),i.setAttribute("type","text"),i.setAttribute("size",80),i.value=r;return i.addEventListener("change",(function(){var t=this.value;-1==t.indexOf("/")&&-1==t.indexOf(":")&&(t="doc:"+t),e.set(t)})),i},e.exports={HTMLEntityEditor:r}},function(e,t){function r(e){}r.prototype.options=function(e){},r.prototype.renderFrame=function(e,t){return this.render(e.get())},r.prototype.renderValue=function(e){return this.render(e.value())},r.prototype.render=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-literal-value terminus-literal-image-value"),t.setAttribute("data-value",e),e){var r=document.createElement("a");r.setAttribute("src",e),t.appendChild(r)}return t},e.exports={HTMLImageViewer:r}},function(e,t){function r(e){}r.prototype.renderFrame=function(e,t){if("xsd:base64Binary"==this.type){var r=document.createElement("textarea");return r.setAttribute("class","terminus-literal-value terminus-literal-b64image-value"),r.value=value,r.addEventListener("change",(function(){e.set(this.value)})),r}return!1},e.exports={HTMLImageEditor:r}},function(e,t){function r(e){this.options(e)}r.prototype.options=function(e){this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:"")},r.prototype.renderFrame=function(e,t){return this.render(e.get())},r.prototype.renderValue=function(e){return this.render(e.value())},r.prototype.render=function(e){var t=document.createElement("span");if(t.setAttribute("class",this.css),t.setAttribute("size",80),t.setAttribute("data-value",e),e){var r=document.createElement("a");r.setAttribute("href",e),r.appendChild(document.createTextNode(e)),t.appendChild(r)}return t},e.exports={HTMLLinkViewer:r}},function(e,t,r){var i=r(1);function n(e){this.options(e)}n.prototype.options=function(e){this.commas=!e||!e.commas||e.commas},n.prototype.renderFrame=function(e,t){return this.render(e.get())},n.prototype.renderValue=function(e){return this.render(e.value())},n.prototype.render=function(e){0===e&&(e="0");var t=document.createElement("span");return t.setAttribute("class","terminus-number-value terminus-literal-value"),t.setAttribute("data-value",e),e=this.commas?i.UTILS.TypeHelper.numberWithCommas(e):e,t.appendChild(document.createTextNode(e)),t},e.exports={HTMLNumberViewer:n}},function(e,t,r){var i=r(1);function n(e){this.options(e)}n.prototype.options=function(e){this.commas=!e||!e.commas||e.commas,this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:""),this.delimiter=!(!e||!e.delimiter)&&e.delimiter},n.prototype.renderFrame=function(e,t){return this.render(e.get())},n.prototype.renderValue=function(e){return this.render(e.value())},n.prototype.render=function(e){var t=i.UTILS.TypeHelper.parseRangeValue(e,this.delimiter),r=document.createElement("span");r.setAttribute("class",this.css);var n=document.createElement("span");n.setAttribute("class","terminus-range-value-left");var s=document.createElement("span");s.setAttribute("class","terminus-range-value-right");var o=this.useCommas()?i.UTILS.TypeHelper.numberWithCommas(t[0]):t[0],a=document.createTextNode(o);if(n.appendChild(a),r.appendChild(n),2==t.length){r.appendChild(function(){var e=document.createElement("span");return e.setAttribute("class","terminus-range-indicator"),e.setAttribute("title","The value is uncertain, it lies somewhere in this range"),e.appendChild(document.createTextNode(" ... ")),e}());var u=this.useCommas(renderer)?i.UTILS.TypeHelper.numberWithCommas(t[1]):t[1],c=document.createTextNode(u);s.appendChild(c),r.appendChild(s)}return r},n.prototype.useCommas=function(){return-1==["xdd:gYearRange","xdd:dateRange"].indexOf(this.type)&&this.commas},e.exports={HTMLRangeViewer:n}},function(e,t,r){var i=r(1),n=r(0);function s(e){this.options(e)}function o(){var e=document.createElement("span");return e.setAttribute("class","terminus-range-indicator"),e.setAttribute("title","The value is uncertain, it lies somewhere in this range"),e.appendChild(document.createTextNode(" ... ")),e}s.prototype.options=function(e){this.commas=!e||!e.commas||e.commas,this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:""),this.delimiter=!(!e||!e.delimiter)&&e.delimiter},s.prototype.renderFrame=function(e,t){var r=e.get(),s=i.UTILS.TypeHelper.parseRangeValue(r,this.delimiter),a=document.createElement("span");a.setAttribute("class",this.css);var u=document.createElement("span"),c=document.createElement("span"),l=s.length>0?s[0]:"",d=s.length>1?s[1]:"",h=document.createElement("input");h.setAttribute("type","text"),h.setAttribute("size",16),l&&(h.value=l);var p=document.createElement("input");p.setAttribute("type","text"),p.setAttribute("size",16),d&&(this.showing_range=!0,p.value=d),u.appendChild(h),a.appendChild(u),this.showing_range&&(c.appendChild(o()),c.appendChild(p)),a.appendChild(c);var m=document.createElement("button");m.setAttribute("class","terminus-change-range");var f=this.showing_range?"Change to Simple Value":"Change to Uncertain Range";m.appendChild(document.createTextNode(f)),a.appendChild(m);var y=this;m.addEventListener("click",(function(){y.showing_range?(y.showing_range=!1,p.value="",n.removeChildren(c)):(y.showing_range=!0,p.value="",c.appendChild(o()),c.appendChild(p));var e=y.showing_range?"Change to Simple Value":"Change to Uncertain Range";m.innerText=e,g()}));var g=function(){y.showing_range&&p.value?h.value?e.set("["+h.value+","+p.value+"]"):e.set(p.value):e.set(h.value)};return h.addEventListener("change",g),p.addEventListener("change",g),a},e.exports={HTMLRangeEditor:s}},function(e,t,r){var i=r(41);function n(e){}n.prototype.renderFrame=function(e,t){var r=document.createElement("div");r.setAttribute("class","gmap-window gmap-editor");var n=new i,s=n.initMap(r,value,this.type);return"xdd:coordinate"==ty?google.maps.event.addListener(s,"click",(function(e){var t=e.latLng,r="["+t.lat()+","+t.lng()+"]";renderer.set(r),n.clearMarkers();var i={position:t,map:s},o=new google.maps.Marker(i);n.markers.push(o)})):google.maps.event.addListener(s,"click",(function(t){var r=n.polyline.getPath();r.push(t.latLng);var i=t.latLng;n.addMarker(i,s,e,"#"+r.getLength(),this.type)})),r},e.exports={GoogleMapEditor:n}},function(e,t,r){var i=r(41);function n(e){}n.prototype.renderFrame=function(e,t){return this.render(e.get())},n.prototype.renderValue=function(e){return this.render(e.value())},n.prototype.render=function(e){var t=document.createElement("div");t.setAttribute("class","gmap-window gmap-viewer");return(new i).initMap(t,e,this.type),t},e.exports={GoogleMapViewer:n}},function(e,t){function r(e){}r.prototype.renderFrame=function(e,t){var r=e.get(),i=document.createElement("div");i.setAttribute("class","html-wysiwyg");var n=document.createElement("span");if(n.setAttribute("class","html-literal literal-value"),n.innerHTML=r,i.appendChild(n),"undefined"!=typeof Quill){var s=new Quill(n,{theme:"snow"});s.on("text-change",(function(){e.set(s.root.innerHTML)}))}return i},e.exports={HTMLMarkupEditor:r}},function(e,t){function r(e){}r.prototype.renderFrame=function(e,t){var r=e.get(),i=e.range(),n=(e.set,t.getClient()),s=new TerminusDocumentChooser(n,i,r);return s.change=function(t){e.set(t)},s.view="label",s.getAsDOM()},e.exports={S2EntityEditor:r}},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0);function s(){this.holder=document.createElement("div")}s.prototype.options=function(e){for(var t in e)this[t]=e[t];return this},s.prototype.render=function(e){e&&(this.woqltable=e),n.removeChildren(this.holder);var t=this.getControlsDOM(),r=this.getTableDOM();return t&&this.holder.appendChild(t),this.holder.appendChild(r),this.holder},s.prototype.getControlsDOM=function(e){var t=document.createElement("span");if(this.woqltable.config.pager()){var r=this.getPaging(e);r&&t.appendChild(r)}return t},s.prototype.getTableDOM=function(){var e=this.woqltable.getColumnsToRender(),t=document.createElement("table");t.setAttribute("class","terminus-hover-table terminus-simple-table");var r=this.getTableHeader(e);t.appendChild(r);var i=this.getTableBody(e);return t.appendChild(i),t},s.prototype.getTableHeader=function(e){for(var t=document.createElement("thead"),r=document.createElement("tr"),i=0;i<e.length;i++){var n=this.getColumnHeader(e[i]);r.appendChild(n)}return t.appendChild(r),t},s.prototype.getColumnHeader=function(e){var t=document.createElement("th");t.setAttribute("class","terminus-table-header-full-css");var r=this.woqltable.getColumnHeaderContents(e);return t.appendChild(r),t},s.prototype.getTableBody=function(e){for(var t=document.createElement("tbody");row=this.woqltable.next();){var r=this.getHTMLRow(row,e);r&&t.appendChild(r)}return t},s.prototype.getHTMLRow=function(e,t){for(var r=document.createElement("tr"),i=0;i<t.length;i++){var n=this.getCell(t[i],e);r.appendChild(n)}if(this.woqltable.hasRowClick(e)){var s=this.woqltable.getRowClick(e);r.addEventListener("click",(function(){s(e)})),r.addEventListener("mouseover",(function(){this.style.cursor="pointer"}))}if(this.woqltable.hasRowHover(e)){s=this.woqltable.getRowHover(e);r.addEventListener("mouseover",(function(){s(e)}))}return r},s.prototype.getCell=function(e,t){var r=document.createElement("td");if(this.woqltable.hasCellClick(t,e)){var i=this.woqltable.getCellClick(t,e);r.addEventListener("click",(function(){i(t)})),r.addEventListener("mouseover",(function(){this.style.cursor="pointer"}))}if(this.woqltable.hasCellHover(t,e)){i=this.woqltable.getCellHover(t,e);tr.addEventListener("mouseover",(function(){i(t)}))}var n=this.getCellData(e,t);return n&&r.appendChild(n),r},s.prototype.getCellData=function(e,t){var r=this.woqltable.getRenderer(e,t);if(r&&"function"==typeof r)return r(t[e],e,t);if(r&&"object"==i(r))return this.woqltable.renderValue(r,t[e],e,t);var n=t[e];return n&&n["@value"]&&(n=n["@value"]),document.createTextNode(n)},s.prototype.getPaging=function(){if(this.woqltable.result.query.isPaged()){var e=document.createElement("div");if(e.setAttribute("class","table-page-size"),this.woqltable.config.pagesize()){var t=this.getPageSize();t&&e.appendChild(t)}if(this.woqltable.canChangePage()){var r=this.woqltable.result.query.getPage();r>2&&e.appendChild(this.getFirst()),r>1&&e.appendChild(this.getPrev(r)),this.woqltable.config.page()&&e.appendChild(this.getPageNumber(r)),e.appendChild(this.getNext(this.woqltable.result))}return e}},s.prototype.showPaging=function(){return!!(this.woqltable.result.query.isPaged()&&this.woqltable.config.pager()&&this.woqltable.canChangePage())},s.prototype.getPageSize=function(){if(this.showPaging()){var e=document.createElement("span");if(e.setAttribute("class","woql-table-pagesize"),clabel=document.createElement("span"),clabel.appendChild(document.createTextNode("Page Size")),e.appendChild(clabel),this.woqltable.config.change_pagesize){var t=document.createElement("input");t.setAttribute("size",6);var r=this;t.value=this.woqltable.getPageSize(),t.addEventListener("blur",(function(){var e=!!this.value&&parseInt(this.value);r.woqltable.setPageSize(e)})),e.appendChild(t)}else e.appendChild(document.createTextNode(this.woqltable.getPageSize()));return e}return!1},s.prototype.getPageNumber=function(){var e=document.createElement("input");e.setAttribute("size",4),e.value=this.woqltable.result.query.getPage();var t=this;return e.addEventListener("blur",(function(){var e=!!this.value&&parseInt(this.value);t.woqltable.setPage(e)})),e},s.prototype.getNext=function(e){var t=document.createElement("button"),r=this;return t.appendChild(document.createTextNode("next")),this.woqltable.canAdvancePage(e)?t.addEventListener("click",(function(){r.woqltable.nextPage()})):t.setAttribute("disabled","disabled"),t},s.prototype.getPrev=function(e){var t=document.createElement("button");t.appendChild(document.createTextNode("previous"));var r=this;return this.woqltable.canRetreatPage(e)?t.addEventListener("click",(function(){r.woqltable.previousPage()})):t.setAttribute("disabled","disabled"),t},s.prototype.getFirst=function(e){var t=document.createElement("button");t.appendChild(document.createTextNode("first"));var r=this;return!this.woqltable.canRetreatPage(e)||this.woqltable.getPage()<=2?t.setAttribute("disabled","disabled"):t.addEventListener("click",(function(){r.woqltable.firstPage()})),t},e.exports=s},function(e,t,r){var i=r(0),n=r(101);function s(){this.holder=document.createElement("div")}s.prototype.setResult=function(e){this.result=e},s.prototype.render=function(e){this.graph=e,i.removeChildren(this.holder);var t=this.getGraphDOM(this.result);return this.holder.appendChild(t),this.holder},s.prototype.getGraphDOM=function(){this.gviz=new n(this.graph.config);var e=this.gviz.getAsDOM(),t=this.graph.config.height()?this.graph.config.height():800,r=this.graph.config.width()?this.graph.config.width():800;return e.setAttribute("style","border: 1px solid #aaa; width: "+r+"px; height: "+t+"px; "+this.graph.config.width()+"px"),this.gviz.setData(this.graph),this.gviz.initDOM(e),e},e.exports=s},function(e,t){function r(e){this.svg,this.visid=function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));for(var r="",i=0;i<e;i++)r+=t[Math.floor(Math.random()*t.length)];return r}(8),this.currentDate=Date.now()/1e3,this.link_elements,this.node_elements,this.container=!1,this.loadedNodes={},this.focusNodes=[],this.nodes,this.links,this.selected_id,this.setConfigOptions(e)}r.prototype.load=function(e){this.initD3(this.d3DOM),this.loadNewData(),this.updateGraph(),e&&this.updateSimulation("init")},r.prototype.setData=function(e,t){this.result&&this.clear(),this.result=e,this.load(t)},r.prototype.loadNewData=function(){this.nodes=jQuery.extend(!0,[],this.result.getNodes());for(var e=0;e<this.nodes.length;e++)this.loadedNodes[this.nodes[e].id]=this.nodes[e];this.links=this.result.getEdges()},r.prototype.updateData=function(e,t){this.setFocusNodeFromResult(e),this.result=e,this.reload(t,"update",this.fix_nodes)},r.prototype.setFocusNodeFromResult=function(e){var t=e.getFocusNode();t&&(this.selected_id=t,this.focusNodes.push(t))},r.prototype.setFilter=function(e,t){this.simulation.stop(),this.reload(t,"filter",!0)},r.prototype.wake=function(){this.simulation&&this.updateSimulation("wake")},r.prototype.hibernate=function(){this.simulation.stop()},r.prototype.reload=function(e,t,r){for(var i=0;i<this.nodes.length;i++)this.loadedNodes[this.nodes[i].id]=this.nodes[i];var n=jQuery.extend(!0,[],this.result.getNodesAndFringes());this.nodes=[];var s=this.loadedNodes[this.selected_id];for(i=0;i<n.length;i++){var o=n[i];this.loadedNodes[o.id]?o.id==this.selected_id?(this.loadedNodes[o.id].fx=this.loadedNodes[o.id].x,this.loadedNodes[o.id].fy=this.loadedNodes[o.id].y):r?this.loadedNodes[o.id].x&&(this.loadedNodes[o.id].fx=this.loadedNodes[o.id].x,this.loadedNodes[o.id].fy=this.loadedNodes[o.id].y):(this.loadedNodes[o.id].fx=null,this.loadedNodes[o.id].fy=null):(this.explode_out&&s.x&&(o.x=s.x,o.y=s.y),this.loadedNodes[o.id]=o),this.nodes.push(this.loadedNodes[o.id])}this.links=this.result.getLinks(),this.updateGraph(),e&&this.updateSimulation(t)},r.prototype.clear=function(){this.nodes=[],this.loadedNodes={},this.links=[],this.updateGraph(),jQuery(this.d3DOM).empty(),this.scale_factor=1},r.prototype.initDOM=function(e){this.width||(this.width=this.setWidth()),this.height||(this.height=this.setHeight()),this.d3DOM=e,this.result&&this.load(!0)},r.prototype.getAsDOM=function(){var e=document.createElement("div");return e.setAttribute("class","terminus-gviz-panel"),e.setAttribute("id",this.visid),e.setAttribute("width","100%"),this.container=e,e},r.prototype.setWidth=function(){if(this.container&&this.container.clientWidth)this.width=this.container.clientWidth;else if(this.container.parentNode&&this.container.parentNode.clientWidth)this.width=this.container.parentNode.clientWidth;else{var e=jQuery(this.container).width();0==e&&(e=jQuery(this.container.parentNode).width()),0==e&&(e=800),this.width=e}return this.width},r.prototype.setHeight=function(){if(this.container&&this.container.clientHeight)this.height=this.container.clientHeight;else if(this.container.parentNode&&this.container.parentNode.clientHeight)this.height=this.container.parentNode.clientHeight;else{var e=jQuery(this.container).height();0==e&&(e=jQuery(this.container.parentNode).height()),0==e&&(e=400),this.height=e}return this.height},r.prototype.initD3=function(e){var t=this;this.svg=d3.select(e).append("svg").attr("width",this.width).attr("height",this.height);this.simulation=d3.forceSimulation().force("link",d3.forceLink().distance((function(e){return t.getLinkDistance(e)})).id((function(e){return e.id}))).force("charge",d3.forceManyBody().strength((function(e){return t.getCharge(e)}))).force("collision",d3.forceCollide().radius((function(e){return t.getCollisionRadius(e)}))).force("center",d3.forceCenter(this.width/2,this.height/2)),this.drag_drop=d3.drag().on("start",(function(e){e.fx=e.x,e.fy=e.y})).on("drag",(function(e){t.simulation.restart(),e.fx=d3.event.x,e.fy=d3.event.y})).on("end",(function(e){e.fx=null,e.fx=null,t.simulation.stop()})),this.svg.append("rect").attr("width",this.width).attr("height",this.height).style("fill","none").style("pointer-events","all").call(d3.zoom().on("zoom",(function(){t.zoomed()}))),this.link_group=this.svg.append("g").classed("links",!0),this.node_group=this.svg.append("g").classed("nodes",!0)},r.prototype.zoomed=function(){this.current_transform=d3.event.transform,this.node_elements&&this.node_elements.attr("transform",d3.event.transform),this.link_elements&&this.link_elements.attr("transform",d3.event.transform)},r.prototype.updateGraph=function(e,t){var r=this,i=function(e){r.nodeSelected(e)};e=void 0!==e?e:this.nodes,t=void 0!==t?t:this.links,this.node_elements=this.node_group.selectAll("g").data(e),this.node_elements.exit().remove();var n=this.node_elements.enter().append("g");n.append("circle").style("opacity",.99).attr("r",(function(e){return r.getRadius(e)})).attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).attr("type",(function(e){return r.isFringe(e)?"fringe":"node"})).call(r.drag_drop).on("mouseover",(function(e){d3.select(this).style("cursor","pointer")})).on("mouseout",(function(e){d3.select(this).style("cursor","default")})).on("click",i),n.append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})).text((function(e){return r.getNodeIconUnicode(e)})).call(r.drag_drop).on("mouseover",(function(e){d3.select(this).style("cursor","pointer")})).on("mouseout",(function(e){d3.select(this).style("cursor","default")})).on("click",i),this.node_elements=n.merge(this.node_elements),this.styleNodeElements(),this.link_elements=this.link_group.selectAll("line").data(t),this.link_elements.exit().remove();var s=this.link_elements.enter().append("line");this.link_elements=s.merge(this.link_elements),this.styleLinkElements(),this.current_transform&&(this.node_elements&&this.node_elements.attr("transform",this.current_transform),this.link_elements&&this.link_elements.attr("transform",this.current_transform))},r.prototype.updateSimulation=function(e){var t=this,r=function(){t.node_elements.selectAll("circle").attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),t.node_elements.selectAll("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})),t.link_elements.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y}))};this.show_force?this.simulation.nodes(this.nodes).on("tick",r).force("link").links(this.links):this.simulation.nodes(this.nodes).on("end",r).force("link").links(this.links),this.nodes.length&&("wake"==e||"init"==e?this.simulation.restart():"filter"==e?this.simulation.restart():this.simulation.alpha(1).restart())},r.prototype.styleNodeElements=function(){var e=this;this.node_elements&&this.node_elements.each((function(t){var r=d3.select(this),i=r.select("circle");i.select("title").remove(),i.style("fill",e.getNodeColour(t)),i.attr("r",e.getRadius(t)),i.classed("highlighted",(function(t){return-1!=e.focusNodes.indexOf(t.id)})),i.append("title").classed("terminus-gnode-title",!0).text(e.getNodeText(t));var n=r.select("text");n.select("title").remove(),n.attr("text-anchor","middle").attr("title",e.getNodeText(t)).attr("dominant-baseline","central").style("font-family","'"+e.fontfam+"'").style("font-weight",e.getNodeIconWeight(t)).style("font-size",e.getNodeIconSize(t)).style("fill",e.getNodeIconColour(t)).text(e.getNodeIconUnicode(t)).append("title").classed("terminus-gnode-title",!0).text(e.getNodeText(t))}))},r.prototype.styleLinkElements=function(){var e=this;this.link_elements&&this.link_elements.each((function(t){var r=d3.select(this);r.select("title").remove(),r.attr("stroke-width",e.getLineWidth(t)),r.attr("marker-end",e.getEdgeArrow(t)),r.style("stroke",e.getEdgeColour(t)),r.append("title").classed("terminus-glink-title",!0).text(e.getLinkText(t))}))},r.prototype.getEdgeArrow=function(e){if(e){var t=this.getEdgeDirection(e),r=this.getEdgeColour(e);return this.svg.append("svg:defs").selectAll("marker").data([void 0]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",22).attr("refY",0).attr("markerWidth",this.getArrowWidth(e)).attr("markerHeight",this.getArrowHeight(e)).attr("orient","auto").attr("markerUnits","userSpaceOnUse").append("svg:path").attr("d",t).style("fill",r),"url(#undefined)"}return""},r.prototype.nodeSelected=function(e){this.selected_id==e.id&&this.selection_grows?(this.selection_grows=!1,this.styleNodeElements()):(this.selection_grows=!0,this.selected_id=e.id,this.styleNodeElements(),this.isFringe(e))},r.prototype.getScaleTransform=function(e,t,r){return"scale("+r+") translate("+e+","+t+")"},r.prototype.scale=function(e){new_mol_width=this.width*e,new_mol_height=this.height*e;var t=this.height-new_mol_height,r=this.width-new_mol_width,i=this;this.node_elements&&this.node_elements.transition().duration(750).attr("transform",(function(n){return i.getScaleTransform(r,t,e)})),this.link_elements&&this.link_elements.transition().duration(750).attr("transform",(function(n){return i.getScaleTransform(r,t,e)})),this.scale_factor=e,this.svg.selectAll("marker").attr("markerWidth",this.getArrowWidth()).attr("markerHeight",this.getArrowHeight())},r.prototype.scaleToFit=function(){0!==this.nodes.length&&(min_x=d3.min(this.nodes.map((function(e){return e.x}))),min_y=d3.min(this.nodes.map((function(e){return e.y}))),max_x=d3.max(this.nodes.map((function(e){return e.x}))),max_y=d3.max(this.nodes.map((function(e){return e.y}))),mol_width=max_x-min_x,mol_height=max_y-min_y,mol_width*=1.05,mol_height*=1.05,width_ratio=this.width/mol_width,height_ratio=this.height/mol_height,min_ratio=Math.min(width_ratio,height_ratio),min_ratio<1&&this.scale(min_ratio))},r.prototype.recentre=function(e){this.translated=!0,this.dcx=this.width/2-e.x,this.dcy=this.height/2-e.y,this.node_elements.attr("transform","translate("+this.dcx+","+this.dcy+")"),this.link_elements.attr("transform","translate("+this.dcx+","+this.dcy+")"),this.text_elements.attr("transform","translate("+this.dcx+","+this.dcy+")")},r.prototype.setConfigOptions=function(e){this.fontfam=e&&e.fontfamily()?e.fontfamily():"Font Awesome 5 Free",this.selected_grows=!e||void 0===e.selected_grows()||e.selected_grows(),this.show_force=!e||void 0===e.show_force()||e.show_force(),this.fix_nodes=!(!e||void 0===e.fix_nodes())&&e.fix_nodes(),this.explode_out=!(!e||void 0===e.explode_out())&&e.explode_out(),this.width=!(!e||!e.width())&&e.width(),this.height=!(!e||!e.height())&&e.height(),this.defaults={edge:{type:"edge",distance:e&&e.edge&&e.edge.distance?e.edge.distance:70,arrow:e&&e.edge&&e.edge.arrow?e.edge.arrow:{width:36,height:16},symmetric:!(e&&e.edge&&e.edge.symmetric)||e.edge.symmetric,color:e&&e.edge&&e.edge.color?e.edge.color:[150,150,255],weight:e&&e.edge&&e.edge.weight?e.edge.weight:.3,size:e&&e.edge&&e.edge.size?e.edge.size:4},node:{type:"node",radius:e&&e.node&&e.node.radius?e.node.radius:14,charge:e&&e.node&&e.node.charge?e.node.charge:-60,collisionRadius:e&&e.node&&e.node.collisionRadius?e.node.collisionRadius:20,color:e&&e.node&&e.node.color?e.node.color:[0,255,255],icon:{weight:e&&e.node&&e.node.icon&&e.node.icon.weight?e.node.icon.weight:900,color:e&&e.node&&e.node.icon&&e.node.icon.color?e.node.icon.color:[0,0,255],unicode:e&&e.node&&e.node.icon&&e.node.icon.unicode?e.node.icon.unicode:"",size:e&&e.node&&e.node.icon&&e.node.icon.size?e.node.icon.size:10,faclass:e&&e.node&&e.node.icon&&e.node.icon.faclass?e.node.icon.faclass:"fas fa-user-astronaut"},text:{color:e&&e.node&&e.node.text&&e.node.text.color?e.node.text.color:[0,0,0],size:e&&e.node&&e.node.icon&&e.node.text.size?e.node.text.size:10},border:{color:e&&e.node&&e.node.border&&e.node.border.color?e.node.border.color:[0,0,0],size:e&&e.node&&e.node.border&&e.node.border.size?e.node.border.size:10}}}},r.prototype.getMultiplier=function(e){var t=e&&e.size?e.size:1;return e.id==this.selected_id&&this.selection_grows&&(t*=2),t},r.prototype.getRadius=function(e){var t=e&&e.radius?e.radius:this.defaults.node.radius,r=this.scale_factor?Math.min(this.scale_factor*t,t):t;return r*=this.getMultiplier(e)},r.prototype.getCollisionRadius=function(e){var t=e&&e.collisionRadius?e.collisionRadius:this.defaults.node.collisionRadius;return(this.scale_factor?Math.min(this.scale_factor*t,t):t)*this.getMultiplier(e)},r.prototype.getCharge=function(e){var t=e&&e.charge?e.charge:this.defaults.node.charge;if(t<0)var r=this.scale_factor?Math.max(this.scale_factor*t,t):t;else r=this.scale_factor?Math.min(this.scale_factor*t,t):t;return r*this.getMultiplier(e)},r.prototype.getLinkDistance=function(e){var t=e&&e.distance?e.distance:this.defaults.edge.distance;return this.scale_factor?Math.min(this.scale_factor*t,t):t},r.prototype.getNodeIconSize=function(e){return e&&e.icon&&e.icon.size?e.icon.size+"em":this.getMultiplier(e)+"em"},r.prototype.getNodeColour=function(e){var t=e&&e.color?e.color:this.defaults.node.color;return this.isFringe(e)?"rgba("+t.join(",")+",0.25)":"rgb("+t.join(",")+")"},r.prototype.getNodeIcon=function(e){return e&&e.icon&&e.icon.faclass?e.icon.faclass:this.defaults.node.icon.faclass},r.prototype.getNodeIconUnicode=function(e){if(e&&void 0!==e.icon){if(e.icon.unicode)return e.icon.unicode;if(!0===e.icon.label)return this.getNodeText(e);if(e.icon.label)return e.icon.label}return this.defaults.node.icon.unicode},r.prototype.getNodeIconWeight=function(e){return e&&e.icon&&e.icon.weight?e.icon.weight:this.defaults.node.icon.weight},r.prototype.getNodeIconColour=function(e){var t=e&&e.icon&&e.icon.color?e.icon.color:this.defaults.node.icon.color;return this.isFringe(e)?"rgba("+t.join(",")+",0.25)":"rgb("+t.join(",")+")"},r.prototype.getEdgeColour=function(e){var t=e&&e.color?e.color:this.defaults.edge.color,r=e&&e.weight?e.weight:this.defaults.edge.weight;return"rgba("+t.concat([r]).join(",")+")"},r.prototype.getEdgeDirection=function(e){return e&&e.symmetric?"M10,-5 L0,0 L10,5":"M0,-5 L10,0 L0,5"},r.prototype.getLineWidth=function(e){return e&&e.size?e.size:this.defaults.edge.size},r.prototype.getNodeText=function(e){return e&&e.text?e.text:e.id},r.prototype.getLinkText=function(e){return e&&e.text?e.text:e&&e.id?e.id:""},r.prototype.getArrowWidth=function(e){var t=e&&e.arrow&&e.arrow.width?e.arrow.width:this.defaults.edge.arrow.width;return this.scale_factor?Math.min(this.scale_factor*t,t):t},r.prototype.getArrowHeight=function(e){var t=e&&e.arrow&&e.arrow.height?e.arrow.height:this.defaults.edge.arrow.height;return this.scale_factor?Math.min(this.scale_factor*t,t):t},r.prototype.isNeighbourLink=function(e,t){return t.target.id===e.id||t.source.id===e.id},r.prototype.isFringe=function(e){return this.result&&this.result.added&&this.result.added.upgraded&&-1!=this.result.added.upgraded.indexOf(e.id)?(e.type="node",!1):e.type&&"fringe"==e.type},e.exports=r},function(e,t,r){var i=r(0);function n(){this.holder=document.createElement("div")}n.prototype.options=function(e){for(var t in e)this[t]=e[t];return this},n.prototype.render=function(e){return e&&(this.stream=e),i.removeChildren(this.holder),this.holder},e.exports=n},function(e,t){function r(){}r.prototype.options=function(e){return this.options=e,this},r.prototype.render=function(e){if(e&&(this.chooser=e),0==this.chooser.config.show_empty()&&this.chooser.count()<1)return!1;var t=document.createElement("span");t.setAttribute("class","woql-chooser");var r=document.createElement("select");r.setAttribute("class"," woql-chooser");var i=this;r.addEventListener("change",(function(){i.chooser.set(this.value)}));var n=[];for(this.chooser.config.show_empty()&&n.push(this.getEmptyOption()),this.chooser.first();choice=this.chooser.next();){var s=this.createOptionFromChoice(choice);n.push(s)}for(var o=0;o<n.length;o++)r.appendChild(n[o]);return t.appendChild(r),t},r.prototype.getEmptyOption=function(){var e={id:"",label:this.chooser.config.show_empty()};return this.createOptionFromChoice(e)},r.prototype.createOptionFromChoice=function(e){var t=document.createElement("option");return t.setAttribute("class","terminus-woql-chooser-choice"),t.value=e.id,e.selected&&(t.selected=!0),"string"==typeof e.label?t.appendChild(document.createTextNode(e.label)):e.label&&t.appendChild(e.label),e.title&&t.setAttribute("title",e.title),t},e.exports=r},function(module,exports,__webpack_require__){var TerminusCodeSnippet=__webpack_require__(10),UTILS=__webpack_require__(4),HTMLHelper=__webpack_require__(0),TerminusClient=__webpack_require__(1),SimpleFrameViewer=__webpack_require__(105),Datatypes=__webpack_require__(39),DatatypeRenderers=__webpack_require__(42);function DocumentPane(e,t,r){this.client=e,this.container=document.createElement("span"),this.container.setAttribute("class","terminus-document-cont"),this.defaultPaneView={showConfig:!1,editConfig:!1,intro:!1,loadSchema:!1},this.docid=t||!1,this.clsid=r||!1,this.datatypes=new DatatypeRenderers}DocumentPane.prototype.load=function(){var e=this;return(this.docid||this.clsid)&&(this.frame=new TerminusClient.DocumentFrame(this.client,this.view),this.frame.owner=this),this.docid?this.frame.load(this.docid,this.clsid).then((function(){return e.filterFrame()})):this.clsid?this.frame.load(!1,this.clsid).then((function(){e.frame.document.fillFromSchema("_:"),e.filterFrame()})):Promise.reject("Either document id or class id must be specified before loading a document")},DocumentPane.prototype.options=function(e){return this.showQuery=!(!e||void 0===e.showQuery)&&e.showQuery,this.showConfig=!(!e||void 0===e.showConfig)&&e.showConfig,this.editConfig=!(!e||void 0===e.editConfig)&&e.editConfig,this.intro=!(!e||void 0===e.intro)&&e.intro,this.documentLoader=!(!e||void 0===e.loadDocument)&&e.loadDocument,this.loadSchema=!(!e||void 0===e.loadSchema)&&e.loadSchema,this.viewers=!(!e||void 0===e.viewers)&&e.viewers,Datatypes.initialiseDataRenderers(this.datatypes,!1,e),this},DocumentPane.prototype.filterFrame=function(){var e=this;this.frame.applyRules(!1,!1,(function(t,r){if(void 0!==r.render())t.render=r.render();else{if(r.renderer())var i=e.loadRenderer(r.renderer(),t,r.args);i&&i.render&&(t.render=function(e){return i.render(e)})}r.compare()&&(t.compare=r.compare())}))},DocumentPane.prototype.loadDocument=function(e,t){return this.docid=e,this.view=t,this.load()},DocumentPane.prototype.loadClass=function(e,t){return this.clsid=e,this.docid=!1,this.view=t,this.load()},DocumentPane.prototype.setClassLoader=function(e){return this.classLoader=e,this.queryPane&&this.queryPane.appendChild(this.classLoader),this},DocumentPane.prototype.getQueryPane=function(){var e=document.createElement("div");return e.setAttribute("class","terminus-document-query"),this.documentLoader&&e.appendChild(this.documentLoader),this.classLoader&&e.appendChild(this.classLoader),e},DocumentPane.prototype.getAsDOM=function(){var e=this;this.intro&&this.container.appendChild(UTILS.getHeaderDom(this.intro));var t=document.createElement("span");if(t.setAttribute("class","pane-config-icons"),this.container.appendChild(t),this.showQuery&&(this.documentLoader||this.classLoader)){var r=function(){s.title="Click to Hide Query",o.setAttribute("class","fas fa fa-times-circle"),t.nextSibling?a.container.insertBefore(n,t.nextSibling):a.container.appendChild(n)},i=function(){s.title="Click to View Query",o.setAttribute("class","fas fa fa-search"),a.container.removeChild(n)},n=this.getQueryPane(),s=document.createElement("span");s.setAttribute("class","document-pane-config");var o=document.createElement("i");s.appendChild(o),"always"!=this.showQuery&&t.appendChild(s);var a=this;s.addEventListener("click",(function(){e.showingQuery?i():r(),e.showingQuery=!e.showingQuery})),r(),"icon"==this.showQuery&&i(),this.queryPane=n}if(this.showConfig){var u=function(){h.title="Click to Hide View Configuration",p.setAttribute("class","fas fa fa-times-circle"),t.nextSibling?a.container.insertBefore(d,t.nextSibling):a.container.appendChild(d),(a.input.snippet.value||a.input.snippet.innerHTML)&&a.input.stylizeSnippet()},c=function(){h.title="Click to View Configuration",p.setAttribute("class","fas fa fa-vial"),a.container.removeChild(d)};this.showingConfig="icon"!=this.showConfig;var l=this.editConfig?"edit":"view";this.input=this.createInput(l);var d=this.input.getAsDOM(),h=document.createElement("span");h.addEventListener("mouseover",(function(){this.style.cursor="pointer"})),h.setAttribute("class","result-pane-config");var p=document.createElement("i");h.appendChild(p),t.appendChild(h);a=this;h.addEventListener("click",(function(){e.showingConfig?c():u(),e.showingConfig=!e.showingConfig})),u(),"icon"==this.showConfig&&c()}return this.resultDOM=document.createElement("span"),this.resultDOM.setAttribute("class","terminus-document-results"),this.container.appendChild(this.resultDOM),this.renderResult(),this.container},DocumentPane.prototype.renderResult=function(){if(this.resultDOM?HTMLHelper.removeChildren(this.resultDOM):(this.resultDOM=document.createElement("span"),this.resultDOM.setAttribute("class","terminus-document-results"),this.container.appendChild(this.resultDOM)),this.frame&&this.frame.document.render){var e=this.frame.document.render();e&&this.resultDOM.appendChild(e)}},DocumentPane.prototype.loadRenderer=function(rendname,frame,args,termframe){var evalstr="new "+rendname+"(";args&&(evalstr+=JSON.stringify(args)),evalstr+=");";try{var nr=eval(evalstr);return nr.frame=frame,nr.datatypes=this.datatypes,nr}catch(e){return console.log("Failed to load "+rendname+e.toString()),!1}},DocumentPane.prototype.createInput=function(e){var t=new TerminusCodeSnippet("rule",e);this.view&&t.setQuery(this.view);var r=this;return t.submit=function(e){r.updateView(e)},t},DocumentPane.prototype.updateView=function(e){this.view=e,this.frame.options(this.view),this.input&&this.input.setQuery(this.view),this.frame.applyRulesToDocument(this.frame.document,this.frame.config),this.frame.renderer=this.frame.document,this.renderResult()},DocumentPane.prototype.updateResult=function(e){this.result=e,this.updateQuery(e.query),this.refreshViews()},DocumentPane.prototype.empty=function(){return void 0===this.view},DocumentPane.prototype.clearMessages=function(){},DocumentPane.prototype.showError=function(){},DocumentPane.prototype.submitQuery=function(e){return this.clearMessages(),tdv.owner=this,tdv.setDatatypes(Datatypes.initialiseDataRenderers),tdv.loadDocument(id).then((function(){var e=tdv.render();e&&holder.appendChild(e)})),holder},module.exports=DocumentPane},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0);function s(){}s.prototype.getScope=function(e){return e.isProperty()?"property":e.isObject()?"object":e.isData()?"data":void 0},s.prototype.setDatatypeViewers=function(e){this.datatypes=e},s.prototype.getDatatypeViewer=function(e,t){var r=e.display_options.dataviewer;if(!r){if(e.isChoice())var i="oneOf";else if(e.isDocument())i="document";else i=e.getType();if(t&&"edit"==t)var n=this.datatypes.getEditor(i);else n=this.datatypes.getRenderer(i);r=n.name}if(e.display_options.args)var s=e.display_options.args;else s=!(!n||!n.args)&&n.args;var o=this.datatypes.createRenderer(r,s);return o.type=e.getType(),o},s.prototype.render=function(e){if(e||(e=this.frame),e){var t=this.getScope(e);if(e.display_options.header_features&&e.display_options.header_features.length)var r=this.getFeaturesDOM(e.display_options.header_features,t,e,e.display_options.mode);else r=!1;if(e.display_options.features&&e.display_options.features.length)var i=this.getFeaturesDOM(e.display_options.features,t,e,e.display_options.mode);else i=!1;var s="object"==t||"property"==t?"page":"line",o=n.getFrameDOM(t,e,s,r,i);return!!o&&(this.framedom&&this.framedom.replaceWith(o),this.framedom=o,e.display_options.style&&this.framedom.setAttribute("style",e.display_options.style),this.framedom)}},s.prototype.getFeaturesDOM=function(e,t,r,s){var o=document.createElement("span");o.setAttribute("class","terminus-features terminus-"+t+"-features features-"+function(e){for(var t="",r=0;r<e.length;r++)"object"==i(e[r])?t+=Object.keys(e[r])[0]+"-":t+=e[r]+"-";return t.substring(0,t.length-1)}(e));for(var a=0;a<e.length;a++){var u=!1,c=!1,l=!1,d=e[a];if("object"==i(d)){if(d=Object.keys(e[a])[0],e[a][d].hidden)continue;e[a][d].style&&(c=e[a][d].style),e[a][d].render&&(u=e[a][d].render),e[a][d].args&&(l=e[a][d].args)}else if("string"!=typeof d)continue;if(u){var h=u(r,d,t,s,l);c&&h.setAttribute("style",c),h&&o.appendChild(h)}else if("value"==d)if("data"==t){var p=this.getDatatypeViewer(r,s,l);if(p)h=p.renderFrame(r,this);else h=document.createTextNode(r.get());h&&(c&&h.setAttribute("style",c),o.appendChild(h))}else if("object"==t)for(var m=r.renderProperties(),f=0;f<m.length;f++)c&&m[f].setAttribute("style",c),o.appendChild(m[f]);else{m=r.renderValues();var y=document.createElement("span");c&&y.setAttribute("style",c);for(f=0;f<m.length;f++)y.appendChild(m[f]);o.appendChild(y)}else{if("id"==d&&"edit"==s&&"object"==t&&r.isNew())h=this.datatypes.createRenderer("HTMLStringEditor",l).renderFrame(r,this);else h=!1;(h=n.getFeatureDOM(r,d,t,s,l,h))&&(c&&h.setAttribute("style",c),o.appendChild(h))}}return o},e.exports=s},function(e,t,r){var n=r(1),s=r(107),o=r(0),a=r(9);function u(e,t){this.ui=e,this.tv=new a(e.client),this.options=t,this.panes=[],this.new_pane=!1,this.new_pane_type=!1,this.meta={},this.container=document.createElement("div"),this.container.setAttribute("class","terminus-query-page")}u.prototype.newPaneOptions=function(){return{showQuery:"always",editQuery:!0,showHeader:!0,css:"terminus-full-query-pane"}},u.prototype.defaultResultOptions=function(){return{showConfig:"icon",editConfig:!0,showHeader:!1,viewers:[new n.View.graph]}},u.prototype.getNewQueryPane=function(){var e=n.View.table();return this.tv.getQueryPane(!1,[e],!1,[this.defaultResultOptions()],this.newPaneOptions())},u.prototype.addQueryPane=function(){var e=this.getNewQueryPane();return this.panes.push(e),e},u.prototype.addScriptPane=function(e){var t=new s(this.ui.client,e);return this.panes.push(t),t},u.prototype.addScriptPaneDOM=function(){var e=new s(this.ui.client);this.addNewPaneDOM(e)},u.prototype.addQueryPaneDOM=function(){var e=this.addQueryPane();this.addNewPaneDOM(e)},u.prototype.setNewDocumentPaneDOM=function(){this.new_pane=this.tv.getDocumentPane(),this.new_pane_type="document"},u.prototype.addNewPaneDOM=function(e){this.panes[this.panes.length-1];this.panes.push(e);var t=e.getAsDOM(),r=this.getPaneHeader();t.prepend(r),this.paneDOM.appendChild(t)},u.prototype.getAsDOM=function(e){var t=this;o.removeChildren(this.container),this.paneDOM||(this.paneDOM=this.getPanesDOM()),this.container.appendChild(this.paneDOM),this.controlDOM=this.getControlsDOM();var r=document.createElement("span");r.setAttribute("class","terminus-new-query-pane");var i=document.createElement("button");return i.setAttribute("class","terminus-btn terminus-query-btn"),i.appendChild(document.createTextNode("Add New Query")),i.addEventListener("click",(function(){return t.addQueryPaneDOM()})),r.appendChild(i),this.container.appendChild(r),this.container},u.prototype.getPanesDOM=function(e){this.panesDOM=document.createElement("div"),this.panesDOM.setAttribute("class","terminus-query-panes");for(var t=0;t<this.panes.length;t++){var r=this.panes[t].getAsDOM(),i=this.getPaneHeader();r.prepend(i),this.panesDOM.appendChild(r)}this.new_pane||(this.new_pane=this.getNewQueryPane());var n=this.new_pane.getAsDOM(),s=this.getNewPaneHeader();return this.new_pane.headerDOM=s,this.new_pane.paneDOM=n,n.prepend(s),this.panesDOM.appendChild(n),this.panesDOM},u.prototype.removePane=function(e,t){o.removeChildren(e.paneDOM),e.paneDOM.appendChild(e.headerDOM),this.panes[i]&&this.panes.splice(i,1)},u.prototype.showPane=function(e){},u.prototype.hidePane=function(e){},u.prototype.getPaneHeader=function(){return document.createElement("div")},u.prototype.getNewPaneHeader=function(){return document.createElement("div")},u.prototype.getControlsDOM=function(e){var t=this,r=document.createElement("div");if(r.setAttribute("class","terminus-query-page-controls"),"new"==e){var i=document.createElement("button");i.setAttribute("class","terminus-btn terminus-query-btn"),i.appendChild(document.createTextNode("WOQL Query")),r.appendChild(i);var n=document.createElement("button");n.setAttribute("class","terminus-btn terminus-query-btn"),n.appendChild(document.createTextNode("Script")),r.appendChild(n);var s=document.createElement("button");s.setAttribute("class","terminus-btn terminus-query-btn"),s.appendChild(document.createTextNode("Document Query")),s.addEventListener("click",(function(){return t.setNewDocumentPaneDOM()})),r.appendChild(s)}else{var o=document.createElement("button");o.setAttribute("class","terminus-btn terminus-query-btn"),o.appendChild(document.createTextNode("Save")),r.appendChild(o);var a=document.createElement("button");a.setAttribute("class","terminus-btn terminus-query-btn"),a.appendChild(document.createTextNode("Close")),r.appendChild(a);var u=document.createElement("button");u.setAttribute("class","terminus-btn terminus-query-btn"),u.appendChild(document.createTextNode("Collapse")),r.appendChild(u)}return r},e.exports=u},function(module,exports,__webpack_require__){var TerminusClient=__webpack_require__(1),TerminusCodeSnippet=__webpack_require__(10),UTILS=__webpack_require__(4),HTMLHelper=__webpack_require__(0);function ScriptPane(e,t){this.client=e,this.script=t||"",this.container=document.createElement("div"),this.container.setAttribute("class","terminus-script-pane-cont")}ScriptPane.prototype.empty=function(){return""==this.script},ScriptPane.prototype.createInput=function(e){var t=new TerminusCodeSnippet("code","edit");this.script&&t.setQuery(this.script);var r=this;return t.submit=function(t){r.executeScript(t,e)},t},ScriptPane.prototype.executeScript=function(script,ui){ui&&ui.clearMessages(),this.script=script;var client=this.client,WOQL=TerminusClient.WOQL;try{var res=eval(script);res&&this.updateResult(res)}catch(e){ui&&ui.showError(e),console.error(e)}},ScriptPane.prototype.showOKMessage=function(){var e=document.createTextNode("Script executed ok");this.updateResult(e)},ScriptPane.prototype.updateResult=function(e){HTMLHelper.removeChildren(this.resultDOM),this.resultDOM.appendChild(e)},ScriptPane.prototype.getAsDOM=function(e){return this.container.appendChild(UTILS.getHeaderDom("Enter Script")),this.input=this.createInput(e),this.container.appendChild(this.input.getAsDOM()),this.resultDOM=document.createElement("div"),this.resultDOM.setAttribute("class","terminus-script-results"),this.result&&this.resultDOM.appendChild(this.result),this.container.appendChild(this.resultDOM),this.container},module.exports=ScriptPane},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(4),s=r(1),o=r(0),a=r(9);function u(e){this.ui=e,this.tv=new a(e.client),this.mode="view",this.format="turtle",this.confirm_before_update=!1,this.woql=s.WOQL,this.views={classes:{title:"Classes"},properties:{title:"Properties"},owl:{title:"OWL"}},this.views_dom=document.createElement("div"),this.current_view="classes",this.retrieveViews()}u.prototype.getClassesPane=function(){var e=s.WOQL,t=this.woql.from(this.ui.client.connectionConfig.dbURL()).limit(100).start(0).and(e.quad("v:Class","rdf:type","owl:Class","db:schema"),e.opt().quad("v:Class","rdfs:label","v:Label","db:schema"),e.opt().quad("v:Class","rdfs:subClassOf","v:Parent","db:schema"),e.opt().quad("v:Child","rdfs:subClassOf","v:Class","db:schema"),e.opt().quad("v:Class","rdfs:comment","v:Comment","db:schema"),e.opt().quad("v:Class","tcs:tag","v:Abstract","db:schema")),r=s.View.table();r.column_order("Class","Label","Comment","Parent","Child","Abstract"),r.column("Comment").header("Description"),r.column("Class").header("Class ID"),r.column("Label").header("Name"),r.column("Child").header("Subclasses"),r.column("Parent").header("Parent Classes"),r.column("Range").header("Type");var i=s.View.graph();i.edges(["v:Class","v:Parent"],["v:Child","v:Class"],["v:Class","v:Abstract"]),i.height(800),i.width(1200),i.edge("v:Class","v:Parent").text("Parent Class").distance(120),i.edge("v:Child","v:Class").text("Parent Class").distance(120),i.edge("v:Class","v:Abstract").text("Abstract Class").weight(2).color([0,0,0]),i.node("Parent").size(20).color([180,220,250]).icon({label:!0,size:.7,color:[90,90,140]}),i.node("Class").text("v:Label").size(32).collisionRadius(80).icon({label:!0,size:.7,color:[24,34,89]});var n={viewers:[i]};return this.tv.getQueryPane(t,[r],!1,[n])},u.prototype.getPropertiesPane=function(){var e=this.woql.from(this.ui.client.connectionConfig.dbURL()).limit(100).start(0).propertyMetadata(),t=s.View.table();t.column_order("Property","Label","Range","Domain","Comment"),t.column("Comment").header("Description"),t.column("Property").header("Property ID"),t.column("Label").header("Name"),t.column("Domain").header("Domain"),t.column("Range").header("Type");var r=s.View.graph();r.height(800),r.width(1200),r.edges(["Domain","Property"],["Property","Range"]),r.edge("Domain","Property").text("Domain Class").color([20,200,20]).distance(120),r.edge("Property","Range").text("Property Type").distance(100),r.node("Type").hidden(!0),r.node("Range").text("v:Range").size(20).collisionRadius(100).color([220,250,180]).icon({label:!0,size:.8,color:[50,60,40]}),r.node("Range").v("Type").in("owl:datatypeProperty").hidden(!0),r.node("Property").text("v:Label").size(24).collisionRadius(100).color([180,220,250]).icon({label:!0,size:.8,color:[50,60,40]}),r.node("Domain").color([220,250,180]).size(20).collisionRadius(100).icon({label:!0,size:.7,color:[24,34,89]});var i={viewers:[r]};return this.tv.getQueryPane(e,[t],!1,[i])},u.prototype.refreshPanes=function(){this.views.classes.pane&&this.views.classes.pane.load(),this.views.properties.pane&&this.views.properties.pane.load()},u.prototype.retrieveViews=function(){if(!this.views.classes.pane){var e=this.getClassesPane();this.views.classes.pane=e;var t=e.getAsDOM();"classes"!=this.current_view&&(t.style.display="none"),this.views_dom.appendChild(t),e.load(),this.views.classes.dom=t}if(!this.views.properties.pane){var r=this.getPropertiesPane();this.views.properties.pane=r;var i=r.getAsDOM();"properties"!=this.current_view&&(i.style.display="none"),this.views_dom.appendChild(i),this.views.properties.dom=i,r.load()}this.views.owl.dom||(this.views.owl.dom=this.getOWLView(),this.views_dom.appendChild(this.views.owl.dom),"owl"!=this.current_view&&(this.views.owl.dom.style.display="none"))},u.prototype.getAsDOM=function(){return this.holder=document.createElement("div"),this.controldom=document.createElement("div"),this.controldom.setAttribute("class","terminus-schema-controls"),this.controldom.appendChild(this.getTabsDOM()),this.view=document.createElement("div"),this.view.setAttribute("class","terminus-schema-view"),this.view.appendChild(this.views_dom),this.pagedom=document.createElement("div"),this.pagedom.setAttribute("class","terminus-schema-viewer"),this.holder.appendChild(this.controldom),this.pagedom.appendChild(this.view),this.holder.appendChild(this.pagedom),this.holder},u.prototype.getOWLView=function(){var e=document.createElement("div");return this.loadSchema(),e},u.prototype.updateOWLContents=function(){var e=this.views.owl.dom;o.removeChildren(e),"view"==this.mode?(e.appendChild(this.getSchemaEditButton()),e.appendChild(this.getSchemaViewDOM())):"edit"==this.mode&&(e.appendChild(this.getSchemaSaveButtons()),e.appendChild(this.getSchemaEditDOM()),e.appendChild(this.getSchemaSaveButtons()))},u.prototype.getTabsDOM=function(){var e=document.createElement("ul");for(var t in e.setAttribute("class","terminus-ul-horizontal"),this.views){var r=this.getTabDOM(t,this.views[t].title);e.appendChild(r),t==this.current_view&&n.setSelectedSubMenu(r)}return e},u.prototype.getTabDOM=function(e,t){var r=document.createElement("a");r.setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var i=this;return r.addEventListener("click",(function(){i.switchView(this,e)})),r.appendChild(document.createTextNode(t)),r},u.prototype.switchView=function(e,t){n.setSelectedSubMenu(e),t!=this.current_view&&(this.current_view=t,this.toggleTabs())},u.prototype.toggleTabs=function(){for(var e in this.views)this.views[e].dom&&e==this.current_view?this.views[e].dom.style.display="block":this.views[e].dom&&(this.views[e].dom.style.display="none")},u.prototype.loadSchema=function(e,t){var r=this;return this.ui.showBusy("Fetching Database Schema"),this.ui.client.getSchema(!1,{"terminus:encoding":"terminus:"+this.format}).then((function(e){r.ui.clearBusy(),r.schema=e,r.updateOWLContents()})).catch((function(e){r.ui.clearBusy(),r.ui.showError(e)}))},u.prototype.getSchemaSaveButtons=function(){var e=document.createElement("span");return e.setAttribute("class","terminus-schema-save-buttons"),e.appendChild(this.getCancelButton()),e.appendChild(this.getSaveButton()),e},u.prototype.getCancelButton=function(e){var t=this;return this.getSchemaButton("Cancel","cancel_update",(function(){t.ui.clearMessages(),t.mode="view",t.updateOWLContents()}))},u.prototype.getSaveButton=function(){var e=this;return this.getSchemaButton("Save","update_schema",(function(){e.ui.clearMessages();var t=e.schema_edit_dom.value;"object"==i(e.schema)&&(t=JSON.parse(t));var r={};return r["terminus:encoding"]="terminus:"+e.format,s.UTILS.empty(e.schema_edit_dom_name)?r.schemaId=e.ui.client.connectionConfig.dbURL()+"/schema":r.schemaId=e.ui.client.connectionConfig.dbURL()+"/"+e.schema_edit_dom_name.value,e.updateSchema(t,r)}))},u.prototype.getSchemaEditButton=function(){var e=document.createElement("span");e.setAttribute("class","terminus-schema-save-buttons");var t=this,r=this.getSchemaButton("Edit","update_schema",(function(){t.mode="edit",t.updateOWLContents()}));return e.appendChild(r),e},u.prototype.updateSchema=function(e,t){this.ui.showBusy("Updating Database Schema");var r=this;return this.ui.client.updateSchema(!1,e,t).then((function(e){if(e["terminus:status"]&&"terminus:success"==e["terminus:status"])r.ui.showBusy("Retrieving updated schema"),r.mode="view",r.loadSchema("Successfully Updated Schema"),r.refreshPanes(),r.updateOWLContents();else{if(!e["terminus:status"]||"terminus:failure"!=e["terminus:status"])throw new Error("Update Schema returned no terminus:status code");r.ui.clearBusy(),r.ui.showViolations(e["terminus:witnesses"],"schema")}})).catch((function(e){r.ui.clearBusy(),e.data&&e.data["terminus:witnesses"]?r.ui.showViolations(e.data["terminus:witnesses"],"schema"):r.ui.showError(e)}))},u.prototype.getSchemaEditDOM=function(){var e=document.createElement("div");if(e.setAttribute("class","terminus-schema-page terminus-schema-edit-page"),this.ui.showControl("add_new_library"))var t=this.getSchemaNameInputDOM(e);var r=document.createElement("textarea");return r.setAttribute("class","terminus-schema-edit terminus-schema-textarea"),r.setAttribute("width","100%"),r.setAttribute("style","min-width: 400px; min-height: 400px;"),"string"==typeof this.schema?r.innerHTML=this.schema:"object"==i(this.schema)&&(r.innerHTML=JSON.stringify(this.schema,0,4)),this.ui.showControl("add_new_library")&&(this.schema_edit_dom_name=t),this.schema_edit_dom=r,e.appendChild(r),n.stylizeEditor(this.ui,r,"schema","turtle"),e},u.prototype.getSchemaViewDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-schema-page terminus-schema-view-page");var t=document.createElement("pre");if(t.setAttribute("class","terminus-schema-view terminus-scheme-pre"),"string"==typeof this.schema){var r=this.schema.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");t.innerHTML=r}else"object"==i(this.schema)&&(t.innerHTML=JSON.stringify(this.schema,0,4));return n.stylizeCodeDisplay(this.ui,t,e,"turtle")||e.appendChild(t),e},u.prototype.getSchemaButton=function(e,t,r){var i=document.createElement("button");return i.appendChild(document.createTextNode(e)),i.setAttribute("class","terminus-btn terminus-control-button terminus-schema-"+t),i.addEventListener("click",r),i},e.exports=u},function(e,t,r){var i=r(110),n=r(4),s=r(0);function o(e){this.ui=e}function a(e){this.ui=e,this.server=this.ui.server(),this.max_cell_size=500,this.max_word_size=40,this.css_base="https://terminusdb.github.io/terminus-dashboard/dist/"}o.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-server-controller");var t=this;if(this.ui&&this.ui.server()){document.createElement("div").setAttribute("class","terminus-server-connection");var r=document.createElement("div");r.setAttribute("class","span3");var i=document.createElement("ul");if(i.setAttribute("class","terminus-ul"),r.appendChild(i),e.appendChild(r),this.ui.showControl("change-server")){(o=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");t=this;o.addEventListener("click",(function(){n.activateSelectedNav(this,t),t.ui.clearMessages(),t.ui.showLoadURLPage()})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-link"),o.appendChild(a);var s=document.createTextNode("Change Server");o.appendChild(s),i.appendChild(o)}if(this.ui.showControl("db")){(o=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");t=this;o.addEventListener("click",(function(){n.activateSelectedNav(this,t),t.ui.db()&&(t.ui.clearDB(),t.ui.redrawControls()),t.ui.clearMessages(),t.ui.showServerMainPage()})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-home"),o.appendChild(a);s=document.createTextNode("Home");o.appendChild(s),i.appendChild(o)}if(this.ui.showControl("create_database")){(o=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");t=this;o.addEventListener("click",(function(){n.activateSelectedNav(this,t),t.ui.db()&&(t.ui.clearDB(),t.ui.redrawControls()),t.ui.clearMessages(),t.ui.showCreateDBPage()})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-plus"),o.appendChild(a);s=document.createTextNode("Create Database");o.appendChild(s),i.appendChild(o)}if(this.ui.showControl("collaborate")){var o;(o=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var a;t=this;o.addEventListener("click",(function(){n.activateSelectedNav(this,t),t.ui.db()&&(t.ui.clearDB(),t.ui.redrawControls()),t.ui.clearMessages(),t.ui.showCollaboratePage()})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-share-alt"),o.appendChild(a);s=document.createTextNode("Collaborate");o.appendChild(s),i.appendChild(o)}}return e},o.prototype.getServerLabelDOM=function(){var e=this.ui.client.connection.getServerRecord(),t=e&&e["rdfs:label"]&&e["rdfs:label"]["@value"]?e["rdfs:label"]["@value"]:this.ui.server(),r=e&&e["rdfs:comment"]&&e["rdfs:comment"]["@value"]?e["rdfs:comment"]["@value"]:"";r+=" Server URL: "+this.ui.server();var i=document.createElement("span");return i.setAttribute("class","terminus-server-value"),i.setAttribute("title",r),i.appendChild(document.createTextNode(t)),i=document.createElement("div")},a.prototype.getAsDOM=function(e){var t=this,r=document.createElement("span");if(r.setAttribute("class","terminus-server-home-page"),this.ui.server()){var i=document.createElement("span");if(i.setAttribute("class","terminus-server-home"),this.ui.showView("server")&&i.appendChild(this.getServerDetailsDOM()),this.ui.showView("change-server")){var n=document.createElement("button");n.setAttribute("class","terminus-control-button terminus-change-server-button terminus-btn"),n.appendChild(document.createTextNode("Disconnect")),n.addEventListener("click",(function(){t.ui.db()&&t.ui.clearDB(),t.ui.showLoadURLPage()}))}if(this.ui.showView("create_database")){var s=document.createElement("button");s.setAttribute("class","terminus-control-button terminus-create-db-button terminus-btn"),s.appendChild(document.createTextNode("Create New Database")),s.addEventListener("click",(function(){t.ui.db()&&t.ui.clearDB(),t.ui.clearMessages(),t.ui.showCreateDBPage()}))}this.ui.showView("db")&&i.appendChild(this.getDBListDOM()),r.appendChild(i)}else t.ui.showLoadURLPage();return r},a.prototype.getServerDetailsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-server-details terminus-welcome-box terminus-no-res-alert");var t=document.createElement("img");t.setAttribute("class","terminus-server-main-logo");var r=this.css_base+"css/img/TerminusDB_Logo_Original.png";t.setAttribute("src",r),e.appendChild(t);var i=document.createElement("p");return i.setAttribute("class","terminus-server-running"),i.appendChild(document.createTextNode("Terminus Server running at ")),i.appendChild(document.createTextNode(this.ui.server())),e.appendChild(i),e},a.prototype.wrapTableLinkCell=function(e,t,r){var i=this,n=document.createElement("p");return n.setAttribute("class","terminus-table-content"),s.wrapShortenedText(n,r,this.max_cell_size,this.max_word_size),e.addEventListener("click",(function(){i.ui.connectToDB(t),i.ui.showDBMainPage()})),n},a.prototype.getDBListDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-db-list");var t=document.createElement("table");t.setAttribute("class","terminus-db-list terminus-db-size terminus-hover-table terminus-margin-top");var r=document.createElement("thead"),n=document.createElement("tr"),s=document.createElement("th");s.appendChild(document.createTextNode("Database ID")),s.setAttribute("class","terminus-db-id terminus-table-header-full-css"),s.style.width="20%";var o=document.createElement("th");o.appendChild(document.createTextNode("Title")),o.setAttribute("class","terminus-db-title terminus-table-header-full-css"),o.style.width="30%";var a=document.createElement("th");a.appendChild(document.createTextNode("Description")),a.setAttribute("class","terminus-db-description terminus-table-header-full-css"),a.style.width="50%";var u=document.createElement("th");u.setAttribute("class","terminus-db-size terminus-table-header-full-css"),u.appendChild(document.createTextNode("Size"));var c=document.createElement("th");c.setAttribute("class","terminus-db-created terminus-table-header-full-css"),c.appendChild(document.createTextNode("Created"));var l=document.createElement("th");l.appendChild(document.createTextNode("Delete")),l.setAttribute("class","terminus-db-delete terminus-table-header-full-css"),n.appendChild(s),n.appendChild(o),n.appendChild(a),r.appendChild(n),t.appendChild(r);var d=document.createElement("tbody"),h=this.ui.client.connection.getServerDBRecords();for(var p in h){var m=h[p],f=p.split(":")[1],y=document.createElement("tr"),g=document.createElement("td");g.appendChild(this.wrapTableLinkCell(g,f,f)),g.setAttribute("class","terminus-db-id terminus-db-pointer");var v=document.createElement("td");v.setAttribute("class","terminus-db-title terminus-db-pointer");var b=m&&m["rdfs:label"]&&m["rdfs:label"]["@value"]?m["rdfs:label"]["@value"]:"";v.appendChild(this.wrapTableLinkCell(v,f,b));var w=document.createElement("td");w.setAttribute("class","terminus-db-description terminus-db-pointer");b=m&&m["rdfs:comment"]&&m["rdfs:comment"]["@value"]?m["rdfs:comment"]["@value"]:"";w.appendChild(this.wrapTableLinkCell(w,f,b));var C=document.createElement("td");C.setAttribute("class","terminus-db-size terminus-db-pointer");b=m&&m["terminus:size"]&&m["terminus:size"]["@value"]?m["terminus:size"]["@value"]:"";C.appendChild(this.wrapTableLinkCell(C,f,b));var x=document.createElement("td");x.setAttribute("class","terminus-db-created terminus-db-pointer");b=m&&m["terminus:last_updated"]&&m["terminus:last_updated"]["@value"]?m["terminus:last_updated"]["@value"]:"";x.appendChild(this.wrapTableLinkCell(x,f,b));var _=document.createElement("td");_.setAttribute("class","db-delete");var O=this.ui.getDeleteDBButton(f);O&&_.appendChild(O),y.appendChild(g),y.appendChild(v),y.appendChild(w),d.appendChild(y)}if(t.appendChild(d),e.appendChild(t),this.ui.pluginAvailable("datatables"))new i.CspDatatables(this.ui).draw(t);return e},e.exports={TerminusServerViewer:a,TerminusServerController:o}},function(e,t,r){var i=r(1),n=r(0),s=r(4);function o(e){this.ui=e}function a(e,t){this.wrViewer=e,this.wQuery=e.wQuery,this.ui=e.ui,this.qPage=t,this.currDTSettings=e.settings}o.prototype.convertToDatatable=function(e){var t=this,r=jQuery(e).DataTable({searching:!1,pageLength:25,lengthMenu:[10,25,50,75,100],paging:!0,select:!0,initComplete:function(e){e.oInstance.api().$("td").each((function(){this.setAttribute("title",$(this).html())}))},columnDefs:[{targets:"_all",className:"truncate"}],createdRow:function(e){var t=$(e).find(".truncate");t.attr("title",t.html())}});return jQuery(e,"tbody").on("click","td",(function(){if(5!=r.cell(this).index().column)t.ui.showDBMainPage();else{var e=r.row(jQuery(this).parents("tr")).data(),i=s.extractValueFromCell(e[0]);t.ui.deleteDatabase(i)}})),e.setAttribute("class","stripe dataTable terminus-db-size"),e.setAttribute("cellpadding","1"),e.setAttribute("cellspacing","0"),e.setAttribute("border","0"),e},o.prototype.draw=function(e){return this.convertToDatatable(e)},a.prototype.executeQuery=function(e,t,r){var n=this;return e.execute(this.ui.client).then((function(r){new i.WOQLResult(r,e);return n.wrViewer.formatResultsForDatatableDisplay(r.bindings,t).data})).catch((function(e){console.error(e),n.ui.showError(e)}))},a.prototype.generateNewQueryOnPageChange=function(e){this.qPage&&s.deleteStylizedEditor(this.ui,e.qTextDom);var t=s.getCurrentWoqlQueryObject(null,e);return this.qPage&&("woql"==e.queryMode.value?e.qTextDom.value=JSON.stringify(t.prettyPrint(),void 0,2):e.qTextDom.value=JSON.stringify(t,void 0,2),s.stylizeEditor(this.ui,e.qTextDom,"query","javascript")),t},a.prototype.getCallbackSettings=function(e,t){var r={};return r.pageLength=t._iDisplayLength,r.start=t._iDisplayStart,r.draw=t.iDraw,r.qTextDom=e.qTextDom,r.queryMode=e.queryMode,this.qPage?r.query=e.query:r.query="Show_All_Document_classes",r.chosenValue=e.chosenValue,r},a.prototype.setUp=function(e,t,r){n.removeChildren(this.dtdom),this.dtdom=document.createElement("div"),this.dtdom.appendChild(e),r.appendChild(this.dtdom),this.qTextDom=t.qTextDom,this.query=t.query,this.chosenValue=t.chosenValue,this.queryMode=t.queryMode},a.prototype.updateCurrDTSettings=function(e){this.currDTSettings.pageLength=e.pageLength,this.currDTSettings.start=e.start},a.prototype.getNewDataOnChange=function(e,t,r){var i=this.getCallbackSettings(this,t);this.updateCurrDTSettings(i);var n=this.generateNewQueryOnPageChange(i);return this.executeQuery(n,i,r)},a.prototype.getDataFromServer=function(e,t){var r=this,i=e.tab;this.setUp(i,this.wrViewer.settings,t);var n=jQuery(i).DataTable({searching:!1,pageLength:r.wrViewer.settings.pageLength,serverSide:!0,processing:!0,lengthMenu:[25,50,75,100],dom:"RBlftip",columns:e.result.columns,paging:!0,select:!0,autoWidth:!0,ajax:function(i,n,s){if(Object.entries(e.result.data).length>0){var o=e.result.data;e.result.data={},n(o)}else r.getNewDataOnChange(this,s,t).then((function(e){n(e)}))},buttons:[{extend:"copy",text:"Copy to clipboard"},{extend:"excel",text:"Export to Excel"}],columnDefs:[{targets:"_all",className:"truncate"}],createdRow:function(e){var t=$(e).find(".truncate");t.attr("title",t.html())},scrollX:!0});return jQuery(i,"tbody").on("click","td",(function(){n.cell(this).data&&"doc:"==this.innerText.substring(0,4)&&r.wrViewer.result.ui&&(r.wrViewer.result.ui.showDocument(this.innerText),r.wrViewer.result.ui.redraw(),r.wrViewer.selectDocumentNavBar(r.ui))})),i.setAttribute("class","stripe dataTable"),i.setAttribute("style","margin: 0!important"),i.setAttribute("cellpadding","1"),i.setAttribute("cellspacing","1"),i.setAttribute("border","0"),i},a.prototype.draw=function(e,t){return this.getDataFromServer(e,t)},e.exports={Datatables:a,CspDatatables:o}},function(e,t,r){var i=r(4);function n(e,t){this.ui=e,this.val=t,this.url_input=!1,this.key_input=!1}n.prototype.getLabelDOM=function(){return document.createTextNode("Connect")},n.prototype.getFormFieldDOM=function(e,t,r,i){var n=document.createElement("div");n.setAttribute("class","terminus-form-horizontal terminus-control-group terminus-form-field-spacing terminus-display-flex terminus-field-"+t);var s=document.createElement("span");return s.setAttribute("class","terminus-control-label terminus-form-label terminus-form-field-label terminus-label-"+t),s.appendChild(document.createTextNode(r)),e.setAttribute("type","text"),e.setAttribute("placeholder",i),n.appendChild(s),n.appendChild(e),n},n.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-form terminus-url-loader"),e.appendChild(i.getHeaderDom("Connect To Terminus Server"));var t=document.createElement("div");t.setAttribute("class","terminus-form-border terminus-margin-top"),e.appendChild(t),this.url_input=document.createElement("input"),this.url_input.setAttribute("class","terminus-form-value terminus-form-url terminus-form-field-input terminus-input-text"),this.val&&(this.url_input.value=this.val);var r=document.createElement("div");r.setAttribute("class","terminus-form-margin-top"),t.appendChild(r),t.appendChild(this.getFormFieldDOM(this.url_input,"connect","URL","Terminus DB URL")),this.key_input=document.createElement("input"),this.key_input.setAttribute("class","terminus-form-value terminus-value terminus-input-text"),t.appendChild(this.getFormFieldDOM(this.key_input,"connect","Key","Server API Key"));var n=document.createElement("div");n.setAttribute("class","terminus-control-buttons");var s=document.createElement("button");s.setAttribute("class","terminus-control-button terminus-url-load terminus-btn terminus-btn-float-right"),s.appendChild(document.createTextNode("Connect"));var o=this;return s.addEventListener("click",(function(){o.url_input.value&&o.ui.load(o.url_input.value,o.key_input.value)})),n.appendChild(s),t.appendChild(n),e},e.exports=n}]);
//# sourceMappingURL=terminus-dashboard.min.js.map
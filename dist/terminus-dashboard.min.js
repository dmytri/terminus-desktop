var TerminusDashboard=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=70)}([function(e,t,r){"use strict";e.exports={WOQLClient:r(73),ConnectionCapabilities:r(25),ConnectionConfig:r(26),IDParser:r(27),ErrorMessage:r(6),FrameHelper:r(7),ObjectFrame:r(97),WOQLResult:r(98),WOQL:r(99)}},function(e,r,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=i(5),o=i(0),a={getActionControl:function(e,t,r,i,n){new s;var o=document.createElement("span");o.setAttribute("class","terminus-action-control terminus-save-btn "+e+"-"+t);new s;var a=document.createElement("button");return a.appendChild(document.createTextNode(r)),n?(a.setAttribute("class","terminus-frame-control terminus-frame-btn frame-control-action action-disabled "+e+"-"+t+"-disabled"),a.setAttribute("title",n)):(a.setAttribute("class","terminus-frame-control terminus-frame-btn frame-control-action "+e+"-"+t),a.addEventListener("click",(function(){if("Save"==this.innerHTML){var e=document.getElementsByClassName("terminus-object-id-input");e.length>0?e[0].value?i(t):(e[0].setAttribute("placeholder","Required field"),e[0].style.background="#f8d7da"):i(t)}else i(t)}))),o.appendChild(a),o},getSettingsControl:function(e){if((new s).pluginAvailable("font-awesome")){var t=document.createElement("icon");return"property"==e?t.setAttribute("class","fa fa-cog terminus-pointer"):"data"==e&&t.setAttribute("class","fa fa-edit terminus-pointer"),t.setAttribute("style","margin: 10px;"),t}var r=document.createElement("button");return r.setAttribute("class","terminus-btn"),r.appendChild(document.createTextNode("Settings")),r},getControlIcon:function(e){var t;switch(e){case"delete":t="-alt-delete";break;case"add":t="-plus";break;case"reset":t="-undo";break;case"save":t="-save";break;case"hide":t="-eye-slash"}return t},getSelectionControl:function(e,t,r,i){var s=document.createElement("select");s.setAttribute("class","terminus-frame-selector frame-control-selection "+e);for(var a=0;a<t.length;a++){var u=document.createElement("option");if("object"==n(t[a])){u.value=t[a].value;var c=t[a].label?document.createTextNode(t[a].label):document.createTextNode(o.FrameHelper.labelFromURL(t[a].value));u.appendChild(c)}else u.value=t[a],c=o.FrameHelper.labelFromURL(u.value),u.appendChild(document.createTextNode(c));r==u.value&&u.setAttribute("selected","selected"),s.appendChild(u)}return s.addEventListener("change",(function(){i(this.value)})),s},getModeSelectorDOM:function(e,t){var r=document.createElement("span");if(r.setAttribute("class","terminus-mode terminus-"+e+"-mode"),"view"==t.mode){var i=function(){t.setMode("edit")};r.appendChild(a.getActionControl("terminus-mode terminus-"+e+"-mode","edit"," Edit ",i))}else{if(t.isNew())return!1;i=function(){t.cancel()};r.appendChild(a.getActionControl(e,"cancel","Cancel",i))}return r},goToName:function(e,t,r){var i=window.location.href;if(i){var n=i.split("#")[0],s=o.FrameHelper.getShorthand(e);s||(s=e),(u=s.split(":")).length>1&&(s=u[1]);var a=s;if(t){var u,c=o.FrameHelper.getShorthand(t);c||(c=t),(u=c.split(":")).length>1&&(c=u[1]),a+="_"+c,r&&(a+="_"+r)}window.location=n+"#"+a}},wrapShortenedText:function(e,t,r,i){if(r&&t.length>r&&(e.setAttribute("title",t),t=t.substring(0,r)+"..."),i){for(var n={},s=t.split(" "),o=0;o<s.length;o++){var a=s[o];if(a.length>i){e.setAttribute("title",t);var u=a.substring(0,i)+"...";n[a]=u}}for(var c in n)t=t.replace(c,n[c])}e.appendChild(document.createTextNode(t))},getVariableValueFromBinding:function(e,t){for(var r in t){if(r.substring(r.lastIndexOf("/")+1)==e){var i=t[r];return"object"==n(i)&&i["@value"]?i["@value"]:i}}return!1},getInfoboxDOM:function(e,t,r,i,n){var s=document.createElement("span");if(s.setAttribute("class","terminus-frame-infobox-box terminus-"+e),i&&s.setAttribute("title",i),t){var a=document.createElement("span");a.setAttribute("class","terminus-frame-infobox-label terminus-"+e+"-label"),a.appendChild(document.createTextNode(t)),s.appendChild(a)}var u=document.createElement("span");u.setAttribute("class","terminus-frame-infobox-spacer terminus-"+e+"-spacer"),u.appendChild(document.createTextNode(" ")),s.appendChild(u);var c=document.createElement("span");if(c.setAttribute("class","terminus-frame-infobox-value terminus-"+e+"-value"),n)n.value=r,c.appendChild(n);else if(r){var l=o.FrameHelper.getShorthand(r);if(l){var d=l.split(":");l=d[1],c.setAttribute("title",r),c.appendChild(document.createTextNode(l))}else c.appendChild(document.createTextNode(r))}return s.appendChild(c),s},getFrameDOM:function(e,t,r,i,n){if(t.display_options.hidden)return!1;var s=a.getFrameHolderDOM(e,t,r);if(void 0!==t.display_options.header){if("function"==typeof t.display_options.header){var o=t.display_options.header(t.display_options.header_features,i);s.appendChild(o)}}else{o=a.getFrameHeaderDOM(e,t,r,i);i&&o.appendChild(i),s.appendChild(o)}return s.appendChild(a.getFrameBodyDOM(e,t,r,n))},getFrameHolderDOM:function(e,t,r){var i="terminus-"+e+"-frame";if("page"==r)var n=document.createElement("div");else n=document.createElement("span");var s=i+" "+i+"-"+r+("object"==e&&t.parent?"":" terminus-root-frame")+" "+i+"-"+t.display_options.mode;if(n.setAttribute("class",s),"object"==e){n.setAttribute("data-class",t.subjectClass()),n.setAttribute("data-id",t.subject());var o=this.hash(t.subject())}else if("property"==e){n.setAttribute("data-property",t.property());o=this.hash(t.subject()+t.property())}else if("data"==e){n.setAttribute("data-value",t.get());o=this.hash(t.subject()+t.property()+t.index)}var a=document.createElement("a");return a.setAttribute("class","terminus-"+e+"-idmarker"),a.setAttribute("name",o),n.appendChild(a),n},getFrameHeaderDOM:function(e,t,r,i){var n="terminus-"+e+"-header";if("page"==r)var s=document.createElement("div");else s=document.createElement("span");return s.setAttribute("class",n+" "+n+"-"+r),i&&s.appendChild(i),s},getFrameBodyDOM:function(e,t,r,i){var n="terminus-"+e+"-properties";if("page"==r)var s=document.createElement("div");else s=document.createElement("span");return s.setAttribute("class",n+" "+n+"-"+r),i&&s.appendChild(i),s},hash:function(e){var t,r=0;if(0===e.length)return r;for(t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return r},getFeatureDOM:function(e,t,r){if("id"==e){if("object"==t)var i=r.subject();else if("property"==t)i=r.property();if("_:"==i)i="New Document";return a.getInfoboxDOM("object-id","ID",i,"The URL that identifies this data object")}if("summary"==e){var n=r.getSummary();return a.getInfoboxDOM(t+"-summary",!1,n.long,n.status)}if("label"==e)return!!(s=r.getLabel())&&a.getInfoboxDOM(t+"-type",!1,s);if("status"==e){n=r.getSummary();return a.getInfoboxDOM(t+"-status-"+n.status,!1,n.status,n.status)}if("comment"==e){var s=r.getComment();return a.getInfoboxDOM("property-comment",!1,s)}if("type"==e){if("property"==t&&"edit"==r.display_options.mode&&r.parent&&r.parent.isClassChoice()&&r.isNew())return this.getClassChoiceTypeSelector(r);if("object"==t)s=r.subjectClass();else if("property"==t)s=r.range();else if("data"==t)s=r.getType();return!!s&&a.getInfoboxDOM(t+"-type","Type",s)}if("delete"==e){var o=function(){r.delete()},u=!1;if(!r.cardControlAllows("delete",t)){if(!r.display_options.show_disabled_buttons)return!1;u="Cardinality rules prevent deleting this element"}return a.getActionControl(t,"delete","Delete",o,u)}if("clone"==e){o=function(){r.clone()},u=!1;if(!r.cardControlAllows("clone",t)){if(!r.display_options.show_disabled_buttons)return!1;u="Cardinality rules prevent cloning this element"}return a.getActionControl(t,"clone","Clone",o,u)}if("reset"==e){o=function(){r.reset()},u=!1;if(!r.isUpdated()){if(!r.display_options.show_disabled_buttons)return!1;u="No changes have been made to this element"}return a.getActionControl(t,"reset","Reset",o,u)}if("hide"==e){o=function(){r.hide()};return a.getActionControl(t,"hide","Hide",o)}if("show"==e){o=function(){r.show()};return a.getActionControl(t,"show","Show",o)}if("update"==e){o=function(){r.save()};if(!r.isUpdated()&&!r.display_options.show_disabled_buttons)return!1;u=!r.isUpdated()&&"No changes have been made to this element";return a.getActionControl(t,"save","Save",o,u)}return"viewer"==e?this.getViewerSelectorDOM(t,r):"view"==e?this.getViewEntryDOM(t,r):"cardinality"==e?this.getCardinalityDOM(t,r):"add"==e?this.getAddDOM(t,r):void 0},getViewerSelectorDOM:function(e,r){var i=r.terminus.datatypes.getAvailableViewers();this.terminus.datatypes.getRenderer(t);if(i&&i.length){var n=document.createElement("span");n.setAttribute("class","terminus-"+e+"-viewer");var s=r.currentViewer(),o=a.getSelectionControl(e+"-viewer",i,s,(function(e){e&&r.setViewer(e)}));return n.appendChild(o),n}return!1},getViewEntryDOM:function(e,t){if("object"==e)var r=t.getFilledPropertyList();if(r&&r.length){var i=document.createElement("span");i.setAttribute("class","terminus-"+e+"-view-entry"),r.unshift({value:"",label:"View "+e});var n=a.getSelectionControl(e+"-view-entry",r,"",(function(e){e&&t.goToEntry(e)}));return i.appendChild(n),i}return!1},getCardinalityDOM:function(e,t){var r=t.getRestriction();if(r.min&&r.max)if(r.min==r.max)var i=r.min,n="Cardinality: "+r.min;else{i=r.min+"-"+r.max,n="Minimum Cardinality: "+r.min;n+=", Maximum Cardinality: "+r.max}else if(r.min)i=">"+(r.min-1),n="Minimum Cardinality: "+r.min;else{if(!r.max)return!1;i="<"+(r.max+1),n="Maximum Cardinality: "+r.max}return a.getInfoboxDOM("property-cardinality","Cardinality",i,n)},getClassChoiceTypeSelector:function(e){var t=e.parent.getAvailableClassChoices();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-change-class");var i=document.createElement("span");i.setAttribute("class","terminus-property-change-label"),i.appendChild(document.createTextNode("Type")),r.appendChild(i);var n=a.getSelectionControl("change-class",t,e.subjectClass(),(function(t){t&&e.changeClass(t)}));return r.appendChild(n),r}return!1},getAddDOM:function(e,t){if("property"==e){if(t.isClassChoice()){var r=t.getAvailableClassChoices();if(r&&r.length){(u=document.createElement("span")).setAttribute("class","terminus-property-add-class"),r.unshift({value:"",label:"Add Type"});var i=function(e){e&&t.addClass(e)},n=a.getSelectionControl("add-property",r,"",i);return u.appendChild(n),u}}if(t.cardControlAllows("add")||t.display_options.show_disabled_buttons){i=function(){t.add("edit")};var s=!t.cardControlAllows("add")&&"Cardinality Rules Forbid Add";return a.getActionControl(e+"-add-entry","add","Add",i,s)}}else{var o=t.getMissingPropertyList();if(o&&o.length){var u;(u=document.createElement("span")).setAttribute("class","terminus-"+e+"-add-entry"),o.unshift({value:"",label:"Add new "+e});i=function(r){r&&("object"==e?t.addNewProperty(r):"property"==e&&t.addNewValue(r))};if(t.cardControlAllows("add")||t.display_options.show_disabled_buttons){s=!t.cardControlAllows("add")&&"Cardinality rules forbid adding element",n=a.getSelectionControl(e+"-add-entry",o,"",i,s);return u.appendChild(n),u}}}return!1}};e.exports=a},function(module,exports,__webpack_require__){function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],i=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}
/**
 * @file Javascript Api explorer tool
 * @author Kitty Jose
 * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more
 *
 * @summary Set of functions used across scripts
 */var Codemirror=__webpack_require__(100),TerminusClient=__webpack_require__(0);function readFile(e){return window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.open("GET",e,!1),xmlhttp.send(),xmlDoc=xmlhttp.responseText,xmlDoc}function getFunctionSignature(e){var t={connect:{spec:"WOQLClient.connect(surl, key)",descr:"\n\nConnect to a Terminus server at the given URI with an API keyStores the terminus:ServerCapability document returned in the connection registerwhich stores, the url, key, capabilities, and database meta-data for the connected serverIf the curl argument is false or null, the this.server will be used if present, or the promise will be rejected.\n1)The first (surl) argument: {string} argument it is the Server Url\n2)The second(key) argument: {string} argument contains an API key",result:"HTTP 200 on success, 409 for already existing database, otherwise error code",args:{server_url:"url",key:"Api key"},options:{title:"",description:""}},create:{spec:"WOQLClient.createDatabase(dburl, details, key)",descr:"\n\nCreate a Terminus Database\n1)The first (dburl) argument:{string}, it is a terminusDB Url or a terminusDB Id \n2)The second(details) argument:{object}, details which is the payload\n which included information of the new database to be created\n3)The third (key) argument:{string}, contains an API key ",result:"HTTP 200 on success, 409 for already existing database, otherwise error code",args:{database_url:"url",details:"",key:" Api key"},options:{title:"",description:""}},delete:{spec:"WOQLClient.deleteDatabase(dburl, key)",descr:"\n\nDeletes a Database\n1)The first (dburl) argument: {string}, it is a terminusDB Url or a terminusDB Id \n2)The second(key) argument: {string}, contains an API key",result:"HTTP 200 on success, otherwise error code"},getSchema:{spec:"WOQLClient.getSchema(surl, options)",descr:"\n\nGets the schema of a database.\n1)The first (surl) argument: {string}, it is a dbUrl/schema\n2)The second(key) argument: {string}, contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",options:{format:"turtle"}},getClassFrames:{spec:"WOQLClient.getClassFrame = function(cfurl, cls, opts)",descr:"\n\nRetrieves a WOQL query on the specified database which updates the state and returns the results\nThe first (cfurl) argument can be\n1) a valid URL of a terminus database or\n2) omitted - the current database will be used\nthe second argument (cls) is the URL / ID of a document class that exists in the database schema\nthe third argument (opts) is an options json - opts.key is an optional API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",options:{format:"turtle"}},updateSchema:{spec:"WOQLClient.updateSchema(schurl, docs, options)",descr:"\n\nUpdates the Schema of the specified database\n1)The first (surl) argument :{string}, is a dbUrl/schema\n2)The second(docs) argument:{object}, is a valid owl ontology (new schema to be updated) in turtle format\n3)The third (key) argument:{string}, contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document:"doc"},options:{format:"turtle",editmode:"replace"}},createDocument:{spec:"WOQLClient.createDocument(docurl, document, options)",descr:"\n\nCreates a new document in the specified database\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\n2)The second(document) argument: {object}, is a valid document in json-ld\n3)The third (key) argument:{string}, contains an API key",result:"Created Document on success (HTTP 200), Violation Report Otherwise (HTTP 400+)",args:{document_url:"url",document:"doc"},options:{format:"turtle",fail_on_id_denied:!1}},viewDocument:{spec:"WOQLClient.getDocument(docurl, options)",descr:"\n\nRetrieves a document from the specified database\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\n2)The second (key) argument: {string}, contains an API key",result:"Document (HTTP 200), Violation Report Otherwise (HTTP 400+)",args:{document_url:"url"},options:{format:"turtle"}},updateDocument:{spec:"WOQLClient.updateDocument(docurl, document, options)",descr:"\n\nUpdates a document in the specified database with a new version\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\n2)The second(document) argument: {object}, is a valid document in json-ld\n3)The third (key) argument:{string} argument contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document_url:"url",document:"doc"},options:{format:"turtle",editmode:"replace"}},deleteDocument:{spec:"WOQLClient.deleteDocument(docurl, key)",descr:"\n\nDeletes a document from the specified database\n1)The first (docurl) argument: {string},is a dbUrl/document/document_id\n2)The second (key) argument: {string}, contains an API key",result:"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code",args:{document_url:"url"}},select:{spec:"WOQLClient.select(dburl, query, options)",descr:"\n\nExecutes a read-only WOQL query on the specified database and returns the results\n1)The first (docurl) argument: {string}, is a terminusDB Url or a terminusDB Id\n2)The second (query) argument: {object}, a valid query in json-ld format \n3)The third (key) argument:{string}, contains an API key",result:"WOQL Result (HTTP 200), otherwise error code",args:{woql:"woql"}},update:{spec:"WOQLClient.update(dburl, query, options)",descr:"\n\nExecutes a WOQL query on the specified database which updates the state and returns the results\n1)The first (dburl) argument: {string}, is a terminusDB Url or a terminusDB Id\n2)The second (query) argument: {object}, a valid query in json-ld format \n3)The third (key) argument:{string}, contains an API key",result:"WOQL Result (HTTP 200), otherwise error code",args:{woql:"woql"}},lookup:{spec:"WOQLClient.lookup(database_url, woql, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url",term:"string"}},map:{spec:"WOQLClient.lookup(source, target, woql, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{source:"json",target:"json",woql:"json"}},getClassFrame:{spec:"WOQLClient.getClassFrame(class, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url"}},getPropertyFrame:{spec:"WOQLClient.getPropertyFrame(class, property, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url",property:"url"}},getFilledPropertyFrame:{spec:"WOQLClient.getPropertyFrame(document_url, property, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{document_url:"url",property:"url"}},getSubClasses:{spec:"WOQLClient.getSubClasses(class, options)",result:"WOQL Result (HTTP 200), otherwise error code",args:{class:"url"}}};return t[e]}function getHeaderDom(e){var t=document.createElement("div");t.setAttribute("class","terminus-module-head");var r=document.createElement("h3");return r.innerHTML=e,t.appendChild(r),t}function getButton(e){var t=document.createElement("button");return t.setAttribute("class","terminus-btn"),t.setAttribute("value",e),t.appendChild(document.createTextNode(e)),t}function getInfoAlertDom(e,t,r){var i=document.createElement("div");"info"==e?i.setAttribute("class","terminus-alert terminus-alert-success"):i.setAttribute("class","alert");var n=document.createElement("STRONG");n.innerHTML=t,i.appendChild(n);var s=document.createTextNode(r);return i.appendChild(s),i}function getResponse(e,t,r,i){var n=document.createElement("div");n.appendChild(getHeaderDom("Result"));var s=document.createElement("BR");n.appendChild(s);var o=JSON.stringify(r,0,4),a=document.createElement("pre");a.setAttribute("class","terminus-api-view terminus-scheme-pre"),a.innerHTML=o,stylizeCodeDisplay(i,a,n,"javascript")||n.appendChild(a);s=document.createElement("BR");return n.appendChild(s),e.appendChild(n),e}function showHttpResult(e,t,r,i){var n=document.createElement("BR");r.appendChild(n);n=document.createElement("BR");r.appendChild(n),r.appendChild(getHeaderDom("HTTP Header"));n=document.createElement("BR");r.appendChild(n);var s="",o=!0,a=!1,u=void 0;try{for(var c,l=e.headers[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var d=_slicedToArray(c.value,2),p=d[0],h=d[1];s=s+"".concat(p," = ").concat(h)+"\n"}}catch(e){a=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}var m=document.createElement("pre");m.setAttribute("class","terminus-api-signature-pre");var f=document.createTextNode(s);return m.appendChild(f),stylizeCodeDisplay(i,m,r,"message/http")||r.appendChild(m),e.json().then((function(e){getResponse(r,t,e,i)}))}function deleteStylizedEditor(e,t){if(e.pluginAvailable("codemirror")){var r=t.nextElementSibling;r.setAttribute("class","terminus-hide"),TerminusClient.FrameHelper.removeChildren(r)}}function stylizeEditor(e,t,r,i){if(e){var n=e.pluginAvailable("codemirror");if(!n)return;var s=new Codemirror(t,i,n)}else s=new Codemirror(t,i,{});var o=s.colorizeTextArea(r);s.updateTextArea(o)}function stylizeCodeDisplay(e,t,r,i){var n=e.pluginAvailable("codemirror");if(!n)return!1;var s=new Codemirror(t,i,n).colorizePre();return r.appendChild(s),!0}function removeSelectedNavClass(e){var t=document.getElementsByClassName(e);if(!(t.length<1))for(var r=0;r<t.length+1;r++)t[r].classList.remove(e)}function setSelectedSubMenu(e){removeSelectedNavClass("terminus-submenu-selected"),e.classList.add("terminus-submenu-selected")}function selectWithinParent(e,t){for(var r=e.parentElement,i=0;i<r.childNodes.length;i++)r.childNodes[i].classList.contains(t)&&r.childNodes[i].classList.remove(t);e.classList.add(t)}function tolggleContent(e,t){"block"===t.style.display?(removeSelectedNavClass("fa-chevron-up"),e.classList.add("fa-chevron-down"),t.style.display="none"):(removeSelectedNavClass("fa-chevron-down"),e.classList.add("fa-chevron-up"),t.style.display="block")}function activateSelectedNav(e,t){removeSelectedNavClass("terminus-selected"),e.classList.add("terminus-selected")}function hideDocumentSubMenus(e){e.classList.contains("terminus-display")&&(e.classList.remove("terminus-display"),e.classList.add("terminus-hide"))}function checkDocumentSubMenus(e){e.ui.showControl("get_document")&&hideDocumentSubMenus(document.getElementsByClassName("terminus-get-doc")[0]);e.ui.showControl("create_document")&&hideDocumentSubMenus(document.getElementsByClassName("terminus-create-doc")[0])}function toggleVisibility(e){e.classList.contains("terminus-display")?(e.classList.remove("terminus-display"),e.classList.add("terminus-hide")):e.classList.contains("terminus-hide")&&(e.classList.remove("terminus-hide"),e.classList.add("terminus-display"))}function extractValueFromCell(e){return(new DOMParser).parseFromString(e,"text/xml").firstChild.innerHTML}function displayDocumentSubMenus(e){e.showControl("get_document")&&showSubMenus(document.getElementsByClassName("terminus-get-doc")[0]);e.showControl("create_document")&&showSubMenus(document.getElementsByClassName("terminus-create-doc")[0])}function checkForMandatoryId(){var e=document.getElementsByClassName("terminus-object-id-input");if(e.length>0)return!!e[0].value||(e[0].setAttribute("placeholder","Required field"),e[0].style.background="#f8d7da",!1)}function showSubMenus(e){e.classList.remove("terminus-hide"),e.classList.add("terminus-display")}function getCurrentWoqlQueryObject(e,t){var r;switch(e||(e=t.query),e){case"Show_All_Schema_Elements":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).elementMetadata();break;case"Show_All_Classes":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).classMetadata();break;case"Show_All_Data":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).getEverything();break;case"Show_All_Documents":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).getAllDocuments();break;case"Show_All_Document_classes":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).documentMetadata();break;case"Show_Document_Classes":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).and(TerminusClient.WOQL.quad("v:Element","rdf:type","owl:Class","db:schema"),TerminusClient.WOQL.abstract("v:Element"),TerminusClient.WOQL.sub("v:Element","tcs:Document"),TerminusClient.WOQL.opt().quad("v:Element","rdfs:label","v:Label","db:schema"),TerminusClient.WOQL.opt().quad("v:Element","rdfs:comment","v:Comment","db:schema"));break;case"Show_All_Properties":r=TerminusClient.WOQL.limit(t.pageLength).start(t.start).propertyMetadata();break;default:console.log("Invalid query "+e+" passed in WOQLTextboxGenerator")}return r}function trimValue(e){return e.replace(/[\s\t\r\n\f]/g,""),e}function getqObjFromInput(q){var WOQL=TerminusClient.WOQL,query=q;try{var qObj=eval(query);return this.qObj=qObj,qObj}catch(e){console.log("Error in getting woql object ",e.toString())}}module.exports={tolggleContent:tolggleContent,removeSelectedNavClass:removeSelectedNavClass,stylizeCodeDisplay:stylizeCodeDisplay,stylizeEditor:stylizeEditor,deleteStylizedEditor:deleteStylizedEditor,showHttpResult:showHttpResult,getHeaderDom:getHeaderDom,getInfoAlertDom:getInfoAlertDom,getFunctionSignature:getFunctionSignature,toggleVisibility:toggleVisibility,extractValueFromCell:extractValueFromCell,displayDocumentSubMenus:displayDocumentSubMenus,setSelectedSubMenu:setSelectedSubMenu,checkForMandatoryId:checkForMandatoryId,activateSelectedNav:activateSelectedNav,getCurrentWoqlQueryObject:getCurrentWoqlQueryObject,getButton:getButton,trimValue:trimValue,selectWithinParent:selectWithinParent,getqObjFromInput:getqObjFromInput}},function(e,t,r){"use strict";var i=r(17),n=r(82),s=Object.prototype.toString;function o(e){return"[object Array]"===s.call(e)}function a(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===s.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:n,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function r(r,i){"object"==typeof t[i]&&"object"==typeof r?t[i]=e(t[i],r):t[i]=r}for(var i=0,n=arguments.length;i<n;i++)c(arguments[i],r);return t},deepMerge:function e(){var t={};function r(r,i){"object"==typeof t[i]&&"object"==typeof r?t[i]=e(t[i],r):t[i]="object"==typeof r?e({},r):r}for(var i=0,n=arguments.length;i<n;i++)c(arguments[i],r);return t},extend:function(e,t,r){return c(t,(function(t,n){e[n]=r&&"function"==typeof t?i(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(module,exports,__webpack_require__){var TerminusClient=__webpack_require__(0),UTILS=__webpack_require__(2);function TerminusCodeSnippet(e,t,r,i,n,s){this.language=e||"woql",this.mode=t||"view",this.width=i||800,this.height=n||300,this.placeholder=s||"",this.format=r||"js",this.formats={js:"WOQL.js",jsonld:"JSON-LD"},"view"==this.mode?this.snippet=document.createElement("pre"):(this.snippet=document.createElement("textarea"),this.snippet.setAttribute("spellcheck","false"),this.snippet.setAttribute("class","terminus-code-snippet"))}TerminusCodeSnippet.prototype.setQuery=function(e){this.qObj=e,this.refreshContents()},TerminusCodeSnippet.prototype.serialise=function(e,t){return"js"==t?e.prettyPrint(4):JSON.stringify(e.json(),0,2)},TerminusCodeSnippet.prototype.parseText=function(text,format){try{var WOQL=TerminusClient.WOQL;if("js"==format){var nw=eval(text);return"rule"==this.language?(this.view=view,view):nw}var qval=JSON.parse(text);return WOQL.json(qval)}catch(e){return this.error="Failed to parse Query "+e.toString()+" "+text,console.error(this.error),!1}},TerminusCodeSnippet.prototype.getInputElement=function(){return this.snippet},TerminusCodeSnippet.prototype.readInput=function(){return"edit"==this.mode?(this.qObj=this.parseText(this.snippet.value,this.format),this.qObj):this.qObj},TerminusCodeSnippet.prototype.get=function(){return this.readInput()},TerminusCodeSnippet.prototype.getAsDOM=function(e){var t=document.createElement("div"),r=document.createElement("div");if(r.setAttribute("style","display:table-caption; margin: 20px"),this.placeholder&&this.snippet.setAttribute("placeholder",this.placeholder),this.width&&this.height&&this.snippet.setAttribute("style","width: "+this.width+"px; height: "+this.height+"px;"),"woql"==this.language?r.appendChild(this.getFormatButtons()):e&&r.appendChild(this.getViewTypeButtons()),this.qObj){var i=this.serialise(this.qObj,this.format);console.log("serial",i),"edit"==this.mode?this.snippet.value=i:this.snippet.appendChild(document.createTextNode(i))}if(r.appendChild(this.snippet),"edit"==this.mode){var n=this.getSubmitButton();r.appendChild(n)}return t.appendChild(r),t},TerminusCodeSnippet.prototype.changeRuleView=function(e){this.snippet.value="view = WOQL."+e+"()",this.readInput(),this.submit(this.qObj)},TerminusCodeSnippet.prototype.getIconsDOM=function(){var e=document.createElement("span");e.setAttribute("class","terminus-snippet-icons");for(var t=0;t<this.view_types.length;t++){var r=document.createElement("span"),i=document.createElement("i");i.title=this.view_types[t].label,i.setAttribute("class",this.view_types[t].icon),r.appendChild(i),r.name=this.view_types[t].id;var n=this;r.addEventListener("click",(function(){n.view&&n.view.type==this.name||n.changeRuleView(this.name)})),r.addEventListener("mouseover",(function(){n.view&&n.view.type==this.name||(this.style.cursor="pointer")})),e.appendChild(r)}return e},TerminusCodeSnippet.prototype.getViewTypeButtons=function(){var e=document.createElement("span");return e.setAttribute("class","terminus-snippet-panel"),e},TerminusCodeSnippet.prototype.getFormatButtons=function(){var e=document.createElement("span");for(f in e.setAttribute("class","terminus-snippet-panel"),this.formats){var t=document.createElement("button");t.setAttribute("value",f),t.setAttribute("class","terminus-snippet-button"),"js"==f&&t.classList.add("terminus-snippet-format-selected"),t.appendChild(document.createTextNode(this.formats[f]));var r=this;t.addEventListener("click",(function(){r.readInput()?(UTILS.selectWithinParent(this,"terminus-snippet-format-selected"),r.format=this.value,r.refreshContents()):alert(r.error)})),e.appendChild(t)}return e},TerminusCodeSnippet.prototype.getSubmitButton=function(){var e=this,t=document.createElement("button");t.setAttribute("class","terminus-btn"),t.setAttribute("type","submit");var r="Submit";return"WOQL"==this.language?r="Submit Query":"rule"==this.language?r="Update View":"code"==this.language&&(r="Run Script"),t.appendChild(document.createTextNode(r)),t.addEventListener("click",(function(){e.readInput(),e.submit(e.qObj)})),t},TerminusCodeSnippet.prototype.submit=function(){alert("Submitted "+JSON.stringify(this.qObj))},TerminusCodeSnippet.prototype.removeCodeMirror=function(){var e=this.snippet.nextSibling;e.classList.contains("CodeMirror")&&TerminusClient.FrameHelper.removeElement(e)},TerminusCodeSnippet.prototype.stylizeSnippet=function(){var e={};e.width=this.width,e.height=this.height,this.removeCodeMirror(),UTILS.stylizeEditor(null,this.snippet,e,"javascript")},TerminusCodeSnippet.prototype.refreshContents=function(){if(TerminusClient.FrameHelper.removeChildren(this.snippet),this.qObj){var e=this.serialise(this.qObj,this.format);if("edit"==this.mode){if(this.snippet.value=e,this.snippet.nextSibling){if(this.removeCodeMirror(),"js"==this.format)var t="javascript";else t="application/ld+json";UTILS.stylizeEditor(null,this.snippet,{width:this.width,height:this.height},t)}}else this.snippet.appendChild(document.createTextNode(e))}},module.exports=TerminusCodeSnippet},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0);function s(){this.preloaded=[],this.loaded=[],this.loading=[],this.precluded=[],this.plugins={},this.plugins["font-awesome"]={label:"Font Awesome",css:["https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0-11/css/all.css"]},this.plugins.quill={label:"Quill",js:["https://cdn.quilljs.com/1.3.6/quill.min.js"],css:["https://cdn.quilljs.com/1.3.6/quill.snow.css"]},this.plugins.codemirror={label:"Code Mirror",js:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/xml/xml.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/css/css.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/turtle/turtle.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/javascript/javascript.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/anyword-hint.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/runmode/runmode.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/http/http.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/closebrackets.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/matchbrackets.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/display/placeholder.js"],css:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/neo.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/erlang-dark.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/eclipse.css"]},this.plugins.jquery={label:"jQuery",js:["https://code.jquery.com/jquery-2.2.4.min.js"]},this.plugins.jqueryui={label:"jQuery UI",css:["https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css"],js:["https://code.jquery.com/ui/1.12.0/jquery-ui.js"],requires:["jquery"]},this.plugins.datatables={label:"Data Tables",js:["https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js","https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.16/b-1.5.1/b-html5-1.5.1/datatables.min.js"],css:["https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css"],requires:["jquery"]},this.plugins.gmaps={label:"Google Maps",js:["https://maps.googleapis.com/maps/api/js"]},this.plugins.d3={label:"d3",js:["https://code.jquery.com/jquery-2.2.4.min.js"],requires:["jquery"]},this.plugins.select2={label:"Select 2",js:["https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"],css:["https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css"],requires:["jquery"]}}s.prototype.setPluginOptions=function(e){for(var t in e)if(this.plugins[t])for(var r in e[t])this.plugins[t][r]=e[t][r]},s.prototype.init=function(e,t){e&&this.setPluginOptions(e),this.calculatePreloaded();var r=this.calculateRequiredInitPlugins(e);if(r&&r[0].length)if(r[1].length){var i=this;this.loadPlugins(r[0],(function(){i.loadPlugins(r[1],t)}))}else this.loadPlugins(r[0],t);else t&&t()},s.prototype.calculateRequiredInitPlugins=function(e){if(e){var t=[];for(var r in e)e[r]&&-1==t.indexOf(r)&&("object"!=i(e[r])&&e[r]?t.push(r):"object"==i(e[r])&&(void 0===e[r].loaded||e[r].loaded)&&t.push(r))}else t=this.getDefaultPlugins();for(var n=[],s=0;s<t.length;s++)-1==this.loaded.indexOf(t[s])&&-1==this.preloaded.indexOf(t[s])&&n.push(t[s]);var o=[[],[]];for(s=0;s<n.length;s++)this.plugins[n[s]]&&(this.plugins[n[s]].requires&&this.plugins[n[s]].requires.length?o[1].push(n[s]):o[0].push(n[s]));return o},s.prototype.getAvailablePlugins=function(){return this.plugins},s.prototype.calculatePreloaded=function(){for(var e in this.plugins)this.pluginAvailable(e)&&this.preloaded.push(e)},s.prototype.pluginAvailable=function(e,t){if("object"==i(this.plugins[e])){var r=this.plugins[e];if(r.requires&&r.requires.length)for(var n=0;n<r.requires.length;n++)if(!this.pluginAvailable(r.requires[n],t))return!1;!!r.version&&r.version;switch(e){case"jquery":return"undefined"!=typeof jQuery;case"jqueryui":try{if("undefined"!=typeof jQuery&&jQuery.isFunction(jQuery.fn.slider))return!0}catch(e){}return!1;case"quill":return"undefined"!=typeof Quill;case"jsoneditor":return"undefined"!=typeof JSONEditor;case"codemirror":return"undefined"!=typeof CodeMirror&&this.plugins[e];case"font-awesome":return this.fontAwesomeCheck();case"datatables":return!("undefined"==typeof jQuery||!jQuery.isFunction(jQuery.fn.dataTable));case"select2":return!("undefined"==typeof jQuery||!jQuery.isFunction(jQuery.fn.select2));case"gmaps":return"undefined"!=typeof google&&void 0!==google.maps;case"openlayers":return"undefined"!=typeof ol&&void 0!==ol.Map;case"d3":return"undefined"!=typeof d3}}else console.log(new Error(e+" is not a supported plugin ID"));return!1},s.prototype.fontAwesomeCheck=function(){var e,t,r=document.createElement("span");if(r.className="fa",r.style.display="none",document.body){document.body.insertBefore(r,document.body.firstChild);var i=!1;return"Font Awesome 5 Free"==(e=r,t="font-family",window.getComputedStyle(e,null).getPropertyValue(t)).replace(/"/g,"")&&(i=!0),document.body.removeChild(r),i}return!1},s.prototype.getDefaultPlugins=function(){return["font-awesome"]},s.prototype.loadPlugins=function(e,t){for(var r=e.length,i=function(){--r<=1&&t&&t()},n=0;n<e.length;n++)this.loadPlugin(e[n],i)},s.prototype.loadPlugin=function(e,t){var r=this.plugins[e];if(r.css)for(var i=0;i<r.css.length;i++){var s=e+"_css_"+i;n.FrameHelper.loadDynamicCSS(s,r.css[i])}var o=r.js?r.js:[];if("gmaps"==e&&r.key&&(o[0]+="?key="+r.key),r.plugin,"codemirror"==e){var a=o[0],u=e+"_js_"+(o.length-1);o.splice(0,1);var c=this;n.FrameHelper.loadDynamicScript(u,a,(function(){c.loadPluginScripts(e,o,t)}))}else this.loadPluginScripts(e,o,t)},s.prototype.loadPluginScripts=function(e,t,r){var i=t.length-1,s=this,o=function(){0==i&&(-1==s.loaded.indexOf(e)&&s.loaded.push(e),-1!=s.loading.indexOf(e)&&s.loading.splice(s.loading.indexOf(e),1),r()),i--};0==t.length?this.loaded.push(e):this.loading.push(e);for(var a=0;a<t.length;a++){var u=e+"_js_"+a;n.FrameHelper.loadDynamicScript(u,t[a],o)}},s.prototype.loadPageCSS=function(e){cssfid="terminus_client_css";var t=document.getElementById(cssfid);t&&t.parentNode.removeChild(t),e&&(cssurl="css/"+e+".css",n.FrameHelper.loadDynamicCSS(cssfid,cssurl))},s.prototype.pluginLoadable=function(e){return-1!==this.precluded.indexOf(e)||this.pluginLoadedOrLoading(e)},s.prototype.pluginLoadedOrLoading=function(e){return-1!=this.loaded.indexOf(e)||(-1!=this.preloaded.indexOf(e)||-1!=this.loading.indexOf(e))},s.prototype.disabled=function(e,t){if(-1!=this.precluded.indexOf(e))return!0;if(t.requires)for(var r=0;r<t.requires.length;r++)if(!this.pluginLoadedOrLoading(t.requires[r]))return!0;return!1},s.prototype.getPluginDOM=function(e,t,r){var i=document.createElement("a"),n=document.createElement("span");i.appendChild(n),n.setAttribute("class","terminus-plugin-control");var s=document.createElement("input");s.id="terminus-plugin-control-"+e,s.type="checkbox",-1!=this.preloaded.indexOf(e)?(s.checked=!0,s.disabled=!0):-1!=this.loaded.indexOf(e)?s.checked=!0:-1!=this.loading.indexOf(e)?s.checked=!0:this.disabled(e,t)&&(s.disabled=!0);var o=document.createElement("label");o.setAttribute("class","terminus-plugin-label terminus-pointer"),o.setAttribute("for",s.id),o.appendChild(document.createTextNode(t.label)),n.appendChild(o),n.appendChild(s);var a=this;return s.addEventListener("change",(function(){a.togglePlugin(e,r)})),i},s.prototype.togglePlugin=function(e,t){if(-1==this.loaded.indexOf(e)){this.loadPlugin(e,(function(){t.redraw()}))}else this.unloadPlugin(e);n.FrameHelper.removeChildren(t.plugins),t.drawPlugins()},s.prototype.unloadPlugin=function(e){if(!this.plugins[e]||-1==this.loaded.indexOf(e))return console.log(new Error(e+" plugin unload request when it is not loaded")),!1;var t=this.plugins[e],r=t.js?t.js.length:0;t.plugin&&r++;for(var i=0;i<r;i++){var n=e+"_js_"+i;(s=document.getElementById(n))&&s.parentNode.removeChild(s)}r=t.css?t.css.length:0;for(i=0;i<r;i++){var s;n=e+"_css_"+i;(s=document.getElementById(n))&&s.parentNode.removeChild(s)}this.loaded.splice(this.loaded.indexOf(e),1)},s.prototype.getAsDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-plugin-manager");var r=document.createElement("span");r.setAttribute("class","terminus-plugin-control-header terminus-plugin-nav terminus-pointer"),r.appendChild(document.createTextNode("Plugins")),t.appendChild(r);var i=document.createElement("a");return this.showPlugins(i,e),r.appendChild(i),i.style.display="none",r.addEventListener("click",(function(){"none"==i.style.display?i.style.display="block":i.style.display="none"})),t},s.prototype.showPlugins=function(e,t){for(var r in e.setAttribute("style","background-color: #111;"),this.plugins)e.appendChild(this.getPluginDOM(r,this.plugins[r],t))},e.exports=s},function(e,t){function r(e,t,r){let n="";return r.response?(r=r.response).data&&(n+=`${i(r.data)}`):r.body&&(n+=`${i(r.data)}`),r.status&&(n+=`Code: ${r.status}`),r.action&&(n+=`, Action: ${r.action}`),r.type&&(n+=`, Type: ${r.type}`),e&&(n+=`, url: ${e}`),t&&t.method&&(n+=`, method: ${t.method}`),n}function i(e){if("object"==typeof e){let t="";for(const r of Object.keys(e))t+=`${r} ${e[r]} `;return t}return e}e.exports={getErrorAsMessage:r,getAPIErrorMessage:function(e,t,i){return`API Error ${r(e,t,i)}`},getAccessDeniedMessage:function(e,t,i){return`Access Denied ${r(e,t,i)}`},accessDenied:function(e,t,r){const i={status:403};return i.url=(r||"")+(t||""),i.type="client",i.action=e,i.body=`${i.action} not permitted for ${i.url}`,i},getInvalidURIMessage:function(e,t){return`Invalid argument to\n            ${t}. \n            ${e}\n            is not a valid Terminus DB API endpoint`},parseAPIError:function(e){const t={};if(t.status=e.status,t.type=e.type,e.data&&"object"==typeof e.data){let r;try{r=e.text()}catch(t){try{r=e.json()}catch(t){r=e.toString()}}t.body=r}else e.data&&(t.body=e.data);return t.url=e.url,t.headers=e.headers,t.redirected=e.redirected,t}}},function(e,t){const r={standard_urls:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",xsd:"http://www.w3.org/2001/XMLSchema#",owl:"http://www.w3.org/2002/07/owl#",tcs:"http://terminusdb.com/schema/tcs#",tbs:"http://terminusdb.com/schema/tbs#",xdd:"http://terminusdb.com/schema/xdd#",v:"http://terminusdb.com/woql/variable/",terminus:"http://terminusdb.com/schema/terminus#",vio:"http://terminusdb.com/schema/vio#",docs:"http://terminusdb.com/schema/documentation#"},addURLPrefix:function(e,t){this.standard_urls[e]=t},removeChildren:function(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.childNodes[0])},removeElement:function(e){e&&e.parentNode.removeChild(e)},empty:function(e){if(!e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"==typeof e)for(const t of Object.keys(e))if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},genBNID:function(){return`_:${Math.random().toString(36).substring(7)}${(new Date).getTime()}`},getShorthand:function(e){if("object"==typeof e&&e.length&&(e=e[0]),e&&"string"==typeof e)for(const t of Object.keys(this.standard_urls)){const r=this.standard_urls[t];if(e.substring(0,r.length)===r){return`${t}:${e.substring(r.length)}`}}return!1},compareIDs:function(e,t){if(e===t)return!0;if(this.unshorten(e)===t)return!0;if(this.unshorten(e)===this.unshorten(t))return!0;const r=this.getShorthand(e),i=this.getShorthand(t);return!(!r||r!==t&&r!==i)||!(!i||i!==e)},shorten:function(e,t){for(var r in t)if(t[r]==e.substring(0,t[r].length))return r+":"+e.substring(t[r].length);return e},unshorten:function(e){if(this.validURL(e))return e;if(!e)return e;const t=e.split(":");return t[1]&&this.standard_urls[t[0]]?this.standard_urls[t[0]]+t[1]:e},validURL:function(e){return!(!e||"http://"!==e.substring(0,7)&&"https://"!==e.substring(0,8))},labelFromURL:function(e){let t=this.urlFragment(e);return(t=t||e).lastIndexOf("/")<t.length-1&&(t=t.substring(t.lastIndexOf("/")+1)),(t=t.replace("_"," ")).charAt(0).toUpperCase()+t.slice(1)},urlFragment:function(e){let t=(e="string"!=typeof e?window.location.href:e).split("#");if(t.length<=1&&(this.validURL(e)||(t=e.split(":"))),t.length>=1){const[,r]=t;if(r){const[t]=r.split("?");e=t}}return e},isStringType:function(e){return"http://www.w3.org/2001/XMLSchema#string"===e||"xsd:string"===e},lastURLBit:function(e){e=void 0===e?window.location.href:e;const[t]=e.split("#"),[r]=t.split("?");return e=r.substring(e.lastIndexOf("/")+1)},getStdURL:function(e,t,r){if(this.standard_urls[e]){if(!r)return this.standard_urls[e]+t;if(r===this.standard_urls[e]+t)return r}return!1},viewIncludesProperties:function(e){return"full"===e||"production"===e||"terse"===e},viewIncludesChildren:function(e,t){return this.viewIncludesProperties(e,t)},viewIncludesValue:function(e,t){return this.viewIncludesProperties(e,t)},numberWithCommas:function(e){if(e>=1e3||e<=-1e3){const t=e.toString().split(".");e<=-1e3&&(t[0]=t[0].substring(1)),t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e=e<=-1e3?`-${t.join(".")}`:t.join(".")}return e},datatypes:["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon","xdd:dateRange","xdd:gYearRange","xdd:integerRange","xdd:decimalRange","xdd:cc","xdd:email","xdd:html","xdd:url","xsd:anySimpleType","xsd:string","xsd:boolean","xsd:decimal","xsd:double","xsd:float","xsd:time","xsd:date","xsd:dateTime","xsd:dateTimeStamp","xsd:gYear","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:duration","xsd:yearMonthDuration","xsd:dayTimeDuration","xsd:byte","xsd:short","xsd:integer","xsd:long","xsd:unsignedByte","xsd:unsignedInt","xsd:unsignedLong","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger","xsd:base64Binary","xsd:anyURI","xsd:language","xsd:normalizedString","xsd:token","xsd:NMTOKEN","xsd:Name","xsd:NCName","xsd:NOTATION","xsd:QName","xsd:ID","xsd:IDREF","xsd:ENTITY","rdf:XMLLiteral","rdf:PlainLiteral","rdfs:Literal","xdd:json"],parseDate:function(e,t){let r;if("xsd:date"===e)r=this.parseXsdDate(t);else if("xsd:time"===e)r=this.parseXsdTime(t);else if("xsd:dateTime"===e)r=this.parseXsdDateTime(t);else if("xsd:gYear"===e)r={year:t};else if("xsd:gYearRange"===e)r={year:t};else if("xsd:gMonth"===e)r={month:t.substring(2)};else if("xsd:gDay"===e)r={day:t};else if("xsd:gYearMonth"===e){const e=t.split("-");for(;e.length<2;)e.push("");r={year:e[0],month:e[1]}}else if("xsd:gMonthDay"===e){const e=t.split("-");for(;e.length<2;)e.push("");r={month:e[0],day:e[1]}}else"xsd:dateTimeStamp"===e&&(r=this.parseXsdDateTime(t));return r},parseXsdDate:function(e){const t=this.extractXsdTimezone(e);let r,i;if(t&&(e=e.substring(0,e.length-t.length)),(r="-"===e.substring(0,1)?e.substring(0,5):e.substring(0,4))&&Math.abs(r)<1e4){let n=e.substring(r.length+1,r.length+3);if(!n)return!1;n=parseInt(n,10);let s=e.substring(r.length+4);if(!s)return!1;i={year:r,month:n,day:s=parseInt(s,10),timezone:t}}return i},addXsdPadding:function(e){const t={};return void 0!==e.year&&!1!==e.year&&e.year<1e3?Math.abs(e.year)<10?t.year=e.year<0?`-000${Math.abs(e.year)}`:`000${e.year}`:Math.abs(e.year)<100?t.year=e.year<0?`-00${Math.abs(e.year)}`:`00${e.year}`:t.year=e.year<0?`-0${Math.abs(e.year)}`:`0${e.year}`:e.year&&(t.year=e.year),void 0!==e.month&&!1!==e.month&&e.month<10?t.month=`0${e.month}`:e.month&&(t.month=e.month),void 0!==e.day&&!1!==e.day&&e.day<10?t.day=`0${e.day}`:e.day&&(t.day=e.day),void 0!==e.hour&&!1!==e.hour&&e.hour<10?t.hour=`0${e.hour}`:e.hour&&(t.hour=e.hour),void 0!==e.minute&&!1!==e.minute&&e.minute<10?t.minute=`0${e.minute}`:e.minute&&(t.minute=e.minute),void 0!==e.second&&!1!==e.second&&e.second<10?t.second=`0${e.second}`:e.second&&(t.second=e.second),t},xsdFromParsed:function(e,t){const r=this.addXsdPadding(e);let i;if("xsd:gYear"===t)i=!!r.year&&r.year;else{if("xsd:time"===t)return!!(r.hour&&r.minute&&r.second)&&`${r.hour}:${r.minute}:${r.second}`;if("xsd:date"===t)return!!(r.year&&r.month&&r.day)&&`${r.year}-${r.month}-${r.day}`;"xsd:dateTime"===t||"xsd:dateTimeStamp"===t?(i=!!(r.year&&r.month&&r.day)&&`${r.year}-${r.month}-${r.day}T`)&&(i+=`${r.hour?r.hour:"12"}:${r.minute?r.minute:"00"}:${r.second?r.second:"00"}`):"xsd:gMonth"===t?i=!!r.month&&`--${r.month}`:"xsd:gDay"===t?i=!!r.day&&`---${r.day}`:"xsd:gYearMonth"===t?i=!(!r.year||!r.month)&&`${r.year}-${r.month}`:"xsd:gMonthDay"===t&&(i=!(!r.day||!r.month)&&`--${r.month}-${r.day}`)}return r.timezone&&(i+=r.timezone),i},parseXsdTime:function(e){if(!e)return{};const t=this.extractXsdTimezone(e);return t&&(e=e.substring(0,e.length-t.length)),{hour:e.substring(0,2),minute:e.substring(3,5),second:e.substring(6),timezone:t}},convertTimestampToXsd:function(e){const t=new Date(1e3*e);return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()}},parseXsdDateTime:function(e){if(!e)return{};if("number"==typeof e)return this.convertTimestampToXsd(e);const t=this.extractXsdTimezone(e);t&&(e=e.substring(0,e.length-t.length));const r=this.parseXsdDate(e),i=this.parseXsdTime(e.substring(e.indexOf("T")+1));for(const e of Object.keys(i))r[e]=i[e];return r.timezone=t,r},extractXsdTimezone:function(e){return e&&"Z"===e.charAt(e.length-1)?"Z":(!e||"+"!==e.charAt(e.length-6)&&"-"!==e.charAt(e.length-6)||e.substring(e.length-6),!1)},parseRangeValue:function(e,t){t=t||",";let r=[];return"object"==typeof e&&e.length?r=e:e&&("string"!=typeof e&&(e=`${e}`),e.length&&"["===e.charAt(0)&&"]"===e.charAt(e.length-1)?(r.push(e.substring(1,e.indexOf(t))),r.push(e.substring(e.indexOf(t)+1,e.length-1))):r.push(e)),r},loadDynamicScript:function(e,t,r){const i=document.getElementById(e);if(!i){const i=document.createElement("script");i.src=t,document.body.appendChild(i),i.onload=function(){i.id=e,r&&r(e)}}i&&r&&r(e)},loadDynamicCSS:function(e,t,r){const i=document.getElementById(e);if(!i){const i=document.createElement("link");i.href=t,i.id=e,i.rel="stylesheet",document.body.appendChild(i),i.onload=function(){r&&r(e)}}i&&r&&r(e)}};e.exports=r},function(module,exports,__webpack_require__){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ObjectViewer=__webpack_require__(12),HTMLStringViewer=__webpack_require__(13),HTMLStringEditor=__webpack_require__(32),HTMLBooleanViewer=__webpack_require__(33),HTMLBooleanEditor=__webpack_require__(34),HTMLChoiceViewer=__webpack_require__(35),HTMLChoiceEditor=__webpack_require__(36),HTMLCoordinateViewer=__webpack_require__(37),HTMLCoordinateEditor=__webpack_require__(38),HTMLDateViewer=__webpack_require__(39),HTMLDateEditor=__webpack_require__(41),HTMLEntityViewer=__webpack_require__(42),HTMLEntityEditor=__webpack_require__(43),HTMLImageViewer=__webpack_require__(44),HTMLImageEditor=__webpack_require__(45),HTMLLinkViewer=__webpack_require__(46),HTMLNumberViewer=__webpack_require__(47),HTMLRangeViewer=__webpack_require__(48),HTMLRangeEditor=__webpack_require__(49),SantizedHTMLViewer=__webpack_require__(50),GoogleMapEditor=__webpack_require__(51),GoogleMapViewer=__webpack_require__(53),HTMLMarkupEditor=__webpack_require__(54),S2EntityEditor=__webpack_require__(55),TerminusClient=__webpack_require__(0),RenderingMap={registeredDataViewers:{},registeredDataEditors:{},getValidDataViewerList:function(e,t){var r=["HTMLStringViewer"];return t&&void 0!==this.registeredDataViewers[t]&&(r=r.concat(this.registeredDataViewers[t])),void 0!==this.registeredDataViewers[e]&&(r=r.concat(this.registeredDataViewers[e])),r},getValidDataEditorList:function(e,t){var r=["HTMLStringEditor"];if(t&&void 0!==this.registeredDataEditors[t]){var i=this.registeredDataEditors[t];if(i)for(var n=0;n<i.length;n++)-1==r.indexOf(i[n])&&r.push(i[n])}return void 0!==this.registeredDataEditors[e]&&(r=r.concat(this.registeredDataEditors[e])),r},getViewer:function getViewer(type,options,datatype){var vi=this.renderers[type];options=options||{};try{var viewer=eval("new "+type+"."+type+"("+JSON.stringify(options)+")");return datatype&&(viewer.type=datatype),viewer}catch(e){alert("failed on create "+e.toString())}},getAvailableDataViewers:function(e,t){for(var r=[],i=[],n=this.getValidDataViewerList(e,t),s=0;s<n.length;s++)-1==i.indexOf(n[s])&&i.push(n[s]);for(s=0;s<i.length;s++)if(this.renderers[i[s]]){var o=this.renderers[i[s]];r.push({value:i[s],label:o.label})}return r},getAvailableDataEditors:function(e,t){for(var r=[],i=[],n=this.getValidDataEditorList(e,t),s=0;s<n.length;s++)-1==i.indexOf(n[s])&&i.push(n[s]);for(s=0;s<i.length;s++)if(this.renderers[i[s]]){var o=this.renderers[i[s]];r.push({value:i[s],label:o.label})}return r},getViewerForDataFrame:function(e,t){var r=this.getValidDataViewerList(e,t);return r[r.length-1]},getEditorForDataFrame:function(e,t){var r=this.getValidDataEditorList(e,t);return r[r.length-1]},registerViewerForTypes:function(e,t,r){for(var i=0;i<r.length;i++)void 0===this.registeredDataViewers[r[i]]&&(this.registeredDataViewers[r[i]]=[]),-1==this.registeredDataViewers[r[i]].indexOf(e)&&(this.registeredDataViewers[r[i]].push(e),this.renderers[e]={label:t})},registerEditorForTypes:function(e,t,r){for(var i=0;i<r.length;i++)void 0===this.registeredDataEditors[r[i]]&&(this.registeredDataEditors[r[i]]=[]),-1==this.registeredDataEditors[r[i]].indexOf(e)&&(this.registeredDataEditors[r[i]].push(e),this.renderers[e]={label:t})},registerEditorForFrameType:function(e,t,r){this.renderers[e]={label:t},void 0===this.registeredDataEditors[r]&&(this.registeredDataEditors[r]=[]),-1==this.registeredDataEditors[r].indexOf(e)&&this.registeredDataEditors[r].push(e)},registerViewerForFrameType:function(e,t,r){this.renderers[e]={label:t},void 0===this.registeredDataViewers[r]&&(this.registeredDataViewers[r]=[]),-1==this.registeredDataViewers[r].indexOf(e)&&this.registeredDataViewers[r].push(e)},renderers:{HTMLStringViewer:{label:"String Viewer"},HTMLStringEditor:{label:"String Editor"}},addPlugin:function(e){"gmaps"==e&&(this.registerEditorForTypes("GoogleMapEditor","Google Map Editor",["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),this.registerViewerForTypes("GoogleMapViewer","Google Map Editor",["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"])),"quill"==e&&this.registerEditorForTypes("HTMLMarkupEditor","Quill WYSIWIG HTML Editor",["xdd:html"]),"select2"==e&&RenderingMap.registerEditorForFrameType("S2EntityEditor","S2 Autocomplete Selector","document"),"jsoneditor"==e&&RenderingMap.registerEditorForFrameType("S2EntityEditor","S2 Autocomplete Selector","document")},decorateRenderer:function(e,t){var r=this.compileOptions(e,t);if(r&&r.mode?t.mode=r.mode:t.parent&&t.parent.mode?t.mode=t.parent.mode:t.mode="view",r&&r.view?t.view=r.view:t.parent&&t.parent.view?t.view=t.parent.view:t.view="full",r&&r.facets?t.facets=r.facets:t.facets=t.getDefaultFacets(),r&&r.facet&&"object"==_typeof(t.facets[r.facet]))t.facet=r.facet;else{var i=t.getDefaultFacet();"object"==_typeof(t.facets[i])?t.facet=i:t.facet=key(t.facets)}return r&&r.hide_disabled_buttons?t.hide_disabled_buttons=r.hide_disabled_buttons:t.parent?t.hide_disabled_buttons=parent.hide_disabled_buttons:t.hide_disabled_buttons=!0,r&&"object"==_typeof(r.features)?t.features=r.features:t.features=t.facets[t.facet].features,r&&"object"==_typeof(r.controls)?t.controls=r.controls:t.controls=t.facets[t.facet].controls,r&&void 0!==r.viewerType&&(t.viewerType=r.viewerType,r.viewerOptions&&(t.viewerOptions=r.viewerOptions)),r&&void 0!==r.header||(t.header_viewer=new ObjectViewer.HTMLObjectHeaderViewer),r&&r.filter,r&&r.sort,e},compileOptions:function(e,t){var r={};for(var i in e)"rules"!=i&&(r[i]=e[i]);return r}};RenderingMap.registerViewerForTypes("HTMLBooleanViewer","Checkbox Viewer",["xsd:boolean"]),RenderingMap.registerEditorForTypes("HTMLBooleanEditor","Checkbox Editor",["xsd:boolean"]),RenderingMap.registerViewerForFrameType("HTMLChoiceViewer","Choice Viewer","oneOf"),RenderingMap.registerEditorForFrameType("HTMLChoiceEditor","Choice Selector","oneOf"),RenderingMap.registerViewerForTypes("HTMLCoordinateViewer","Coordinate Viewer",["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),RenderingMap.registerEditorForTypes("HTMLCoordinateEditor","Coordinate Editor",["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),RenderingMap.registerViewerForTypes("HTMLDateViewer","Date Viewer",["xsd:time","xsd:date","xsd:dateTime","xsd:gYear","xsd:gYearRange","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:dateTimeStamp"]),RenderingMap.registerEditorForTypes("HTMLDateEditor","Date Editor",["xsd:time","xsd:date","xsd:dateRange","xsd:dateTime","xsd:gYear","xsd:gYearRange","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:dateTimeStamp"]),RenderingMap.registerViewerForFrameType("HTMLEntityViewer","Document Viewer","document"),RenderingMap.registerEditorForFrameType("HTMLEntityEditor","Document Selector","document"),RenderingMap.registerViewerForTypes("HTMLImageViewer","Image Viewer",["xdd:url","xsd:anyURI","xsd:base64Binary"]),RenderingMap.registerEditorForTypes("HTMLImageEditor","Image Editor",["xsd:base64Binary"]),RenderingMap.registerViewerForTypes("HTMLImageViewer","Image Viewer",["xdd:url","xsd:anyURI","xsd:base64Binary"]),RenderingMap.registerEditorForTypes("HTMLImageEditor","Image Editor",["xsd:base64Binary"]),RenderingMap.registerViewerForTypes("HTMLLinkViewer","Link Viewer",["xdd:url","xsd:anyURI"]),RenderingMap.registerViewerForTypes("HTMLNumberViewer","Number with commas",["xsd:decimal","xsd:double","xsd:float","xsd:short","xsd:integer","xsd:long","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger"]),RenderingMap.registerViewerForTypes("HTMLRangeViewer","Range Viewer",["xdd:gYearRange","xdd:dateRange","xdd:integerRange","xdd:decimalRange"]),RenderingMap.registerEditorForTypes("HTMLRangeEditor","Range Editor",["xdd:gYearRange","xdd:dateRange","xdd:integerRange","xdd:decimalRange"]),RenderingMap.registerViewerForTypes("SantizedHTMLViewer","Sanitized HTML",["xsd:string","xdd:html"]),module.exports=RenderingMap},function(e,t,r){var i=r(60),n=r(0);function s(e){this.client=e,this.load_schema=!1}s.prototype.options=function(e){return this.config=e||n.WOQL.document(),this},s.prototype.setDatatypes=function(e){return this.datatypes=new i,this.config.datatypes&&this.datatypes.options(this.config.datatypes),e&&e(this.datatypes),this},s.prototype.loadDocument=function(e,t){if(!e)return!1;var r=this;return"doc:"==e.substring(0,4)&&(e=e.substring(4)),this.client.getDocument(e,{"terminus:encoding":"terminus:frame"}).then((function(e){return r.loadDataFrames(e),r.config.load_schema()&&r.loadDocumentSchema(r.document.cls),e}))},s.prototype.loadDocumentSchema=function(e){var t=this,r=n.FrameHelper.unshorten(e);return this.client.getClassFrame(!1,r).then((function(r){return t.loadSchemaFrames(r,e)}))},s.prototype.loadDataFrames=function(e,t){t||(this.document?t=this.document.cls:e&&e.length&&e[0]&&e[0].domain&&(t=e[0].domain)),t?this.document?this.document.loadDataFrames(e):this.document=new n.ObjectFrame(t,e):console.log("Missing Class Failed to add dataframes due to missing class")},s.prototype.loadSchemaFrames=function(e,t){t||e&&e.length&&e[0]&&e[0].domain&&(t=e[0].domain),t?(this.document||(this.document=new n.ObjectFrame(t)),e&&(this.document.loadClassFrames(e),this.document.subjid||(this.document.newDoc=!0,this.document.fillFromSchema("_:")))):console.log("Missing Class","Failed to add class frames due to missing class")},s.prototype.render=function(){return!this.renderer&&this.document&&(this.config.renderer()?this.renderer=this.config.renderer():(this.applyRulesToDocument(this.document,this.config),this.renderer=this.document)),this.renderer&&this.renderer.render?this.renderer.render(this.document):"function"==typeof this.renderer?this.renderer(this.document):void console.log("didna make it ")},s.prototype.applyRulesToDocument=function(e,t){var r=this;this.document.filter(t.rules,(function(e,i){if(void 0!==i.render())e.render=i.render();else{if(i.renderer())var n=r.loadRenderer(i.renderer(),e,i.args);n&&n.render&&(e.render=function(e){return n.render(e)})}i.compare()&&(e.compare=i.compare()),t.setFrameDisplayOptions(e,i)}))},s.prototype.loadRenderer=function(e,t,r){return!!this.owner&&this.owner.loadRenderer(e,t,r,this)},e.exports=s},function(e,t){e.exports=Object.freeze({CONNECT:"connect",GET_SCHEMA:"get_schema",UPDATE_SCHEMA:"update_schema",UPDATE_DOCUMENT:"update_document",CLASS_FRAME:"class_frame",WOQL_SELECT:"woql_select",GET_DOCUMENT:"get_document",DELETE_DATABASE:"delete_database",DELETE_DOCUMENT:"delete_document",CREATE_DATABASE:"create_database",CREATE_DOCUMENT:"create_document",WOQL_UPDATE:"woql_update"})},function(e,t){e.exports={authorityActionsToArr:function(e){return!1===Array.isArray(e)?[]:e.map(e=>e["@id"])},URIEncodePayload:function(e){if("string"==typeof e)return encodeURIComponent(e);const t=[];for(const r of Object.keys(e))if("object"==typeof e[r])for(const i of Object.keys(e[r])){const n=e[r][i];t.push(`${encodeURIComponent(i)}=${encodeURIComponent(n)}`)}else t.push(`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`);return t.join("&")}}},function(e,t,r){var i=r(1),n=r(0);function s(e){this.properties=[]}function o(){}s.prototype.render=function(e){return this.renderer=e,this.headerViewer=new o,this.renderedDOM,this.headerViewer&&(this.header=this.headerViewer.getAsDOM(this.renderer),this.header&&this.renderedDOM.appendChild(this.header)),this.body=this.getObjectBodyDOM(),this.body&&this.renderedDOM.appendChild(this.body),this.renderedDOM},s.prototype.getObjectDOM=function(){var e=this.renderer.getContentOrientation(),t="terminus-object-frame-"+e;if("page"==e)var r=document.createElement("div");else r=document.createElement("span");var i="terminus-object-frame "+t+(this.renderer.parent?"":" terminus-root-frame")+" terminus-object-frame-"+this.renderer.mode;return r.setAttribute("class",i),r.setAttribute("data-class",this.renderer.subjectClass()),r.setAttribute("data-id",this.renderer.subject()),r},s.prototype.getObjectBodyDOM=function(){var e=document.createElement("div");for(var t in e.setAttribute("class","terminus-object-properties terminus-object-properties-page"),this.properties)this.properties[t]&&e.appendChild(this.properties[t]);return e},s.prototype.getFeatureDOM=function(e){if(this.hasFeatureViewer(e))return this.featureViewer[e](this.renderer,this)},s.prototype.redraw=function(){n.FrameHelper.removeChildren(this.renderedDOM),this.properties=[],this.renderer.render(this)},s.prototype.redrawHeader=function(){if(this.headerViewer&&this.header){var e=this.headerViewer.getAsDOM(this.renderer);this.header.replaceWith(e),this.header=e}},s.prototype.redrawBody=function(){if(this.body){var e=this.getObjectBodyDOM();this.body.replaceWith(e),this.body=e}},s.prototype.addRenderedProperty=function(e,t){this.properties[e]=t},s.prototype.clear=function(){n.FrameHelper.removeChildren(this.renderedDOM),this.properties={}},s.prototype.remove=function(){this.renderedDOM.parentNode.removeChild(this.renderedDOM)},s.prototype.goTo=function(e,t){i.goToName(e,t)},s.prototype.getObjectIDMarker=function(e){var t=document.createElement("a");t.setAttribute("class","terminus-object-idmarker");var r=n.FrameHelper.getShorthand(e.subject());if(r||(r=e.subject()),r){var i=r.split(":");i.length>1&&(r=i[1]),t.setAttribute("name",r)}return t},o.prototype.getAsDOM=function(e){var t,r,i=e.getContentOrientation(),n="terminus-object-frame-btn terminus-object-header-"+i;if("page"==i)var s=document.createElement("div");else s=document.createElement("span");if(s.setAttribute("class","terminus-object-header "+n),e.showFeature("facet")){var o=this.getObjectFacetDOM(e);o&&s.appendChild(o)}e.showFeature("label")&&((t=this.getObjectLabelDOM(e))&&s.appendChild(t));if(e.showFeature("id")){var a=this.getObjectIDDOM(e);a&&s.appendChild(a)}if(e.showFeature("type")){var u=this.getObjectTypeDOM(e);u&&s.appendChild(u)}e.showFeature("status")&&((t=this.getObjectStatusDOM(e))&&s.appendChild(t));if(e.showFeature("view")){var c=this.getViewPropertyDOM(e);c&&s.appendChild(c)}if(e.showFeature("viewer")){var l=this.getViewerSelectorDOM(e);l&&s.appendChild(l)}e.showFeature("control")&&((r=this.getObjectControlsDOM(e))&&s.appendChild(r));e.showFeature("summary")&&((r=this.getObjectSummaryDOM(e))&&s.appendChild(r));return s},o.prototype.getObjectSummaryDOM=function(e){var t=e.getSummary();return i.getInfoboxDOM("object-summary",!1,t.long,t.status)},o.prototype.getObjectControlsDOM=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-object-controls"),e.showFeature("add")){var r=this.getAddPropertyDOM(e);r&&t.appendChild(r)}if(e.showFeature("mode")){var n=i.getModeSelectorDOM("object",e);n&&t.appendChild(n)}if(e.showFeature("delete")){var s=this.getObjectDeleteDOM(e);s&&t.appendChild(s)}if(e.showFeature("clone")){var o=this.getObjectCloneDOM(e);o&&t.appendChild(o)}if(e.showFeature("reset")){var a=this.getObjectResetDOM(e);a&&t.appendChild(a)}if(e.showFeature("update")){var u=this.getObjectUpdateDOM(e);u&&t.appendChild(u)}if(e.showFeature("show")){var c=this.getObjectShowDOM(e);c&&t.appendChild(c)}if(e.showFeature("hide")){var l=this.getObjectHideDOM(e);l&&t.appendChild(l)}return t},o.prototype.getObjectFacetDOM=function(e){var t=e.getAvailableFacets();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-facet");var n=i.getSelectionControl("object-facet",t,e.currentFacet(),(function(t){t&&e.setFacet(t)}));return r.appendChild(n),r}return!1},o.prototype.getObjectLabelDOM=function(e){var t=e.getLabel();return!!t&&i.getInfoboxDOM("object-label",!1,t)},o.prototype.getObjectIDDOM=function(e){var t=e.subject(),r=!1;return"edit"==e.mode&&e.isNewDocument()?(e.idDOM&&(t=e.idDOM.value),(r=document.createElement("input")).setAttribute("class","terminus-object-id-input"),r.required=!0,"_:"==t&&(t=""),e.idDOM=r):e.isNewDocument()&&"_:"==t&&(t="New Document"),i.getInfoboxDOM("object-id","ID",t,"Every fragment of data is identified by a unique URL",r)},o.prototype.getObjectTypeDOM=function(e){if("edit"==e.mode&&e.parent&&e.parent.isClassChoice()&&e.isNew()){var t=e.parent.getAvailableClassChoices();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-change-class");var n=document.createElement("span");n.setAttribute("class","terminus-property-change-label"),n.appendChild(document.createTextNode("Type")),r.appendChild(n);var s=i.getSelectionControl("change-class",t,e.subjectClass(),(function(t){t&&e.changeClass(t)}));return r.appendChild(s),r}}var o=e.getClassMeta(e.subjectClass()),a=e.subjectClass(),u="All objects have types, identified by a unique URL";return o&&(a=i.getVariableValueFromBinding("Label",o),u=(u=i.getVariableValueFromBinding("Comment",o))?e.subjectClass()+" "+u:e.subjectClass()),i.getInfoboxDOM("object-type","Type",a,u)},o.prototype.getObjectStatusDOM=function(e){var t=e.getSummary();return i.getInfoboxDOM("status-"+t.status,!1,t.status,t.status)},o.prototype.getAddPropertyDOM=function(e){var t=e.getAddableProperties();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-add-property"),t.unshift({value:"",label:"Add New Property"});var n=!e.cardControlAllows("add")&&"Cardinality Rules Forbid Add",s=i.getSelectionControl("add-property",t,"",(function(t){t&&e.addNewProperty(t)}),n);return r.appendChild(s),r}return!1},o.prototype.getViewPropertyDOM=function(e){var t=e.getViewableProperties();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-view-property"),t.unshift({value:"",label:"View Property"});var n=i.getSelectionControl("view-property",t,"",(function(t){t&&e.goToProperty(t)}));return r.appendChild(n),r}return!1},o.prototype.getObjectDeleteDOM=function(e){var t=!e.cardControlAllows("delete")&&"Cardinality Rules Forbid Delete";return i.getActionControl("object","delete","Delete",(function(){e.delete()}),t)},o.prototype.getObjectCloneDOM=function(e){var t=!e.cardControlAllows("clone")&&"Cardinality Rules Forbid Clone";return i.getActionControl("object","clone","Clone",(function(){e.clone()}),t)},o.prototype.getObjectResetDOM=function(e){var t=!e.isUpdated()&&"Nothing to reset";return i.getActionControl("object","reset","Reset",(function(){e.reset()}),t)},o.prototype.getViewerSelectorDOM=function(e){var t=e.getAvailableViewers();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-object-viewer");var n=e.currentViewer(),s=i.getSelectionControl("object-viewer",t,n,(function(t){t&&e.setViewer(t)}));return r.appendChild(s),r}return!1},o.prototype.getObjectHideDOM=function(e){return i.getActionControl("object","hide","Hide",(function(){e.hide()}))},o.prototype.getObjectShowDOM=function(e){return i.getActionControl("object","show","Show",(function(){e.show()}))},o.prototype.getObjectUpdateDOM=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-object-update"),e.isNewDocument())var r=!1;else r=!e.isUpdated()&&"No changes";return t.appendChild(i.getActionControl("object","save","Save",(function(){e.save()}),r)),t},e.exports=s},function(e,t,r){var i=r(1);function n(e){this.size=!(!e||!e.size)&&e.size,this.css=e&&e.css?"terminus-literal-value "+e.css:"terminus-literal-value",this.max_word_size=!(!e||!e.max_word_size)&&e.max_word_size,this.max_cell_size=!(!e||!e.max_cell_size)&&e.max_cell_size}n.prototype.renderFrame=function(e,t){var r=e.get();return this.render(r)},n.prototype.renderValue=function(e){return this.render(e.value())},n.prototype.render=function(e){var t=document.createElement("span");return t.setAttribute("class",this.css),t.setAttribute("data-value",e),this.max_word_size||this.max_cell_size?i.wrapShortenedText(t,e,this.max_cell_size,this.max_word_size):(e=document.createTextNode(e),t.appendChild(e)),t},e.exports={HTMLStringViewer:n}},function(e,t,r){var i=r(1),n=r(0);function s(e){this.values=[]}function o(){}s.prototype.render=function(e){if(this.renderer=e,this.headerViewer=new o,this.propDOM){var t=this.getPropertyDOM();this.propDOM.replaceWith(t),this.propDOM=t}else this.propDOM=this.getPropertyDOM();return this.propDOM.appendChild(this.getPropertyIDMarker(this.renderer)),this.headerViewer&&(this.header=this.headerViewer.getAsDOM(this.renderer),this.header&&this.propDOM.appendChild(this.header)),this.body=this.getPropertyBodyDOM(),this.body&&this.propDOM.appendChild(this.body),this.propDOM},s.prototype.getPropertyDOM=function(){var e=this.renderer.getContentOrientation(),t=" terminus-property-frame-display terminus-property-frame-"+e;if("label"==e)var r=document.createElement("span");else r=document.createElement("div");return r.setAttribute("class","terminus-property-frame terminus-zebra-frame terminus-property-frame-"+this.renderer.mode+" "+t),r.setAttribute("data-property",this.renderer.property()),r},s.prototype.getPropertyBodyDOM=function(){var e=this.renderer.getContentOrientation(),t="terminus-property-values-"+e;if("page"==e)var r=document.createElement("div");else r=document.createElement("span");r.setAttribute("class","terminus-property-values "+t+" terminus-property-values-align");for(var i=0;i<this.values.length;i++)r.appendChild(this.values[i]);return r},s.prototype.addRenderedValue=function(e){this.values.push(e)},s.prototype.clear=function(){n.FrameHelper.removeChildren(this.propDOM),this.values=[]},s.prototype.remove=function(){this.propDOM.parentNode.removeChild(this.propDOM)},s.prototype.redraw=function(){var e=this.getPropertyDOM();this.propDOM.replaceWith(e),this.propDOM=e,this.values=[],this.renderer.render(this)},s.prototype.redrawHeader=function(){if(this.headerViewer&&this.header){var e=this.headerViewer.getAsDOM(this.renderer);this.header.replaceWith(e),this.header=e}},s.prototype.redrawBody=function(){if(this.body){var e=this.getPropertyBodyDOM();this.body.replaceWith(e),this.body=e}},s.prototype.getPropertyIDMarker=function(e){var t=document.createElement("a");t.setAttribute("class","terminus-property-idmarker");var r=n.FrameHelper.getShorthand(e.subject());r||(r=e.subject()),(i=r.split(":")).length>1&&(r=i[1]);var i,s=n.FrameHelper.getShorthand(e.property());return s||(s=e.property()),(i=s.split(":")).length>1&&(s=i[1]),t.setAttribute("name",r+"_"+s),t},s.prototype.goTo=function(e,t,r){i.goToName(e,t,r)},o.prototype.getAsDOM=function(e){var t=e.getContentOrientation(),r="terminus-property-header-"+t;if("page"==t)var i=document.createElement("div");else i=document.createElement("span");i.setAttribute("class","terminus-text terminus-property-header "+r);var n=document.createElement("span");if(n.setAttribute("class","terminus-property-header-wrapper"),e.showFeature("control")){var s=this.getPropertyControlsDOM(n,e);this.expModeMenu="page"==t?s:null}if(e.showFeature("label")){var o=this.getPropertyLabelDOM(e);if(e.showFeature("status"))(a=this.getPropertyStatusDOM(e))&&o.prepend(a);o&&n.appendChild(o)}else if(e.showFeature("status")){var a;(a=this.getPropertyStatusDOM(e))&&n.appendChild(a)}e.showFeature("summary")&&((o=this.getPropertySummaryDOM(e))&&n.appendChild(o));var u=document.createElement("span");if(u.setAttribute("class","terminus-property-header-info terminus-property-header-info-"+e.currentFacet()),e.showFeature("facet")){var c=this.getPropertyFacetDOM(e);c&&u.appendChild(c)}if(e.showFeature("view")){var l=this.getViewValueDOM(e);l&&u.appendChild(l)}if(e.showFeature("id")){var d=this.getPropertyIDDOM(e);d&&u.appendChild(d)}if(e.showFeature("type")){var p=this.getPropertyRangeDOM(e);p&&u.appendChild(p)}if(e.showFeature("cardinality")&&e.hasCardinalityRestriction()){var h=this.getPropertyCardinalityDOM(e);h&&u.appendChild(h)}e.showFeature("comment")&&((o=this.getPropertyCommentDOM(e))&&u.appendChild(o));return n.appendChild(u),i.appendChild(n),i},o.prototype.getPropertyFacetDOM=function(e){var t=e.getAvailableFacets();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-facet");var n=i.getSelectionControl("property-facet",t,e.currentFacet(),(function(t){t&&e.setFacet(t)}));return r.appendChild(n),r}return!1},o.prototype.getPropertyIDDOM=function(e){return i.getInfoboxDOM("property-id","Property",e.property(),"This property is identified by this unique URL: "+e.property())},o.prototype.getPropertyRangeDOM=function(e){return i.getInfoboxDOM("property-type","Type",e.range(),"The type of arguments that this property accepts")},o.prototype.getPropertySummaryDOM=function(e){var t=e.getSummary();return i.getInfoboxDOM("property-summary",!1,t.long,t.status)},o.prototype.getPropertyStatusDOM=function(e){var t=e.getSummary();return i.getInfoboxDOM("status-"+t.status,!1,t.status,t.status)},o.prototype.getPropertyLabelDOM=function(e){var t=e.getLabel();return i.getInfoboxDOM("property-label",!1,t)},o.prototype.getPropertyCommentDOM=function(e){var t=e.getComment();return i.getInfoboxDOM("property-comment",!1,t)},o.prototype.getPropertyCardinalityDOM=function(e){var t=e.getRestriction();if(t.min&&t.max)if(t.min==t.max)var r=t.min,n="Cardinality: "+t.min;else{r=t.min+"-"+t.max,n="Minimum Cardinality: "+t.min;n+=", Maximum Cardinality: "+t.max}else if(t.min)r=">"+(t.min-1),n="Minimum Cardinality: "+t.min;else{if(!t.max)return!1;r="<"+(t.max+1),n="Maximum Cardinality: "+t.max}return i.getInfoboxDOM("property-cardinality","Cardinality",r,n)},o.prototype.getActionControlDOM=function(e,t){if(t.showFeature("mode")){var r=i.getModeSelectorDOM("property",t);r&&e.appendChild(r)}if(t.showFeature("delete")){var n=this.getPropertyDeleteDOM(t);n&&e.appendChild(n)}var s,o;t.showFeature("add")&&!t.isClassChoice()&&((o=this.getAddValueDOM(t))&&e.appendChild(o));if(t.showFeature("reset")){var a=this.getPropertyResetDOM(t);a&&e.appendChild(a)}if(t.showFeature("update")){var u=this.getPropertyUpdateDOM(t);u&&e.appendChild(u)}if(t.showFeature("show")){var c=this.getPropertyShowDOM(t);c&&e.appendChild(c)}t.showFeature("hide")&&((s=this.getPropertyHideDOM(t))&&e.appendChild(s));t.showFeature("viewer")&&((s=this.getViewerSelectorDOM(t))&&e.appendChild(s));t.showFeature("add")&&t.isClassChoice()&&((o=this.getAddValueDOM(t))&&e.appendChild(o))},o.prototype.getSettingsControlDOM=function(e,t){var r=document.createElement("div");e.appendChild(r);t.getContentOrientation();this.getActionControlDOM(e,t)},o.prototype.getPropertyControlsDOM=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-property-controls");var i=this.getSettingsControlDOM(r,t);return e.appendChild(r),i},o.prototype.getAddValueDOM=function(e){if(!e.isClassChoice()){s=function(){e.add("edit")};var t=!e.cardControlAllows("add")&&"Cardinality Rules Forbid Add";return i.getActionControl("property","add","Add",s,t)}var r=e.getAvailableClassChoices();if(r&&r.length){var n=document.createElement("span");n.setAttribute("class","terminus-property-add-class"),r.unshift({value:"",label:"Add Type"});var s=function(t){t&&e.addClass(t)},o=i.getSelectionControl("add-property",r,"",s);return n.appendChild(o),n}return!1},o.prototype.getViewValueDOM=function(e){var t=e.getViewableValues();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-view-value"),t.unshift({value:"",label:"View Value"});var n=i.getSelectionControl("view-values",t,"",(function(t){e.goToValue(t)}));return r.appendChild(n),r}return!1},o.prototype.getPropertyDeleteDOM=function(e){var t=!e.cardControlAllows("delete")&&"Cardinality Rules Forbid Delete";return i.getActionControl("property","delete","Delete",(function(){e.delete()}),t)},o.prototype.getPropertyHideDOM=function(e){return i.getActionControl("property","hide","Hide",(function(){e.hide()}))},o.prototype.getPropertyResetDOM=function(e){var t=!e.isUpdated()&&"Nothing to reset";return i.getActionControl("property","reset","Reset",(function(){e.reset()}),t)},o.prototype.getPropertyShowDOM=function(e){return i.getActionControl("property","show","Show",(function(){e.show()}))},o.prototype.getPropertyUpdateDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-property-update");var r=!e.isUpdated()&&"No Change";return t.appendChild(i.getActionControl("property","save","Save",(function(){e.save()}),r)),t},o.prototype.getViewerSelectorDOM=function(e){var t=e.getAvailableViewers();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-property-viewer");var n=e.currentViewer(),s=i.getSelectionControl("property-viewers",t,n,(function(t){t&&e.setViewer(t)}));return r.appendChild(s),r}return!1},o.prototype.showValue=function(e,t){var r=e.subject()+"->"+e.property()+"_"+t;window.location=(""+window.location).replace(/#[A-Za-z0-9_]*$/,"")+"#"+r},e.exports=s},function(e,t,r){var i=r(1),n=(r(13),r(0));function s(){}function o(){}s.prototype.render=function(e){if(this.headerViewer=new o,this.valDOM){var t=this.getValueDOM();this.valDOM.replaceWith(t),this.valDOM=t}else this.valDOM=this.getValueDOM();return this.valDOM.appendChild(this.getValueIDMarker(this.renderer)),this.body=this.getValueBodyDOM(),this.body&&this.valDOM.appendChild(this.body),this.headerViewer&&(this.header=this.headerViewer.getAsDOM(this.renderer),"page"==this.renderer.facet?this.header&&this.expModeMenu&&this.expModeMenu.appendChild(this.header):this.header&&this.valDOM.appendChild(this.header)),this.valDOM},s.prototype.getValueDOM=function(){if("page"==this.renderer.currentFacet())var e=document.createElement("div");else e=document.createElement("span");return e.setAttribute("class","terminus-property-value property-value-"+this.renderer.currentFacet()+" property-value-"+this.renderer.mode),"view"==this.renderer.mode&&e.setAttribute("data-value",this.renderer.value()),e},s.prototype.getValueBodyDOM=function(){if("page"==this.renderer.currentFacet())var e=document.createElement("div");else e=document.createElement("span");if(e.setAttribute("class"," terminus-property-body property-value-body property-value-body-"+this.renderer.currentFacet()+" terminus-property-body-align"),this.renderer.showFeature("body"))var t=this.renderer.getDataValueViewer().getDOM(this.renderer,this);else{if(!this.renderer.showFeature("summary"))return!1;t=this.getSummaryDOM()}return t&&e.appendChild(t),e},s.prototype.remove=function(){this.valDOM.parentNode.removeChild(this.valDOM)},s.prototype.redrawHeader=function(){if(this.headerViewer&&this.header){var e=this.headerViewer.getAsDOM(this.renderer);this.header.replaceWith(e),this.header=e}},s.prototype.redrawBody=function(){if(this.body){var e=this.getValueBodyDOM();this.body.replaceWith(e),this.body=e}},s.prototype.getValueIDMarker=function(e){var t=document.createElement("a");t.setAttribute("class","terminus-value-idmarker");var r=n.FrameHelper.getShorthand(e.subject());r||(r=e.subject()),(i=r.split(":")).length>1&&(r=i[1]);var i,s=n.FrameHelper.getShorthand(e.property());return s||(s=e.property()),(i=s.split(":")).length>1&&(s=i[1]),t.setAttribute("name",r+"_"+s+"_"+e.index),t},s.prototype.getSummaryDOM=function(){var e=this.renderer.getSummary();return HTMLTerminusClient.FrameHelper.getInfoboxDOM("value-summary",!1,e.long,e.long)},s.prototype.fireInternalLink=function(e){var t=this;return function(r){r.preventDefault(),t.renderer.load(e)}},s.prototype.internalLink=function(e,t){var r=this.fireInternalLink(e),i=document.createElement("a");if(i.onClick=r,i.href=e,i.addEventListener("click",r),t)i.appendChild(document.createTextNode(t));else{var s=n.FrameHelper.getShorthand(e);s?(i.setAttribute("title",e),i.appendChild(document.createTextNode(s))):i.appendChild(document.createTextNode(e))}return i},s.prototype.clear=function(){n.FrameHelper.removeChildren(this.valDOM)},o.prototype.getAsDOM=function(e){if("page"==e.currentFacet())var t=document.createElement("div");else t=document.createElement("span");if(t.setAttribute("class","terminus-value-header terminus-value-header-"+e.currentFacet()),e.showFeature("facet")){var r=this.getValueFacetDOM(e);r&&t.appendChild(r)}if(e.showFeature("viewer")){var i=this.getViewerSelectorDOM(e);i&&t.appendChild(i)}if(e.showFeature("type")){var n=this.getValueTypeDOM(e);n&&t.appendChild(n)}if(e.showFeature("status")){var s=this.getValueStatusDOM(e);s&&t.appendChild(s)}if(e.showFeature("control")){var o=this.getValueControlsDOM(e);o&&t.appendChild(o)}return t},o.prototype.getValueFacetDOM=function(e){var t=e.getAvailableFacets();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-value-facet");var n=i.getSelectionControl("value-facet",t,e.currentFacet(),(function(t){t&&e.setFacet(t)}));return r.appendChild(n),r}return!1},o.prototype.getValueTypeDOM=function(e){return i.getInfoboxDOM("value-type","Type",e.type(),"All data values have types, identified by a unique URL")},o.prototype.getValueStatusDOM=function(e){var t=e.getSummary();return i.getInfoboxDOM("status-"+t.status,!1,t.status,t.status)},o.prototype.getValueControlsDOM=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-value-controls"),e.showFeature("mode")){var r=i.getModeSelectorDOM("value",e);r&&t.appendChild(r)}if(e.showFeature("delete")){var n=this.getValueDeleteDOM(e);n&&t.appendChild(n)}if(e.showFeature("clone")){var s=this.getValueCloneDOM(e);s&&t.appendChild(s)}if(e.showFeature("reset")){var o=this.getValueResetDOM(e);o&&t.appendChild(o)}if(e.showFeature("update")){var a=this.getValueUpdateDOM(e);a&&t.appendChild(a)}if(e.showFeature("show")){var u=this.getValueShowDOM(e);u&&t.appendChild(u)}if(e.showFeature("hide")){var c=this.getValueHideDOM(e);c&&t.appendChild(c)}return t},o.prototype.getValueDeleteDOM=function(e){var t=!e.cardControlAllows("delete")&&"Cardinality Rules Forbid Delete";return i.getActionControl("value","delete","Delete",(function(){e.delete()}),t)},o.prototype.getValueResetDOM=function(e){var t=!e.isUpdated()&&"Nothing to reset";return i.getActionControl("value","reset","Reset",(function(){e.reset()}),t)},o.prototype.getValueShowDOM=function(e){return i.getActionControl("value","show","Show",(function(){e.show()}))},o.prototype.getValueHideDOM=function(e){return i.getActionControl("value","hide","Hide",(function(){e.hide()}))},o.prototype.getValueCloneDOM=function(e){var t=!e.cardControlAllows("clone")&&"Cardinality Rules Forbid Clone";return i.getActionControl("value","clone","Clone",(function(){e.clone()}),t)},o.prototype.getValueUpdateDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-value-update");var r=!e.isUpdated()&&"Nothing to save - no change";return t.appendChild(i.getActionControl("value","save","Save",(function(){e.save()}),r)),t},o.prototype.getViewerSelectorDOM=function(e){var t=e.getAvailableViewers();if(t&&t.length){var r=document.createElement("span");r.setAttribute("class","terminus-value-viewer");var n=e.currentViewer(),s=i.getSelectionControl("data-viewer",t,n,(function(t){t&&e.setViewer(t)}));return r.appendChild(s),r}return!1},e.exports=s},function(module,exports,__webpack_require__){var HTMLStringViewer=__webpack_require__(13),HTMLStringEditor=__webpack_require__(32),HTMLBooleanViewer=__webpack_require__(33),HTMLBooleanEditor=__webpack_require__(34),HTMLChoiceViewer=__webpack_require__(35),HTMLChoiceEditor=__webpack_require__(36),HTMLCoordinateViewer=__webpack_require__(37),HTMLCoordinateEditor=__webpack_require__(38),HTMLDateViewer=__webpack_require__(39),HTMLDateEditor=__webpack_require__(41),HTMLEntityViewer=__webpack_require__(42),HTMLEntityEditor=__webpack_require__(43),HTMLImageViewer=__webpack_require__(44),HTMLImageEditor=__webpack_require__(45),HTMLLinkViewer=__webpack_require__(46),HTMLNumberViewer=__webpack_require__(47),HTMLRangeViewer=__webpack_require__(48),HTMLRangeEditor=__webpack_require__(49),SantizedHTMLViewer=__webpack_require__(50),GoogleMapEditor=__webpack_require__(51),GoogleMapViewer=__webpack_require__(53),HTMLMarkupEditor=__webpack_require__(54),S2EntityEditor=__webpack_require__(55);function initialiseDataRenderers(e,t){e.registerViewerForTypes("HTMLBooleanViewer",{label:"Checkbox Viewer"},["xsd:boolean"]),e.registerEditorForTypes("HTMLBooleanEditor",{label:"Checkbox Editor"},["xsd:boolean"]),e.registerViewerForTypes("HTMLChoiceViewer",{label:"Choice Viewer"},["oneOf"]),e.registerEditorForTypes("HTMLChoiceEditor",{label:"Choice Selector"},["oneOf"]),e.registerViewerForTypes("HTMLCoordinateViewer",{label:"Coordinate Viewer"},["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),e.registerEditorForTypes("HTMLCoordinateEditor",{label:"Coordinate Editor"},["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),e.registerViewerForTypes("HTMLDateViewer",{label:"Date Viewer"},["xsd:time","xsd:date","xsd:dateTime","xsd:gYear","xsd:gYearRange","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:dateTimeStamp"]),e.registerEditorForTypes("HTMLDateEditor",{label:"Date Editor"},["xsd:time","xsd:date","xsd:dateRange","xsd:dateTime","xsd:gYear","xsd:gYearRange","xsd:gMonth","xsd:gDay","xsd:gYearMonth","xsd:gMonthDay","xsd:dateTimeStamp"]),e.registerViewerForTypes("HTMLEntityViewer",{label:"Document Viewer"},["document"]),e.registerEditorForTypes("HTMLEntityEditor",{label:"Document Selector"},["document"]),e.registerViewerForTypes("HTMLImageViewer",{label:"Image Viewer"},["xdd:url","xsd:anyURI","xsd:base64Binary"]),e.registerEditorForTypes("HTMLImageEditor",{label:"Image Editor"},["xsd:base64Binary"]),e.registerViewerForTypes("HTMLImageViewer",{label:"Image Viewer"},["xdd:url","xsd:anyURI","xsd:base64Binary"]),e.registerEditorForTypes("HTMLImageEditor",{label:"Image Editor"},["xsd:base64Binary"]),e.registerViewerForTypes("HTMLLinkViewer",{label:"Link Viewer"},["xdd:url","xsd:anyURI"]),e.registerViewerForTypes("HTMLNumberViewer",{label:"Number with commas"},["xsd:decimal","xsd:double","xsd:float","xsd:short","xsd:integer","xsd:long","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger"]),e.registerViewerForTypes("HTMLRangeViewer",{label:"Range Viewer"},["xdd:gYearRange","xdd:dateRange","xdd:integerRange","xdd:decimalRange"]),e.registerEditorForTypes("HTMLRangeEditor",{label:"Range Editor"},["xdd:gYearRange","xdd:dateRange","xdd:integerRange","xdd:decimalRange"]),e.registerViewerForTypes("SantizedHTMLViewer",{label:"Sanitized HTML"},["xsd:string","xdd:html"]),e.universalEditor="HTMLStringEditor",e.universalViewer="HTMLStringViewer",addPlugins(e,t),e.createRenderer=function(e,t){return createDataRenderer(e,t)}}function createDataRenderer(type,options){try{var viewer=eval("new "+type+"."+type+"("+JSON.stringify(options)+")")}catch(e){return!1}return viewer}function addPlugins(e,t){t&&-1!=t.indexOf("gmaps")&&(e.registerEditorForTypes("GoogleMapEditor",{label:"Google Map Editor"},["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"]),e.registerViewerForTypes("GoogleMapViewer",{label:"Google Map Editor"},["xdd:coordinate","xdd:coordinatePolyline","xdd:coordinatePolygon"])),t&&-1!=t.indexOf("quill")&&e.registerEditorForTypes("HTMLMarkupEditor",{label:"Quill WYSIWIG HTML Editor"},["xdd:html"]),t&&-1!=t.indexOf("select2")&&e.registerEditorForFrameType("S2EntityEditor",{label:"S2 Autocomplete Selector"},"document")}module.exports={createDataRenderer:createDataRenderer,initialiseDataRenderers:initialiseDataRenderers}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];return e.apply(t,r)}}},function(e,t,r){"use strict";var i=r(3);function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(i.isURLSearchParams(t))s=t.toString();else{var o=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(n(t)+"="+n(e))})))})),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";var i=r(3),n=r(87),s={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,u={adapter:("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?a=r(21):"undefined"!=typeof XMLHttpRequest&&(a=r(21)),a),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){u.headers[e]=i.merge(s)})),e.exports=u},function(e,t,r){"use strict";var i=r(3),n=r(88),s=r(18),o=r(90),a=r(91),u=r(22);e.exports=function(e){return new Promise((function(t,c){var l=e.data,d=e.headers;i.isFormData(l)&&delete d["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",m=e.auth.password||"";d.Authorization="Basic "+btoa(h+":"+m)}if(p.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?o(p.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};n(t,c,i),p=null}},p.onabort=function(){p&&(c(u("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){c(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var f=r(92),g=(e.withCredentials||a(e.url))&&e.xsrfCookieName?f.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in p&&i.forEach(d,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)})),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),c(e),p=null)})),void 0===l&&(l=null),p.send(l)}))}},function(e,t,r){"use strict";var i=r(89);e.exports=function(e,t,r,n,s){var o=new Error(e);return i(o,t,r,n,s)}},function(e,t,r){"use strict";var i=r(3);e.exports=function(e,t){t=t||{};var r={};return i.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(r[e]=t[e])})),i.forEach(["headers","auth","proxy"],(function(n){i.isObject(t[n])?r[n]=i.deepMerge(e[n],t[n]):void 0!==t[n]?r[n]=t[n]:i.isObject(e[n])?r[n]=i.deepMerge(e[n]):void 0!==e[n]&&(r[n]=e[n])})),i.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(i){void 0!==t[i]?r[i]=t[i]:void 0!==e[i]&&(r[i]=e[i])})),r}},function(e,t,r){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},function(e,t,r){const i=r(11),n=r(10),s=r(6);function o(e,t){this.connection={},this.connectionConfig=e,this.connectionConfig.server&&t&&this.setClientKey(this.connectionConfig.server,t)}o.prototype.getClientKey=function(e){return e||(e=this.connectionConfig.serverURL()),!(!e||!this.connection[e])&&this.connection[e].key},o.prototype.setClientKey=function(e,t){"string"==typeof t&&t.trim()&&(void 0===this.connection[e]&&(this.connection[e]={}),this.connection[e].key=t.trim())},o.prototype.addConnection=function(e,t){void 0===this.connection[e]&&(this.connection[e]={});const r=t?Object.keys(t):[];for(const n of r)if("terminus:authority"===n&&t[n]){const r=!0===Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<r.length;t+=1){let n=r[t]["terminus:authority_scope"];const s=r[t]["terminus:action"];!1===Array.isArray(n)&&(n=[n]);const o=i.authorityActionsToArr(s);for(let t=0;t<n.length;t+=1){const r=n[t];void 0===this.connection[e][r["@id"]]&&(this.connection[e][r["@id"]]=r),this.connection[e][r["@id"]]["terminus:authority"]=o}}}else this.connection[e][n]=t[n]},o.prototype.serverConnected=function(){return void 0!==this.connection[this.connectionConfig.server]},o.prototype.capabilitiesPermit=function(e,t,r){if(!this.connectionConfig.connectionMode()||!0!==this.connectionConfig.client_checks_capabilities||e===n.CONNECT)return!0;let i;if(r=r||this.connectionConfig.server,t=t||this.connectionConfig.dbid,e===n.CREATE_DATABASE?i=this.getServerRecord(r):t?i=this.getDBRecord(t):console.log("no dbid",r,t),i){const t=i["terminus:authority"];if(t&&-1!==t.indexOf(`terminus:${e}`))return!0}else console.log("problem with ",this.connection,e,r,t);return this.error=s.accessDenied(e,t,r),!1},o.prototype.getServerRecord=function(e){const t=e||this.connectionConfig.server,r=this.connection[t]||{},i=Object.keys(r);for(const e of i)if("terminus:Server"===this.connection[t][e]["@type"])return this.connection[t][e];return!1},o.prototype.getDBRecord=function(e,t){const r=t||this.connectionConfig.server;return e=e||this.connectionConfig.dbid,"object"==typeof this.connection[r]&&(void 0!==this.connection[r][e]?this.connection[r][e]:(e=this.dbCapabilityID(e),void 0!==this.connection[r][e]?this.connection[r][e]:void 0))},o.prototype.getServerDBRecords=function(e){const t=e||this.connectionConfig.server,r={},i=this.connection[t]||{};for(const e of Object.keys(i))"terminus:Database"===this.connection[t][e]["@type"]&&(r[e]=this.connection[t][e]);return r},o.prototype.removeDB=function(e,t){(e=e||this.connectionConfig.dbid)&&this.connectionConfig.dbid&&this.connectionConfig.dbid===e&&(this.connectionConfig.dbid=!1);const r=t||this.connectionConfig.server,i=this.dbCapabilityID(e);i&&this.connection[r]&&this.connection[r][i]&&delete this.connection[r][i]},o.prototype.dbCapabilityID=function(e){return`doc:${e}`},o.prototype.getDBRecord=function(e,t){const r=t||this.connectionConfig.server;return e=e||this.connectionConfig.dbid,"object"==typeof this.connection[r]&&(void 0!==this.connection[r][e]?this.connection[r][e]:(e=this.dbCapabilityID(e),void 0!==this.connection[r][e]?this.connection[r][e]:void 0))},e.exports=o},function(e,t,r){const i=r(27);function n(e){const t=e||{};this.server=!1,this.dbid=!1,this.docid=!1,t.server&&this.setServer(t.server),t.db&&this.setDB(t.db),t.doc&&this.setDocument(t.doc),this.connected_mode=t.connected_mode||"connected",this.include_key=t.include_key||!0,this.client_checks_capabilities=t.client_checks_capabilities||!0}n.prototype.serverURL=function(){return this.server},n.prototype.connectionMode=function(){return"connected"===this.connected_mode},n.prototype.includeKey=function(){return!0===this.include_key},n.prototype.schemaURL=function(){return`${this.dbURL()}/schema`},n.prototype.queryURL=function(){return`${this.dbURL()}/woql`},n.prototype.frameURL=function(){return`${this.dbURL()}/frame`},n.prototype.docURL=function(){return`${this.dbURL()}/document/${this.docid?this.docid:""}`},n.prototype.dbURL=function(e){if(this.platformEndpoint()){const t=this.server.substring(0,this.server.lastIndexOf("/platform/"));if(!e||"create"!==e)return`${t}/${this.dbid}/platform`;if("platform"===e)return`${t}/${this.dbid}`}return this.server+this.dbid},n.prototype.platformEndpoint=function(){return!(!this.server||this.server.lastIndexOf("/platform/")!==this.server.length-10)},n.prototype.setServer=function(e,t){const r=new i(t);return!!r.parseServerURL(e)&&(this.server=r.server(),this.dbid=!1,this.docid=!1,!0)},n.prototype.setDB=function(e,t){const r=new i(t);return!!r.parseDBID(e)&&(r.server()&&(this.server=r.server()),this.dbid=r.dbid(),this.docid=!1,!0)},n.prototype.setSchemaURL=function(e,t){const r=new i(t);return!!r.parseSchemaURL(e)&&(r.server()&&(this.server=r.server()),this.dbid=r.dbid(),this.docid=!1,!0)},n.prototype.setDocument=function(e,t){const r=new i(t);return!!r.parseDocumentURL(e)&&(r.server()&&(this.server=r.server()),r.dbid()&&(this.dbid=r.dbid()),r.docid()&&(this.docid=r.docid()),!0)},n.prototype.setQueryURL=function(e,t){const r=new i(t);return!!r.parseQueryURL(e)&&(r.server()&&(this.server=r.server()),this.dbid=r.dbid(),this.docid=!1,!0)},n.prototype.setClassFrameURL=function(e,t){const r=new i(t);return!!r.parseClassFrameURL(e)&&(r.server()&&(this.server=r.server()),this.dbid=r.dbid(),this.docid=!1,!0)},e.exports=n},function(e,t){function r(e){this.context=e,this.server_url=!1,this.db=!1,this.doc=!1}r.prototype.server=function(){return this.server_url},r.prototype.dbid=function(){return this.db},r.prototype.docid=function(){return this.doc},r.prototype.setContext=function(e){this.context=e},r.prototype.parseServerURL=function(e){return this.server_url=!1,this.validURL(e)?this.server_url=e:this.context&&this.validPrefixedURL(e,this.context)&&(this.server_url=this.expandPrefixed(e,this.context)),this.server_url&&this.server_url.lastIndexOf("/")!==this.server_url.length-1&&(this.server_url+="/"),this.server_url},r.prototype.parseDBID=function(e){if(this.db=!1,this.context&&this.validPrefixedURL(e,this.context)&&(e=this.expandPrefixed(e,this.context)),this.validURL(e)){e.lastIndexOf("/")===e.length-1&&(e=e.substring(0,e.length-1));const t=e.lastIndexOf("/"),r=e.substring(0,t);if(e=e.substring(t+1),!1===this.parseServerURL(r))return!1}return this.validIDString(e)&&(this.db=e),this.db},r.prototype.parseDocumentURL=function(e){if(this.doc=!1,this.context&&this.validPrefixedURL(e,this.context)&&(e=this.expandPrefixed(e,this.context)),this.validURL(e)){let t=e;if(-1!==e.lastIndexOf("/document/")&&(t=e.substring(0,e.lastIndexOf("/document/")),e=e.substring(e.lastIndexOf("/document/")+10)),!1===this.parseDBID(t))return!1}return"doc:"===e.substring(0,4)&&(e=e.substring(4)),this.validIDString(e)&&(this.doc=e),this.doc},r.prototype.parseSchemaURL=function(e){return this.context&&this.validPrefixedURL(e,this.context)&&(e=this.expandPrefixed(e,this.context)),this.validURL(e)&&(e=this.stripOptionalPath(e,"schema")),this.parseDBID(e)},r.prototype.parseQueryURL=function(e){return this.context&&this.validPrefixedURL(e,this.context)&&(e=this.expandPrefixed(e,this.context)),this.validURL(e)&&(e=this.stripOptionalPath(e,"woql"),e=this.stripOptionalPath(e,"query")),this.parseDBID(e)},r.prototype.stripOptionalPath=function(e,t){return-1!==e.indexOf(`/${t}`)&&(e=e.substring(0,e.indexOf(`/${t}`))),e},r.prototype.parseClassFrameURL=function(e){return this.context&&this.validPrefixedURL(e,this.context)&&(e=this.expandPrefixed(e,this.context)),this.validURL(e)&&(e=this.stripOptionalPath(e,"frame")),this.parseDBID(e)},r.prototype.validURL=function(e){return"http://"===e.substring(0,7)||"https://"===e.substring(0,8)},r.prototype.validPrefixedURL=function(e,t){if("string"!=typeof e||"object"!=typeof t)return!1;const r=e.split(":");return 2===r.length&&(!(r[0].length<1||r[1].length<1)&&!!(t&&t[r[0]]&&this.validIDString(r[1])))},r.prototype.validIDString=function(e){return"string"==typeof e&&(-1===e.indexOf(":")&&-1===e.indexOf(" ")&&-1===e.indexOf("/"))},r.prototype.expandPrefixed=function(e,t){const r=e.split(":");return t[r[0]]+r[1]},e.exports=r},function(module,exports){function FramePattern(e){e&&this.setPattern(e)}FramePattern.prototype.setPattern=function(e){if(this.scope=!!e.scope&&e.scope,this.label=!!e.label&&e.label,this.frame_type=!!e.frame_type&&e.frame_type,this.subject=!!e.subject&&e.subject,this.subjectClass=!!e.subjectClass&&e.subjectClass,this.range=!!e.range&&e.range,this.property=!!e.property&&e.property,this.value=!!e.value&&e.value,this.parent=!!e.parent&&new FramePattern(e.parent),this.children=[],e.children)for(var t=0;t<e.children.length;t++)this.children.push(new FramePattern(e.children[t]));this.depth=void 0!==e.depth&&e.depth,this.index=!!e.index&&e.index,this.status=!!e.status&&e.status},FramePattern.prototype.checkFrame=function(e){var t=this.getRendererType(e);return!!t&&((!this.scope||this.scope==t||"*"==this.scope)&&(!this.illegalRuleType(t)&&(!(this.frame_type&&!this.checkFrameType(t,e))&&(!(this.label&&!this.checkLabel(t,e))&&(!(this.subject&&!this.checkSubject(t,e))&&(!(this.subjectClass&&!this.checkSubjectClass(t,e))&&(!(this.property&&!this.checkProperty(t,e))&&(!(!1!==this.depth&&!this.checkDepth(t,e))&&(!(this.range&&!this.checkRange(t,e))&&(!(this.value&&!this.checkValue(t,e))&&(!(this.parent&&!this.checkParent(t,e))&&(!(this.children&&this.children.length&&!this.checkChildren(t,e))&&(!(this.index&&!this.checkIndex(t,e))&&!(this.status&&!this.checkStatus(t,e)))))))))))))))},FramePattern.prototype.illegalRuleType=function(e){return!("data"!=e||!this.children.length)||!("object"!=e||!this.range)},FramePattern.prototype.checkSubject=function(e,t){"object"==typeof this.subject&&this.subject.length||(this.subject=[this.subject]);for(var r=t.subject(),i=0;i<this.subject.length;i++)if(this.IDsMatch(e[i],r))return!0;return!1},FramePattern.prototype.checkChildren=function(e,t){for(var r=0;r<this.children.length;r++){var i=!1;if("object"==e)for(var n in t.properties)this.children[r].checkFrame(t.properties[n])&&(i=!0);else if("property"==e)for(var s=0;s<=renderer.values.length;s++)this.children[s].checkFrame(t.values[s])&&(i=!0);if(!i)return!1}return!0},FramePattern.prototype.checkStatus=function(e,t){"object"==typeof this.status&&0!=this.status.length||(this.status=[this.status]);for(var r=0;r<this.status.length;r++){if("updated"==this.status[r]&&!t.isUpdated())return!1;if("new"==this.status[r]&&!t.isNew())return!1;if("unchanged"==this.status[r]&&t.isUpdated())return!1}return!0},FramePattern.prototype.checkDepth=function(e,t){return this.numberMatch(this.depth,t.depth())},FramePattern.prototype.checkParent=function(e,t){return this.parent.checkFrame(t.parent)},FramePattern.prototype.checkIndex=function(e,t){return"data"==e&&this.index==t.index},FramePattern.prototype.checkProperty=function(e,t){"object"==typeof this.property&&this.property.length||(this.property=[this.property]);for(var r=0;r<this.property.length;r++)if(this.propertyIDsMatch(t.property(),this.property[r]))return!0;return!1},FramePattern.prototype.checkValue=function(e,t){"object"==typeof this.value&&this.value.length||(this.value=[this.value]);for(var r=0;r<this.value.length;r++)if("data"==e){if(this.valuesMatch(t.value(),this.value[r]))return!0}else if("property"==e){for(var i=0;i<=t.values.length;i++)if("data"==this.getRendererType(t.values[r])&&this.valuesMatch(t.values[r].get(),this.value[r]))return!0}else if("object"==e)for(var n in t.properties)if(this.checkValue(this.getRendererType(t.properties[n]),t.properties[n]))return!0;return!1},FramePattern.prototype.checkRange=function(e,t){"object"==typeof this.range&&this.range.length||(this.range=[this.range]);for(var r=0;r<this.range.length;r++)if(this.rangeIDsMatch(t.range(),this.range[r]))return!0;return!1},FramePattern.prototype.checkSubjectClass=function(e,t){"object"==typeof this.subjectClass&&this.subjectClass.length||(this.subjectClass=[this.subjectClass]);for(var r=t.subjectClass(),i=0;i<this.subjectClass.length;i++)if(this.classIDsMatch(this.subjectClass[i],r))return!0;return!1},FramePattern.prototype.checkFrameType=function(e,t){return"object"==e?"object"==this.frame_type:"data"==e&&t.frame?this.frame_type==t.frame.ftype():"property"!=e&&void 0},FramePattern.prototype.checkLabel=function(e,t){return"function"!=typeof t.getLabel?(console.log(new Error("Rule passed to check label with broken renderer object - no getLabel")),!1):this.stringMatch(this.label,t.getLabel())},FramePattern.prototype.IDsMatch=function(e,t){return TerminusClient.FrameHelper.compareIDs(e,t)},FramePattern.prototype.classIDsMatch=function(e,t){return this.IDsMatch(e,t)},FramePattern.prototype.propertyIDsMatch=function(e,t){return this.IDsMatch(e,t)},FramePattern.prototype.rangeIDsMatch=function(e,t){return this.IDsMatch(e,t)},FramePattern.prototype.valuesMatch=function(e,t){return e==t},FramePattern.prototype.numberMatch=function(vala,valb){if("string"==typeof vala)try{return eval(valb+vala)}catch(e){return!1}return vala===valb},FramePattern.prototype.stringMatch=function(e,t){return new RegExp(e).test(t)},FramePattern.prototype.getRendererType=function(e){return e.isProperty()?"property":e.isObject()?"object":e.isData()?"data":e.renderer_type?e.renderer_type:(console.log(new Error("frame configuration passed non-renderer type "+e.constructor.name)),console.log(renderer),!1)};const FramePatternMatcher={};function FrameRule(){return this.rule={pattern:{}},this}FramePatternMatcher.testRules=function(e,t,r){var i=[];if(e&&e.length)for(var n=0;n<e.length;n++){(!e[n].rule.pattern||FramePatternMatcher.patternMatchesFrame(e[n].rule.pattern,t))&&(i.push(e[n]),r&&"function"==typeof r&&r(t,e[n]))}return i},FramePatternMatcher.patternMatchesFrame=function(e,t){if("object"==typeof e&&e.length){for(var r=0;r<e.length;r++){if(!new FramePattern(e[r]).checkFrame(t))return!1}return!0}return new FramePattern(e).checkFrame(t)},FrameRule.prototype.unpack=function(e,t){if(t)e.join(",");return"'"+e.join("','")+"'"},FrameRule.prototype.prettyPrint=function(e){if("*"==this.scope())var t="all()";else t=this.scope()+"()";if(void 0!==this.frameType()&&(t+=".frame_type("+this.unpack(this.frameType())+")"),void 0!==this.label()&&(t+=".label("+this.unpack(this.label())+")"),void 0!==this.subject()&&(t+=".subject("+this.unpack(this.subject())+")"),void 0!==this.subjectClass()&&(t+=".subjectClass("+this.unpack(this.subjectClass())+")"),void 0!==this.property()&&(t+=".property("+this.unpack(this.property())+")"),void 0!==this.range()&&(t+=".range("+this.unpack(this.range())+")"),void 0!==this.value()&&(t+=".value("+this.unpack(this.value())+")"),void 0!==this.children()&&this.children.length>0){t+=".children(\n";for(var r=this.children(),i=0;i<r.length;i++)t+=r.prettyPrint()+"\n";t+=")"}if(void 0!==this.parent()&&(t+=".parent("+this.parent.prettyPrint()+")"),void 0!==this.depth()&&(t+=".depth('"+this.depth()+"')"),void 0!==this.index()&&(t+=".index("+this.unpack(this.index(),!0)+")"),void 0!==this.status()&&(t+=".status("+this.unpack(this.status())+")"),void 0!==this.renderer()&&(t+=".renderer('"+this.renderer()+"')"),void 0!==this.render()&&(t+=".render("+this.render()+")"),void 0!==this.compare()&&(t+=".compare("+this.compare()+")"),void 0!==this.mode()&&(t+=".mode('"+this.mode()+"')"),void 0!==this.collapse()&&(t+=".collapse("+this.collapse()+")"),void 0!==this.hidden()&&(t+=".hidden("+this.hidden()+")"),void 0!==this.view()&&(t+=".view('"+this.view()+"')"),void 0!==this.showDisabledButtons()&&(t+=".showDisabledButtons("+this.showDisabledButtons()+")"),void 0!==this.header()&&(t+=".header("+this.header()+")"),void 0!==this.features()&&(t+=".features("+this.unpack(this.features())+")"),void 0!==this.headerFeatures()&&(t+=".headerFeatures("+this.unpack(this.headerFeatures())+")"),void 0!==this.showEmpty()&&(t+=".showEmpty("+this.show_empty()+")"),void 0!==this.dataviewer()&&(t+=".dataviewer('"+this.dataviewer()+"')"),void 0!==this.args()&&(t+=".args("+JSON.stringify(this.args())+")"),void 0!==this.featureRenderers()){for(var n in t+=".featureRenderers({",this.featureRenderers())t+=JSON.stringify(n)+":"+this.rule.feature_renderers[n]+",";t=t.substring(0,t.length-1),t+="})"}return t},FrameRule.prototype.scope=function(e){return void 0===e?this.rule.pattern.scope:(this.rule.pattern.scope=e,this)},FrameRule.prototype.frameType=function(...e){return void 0===e||0==e.length?this.rule.pattern.frametype:(this.rule.pattern.frametype=frame_type,this)},FrameRule.prototype.label=function(...e){return void 0===e||0==e.length?this.rule.pattern.label:(this.rule.pattern.label=e,this)},FrameRule.prototype.subject=function(...e){return void 0===e||0==e.length?this.rule.pattern.subject:(this.rule.pattern.subject=e,this)},FrameRule.prototype.subjectClass=function(...e){return void 0===e||0==e.length?this.rule.pattern.subjectClass:(this.rule.pattern.subjectClass=e,this)},FrameRule.prototype.property=function(...e){return void 0===e||0==e.length?this.rule.pattern.property:(this.rule.pattern.property=e,this)},FrameRule.prototype.depth=function(e){return void 0===e?this.rule.pattern.depth:(this.rule.pattern.depth=e,this)},FrameRule.prototype.range=function(...e){return void 0===e||0==e.length?this.rule.pattern.range:(this.rule.pattern.range=e,this)},FrameRule.prototype.value=function(...e){return void 0===e||0==e.length?this.rule.pattern.value:(this.rule.pattern.value=e,this)},FrameRule.prototype.pattern=function(){return this.rule.pattern},FrameRule.prototype.json=function(){return this.rule},FrameRule.prototype.parent=function(e){return void 0===e?this.rule.pattern.parent:(this.rule.pattern.parent=e.pattern(),this)},FrameRule.prototype.children=function(...e){if(void 0===e)return this.rule.pattern.children;void 0===this.rule.pattern.children&&(this.rule.pattern.children=[]);for(var t=0;t<e.length;t++)this.rule.pattern.children.push(e[t].pattern());return this},FrameRule.prototype.index=function(...e){return void 0===e||0==e.length?this.rule.pattern.index:(this.rule.pattern.index=e,this)},FrameRule.prototype.status=function(...e){return void 0===e||0==e.length?this.rule.pattern.status:(this.rule.pattern.status=e,this)},FrameRule.prototype.renderer=function(e){return e?(this.rule.renderer=e,this):this.rule.renderer},FrameRule.prototype.render=function(e){return e?(this.rule.render=e,this):e},FrameRule.prototype.args=function(e){return e?(this.rule.args=e,this):this.rule.args},FrameRule.prototype.compare=function(e){return e?(this.rule.compare=e,this):this.rule.compare},FrameRule.prototype.mode=function(e){return e?(this.rule.mode=e,this):this.rule.mode},FrameRule.prototype.collapse=function(e){return e?(this.rule.collapse=e,this):this.rule.collapse},FrameRule.prototype.hidden=function(e){return e?(this.rule.hidden=e,this):this.rule.hidden},FrameRule.prototype.view=function(e){return e?(this.rule.view=e,this):this.rule.view},FrameRule.prototype.showDisabledButtons=function(e){return e?(this.rule.show_disabled_buttons=e,this):this.rule.show_disabled_buttons},FrameRule.prototype.features=function(...e){return void 0===e||0==e.length?this.rule.features:(this.rule.features=e,this)},FrameRule.prototype.headerFeatures=function(...e){return void 0===e||0==e.length?this.rule.header_features:(this.rule.header_features=e,this)},FrameRule.prototype.header=function(e){return e?(this.rule.header=e,this):this.rule.header},FrameRule.prototype.featureRenderers=function(e){return e?(this.rule.feature_renderers=e,this):this.rule.feature_renderers},FrameRule.prototype.showEmpty=function(e){return e?(this.rule.show_empty=e,this):this.rule.show_empty},FrameRule.prototype.dataviewer=function(e){return e?(this.rule.dataviewer=e,this):this.rule.dataviewer},module.exports={FramePatternMatcher:FramePatternMatcher,FramePattern:FramePattern,FrameRule:FrameRule}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=r(30),o=r(102),a=r(1),u=r(56),c=r(0),l=r(2);function d(e,t,r){this.ui=e,this.server=this.ui.server(),this.db=this.ui.db(),this.init(),this.page_config=r&&r.page_config?r.page_config:"view",this.mode=r&&r.mode?r.mode:"view",this.editor=!(!r||!r.editor)&&r.editor,this.load_schema=!r||!r.load_schema||r.load_schema,this.config_options=this.getBuiltInViewerOptions(),this.options=r||this.config_options[t],this.action=t,this.document=!1,this.dbViewer=new u.TerminusDBViewer(this.ui)}d.prototype.init=function(){new u.TerminusDBViewer(this.ui);var e=new s(this.ui.client,this.options,this.ui),t=e.getClassMetaDataQuery(),r=this;r.classmeta={},r.instancemeta={},e.execute(t).then((function(e){if(e&&e.hasBindings()){for(var t=0;t<e.bindings.length;t++){var i=a.getVariableValueFromBinding("Element",e.bindings[t]);i&&void 0===r.classmeta[i]&&(r.classmeta[i]=e.bindings[t])}r.refreshPage()}})).catch((function(e){console.log(e)}))},d.prototype.getJsonLdViewer=function(){switch(this.page_config){case"view":var e=this;this.ui.client.getDocument().then((function(t){e.ui.clearBusy(),c.FrameHelper.removeChildren(e.pagedom);var r=t["@id"],i=document.createElement("div");i.setAttribute("class","terminus-application-header"),i.appendChild(document.createTextNode("jsonld format of "+r)),e.pagedom.appendChild(i);var n=document.createElement("pre");e.document_json_response=t,n.innerHTML=JSON.stringify(t,void 0,2),n.setAttribute("class","terminus-api-explorer-text-area"),l.stylizeCodeDisplay(e.ui,n,e.pagedom,"javascript")})).catch((function(t){throw e.ui.clearBusy(),t}));break;case"create":c.FrameHelper.removeChildren(this.pagedom);var t=document.createElement("div");t.setAttribute("class","terminus-application-header");var r=new ObjectViewer.HTMLObjectHeaderViewer;t.appendChild(r.getObjectIDDOM(this.renderer)),t.appendChild(this.getDocumentJsonldCreateButton()),this.pagedom.appendChild(t);var i=document.createElement("textarea");this.json_editor=i,this.pagedom.appendChild(i),i.setAttribute("class","terminus-api-explorer-text-area"),l.stylizeEditor(this.ui,i,"doc-json-create","javascript")}},d.prototype.getEncodingChooserDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-document-creator terminus-form-horizontal terminus-control-group");var t=document.createElement("div");t.setAttribute("class","terminus-control-buttons terminus-document-creator-buttons");var r=document.createElement("select");r.setAttribute("class","terminus-doc-config terminus-enc");var i=document.createElement("option");i.setAttribute("value","frame"),i.appendChild(document.createTextNode("HTML")),r.appendChild(i);var n=document.createElement("option");n.setAttribute("value","jsonld"),n.appendChild(document.createTextNode("JSON-LD")),r.appendChild(n),t.appendChild(r);var s=this;r.addEventListener("change",(function(e){switch(s.viewMode=this.value,s.page_config){case"view":s.page_config="view","frame"==this.value?(s.renderer=!1,s.refreshPage()):s.getJsonLdViewer();break;case"create":s.page_config="create","frame"==this.value?(s.renderer=!1,s.refreshPage()):s.getJsonLdViewer()}}));var o=document.createElement("span");return o.setAttribute("class","create-document-list"),o.appendChild(t),e.appendChild(o),e},d.prototype.getDocumentInput=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-display-flex");var r=document.createElement("input");r.setAttribute("class","terminus-form-doc-value terminus-document-chooser terminus-doc-input-text"),r.setAttribute("placeholder","doc:myDocId");var i=document.createElement("button");i.appendChild(document.createTextNode("Create")),i.setAttribute("class","terminus-control-button terminus-document-button terminus-btn"),i.addEventListener("click",(function(){this.value&&self.ui.showDocument(this.value)})),t.appendChild(r),t.appendChild(i),e.appendChild(t)},d.prototype.showCreateDocument=function(e){this.ui.showCreateDocument(e)},d.prototype.styleCreateDocumentChooser=function(){var e=document.getElementsByClassName("woql-chooser");for(i=0;i<e.length;i++)if("select-one"==e[i].type){e[i].classList.add("terminus-form-doc-value");var t=this;e[i].addEventListener("change",(function(){t.showCreateDocument(this.value)}))}},d.prototype.getCreateDocumentButton=function(e){var t=document.createElement("button");t.setAttribute("class","terminus-btn"),t.appendChild(document.createTextNode("Create"));var r=this;t.addEventListener("click",(function(){this.value&&r.ui.showCreateDocument(this.value)})),e.appendChild(t)},d.prototype.getDocumentCreatorSelect=function(e){var t=new TerminusHTMLViewer(this.ui.client),r=c.WOQL,i=r.from(this.ui.client.connectionConfig.dbURL()).start(0).concreteClass(),n=this;i.execute(this.ui.client).then((function(s){var o=new c.WOQLResult(s,i),a=t.showResult(o,r.chooser().show_empty("Create Document of Type"),!1);e.appendChild(a),n.styleCreateDocumentChooser(),n.getCreateDocumentButton(e)}))},d.prototype.getDocumentCreatorDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-display-flex terminus-create-document-align"),this.getDocumentCreatorSelect(t),e.appendChild(t)},d.prototype.getListOfDocuments=function(){this.dbViewer.getClassesDOM(this.controldom)},d.prototype.loadDocumentHome=function(){var e=document.createElement("span");e.setAttribute("class","terminus-display-flex"),this.controldom.appendChild(e),this.ui.showControl("get_document")&&(this.getDocumentInput(e),this.getListOfDocuments()),this.ui.showControl("create_document")&&this.getDocumentCreatorDOM(e)},d.prototype.styleToggleSwitch=function(e){e.classList.remove("terminus-btn"),e.classList.add("terminus-doc-btn-group")},d.prototype.getFormatButtons=function(){var e=document.createElement("span");e.setAttribute("class","terminus-display-flex terminus-format-button-align");var t=e.appendChild(l.getButton("HTML")),r=l.getButton("JSON-LD");this.styleToggleSwitch(t),this.styleToggleSwitch(r),t.classList.add("terminus-doc-btn-selected"),this.format="HTML",e.appendChild(t),e.appendChild(r);var i=this;return t.addEventListener("click",(function(){i.format=this.value})),r.addEventListener("click",(function(){i.format=this.value})),e},d.prototype.getAsDOM=function(){return this.holder=document.createElement("div"),this.controldom=document.createElement("div"),this.controldom.setAttribute("class","terminus-document-controls"),this.holder.appendChild(this.getFormatButtons()),this.pagedom=document.createElement("div"),this.pagedom.setAttribute("class","terminus-document-viewer"),this.loadDocumentHome(),this.holder.appendChild(this.controldom),this.holder.appendChild(this.pagedom),this.holder},d.prototype.getInstanceMeta=function(e){if(this.instancemeta&&void 0!==this.instancemeta[e])return this.instancemeta[e];var t=new s(this.ui.client,this.options,this.ui),r=t.getInstanceMeta(e);return t.execute(r).then((function(e){return!(!e||!e.hasBindings())&&e.bindings[0]})).catch((function(e){console.log(e)}))},d.prototype.getClassMeta=function(e){return!!n(this.classmeta[e])&&this.classmeta[e]},d.prototype.loadCreateDocument=function(e){if(e){this.ui.showBusy("Fetching frame for document class "+e);var t=this;return this.mode="edit",this.page_config="create",-1==e.indexOf("/")&&-1==e.indexOf(":")&&(e="schema:"+e),this.loadDocumentSchema(e).then((function(e){t.ui.clearBusy(),t.setLabel()})).catch((function(e){console.error(e),t.ui.clearBusy(),t.ui.showError(e)}))}},d.prototype.loadDocument=function(e,t){if(!e)return!1;var r=this;return"doc:"==e.substring(0,4)&&(e=e.substring(4)),this.page_config="view",e=e.replace("/candidate","/platform/document"),this.ui.showBusy("Loading Document from "+e),this.ui.client.getDocument(e,{"terminus:encoding":"terminus:frame"}).then((function(e){return r.ui.clearBusy(),r.loadDataFrames(e),r.setLabel(),r.refreshPage(),r.load_schema&&r.loadDocumentSchema(r.document.cls).then((function(){r.refreshPage()})).catch((function(e){console.error(e)})),e})).catch((function(e){console.error(e),r.ui.clearBusy(),r.ui.showError(e)}))},d.prototype.loadDocumentSchema=function(e){var t=this,r=c.FrameHelper.unshorten(e);return this.ui.client.getClassFrame(!1,r).then((function(r){t.loadSchemaFrames(r,e),t.refreshPage()}))},d.prototype.deleteDocument=function(e){this.document=!1;var t=this;return this.ui.showBusy("Deleting Document "+e),this.ui.client.deleteDocument(e).then((function(e){t.ui.clearBusy()})).catch((function(e){t.ui.clearBusy(),t.ui.showError(e)}))},d.prototype.createDocument=function(e,t){var r=this;return this.ui.showBusy("Creating document"),this.ui.client.createDocument(e,t,{"terminus:encoding":"jsonld"}).then((function(t){r.ui.clearBusy(),r.ui.showDocument(e)})).catch((function(e){return r.ui.clearBusy(),e.data&&e.data["terminus:witnesses"]?r.ui.showViolations(e.data["terminus:witnesses"],"instance"):r.ui.showError(e),r.page_config="home",r.page_config}))},d.prototype.updateDocument=function(e){var t=this.document.subjid,r=this;return this.ui.showBusy("Updating document "+t),this.ui.client.updateDocument(t,e,{"terminus:encoding":"jsonld"}).then((function(e){r.ui.clearBusy(),r.ui.showDocument(t)})).catch((function(e){r.ui.clearBusy(),e.data&&e.data["terminus:witnesses"]?r.ui.showViolations(e.data["terminus:witnesses"],"instance"):r.ui.showError(e)}))},d.prototype.loadDataFrames=function(e,t){t||(this.document?t=this.document.cls:e&&e.length&&e[0]&&e[0].domain&&(t=e[0].domain)),t?this.document?this.document.loadDataFrames(e):this.document=new c.ObjectFrame(t,e):console.log("Missing Class Failed to add dataframes due to missing class")},d.prototype.loadSchemaFrames=function(e,t){t||e&&e.length&&e[0]&&e[0].domain&&(t=e[0].domain),t?(this.document||(this.document=new c.ObjectFrame(t)),e&&(this.document.loadClassFrames(e),this.document.subjid||(this.document.newDoc=!0,this.document.fillFromSchema("_:")))):console.log("Missing Class","Failed to add class frames due to missing class")},d.prototype.render=function(){if(!this.renderer&&this.document){this.page_config&&(this.options=this.getOptionsFromPageConfig(this.page_config));try{this.renderer=new o.ObjectRenderer(this.document,!1,this.options),this.renderer.mode=this.mode,this.renderer.controller=this}catch(e){console.error("TerminusDocumentViewer render",e.toString())}}if(this.renderer)return this.renderer.render()},d.prototype.getBuiltInViewerOptions=function(){return FrameConfig},d.prototype.getOptionsFromPageConfig=function(e){return"object"==n(this.config_options[e])?this.config_options[e]:this.options},d.prototype.getClient=function(){return this.ui.client},d.prototype.extract=function(e){return this.renderer.extract()},d.prototype.getLabel=function(){var e=!!this.cls&&this.cls;return e||(e=this.docid?this.docid:"Void"),e},d.prototype.setLabel=function(){if(this.document&&this.labdom){c.FrameHelper.removeChildren(this.labdom);for(var e=this.document.getDataFrames(c.FrameHelper.getStdURL("rdfs","label")),t=0;t<e.length;t++){var r=e[t].get();r&&this.labdom.appendChild(document.createTextNode(r))}}},d.prototype.refreshPage=function(){if(this.pagedom){c.FrameHelper.removeChildren(this.pagedom);var e=this.render();e&&this.pagedom.appendChild(e)}},d.prototype.getDocumentPageControls=function(){var e=document.createElement("select");for(var t in e.setAttribute("class","terminus-form-select terminus-document-config"),this.config_options)if("create"!==t){var r=document.createElement("option");r.value=t,this.page_config==t&&(r.selected=!0),r.appendChild(document.createTextNode(this.config_options[t].label)),e.appendChild(r)}var i=this;return e.addEventListener("change",(function(){i.page_config=this.value,i.renderer=!1,i.refreshPage()})),e},e.exports=d},function(e,t,r){var i=r(101),n=r(0);function s(e,t,r){if(this.client=e,this.options=t,this.ui=r,this.default_limit=1e3,this.prefixes={},e.connectionConfig.platformEndpoint()){var i=e.connectionConfig.server.substring(0,e.connectionConfig.server.lastIndexOf("platform"));this.sid=i;var s=e.connectionConfig.server.substring(0,e.connectionConfig.server.lastIndexOf("platform"))+e.connectionConfig.dbid;this.prefixes.s=s+"/ontology/main#",this.prefixes.g=i,this.prefixes.db=s+"/",this.prefixes.doc=s+"/candidate/",this.prefixes.dg=s+"/graph/main/"}else this.sid=e.connectionConfig.serverURL(),this.prefixes.s=e.connectionConfig.schemaURL()+"#",this.prefixes.dg=e.connectionConfig.dbURL()+"/schema",this.prefixes.doc=e.connectionConfig.docURL(),this.prefixes.db=e.connectionConfig.dbURL()+"/",this.prefixes.g=e.connectionConfig.serverURL();for(var o in n.FrameHelper.standard_urls)this.prefixes[o]=n.FrameHelper.standard_urls[o]}s.prototype.setPrefixes=function(e){this.prefixes=e},s.prototype.shorten=function(e){for(var t in this.prefixes)if(this.prefixes[t]==e.substring(0,this.prefixes[t].length))return t+":"+e.substring(this.prefixes[t].length);return e},s.prototype.execute=function(e){var t=this.wrap(e),r=this;return this.client.select(!1,t).then((function(e){return new i.WOQLResult(e,r,r.options,r.ui)}))},s.prototype.wrap=function(e){return{"@context":this.prefixes,from:[this.client.connectionConfig.dbURL(),e]}},s.prototype.getConcreteDocumentClassPattern=function(e){e=e||"v:Class";return{and:[this.getSubclassQueryPattern(e,"tcs:Document"),{not:[this.getAbstractQueryPattern(e)]}]}},s.prototype.getAbstractQueryPattern=function(e){return{quad:[e,"tcs:tag","tcs:abstract","db:schema"]}},s.prototype.getSubclassQueryPattern=function(e,t){return{sub:[e,t]}},s.prototype.queryWrappedWithLimit=function(e,t,r){return{limit:[t=t||this.default_limit,{start:[r=r||0,e]}]}},s.prototype.getAllDocumentQuery=function(e,t,r){var i={and:[{triple:["v:Document","rdf:type","v:Type"]},this.getSubclassQueryPattern("v:Type","tcs:Document")]};return e&&i.and.push(e),this.queryWrappedWithLimit(i,t,r)},s.prototype.getEverythingQuery=function(e,t,r){var i={triple:["v:Subject","v:Predicate","v:Object"]};return e&&(i={and:[i,e]}),this.queryWrappedWithLimit(i,t,r)},s.prototype.getPropertyListQuery=function(e,t,r){var i={and:[{quad:["v:Property","rdfs:range","v:Range","db:schema"]},{opt:[{quad:["v:Property","rdf:type","v:Type","db:schema"]}]},{opt:[{quad:["v:Property","rdfs:label","v:Label","db:schema"]}]},{opt:[{quad:["v:Property","rdfs:comment","v:Comment","db:schema"]}]},{opt:[{quad:["v:Property","rdfs:domain","v:Domain","db:schema"]}]}]};return e&&(i={and:[i,e]}),this.queryWrappedWithLimit(i,t,r)},s.prototype.getElementMetaDataQuery=function(e,t,r){var i={and:[{quad:["v:Element","rdf:type","v:Type","db:schema"]},{opt:[{quad:["v:Element","rdfs:label","v:Label","db:schema"]}]},{opt:[{quad:["v:Element","rdfs:comment","v:Comment","db:schema"]}]},{opt:[{quad:["v:Element","tcs:tag","v:Abstract","db:schema"]}]},{opt:[{quad:["v:Element","rdfs:domain","v:Domain","db:schema"]}]},{opt:[{quad:["v:Element","rdfs:range","v:Range","db:schema"]}]}]};return e&&(i={and:[i,e]}),this.queryWrappedWithLimit(i,t,r)},s.prototype.getClassListMetaDataQuery=function(e,t,r){var i={and:[{quad:["v:Element","rdf:type","owl:Class","db:schema"]},{opt:[{quad:["v:Element","rdfs:label","v:Label","db:schema"]}]},{opt:[{quad:["v:Element","rdfs:comment","v:Comment","db:schema"]}]},{opt:[{quad:["v:Element","tcs:tag","v:Abstract","db:schema"]}]}]};return e&&(i={and:[i,e]}),this.queryWrappedWithLimit(i,t,r)},s.prototype.getClassMetaDataQuery=s.prototype.getClassListMetaDataQuery,s.prototype.getDataOfChosenClassQuery=function(e,t,r){var i={and:[{triple:["v:Document","rdf:type",e]},{opt:[{triple:["v:Document","v:Property","v:Value"]}]}]};return this.queryWrappedWithLimit(i,t,r)},s.prototype.getDataOfChosenPropertyQuery=function(e,t,r){var i={and:[{triple:["v:Document",e,"v:Value"]},{opt:[{triple:["v:Document","rdfs:label","v:Label"]}]}]};return this.queryWrappedWithLimit(i,t,r)},s.prototype.getInstanceMeta=function(e,t,r){var i={and:[{triple:[e,"rdfs:label","v:InstanceLabel"]},{triple:[e,"rdf:type","v:InstanceType"]},{opt:[{triple:[e,"rdfs:comment","v:InstanceComment"]}]},{opt:[{quad:["v:InstanceType","rdfs:label","v:ClassLabel","db:schema"]}]}]};return this.queryWrappedWithLimit(i,t,r)},s.prototype.getDocumentQuery=function(e,t,r){var i={and:[{triple:[e,"v:Property","v:Property_Value"]},{opt:[{quad:["v:Property","rdfs:label","v:Property_Label","db:schema"]}]},{opt:[{quad:["v:Property","rdf:type","v:Property_Type","db:schema"]}]}]};return this.queryWrappedWithLimit(i,t,r)},s.prototype.getClassesQuery=function(e,t){return this.queryWrappedWithLimit({and:[{triple:["v:ID","rdf:type","v:Class"]},{opt:[{triple:["v:ID","rdfs:label","v:Label"]}]},{opt:[{triple:["v:ID","rdfs:comment","v:Comment"]}]},{opt:[{quad:["v:Class","rdfs:label","v:Type","db:schema"]}]},{sub:["v:Class","tcs:Document"]}]},e,t)},e.exports=s},function(e,t,r){var i=r(0),n=(r(1),r(2));function s(e){this.ui=e}function o(e,t){this.wrViewer=e,this.wQuery=e.wQuery,this.ui=e.ui,this.qPage=t,this.currDTSettings=e.settings}s.prototype.convertToDatatable=function(e){var t=this,r=jQuery(e).DataTable({searching:!1,pageLength:25,lengthMenu:[10,25,50,75,100],paging:!0,select:!0,initComplete:function(e){e.oInstance.api().$("td").each((function(){this.setAttribute("title",$(this).html())}))},columnDefs:[{targets:"_all",className:"truncate"}],createdRow:function(e){var t=$(e).find(".truncate");t.attr("title",t.html())}});return jQuery(e,"tbody").on("click","td",(function(){if(5!=r.cell(this).index().column)t.ui.showDBMainPage();else{var e=r.row(jQuery(this).parents("tr")).data(),i=n.extractValueFromCell(e[0]);t.ui.deleteDatabase(i)}})),e.setAttribute("class","stripe dataTable terminus-db-size"),e.setAttribute("cellpadding","1"),e.setAttribute("cellspacing","0"),e.setAttribute("border","0"),e},s.prototype.draw=function(e){return this.convertToDatatable(e)},o.prototype.executeQuery=function(e,t,r){var n=this;return e.execute(this.ui.client).then((function(r){new i.WOQLResult(r,e);return n.wrViewer.formatResultsForDatatableDisplay(r.bindings,t).data})).catch((function(e){console.error(e),n.ui.showError(e)}))},o.prototype.generateNewQueryOnPageChange=function(e){this.qPage&&n.deleteStylizedEditor(this.ui,e.qTextDom);var t=n.getCurrentWoqlQueryObject(null,e);return this.qPage&&("woql"==e.queryMode.value?e.qTextDom.value=JSON.stringify(t.prettyPrint(),void 0,2):e.qTextDom.value=JSON.stringify(t,void 0,2),n.stylizeEditor(this.ui,e.qTextDom,"query","javascript")),t},o.prototype.getCallbackSettings=function(e,t){var r={};return r.pageLength=t._iDisplayLength,r.start=t._iDisplayStart,r.draw=t.iDraw,r.qTextDom=e.qTextDom,r.queryMode=e.queryMode,this.qPage?r.query=e.query:r.query="Show_All_Document_classes",r.chosenValue=e.chosenValue,r},o.prototype.setUp=function(e,t,r){i.FrameHelper.removeChildren(this.dtdom),this.dtdom=document.createElement("div"),this.dtdom.appendChild(e),r.appendChild(this.dtdom),this.qTextDom=t.qTextDom,this.query=t.query,this.chosenValue=t.chosenValue,this.queryMode=t.queryMode},o.prototype.updateCurrDTSettings=function(e){this.currDTSettings.pageLength=e.pageLength,this.currDTSettings.start=e.start},o.prototype.getNewDataOnChange=function(e,t,r){var i=this.getCallbackSettings(this,t);this.updateCurrDTSettings(i);var n=this.generateNewQueryOnPageChange(i);return this.executeQuery(n,i,r)},o.prototype.getDataFromServer=function(e,t){var r=this,i=e.tab;this.setUp(i,this.wrViewer.settings,t);var n=jQuery(i).DataTable({searching:!1,pageLength:r.wrViewer.settings.pageLength,serverSide:!0,processing:!0,lengthMenu:[25,50,75,100],dom:"RBlftip",columns:e.result.columns,paging:!0,select:!0,autoWidth:!0,ajax:function(i,n,s){if(Object.entries(e.result.data).length>0){var o=e.result.data;e.result.data={},n(o)}else r.getNewDataOnChange(this,s,t).then((function(e){n(e)}))},buttons:[{extend:"copy",text:"Copy to clipboard"},{extend:"excel",text:"Export to Excel"}],columnDefs:[{targets:"_all",className:"truncate"}],createdRow:function(e){var t=$(e).find(".truncate");t.attr("title",t.html())},scrollX:!0});return jQuery(i,"tbody").on("click","td",(function(){n.cell(this).data&&"doc:"==this.innerText.substring(0,4)&&r.wrViewer.result.ui&&(r.wrViewer.result.ui.showDocument(this.innerText),r.wrViewer.result.ui.redraw(),r.wrViewer.selectDocumentNavBar(r.ui))})),i.setAttribute("class","stripe dataTable"),i.setAttribute("style","margin: 0!important"),i.setAttribute("cellpadding","1"),i.setAttribute("cellspacing","1"),i.setAttribute("border","0"),i},o.prototype.draw=function(e,t){return this.getDataFromServer(e,t)},e.exports={Datatables:o,CspDatatables:s}},function(e,t,r){r(0);function i(e){this.css=e&&e.css?"terminus-literal-value "+e.css:"terminus-literal-value",this.options=e}i.prototype.renderFrame=function(e,t){var r=e.get();if(this.options&&void 0!==this.options.big?this.options.big:this.isBigType(this.type,r)){var i=document.createElement("textarea");this.css+=" terminus-literal-big-value"}else{var n=this.options&&void 0!==this.options.size?this.options.size:this.getTypeSize(this.type,r);(i=document.createElement("input")).setAttribute("type","text"),i.setAttribute("size",n)}i.setAttribute("class",this.css),i.setAttribute("data-value",r),i.value=r;return i.addEventListener("input",(function(){e.set(this.value)})),i},i.prototype.isBigType=function(e,t){if(t&&t.length&&t.length>100)return!0;return-1!=["xdd:coordinatePolyline","xdd:coordinatePolygon","xsd:base64Binary","xdd:html","xdd:json","rdf:XMLLiteral"].indexOf(e)},i.prototype.getTypeSize=function(e,t){if(t&&t.length&&t.length>40)return 80;return-1!=["xdd:url","xdd:coordinate","xsd:anyURI"].indexOf(e)?80:-1!=["xsd:gYearMonth","xdd:gYearRange","xsd:decimal","xsd:float","xsd:time","xsd:date","xsd:dateTimeStamp","xsd:gYearMonth","xsd:gMonthDay","xsd:duration","xsd:yearMonthDuration","xsd:dayTimeDuration","xsd:nonNegativeInteger","xsd:positiveInteger","xsd:negativeInteger","xsd:nonPositiveInteger","xsd:integer","xsd:unsignedInt"].indexOf(e)?16:-1!=["xsd:boolean","xsd:gYear","xsd:gMonth","xsd:gDay","xsd:byte","xsd:short","xsd:unsignedByte","xsd:language"].indexOf(e)?8:32},e.exports={HTMLStringEditor:i}},function(e,t){function r(e){this.css="terminus-literal-value terminus-literal-value-boolean "+(e&&e.css?e.css:"")}r.prototype.renderFrame=function(e,t){return this.render(e.get())},r.prototype.renderValue=function(e){return this.render(e.value())},r.prototype.render=function(e){var t=document.createElement("span");if(t.setAttribute("class",this.css),e){var r=document.createTextNode(e);t.appendChild(r)}return t},e.exports={HTMLBooleanViewer:r}},function(e,t){function r(e){this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:"")}r.prototype.renderFrame=function(e,t){var r=e.get(),i=document.createElement("input");return i.setAttribute("type","checkbox"),r&&i.setAttribute("checked","checked"),i.addEventListener("change",(function(){r?e.set(""):e.set("true")})),i},e.exports={HTMLBooleanEditor:r}},function(e,t,r){var i=r(0);function n(e){}n.prototype.renderFrame=function(e,t){var r=e.get();return e.frame&&e.frame.elements&&(this.elements=e.frame.elements),this.render(r)},n.prototype.renderValue=function(e){return this.render(e.value())},n.prototype.render=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-literal-value terminus-choice-value"),t.setAttribute("data-value",e);var r=!1;if(e&&this.elements)for(var n=0;n<this.elements.length;n++){var s=this.elements[n];s.class!=e||s.label&&s.label["@value"]&&(r=s.label["@value"])}return e&&!r&&(r=i.FrameHelper.labelFromURL(e)),r&&t.appendChild(document.createTextNode(r)),t},e.exports={HTMLChoiceViewer:n}},function(e,t,r){var i=r(1);function n(e){}n.prototype.renderFrame=function(e,t){var r=e.get();document.createElement("select").setAttribute("class","terminus-choice-picker");var n=e.getChoiceOptions();n.unshift({value:"",label:"Not Specified"});return i.getSelectionControl("select-choice",n,r,(function(t){e.set(t)}))},e.exports={HTMLChoiceEditor:n}},function(e,t,r){r(0);function i(e){this.inputs=[]}i.prototype.parseValue=function(e){try{var t=!!e&&JSON.parse(e);return t&&"xdd:coordinate"==this.type&&(t=[t]),t}catch(t){return this.error=this.type+" value "+e+" failed to parse as json",t.toString(),[]}},i.prototype.renderFrame=function(e,t){return this.render(e.get())},i.prototype.renderValue=function(e){return this.render(e.value())},i.prototype.render=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-literal-value terminus-literal-coordinate"),e){t.setAttribute("data-value",e);var r=this.parseValue(e);if(r)for(var i=0;i<r.length;i++){var n=document.createElement("span");n.setAttribute("class","latlong"),n.appendChild(document.createTextNode("Latitude: ")),n.appendChild(document.createTextNode(r[i][0]+" ° ")),n.appendChild(document.createTextNode("Longitude: ")),n.appendChild(document.createTextNode(r[i][1]+" °")),t.appendChild(n)}else t.setAttribute("title",this.error)}return t},e.exports={HTMLCoordinateViewer:i}},function(e,t){function r(e){this.inputs=[]}r.prototype.getInputDOMs=function(e,t,r){var i=document.createElement("input");i.setAttribute("type","text"),i.value=e;var n=document.createElement("input");return n.setAttribute("type","text"),n.value=t,i.addEventListener("change",r),n.addEventListener("change",r),[i,n]},r.prototype.getLatLongDOM=function(e,t,r,i,n){var s=document.createElement("span");s.setAttribute("class","terminus-lat-long");var o=document.createElement("span");if(o.setAttribute("class","terminus-lat-long-col"),s.appendChild(o),i>2||"xdd:coordinatePolyline"==r&&i>1){var a=document.createElement("button");a.setAttribute("class","delete-coordinate"),a.appendChild(document.createTextNode("Remove")),a.addEventListener("click",(function(){t.value="",e.value="",n.removeChild(s)})),o.appendChild(a)}return s.appendChild(document.createTextNode("Latitude: ")),s.appendChild(e),s.appendChild(document.createTextNode(" ° ")),s.appendChild(document.createTextNode("  Longitude: ")),s.appendChild(t),s.appendChild(document.createTextNode(" ° ")),s},r.prototype.renderFrame=function(e,t){var r=e.get(),i=document.createElement("span");i.setAttribute("class","terminus-literal-value terminus-literal-coordinate"),i.setAttribute("data-value",r);try{var n=!!r&&JSON.parse(r)}catch(e){this.error=this.type+" failed to parse as json",e.toString();n=!1}var s=this,o=function(){for(var t=[],r=0;r<s.inputs.length;r++)if(s.inputs[r][0].value&&s.inputs[r][1].value){var i="["+s.inputs[r][0].value+","+s.inputs[r][1].value+"]";t.push(i)}if(0==t.length)e.set("");else if("xdd:coordinate"==this.type)e.set(t[0]);else{var n="[";for(r=0;r<t.length;r++)n+=t[r],r+1<t.length&&(n+=",");n+="]",e.set(n)}};n||("xdd:coordinate"==this.type?n=["",""]:(n=[["",""],["",""]],"xdd:coordinatePolygon"==this.type&&n.push(["",""]))),"xdd:coordinate"==this.type&&(n=[n]);for(var a=0;a<n.length;a++)this.inputs.push(this.getInputDOMs(n[a][0],n[a][1],o));var u=document.createElement("span");for(a=0;a<this.inputs.length;a++){var c=this.getLatLongDOM(this.inputs[a][0],this.inputs[a][1],this.type,a,u);u.appendChild(c)}i.appendChild(u);s=this;if("xdd:coordinate"!=this.type){var l=document.createElement("span");l.setAttribute("class","terminus-add-coordinate");var d=document.createElement("button");d.setAttribute("class","terminus-add-coordinate"),d.appendChild(document.createTextNode("Add")),d.addEventListener("click",(function(){var e=s.getInputDOMs("","",o),t=s.getLatLongDOM(e[0],e[1],this.type,s.inputs.length,u);u.appendChild(t),s.inputs.push(e)})),l.appendChild(d),i.appendChild(l)}return i},e.exports={HTMLCoordinateEditor:r}},function(e,t,r){var i=r(40),n=r(0);function s(e){this.max=!(!e||!e.max)&&e.max,this.min=!(!e||!e.min)&&e.min,this.allowbce=!(!e||!e.allowbce)&&e.allowbce,this.date_spacer="/",this.time_spacer=":",this.datetime_separator=", ",this.helper=new i.HTMLDateHelper}s.prototype.renderFrame=function(e,t){return this.render(e.get())},s.prototype.renderValue=function(e){return this.render(e.value())},s.prototype.render=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-literal-value terminus-literal-date"),t.setAttribute("data-value",e),e){var r=n.FrameHelper.parseDate(this.type,e),i=this.getDateComponentDOM(r),s=this.getTimeComponentDOM(r);s&&t.appendChild(s),s&&i&&t.appendChild(document.createTextNode(this.datetime_separator)),i&&t.appendChild(i)}return t},s.prototype.getTimeComponentDOM=function(e,t){var r=!!e.hour&&document.createElement("span");r&&(r.setAttribute("class","terminus-time-hour"),r.appendChild(document.createTextNode(e.hour)));var i=void 0!==e.minute&&document.createElement("span");if(i){i.setAttribute("class","terminus-time-minute");var n=(e.minute,e.minute);i.appendChild(document.createTextNode(n))}var s=void 0!==e.second&&document.createElement("span");if(s){s.setAttribute("class","terminus-time-second");var o=(e.second,e.second);s.appendChild(document.createTextNode(o))}var a=!!e.timezone&&document.createElement("span");if(a&&(s.setAttribute("class","terminus-time-timezone"),s.appendChild(document.createTextNode(e.timezone))),r||i||s||a){var u=document.createElement("span");return u.setAttribute("class","terminus-time-components time-"+t),r&&u.appendChild(r),i&&(r&&u.appendChild(document.createTextNode(this.time_spacer)),u.appendChild(i)),s&&((i||r)&&u.appendChild(document.createTextNode(this.time_spacer)),u.appendChild(s)),a&&(u.appendChild(document.createTextNode(" (Timezone: ")),u.appendChild(s),u.appendChild(document.createTextNode(")"))),u}return!1},s.prototype.getDateComponentDOM=function(e,t){var r=!!e.year&&document.createElement("span");r&&(r.setAttribute("class","terminus-date-year"),r.appendChild(document.createTextNode(e.year)));var i=!!e.month&&document.createElement("span");i&&(i.setAttribute("class","terminus-date-month"),i.appendChild(document.createTextNode(this.helper.getMonthName(e.month))));var n=!!e.day&&document.createElement("span");if(n&&(n.setAttribute("class","terminus-date-day"),n.appendChild(document.createTextNode(e.day))),r||i||n){var s=document.createElement("span");return n&&s.appendChild(n),i&&(n&&s.appendChild(document.createTextNode(this.date_spacer)),s.appendChild(i)),r&&((i||n)&&s.appendChild(document.createTextNode(this.date_spacer)),s.appendChild(r)),s}return!1},e.exports={HTMLDateViewer:s}},function(e,t){function r(){this.months=["January","Februrary","March","April","May","June","July","August","September","October","November","December"]}r.prototype.getMonthName=function(e){return this.months[e-1]},e.exports={HTMLDateHelper:r}},function(e,t,r){var i=r(40),n=r(0);function s(e){this.max=!(!e||!e.max)&&e.max,this.min=!(!e||!e.min)&&e.min,this.allowbce=!(!e||!e.allowbce)&&e.allowbce,this.date_spacer="/",this.time_spacer=":",this.datetime_separator=", ",this.helper=new i.HTMLDateHelper}s.prototype.renderFrame=function(e,t){var r=e.get(),i=document.createElement("span");i.setAttribute("class","terminus-literal-value terminus-literal-date"),i.setAttribute("data-value",r),this.parsed=r?n.FrameHelper.parseDate(this.type,r):{};var s=this.getDateComponentDOM(this.parsed,this.type,e),o=this.getTimeComponentDOM(this.parsed,this.type,e);return o&&i.appendChild(o),o&&s&&i.appendChild(document.createTextNode(this.datetime_separator)),s&&i.appendChild(s),i},s.prototype.set=function(e,t,r,i){this.parsed[e]=t;var s=n.FrameHelper.xsdFromParsed(this.parsed,i);s&&r.set(s)},s.prototype.getTimeComponentDOM=function(e,t,r){if(-1==["xsd:dateTime","xsd:dateTimeStamp","xsd:time"].indexOf(t))return!1;var i=this,n=document.createElement("input");n.setAttribute("class","terminus-hour-input terminus-hour-"+t),n.setAttribute("size",2),n.setAttribute("placeholder","HH"),n.value=e.hour?e.hour:"",n.addEventListener("input",(function(){i.set("hour",this.value,r,t)}));var s=document.createElement("input");s.setAttribute("class","terminus-minute-input terminus-minute-"+t),s.setAttribute("size",2),s.setAttribute("placeholder","MM"),s.value=e.minute?e.minute:"",s.addEventListener("input",(function(){i.set("minute",this.value,r,t)}));var o=document.createElement("input");o.setAttribute("class","terminus-second-input terminus-second-"+t),o.setAttribute("size",8),o.setAttribute("placeholder","SS.sss..."),o.value=e.second?e.second:"",o.addEventListener("input",(function(){i.set("second",this.value,r,t)}));var a=document.createElement("span");return a.appendChild(n),a.appendChild(document.createTextNode(this.time_spacer)),a.appendChild(s),a.appendChild(document.createTextNode(this.time_spacer)),a.appendChild(o),a},s.prototype.getDateComponentDOM=function(e,t,r){var i=this;if(-1!=["xsd:date","xsd:dateTime","xsd:gYear","xsd:gYearMonth","xsd:dateTimeStamp"].indexOf(t)){var n=document.createElement("input");n.setAttribute("class","terminus-year-input terminus-year-"+t),n.setAttribute("size",6),n.setAttribute("placeholder","YYYY"),n.value=e.year?e.year:"",n.addEventListener("input",(function(){i.set("year",this.value,r,t)}))}if(-1!=["xsd:date","xsd:dateTime","xsd:gYearMonth","xsd:dateTimeStamp","xsd:gMonth","xsd:gMonthDay"].indexOf(t)){var s=document.createElement("select");s.setAttribute("class","terminus-month-input terminus-month-"+t);for(var o=0;o<this.helper.months.length;o++){var a=document.createElement("option");a.value=o+1,a.appendChild(document.createTextNode(this.helper.months[o])),e.month&&e.month==o+1&&(a.selected=!0),s.appendChild(a)}s.addEventListener("change",(function(){i.set("month",this.value,r,t)}))}if(-1!=["xsd:date","xsd:dateTime","xsd:dateTimeStamp","xsd:gDay","xsd:gMonthDay"].indexOf(t)){var u=document.createElement("input");u.setAttribute("class","terminus-day-input terminus-day-"+t),u.setAttribute("size",2),u.setAttribute("placeholder","DD"),u.value=e.day?e.day:"",u.addEventListener("input",(function(){i.set("day",this.value,r,t)}))}if(n||s||u){var c=document.createElement("span");return u&&c.appendChild(u),s&&(u&&c.appendChild(document.createTextNode(this.date_spacer)),c.appendChild(s)),n&&((s||u)&&c.appendChild(document.createTextNode(this.date_spacer)),c.appendChild(n)),c}return!1},e.exports={HTMLDateEditor:s}},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(1),s=r(0);function o(e){this.onclick=!1}o.prototype.renderFrame=function(e,t){return this.render(e.get())},o.prototype.renderValue=function(e){return this.render(e.value())},o.prototype.render=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-literal-value terminus-entity-reference-value");if(this.holder)return this.holder;if(e){var r=this.showValue(e);t.appendChild(r)}return t},o.prototype.showValue=function(e){return document.createTextNode(e)},o.prototype.getEntityViewHTML=function(e,t,r){var i=document.createElement("span"),n=this;return i.setAttribute("class","terminus-internal-link"),i.appendChild(r.internalLink(e)),(controller=renderer.getController())&&controller.getInstanceMeta(e).then((function(t){var o=n.getEntityLabel(e,t,r);o&&(s.FrameHelper.removeChildren(i),i.appendChild(o))})),i},o.prototype.getEntityLabel=function(e,t,r){var s=document.createElement("span");if(t&&(il=n.getVariableValueFromBinding("InstanceLabel",t))){s.appendChild(r.internalLink(e,il));var o=e+" Type: "+n.getVariableValueFromBinding("InstanceType",t),a=n.getVariableValueFromBinding("InstanceComment",t);return"object"==i(a)&&a["@value"]&&(o+=" "+a["@value"]),s.setAttribute("title",o),s}return!1},e.exports={HTMLEntityViewer:o}},function(e,t){function r(e){}r.prototype.renderFrame=function(e,t){var r=e.get(),i=document.createElement("input");i.setAttribute("class","terminus-literal-value terminus-entity-reference-value"),i.setAttribute("type","text"),i.setAttribute("size",80),i.value=r;return i.addEventListener("change",(function(){var t=this.value;-1==t.indexOf("/")&&-1==t.indexOf(":")&&(t="doc:"+t),e.set(t)})),i},e.exports={HTMLEntityEditor:r}},function(e,t,r){r(0);function i(e){}i.prototype.renderFrame=function(e,t){return this.render(e.get())},i.prototype.renderValue=function(e){return this.render(e.value())},i.prototype.render=function(e){var t=document.createElement("span");if(t.setAttribute("class","terminus-literal-value terminus-literal-image-value"),t.setAttribute("data-value",e),e){var r=document.createElement("a");r.setAttribute("src",e),t.appendChild(r)}return t},e.exports={HTMLImageViewer:i}},function(e,t,r){r(0);function i(e){}i.prototype.renderFrame=function(e,t){if("xsd:base64Binary"==this.type){var r=document.createElement("textarea");return r.setAttribute("class","terminus-literal-value terminus-literal-b64image-value"),r.value=value,r.addEventListener("change",(function(){e.set(this.value)})),r}return!1},e.exports={HTMLImageEditor:i}},function(e,t){function r(e){this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:"")}r.prototype.renderFrame=function(e,t){return this.render(e.get())},r.prototype.renderValue=function(e){return this.render(e.value())},r.prototype.render=function(e){var t=document.createElement("span");if(t.setAttribute("class",this.css),t.setAttribute("size",80),t.setAttribute("data-value",e),e){var r=document.createElement("a");r.setAttribute("href",e),r.appendChild(document.createTextNode(e)),t.appendChild(r)}return t},e.exports={HTMLLinkViewer:r}},function(e,t,r){var i=r(0);function n(e){this.commas=!e||!e.commas||e.commas}n.prototype.renderFrame=function(e,t){return this.render(e.get())},n.prototype.renderValue=function(e){return this.render(e.value())},n.prototype.render=function(e){0===e&&(e="0");var t=document.createElement("span");return t.setAttribute("class","terminus-number-value terminus-literal-value"),t.setAttribute("data-value",e),e=this.commas?i.FrameHelper.numberWithCommas(e):e,t.appendChild(document.createTextNode(e)),t},e.exports={HTMLNumberViewer:n}},function(e,t,r){var i=r(0);function n(e){this.commas=!e||!e.commas||e.commas,this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:""),this.delimiter=!(!e||!e.delimiter)&&e.delimiter}n.prototype.renderFrame=function(e,t){return this.render(e.get())},n.prototype.renderValue=function(e){return this.render(e.value())},n.prototype.render=function(e){var t=i.FrameHelper.parseRangeValue(e,this.delimiter),r=document.createElement("span");r.setAttribute("class",this.css);var n=document.createElement("span");n.setAttribute("class","terminus-range-value-left");var s=document.createElement("span");s.setAttribute("class","terminus-range-value-right");var o=this.useCommas()?i.FrameHelper.numberWithCommas(t[0]):t[0],a=document.createTextNode(o);if(n.appendChild(a),r.appendChild(n),2==t.length){r.appendChild(function(){var e=document.createElement("span");return e.setAttribute("class","terminus-range-indicator"),e.setAttribute("title","The value is uncertain, it lies somewhere in this range"),e.appendChild(document.createTextNode(" ... ")),e}());var u=this.useCommas(renderer)?i.FrameHelper.numberWithCommas(t[1]):t[1],c=document.createTextNode(u);s.appendChild(c),r.appendChild(s)}return r},n.prototype.useCommas=function(){return-1==["xdd:gYearRange","xdd:dateRange"].indexOf(this.type)&&this.commas},e.exports={HTMLRangeViewer:n}},function(e,t,r){var i=r(0);function n(e){this.commas=!e||!e.commas||e.commas,this.css="terminus-literal-value terminus-literal-value-range "+(e&&e.css?e.css:""),this.delimiter=!(!e||!e.delimiter)&&e.delimiter}function s(){var e=document.createElement("span");return e.setAttribute("class","terminus-range-indicator"),e.setAttribute("title","The value is uncertain, it lies somewhere in this range"),e.appendChild(document.createTextNode(" ... ")),e}n.prototype.renderFrame=function(e,t){var r=e.get(),n=i.FrameHelper.parseRangeValue(r,this.delimiter),o=document.createElement("span");o.setAttribute("class",this.css);var a=document.createElement("span"),u=document.createElement("span"),c=n.length>0?n[0]:"",l=n.length>1?n[1]:"",d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("size",16),c&&(d.value=c);var p=document.createElement("input");p.setAttribute("type","text"),p.setAttribute("size",16),l&&(this.showing_range=!0,p.value=l),a.appendChild(d),o.appendChild(a),this.showing_range&&(u.appendChild(s()),u.appendChild(p)),o.appendChild(u);var h=document.createElement("button");h.setAttribute("class","terminus-change-range");var m=this.showing_range?"Change to Simple Value":"Change to Uncertain Range";h.appendChild(document.createTextNode(m)),o.appendChild(h);var f=this;h.addEventListener("click",(function(){f.showing_range?(f.showing_range=!1,p.value="",i.FrameHelper.removeChildren(u)):(f.showing_range=!0,p.value="",u.appendChild(s()),u.appendChild(p));var e=f.showing_range?"Change to Simple Value":"Change to Uncertain Range";h.innerText=e,g()}));var g=function(){f.showing_range&&p.value?d.value?e.set("["+d.value+","+p.value+"]"):e.set(p.value):e.set(d.value)};return d.addEventListener("change",g),p.addEventListener("change",g),o},e.exports={HTMLRangeEditor:n}},function(e,t){function r(e){this.css=e&&e.css?"literal-value "+e.css:"literal-value"}r.prototype.render=function(e){var t=document.createElement("span");return t.setAttribute("class",this.css),t.setAttribute("data-value",e),t.innerHTML=e,t},r.prototype.renderFrame=function(e,t){var r=e.get();return this.render(r)},r.prototype.renderValue=function(e){return this.render(e.value())},e.exports={SantizedHTMLViewer:r}},function(e,t,r){var i=r(52);r(0);function n(e){}n.prototype.renderFrame=function(e,t){var r=document.createElement("div");r.setAttribute("class","gmap-window gmap-editor");var n=new i,s=n.initMap(r,value,this.type);return"xdd:coordinate"==ty?google.maps.event.addListener(s,"click",(function(e){var t=e.latLng,r="["+t.lat()+","+t.lng()+"]";renderer.set(r),n.clearMarkers();var i={position:t,map:s},o=new google.maps.Marker(i);n.markers.push(o)})):google.maps.event.addListener(s,"click",(function(t){var r=n.polyline.getPath();r.push(t.latLng);var i=t.latLng;n.addMarker(i,s,e,"#"+r.getLength(),this.type)})),r},e.exports={GoogleMapEditor:n}},function(e,t){function r(e){this.polygon=!1,this.polyline=!1,this.markers=[],this.init(e)}r.prototype.init=function(e){this.type=e&&e.type?e.type:"Shape",this.width=e&&e.width?e.width:"400px",this.height=e&&e.height?e.height:"400px",this.mapLat=e&&e.mapLat?e.mapLat:"41.9010004",this.mapLong=e&&e.mapLong?e.mapLong:"12.500061500000015",this.zoom=e&&e.zoom?e.zoom:3,this.stroke=e&&e.stroke?e.stroke:{color:"#FF0000",opacity:.3,weight:3},this.fill=e&&e.fill?e.fill:{color:"#FF0000",opacity:.1},this.line=e&&e.line?e.line:{color:"#000000",opacity:.9,weight:3}},r.prototype.destroy=function(){this.clear()},r.prototype.translatePolygonToArray=function(e){for(var t="[",r=e.getPath(),i=!1,n=0;n<r.getLength();n++){i&&(t+=",");var s=r.getAt(n);t=t+"["+s.lat()+","+s.lng()+"]",i=!0}return t+="]"},r.prototype.translateArrayToPolygon=function(e){for(var t=JSON.parse(e),r=[],i=0;i<t.length;i++){var n={};n.lat=t[i][0],n.lng=t[i][1],r.push(n)}return r},r.prototype.createPolygon=function(e,t){var r=new google.maps.Polygon({paths:e,strokeColor:this.stroke.color,strokeOpacity:this.stroke.opacity,strokeWeight:this.stroke.weight,fillColor:this.fill.color,fillOpacity:this.fill.opacity});return r.setMap(t),r},r.prototype.createPolyline=function(e){var t={strokeColor:this.line.color,strokeOpacity:this.line.opacity,strokeWeight:this.line.weight};return e&&(t.paths=e),new google.maps.Polyline(t)},r.prototype.clearMarkers=function(){for(var e=0;e<this.markers.length;e++)this.markers[e].setMap(null);this.markers.length=0},r.prototype.addMarker=function(e,t,r,i,n){var s={position:e,map:t};i&&(s.title=i);var o=new google.maps.Marker(s),a=this;if(0==this.markers.length&&"xdd:coordinatePolygon"==n&&o.addListener("click",(function(){var e=a.getCoordsFromMarkers();a.polygon=a.createPolygon(e,t),a.clearMarkers(),a.polyline.setMap(null),r.set(a.translatePolygonToArray(a.polygon))})),this.markers.push(o),"xdd:coordinatePolyline"==n){var u=this.translatePolygonToArray(this.polyline);r.set(u)}return o},r.prototype.getCoordsFromMarkers=function(){return this.polyline.getPath()},r.prototype.clear=function(){this.polygon&&(this.polygon.setMap(null),this.polygon=!1),this.polyline&&(this.clearMarkers(),this.polyline.setMap(null))},r.prototype.initMap=function(e,t,r){if(e.style.width=this.width,e.style.height=this.height,"undefined"==typeof google)return alert("google is not effing loaded"),!1;var i=new google.maps.Map(e,{zoom:this.zoom,center:{lat:parseFloat(this.mapLat),lng:parseFloat(this.mapLong)}});if("xdd:coordinatePolygon"==r){this.polyline=this.createPolyline(),this.polyline.setMap(i);var n=t?this.translateArrayToPolygon(t):[];t&&(this.polygon=this.createPolygon(n,i))}else if("xdd:coordinatePolyline"==r){n=t?this.translateArrayToPolygon(t):[];this.polyline=this.createPolyline(),this.polyline.setMap(i),t&&this.polyline.setPath(n)}else if("xdd:coordinate"==r&&t){this.clearMarkers();var s={position:{lat:parseFloat(t.substring(1,t.indexOf(","))),lng:parseFloat(t.substring(t.indexOf(",")+1,t.length-1))},map:i},o=new google.maps.Marker(s);this.markers.push(o)}return google.maps.event.trigger(i,"resize"),i},e.exports=r},function(e,t,r){var i=r(52);r(0);function n(e){}n.prototype.renderFrame=function(e,t){return this.render(e.get())},n.prototype.renderValue=function(e){return this.render(e.value())},n.prototype.render=function(e){var t=document.createElement("div");t.setAttribute("class","gmap-window gmap-viewer");return(new i).initMap(t,e,this.type),t},e.exports={GoogleMapViewer:n}},function(e,t,r){r(0);function i(e){}i.prototype.renderFrame=function(e,t){var r=e.get(),i=document.createElement("div");i.setAttribute("class","html-wysiwyg");var n=document.createElement("span");if(n.setAttribute("class","html-literal literal-value"),n.innerHTML=r,i.appendChild(n),"undefined"!=typeof Quill){var s=new Quill(n,{theme:"snow"});s.on("text-change",(function(){e.set(s.root.innerHTML)}))}return i},e.exports={HTMLMarkupEditor:i}},function(e,t){function r(e){}r.prototype.renderFrame=function(e,t){var r=e.get(),i=e.range(),n=(e.set,t.getClient()),s=new TerminusDocumentChooser(n,i,r);return s.change=function(t){e.set(t)},s.view="label",s.getAsDOM()},e.exports={S2EntityEditor:r}},function(e,t,r){var n=r(2),s=r(0),o=(r(57),r(63)),a=(r(9),r(68));function u(e){this.ui=e}function c(e){this.ui=e,this.container=document.createElement("span"),this.container.setAttribute("class","terminus-main-page"),this.pages=["home"]}function l(e){this.ui=e}u.prototype.getAsDOM=function(){var e=this,t=document.createElement("div");if(t.setAttribute("class","terminus-db-controller"),this.ui&&this.ui.db()){var r=document.createElement("div");r.setAttribute("class","terminus-field terminus-db-connection");var i=document.createElement("span");i.setAttribute("class","terminus-label terminus-db-label terminus-control-panel-label"),i.appendChild(document.createTextNode("DB "));var s=document.createElement("span");s.setAttribute("class","terminus-value terminus-db-value terminus-control-panel-value");var o=this.ui.client.connection.getDBRecord(),a=o&&o["rdfs:label"]&&o["rdfs:label"]["@value"]?o["rdfs:label"]["@value"]:this.ui.db();s.appendChild(document.createTextNode(a)),r.appendChild(i),r.appendChild(s);var u=document.createElement("div");u.setAttribute("class","span3"),t.appendChild(u);var c=document.createElement("ul");c.setAttribute("class","terminus-ul"),u.appendChild(c);var l=document.createElement("a");l.setAttribute("class","terminus-dashboard-info terminus-list-group-a terminus-nav-width");var d="Database: "+a;l.appendChild(document.createTextNode(d)),c.appendChild(l);var p=this.ui.page?this.ui.page:"docs";if(this.ui.showControl("db")){var h=this.getControlHTML("Database Home","fa-home");"docs"==p&&h.classList.add("terminus-selected"),h.addEventListener("click",(function(){e.ui.showDBMainPage(),e.ui.page="docs",e.ui.redrawControls()})),c.appendChild(h)}if(this.ui.showControl("delete_database"))(h=this.getControlHTML("Delete Database","fa-trash-alt")).addEventListener("click",(function(){n.activateSelectedNav(this,e),e.ui.deleteDatabase()})),c.appendChild(h);if(this.ui.showControl("woql_select")){h=this.getControlHTML("Query","fa-search");"query"==p&&h.classList.add("terminus-selected"),h.addEventListener("click",(function(){n.activateSelectedNav(this,e),e.ui.page="query",e.ui.showQueryPage(),e.ui.redrawControls()})),c.appendChild(h)}if(this.ui.showControl("get_schema")){h=this.getControlHTML("Schema","fa-cog");"schema"==p&&h.classList.add("terminus-selected"),h.addEventListener("click",(function(){n.activateSelectedNav(this,e),e.ui.page="schema",e.ui.showSchemaPage(),e.ui.redrawControls()})),c.appendChild(h)}}return t},u.prototype.getControlHTML=function(e,t,r){var i=document.createElement("a");i.setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var n=document.createElement("i");n.setAttribute("class","terminus-menu-icon fa "+t),i.appendChild(n);var s=document.createTextNode(e);return i.appendChild(s),i},c.prototype.getAsDOM=function(){var e=this;s.FrameHelper.removeChildren(this.container);this.getDeleteOnHomePage(this.container);var t=s.WOQL,r=this.ui.client.connectionConfig.dbURL(),i=t.from(r).limit(20).documentMetadata();return i.execute(this.ui.client).then((function(n){var o=new s.WOQLResult(n,i),a=t.from(r).concreteDocumentClasses();a.execute(e.ui.client).then((function(t){var r=new s.WOQLResult(t,a),i=e.getBodyAsDOM(o,r);i&&e.container.appendChild(i)}))})).catch((function(t){e.ui.showError(t)})),this.container},c.prototype.getBodyAsDOM=function(e,t){var r=this,i=s.WOQL,a=this;if(this.body){s.FrameHelper.removeChildren(this.body);var u=this.body}else{(u=document.createElement("div")).setAttribute("class","terminus-home-body terminus-document-view")}var c=document.createElement("div");c.setAttribute("class","terminus-home-actions"),u.appendChild(c);var l=document.createElement("span");if(l.setAttribute("class","terminus-display-flex"),c.appendChild(l),t.count()>0){var d=this.getCreateDataChooser(t,{showQuery:!1,editQuery:!1},{showConfig:!1,editConfig:"true"},(function(e){e&&a.loadCreateDocumentPage(e)}));e.count()>1&&l.appendChild(d)}else this.ui.showError("No document classes found in schema - you must define a document, entity or relationship class before you can create documents");if(e.count()>0){var p=this.getShowDocumentControl();l.prepend(p);var h=new o(this.ui.client,e.query,e).options({showQuery:"icon",editQuery:!0}),m=i.table(),f={showConfig:"icon",editConfig:"true",viewers:[i.graph()]};h.addView(m,f),u.appendChild(n.getHeaderDom("Displaying Up to 20 Documents")),u.appendChild(h.getAsDOM());i=s.WOQL;var g=this.ui.client.connectionConfig.dbURL(),y=i.from(g).limit(1e3).documentMetadata();y.execute(this.ui.client).then((function(e){var t=new s.WOQLResult(e,y),a=new o(r.ui.client,t.query,t).options({showQuery:"icon",editQuery:!0}),c=i.table(),l=i.graph(),d={showConfig:"icon",editConfig:"true",viewers:[c]};u.appendChild(n.getHeaderDom("All available Documents")),a.addView(l,d),u.appendChild(a.getAsDOM()),r.container.appendChild(u)})).catch((function(e){r.ui.showError(e)}))}else 3==t.count()?(u.appendChild(this.showHappyBox("empty","schema")),u.appendChild(this.showHappyBox("empty","query")),u.appendChild(this.showHappyBox("empty","docs",d))):(u.appendChild(this.showHappyBox("happy","schema")),u.appendChild(this.showHappyBox("happy","docs",d)),u.appendChild(this.showHappyBox("happy","query")));return this.body=u,u},c.prototype.getDeleteOnHomePage=function(e){if("terminus"!=this.ui.db()){s.FrameHelper.removeChildren(this.container);var t=document.createElement("button");t.setAttribute("class","terminus-btn terminus-btn-float-right terminus-home-del"),t.setAttribute("type","button"),t.appendChild(document.createTextNode("Delete Database"));var r=document.createElement("i");r.setAttribute("class","fa fa-trash terminus-icon-padding"),t.appendChild(r);var i=this.ui.getDBRecord();if(i)var n=i["rdfs:label"]&&i["rdfs:label"]["@value"]?i["rdfs:label"]["@value"]:this.ui.db();else n=this.ui.db();var o=this,a=this.ui.db();t.addEventListener("click",(function(){1==confirm("Do you really want to delete database ".concat(n," with id: ").concat(a," ?"))&&o.ui.deleteDatabase(a)})),e.appendChild(t)}},c.prototype.styleCreateDocumentChooser=function(){var e=document.getElementsByClassName("woql-chooser");for(i=0;i<e.length;i++)if("select"==e[i].type){e[i].classList.add("terminus-form-doc-value");var t=this;e[i].addEventListener("change",(function(){t.showCreateDocument(this.value)}))}},c.prototype.getCreateDataChooser=function(e,t,r,i,n){var a=s.WOQL;n=n||"Create a New Document",t=t||{showConfig:"icon",editConfig:"true"};var u=new o(this.ui.client,e.query,e).options(t),c=a.chooser().values("Class").labels("Label").titles("Comment").show_empty(n),l=this;return c.change=i||function(e){e&&l.loadCreateDocumentPage(e)},r=r||{showConfig:"icon",editConfig:"true"},u.addView(c,r),u.getAsDOM()},c.prototype.showHappyBox=function(e,t,r){var i=document.createElement("div");i.setAttribute("class","terminus-welcome-box");var n=this,s={};"schema"==t?(s.title="happy"==e?"Document Classes Created":"No Schema Created",s.text="happy"==e?"You have successfully created a schema with valid document classes!":"You should create a schema and add at least one document classes before you add data to the system",s.css="fa fa-cog fa-2x"):"docs"==t?(s.css="fa fa-book fa-2x",s.title="Create Documents",s.text="happy"==e?"Add data to the system through easy to use automatically generated forms for each document type":"You should create a schema and add at least one document classes before you add data to the system"):"query"==t&&(s.css="fa fa-search fa-2x",s.title="Update Queries",s.text="happy"==e?"You can add data to the system with queries and scripts, and import data directly from CSVs and URLs":"You can write WOQL queries to create a schema through our query interface");var o=document.createElement("span"),a=document.createElement("i");a.setAttribute("class",s.css),o.appendChild(a),i.appendChild(o);var u=document.createElement("span");u.appendChild(document.createElement("strong").appendChild(document.createTextNode(s.title))),i.appendChild(u);var c=document.createElement("p");return c.appendChild(document.createTextNode(s.text)),i.appendChild(c),"schema"==t&&i.addEventListener("click",(function(){n.ui.page="schema",n.ui.showSchemaPage(),n.ui.redrawControls()})),"query"==t&&i.addEventListener("click",(function(){n.ui.page="query",n.ui.showQueryPage(),n.ui.redrawControls()})),"query"!=t&&"schema"!=t||i.addEventListener("mouseover",(function(){this.style.cursor="pointer"})),"docs"==t&&i.appendChild(r),i},c.prototype.loadCreateDocumentPage=function(e){var t=this;this.ui.page="docs",this.ui.redrawControls();var r=s.WOQL,i=this.ui.client.connectionConfig.dbURL(),n=new a(this.ui.client).options({showQuery:"icon",editQuery:!1,loadDocument:this.getShowDocumentControl()}),o=r.from(i).concreteDocumentClasses();o.execute(this.ui.client).then((function(e){var r=new s.WOQLResult(e,o),i=t.getCreateDataChooser(r,{showQuery:"icon",editQuery:!1},{showConfig:"icon",editConfig:"true"});n.setClassLoader(i)}));var u=r.document().load_schema(!0);u.show_all("SimpleFrameViewer"),u.object().features("id","type","comment","delete","reset","hide","show","clone","update","view","add","value").mode("edit"),u.property().features("value","label").mode("edit"),u.data().features("value").mode("edit"),n.loadClass(e,u).then((function(){t.pages.push("New "+e),s.FrameHelper.removeChildren(t.container);var r=t.getNavigationDOM();t.container.appendChild(r),t.container.appendChild(n.getAsDOM())}))},c.prototype.getNavigationDOM=function(){var e=this,t=document.createElement("span");t.setAttribute("class","terminus-back-to-home terminus-backtohome-span");var r=document.createElement("span");r.setAttribute("class","fa fas fa-arrow-left"),t.appendChild(r);var i=this.pages[this.pages.length-2];return t.appendChild(document.createTextNode(" back to "+i)),t.addEventListener("click",(function(){var t=e.pages.pop();"home"==(i=e.pages[e.pages.length-1])?e.getAsDOM():(t=e.pages.pop(),e.showDocumentPage(t))})),t.addEventListener("mouseover",(function(){this.style.cursor="pointer"})),t},c.prototype.showDocumentPage=function(e){var t=this;this.ui.page="docs",this.ui.redrawControls();var r=e.substring(0,4);"doc:"!=r&&"http"!=r&&(e="doc:"+e);var i=s.WOQL,n=this.ui.client.connectionConfig.dbURL(),o=new a(this.ui.client).options({showQuery:"icon",editQuery:!1,loadDocument:this.getShowDocumentControl()}),u=i.from(n).concreteDocumentClasses();u.execute(this.ui.client).then((function(e){var r=new s.WOQLResult(e,u),i=t.getCreateDataChooser(r,{showQuery:"icon",editQuery:!1},{showConfig:"icon",editConfig:"true"});o.setClassLoader(i)}));var c=i.document().load_schema(!0);c.show_all("SimpleFrameViewer"),c.object().features("id","type","comment","delete","reset","hide","show","clone","update","view","add","value"),c.property().features("value"),c.data().features("value"),o.loadDocument(e,c).then((function(){t.pages.push(e),s.FrameHelper.removeChildren(t.container);var r=t.getNavigationDOM();t.container.appendChild(r),t.container.appendChild(o.getAsDOM())})).catch((function(e){return t.ui.showError(e)}))},c.prototype.getShowDocumentControl=function(){var e=document.createElement("span");e.setAttribute("class","terminus-get-doc terminus-document-chooser terminus-form-horizontal terminus-control-group");var t=document.createElement("span");t.setAttribute("class","terminus-document-chooser-label terminus-doc-control-label terminus-control-label-padding");var r=document.createElement("input");r.setAttribute("class","terminus-form-doc-value terminus-document-chooser terminus-doc-input-text"),r.setAttribute("placeholder","Enter Document ID to view ...");var i=document.createElement("button");i.setAttribute("class","terminus-control-button terminus-document-button terminus-btn"),i.setAttribute("title","Enter Document ID to view");var n=document.createElement("i");n.setAttribute("class","fa fa-caret-left"),i.appendChild(n),i.appendChild(document.createTextNode(" Load "));var s=document.createElement("i");s.setAttribute("class","fa fa-caret-right"),i.appendChild(s);var o=this;return i.addEventListener("click",(function(){r.value&&o.showDocumentPage(r.value)})),r.addEventListener("keyup",(function(e){e.preventDefault(),13===e.keyCode&&r.value&&o.showDocumentPage(r.value)})),e.appendChild(t),e.appendChild(r),e.appendChild(i),e},c.prototype.getDocumentTableConfig=function(e){var t=this;return{rowClick:function(e){t.ui.showDocument(e["v:ID"])},"v:ID":{hidden:!0},"v:Class":{hidden:!0},"v:Type_Comment":{hidden:!0},"v:Label":{header:"Document",renderer:function(e){return e.annotateValue(e.value(),{ID:e.binding("v:ID")})}},"v:Type":{renderer:function(e){return e.annotateValue(e.value(),{Class:e.binding("v:Class"),Description:e.binding("v:Type_Comment")})}},"v:Comment":{header:"Description",renderer:"HTMLStringViewer",args:{max_cell_size:40,max_word_size:10}},column_order:["v:Label","v:Type","v:Comment"]}},c.prototype.getExplanation=function(e){var t=document.createElement("div"),r=e.charAt(0).toUpperCase()+e.slice(1);if(t.appendChild(n.getHeaderDom(r+" View")),"table"==e)var i="Below view shows a table view of available documents within the database";else i="Below view shows a graph view of how available documents are related to other documents";return t.appendChild(document.createTextNode(i)),t},c.prototype.getClassesDOM=function(e){var t=this,r=(s.WOQL.limit(25).start(0).documentMetadata(),new TerminusHTMLViewer(this.ui.client)),i=s.WOQL,n=i.from(this.ui.client.connectionConfig.dbURL()).limit(25).start(0).documentMetadata();return n.execute(this.ui.client).then((function(o){var a=new s.WOQLResult(o,n),u=r.showResult(a,i.table(),!1);e.appendChild(t.getExplanation("table")),e.appendChild(u),a.first();var c=i.graph();c.source("v:Subject");c.edge("v:Subject","v:Object").icon({color:[255,255,25],weight:100,unicode:"",size:2});var l=r.showResult(a,c,!1);e.appendChild(t.getExplanation("graph")),e.appendChild(l),a.first()})),e},l.prototype.getAsDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-db-creator");var r=document.createElement("h3");r.setAttribute("class","terminus-db-creator-title terminus-module-head"),r.appendChild(n.getHeaderDom("Create New Database")),t.appendChild(r);var i=document.createElement("div");i.setAttribute("class","terminus-form-border "),t.appendChild(i);var s=document.createElement("div");s.setAttribute("class","terminus-form-margin-top"),i.appendChild(s),(l=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(d=document.createElement("span")).setAttribute("class","terminus-id-label terminus-form-label terminus-control-label"),d.appendChild(document.createTextNode("ID")),l.appendChild(d);var o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("class","terminus-form-value terminus-input-text"),o.setAttribute("placeholder","No spaces or special characters allowed in IDs"),l.appendChild(o),i.appendChild(l),(l=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(d=document.createElement("span")).setAttribute("class","terminus-title-label terminus-form-label terminus-control-label"),d.appendChild(document.createTextNode("Title"));var a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("placeholder","A brief title for the Database"),a.setAttribute("class","terminus-form-value terminus-input-text"),l.appendChild(d),l.appendChild(a),i.appendChild(l),(l=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(d=document.createElement("span")).setAttribute("class","terminus-title-label terminus-form-label terminus-control-label"),d.appendChild(document.createTextNode("Description")),l.appendChild(d);var u=document.createElement("textarea");u.setAttribute("class","terminus-textarea terminus-db-description terminus-textarea "),u.setAttribute("placeholder","A short text describing the database and its purpose"),l.appendChild(u),i.appendChild(l),(l=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(d=document.createElement("span")).setAttribute("class","terminus-schema-label terminus-form-label terminus-control-label"),d.appendChild(document.createTextNode("Import Schema")),l.appendChild(d);var c=document.createElement("input");c.setAttribute("placeholder","Terminus DB URL"),c.setAttribute("type","text"),c.setAttribute("class","terminus-form-value terminus-form-url terminus-input-text"),l.appendChild(c),i.appendChild(l),(l=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(d=document.createElement("span")).setAttribute("class","terminus-schema-label terminus-form-label terminus-control-label"),d.appendChild(document.createTextNode("Key")),l.appendChild(d);var l,d,p=document.createElement("input");p.setAttribute("placeholder","Server API Key"),p.setAttribute("type","text"),p.setAttribute("class","terminus-form-value terminus-form-url terminus-input-text"),l.appendChild(p),i.appendChild(l),(l=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(d=document.createElement("span")).setAttribute("class","terminus-data-label terminus-form-label terminus-control-label"),d.appendChild(document.createTextNode("Import Data")),l.appendChild(d);var h=document.createElement("input");h.setAttribute("type","text"),h.setAttribute("placeholder","Terminus DB URL"),h.setAttribute("class","terminus-form-value terminus-form-url terminus-input-text"),l.appendChild(h);var m=document.createElement("div");m.setAttribute("class","terminus-control-buttons");var f=document.createElement("button");f.setAttribute("class","terminus-control-button terminus-cancel-db-button terminus-btn terminus-btn-float-right"),f.appendChild(document.createTextNode("Cancel"));var g=document.createElement("button");g.setAttribute("class","terminus-control-button terminus-create-db-button terminus-btn terminus-btn-float-right"),g.appendChild(document.createTextNode("Create"));var y=this;return g.addEventListener("click",(function(){var e=function(){var e={};return e.id=o.value,e.title=a.value,e.description=u.value,e.schema=c.value,e.key=p.value,e.data=h.value,e}();y.ui.createDatabase(e)})),f.addEventListener("click",(function(){y.ui.showServerMainPage()})),m.appendChild(f),m.appendChild(g),i.appendChild(m),t},e.exports={TerminusDBViewer:c,TerminusDBController:u,TerminusDBCreator:l}},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0),s=r(58),o=r(59),a=(r(104),r(61)),u=r(62),c=r(9);function l(){this.rules=[],this.type="document"}function d(){this.rules=[],this.type="stream"}function p(){this.rules=[],this.type="chooser"}function h(){this.rules=[],this.type="table"}function m(e){this.rule={scope:e}}function f(e){for(var t=[],r=0;r<e.length;r++){var i="v:"==e[r].substring(0,2)?e[r]:"v:"+e[r];t.push(i)}return t}function g(e){return"v:"==e.substring(0,2)?e.substring(2):e}function y(e,t,r,i,n){for(var s=[],o=0;o<e.length;o++)e[o].match(t,r,i,n)&&s.push(e[o].rule);return s}n.WOQL.table=function(){return new h},n.WOQL.graph=function(){return new WOQLGraphConfig},n.WOQL.chooser=function(){return new p},n.WOQL.stream=function(){return new d},n.WOQL.document=function(){return new l},l.prototype.prettyPrint=function(){var e="view = WOQL.document();\n";this.renderer()&&(e+="view.renderer('"+this.renderer()+"')\n"),void 0!==this.load_schema()&&(e+="view.load_schema("+this.load_schema()+")\n");for(var t=0;t<this.rules.length;t++)e+="view."+this.rules[t].prettyPrint("frame")+"\n";return e},l.prototype.create=function(e,t){var r=new c(e,this);return this.trenderer?r.setRenderer(this.trenderer):t&&t.frame&&r.setRenderer(t.frame),r},l.prototype.renderer=function(e){return void 0===e?this.trenderer:(this.trenderer=e,this)},l.prototype.json_rules=function(){for(var e=[],t=0;t<this.rules.length;t++)e.push(this.rules[t].json());return e},l.prototype.load_schema=function(e){return void 0===e?this.get_schema:(this.get_schema=e,this)},l.prototype.show_all=function(e){return this.all().renderer(e),this},l.prototype.show_parts=function(e,t,r){return this.object().renderer(e),this.property().renderer(t),this.data().renderer(r),this},l.prototype.object=function(){var e=n.WOQL.rule();return e.scope("object"),this.rules.push(e),e},l.prototype.property=function(){var e=n.WOQL.rule();return e.scope("property"),this.rules.push(e),e},l.prototype.data=function(){var e=n.WOQL.rule();return e.scope("data"),this.rules.push(e),e},l.prototype.all=function(){var e=n.WOQL.rule();return e.scope("*"),this.rules.push(e),e},l.prototype.setFrameDisplayOptions=function(e,t){void 0===e.display_options&&(e.display_options={}),void 0!==t.mode()&&(e.display_options.mode=t.mode()),void 0!==t.view()&&(e.display_options.view=t.view()),void 0!==t.showDisabledButtons()&&(e.display_options.show_disabled_buttons=t.showDisabledButtons()),void 0!==t.features()&&(e.display_options.features=t.features()),void 0!==t.header()&&(e.display_options.header=t.header()),void 0!==t.hidden()&&(e.display_options.hidden=t.hidden()),void 0!==t.collapse()&&(e.display_options.collapse=t.collapse()),void 0!==t.headerFeatures()&&(e.display_options.header_features=t.headerFeatures()),void 0!==t.showEmpty()&&(e.display_options.show_empty=t.showEmpty()),void 0!==t.featureRenderers()&&(e.display_options.feature_renderers=t.featureRenderers()),void 0!==t.dataviewer()&&(e.display_options.dataviewer=t.dataviewer(),void 0!==t.args()&&(e.display_options.args=t.args()))},d.prototype.prettyPrint=function(){for(var e="view = WOQL.stream();\n",t=0;t<this.rules.length;t++)e+="view."+this.rules[t].prettyPrint("stream")+"\n";return e},d.prototype.getMatchingRules=function(e,t,r,i){return y(this.rules,e,t,r,i)},d.prototype.create=function(e,t){var r=new u(e,this);return this.trenderer?r.setRenderer(this.trenderer):t&&t.stream&&r.setRenderer(t.stream),r},p.prototype.getMatchingRules=function(e,t,r,i){return y(this.rules,e,t,r,i)},p.prototype.create=function(e,t){var r=new s(e,this);return this.trenderer?r.setRenderer(this.trenderer):t&&t.chooser&&r.setRenderer(t.chooser),r},p.prototype.prettyPrint=function(){var e="view = WOQL.chooser();\n";void 0!==this.change()&&(e+="view.change("+this.change()+")\n"),void 0!==this.show_empty()&&(e+="view.show_empty('"+this.show_empty()+"')\n"),void 0!==this.values()&&(e+="view.values('"+g(this.values())+"')\n"),void 0!==this.labels()&&(e+="view.labels('"+g(this.labels())+"')\n"),void 0!==this.titles()&&(e+="view.titles('"+g(this.titles())+"')\n"),void 0!==this.sort()&&(e+="view.sort("+this.sort()+")\n"),void 0!==this.direction()&&(e+="view.direction('"+this.direction()+"')\n");for(var t=0;t<this.rules.length;t++)e+="view."+this.rules[t].prettyPrint("chooser")+"\n";return e},p.prototype.change=function(e){return void 0!==e?(this.onChange=e,this):this.onChange},p.prototype.show_empty=function(e){return void 0!==e?(this.placeholder=e,this):this.placeholder},p.prototype.rule=function(e){var t=new m("row");return this.rules.push(t),t.v(e)},p.prototype.values=function(e){return void 0!==e?("v:"!=e.substring(0,2)&&(e="v:"+e),this.value_variable=e,this):this.value_variable},p.prototype.labels=function(e){return e?("v:"!=e.substring(0,2)&&(e="v:"+e),this.label_variable=e,this):this.label_variable},p.prototype.titles=function(e){return e?("v:"!=e.substring(0,2)&&(e="v:"+e),this.title_variable=e,this):this.title_variable},p.prototype.sort=function(e){return e?("v:"!=e.substring(0,2)&&(e="v:"+e),this.sort_variable=e,this):this.sort_variable},p.prototype.direction=function(e){return e?(this.sort_direction=e,this):this.sort_direction},h.prototype.getMatchingRules=function(e,t,r,i){return y(this.rules,e,t,r,i)},h.prototype.create=function(e,t,r){var i=new o(e,this);return i.setDatatypes(r),this.trenderer?i.setRenderer(this.trenderer):t&&t.table&&i.setRenderer(t.table),i},h.prototype.prettyPrint=function(){var e="view = WOQL.table();\n";void 0!==this.column_order()&&(e+="view.column_order('"+this.column_order()+"')\n"),void 0!==this.pagesize()&&(e+="view.pagesize("+this.pagesize()+")\n"),void 0!==this.renderer()&&(e+="view.renderer('"+this.renderer()+"')\n"),void 0!==this.pager()&&(e+="view.pager("+this.pager()+")\n"),void 0!==this.page()&&(e+="view.page("+this.page()+")\n");for(var t=0;t<this.rules.length;t++)e+="view."+this.rules[t].prettyPrint("table")+"\n";return e},h.prototype.renderer=function(e){return e?(this.trenderer=e,this):this.trenderer},h.prototype.column_order=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return void 0===t||0==t.length?this.order:(this.order=f(t),this)},h.prototype.pager=function(e){return void 0===e?this.show_pager:(this.show_pager=e,this)},h.prototype.pagesize=function(e,t){return void 0===e?this.show_pagesize:(this.show_pagesize=e,this.change_pagesize=t,this)},h.prototype.page=function(e){return void 0===e?this.show_pagenumber:(this.show_pagenumber=e,this)},h.prototype.column=function(){for(var e=new m("column"),t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.setVariables(r),this.rules.push(e),e},h.prototype.row=function(){var e=new m("row");return this.rules.push(e),e},WOQLGraphConfig=function(){this.rules=[],this.type="graph"},WOQLGraphConfig.prototype.create=function(e,t){var r=new a(e,this);return this.trenderer?r.setRenderer(this.trenderer):t&&t.graph&&r.setRenderer(t.graph),r},WOQLGraphConfig.prototype.getMatchingRules=function(e,t,r,i){return y(this.rules,e,t,r,i)},WOQLGraphConfig.prototype.prettyPrint=function(){var e="view = WOQL.graph();\n";if(void 0!==this.literals()&&(e+="view.literals('"+this.literals()+"')\n"),void 0!==this.source()&&(e+="view.source('"+g(this.source())+"')\n"),void 0!==this.fontfamily()&&(e+="view.fontfamily('"+this.fontfamily()+"')\n"),void 0!==this.show_force()&&(e+="view.show_force('"+this.show_force()+"')\n"),void 0!==this.fix_nodes()&&(e+="view.fix_nodes('"+this.fix_nodes()+"')\n"),void 0!==this.explode_out()&&(e+="view.explode_out('"+this.explode_out()+"')\n"),void 0!==this.selected_grows()&&(e+="view.selected_grows('"+this.selected_grows()+"')\n"),void 0!==this.width()&&(e+="view.width('"+this.width()+"')\n"),void 0!==this.height()&&(e+="view.height('"+this.height()+"')\n"),void 0!==this.edges()){for(var t=this.edges(),r=[],i=0;i<t.length;i++)r.push("['"+t[i][0]+", "+t[i][1]+"']");e+="view.edges('"+r.join(", ")+"')\n"}for(i=0;i<this.rules.length;i++)e+="view."+this.rules[i].prettyPrint("graph")+"\n";return e},WOQLGraphConfig.prototype.literals=function(e){return void 0!==e?(this.show_literals=e,this):this.show_literals},WOQLGraphConfig.prototype.source=function(e){return e?("v:"!=e.substring(0,2)&&(e="v:"+e),this.source_variable=e,this):this.source_variable},WOQLGraphConfig.prototype.fontfamily=function(e){return void 0!==e?(this.fontfam=e,this):this.fontfam},WOQLGraphConfig.prototype.show_force=function(e){return void 0!==e?(this.force=e,this):this.force},WOQLGraphConfig.prototype.fix_nodes=function(e){return void 0!==e?(this.fixed=e,this):this.fixed},WOQLGraphConfig.prototype.explode_out=function(e){return void 0!==e?(this.explode=e,this):this.explode},WOQLGraphConfig.prototype.selected_grows=function(e){return void 0!==e?(this.bigsel=e,this):this.bigsel},WOQLGraphConfig.prototype.width=function(e){return void 0!==e?(this.gwidth=e,this):this.gwidth},WOQLGraphConfig.prototype.height=function(e){return void 0!==e?(this.gheight=e,this):this.gheight},WOQLGraphConfig.prototype.edges=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t&&t.length){for(var i=[],n=0;n<t.length;n++)i.push(f(t[n]));return this.show_edges=i,this}return this.show_edges},WOQLGraphConfig.prototype.edge=function(e,t){var r=new m("edge");return e&&t?r.setVariables([e,t]):e?r.setVariables([e]):t&&r.setVariables([t]),e&&(r.source=e),t&&(r.target=t),this.rules.push(r),r},WOQLGraphConfig.prototype.node=function(){for(var e=new m("node"),t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.setVariables(r),this.rules.push(e),e},m.prototype.prettyPrint=function(e){var t="."+this.rule.scope+"('"+this.rule.variables.join("', '")+"')";for(var r in void 0!==this.literal()&&(t+=".literal("+this.literal()+")"),void 0!==this.type()&&(t+=".type("+JSON.stringify(function(e){for(var t=[],r=0;r<e.length;r++)t.push(g(e[r]));return t}(this.type()))+")"),void 0!==this.selected()&&(t+=".selected("+this.selected()+")"),void 0!==this.label()&&(t+=".label("+this.label()+")"),void 0!==this.size()&&(t+=".size('"+this.size()+"')"),void 0!==this.color()&&(t+=".color(["+this.color().join(",")+"])"),void 0!==this.charge()&&(t+=".charge('"+this.charge()+"')"),void 0!==this.distance()&&(t+=".distance('"+this.distance()+"')"),void 0!==this.weight()&&(t+=".distance('"+this.weight()+"')"),void 0!==this.symmetric()&&(t+=".symmetric("+this.symmetric()+")"),void 0!==this.collisionRadius()&&(t+=".collisionRadius("+this.collisionRadius()+")"),void 0!==this.icon()&&(t+=".icon("+JSON.stringify(this.icon())+")"),void 0!==this.text()&&(t+=".text("+JSON.stringify(this.text())+")"),void 0!==this.arrow()&&(t+=".arrow("+JSON.stringify(this.arrow())+")"),void 0!==this.border()&&(t+=".border("+JSON.stringify(this.border())+")"),void 0!==this.args()&&(t+=".args("+JSON.stringify(this.args())+")"),void 0!==this.renderer()&&(t+=".renderer('"+this.renderer()+"')"),void 0!==this.render()&&(t+=".render("+this.render()+")"),void 0!==this.header()&&(t+=".header('"+this.header()+"')"),void 0!==this.click()&&(t+=".click("+this.click()+")"),void 0!==this.hover()&&(t+=".hover("+this.hover()+")"),this.rule.constraints){t+=".v('"+r+"')";for(var i=0;i<this.rule.constraints[r].length;i++)"function"==typeof this.rule.constraints[r][i]?t+=".filter("+this.rule.constraints[r][i]+")":t+=".in("+JSON.stringify(this.rule.constraints[r][i])+")"}return t},m.prototype.size=function(e){return void 0===e?this.rule.size:(this.rule.size=e,this)},m.prototype.color=function(e){return void 0===e?this.rule.color:(this.rule.color=e,this)},m.prototype.charge=function(e){return void 0===e?this.rule.charge:(this.rule.charge=e,this)},m.prototype.collisionRadius=function(e){return void 0===e?this.rule.collisionRadius:(this.rule.collisionRadius=e,this)},m.prototype.icon=function(e){return e?(this.rule.icon=e,this):this.rule.icon},m.prototype.text=function(e){return e?(this.rule.text=e,this):this.rule.text},m.prototype.border=function(e){return e?(this.rule.border=e,this):this.rule.border},m.prototype.arrow=function(e){return e?(this.rule.arrow=e,this):this.rule.arrow},m.prototype.distance=function(e){return void 0!==e?(this.rule.distance=e,this):this.rule.distance},m.prototype.symmetric=function(e){return void 0!==e?(this.rule.symmetric=e,this):this.rule.symmetric},m.prototype.weight=function(e){return void 0!==e?(this.rule.weight=e,this):this.rule.weight},m.prototype.renderer=function(e){return void 0===e?this.rule.renderer:(this.rule.renderer=e,this)},m.prototype.header=function(e){return void 0===e?this.rule.header:(this.rule.header=e,this)},m.prototype.render=function(e){return void 0===e?this.rule.render:(this.rule.render=e,this)},m.prototype.click=function(e){return e?(this.rule.click=e,this):this.rule.click},m.prototype.hover=function(e){return e?(this.rule.hover=e,this):this.rule.hover},m.prototype.hidden=function(e){return void 0===e?this.rule.hidden:(this.rule.hidden=e,this)},m.prototype.args=function(e){return void 0===e?this.rule.args:(this.rule.args=e,this)},m.prototype.literal=function(e){return void 0===e?this.rule.literal:(this.rule.literal=e,this)},m.prototype.type=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return void 0===t?this.rule.type:(this.rule.type=t,this)},m.prototype.setVariables=function(e){return e&&e.length&&(this.rule.variables=f(e),this.current_variable=this.rule.variables[this.rule.variables.length-1]),this},m.prototype.v=function(e){return e?("v:"!=e.substring(0,2)&&(e="v:"+e),this.current_variable=e,this):this.current_variable},m.prototype.in=function(){if(this.current_variable){this.rule.constraints||(this.rule.constraints={}),this.rule.constraints[this.current_variable]||(this.rule.constraints[this.current_variable]=[]);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.rule.constraints[this.current_variable].push(t)}return this},m.prototype.filter=function(e){return this.current_variable&&(this.rule.constraints||(this.rule.constraints={}),this.rule.constraints[this.current_variable]||(this.rule.constraints[this.current_variable]=[]),this.rule.constraints[this.current_variable].push(e)),this},m.prototype.label=function(e){return e?(this.rule.label=e,this):this.rule.label},m.prototype.title=function(e){return e?(this.rule.title=e,this):this.rule.title},m.prototype.selected=function(e){return void 0!==e?(this.rule.selected=e,this):this.rule.selected},m.prototype.match=function(e,t,r,n){if(r&&this.rule.scope!=r)return!1;if(t){if(this.rule.variables&&this.rule.variables.length)if("object"==i(t)){if(-1==this.rule.variables.indexOf(t[0]))return!1;if(-1==this.rule.variables.indexOf(t[1]))return!1}else if(-1==this.rule.variables.indexOf(t))return!1;if(this.rule&&this.rule.type)if("object"==i(t)){if(!e[t][0]["@type"]||-1==this.rule.type.indexOf(e[t][0]["@type"]))return!1}else if(!e[t]["@type"]||-1==this.rule.type.indexOf(e[t]["@type"]))return!1;if(this.rule&&void 0!==this.rule.literal)if("object"==i(t)){if(e[t[0]]["@value"]){if(!this.rule.literal)return!1}else if(this.rule.literal)return!1}else if(e[t]["@value"]){if(!this.rule.literal)return!1}else if(this.rule.literal)return!1;if("object"==i(t)){if(this.rule.constraints&&this.rule.constraints[t[0]]){if(!e)return!1;for(var s=0;s<this.rule.constraints[t[0]].length;s++)if(!this.test(e[t[0]],this.rule.constraints[t][0]))return!1}if(this.rule.constraints&&this.rule.constraints[t[1]]){if(!e)return!1;for(s=0;s<this.rule.constraints[t[1]].length;s++)if(!this.test(e[t[1]],this.rule.constraints[t][1]))return!1}}else if(this.rule.constraints&&this.rule.constraints[t]){if(!e)return!1;for(s=0;s<this.rule.constraints[t].length;s++)if(!this.test(e[t],this.rule.constraints[t]))return!1}if("edge"==r){if(this.rule.source&&this.rule.source!=t[0])return!1;if(this.rule.target&&this.rule.target!=t[1])return!1}}else for(var o in this.rule.constraints){if(!e)return!1;for(s=0;s<this.rule.constraints[o].length;s++)if(!this.test(e[o],this.rule.constraints[o]))return!1}return!n||void 0!==this.rule[n]},m.prototype.test=function(e,t){if("object"==i(t)&&t.length){var r=e["@value"]?e["@value"]:e;return-1!=t.indexOf(r)}if("function"==typeof t)return t(e)}},function(e,t,r){var i=r(0);function n(e,t){return this.client=e,this.selected=!1,this.options(t)}n.prototype.options=function(e){return this.config=e||i.WOQL.chooser(),this},n.prototype.set=function(e){if(this.selected!=e){this.selected=e;var t=this.config.change;t&&t(e)}},n.prototype.render=function(){if(this.renderer)return this.renderer.render(this)},n.prototype.setRenderer=function(e){return this.renderer=e,this},n.prototype.setResult=function(e){this.result=e,this.choices=[],this.cursor=0;var t=e.getVariableList();for(!this.config.values()&&t.length&&this.config.values(t[0]),this.config.sort()&&this.result.sort(this.config.sort(),this.config.direction());row=this.result.next();)row&&this.includeRow(row)&&this.choices.push(this.rowToChoice(row,this.result.cursor));return this},n.prototype.includeRow=function(e){for(var t=this.config.getMatchingRules(e,!1,"row","hidden"),r=0;r<t.length;r++)if(t[r].hidden)return!1;return!0},n.prototype.rowToChoice=function(e,t){var r={id:this.getRowID(e)};return r.label=this.getLabelFromBinding(e,t),r.title=this.getTitleFromBinding(e,t),r.selected=this.getSelectedFromBinding(e,t),r},n.prototype.getRowID=function(e){var t=e[this.config.values()];return t["@value"]?t["@value"]:t},n.prototype.getLabelFromBinding=function(e,t){var r=this.getSpecialRenderer(e,"label");if(r)return this.renderSpecial(r,e,t);if(this.config.labels()&&e[this.config.labels()]){var n=e[this.config.labels()];if(n["@value"]&&(n=n["@value"]),"unknown"!=n)return n}return i.FrameHelper.labelFromURL(this.getRowID(e))},n.prototype.getTitleFromBinding=function(e,t){var r=this.getSpecialRenderer(e,"title");if(r)return this.renderSpecial(r,e,t);if(this.config.titles()&&e[this.config.titles()]){var i=e[this.config.titles()];if(i["@value"]&&(i=i["@value"]),"unknown"!=i)return i}return!1},n.prototype.getSelectedFromBinding=function(e){var t=this.config.getMatchingRules(row,!1,"row","selected");return!(!t||!t.length)&&t[t.length-1].selected},n.prototype.getSpecialRenderer=function(e,t){for(var r=this.config.getMatchingRules(e,!1,"row",t),i=0;i<r.length;i++)if(r[i][t])return r[i][t];return!1},n.prototype.renderSpecial=function(e,t,r){return e&&"function"==typeof e?render(t):e&&"string"==typeof e?e:void 0},n.prototype.count=function(){return this.result.count()},n.prototype.first=function(){return this.cursor=0,this.choices[this.cursor]},n.prototype.prev=function(){if(this.cursor>0)return this.choices[--this.cursor]},n.prototype.next=function(){return this.choices[this.cursor++]},e.exports=n},function(e,t,r){var i=r(0),n=r(60);function s(e,t){return this.client=e,t&&this.options(t),this}function o(e,t){this.datavalue=e,this.datatype=t}s.prototype.setResult=function(e){return this.result=e,this},s.prototype.setRenderer=function(e){return this.renderer=e,this},s.prototype.render=function(e){if(this.renderer)return this.renderer.render(this,e)},s.prototype.count=function(){return this.result.count()},s.prototype.first=function(){return this.result.first()},s.prototype.prev=function(){return this.result.prev()},s.prototype.next=function(){return this.result.next()},s.prototype.options=function(e){return this.config=e||i.WOQL.table(),this},s.prototype.setDatatypes=function(e){return this.datatypes=new n,this.config.datatypes&&this.datatypes.options(this.config.datatypes),e&&e(this.datatypes),this},s.prototype.canAdvancePage=function(){return this.result.count()==this.result.query.getLimit()},s.prototype.canChangePage=function(){return this.canAdvancePage()||this.canRetreatPage()},s.prototype.canRetreatPage=function(){return this.result.query.getPage()>1},s.prototype.getPageSize=function(){return this.result.query.getLimit()},s.prototype.setPage=function(e){return this.result.query.setPage(e)},s.prototype.getPage=function(){return this.result.query.getPage()},s.prototype.setPageSize=function(e){return this.update(this.result.query.setPageSize(e))},s.prototype.nextPage=function(){return this.update(this.result.query.nextPage())},s.prototype.firstPage=function(){return this.update(this.result.query.firstPage())},s.prototype.previousPage=function(){return this.update(this.result.query.previousPage())},s.prototype.getColumnsToRender=function(){if(this.hasColumnOrder())var e=this.getColumnOrder();else if(this.result.query.hasSelect())e=this.result.query.getSelectVariables();else e=this.result.getVariableList();var t=this;return e.filter((function(e){return!t.hidden(e)}))},s.prototype.getColumnHeaderContents=function(e){var t=this.config.getMatchingRules(!1,e,"column","header");if(t&&t.length){var r=t[t.length-1].header;return"string"==typeof r?document.createTextNode(r):"function"==typeof r?r(e):r}0===e.indexOf("v:")&&(e=e.substring(2));var n=-1!=e.indexOf("http")?i.FrameHelper.labelFromURL(e):e;return n=n.replace("_"," "),document.createTextNode(n)},s.prototype.hidden=function(e){var t=this.config.getMatchingRules(!1,e,"column","hidden");return!!t.length&&t[t.length-1].hidden},s.prototype.update=function(e){var t=this;return e.execute(this.client).then((function(r){var n=new i.WOQLResult(r,e);return t.setResult(n),t.notify&&t.notify(n),n}))},s.prototype.hasDefinedEvent=function(e,t,r,i){var n=this.config.getMatchingRules(e,t,r,i);return!(!n||!n.length)},s.prototype.getDefinedEvent=function(e,t,r,i){var n=this.config.getMatchingRules(e,t,r,i);if(n&&n.length)return n[n.length-1][i]},s.prototype.getRowClick=function(e){return this.getDefinedEvent(e,!1,"row","click")},s.prototype.getCellClick=function(e,t){return this.getDefinedEvent(e,t,"column","click")},s.prototype.getRowHover=function(e){return this.getDefinedEvent(e,!1,"row","hover")},s.prototype.getCellHover=function(e,t){return this.getDefinedEvent(e,t,"column","hover")},s.prototype.getColumnOrder=function(){return this.config.column_order()},s.prototype.hasColumnOrder=s.prototype.getColumnOrder,s.prototype.hasCellClick=s.prototype.getCellClick,s.prototype.hasRowClick=s.prototype.getRowClick,s.prototype.hasCellHover=s.prototype.getCellHover,s.prototype.hasRowHover=s.prototype.getRowHover,s.prototype.getRenderer=function(e,t){var r=this.getSpecificRender(e,t);if(r)return r;var i=this.getDefinedEvent(t,e,"column","renderer"),n=this.getDefinedEvent(t,e,"column","args");if(!i){var s=this.getRendererForDatatype(t[e]);i=s.name,n||(n=s.args)}return i?this.datatypes.createRenderer(i,n):void 0},s.prototype.renderValue=function(e,t,r,i){if(t&&t["@type"]){e.type=t["@type"];var n=new o(t["@value"],t["@type"],r,i)}else if(t&&t["@language"]){e.type="xsd:string";n=new o(t["@value"],e.type,r,i)}else if(t&&"string"==typeof t){e.type="id";n=new o(t["@value"],"id",r,i)}if(n)return e.renderValue(n)},o.prototype.value=function(e){return e?(this.datavalue=e,this):this.datavalue},s.prototype.getRendererForDatatype=function(e){return e&&e["@type"]?this.datatypes.getRenderer(e["@type"],e["@value"]):e&&e["@language"]?this.datatypes.getRenderer("xsd:string",e["@value"]):!(!e||"string"!=typeof e)&&this.datatypes.getRenderer("id",e)},s.prototype.getSpecificRender=function(e,t){return this.getDefinedEvent(t,e,"column","render")},e.exports=s},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){this.registeredDataViewers={},this.registeredDataEditors={},this.defaultViewers={},this.defaultEditors={},this.universalViewer=!1,this.universalEditor=!1,e&&this.options(e),this.specials=["document","oneOf","id","contained","structural"]}i.prototype.options=function(e){this.universalViewer=!(!e||!e.universalViewer)&&e.universalViewer,this.universalEditor=!(!e||!e.universalEditor)&&e.universalEditor,this.editor=!(!e||!e.editor)&&e.editor},i.prototype.getValidDataViewerList=function(e){var t=[];return e&&void 0!==this.registeredDataViewers[e]&&(t=t.concat(this.registeredDataViewers[e])),this.universalViewer&&-1==t.indexOf(this.universalViewer)&&t.push(this.universalViewer),t},i.prototype.getValidDataEditorList=function(e){var t=[];if(e&&void 0!==this.registeredDataEditors[e]){var r=this.registeredDataEditors[e];if(r)for(var i=0;i<r.length;i++)-1==t.indexOf(r[i])&&t.push(r[i])}return void 0!==this.registeredDataEditors[e]&&(t=t.concat(this.registeredDataEditors[e])),this.universalEditor&&-1==t.indexOf(this.universalEditor)&&t.push(this.universalEditor),t},i.prototype.getEditorForDataFrame=function(e){var t=this.getValidDataEditorList(e);return this.defaultEditors[e]&&t[this.defaultEditors[e]]?t[this.defaultEditors[e]]:t?t[Object.keys(t)[0]]:this.universalEditor?this.universalEditor:void 0},i.prototype.getViewerForDataFrame=function(e){var t=this.getValidDataViewerList(e);return this.defaultViewers[e]&&t[this.defaultViewers[e]]?t[this.defaultViewers[e]]:t?t[Object.keys(t)[0]]:this.universalViewer?this.universalViewer:void 0},i.prototype.registerViewerForTypes=function(e,t,r){for(var i=0;i<r.length;i++)void 0===this.registeredDataViewers[r[i]]&&(this.registeredDataViewers[r[i]]={}),this.registeredDataViewers[r[i]][e]||(this.registeredDataViewers[r[i]][e]=t)},i.prototype.registerEditorForTypes=function(e,t,r){for(var i=0;i<r.length;i++)void 0===this.registeredDataEditors[r[i]]&&(this.registeredDataEditors[r[i]]={}),this.registeredDataEditors[r[i]][e]||(this.registeredDataEditors[r[i]][e]=t)},i.prototype.getRenderer=function(e,t){var i={},n=this.getViewerForDataFrame(e);return!!n&&("object"==r(n)?(i.name=Object.keys(n)[0],n[i.name].label&&(i.label=n[i.name].label),n[i.name].args&&(i.args=n[i.name].args)):i.name=n,i)},i.prototype.getEditor=function(e,t){var i={},n=this.getEditorForDataFrame(e);return!!n&&("object"==r(n)?(i.name=Object.keys(n)[0],n[i.name].label&&(i.label=n[i.name].label),n[i.name].args&&(i.args=n[i.name].args)):i.name=n,i)},e.exports=i},function(e,t,r){var i=r(0);function n(e,t){return this.client=e,this.options(t),this.nodes=[],this.node_ids=[],this.edges=[],this}n.prototype.setResult=function(e){this.result=e,this.calculateVariableTypes(e)},n.prototype.setRenderer=function(e){return this.renderer=e,this},n.prototype.render=function(){if(this.renderer)return this.renderer.render(this)},n.prototype.options=function(e){return this.config=e||i.WOQL.graph(),this},n.prototype.getEdges=function(){if(this.edges)return this.edges;this.edges=[];for(var e=this.result.getBindings(),t=0;t<e.length;t++)this.rowIncludesEdge(e[t])&&(this.edges=this.edges.concat(this.makeEdgesFromRow(e[t])));return this.edges},n.prototype.getNodes=function(){if(this.nodes)return this.nodes;this.nodes=[];for(var e=this.result.getBindings(),t=[],r=0;r<e.length;r++)for(var i in e[r])-1!=this.source_variables.indexOf(i)&&-1==t.indexOf(e[r][i])&&(t.push(e[r][i]),this.nodes.push(this.makeNodeFromSource(e[r][i],i,e[r]))),-1!=this.target_variables.indexOf(i)&&-1==t.indexOf(e[r][i])&&(t.push(e[r][i]),this.nodes.push(this.makeNodeFromTarget(e[r][i],i,e[r])));return this.nodes},n.prototype.makeNodeFromSource=function(e,t,r){var i={type:"node",id:e};return this.adornNode(i,r)},n.prototype.makeNodeFromTarget=n.prototype.makeNodeFromSource,n.prototype.adornNode=function(e){return e},n.prototype.adornEdge=function(e){return e},n.prototype.makeEdgeFromRow=function(e,t,r){for(var i=!1,n=!1,s=0;s<this.target_variables.length;s++)r[this.target_variables[s]]&&(i=r[this.target_variables[s]]);if(i)for(s=0;s<this.source_variables.length;s++)r[this.source_variables[s]]&&(n=r[this.source_variables[s]]);if(n&&i){var o={type:"link",id:e,target:i,source:n};return this.adornEdge(o,r)}},n.prototype.calculateVariableTypes=function(){var e=this.result.getBindings();if(e&&e.length)for(var t=0;t<e.length;t++)this.extractFromBinding(e[t])},n.prototype.extractFromBinding=function(e){if(this.includeRow(e)){var t=[],r=[];for(var n in e)"string"==typeof e[n]?e[n]&&"unknown"!=e[n]&&this.includeNode(n,e)&&t.push(n):"string"==typeof e[n]["@value"]&&this.includeLiteralNode(n,e)&&r.push(n);if(0==t.length)return;for(var s=0;s<r.length;s++){var o=i.FrameHelper.genBNID().substring(2),a=this.getLiteralOwner(t,r[s],e);a&&(this.addAdornedNode(o,r[s],e),this.addAdornedEdge(e[a],o,a,r[s],e))}this.createEdgesFromIDs(t,e);for(s=0;s<t.length;s++){var u=e[t[s]];t[s],e[t[s]];this.addAdornedNode(u,t[s],e)}}},n.prototype.addAdornedEdge=function(e,t,r,i,n){for(var s={type:"link",target:t,source:e,text:i},o=this.config.getMatchingRules(n,[r,i],"edge"),a=0;a<o.length;a++){var u;if(o[a].size)if("string"==typeof o[a].size&&"v:"==o[a].size.substring(0,2))(u=n[o[a].size])&&u["@value"]&&(s.size=u["@value"]);else s.size=o[a].size;if(o[a].color&&(s.color=o[a].color),o[a].distance)if("string"==typeof o[a].distance&&"v:"==o[a].distance.substring(0,2))(u=n[o[a].distance])&&u["@value"]&&(s.distance=u["@value"]);else s.distance=o[a].distance;if(o[a].arrow&&(s.arrow=o[a].arrow),void 0!==o[a].symmetric&&(s.symmetric=o[a].symmetric),o[a].weight)if("string"==typeof o[a].weight&&"v:"==o[a].weight.substring(0,2))(u=n[o[a].weight])&&u["@value"]&&(s.weight=u["@value"]);else s.weight=o[a].weight}this.edges.push(s)},n.prototype.addAdornedNode=function(e,t,r){for(var i={type:"node",id:e,nodetype:t},n=this.config.getMatchingRules(r,t,"node"),s=0;s<n.length;s++){var o;if(n[s].size)if("string"==typeof n[s].size&&"v:"==n[s].size.substring(0,2))(o=r[n[s].size])&&o["@value"]&&(i.radius=o["@value"]);else i.radius=n[s].size;if(n[s].color&&(i.color=n[s].color),n[s].charge)if("string"==typeof n[s].charge&&"v:"==n[s].charge.substring(0,2))(o=r[n[s].charge])&&o["@value"]&&(i.charge=o["@value"]);else i.charge=n[s].charge;if(n[s].collisionRadius)if("string"==typeof n[s].collisionRadius&&"v:"==n[s].collisionRadius.substring(0,2))(o=r[n[s].collisionRadius])&&o["@value"]&&(i.collisionRadius=o["@value"]);else i.collisionRadius=n[s].collisionRadius;n[s].icon&&(i.icon=n[s].icon),n[s].text&&(i.text=n[s].text),n[s].border&&(i.border=n[s].border)}i.text||("string"==typeof r[t]?i.text=r[t]:r[t]["@value"]&&(i.text=r[t]["@value"])),this.nodes.push(i)},n.prototype.getLiteralOwner=function(e,t,r){var i=this.config.source();if(i&&r[i])return i;var n=this.config.edges();if(n){for(var s=0;s<n.length;s++)if(n[s][1]==t)return n[s][0];return!1}return e[0]},n.prototype.createEdgesFromIDs=function(e,t){if(!(e.length<2)){var r=this.config.source(),i=this.config.edges();if(!r&&i&&i.length)for(var n=0;n<i.length;n++)-1!=e.indexOf(i[n][0])&&-1!=e.indexOf(i[n][1])&&this.addAdornedEdge(t[i[n][0]],t[i[n][1]],i[n][0],i[n][1],t);else{var s=r&&-1!=e.indexOf(r)?r:e[0];for(n=0;n<e.length;n++)e[n]!=s&&this.addAdornedEdge(t[s],t[e[n]],s,e[n],t)}}},n.prototype.includeNode=function(e,t){for(var r=this.config.getMatchingRules(t,e,"node","hidden"),i=0;i<r.length;i++)if(r[i].hidden)return!1;return!0},n.prototype.includeLiteralNode=function(e,t){var r=this.config.literals();if(void 0!==r&&!r)return!1;for(var i=this.config.getMatchingRules(t,e,"node","hidden"),n=0;n<i.length;n++)if(i[n].hidden)return!1;return!0},n.prototype.includeRow=function(e){for(var t=this.config.getMatchingRules(e,!1,"row","hidden"),r=0;r<t.length;r++)if(t[r].hidden)return!1;return!0},e.exports=n},function(e,t){function r(e){this.client=e}r.prototype.options=function(e){return this.page_size=10,this},r.prototype.setResult=function(e){this.result=e},r.prototype.setRenderer=function(e){return this.renderer=e,this},r.prototype.render=function(){if(this.renderer)return this.renderer.render(this)},e.exports=r},function(module,exports,__webpack_require__){var TerminusClient=__webpack_require__(0),TerminusCodeSnippet=__webpack_require__(4),ResultPane=__webpack_require__(105),UTILS=__webpack_require__(2),HTMLFrameHelper=__webpack_require__(1);function QueryPane(e,t,r){this.client=e,this.query=t,this.result=r,this.views=[],this.container=document.createElement("span"),this.container.setAttribute("class","terminus-query-pane-cont")}QueryPane.prototype.options=function(e){return this.showQuery=!e||void 0===e.showQuery||e.showQuery,this.editQuery=!e||void 0===e.editQuery||e.editQuery,this.addViews=!(!e||void 0===e.addViews)&&e.addViews,this.intro=!(!e||void 0===e.intro)&&e.intro,this.defaultResultView={showConfig:"true",editConfig:"true"},this},QueryPane.prototype.getAsDOM=function(){var e=this;if(this.intro&&this.container.appendChild(UTILS.getHeaderDom(this.intro)),this.showQuery){var t=function(){i.title="Click to Hide Query",o.setAttribute("class","fas fa fa-times-circle"),i.nextSibling?(a.container.insertBefore(s,i.nextSibling),a.input.snippet.value&&a.input.stylizeSnippet()):(a.container.appendChild(s),a.input.snippet.value&&a.input.stylizeSnippet())},r=function(){i.title="Click to View Query",o.setAttribute("class","fas fa fa-search terminus-query-view-icon"),a.container.removeChild(s)},i=document.createElement("span");i.setAttribute("class","pane-config-icons"),this.container.appendChild(i);var n=this.editQuery?"edit":"view";this.input=this.createInput(n);var s=this.input.getAsDOM(!0);document.createElement("span").setAttribute("class","query-pane-config");var o=document.createElement("i");i.appendChild(o);var a=this;i.addEventListener("click",(function(){e.showingQuery?r():t(),e.showingQuery=!e.showingQuery})),t(),"icon"==this.showQuery&&r()}this.resultDOM=document.createElement("span"),this.resultDOM.setAttribute("class","terminus-query-results"),0==this.views.length&&this.addView(TerminusClient.WOQL.table(),this.defaultResultView);for(var u=0;u<this.views.length;u++){var c=this.views[u].getAsDOM();c&&this.resultDOM.appendChild(c)}return this.container.appendChild(this.resultDOM),this.addViews&&this.container.appendChild(this.getAddViewControl()),this.container},QueryPane.prototype.createInput=function(e){var t=new TerminusCodeSnippet("woql",e);this.query&&t.setQuery(this.query);var r=this;return t.submit=function(e){r.submitQuery(e)},t},QueryPane.prototype.updateQuery=function(e){this.query=e,this.input&&this.input.setQuery(this.query)},QueryPane.prototype.updateResult=function(e){this.result=e,this.updateQuery(e.query),this.refreshViews()},QueryPane.prototype.addView=function(e,t){var r=new ResultPane(this.client,this,e).options(t);return this.result&&r.setResult(this.result),this.views.push(r),r},QueryPane.prototype.empty=function(){return void 0===this.query},QueryPane.prototype.clearMessages=function(){},QueryPane.prototype.showError=function(){},QueryPane.prototype.submitQuery=function(e){var t=this;this.clearMessages(),this.query=e,e.execute(this.client).then((function(r){var i=new TerminusClient.WOQLResult(r,e);t.result=i,t.refreshViews()}))},QueryPane.prototype.refreshViews=function(){for(var e=0;e<this.views.length;e++)this.views[e].updateResult(this.result)},QueryPane.prototype.getAddViewControl=function(){var vd=document.createElement("div");vd.setAttribute("class","terminus-add-view-selector");var self=this,WOQL=TerminusClient.WOQL,newView=function newView(val){self.selector.value="";var c=eval("WOQL."+val+"()"),nv=self.addView(c,self.defaultResultView);self.result&&nv.setResult(self.result);var vdom=nv.getAsDOM();vdom&&self.resultDOM.appendChild(vdom)},opts=[{value:"",label:"Add another view of results"},{value:"table",label:"Add Table View"},{value:"stream",label:"Add Stream View"},{value:"graph",label:"Add Graph View"},{value:"chooser",label:"Add Drop-down View"},{value:"map",label:"Add Map View"}],sel=HTMLFrameHelper.getSelectionControl("view",opts,!1,newView);return this.selector=sel,vd.appendChild(sel),vd},module.exports=QueryPane},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0);function s(){this.holder=document.createElement("div")}s.prototype.options=function(e){for(var t in e)this[t]=e[t];return this},s.prototype.render=function(e){e&&(this.woqltable=e),n.FrameHelper.removeChildren(this.holder);var t=this.getControlsDOM(),r=this.getTableDOM();return t&&this.holder.appendChild(t),this.holder.appendChild(r),this.holder},s.prototype.getControlsDOM=function(e){var t=document.createElement("span");if(this.woqltable.config.pager()){var r=this.getPaging(e);r&&t.appendChild(r)}return t},s.prototype.getTableDOM=function(){var e=this.woqltable.getColumnsToRender(),t=document.createElement("table");t.setAttribute("class","terminus-hover-table");var r=this.getTableHeader(e);t.appendChild(r);var i=this.getTableBody(e);return t.appendChild(i),t},s.prototype.getTableHeader=function(e){for(var t=document.createElement("thead"),r=document.createElement("tr"),i=0;i<e.length;i++){var n=this.getColumnHeader(e[i]);r.appendChild(n)}return t.appendChild(r),t},s.prototype.getColumnHeader=function(e){var t=document.createElement("th");t.setAttribute("class","terminus-table-header-full-css");var r=this.woqltable.getColumnHeaderContents(e);return t.appendChild(r),t},s.prototype.getTableBody=function(e){for(var t=document.createElement("tbody");row=this.woqltable.next();){var r=this.getHTMLRow(row,e);r&&t.appendChild(r)}return t},s.prototype.getHTMLRow=function(e,t){for(var r=document.createElement("tr"),i=0;i<t.length;i++){var n=this.getCell(t[i],e);r.appendChild(n)}if(this.woqltable.hasRowClick(e)){var s=this.woqltable.getRowClick(e);r.addEventListener("click",(function(){s(e)})),r.addEventListener("mouseover",(function(){this.style.cursor="pointer"}))}if(this.woqltable.hasRowHover(e)){s=this.woqltable.getRowHover(e);r.addEventListener("mouseover",(function(){s(e)}))}return r},s.prototype.getCell=function(e,t){var r=document.createElement("td");if(this.woqltable.hasCellClick(t,e)){var i=this.woqltable.getCellClick(t,e);r.addEventListener("click",(function(){i(t)})),r.addEventListener("mouseover",(function(){this.style.cursor="pointer"}))}if(this.woqltable.hasCellHover(t,e)){i=this.woqltable.getCellHover(t,e);tr.addEventListener("mouseover",(function(){i(t)}))}var n=this.getCellData(e,t);return n&&r.appendChild(n),r},s.prototype.getCellData=function(e,t){var r=this.woqltable.getRenderer(e,t);if(r&&"function"==typeof r)return r(t[e],e,t);if(r&&"object"==i(r))return this.woqltable.renderValue(r,t[e],e,t);var n=t[e];return n&&n["@value"]&&(n=n["@value"]),document.createTextNode(n)},s.prototype.getPaging=function(){if(this.woqltable.result.query.isPaged()){var e=document.createElement("div");if(e.setAttribute("class","table-page-size"),this.woqltable.config.pagesize()&&e.appendChild(this.getPageSize()),this.woqltable.canChangePage()){var t=this.woqltable.result.query.getPage();t>2&&e.appendChild(this.getFirst()),t>1&&e.appendChild(this.getPrev(t)),this.woqltable.config.page()&&e.appendChild(this.getPageNumber(t)),e.appendChild(this.getNext(this.woqltable.result))}return e}},s.prototype.getPageSize=function(){var e=document.createElement("span");if(e.setAttribute("class","woql-table-pagesize"),clabel=document.createElement("span"),clabel.appendChild(document.createTextNode("Page Size")),e.appendChild(clabel),this.woqltable.config.change_pagesize){var t=document.createElement("input");t.setAttribute("size",6);var r=this;t.value=this.woqltable.getPageSize(),t.addEventListener("blur",(function(){var e=!!this.value&&parseInt(this.value);r.woqltable.setPageSize(e)})),e.appendChild(t)}else e.appendChild(document.createTextNode(this.woqltable.getPageSize()));return e},s.prototype.getPageNumber=function(){var e=document.createElement("input");e.setAttribute("size",4),e.value=this.woqltable.result.query.getPage();var t=this;return e.addEventListener("blur",(function(){var e=!!this.value&&parseInt(this.value);t.woqltable.setPage(e)})),e},s.prototype.getNext=function(e){var t=document.createElement("button"),r=this;return t.appendChild(document.createTextNode("next")),this.woqltable.canAdvancePage(e)?t.addEventListener("click",(function(){r.woqltable.nextPage()})):t.setAttribute("disabled","disabled"),t},s.prototype.getPrev=function(e){var t=document.createElement("button");t.appendChild(document.createTextNode("previous"));var r=this;return this.woqltable.canRetreatPage(e)?t.addEventListener("click",(function(){r.woqltable.previousPage()})):t.setAttribute("disabled","disabled"),t},s.prototype.getFirst=function(e){var t=document.createElement("button");t.appendChild(document.createTextNode("first"));var r=this;return!this.woqltable.canRetreatPage(e)||this.woqltable.getPage()<=2?t.setAttribute("disabled","disabled"):t.addEventListener("click",(function(){r.woqltable.firstPage()})),t},e.exports=s},function(e,t,r){var i=r(0),n=r(106);function s(){this.holder=document.createElement("div")}s.prototype.setResult=function(e){this.result=e},s.prototype.render=function(e){this.graph=e,i.FrameHelper.removeChildren(this.holder);var t=this.getGraphDOM(this.result);return this.holder.appendChild(t),this.holder},s.prototype.getGraphDOM=function(){this.gviz=new n(this.graph.config);var e=this.gviz.getAsDOM(),t=this.graph.config.height()?this.graph.config.height():800,r=this.graph.config.width()?this.graph.config.width():800;return e.setAttribute("style","border: 1px solid #aaa; width: "+r+"px; height: "+t+"px; "+this.graph.config.width()+"px"),this.gviz.setData(this.graph),this.gviz.initDOM(e),e},e.exports=s},function(e,t,r){var i=r(0);function n(){this.holder=document.createElement("div")}n.prototype.options=function(e){for(var t in e)this[t]=e[t];return this},n.prototype.render=function(e){return e&&(this.stream=e),i.FrameHelper.removeChildren(this.holder),this.holder},e.exports=n},function(e,t){function r(){}r.prototype.options=function(e){return this.options=e,this},r.prototype.render=function(e){if(e&&(this.chooser=e),0==this.chooser.config.show_empty()&&this.chooser.count()<1)return!1;var t=document.createElement("span");t.setAttribute("class","woql-chooser");var r=document.createElement("select");r.setAttribute("class"," woql-chooser");var i=this;r.addEventListener("change",(function(){i.chooser.set(this.value)}));var n=[];for(this.chooser.config.show_empty()&&n.push(this.getEmptyOption());choice=this.chooser.next();){var s=this.createOptionFromChoice(choice);n.push(s)}for(var o=0;o<n.length;o++)r.appendChild(n[o]);return t.appendChild(r),t},r.prototype.getEmptyOption=function(){var e={id:"",label:this.chooser.config.show_empty()};return this.createOptionFromChoice(e)},r.prototype.createOptionFromChoice=function(e){var t=document.createElement("option");return t.setAttribute("class","terminus-woql-chooser-choice"),t.value=e.id,e.selected&&(t.selected=!0),"string"==typeof e.label?t.appendChild(document.createTextNode(e.label)):e.label&&t.appendChild(e.label),e.title&&t.setAttribute("title",e.title),t},e.exports=r},function(module,exports,__webpack_require__){var TerminusClient=__webpack_require__(0),TerminusCodeSnippet=__webpack_require__(4),UTILS=__webpack_require__(2),HTMLFrameHelper=__webpack_require__(1),TerminusFrame=__webpack_require__(9),Datatypes=__webpack_require__(16),SimpleFrameViewer=__webpack_require__(69);function DocumentPane(e){this.client=e,this.container=document.createElement("span"),this.container.setAttribute("class","terminus-document-cont")}DocumentPane.prototype.loadDocument=function(e,t){return this.docid=e,this.clsid=!1,this.view=t,this.frame=new TerminusFrame(this.client).options(this.view),this.frame.owner=this,this.frame.setDatatypes(Datatypes.initialiseDataRenderers),this.frame.loadDocument(e)},DocumentPane.prototype.loadClass=function(e,t){var r=this;return this.clsid=e,this.docid=!1,this.view=t,this.frame=new TerminusFrame(this.client).options(this.view),this.frame.owner=this,this.frame.setDatatypes(Datatypes.initialiseDataRenderers),this.frame.loadDocumentSchema(e).then((function(){return r.frame.document.fillFromSchema("_:")}))},DocumentPane.prototype.setClassLoader=function(e){return this.classLoader=e,this.queryPane&&this.queryPane.appendChild(this.classLoader),this},DocumentPane.prototype.options=function(e){return this.showQuery=!e||void 0===e.showQuery||e.showQuery,this.showConfig=!e||void 0===e.showConfig||e.showConfig,this.editConfig=!e||void 0===e.editConfig||e.editConfig,this.intro=!(!e||void 0===e.intro)&&e.intro,this.defaultResultView={showConfig:"true",editConfig:"true"},this.documentLoader=!(!e||void 0===e.loadDocument)&&e.loadDocument,this},DocumentPane.prototype.getQueryPane=function(){var e=document.createElement("div");return e.setAttribute("class","terminus-document-query"),this.documentLoader&&e.appendChild(this.documentLoader),this.classLoader&&e.appendChild(this.classLoader),e},DocumentPane.prototype.getAsDOM=function(){var e=this;if(this.intro&&this.container.appendChild(UTILS.getHeaderDom(this.intro)),this.showQuery&&(this.documentLoader||this.classLoader)){var t=function(){s.title="Click to Hide Query",o.setAttribute("class","fas fa fa-times-circle"),i.nextSibling?a.container.insertBefore(n,i.nextSibling):a.container.appendChild(n)},r=function(){s.title="Click to View Query",o.setAttribute("class","fas fa fa-search"),a.container.removeChild(n)},i=document.createElement("span");i.setAttribute("class","pane-config-icons"),this.container.appendChild(i);var n=this.getQueryPane(),s=document.createElement("span");s.setAttribute("class","document-pane-config");var o=document.createElement("i");s.appendChild(o),i.appendChild(s);var a=this;s.addEventListener("click",(function(){e.showingQuery?r():t(),e.showingQuery=!e.showingQuery})),t(),"icon"==this.showQuery&&r(),this.queryPane=n}if(this.showConfig){var u=function(){p.title="Click to Hide View Configuration",h.setAttribute("class","fas fa fa-times-circle"),i.nextSibling?a.container.insertBefore(d,i.nextSibling):a.container.appendChild(d)},c=function(){p.title="Click to View Configuration",h.setAttribute("class","fas fa fa-vial"),a.container.removeChild(d)};this.showingConfig="icon"!=this.showConfig;var l=this.editConfig?"edit":"view";this.input=this.createInput(l);var d=this.input.getAsDOM(),p=document.createElement("span");p.addEventListener("mouseover",(function(){this.style.cursor="pointer"})),p.setAttribute("class","result-pane-config");var h=document.createElement("i");p.appendChild(h),i.appendChild(p);a=this;p.addEventListener("click",(function(){e.showingConfig?c():u(),e.showingConfig=!e.showingConfig})),u(),"icon"==this.showConfig&&c()}return this.resultDOM=document.createElement("span"),this.resultDOM.setAttribute("class","terminus-document-results"),this.container.appendChild(this.resultDOM),this.renderResult(),this.container},DocumentPane.prototype.renderResult=function(){if(TerminusClient.FrameHelper.removeChildren(this.resultDOM),this.frame.render){var e=this.frame.render();e&&this.resultDOM.appendChild(e)}},DocumentPane.prototype.loadRenderer=function(rendname,frame,args,termframe){var evalstr="new "+rendname+"(";args&&(evalstr+=JSON.stringify(args)),evalstr+=");";try{var nr=eval(evalstr);return nr.terminus=termframe,nr}catch(e){return console.log("Failed to load "+rendname+e.toString()),!1}},DocumentPane.prototype.createInput=function(e){var t=new TerminusCodeSnippet("rule",e);this.view&&t.setQuery(this.view);var r=this;return t.submit=function(e){r.updateView(e)},t},DocumentPane.prototype.updateView=function(e){this.view=e,this.frame.options(this.view),this.input&&this.input.setQuery(this.view),this.frame.applyRulesToDocument(this.frame.document,this.frame.config),this.frame.renderer=this.frame.document,this.renderResult()},DocumentPane.prototype.updateResult=function(e){this.result=e,this.updateQuery(e.query),this.refreshViews()},DocumentPane.prototype.empty=function(){return void 0===this.view},DocumentPane.prototype.clearMessages=function(){},DocumentPane.prototype.showError=function(){},DocumentPane.prototype.submitQuery=function(e){return this.clearMessages(),tdv.owner=this,tdv.setDatatypes(Datatypes.initialiseDataRenderers),tdv.loadDocument(id).then((function(){var e=tdv.render();e&&holder.appendChild(e)})),holder},module.exports=DocumentPane},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(1);function s(){}s.prototype.getScope=function(e){return e.isProperty()?"property":e.isObject()?"object":e.isData()?"data":void 0},s.prototype.getDatatypeViewer=function(e,t){var r=e.display_options.dataviewer;if(!r){if(e.isChoice())var i="oneOf";else if(e.isDocument())i="document";else i=e.getType();if(t&&"edit"==t)var n=this.terminus.datatypes.getEditor(i);else n=this.terminus.datatypes.getRenderer(i);r=n.name}if(e.display_options.args)var s=e.display_options.args;else s=!(!n||!n.args)&&n.args;return this.terminus.datatypes.createRenderer(r,s)},s.prototype.render=function(e){var t=this.getScope(e);if(e.display_options.header_features)var r=this.getFeaturesDOM(e.display_options.header_features,e.display_options.feature_renderers,t,e,e.display_options.mode);else r=!1;if(e.display_options.features)var i=this.getFeaturesDOM(e.display_options.features,e.display_options.feature_renderers,t,e,e.display_options.mode);else i=!1;var s="object"==t||"property"==t?"page":"line",o=n.getFrameDOM(t,e,s,r,i);return!!o&&(this.framedom&&this.framedom.replaceWith(o),this.framedom=o,this.framedom)},s.prototype.getFeaturesDOM=function(e,t,r,s,o){var a=document.createElement("span");a.setAttribute("class",function e(t){for(var r="",n=0;n<t.length;n++)"object"==i(t[n])?r+=e(t[n])+"-":r+=t[n]+"-";return r.substring(0,r.length-1)}(e));for(var u=0;u<e.length;u++){if("object"==i(e[u]))a.appendChild(this.getFeaturesDOM(e[u],t,r,s));else if(t&&t[e[u]])(l=t[e[u]](s,e[u]))&&a.appendChild(l);else if("value"==e[u]&&"data"==r){var c=this.getDatatypeViewer(s,o);if(c)var l=c.renderFrame(s,this);else l=document.createTextNode(s.get());l&&a.appendChild(l)}else if("value"==e[u]){if("object"==r)var d=s.renderProperties();else d=s.renderValues();for(var p=0;p<d.length;p++)a.appendChild(d[p])}else{(l=n.getFeatureDOM(e[u],r,s))&&a.appendChild(l)}}return a},e.exports=s},function(e,t,r){var i=r(71),n=r(8);e.exports={TerminusUI:i,RenderingMap:n}},function(e,t,r){var i=r(72),n=r(29),s=r(56),o=r(107),a=r(108),u=r(110),c=r(115),l=r(116),d=r(5),p=r(2),h=r(8),m=r(0);function f(e){this.client=new m.WOQLClient,this.controls=[],this.setOptions(e)}f.prototype.connect=function(e){var t=this;this.client.connectionConfig.server=!1;var r=!(!e||!e.key)&&e.key;return this.showBusy("Connecting to server at "+e.server),this.client.connect(e.server,r).then((function(r){return t.clearBusy(),e&&e.db&&t.getDBRecord(e.db)?(t.connectToDB(e.db),e.document&&t.showView("get_document")?r=t.showDocument(e.document):e.schema&&t.showView("get_schema")?r=t.showSchemaPage(e.schema):e.query&&t.showView("woql_select")?t.showQueryPage(e.query):e.explorer&&t.showView("api_explorer")?t.showExplorer(e.explorer):t.showDBMainPage()):t.showServerMainPage(),t.redraw(),r})).catch((function(e){throw t.clearBusy(),t.showError(e),e}))},f.prototype.createDatabase=function(e){var t=this;if(!e.id||!e.title)return Promise.reject(new Error(t.getBadArguments("createDatabase","ID and title are mandatory fields")));var r=e.id,i=this.client.connectionConfig.server;t.showBusy("Creating Database "+e.title+" with id "+r);var n=this.generateNewDatabaseDocument(e);return this.client.createDatabase(r,n).then((function(n){if(e.schema){t.showBusy("Fetching imported schema from "+e.schema);var s=e.key?{"terminus:user_key":e.key}:{};return s["terminus:encoding"]="terminus:turtle",t.client.getSchema(e.schema,s).then((function(e){t.showBusy("Updating database with new schema"),t.client.connectionConfig.server=i,t.client.connectionConfig.dbid=r;return t.client.updateSchema(!1,e,{"terminus:encoding":"terminus:turtle"})})).then((function(e){return t.clearBusy(),t.redraw(),e}))}return t.clearBusy(),n})).then((function(e){return t.refreshDBList().then((function(e){if(!(crec=t.client.connection.getDBRecord(r)))return Promise.reject(new Error(t.getCrashString("createDatabase","Failed to retrieve record of created database "+r)));t.client.connectionConfig.dbid=r,t.showDBMainPage(),t.showMessage("Successfully Created Database "+r,"success")}))})).catch((function(e){t.clearBusy(),t.showError(e)}))},f.prototype.deleteDatabase=function(e){var t=this,r=this.client.connection.getDBRecord(),i=e||this.db(),n=r&&r["rdfs:label"]&&r["rdfs:label"]["@value"]?r["rdfs:label"]["@value"]+" (id: "+i+")":i;return this.showBusy("Deleting database "+n),this.client.deleteDatabase(e).then((function(r){return t.clearBusy(),t.client.connectionConfig.dbid=!1,t.removeDB(e),t.showServerMainPage(),t.showMessage("Successfully Deleted Database "+n,"success"),t.refreshDBList(),r})).catch((function(e){t.clearBusy(),t.showError(e)}))},f.prototype.generateNewDatabaseDocument=function(e){var t={"@context":{rdfs:"http://www.w3.org/2000/01/rdf-schema#",terminus:"http://terminusdb.com/schema/terminus#"},"@type":"terminus:Database"};return e.title&&(t["rdfs:label"]={"@language":"en","@value":e.title}),e.description&&(t["rdfs:comment"]={"@language":"en","@value":e.description}),t["terminus:allow_origin"]={"@type":"xsd:string","@value":"*"},t},f.prototype.getBadArguments=function(e,t){return"Bad arguments to "+e+": "+t},f.prototype.getCrashString=function(e,t){return"Results from "+e+" indicate the possibility of a system failure "+t},f.prototype.load=function(e,t){var r={};return e&&-1!=e.indexOf("/document/")?(e=e.substring(0,e.indexOf("/document/")),r.document=e.substring(e.indexOf("/document/")+10)):e&&-1!=e.indexOf("/schema")?(e=e.substring(0,e.indexOf("/schema")),r.schema={}):e&&-1!=e.indexOf("/woql")&&(e=e.substring(0,e.indexOf("/query")),r.query=e.substring(e.indexOf("/query")+7)),r.server=e,t&&(r.key=t),this.connect(r)},f.prototype.getConnectionEndpoint=function(e){return e&&-1!=e.lastIndexOf("/schema")?e.substring(0,e.lastIndexOf("/schema")):e&&-1!=e.lastIndexOf("/document")?e.substring(0,e.lastIndexOf("/document")):e&&-1!=e.lastIndexOf("/frame")?e.substring(0,e.lastIndexOf("/frame")):e&&-1!=e.lastIndexOf("/woql")?e.substring(0,e.lastIndexOf("/woql")):e},f.prototype.server=function(){return this.client.connectionConfig.server},f.prototype.db=function(){return this.client.connectionConfig.dbid},f.prototype.clearServer=function(){this.client.connectionConfig.server=!1},f.prototype.connectToDB=function(e){this.client.connectionConfig.dbid=e,m.FrameHelper.standard_urls.doc=this.client.connectionConfig.dbURL()+"/document/",m.FrameHelper.standard_urls.scm=this.client.connectionConfig.dbURL()+"/schema#"},f.prototype.clearDB=function(){this.client.connectionConfig.dbid=!1},f.prototype.removeDB=function(e,t){this.client.connection.removeDB(e,t)},f.prototype.getDBRecord=function(e,t){return this.client.connection.getDBRecord(e,t)},f.prototype.refreshDBList=function(){return this.client.connect()},f.prototype.showServerMainPage=function(){this.viewer=new c.TerminusServerViewer(this),this.redrawMainPage()},f.prototype.showLoadURLPage=function(e){this.viewer=new l(this,e),this.redrawMainPage()},f.prototype.showDBMainPage=function(){this.viewer=new s.TerminusDBViewer(this),this.redraw()},f.prototype.showCreateDBPage=function(){this.viewer=new s.TerminusDBCreator(this),this.redrawMainPage()},f.prototype.showSchemaPage=function(e){this.viewer=new u(this),this.redrawMainPage()},f.prototype.showQueryPage=function(e){this.viewer=new a(this,e,this.options),this.redrawMainPage()},f.prototype.showDocumentPage=function(e){var t={page_config:"home"};this.viewer=new n(this,"view",t),this.redrawMainPage()},f.prototype.showDocument=function(e){this.viewer=new n(this,"view",this.getDocViewerOptions());var t=this.viewer.loadDocument(e);return this.redrawMainPage(),t},f.prototype.showCreateDocument=function(e){this.viewer=new n(this,"create",this.getDocCreatorOptions());var t=this.viewer.loadCreateDocument(e);return this.redrawMainPage(),t},f.prototype.redrawMainPage=function(){if(m.FrameHelper.removeChildren(this.mainDOM),this.viewer&&this.mainDOM){var e=this.viewer.getAsDOM();this.mainDOM.appendChild(e)}},f.prototype.showResult=function(e){this.showMessage(e,"success")},f.prototype.showError=function(e){this.showMessage(e,"error")},f.prototype.clearMessages=function(e){this.messages&&m.FrameHelper.removeChildren(this.messages)},f.prototype.clearMainPage=function(){this.main&&m.FrameHelper.removeChildren(this.main)},f.prototype.setMessageDOM=function(e){this.messages=e},f.prototype.setbuttonControls=function(e){this.buttons=e},f.prototype.setControllerDOM=function(e){this.controller=e},f.prototype.setExplorerDOM=function(e){this.explorer=e},f.prototype.setPluginsDOM=function(e){this.plugins=e},f.prototype.setViewerDOM=function(e){this.mainDOM=e},f.prototype.draw=function(e,t){e&&e.viewer&&this.setViewerDOM(e.viewer),e&&e.buttons&&this.setbuttonControls(e.buttons),e&&e.messages&&this.setMessageDOM(e.messages),e&&e.controller&&this.setControllerDOM(e.controller),e&&e.explorer&&this.setExplorerDOM(e.explorer),e&&e.plugins&&this.setPluginsDOM(e.plugins),this.plugins&&this.drawPlugins(),this.buttons&&this.toggleControl();var r=this;if(t&&t.server){if(void 0===this.client.connection.connection[t.server])return this.connect(t).catch((function(e){r.showLoadURLPage()}))}else this.showLoadURLPage()},f.prototype.redraw=function(e){this.clearMessages(),this.redrawControls(),this.explorer&&m.FrameHelper.removeChildren(this.explorer),this.viewer&&this.redrawMainPage(),e&&this.showMessage(e)},f.prototype.toggleDashboardWidget=function(e){m.FrameHelper.removeChildren(this.controller),m.FrameHelper.removeChildren(this.explorer),p.removeSelectedNavClass("terminus-dashboard-selected"),e.classList.add("terminus-dashboard-selected")},f.prototype.toggleControl=function(){var e=this;this.buttons.client.addEventListener("click",(function(){e.toggleDashboardWidget(this),e.drawControls(),e.showServerMainPage()})),this.buttons.explorer.addEventListener("click",(function(){e.toggleDashboardWidget(this),e.drawExplorer()}))},f.prototype.redrawControls=function(){this.controller&&(m.FrameHelper.removeChildren(this.controller),this.drawControls())},f.prototype.drawControls=function(){this.controls=[],this.loadControls();for(var e=0;e<this.controls.length;e++){var t=this.controls[e];t&&(nd=t.getAsDOM())&&this.controller.appendChild(nd)}},f.prototype.drawExplorer=function(){if(this.explorer&&this.showControl("api_explorer")){var e=new i(this);ae=e.getAsDOM(),this.explorer.appendChild(ae),this.explorer.style.display="block"}},f.prototype.loadControls=function(){var e;this.showControl("server")&&((e=new c.TerminusServerController(this))&&this.controls.push(e),this.db()&&this.showControl("db")&&(e=new s.TerminusDBController(this))&&this.controls.push(e))},f.prototype.showControl=function(e){return-1!=this.show_controls.indexOf(e)&&(!!this.pseudoCapability(e)||!!this.client.connection.capabilitiesPermit(e))},f.prototype.showView=function(e){return-1!=this.show_views.indexOf(e)&&(!!this.pseudoCapability(e)||!!this.client.connection.capabilitiesPermit(e))},f.prototype.clearBusy=function(e){this.clearMessages(),this.viewer&&"function"==typeof this.viewer.busy&&this.viewer.busy(!1)},f.prototype.getBusyLoader=function(e){var t=document.createElement("div"),r=document.createElement("div");r.setAttribute("class","term-progress-bar-container"),t.appendChild(r);var i=document.createElement("div");i.setAttribute("class","term-progress-bar term-stripes animated reverse slower"),r.appendChild(i);var n=document.createElement("span");n.setAttribute("class","term-progress-bar-inner"),i.appendChild(n),e.appendChild(t)},f.prototype.showMessage=function(e,t){if(this.messages){m.FrameHelper.removeChildren(this.messages);var r=document.createElement("div");switch(t){case"busy":var i=document.createElement("div");i.setAttribute("class","terminus-busy-msg"),i.appendChild(document.createTextNode(e)),r.appendChild(i),this.getBusyLoader(r);break;case"success":r.setAttribute("class","terminus-show-msg-success"),r.appendChild(document.createTextNode(e));break;case"error":r.setAttribute("class","terminus-show-msg-error"),r.appendChild(document.createTextNode(e))}this.messages.appendChild(r)}},f.prototype.showViolations=function(e,t){var r=new o(e,this);if(this.messages){var i="schema"==t?" in Schema":" in Document";m.FrameHelper.removeChildren(this.messages),this.messages.appendChild(r.getAsDOM(i))}},f.prototype.showBusy=function(e){this.showMessage(e,"busy"),this.viewer&&"function"==typeof this.viewer.busy&&this.viewer.busy(e)},f.prototype.pseudoCapability=function(e){return-1!=["server","db","change-server","api_explorer","import_schema","add_new_library"].indexOf(e)},f.prototype.setOptions=function(e){this.show_controls=e&&e.controls?e.controls:["server","db","change-server","schema_format","import_schema","class_frame","create_database","create_document","get_document","update_schema","get_schema","woql_select"],this.show_views=e&&e.views?e.views:this.show_controls,e.document&&(this.document_options=e.document),e.schema&&(this.schema_options=e.schema),this.piman=new d;var t=this;this.piman.init(e.plugins,(function(){for(var e=["gmaps","quill","select2"],r=0;r<e.length;r++)t.piman.pluginAvailable(e[r])&&h.addPlugin(e[r]);t.redraw()})),e.css&&this.piman&&this.piman.loadPageCSS(e.css),this.loadControls()},f.prototype.pluginAvailable=function(e){return this.piman.pluginAvailable(e)},f.prototype.drawPlugins=function(){if(!this.piman)return console.log(new Error("No plugin manager initialised in UI object")),!1;this.plugins.appendChild(this.piman.getAsDOM(this))},f.prototype.getDocViewerOptions=function(){return!(!this.document_options||!this.document_options.view)&&this.document_options.view},f.prototype.getDocCreatorOptions=function(){return!(!this.document_options||!this.document_options.view)&&this.document_options.view},f.prototype.getClassFrameOptions=function(){return this.viewdoc_options},e.exports=f},function(e,t,r){
/**
 * @file Javascript Api explorer tool
 * @author Kitty Jose
 * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more
 *
 * @summary Displays a demo and description of api calls from WOQLCLient and what happens under the hood of api calls
 */
var i=r(5),n=r(2),s=r(0),o={mainNav:{connect:{navText:"Connect API",action:"connect",icon:"link",defaultSelected:!0},database:{navText:"Database API",action:"create",icon:"database"},schema:{navText:"Schema API",action:"schema",icon:"cog"},document:{navText:"Document API",action:"document",icon:"file"},query:{navText:"Query API",action:"query",icon:"search"}},subNav:{database:{createDatabase:{navText:"Create database",action:"create",icon:"plus",defaultSelected:!0},deleteDatabase:{navText:"Delete database",action:"delete",icon:"trash-alt"}},schema:{getSchema:{navText:"View Schema",action:"getSchema",icon:"eye",defaultSelected:!0},updateSchema:{navText:"Update Schema",action:"updateSchema",icon:"arrow-up"},getClassFrames:{navText:"Get Class Frames",action:"getClassFrames",icon:"share-alt"}},document:{viewDocument:{navText:"View Document",action:"viewDocument",icon:"eye",defaultSelected:!0},createDocument:{navText:"Create Document",action:"createDocument",icon:"plus"},updateDocument:{navText:"Update Document",action:"updateDocument",icon:"arrow-up"},deleteDocument:{navText:"Delete Document",action:"deleteDocument",icon:"trash-alt"}},query:{select:{navText:"Select",action:"select",icon:"mouse-pointer",defaultSelected:!0},update:{navText:"Update",action:"update",icon:"arrow-up"}}}};function a(e){this.ui=e,this.viewer=e.mainDOM,this.client=new s.WOQLClient,this.client.use_fetch=!0,this.client.return_full_response=!0,this.pman=new i}a.prototype.getAsDOM=function(){var e=document.createElement("div");return e.setAttribute("class","terminus-db-controller"),this.ui&&(this.getApiNav(e,this.viewer),this.getApiExplorerDom("connect",this.viewer)),e},a.prototype.setSelectedNavMenu=function(e){n.removeSelectedNavClass("terminus-selected"),e.classList.add("terminus-selected")},a.prototype.navOnSelect=function(e,t,r){n.removeSelectedNavClass("terminus-selected"),t.classList.add("terminus-selected"),this.getApiExplorerDom(e,r)},a.prototype.createNavs=function(e,t,r){var i=document.createElement("a");i.setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer"),e.defaultSelected&&i.classList.add("terminus-selected");var n=this;i.addEventListener("click",(function(){n.navOnSelect(e.action,this,t)}));var s=document.createElement("i");s.setAttribute("class","terminus-menu-icon fa fa-"+e.icon),i.appendChild(s);var o=document.createTextNode(e.navText);i.appendChild(o),r.appendChild(i)},a.prototype.getApiNav=function(e,t){var r=document.createElement("div");e.appendChild(r);var i=document.createElement("ul");for(var n in i.setAttribute("class","terminus-ul"),r.appendChild(i),o.mainNav)o.mainNav.hasOwnProperty(n)&&this.createNavs(o.mainNav[n],t,i);return e},a.prototype.getApiExplorerDom=function(e,t){s.FrameHelper.removeChildren(t);var r=document.createElement("div");t.appendChild(r),(a=document.createElement("div")).setAttribute("class","container-fluid"),r.appendChild(a);var i=document.createElement("div");i.setAttribute("class","row-fluid"),a.appendChild(i);var n=document.createElement("div");n.setAttribute("class","terminus-module-body"),i.appendChild(n);var o=document.createElement("div");o.setAttribute("class","terminus-module-body terminus-module-body-white-bg terminus-module-body-width"),n.appendChild(o);var a=document.createElement("div");switch(e){case"connect":var u=this.getConnectExplorer(a);o.appendChild(u);break;case"create":u=this.getDatabaseExplorer(a);o.appendChild(u);break;case"schema":u=this.getSchemaApi(a);o.appendChild(u);break;case"document":u=this.getDocumentApi(a);o.appendChild(u);break;case"query":u=this.getQueryApi(a);o.appendChild(u)}return r},a.prototype.changeSubApiDom=function(e,t,r,i){switch(s.FrameHelper.removeChildren(i),e){case"database":var n=this.getDatabaseDom(t,i);break;case"schema":case"document":n=this.getShowApiDom(t,i);break;case"query":n=this.getQueryApiDom(t,i);break;default:console.log("Invalid Api Config")}r.appendChild(n)},a.prototype.subNavOnSelect=function(e,t,r,i,s){n.setSelectedSubMenu(r),this.changeSubApiDom(e,t.action,i,s)},a.prototype.createSubNavs=function(e,t,r,i,n){if("getClassFrames"!=t.action){var s=document.createElement("a");s.setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer"),t.defaultSelected&&s.classList.add("terminus-submenu-selected");var o=this;s.addEventListener("click",(function(){o.subNavOnSelect(e,t,this,r,i)}));var a=document.createElement("i");a.setAttribute("class","terminus-menu-icon fa fa-"+t.icon),s.appendChild(a);var u=document.createTextNode(t.navText);s.appendChild(u),n.appendChild(s)}},a.prototype.getConnectExplorer=function(e){var t=document.createElement("BR");e.appendChild(t);var r=this.getSignature("connect");e.appendChild(r),e.appendChild(n.getHeaderDom("Parameters"));t=document.createElement("BR");return e.appendChild(t),this.getForm("",e,!0,"connect","URL : server_url"),e},a.prototype.getDatabaseExplorer=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var i in r.setAttribute("class","terminus-ul-horizontal"),o.subNav.database)o.subNav.database.hasOwnProperty(i)&&this.createSubNavs("database",o.subNav.database[i],e,t,r);e.appendChild(r);var n=this.getDatabaseDom(o.subNav.database.createDatabase.action,t);return e.appendChild(n),e},a.prototype.getSchemaApi=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var i in r.setAttribute("class","terminus-ul-horizontal"),o.subNav.schema)o.subNav.schema.hasOwnProperty(i)&&this.createSubNavs("schema",o.subNav.schema[i],e,t,r);e.appendChild(r);var n=this.getShowApiDom(o.subNav.schema.getSchema.action,t);return e.appendChild(n),e},a.prototype.getDocumentApi=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var i in r.setAttribute("class","terminus-ul-horizontal"),o.subNav.document)o.subNav.document.hasOwnProperty(i)&&this.createSubNavs("document",o.subNav.document[i],e,t,r);e.appendChild(r);var n=this.getShowApiDom(o.subNav.document.viewDocument.action,t);return e.appendChild(n),e},a.prototype.getQueryApi=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var i in r.setAttribute("class","terminus-ul-horizontal"),o.subNav.query)o.subNav.query.hasOwnProperty(i)&&this.createSubNavs("query",o.subNav.query[i],e,t,r);e.appendChild(r);var n=this.getQueryApiDom(o.subNav.query.select.action,t);return e.appendChild(n),e},a.prototype.getDatabaseDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var i=this.getSignature(e);t.appendChild(i),t.appendChild(n.getHeaderDom("Parameters"));r=document.createElement("BR");return t.appendChild(r),"create"==e?this.getForm(null,t,!1,e,"URL : server/database_id"):this.getForm(null,t,!0,e,"URL : server/database_id"),t},a.prototype.getServerForm=function(){var e=document.createElement("form");e.setAttribute("class","terminus-form-horizontal row-fluid"),(r=document.createElement("div")).setAttribute("class","terminus-control-group"),e.appendChild(r);var t=document.createElement("label");t.setAttribute("class","terminus-control-label"),t.setAttribute("for","basicinput"),t.innerHTML="Url:",r.appendChild(t),(o=document.createElement("div")).setAttribute("class","terminus-controls"),r.appendChild(o);var r,i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("id","basicinput"),i.setAttribute("class","terminus-input-text"),i.setAttribute("placeholder","URL : server_url"),this.val&&(i.value=this.val),o.appendChild(i),(r=document.createElement("div")).setAttribute("class","terminus-control-group"),e.appendChild(r);var o,a=document.createElement("label");a.setAttribute("class","terminus-control-label"),a.setAttribute("for","basicinput"),a.innerHTML="Key:",r.appendChild(a),(o=document.createElement("div")).setAttribute("class","terminus-controls"),r.appendChild(o);var u=document.createElement("input");u.setAttribute("type","text"),u.setAttribute("id","basicinput"),u.setAttribute("class","span8 terminus-input-text"),u.setAttribute("placeholder","Key : key"),this.val&&(u.value=this.val),o.appendChild(u);var c=document.createElement("button");c.setAttribute("class","terminus-btn terminus-send-api-btn"),c.setAttribute("type","button"),c.innerHTML="Send Api";var l=document.createElement("div");e.appendChild(c),e.appendChild(l);var d=this;return c.addEventListener("click",(function(){var e=function(){var e={};return e.url=i.value,e.key=u.value,e}();d.client.connect(e.url,e.key).then((function(e){s.FrameHelper.removeChildren(l);n.showHttpResult(e,"connect",l,d.ui)}))})),e},a.prototype.getDatabaseExplorer=function(e){var t=document.createElement("div"),r=document.createElement("ul");for(var i in r.setAttribute("class","terminus-ul-horizontal"),o.subNav.database)o.subNav.database.hasOwnProperty(i)&&this.createSubNavs("database",o.subNav.database[i],e,t,r);e.appendChild(r);var n=this.getDatabaseDom(o.subNav.database.createDatabase.action,t);return e.appendChild(n),e},a.prototype.getShowApiDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var i=this.getSignature(e);t.appendChild(i),t.appendChild(n.getHeaderDom("Parameters"));r=document.createElement("BR");switch(t.appendChild(r),e){case"getSchema":this.getForm("schema",t,!0,e,"URL : server/database_id");break;case"getClassFrames":this.getForm("getClassFrames",t,!0,e,"URL : server/database_id");break;case"updateSchema":this.getForm("schema",t,!1,e,"URL : server/database_id");break;case"viewDocument":case"deleteDocument":this.getForm("document",t,!0,e,"URL : server/database_id/document/document_id");break;case"createDocument":case"updateDocument":this.getForm("document",t,!1,e,"URL : server/database_id/document/document_id");break;default:console.log("Invalid Api Call on form")}return t},a.prototype.getQueryApiDom=function(e,t){var r=document.createElement("BR");t.appendChild(r);var i=this.getSignature(e);t.appendChild(i),t.appendChild(n.getHeaderDom("Parameters"));r=document.createElement("BR");return t.appendChild(r),this.getForm("query",t,!1,e,"URL : server/database_id"),t},a.prototype.getForm=function(e,t,r,i,s){var o=document.createElement("form");o.setAttribute("class","terminus-form-horizontal row-fluid"),(h=document.createElement("div")).setAttribute("class","terminus-control-group"),o.appendChild(h);var a=document.createElement("label");a.setAttribute("class","terminus-control-label"),a.setAttribute("for","basicinput"),a.innerHTML="Url:",h.appendChild(a),(m=document.createElement("div")).setAttribute("class","terminus-controls"),h.appendChild(m);var u=document.createElement("input");switch(u.setAttribute("type","text"),u.setAttribute("id","basicinput"),u.setAttribute("class","span8 terminus-input-text"),u.setAttribute("placeholder",s),m.appendChild(u),e){case"getClassFrames":(h=document.createElement("div")).setAttribute("class","terminus-control-group"),o.appendChild(h);var c=document.createElement("label");c.setAttribute("class","terminus-control-label"),c.setAttribute("for","basicinput"),c.innerHTML="Url/ ID:",h.appendChild(c),(m=document.createElement("div")).setAttribute("class","terminus-controls"),h.appendChild(m);var l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("id","basicinput"),l.setAttribute("class","span8 terminus-input-text"),l.setAttribute("placeholder","Url or ID of document class"),m.appendChild(l)}(h=document.createElement("div")).setAttribute("class","terminus-control-group"),o.appendChild(h);var d=document.createElement("label");d.setAttribute("class","terminus-control-label"),d.setAttribute("for","basicinput"),d.innerHTML="Key:",h.appendChild(d),(m=document.createElement("div")).setAttribute("class","terminus-controls"),h.appendChild(m);var p=document.createElement("input");if(p.setAttribute("type","text"),p.setAttribute("id","basicinput"),p.setAttribute("class","span8 terminus-input-text"),p.setAttribute("placeholder","Key"),m.appendChild(p),!r){var h;(h=document.createElement("div")).setAttribute("class","terminus-control-group"),o.appendChild(h);var m,f=document.createElement("label");f.setAttribute("class","terminus-control-label"),f.setAttribute("for","basicinput"),"query"==e&&(f.innerHTML="Query:"),f.innerHTML="Document:",h.appendChild(f),(m=document.createElement("div")).setAttribute("class","terminus-controls"),h.appendChild(m);var g=document.createElement("textarea");m.appendChild(g),g.setAttribute("class","terminus-api-explorer-text-area"),n.stylizeEditor(this.ui,g,"api-doc","javascript")}t.appendChild(o);var y={};y.url=u,y.key=p,"getClassFrames"==e&&(y.docUrl=l),r||(y.doc=g);var v=this.getApiSendButton(i,y);t.appendChild(v)},a.prototype.getApiForm=function(e,t){var r=document.createElement("form");r.setAttribute("class","terminus-form-horizontal row-fluid");var i=document.createElement("button");i.setAttribute("class","terminus-btn terminus-send-api-btn"),i.setAttribute("type","button"),i.innerHTML="Send Api",r.appendChild(i);var o=document.createElement("div");r.appendChild(o);var a=this;switch(e){case"getSchema":i.addEventListener("click",(function(){var e={};e["terminus:encoding"]=t.enc.value,e["terminus:user_key"]="terminus:turtle";var r=t.url.value;a.client.getSchema(r,e).then((function(e){s.FrameHelper.removeChildren(o);n.showHttpResult(e,"getSchema",o,a.ui)}))}));break;case"updateSchema":i.addEventListener("click",(function(){var e=this;opts={},opts["terminus:encoding"]=t.enc.value,opts["terminus:user_key"]="terminus:turtle";var r=t.url.value;a.client.connectionConfig.connected_mode=!1,a.client.updateSchema(r,t.doc.value,opts).then((function(t){var r=document.createElement("textarea");r.setAttribute("readonly",!0),r.innerHTML=t,e.parentNode.appendChild(r),n.stylizeEditor(this.ui,txtar,"schema","turtle")}))}));break;case"viewDocument":i.addEventListener("click",(function(){var r=t.value,i={format:"turtle"};a.client.getDocument(r,i).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"deleteDocument":i.addEventListener("click",(function(){var r=t.value;a.client.deleteDocument(r,{}).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"createDocument":i.addEventListener("click",(function(){var r=t.schemaUrlDom.value,i=t.htmlEditor.getValue();opts={},a.client.createDocument(r,i,opts).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"updateDocument":i.addEventListener("click",(function(){var r=t.schemaUrlDom.value,i=t.htmlEditor.getValue();opts={},opts.editmode="replace",opts.format="json",a.client.updateDocument(r,i,opts).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}))}var u=document.createElement("BR");r.appendChild(u);u=document.createElement("BR");return r.appendChild(u),r},a.prototype.getApiSendButton=function(e,t){var r=document.createElement("form");r.setAttribute("class","terminus-form-horizontal row-fluid");var i=document.createElement("button");i.setAttribute("class","terminus-btn terminus-send-api-btn"),i.setAttribute("type","button"),i.innerHTML="Send Api",r.appendChild(i);var o=document.createElement("div");r.appendChild(o);var a=this;switch(e){case"connect":i.addEventListener("click",(function(){a.client.connect(t.url.value,t.key.value).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"create":i.addEventListener("click",(function(r){a.client.createDatabase(t.url.value,JSON.parse(t.doc.value),t.key.value).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"delete":i.addEventListener("click",(function(){a.client.deleteDatabase(t.url.value,t.key.value).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"getSchema":i.addEventListener("click",(function(){var r={"terminus:encoding":"terminus:turtle"};r["terminus:user_key"]=t.key.value;var i=t.url.value;a.client.getSchema(i,r).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"updateSchema":i.addEventListener("click",(function(){opts={},opts["terminus:encoding"]="terminus:turtle",opts["terminus:user_key"]=t.key.value;t.doc.value;var r=t.url.value;a.client.connectionConfig.connected_mode=!1,a.client.updateSchema(r,t.doc.value,opts).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"getClassFrames":i.addEventListener("click",(function(r){t.url.value;opts={},opts.explorer=!0,a.client.getClassFrame(t.url,JSON.parse(t.docUrl.value),opts).then((function(t){var r=buttonSelf.parentNode;n.showHttpResult(t,e,r,a.ui)}))}));break;case"viewDocument":i.addEventListener("click",(function(){var r=t.url.value,i={"terminus:encoding":"jsonld"};i["terminus:user_key"]=t.key.value,a.client.getDocument(r,i).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"deleteDocument":i.addEventListener("click",(function(){var r=t.url.value,i={};i.key=t.key.value,a.client.deleteDocument(r,i).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"createDocument":i.addEventListener("click",(function(){var r=t.url.value,i=t.doc.value;opts={},opts["terminus:encoding"]="jsonld",opts["terminus:user_key"]=t.key.value,a.client.createDocument(r,JSON.parse(i),opts).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"updateDocument":i.addEventListener("click",(function(){var r=t.url.value,i=t.doc.value;opts={},opts["terminus:encoding"]="jsonld",opts["terminus:user_key"]=t.key.value,a.client.updateDocument(r,JSON.parse(i),opts).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"select":i.addEventListener("click",(function(){var r={};r.key=t.key.value;var i=JSON.parse(t.doc.value);a.client.select(t.url.value,i,r).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;case"update":i.addEventListener("click",(function(){var r={};r.key=t.key.value;var i=JSON.parse(t.doc.value);a.client.update(t.url.value,i,r).then((function(t){s.FrameHelper.removeChildren(o);n.showHttpResult(t,e,o,a.ui)}))}));break;default:console.log("Invalid Api call on button")}var u=document.createElement("BR");r.appendChild(u);u=document.createElement("BR");return r.appendChild(u),r},a.prototype.getSignature=function(e){var t=document.createElement("div"),r=document.createElement("button");r.appendChild(document.createTextNode("Click to read API Signature")),r.setAttribute("class","terminus-collapsible"),ic=document.createElement("i"),ic.setAttribute("class","terminus-cheveron-float fa fa-chevron-down"),r.appendChild(ic),t.appendChild(r);var i=document.createElement("BR");t.appendChild(i);var s=document.createElement("div");s.setAttribute("class","terminus-collapsible-content content");var o=n.getFunctionSignature(e),a=document.createTextNode(o.spec),u=document.createElement("pre");u.setAttribute("class","terminus-api-signature-pre"),u.appendChild(a);a=document.createTextNode(o.descr);u.appendChild(a);i=document.createElement("BR");u.appendChild(i);i=document.createElement("BR");u.appendChild(i);a=document.createTextNode(o.result);u.appendChild(a),s.appendChild(u),t.appendChild(s);i=document.createElement("BR");return t.appendChild(i),r.addEventListener("click",(function(){n.tolggleContent(ic,s)})),t},e.exports=a},function(e,t,r){const i=r(10),n=r(74),s=r(6),o=r(25),a=r(26),u=r(11);
/**
 * @file Javascript WOQL client object
 * @license Apache Version 2
 * @summary Simple Javascript Client for accessing the Terminus DB API
 */
function c(e){const t=e?e.key:void 0;this.use_fetch=!1,this.return_full_response=!1,this.connectionConfig=new a(e),this.connection=new o(this.connectionConfig,t)}c.CONST=i,c.prototype.connect=function(e,t){if(e&&!this.connectionConfig.setServer(e))return Promise.reject(new URIError(s.getInvalidURIMessage(e,i.CONNECT)));const r=this.connectionConfig.serverURL();t&&this.connection.setClientKey(r,t),this.connectionConfig.server=!1;const n=this;return this.dispatch(r,i.CONNECT).then(e=>(n.connectionConfig.server=r,n.connection.addConnection(r,e),e))},c.prototype.createDatabase=function(e,t,r){if(e&&!this.connectionConfig.setDB(e))return Promise.reject(new URIError(s.getInvalidURIMessage(e,"Create Database")));if(t&&t["@id"]&&!this.connectionConfig.setDB(t["@id"],t["@context"]))return Promise.reject(new URIError(s.getInvalidURIMessage(t["@id"],"Create Database")));t=this.makeDocumentConsistentWithURL(t,this.connectionConfig.dbURL());const n={};r&&(n.key=r);const o=this.addOptionsToDocument(t,n);return this.dispatch(this.connectionConfig.dbURL("create"),i.CREATE_DATABASE,o)},c.prototype.deleteDatabase=function(e,t){if(e&&!this.connectionConfig.setDB(e))return Promise.reject(new URIError(s.getInvalidURIMessage(e,"Delete Database")));const r={};t&&(r.key=t);const n=this;return this.dispatch(`${this.connectionConfig.dbURL()}`,i.DELETE_DATABASE,r).then(e=>(n.connection.removeDB(),e))},c.prototype.getSchema=function(e,t){return e&&!this.connectionConfig.setSchemaURL(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Get Schema"))):this.dispatch(this.connectionConfig.schemaURL(),i.GET_SCHEMA,t)},c.prototype.updateSchema=function(e,t,r){return e&&!this.connectionConfig.setSchemaURL(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Update Schema"))):(t=this.addOptionsToDocument(t,r),this.dispatch(this.connectionConfig.schemaURL(),"update_schema",t))},c.prototype.createDocument=function(e,t,r){return e&&!this.connectionConfig.setDocument(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Create Document"))):t&&t["@id"]&&!this.connectionConfig.setDocument(t["@id"],t["@context"])?Promise.reject(new URIError(s.getInvalidURIMessage(t["@id"],"Create Document"))):(t=this.addOptionsToDocument(this.makeDocumentConsistentWithURL(t,this.connectionConfig.docURL()),r),this.dispatch(this.connectionConfig.docURL(),"create_document",t))},c.prototype.getDocument=function(e,t){return!e||this.connectionConfig.setDocument(e)&&this.connectionConfig.docid?this.dispatch(this.connectionConfig.docURL(),"get_document",t):Promise.reject(new URIError(s.getInvalidURIMessage(e,"Get Document")))},c.prototype.updateDocument=function(e,t,r){return e&&!this.connectionConfig.setDocument(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Update Document"))):t&&t["@id"]&&!this.connectionConfig.setDocument(t["@id"],t["@context"])?Promise.reject(new URIError(s.getInvalidURIMessage(t["@id"],"Update Document"))):(t=this.addOptionsToDocument(this.makeDocumentConsistentWithURL(t,this.connectionConfig.docURL()),r),this.dispatch(this.connectionConfig.docURL(),"update_document",t))},c.prototype.deleteDocument=function(e,t){return!e||this.connectionConfig.setDocument(e)&&this.connectionConfig.docid?this.dispatch(this.connectionConfig.docURL(),"delete_document",t):Promise.reject(new URIError(s.getInvalidURIMessage(e,"Delete Document")))},c.prototype.select=function(e,t,r){if(e&&!this.connectionConfig.setQueryURL(e))return Promise.reject(new URIError(s.getInvalidURIMessage(e,"Select")));let n={"terminus:query":JSON.stringify(t)};return n=this.addOptionsToWOQL(n,r),this.dispatch(this.connectionConfig.queryURL(),i.WOQL_SELECT,n)},c.prototype.update=function(e,t,r){return e&&!this.connectionConfig.setQueryURL(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Update"))):(t=this.addOptionsToWOQL(t,r),this.dispatch(this.connectionConfig.queryURL(),"woql_update",t))},c.prototype.getClassFrame=function(e,t,r){return e&&!this.connectionConfig.setClassFrameURL(e)?Promise.reject(new URIError(s.getInvalidURIMessage(e,"Get Class Frame"))):(r||(r={}),r["terminus:class"]=t,this.dispatch(this.connectionConfig.frameURL(),"class_frame",r))},c.prototype.addOptionsToWOQL=function(e,t){return t&&t.key&&(e.key=t.key),e},c.prototype.addOptionsToDocument=function(e,t){const r={};return r["@context"]=e["@context"],r["@context"]&&e["@id"]&&(r["@context"]._=`${e["@id"]}/`),t&&t["terminus:encoding"]&&"terminus:turtle"===t["terminus:encoding"]?(r["terminus:turtle"]=e,r["terminus:schema"]=this.connectionConfig.schemaURL(),delete r["terminus:turtle"]["@context"]):(r["terminus:document"]=e,delete r["terminus:document"]["@context"]),r["@type"]="terminus:APIUpdate",t&&t["terminus:user_key"]&&(r["terminus:user_key"]=t["terminus:user_key"]),t&&t.key&&(r["terminus:user_key"]=t.key),r},c.prototype.addKeyToPayload=function(e,t){return"object"!=typeof e&&(e={}),e.key?(e["terminus:user_key"]=e.key,delete e.key):this.connection.getClientKey()?e["terminus:user_key"]=this.connection.getClientKey():this.connection.getClientKey(t)&&(e["terminus:user_key"]=this.connection.getClientKey(t)),e},c.prototype.makeDocumentConsistentWithURL=function(e,t){return e["@id"]=t,e},c.prototype.dispatch=function(e,t,r){return this.connectionConfig.includeKey()&&(r=this.addKeyToPayload(r,e)),this.use_fetch?this.dispatchFetch(e,t,r):n(e,t,r)},c.prototype.dispatchFetch=function(e,t,r){const n={redirect:"follow",referrer:"client"};let s={};switch(this.connectionConfig.platformEndpoint()&&(n.credentials="include"),r&&r["terminus:user_key"]&&(s={Authorization:`Basic ${btoa(`:${r["terminus:user_key"]}`)}`},delete r["terminus:user_key"]),t){case i.DELETE_DATABASE:case i.DELETE_DOCUMENT:Object.keys(r).length>0&&(e+=`?${u.URIEncodePayload(r)}`),n.method="DELETE",n.cache="no-cache";break;case i.CREATE_DATABASE:case i.UPDATE_SCHEMA:case i.CREATE_DOCUMENT:case i.UPDATE_DOCUMENT:case i.WOQL_UPDATE:n.method="POST",n.cache="no-cache",s["Content-Type"]="application/json",n.body=JSON.stringify(r);break;case i.GET_SCHEMA:case i.CONNECT:case i.CLASS_FRAME:case i.WOQL_SELECT:case i.GET_DOCUMENT:default:n.method="GET",Object.keys(r).length>0&&(e+=`?${u.URIEncodePayload(r)}`)}const o=this;return Object.keys(s).length>0&&(n.headers=new Headers(s)),fetch(e,n).then(t=>o.return_full_response?t:t.ok?t.json():(o.error=o.parseAPIError(t),Promise.reject(new Error(o.getAPIErrorMessage(e,n,o.error)))))},e.exports=c},function(e,t,r){(function(t){const i=r(80),n=r(11),s=r(10),o=r(6);function a(e){try{return btoa(e)}catch(r){return t.from(e).toString("base64")}}e.exports=function(e,t,r){const u={mode:"cors",redirect:"follow",referrer:"client"};switch(r&&r["terminus:user_key"]&&(u.headers={Authorization:`Basic ${a(`:${r["terminus:user_key"]}`)}`},delete r["terminus:user_key"]),t){case s.DELETE_DATABASE:case s.DELETE_DOCUMENT:if(r){const t=n.URIEncodePayload(r);t&&(e+=`?${t}`)}return i.delete(e,u).then(e=>e.data).catch(t=>{throw new Error(o.getAPIErrorMessage(e,u,t))});case s.CREATE_DATABASE:case s.UPDATE_SCHEMA:case s.CREATE_DOCUMENT:case s.UPDATE_DOCUMENT:case s.WOQL_UPDATE:return u.headers=u.headers?u.headers:{},u.headers["Content-Type"]="application/json",i.post(e,JSON.stringify(r),u).then(e=>e.data).catch(t=>{const r=new Error(o.getAPIErrorMessage(e,u,t));throw t.response&&t.response.data&&(r.data=t.response.data),r});case s.GET_SCHEMA:case s.CONNECT:case s.CLASS_FRAME:case s.WOQL_SELECT:case s.GET_DOCUMENT:default:if(r){const t=n.URIEncodePayload(r);t&&(e+=`?${t}`)}return i.get(e,u).then(e=>e.data).catch(t=>{throw new Error(o.getAPIErrorMessage(e,u,t))})}}}).call(this,r(75).Buffer)},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=r(77),n=r(78),s=r(79);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,r)}function c(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=p(e,t);return e}(e,t,r,i):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(t,r),n=(e=a(e,i)).write(t,r);n!==i&&(e=e.slice(0,n));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|h(t.length);return 0===(e=a(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):p(e,t);if("Buffer"===t.type&&s(t.data))return p(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=a(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function p(e,t){var r=t.length<0?0:0|h(t.length);e=a(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(i)return W(e).length;t=(""+t).toLowerCase(),i=!0}}function f(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function y(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=u.from(t,i)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,i,n);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,i,n){var s,o=1,a=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var l=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){for(var d=!0,p=0;p<u;p++)if(c(e,s+p)!==c(t,p)){d=!1;break}if(d)return s}return-1}function b(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[r+o]=a}return o}function w(e,t,r,i){return I(W(t,e.length-r),e,r,i)}function C(e,t,r,i){return I(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function x(e,t,r,i){return C(e,t,r,i)}function _(e,t,r,i){return I(H(t),e,r,i)}function D(e,t,r,i){return I(function(e,t){for(var r,i,n,s=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),i=r>>8,n=r%256,s.push(n),s.push(i);return s}(t,e.length-r),e,r,i)}function O(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var s,o,a,u,c=e[n],l=null,d=c>239?4:c>223?3:c>191?2:1;if(n+d<=r)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(s=e[n+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=e[n+1],o=e[n+2],128==(192&s)&&128==(192&o)&&(u=(15&c)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[n+1],o=e[n+2],a=e[n+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(u=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l),n+=d}return function(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=L));return r}(i)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,i){return l(t),t<=0?a(e,t):void 0!==r?"string"==typeof i?a(e,t).fill(r,i):a(e,t).fill(r):a(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=u.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):f.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,i,n){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(n>>>=0)-(i>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(i,n),l=e.slice(t,r),d=0;d<a;++d)if(c[d]!==l[d]){s=c[d],o=l[d];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},u.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return C(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function T(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function A(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function M(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",s=t;s<r;++s)n+=q(e[s]);return n}function S(e,t,r){for(var i=e.slice(t,r),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,i,n,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function F(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,s=Math.min(e.length-r,2);n<s;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function j(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,s=Math.min(e.length-r,4);n<s;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function Q(e,t,r,i,n,s){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k(e,t,r,i,s){return s||Q(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function V(e,t,r,i,s){return s||Q(e,0,r,8),n.write(e,t,r,i,52,8),r+8}u.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var n=t-e;r=new u(n,void 0);for(var s=0;s<n;++s)r[s]=this[s+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},u.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var i=t,n=1,s=this[e+--i];i>0&&(n*=256);)s+=this[e+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),n.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),n.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),n.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),n.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return V(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return V(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,s=i-r;if(this===e&&r<t&&t<i)for(n=s-1;n>=0;--n)e[n+t]=this[n+r];else if(s<1e3||!u.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},u.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var o=u.isBuffer(e)?e:W(new u(e,i).toString()),a=o.length;for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){var r;t=t||1/0;for(var i=e.length,n=null,s=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function H(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function I(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(76))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,i=c(e),o=i[0],a=i[1],u=new s(function(e,t,r){return 3*(t+r)/4-r}(0,o,a)),l=0,d=a>0?o-4:o;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,s=[],o=0,a=r-n;o<a;o+=16383)s.push(l(e,o,o+16383>a?a:o+16383));1===n?(t=e[r-1],s.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],s.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return s.join("")};for(var i=[],n=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)i[a]=o[a],n[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var n,s,o=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(i[(s=n)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,i,n){var s,o,a=8*n-i-1,u=(1<<a)-1,c=u>>1,l=-7,d=r?n-1:0,p=r?-1:1,h=e[t+d];for(d+=p,s=h&(1<<-l)-1,h>>=-l,l+=a;l>0;s=256*s+e[t+d],d+=p,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=i;l>0;o=256*o+e[t+d],d+=p,l-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,i),s-=c}return(h?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,r,i,n,s){var o,a,u,c=8*s-n-1,l=(1<<c)-1,d=l>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:s-1,m=i?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+d>=1?p/u:p*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(t*u-1)*Math.pow(2,n),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,n),o=0));n>=8;e[r+h]=255&a,h+=m,a/=256,n-=8);for(o=o<<n|a,c+=n;c>0;e[r+h]=255&o,h+=m,o/=256,c-=8);e[r+h-m]|=128*f}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){e.exports=r(81)},function(e,t,r){"use strict";var i=r(3),n=r(17),s=r(83),o=r(23);function a(e){var t=new s(e),r=n(s.prototype.request,t);return i.extend(r,s.prototype,t),i.extend(r,t),r}var u=a(r(20));u.Axios=s,u.create=function(e){return a(o(u.defaults,e))},u.Cancel=r(24),u.CancelToken=r(95),u.isCancel=r(19),u.all=function(e){return Promise.all(e)},u.spread=r(96),e.exports=u,e.exports.default=u},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,r){"use strict";var i=r(3),n=r(18),s=r(84),o=r(85),a=r(23);function u(e){this.defaults=e,this.interceptors={request:new s,response:new s}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[o,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},u.prototype.getUri=function(e){return e=a(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}})),e.exports=u},function(e,t,r){"use strict";var i=r(3);function n(){this.handlers=[]}n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},function(e,t,r){"use strict";var i=r(3),n=r(86),s=r(19),o=r(20),a=r(93),u=r(94);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!a(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=n(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return c(e),t.data=n(t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=n(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var i=r(3);e.exports=function(e,t,r){return i.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t,r){"use strict";var i=r(3);e.exports=function(e,t){i.forEach(e,(function(r,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[i])}))}},function(e,t,r){"use strict";var i=r(22);e.exports=function(e,t,r){var n=r.config.validateStatus;!n||n(r.status)?e(r):t(i("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(e,t,r){"use strict";e.exports=function(e,t,r,i,n){return e.config=t,r&&(e.code=r),e.request=i,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var i=r(3),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,o={};return e?(i.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),r=i.trim(e.substr(s+1)),t){if(o[t]&&n.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o}},function(e,t,r){"use strict";var i=r(3);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var i=e;return t&&(r.setAttribute("href",i),i=r.href),r.setAttribute("href",i),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=i.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var i=r(3);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,r,n,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),i.isString(n)&&a.push("path="+n),i.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var i=r(24);function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new i(e),t(r.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){const i=r(7),n=r(28);function s(e,t,r,i,n){this.empty(),this.cls=e,r&&"object"==typeof r&&this.loadClassFrames(r),t&&"object"==typeof t?(this.originalFrames=t,this.loadDataFrames(t)):this.originalFrames=!1,this.parent=i,this.parentframe=n,this.newDoc=!1}function o(e,t,r){this.predicate=e,this.cframe=t,this.parent=r,this.values=[]}function a(e,t,r){this.err=!1,this.parent=t,this.subjid=!!t&&t.subjid,this.index=r,e&&this.load(e)}function u(e,t){this.err=!1,this.parent=t,this.subjid=!!t&&t.subjid,e&&this.load(e)}function c(e){this.min=0,this.max=0,e&&this.loadRestriction(e)}s.prototype.loadClassFrames=function(e){for(let t=0;t<e.length;t+=1){e[t]["@context"]&&(this.jsonld_context=e[t]["@context"]);const r=new u(e[t]);if(r.isValid()&&(this.classframes||(this.classframes={}),void 0===this.classframes[e[t].property]&&(this.classframes[e[t].property]=[]),this.classframes[e[t].property]=r,r.isObject()&&this.properties[e[t].property]))for(let r=0;r<this.properties[e[t].property].values.length;r+=1)this.properties[e[t].property].values[r].loadClassFrames(e[t].frame)}return this},s.prototype.hasSchema=function(){return!i.empty(this.classframes)},s.prototype.loadDataFrames=function(e){if("object"==typeof e&&e.length){this.originalFrames||(this.originalFrames=e),!this.subjid&&e[0].domainValue&&(this.subjid=e[0].domainValue);for(let t=0;t<e.length;t+=1){e[t]["@context"]&&(this.jsonld_context=e[t]["@context"]);let r=this.getPropertyClassFrame(e[t].property,e[t]);r.isClassChoice()?(r=r.getChosenClassFrame(e[t].range))||console.log(`no choice frame ${e[t].range}`):r.isLogic()&&(r=r.getChosenFrame(e[t])),r&&(void 0===this.properties[e[t].property]&&(this.properties[e[t].property]=new o(e[t].property,r,this)),this.properties[e[t].property].addFrame(e[t]))}return this}},s.prototype.getAsFrame=function(e,t){if(this.parentframe)return this.parentframe;const r={type:"objectProperty",property:e};r.range=this.cls,r.domain=t.cls,r.domainValue=t.subjid,r.frame=[];for(const e of Object.keys(this.properties))r.frame=r.frame.concat(r.frame,this.properties[e].getAsFrames());return r},s.prototype.isnew=function(){return this.newDoc},s.prototype.empty=function(){this.properties={},this.restrictions={},this.subjid=!1,this.cls=!1},s.prototype.reset=function(e){if(e){const t=[];for(let r=0;r<this.originalFrames.length;r+=1)this.originalFrames[r].property===e&&t.push(this.originalFrames[r]);this.properties[e]&&(this.properties[e]=[]),this.loadDataFrames(t)}else this.restrictions={},this.properties={},this.loadDataFrames(this.originalFrames)},s.prototype.clear=function(){for(const e of Object.keys(this.properties))this.properties[e].clear();return this},s.prototype.filter=function(e,t,r){!r||r.ignore_failure;n.FramePatternMatcher.testRules(e,this,t);for(const i of Object.keys(this.properties))this.properties[i].filter(e,t,r);return this},s.prototype.getPropertyClassFrame=function(e,t){if(this.classframes&&"object"==typeof this.classframes&&"object"==typeof this.classframes[e])return this.classframes[e];if(t){return new u(t)}return!!this.properties[e]&&new u(this.properties[e].values[0])},s.prototype.getProperties=function(e){if("filled"==e||!this.classframes)return Object.keys(this.properties);if("missing"==e){for(var t=Object.keys(this.properties),r=Object.keys(this.classframes),i=[],n=0;n<r.length;n++)-1==t.indexOf(r[n])&&-1==i.indexOf(r[n])&&i.push(r[n]);return i}return Object.keys(this.classframes)},s.prototype.getMissingPropertyList=function(){var e=this.getProperties("missing");const t=[];for(var r=0;r<e.length;r++){const i={label:this.getPropertyClassFrame(e[r]).getLabel(),value:e[r]};t.push(i)}return t},s.prototype.getFilledPropertyList=function(){var e=this.getProperties("filled");const t=[];for(var r=0;r<e.length;r++){const i={label:this.getPropertyClassFrame(e[r]).getLabel(),value:e[r]};t.push(i)}return t},s.prototype.fillFromSchema=function(e){e&&(this.subjid=e),e=e||i.genBNID();let t={};for(const r of Object.keys(this.classframes)){const i=this.getPropertyClassFrame(r);t[r]=new o(r,i),t[r].fillFromSchema(e)}this.properties=t,this.originalFrames=[];for(const e of Object.keys(this.properties))this.originalFrames.push(this.properties[e].getAsFrames());return this},s.prototype.clone=function(e){const t={},r=new s(this.cls,!1,!1,this.parent);r.classframes=this.classframes,r.subjid=e;for(const e of Object.keys(this.properties))t[e]=this.properties[e].clone();return r.properties=t,r},s.prototype.getChild=function(e,t){for(var r=this.getProperty(t);0<r.values.length;r++)if(r.values[0].isObject()&&r.values[0].subject===e)return r.values[0];if(!t)for(const t of Object.keys(this.properties))for(let r=0;r<this.properties[t].values.length;r+=1)if(this.properties[t].values[r].subject()===e)return this.properties[t].values[r];return!1},s.prototype.addProperty=function(e,t){const r=this.getPropertyClassFrame(e);if(new o(e,r).isData()){r.copy().set("")}if(r.isObject()){if(!r.isClassChoice()){r.createEmpty(i.genBNID())}if(t){r.createEmptyChoice(t,i.genBNID())}const e=r.getClassChoices();if(e&&e.length){r.createEmptyChoice(e[0],i.genBNID())}}return void 0===this.properties[e]&&(this.properties[e]=[]),this.properties[e].push(df),df},s.prototype.addPropertyValue=function(e,t){return this.properties[e].addValue(t)},s.prototype.removeProperty=function(e){void 0!==this.properties[e]&&delete this.properties[e]},s.prototype.removePropertyValue=function(e,t,r){const i=this.properties[e];i.removeValue(t,r),0==i.values.length&&this.removeProperty(e)},s.prototype.error=function(e){console.error(e)},s.prototype.subject=function(){return this.subjid},s.prototype.get=s.prototype.subject,s.prototype.isObject=function(){return!0},s.prototype.isProperty=function(){return!1},s.prototype.isData=function(){return!1},s.prototype.subjectClass=function(){return this.cls},s.prototype.depth=function(){return this.parent?this.parent.depth()+1:0},s.prototype.getProperty=function(e){return this.properties[e]},s.prototype.first=function(e){if(this.properties&&this.properties[e])return this.properties[e].first()},s.prototype.property=function(e){return!!this.parent&&this.parent.property()},s.prototype.parentObject=function(){return!(!this.parent||!this.parent.parent)&&this.parent.parent},s.prototype.root=function(){return!this.parent},s.prototype.renderProperties=function(){for(var e=this.sortProperties(),t=[],r=0;r<e.length;r++)if(this.properties[e[r]].render){var i=this.properties[e[r]].render(this.properties[e[r]]);i&&t.push(i)}return t},s.prototype.sortProperties=function(){const e=Object.keys(this.properties);return this.compare?e.sort((e,t)=>this.compare(e,t,this)):e.sort((e,t)=>this.standardCompare(e,t,this))},s.prototype.standardCompare=function(e,t,r){return"rdfs:label"==e?-1:"rdfs:label"==t?1:"rdfs:comment"==e?-1:"rdfs:comment"==t?1:r.properties[e].isData()&&r.properties[t].isObject()?-1:r.properties[t].isData()&&r.properties[e].isObject()?1:0},s.prototype.cardControlAllows=function(e){if(!this.parent)return!0;if(this.parent.cframe.hasRestriction()){var t=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min&&r<=t.min)return!1}return!0},s.prototype.isUpdated=function(){var e=0;for(var t in this.properties){if(this.originalFrames[e]!=t)return!0;if(this.properties[t].isUpdated())return!0;e++}return e!=this.originalFrames.length},s.prototype.getSummary=function(){var e={status:"ok"};for(var t in this.isUpdated()&&(e.status="updated"),this.isNew()&&(e.status="new"),e.propcount=0,this.properties)e.propcount++;return e.long=e.propcount+" properties",e},o.prototype.addFrame=function(e){if(this.cframe.isData()){var t=new a(e,this,this.values.length);this.values.push(t)}else{const t=new s(this.range(),cframe.frame,e.frame,this,e);this.values.push(t)}},o.prototype.fillFromSchema=function(e){if(this.isData()||this.isObject()&&!this.isClassChoice())if(this.cframe.hasRestriction()&&this.cframe.restriction.min){values=[];for(let t=0;t<this.cframe.restriction.min;t+=1)values.push(this.createEmpty(e))}else values=[this.createEmpty(e)];else if(this.isClassChoice()){const e=this.getClassChoices();if(e&&e.length){const t=this.createEmptyChoice(e[0],i.genBNID());values=[t]}}this.values=values},o.prototype.isData=function(){return this.cframe.isData()},o.prototype.isObject=function(){return this.cframe.isObject()},o.prototype.isProperty=function(){return!0},o.prototype.property=function(){return this.predicate},o.prototype.extract=function(){for(var e=[],t=0;t<this.values.length;t++){var r=this.values[t].extract();""!==r&&!1!==r&&void 0!==r&&e.push(r)}return e},o.prototype.subject=function(){return!!this.parent&&this.parent.subject()},o.prototype.subjectClass=function(){return!!this.parent&&this.parent.subjectClass()},o.prototype.depth=function(){return!!this.parent&&this.parent.depth()},o.prototype.updated=function(){return!!this.parent&&this.parent.childUpdated()},o.prototype.range=function(){return this.cframe?this.cframe.range:""},o.prototype.getLabel=function(){return this.cframe?this.cframe.getLabel():""},o.prototype.getComment=function(){return!!this.cframe&&this.cframe.getComment()},o.prototype.hasCardinalityRestriction=function(){return!!this.cframe&&this.cframe.hasRestriction()},o.prototype.getRestriction=function(){return!!this.cframe&&this.cframe.restriction},o.prototype.isClassChoice=function(){return!!this.cframe&&this.cframe.isClassChoice()},o.prototype.deletePropertyValue=function(e,t){this.parent.removePropertyValue(this.property(),e,t)},o.prototype.get=function(){for(var e=[],t=0;t<this.values.length;t++)if(this.values[t]){var r=this.values[t].get();r&&e.push(r)}return e},o.prototype.clear=function(){for(var e=0;e<this.values.length;e++)this.values[e].clear()},o.prototype.clone=function(){const e=[],t=new o(this.predicate,this.cframe,this.parent);for(var r=0;r<this.values.length;r++)e.push(this.values[r].clone());return t.values=e,t},o.prototype.getAsFrames=function(){for(var e=[],t=0;t<this.values.length;t++)this.values[t]&&(this.isData()?e.push(this.values[t].getAsFrame()):e=e.concat(this.values[t].getAsFrames()));return e},o.prototype.createEmpty=function(){if(this.cframe.isData()){const e=this.cframe.copy();return e.set(""),e}if(this.cframe.isObject()){if(!this.cframe.isClassChoice()){return this.cframe.createEmpty(i.genBNID())}const e=this.cframe.getClassChoices();if(e&&e.length){return this.cframe.createEmptyChoice(e[0],i.genBNID())}}},o.prototype.filter=function(e,t,r){!r||r.ignore_failure;n.FramePatternMatcher.testRules(e,this,t);for(var i=0;i<this.values.length;i++)this.values[i].filter(e,t,r);return this},o.prototype.first=function(){if(this.values&&this.values[0])return this.values[0].get()},o.prototype.renderValues=function(){for(var e=this.sortValues(),t=[],r=0;r<e.length;r++)if(e[r]&&e[r].render){var i=e[r].render(e[r]);i&&t.push(i)}return t},o.prototype.sortValues=function(){return this.compare?this.values.sort((e,t)=>this.compare(e,t,this)):this.values},o.prototype.cardControlAllows=function(e){if(this.cframe.hasRestriction()){var t=this.cframe.restriction,r=this.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min)return!1}return!0},o.prototype.isUpdated=function(){return!0},a.prototype.load=function(e){if("object"!=typeof e)return void this.error("No frame passed to load");this.type=e.type,this.predicate=e.property,this.range=e.range,this.rangeValue=e.rangeValue,this.domain=e.domain,this.domainValue=e.domainValue,this.frame=e.frame,this.label=e.label,this.comment=e.comment;const{restriction:t}=e;this.restriction=!1,t&&"object"==typeof t&&(this.restriction=new c(t))},a.prototype.filter=function(e,t){return n.FramePatternMatcher.testRules(e,this,t),this},a.prototype.delete=function(){this.parent.deletePropertyValue(this.get(),this.index)},a.prototype.save=function(){this.parent&&this.parent.save()},a.prototype.reset=function(){this.set(this.originalValue)},a.prototype.clone=function(){var e=this.parent.addPropertyValue(this.get()),t=this.copy(e);t.setNew(),t.mode="edit",t.index=this.parent.values.length,this.parent.values.push(t)},a.prototype.depth=function(){return!!this.parent&&this.parent.depth()},a.prototype.property=function(){return!!this.parent&&this.parent.property()},a.prototype.subject=function(){return!!this.parent&&this.parent.subject()},a.prototype.subjectClass=function(){return!!this.parent&&this.parent.subjectClass()},a.prototype.range=function(){return!!this.frame&&this.frame.range},a.prototype.isValidType=function(e){return-1!==["datatypeProperty","objectProperty","restriction "].indexOf(e)},a.prototype.getAsFrame=function(){const e={type:this.type,property:this.property()};return this.range&&(e.range=this.range),this.rangeValue&&(e.rangeValue=this.rangeValue),this.domain&&(e.domain=this.domain),this.domainValue&&(e.domainValue=this.domainValue),this.frame&&(e.frame=this.frame),this.label&&(e.label=this.label),this.comment&&(e.comment=this.comment),e},a.prototype.hasRestriction=function(){return!!this.restriction&&this.restriction.hasCardRestriction()},a.prototype.copy=function(e){const t=new a(this,this.parent);return e&&(t.domainValue=e),t},a.prototype.getLabel=function(){let e="";return"rdfs:label"==this.predicate?"Label":"rdfs:comment"==this.predicate?"Comment":(this.label&&"object"==typeof this.label&&(e=this.label["@value"]),this.label&&"string"==typeof this.label&&(e=this.label),!e&&this.property()&&(e=i.labelFromURL(this.property())),e||(e=i.labelFromURL(this.cls)),e)},a.prototype.getType=function(){return this.range?this.range:!(!this.rangeValue||!this.rangeValue.type)&&this.rangeValue.type},s.prototype.getLabel=a.prototype.getLabel,a.prototype.getComment=function(){let e="";return this.comment&&"object"==typeof this.comment&&(e=this.comment["@value"]),this.comment&&"string"==typeof this.comment&&(e=this.comment),e},s.prototype.getComment=a.prototype.getComment,a.prototype.error=function(e){return e&&(this.err=e),this.err},a.prototype.isValid=function(){return this.type&&this.isValidType(this.type)?this.predicate?this.domain?this.range?!(this.isObjectProperty()&&(!this.frame||"object"!=typeof this.frame))||(this.error("Missing Object Frame"),!1):(this.error("Missing Frame Range"),!1):(this.error("Missing Frame Domain"),!1):(this.error("Missing Frame Property"),!1):(this.error(`Missing or Illegal Frame Type ${this.type}`),!1)},a.prototype.isObjectProperty=function(){return"objectProperty"===this.type},a.prototype.isDatatypeProperty=function(){return"datatypeProperty"===this.type},a.prototype.isLogic=function(){return"and"===this.type||"or"===this.type||"xor"===this.type},a.prototype.isRestriction=function(){return"restriction"===this.type},a.prototype.ftype=function(){return this.isDocument()?"document":this.isDatatypeProperty()?"data":this.isChoice()?"oneOf":this.isObject()?"object":this.isLogic()?"logic":this.isClassChoice()?"class_choice":void 0},a.prototype.isClassChoice=function(){return this.frame&&"class_choice"===this.frame.type},a.prototype.isString=function(){return this.range===i.getStdURL("xsd","string")},a.prototype.getChoiceOptions=function(){const e=[];for(let t=0;t<this.frame.elements.length;t+=1){const r={};this.frame.elements[t].label?r.label=this.frame.elements[t].label["@value"]:r.label=i.labelFromURL(this.frame.elements[t].class),r.value=this.frame.elements[t].class,e.push(r)}return e},a.prototype.lang=function(){return"en"},a.prototype.isChoice=function(){return this.frame&&"oneOf"===this.frame.type},a.prototype.isDocument=function(){return this.frame&&"document"===this.frame.type},a.prototype.isData=function(){return this.isDocument()||this.isChoice()||this.isDatatypeProperty()},a.prototype.isObject=function(){return this.isObjectProperty()&&this.frame&&!(this.isChoice()||this.isDocument())},a.prototype.isProperty=function(){return!1},a.prototype.getTypeShorthand=function(){if(this.isDocument())return"document";if(this.isChoice())return"choice";return i.getShorthand(this.getType())||this.getType()},a.prototype.get=function(){return this.contents?this.contents:this.isDatatypeProperty()&&this.rangeValue&&void 0!==this.rangeValue["@value"]?this.rangeValue["@value"]:this.isChoice()||this.isDocument()?this.frame.domainValue:""},a.prototype.set=function(e,t){t&&(e=t(e,this)),this.contents=e,(this.isChoice()||this.isDocument())&&(this.frame.domainValue=e),this.isDatatypeProperty()&&this.rangeValue&&(this.rangeValue["@value"]=e)},a.prototype.clear=function(){(this.isDocument()||this.isChoice()||this.isDatatypeProperty())&&this.set("")},a.prototype.cardControlAllows=function(e){if(this.parent.cframe.hasRestriction()){var t=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min&&r<=t.min)return!1}return!0},u.prototype=a.prototype,u.prototype.loadFromObjectFrame=function(e,t){this.type="objectProperty",this.predicate=e.property,this.range=e.range,this.rangeValue=t.subjid,this.domain=e.cls,this.domainValue=e.subjid,this.label=e.getLabel(),this.comment=e.getComment(),this.restriction=e.restriction},u.prototype.createEmptyChoice=function(e,t){const r=this.getChosenClassFrames(e),i=new s(e);return t&&(i.subjid=t),i.loadClassFrames(r),i.fillFromSchema()},u.prototype.getChosenClassFrames=function(e){let t=[];for(let r=0;r<this.frame.operands.length;r+=1)for(let i=0;i<this.frame.operands[r].length;i+=1)e===this.frame.operands[r][i].domain&&(t=t.concat(this.frame.operands[r][i]));return t},u.prototype.createEmpty=function(e){if(this.isObject()){const t=new s(this.range);return e&&(t.subjid=e),t.loadClassFrames(this.frame),t.fillFromSchema()}if(this.isData()){const e=this.copy();return e.set(""),e}},u.prototype.cloneDataFrame=function(e,t){return t},u.prototype.clone=function(e,t){if(this.isObject())console.log("cannot clone class frame");else if(this.isData())return this.cloneDataFrame(e,t)},u.prototype.getClassChoices=function(){const e=[];if(this.frame.operands)for(let t=0;t<this.frame.operands.length;t+=1)for(let r=0;r<this.frame.operands[t].length;r+=1){const i=this.frame.operands[t][r].domain;i&&-1===e.indexOf(i)&&e.push(i)}return e},u.prototype.getChosenClassFrame=function(e){for(let t=0;t<this.frame.operands.length;t+=1){const r=this.frame.operands[t];if(r.length){for(let t=0;t<r.length;t+=1)if(r[t]&&e===r[t].domain){return new u(r)}}else if(r.range&&e===r.range){return new u(r)}}return!1},u.prototype.getChosenFrame=function(e){return e},c.prototype.hasCardRestriction=function(){return 0!==this.min||0!==this.max},c.prototype.loadRestriction=function(e){if(void 0!==e.cardinality)this.max=e.cardinality,this.min=e.cardinality;else if(void 0!==e.maxCardinality)this.max=e.maxCardinality;else if(void 0!==e.minCardinality)this.min=e.minCardinality;else if(void 0!==e.type&&"and"===e.type&&"object"==typeof e.operands)for(let t=0;t<e.operands.length;t+=1){const r=new c(e.operands[t]);0===this.max&&r.max>0?this.max=r.max:this.max>0&&r.max>0&&r.max<this.max&&(this.max=r.max),0===this.min&&r.min>0?this.min=r.min:this.min>0&&r.min>0&&r.min>this.min&&(this.min=r.min)}},e.exports=s},function(e,t,r){const i=r(7);function n(e,t,r){if(this.bindings=e.bindings,this.query=t,this.cursor=0,!r||!r.no_compress){var i=!(!r||!r.context)&&r.context;this.compress(i)}}n.prototype.compress=function(e){e=e||this.query.getContext();for(var t=0;t<this.bindings.length;t++)for(const r of Object.keys(this.bindings[t])){const n=i.shorten(r,e),s="string"==typeof this.bindings[t][r]?i.shorten(this.bindings[t][r],e):this.bindings[t][r];delete this.bindings[t][r],this.bindings[t][n]=s}},n.prototype.first=function(){return this.cursor=0,this.bindings[0]},n.prototype.last=function(){return this.curor=this.bindings.length-1,this.bindings[this.bindings.length-1]},n.prototype.next=function(){var e=this.bindings[this.cursor];return this.cursor++,e},n.prototype.prev=function(){if(this.cursor>0)return this.cursor--,this.bindings[this.cursor]},n.prototype.compareValues=function(e,t,r){return e&&t?(void 0!==e["@value"]&&void 0!==t["@value"]&&(e=e["@value"],t=t["@value"]),e>t?r&&"asc"==r?1:-1:t>e?r&&"asc"==r?-1:1:void 0):0},n.prototype.sort=function(e,t){this.bindings.sort((r,i)=>this.compareValues(r[e],i[e],t))},n.prototype.getVariableList=function(){if(this.bindings&&this.bindings[0])return Object.keys(this.bindings[0])},n.prototype.count=function(){return this.bindings.length},n.prototype.hasBindings=function(e){return this.bindings&&this.bindings.count()},n.prototype.getBindings=function(){return this.bindings},e.exports=n},function(module,exports,__webpack_require__){const FrameHelper=__webpack_require__(7),Pattern=__webpack_require__(28),WOQL={};function WOQLQuery(e){return this.query=e||{},this.cursor=this.query,this.chain_ended=!1,this.contains_update=!1,this.paging_transitive_properties=["select","from","start","when","opt","limit"],this.vocab=this.loadDefaultVocabulary(),this}function TripleBuilder(e,t,r,i){this.type=e,this.cursor=t,this.subject=i.cleanSubject(r),this.graph=!1,this.query=i}WOQL.when=function(e,t){return(new WOQLQuery).when(e,t)},WOQL.opt=function(e){return(new WOQLQuery).opt(e)},WOQL.from=function(e,t){return(new WOQLQuery).from(e,t)},WOQL.limit=function(e,t){return(new WOQLQuery).limit(e,t)},WOQL.select=function(...e){return(new WOQLQuery).select(...e)},WOQL.or=function(...e){return(new WOQLQuery).or(...e)},WOQL.and=function(...e){return(new WOQLQuery).and(...e)},WOQL.not=function(e){return(new WOQLQuery).not(e)},WOQL.triple=function(e,t,r){return(new WOQLQuery).triple(e,t,r)},WOQL.quad=function(e,t,r,i){return(new WOQLQuery).quad(e,t,r,i)},WOQL.sub=function(e,t){return(new WOQLQuery).sub(e,t)},WOQL.isa=function(e,t){return(new WOQLQuery).isa(e,t)},WOQL.eq=function(e,t){return(new WOQLQuery).eq(e,t)},WOQL.trim=function(e,t){return(new WOQLQuery).trim(e,t)},WOQL.delete=function(e){return(new WOQLQuery).delete(e)},WOQL.delete_triple=function(e,t,r){return(new WOQLQuery).delete_triple(e,t,r)},WOQL.delete_quad=function(e,t,r,i){return(new WOQLQuery).delete_quad(e,t,r,i)},WOQL.add_triple=function(e,t,r){return(new WOQLQuery).add_triple(e,t,r)},WOQL.add_quad=function(e,t,r,i){return(new WOQLQuery).add_quad(e,t,r,i)},WOQL.eval=function(e,t){return(new WOQLQuery).eval(e,t)},WOQL.plus=function(...e){return(new WOQLQuery).plus(...e)},WOQL.minus=function(...e){return(new WOQLQuery).minus(...e)},WOQL.times=function(...e){return(new WOQLQuery).times(...e)},WOQL.divide=function(...e){return(new WOQLQuery).divide(...e)},WOQL.exp=function(e,t){return(new WOQLQuery).exp(e,t)},WOQL.get=function(e,t){return(new WOQLQuery).get(e,t)},WOQL.as=function(e,t){return(new WOQLQuery).as(e,t)},WOQL.remote=function(e){return(new WOQLQuery).remote(e)},WOQL.unique=function(e,t){return(new WOQLQuery).unique(e,t)},WOQL.list=function(e){return(new WOQLQuery).list(e)},WOQL.addClass=function(e,t){return(new WOQLQuery).addClass(e,t)},WOQL.addProperty=function(e,t,r){return(new WOQLQuery).addProperty(e,t,r)},WOQL.node=function(e,t){return(new WOQLQuery).node(e,t)},WOQL.query=function(){return new WOQLQuery},WOQL.json=function(e){return(new WOQLQuery).json(e)},WOQL.rule=function(){return new Pattern.FrameRule},WOQL.isLiteralType=function(e){if(e){var t=e.split(":");if("xdd"==t[0]||"xsd"==t[0])return!0}return!1},WOQLQuery.prototype.loadDefaultVocabulary=function(){var e={type:"rdf:type",label:"rdfs:label",Class:"owl:Class",comment:"rdfs:comment",range:"rdfs:range",domain:"rdfs:domain",subClassOf:"rdfs:subClassOf",string:"xsd:string",integer:"xsd:integer",decimal:"xsd:decimal",email:"xdd:email",json:"xdd:json",dateTime:"xsd:dateTime",date:"xsd:date",coordinate:"xdd:coordinate",line:"xdd:coordinatePolyline",polygon:"xdd:coordinatePolygon"};return e},WOQLQuery.prototype.loadVocab=function(e){(new WOQLQuery).quad("v:S","v:P","v:O","db:schema").execute(e).then(e=>{if(e.bindings&&e.bindings.length>0)for(var t=0;t<e.bindings.length;t++)for(var r in e.bindings[t]){var i=e.bindings[t][r];if("string"==typeof i){var n=i.split(":");2==n.length&&n[1]&&"_"!=n[0]&&(this.vocab[n[1]]=i)}}})},WOQLQuery.prototype.advanceCursor=function(e,t){this.cursor[e]=[t],this.cursor[e][1]={},this.cursor=this.cursor[e][1]},WOQLQuery.prototype.node=function(e,t){return new TripleBuilder(t=t||"triple",this.cursor,e,this)},WOQLQuery.prototype.setVocabulary=function(e){this.vocabulary=e},WOQLQuery.prototype.last=function(e,t){return this.chain_ended=!0,new TripleBuilder(e,this.cursor,t,this)},WOQLQuery.prototype.isPaged=function(e){e=e||this.query;for(const t of Object.keys(e)){if("limit"==t)return!0;if(-1!==this.paging_transitive_properties.indexOf(t))return this.isPaged(e[t][e[t].length-1])}},WOQLQuery.prototype.getPagingProperty=function(e,t){t=t||this.query;for(const i of Object.keys(t)){if(i==e)return t[i][0];if(-1!==this.paging_transitive_properties.indexOf(i)){var r=this.getPagingProperty(e,t[i][t[i].length-1]);if(void 0!==r)return r}}},WOQLQuery.prototype.setPagingProperty=function(e,t,r){r=r||this.query;for(const i of Object.keys(r))i==e?r[i][0]=t:-1!==this.paging_transitive_properties.indexOf(i)&&this.setPagingProperty(e,t,r[i][r[i].length-1]);return this},WOQLQuery.prototype.addStart=function(e,t){t=t||this.query;for(const i of Object.keys(t))if("limit"==i){var r={start:[0,t[i][1]]};t[i][1]=r}else-1!==this.paging_transitive_properties.indexOf(i)&&this.addStart(e,t[i][t[i].length-1]);return this},WOQLQuery.prototype.getContext=function(e){e=e||this.query;for(const i of Object.keys(e)){if("@context"==i)return e[i];if(-1!==this.paging_transitive_properties.indexOf(i)){var t=e[i][1],r=this.getContext(t);if(r)return r}}},WOQLQuery.prototype.nspaces=function(e){let t="";for(var r=0;r<e;r++)t+=" ";return t},WOQLQuery.prototype.prettyPrint=function(e,t,r,i){i||(this.indent=e),r=r||this.query;var n="",s=this,o=function(e){n="(";for(var t=0;t<e.length;t++)"string"==typeof e[t]?n+='"'+s.unclean(e[t])+'"':"object"==typeof e[t]?n+=JSON.stringify(e[t]):n+=e[t],t<e.length-1&&(n+=",");return n+=")"};for(var a in r)if("@context"==a);else{n+=i?a:"WOQL."+a;var u=r[a];if("and"==a||"or"==a){for(var c=[],l=0;l<u.length;l++){var d=this.prettyPrint(this.indent+e,t,u[l],!0);c.push(d)}n+="(\n"+this.nspaces(e)+"WOQL."+c.join(",\n"+this.nspaces(e)+"WOQL.")+"\n"+this.nspaces(e-this.indent)+")"}else if("object"==typeof u[u.length-1]){var p=[];for(l=0;l<u.length-1;l++)"limit"==a||"start"==a?p.push(u[l]):"string"==typeof u[l]?p.push('"'+s.unclean(u[l])+'"'):"object"==typeof u[l]?p.push(JSON.stringify(u[l])):p.push(u[l]);p.length?(n+=o(p),n+="from"==a?")\n    .":")."):n+="().",n+=this.prettyPrint(e,t,u[u.length-1],!0)}else n+=o(u)}return n},WOQLQuery.prototype.setLimit=function(e){return this.setPagingProperty("limit",e)},WOQLQuery.prototype.getLimit=function(){return this.getPagingProperty("limit")},WOQLQuery.prototype.getPage=function(){if(this.isPaged()){var e=this.getLimit();if(this.hasStart()){var t=this.getStart();return parseInt(t/e)+1}return 1}return!1},WOQLQuery.prototype.setPage=function(e){var t=this.getLimit()*(e-1);return this.hasStart()?this.setStart(t):this.addStart(t),this},WOQLQuery.prototype.hasStart=function(){return void 0!==this.getPagingProperty("start")},WOQLQuery.prototype.getStart=function(){return this.getPagingProperty("start")},WOQLQuery.prototype.nextPage=function(){return this.setPage(this.getPage()+1)},WOQLQuery.prototype.firstPage=function(){return this.setPage(1)},WOQLQuery.prototype.previousPage=function(){const e=this.getPage()-1;return e>0&&this.setPage(e),this},WOQLQuery.prototype.hasSelect=function(){return this.getPagingProperty("select")},WOQLQuery.prototype.getSelectVariables=function(e){e=e||this.query;for(const r of Object.keys(e)){if("select"==r)return e[r].slice(0,e[r].length-1);if(-1!==this.paging_transitive_properties.indexOf(r)){var t=this.getSelectVariables(e[r][e[r].length-1]);if(void 0!==t)return t}}},WOQLQuery.prototype.setStart=function(e){return this.setPagingProperty("start",e)},WOQLQuery.prototype.setPageSize=function(e){return this.setPagingProperty("limit",e),this.hasStart()?this.setStart(0):this.addStart(0),this},WOQLQuery.prototype.lastUpdate=function(e,t){return this.contains_update=!0,this.last(e,t)},WOQLQuery.prototype.context=function(e){this.cursor["@context"]=e},WOQLQuery.prototype.defaultContext=function(e){let t={};for(var r in FrameHelper.standard_urls)t[r]=FrameHelper.standard_urls[r];return t.scm=e+"/schema#",t.doc=e+"/document/",t.db=e+"/",t},WOQLQuery.prototype.execute=function(e){if(this.query["@context"])t=this.json();else{this.query["@context"]=this.defaultContext(e.connectionConfig.dbURL());var t=this.json()}return this.contains_update,e.select(!1,t)},WOQLQuery.prototype.json=function(e){return e?(this.query=e,this):this.query},WOQLQuery.prototype.when=function(e,t){return this.advanceCursor("when",e),t&&(this.cursor=t.json()),this},WOQLQuery.prototype.opt=function(e){return e?this.cursor.opt=[e]:(this.cursor.opt=[{}],this.cursor=this.cursor.opt[0]),this},WOQLQuery.prototype.from=function(e,t){return this.advanceCursor("from",e),t&&(this.cursor=t.json()),this},WOQLQuery.prototype.limit=function(e,t){return this.advanceCursor("limit",e),t&&(this.cursor=t.json()),this},WOQLQuery.prototype.start=function(e,t){return this.advanceCursor("start",e),t&&(this.cursor=t.json()),this},WOQLQuery.prototype.select=function(...e){this.cursor.select=e;var t=e.length;return"object"==typeof this.cursor.select[t-1]?this.cursor.select[t-1]=this.cursor.select[t-1].json():(this.cursor.select[t]={},this.cursor=this.cursor.select[t]),this},WOQLQuery.prototype.and=function(...e){this.cursor.and=[];for(var t=0;t<e.length;t++)e[t].contains_update&&(this.contains_update=!0),this.cursor.and.push(e[t].json());return this},WOQLQuery.prototype.or=function(...e){this.cursor.or=[];for(var t=0;t<e.length;t++)e[t].contains_update&&(this.contains_update=!0),this.cursor.or.push(e[t].json());return this},WOQLQuery.prototype.not=function(e){return e?(e.contains_update&&(this.contains_update=!0),this.cursor.not=[e.json()]):(this.cursor.not=[{}],this.cursor=this.cursor.not[0]),this},WOQLQuery.prototype.triple=function(e,t,r){return this.cursor.triple=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r)],this.last("triple",this.cleanSubject(e))},WOQLQuery.prototype.quad=function(e,t,r,i){return this.cursor.quad=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r),this.cleanGraph(i)],this.last("quad",this.cleanSubject(e))},WOQLQuery.prototype.eq=function(e,t){return this.cursor.eq=[this.cleanObject(e),this.cleanObject(t)],this.last()},WOQLQuery.prototype.sub=function(e,t){return this.cursor.sub=[this.cleanClass(e),this.cleanClass(t)],this.last("sub",e)},WOQLQuery.prototype.isa=function(e,t){return this.cursor.isa=[this.cleanClass(e),this.cleanClass(t)],this.last("isa",e)},WOQLQuery.prototype.trim=function(e,t){return this.cursor.trim=[e,t],this.last("trim",t)},WOQLQuery.prototype.eval=function(e,t){return this.cursor.eval=[e,t],this.last("eval",t)},WOQLQuery.prototype.plus=function(...e){return this.cursor.plus=e,this.last()},WOQLQuery.prototype.minus=function(...e){return this.cursor.minus=e,this.last()},WOQLQuery.prototype.times=function(...e){return this.cursor.times=e,this.last()},WOQLQuery.prototype.divide=function(...e){return this.cursor.divide=e,this.last()},WOQLQuery.prototype.exp=function(e,t){return this.cursor.exp=[e,t],this.last()},WOQLQuery.prototype.delete=function(e){return this.cursor.delete=[e],this.lastUpdate()},WOQLQuery.prototype.delete_triple=function(e,t,r){return this.cursor.delete_triple=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r)],this.lastUpdate("delete_triple",this.cleanSubject(e))},WOQLQuery.prototype.add_triple=function(e,t,r){return this.cursor.add_triple=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r)],this.lastUpdate("add_triple",this.cleanSubject(e))},WOQLQuery.prototype.delete_quad=function(e,t,r,i){return this.cursor.delete_quad=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r),this.cleanGraph(i)],this.lastUpdate("delete_quad",this.cleanSubject(e))},WOQLQuery.prototype.add_quad=function(e,t,r,i){return this.cursor.add_quad=[this.cleanSubject(e),this.cleanPredicate(t),this.cleanObject(r),this.cleanGraph(i)],this.lastUpdate("add_quad",this.cleanSubject(e))},WOQLQuery.prototype.update=function(e){return this.cursor.update=[e.json()],this.lastUpdate()},WOQLQuery.prototype.as=function(e,t){return t=-1==t.indexOf(":")?"v:"+t:t,this.cursor.as=[{"@value":e},t],this.lastUpdate()},WOQLQuery.prototype.addClass=function(e,t){return e?(t=t?this.cleanGraph(t):"db:schema",e=-1==e.indexOf(":")?"scm:"+e:e,this.add_quad(e,"rdf:type","owl:Class",t)):this},WOQLQuery.prototype.addProperty=function(e,t,r){if(e&&t){graph=r?this.cleanGraph(r):"db:schema",e=-1==e.indexOf(":")?"scm:"+e:e,t=-1==t.indexOf(":")?this.cleanType(t):t;var i=new TripleBuilder("add_quad",this.cursor,e,this);return WOQL.isLiteralType(t)?this.and(WOQL.add_quad(e,"rdf:type","owl:DatatypeProperty",graph),WOQL.add_quad(e,"rdfs:range",t,graph)):this.and(WOQL.add_quad(e,"rdf:type","owl:ObjectProperty",graph),WOQL.add_quad(e,"rdfs:range",t,graph)),i}return this},WOQLQuery.prototype.deleteClass=function(e,t){return e?(t=t?this.cleanGraph(t):"db:schema",e=-1==e.indexOf(":")?"scm:"+e:e,this.and(WOQL.delete_quad(e,"v:All","v:Al2",t),WOQL.delete_quad("v:Al3","v:Al4",e,t))):this},WOQLQuery.prototype.deleteProperty=function(e,t){return e?(t=t?this.cleanGraph(t):"db:schema",e=-1==e.indexOf(":")?"scm:"+e:e,this.and(WOQL.delete_quad(e,"v:All","v:Al2",t),WOQL.delete_quad("v:Al3","v:Al4",e,t))):this},WOQLQuery.prototype.abstract=function(e){return e=e||"v:".FrameHelper.genBNID(),this.quad(e,"tcs:tag","tcs:abstract","db:schema")},WOQLQuery.prototype.getEverything=function(e){return e?(e=this.cleanGraph(e),this.quad("v:Subject","v:Predicate","v:Object",e)):this.triple("v:Subject","v:Predicate","v:Object")},WOQLQuery.prototype.getAllDocuments=function(){return this.and(WOQL.triple("v:Document","rdf:type","v:Type"),WOQL.sub("v:Type","tcs:Document"))},WOQLQuery.prototype.documentMetadata=function(){return this.and(WOQL.triple("v:ID","rdf:type","v:Class"),WOQL.sub("v:Class","tcs:Document"),WOQL.opt().triple("v:ID","rdfs:label","v:Label"),WOQL.opt().triple("v:ID","rdfs:comment","v:Comment"),WOQL.opt().quad("v:Class","rdfs:label","v:Type","db:schema"),WOQL.opt().quad("v:Class","rdfs:comment","v:Type_Comment","db:schema"))},WOQLQuery.prototype.concreteDocumentClasses=function(){return this.and(WOQL.sub("v:Class","tcs:Document"),WOQL.not().abstract("v:Class"),WOQL.opt().quad("v:Class","rdfs:label","v:Label","db:schema"),WOQL.opt().quad("v:Class","rdfs:comment","v:Comment","db:schema"))},WOQLQuery.prototype.propertyMetadata=function(){return this.and(WOQL.or(WOQL.quad("v:Property","rdf:type","owl:DatatypeProperty","db:schema"),WOQL.quad("v:Property","rdf:type","owl:ObjectProperty","db:schema")),WOQL.opt().quad("v:Property","rdfs:range","v:Range","db:schema"),WOQL.opt().quad("v:Property","rdf:type","v:Type","db:schema"),WOQL.opt().quad("v:Property","rdfs:label","v:Label","db:schema"),WOQL.opt().quad("v:Property","rdfs:comment","v:Comment","db:schema"),WOQL.opt().quad("v:Property","rdfs:domain","v:Domain","db:schema"))},WOQLQuery.prototype.elementMetadata=function(){return this.and(WOQL.quad("v:Element","rdf:type","v:Type","db:schema"),WOQL.opt().quad("v:Element","tcs:tag","v:Abstract","db:schema"),WOQL.opt().quad("v:Element","rdfs:label","v:Label","db:schema"),WOQL.opt().quad("v:Element","rdfs:comment","v:Comment","db:schema"),WOQL.opt().quad("v:Element","rdfs:domain","v:Domain","db:schema"),WOQL.opt().quad("v:Element","rdfs:range","v:Range","db:schema"))},WOQLQuery.prototype.classMetadata=function(){return this.and(WOQL.quad("v:Element","rdf:type","owl:Class","db:schema"),WOQL.opt().quad("v:Element","rdfs:label","v:Label","db:schema"),WOQL.opt().quad("v:Element","rdfs:comment","v:Comment","db:schema"),WOQL.opt().quad("v:Element","tcs:tag","v:Abstract","db:schema"))},WOQLQuery.prototype.getDataOfClass=function(e){return this.and(WOQL.triple("v:Document","rdf:type",e),WOQL.opt().triple("v:Document","v:Property","v:Value"))},WOQLQuery.prototype.getDataOfProperty=function(e){return this.and(WOQL.triple("v:Document",e,"v:Value"),WOQL.opt().triple("v:Document","rdfs:label","v:Label"))},WOQLQuery.prototype.documentProperties=function(e){return this.and(WOQL.triple(e,"v:Property","v:Property_Value"),WOQL.opt().quad("v:Property","rdfs:label","v:Property_Label","db:schema"),WOQL.opt().quad("v:Property","rdf:type","v:Property_Type","db:schema"))},WOQLQuery.prototype.getDocumentConnections=function(e){return this.and(this.or(WOQL.triple(e,"v:Outgoing","v:Entid"),WOQL.triple("v:Entid","v:Incoming",e)),WOQL.isa("v:Entid","v:Enttype"),WOQL.sub("v:Enttype","tcs:Document"),WOQL.opt().triple("v:Entid","rdfs:label","v:Label"),WOQL.opt().quad("v:Enttype","rdfs:label","v:Class_Label","db:schema"))},WOQLQuery.prototype.getInstanceMeta=function(e){return this.and(WOQL.triple(e,"rdf:type","v:InstanceType"),WOQL.opt().triple(e,"rdfs:label","v:InstanceLabel"),WOQL.opt().triple(e,"rdfs:comment","v:InstanceComment"),WOQL.opt().quad("v:InstanceType","rdfs:label","v:ClassLabel","db:schema"))},WOQLQuery.prototype.simpleGraphQuery=function(){return this.and(WOQL.triple("v:Source","v:Edge","v:Target"),WOQL.isa("v:Source","v:Source_Class"),WOQL.sub("v:Source_Class","tcs:Document"),WOQL.isa("v:Target","v:Target_Class"),WOQL.sub("v:Target_Class","tcs:Document"),WOQL.opt().triple("v:Source","rdfs:label","v:Source_Label"),WOQL.opt().triple("v:Source","rdfs:comment","v:Source_Comment"),WOQL.opt().quad("v:Source_Class","rdfs:label","v:Source_Type","db:schema"),WOQL.opt().quad("v:Source_Class","rdfs:comment","v:Source_Type_Comment","db:schema"),WOQL.opt().triple("v:Target","rdfs:label","v:Target_Label"),WOQL.opt().triple("v:Target","rdfs:comment","v:Target_Comment"),WOQL.opt().quad("v:Target_Class","rdfs:label","v:Target_Type","db:schema"),WOQL.opt().quad("v:Target_Class","rdfs:comment","v:Target_Type_Comment","db:schema"),WOQL.opt().quad("v:Edge","rdfs:label","v:Edge_Type","db:schema"),WOQL.opt().quad("v:Edge","rdfs:comment","v:Edge_Type_Comment","db:schema"))},WOQLQuery.prototype.unclean=function(e){if("string"!=typeof e)return e;if(-1==e.indexOf(":"))return e;if("http"==e.substring(0,4))return e;var t=e.split(":")[1];return this.vocab&&this.vocab[t]?t:e},WOQLQuery.prototype.cleanSubject=function(e){return"string"!=typeof e?e:-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:"v:"+e},WOQLQuery.prototype.cleanPredicate=function(e){return-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:"v:"+e},WOQLQuery.prototype.cleanType=function(e){return-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:"v:"+e},WOQLQuery.prototype.cleanObject=function(e){return"string"!=typeof e||-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:"v:"+e},WOQLQuery.prototype.cleanGraph=function(e){return-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:"v:"+e},WOQLQuery.prototype.cleanClass=function(e){return-1!=e.indexOf(":")?e:this.vocab&&this.vocab[e]?this.vocab[e]:"v:"+e},TripleBuilder.prototype.graph=function(e){return this.graph=e,this},TripleBuilder.prototype.addPO=function(p,o,g){if(this.type)var ttype="isa"==this.type||"sub"==this.type?"triple":this.type;else var ttype="triple";var evstr=ttype+"('"+this.subject+"', '"+p+"', ";if(evstr+="string"==typeof o?"'"+o+"'":"object"==typeof o?JSON.stringify(o):o,"quad"==ttype.substring(ttype.length-4)){var g=g||(this.graph?this.graph:"db:schema");evstr+=", '"+g+"'"}evstr+=")";try{var unit=eval("new WOQLQuery()."+evstr);return this.addEntry(unit)}catch(e){return console.error(e),this}},TripleBuilder.prototype.addEntry=function(e){if(this.cursor[this.type]){var t={};t[this.type]=this.cursor[this.type],this.cursor.and=[t],delete this.cursor[this.type]}if(this.cursor.and)this.cursor.and.push(e.json());else{var r=e.json();r[this.type]?this.cursor[this.type]=r[this.type]:alert(JSON.stringify(r))}return this},TripleBuilder.prototype.isa=function(e){e=this.query.cleanClass(e);var t=new WOQLQuery.isa(this.subject,e);return this.addEntry(t)},TripleBuilder.prototype.sub=function(e){e=this.query.cleanClass(e);var t=new WOQLQuery.sub(this.subject,e);return this.addEntry(t)},TripleBuilder.prototype.label=function(e,t){return t=t||"en",this.addPO("rdfs:label",{"@value":e,"@language":t})},TripleBuilder.prototype.comment=function(e,t){return t=t||"en",this.addPO("rdfs:comment",{"@value":e,"@language":t})},TripleBuilder.prototype.parent=function(...e){for(var t=0;t<e.length;t++)pn=this.query.cleanClass(e[t]),this.addPO("rdfs:subClassOf",pn);return this},TripleBuilder.prototype.abstract=function(){return this.addPO("tcs:tag","tcs:abstract")},TripleBuilder.prototype.entity=function(){return this.parent("tcs:Entity")},TripleBuilder.prototype.relationship=function(){return this.parent("tcs:Relationship")},TripleBuilder.prototype.card=function(e,t){let r=this.subject;switch(this.subject+="_"+t,this.addPO("rdf:type","owl:Restriction"),this.addPO("owl:onProperty",r),t){case"max":this.addPO("owl:maxCardinality",e);break;case"min":this.addPO("owl:minCardinality",e);break;default:this.addPO("owl:cardinality",e)}let i=this.getO(r,"rdfs:domain");return i&&this.triples.push([i,"rdfs:subClassOf",this.subject]),this.subject=r,this},TripleBuilder.prototype.max=function(e){return this.card(e,"max")},TripleBuilder.prototype.cardinality=function(e){return this.card(e,"cardinality")},TripleBuilder.prototype.min=function(e){return this.card(e,"min")},TripleBuilder.prototype.s=function(e){return this.subject=this.query.cleanSubject(e),this},TripleBuilder.prototype.execute=function(e){return this.query.execute(e)},TripleBuilder.prototype.json=function(){return this.query.json()},module.exports=WOQL},function(e,t){function r(e,t,r){this.textdom=e,this.mode=t,i(r)&&(this.darkMode=r.darkMode),this.jsonldCheck(t)&&(this.mode="javascript")}function i(e){for(var t in e)return!1;return!0}r.prototype.colorizeTextArea=function(e){var t=CodeMirror.fromTextArea(this.textdom,{mode:this.mode,firstLineNumber:1,lineNumbers:!0,styleActiveLine:!0,lineWrapping:!0,smartIndent:!0,indentWithTabs:!0,newlineAndIndent:!0,autoCloseBrackets:!0,matchBrackets:{afterCursor:!0},extraKeys:{"Ctrl-F":"find",Tab:"autocomplete"},refresh:!0});return i(e)?this.setCodemirrorSize(t,e):t.setSize(e.width,e.height),t.defaultCharWidth("20px"),this.darkMode?t.setOption("theme","erlang-dark"):t.setOption("theme","neo"),t},r.prototype.setCodemirrorSize=function(e,t){switch(t){case"query":e.setSize("800","400");break;case"schema":e.setSize("auto","1550");break;case"document":e.setSize("765","500");break;case"api-doc":e.setSize("800","500");break;case"doc-json":e.setSize("1410","auto");break;case"doc-json-create":e.setSize("1410","500")}},r.prototype.updateTextArea=function(e){e.save(),setTimeout((function(){e.refresh()}),1),e.on("change",(function(){e.save()}))},r.prototype.colorizePre=function(){if(CodeMirror.runMode(this.textdom.innerText,this.mode,this.textdom),this.darkMode)var e="cm-s-erlang-dark";else e="cm-s-neo";return this.textdom.setAttribute("class","CodeMirror CodeMirror-wrap "+e+" terminus-wrap-text terminus-wrapper-height "),this.textdom},r.prototype.jsonldCheck=function(e){if("jsonld"==e)return!0},e.exports=r},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(5),s=r(31),o=r(2),a=r(1),u=r(0);function c(e,t,r,i){this.ui=i,this.query=t,this.bindings=e&&e.bindings?e.bindings:[]}function l(e,t,r,i,s,o){this.ui=e,this.result=t,this.woqlResult=r,this.max_cell_size=400,this.max_word_size=60,this.options=i,this.qPage=o,this.pman=new n,this.settings=s}c.prototype.count=function(){return this.bindings.length},c.prototype.shorten=function(e){return this.query.shorten(e)},c.prototype.hasBindings=function(e){return e?e.bindings&&e.bindings.length:this.bindings&&this.bindings.length},l.prototype.showTable=function(){return!this.options||void 0===this.options.show_table||this.options.show_table},l.prototype.orderColumns=function(e){var t=[];for(var r in e)-1==t.indexOf(r)&&t.unshift(r);return t},l.prototype.getAsDOM=function(e,t){var r=document.createElement("div");if(e.appendChild(r),t){var i=document.createElement("div");i.setAttribute("class","terminus-margin-top-bottom terminus-module-head"),i.appendChild(document.createTextNode("Results")),r.appendChild(i)}return this.result&&this.woqlResult.hasBindings(this.result)&&this.showTable()?(this.getTableDOM(this.result.bindings,r),r):(nor=document.createElement("div"),nor.setAttribute("class","terminus-no-res-alert"),nor.appendChild(document.createTextNode("No results available, create new ones to view them here...")),r.appendChild(nor),r)},l.prototype.getTableDOM=function(e,t){if(this.pman.pluginAvailable("datatables")){var r=this.getTable(e,!0,{});return t.appendChild(r.tab),new s.Datatables(this,this.qPage).draw(r,t),t.classList.add("terminus-expandable"),t.classList.add("terminus-dt-result-cont"),i}var i=this.getTable(e,!1,{});t.appendChild(i)},l.prototype.getDtTableDOMOnChange=function(e,t,r){var i=this.getTable(e,!0,r);return t.appendChild(i.tab),i},l.prototype.formatResultsForDatatableDisplay=function(e,t){for(var r=[],n={},s=[],o={},c={},l=this.orderColumns(e[0]),d=0;d<l.length;d++){var p=u.FrameHelper.validURL(l[d])?u.FrameHelper.labelFromURL(l[d]):l[d];r.push({data:p})}for(d=0;d<e.length;d++){n={};for(var h=0;h<l.length;h++){if("object"==i(e[d][l[h]])){var m=e[d][l[h]]["@value"]?e[d][l[h]]["@value"]:"Object?",f=document.createElement("p");f.setAttribute("class","terminus-table-content"),a.wrapShortenedText(f,m,this.max_cell_size,this.max_word_size),m=f.innerText}else if("string"==typeof e[d][l[h]]){if("unknown"==(m=e[d][l[h]]))m="";else if("doc:"==m.substring(0,4)){var g=document.createElement("a");g.setAttribute("title",m),g.setAttribute("href","#"),g.appendChild(document.createTextNode(m)),m=g.outerHTML}}n[p=u.FrameHelper.validURL(l[h])?u.FrameHelper.labelFromURL(l[h]):l[h]]=m}s.push(n)}return c.columns=r,o.data=s,o.recordsTotal=65,o.recordsFiltered=65,o.draw=t.draw,c.data=o,c},l.prototype.getTableBody=function(e,t){for(var r=document.createElement("tbody"),n=0;n<e.length;n++){for(var s=document.createElement("tr"),o=0;o<t.length;o++){var u=document.createElement("td");if("object"==i(e[n][t[o]]))var c=e[n][t[o]]["@value"]?e[n][t[o]]["@value"]:"?";else if("string"==typeof e[n][t[o]])c=e[n][t[o]];if("unknown"==c&&(c=""),"doc:"==c.substring(0,4)){var l=this.getDocumentLocalLink(c);u.appendChild(l)}else a.wrapShortenedText(u,c,this.max_cell_size,this.max_word_size);s.appendChild(u)}r.appendChild(s)}return r},l.prototype.selectDocumentNavBar=function(e){o.removeSelectedNavClass("terminus-selected"),document.getElementsByClassName("terminus-document-nav")[0].classList.add("terminus-selected"),o.displayDocumentSubMenus(e)},l.prototype.getDocumentLocalLink=function(e){var t=document.createElement("a");t.setAttribute("title",e),t.setAttribute("href","#");var r=this;return t.addEventListener("click",(function(){r.result.ui&&(r.result.ui.showDocument(this.title),r.selectDocumentNavBar(r.ui))})),t.appendChild(document.createTextNode(e)),t},l.prototype.getTable=function(e,t,r){var i=document.createElement("table");i.setAttribute("class","terminus-hover-table");for(var n=document.createElement("thead"),s=document.createElement("tr"),o=this.orderColumns(e[0]),a=0;a<o.length;a++){var c=document.createElement("th");c.setAttribute("class","terminus-table-header-full-css");var l=-1!=o[a].indexOf("http")?u.FrameHelper.labelFromURL(o[a]):o[a];c.appendChild(document.createTextNode(l)),s.appendChild(c)}if(n.appendChild(s),i.appendChild(n),t){var d=document.createElement("tbody");i.appendChild(d);var p={};return p.result=this.formatResultsForDatatableDisplay(e,r),p.tab=i,p}d=this.getTableBody(e,o);return i.appendChild(d),i},e.exports={WOQLResultsViewer:l,WOQLResult:c}},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(0),s=(r(8),r(103)),o=r(12),a=r(14),u=(r(15),r(1));function c(e,t,r){this.predicate=e,this.parent=t,this.cframe=this.parent.objframe.getPropertyClassFrame(this.predicate),this.originalValues=!1,this.changed=!1,this.values=[],this.renderer_type="property",this.options=this.setOptions(r)}function l(e,t,r){this.objframe=e,this.parent=t,this.properties={},this.originalProperties=!1,this.newProperties=[],this.renderer_type="object",this.options=this.setOptions(r)}c.prototype.setOptions=function(e){return TerminusDashboard.RenderingMap.decorateRenderer(e,this)},c.prototype.getOptionsForChild=function(){var e={};return this.options.features&&(e.features=this.options.features),this.options.controls&&(e.controls=this.options.controls),this.options},c.prototype.getOptionsForValue=function(e,t){return this.getOptionsForChild()},c.prototype.getOptionsForObject=function(e){return this.getOptionsForChild()},c.prototype.render=function(e){if(this.buildValueRenderers(),this.cframe&&this.cframe.property){this.viewer=e||this.getViewerForProperty();for(var t=0;t<this.values.length;t++){var r=this.values[t].render();r&&this.showFeature("body")&&this.viewer.addRenderedValue(r)}return this.viewer.render()}},c.prototype.buildValueRenderers=function(){var e=!1===this.originalValues;if(this.cframe=this.parent.objframe.getPropertyClassFrame(this.predicate),!this.cframe)return console.error("No frame for "+this.property()+" id: "+this.subject()),!1;if(this.cframe&&this.cframe.isData()){var t=this.getDataFramesToRender();0==t.length&&alert(this.predicate);for(var r=[],i=this.values.length;i<t.length;i++){var n=new s(t[i],i,this,this.getOptionsForValue(t[i],i));this.values.push(n),r.push(n.value())}e&&(this.originalValues=r)}else{e&&(this.originalValues=[]);var o=this.getChildrenToRender();if(o&&o.length)for(i=this.values.length;i<o.length;i++){var a=new l(o[i],this,this.getOptionsForObject(o[i]));e&&this.originalValues.push(a.subject()),this.values.push(a)}}},c.prototype.getDataFramesToRender=function(e){return this.parent.objframe.getDataFrames(this.property())},c.prototype.getChildrenToRender=function(e){if(n.FrameHelper.viewIncludesChildren(this.view,"property"))var t=this.parent.objframe.getChildren(this.property());else t=[];return t},c.prototype.redraw=function(){this.viewer.clear(),this.render(this.viewer,"x")},c.prototype.extract=function(){for(var e=[],t=0;t<this.values.length;t++){var r=this.values[t].extract();""!==r&&!1!==r&&void 0!==r&&e.push(r)}return this.cframe.isData(),e},c.prototype.currentViewer=function(){return this.viewerType},c.prototype.property=function(){return this.predicate},c.prototype.subject=function(){return!!this.parent&&this.parent.subject()},c.prototype.depth=function(){return!!this.parent&&this.parent.depth()},c.prototype.subjectClass=function(){return!!this.parent&&this.parent.subjectClass()},c.prototype.updated=function(){return!!this.parent&&this.parent.childUpdated()},c.prototype.range=function(){return this.cframe?this.cframe.range:""},c.prototype.getLabel=function(){return this.cframe?this.cframe.getLabel():""},c.prototype.getComment=function(){return!!this.cframe&&this.cframe.getComment()},c.prototype.load=function(e){return!!this.parent&&this.parent.load(e)},c.prototype.hasCardinalityRestriction=function(){return!!this.cframe&&this.cframe.hasRestriction()},c.prototype.getRestriction=function(){return!!this.cframe&&this.cframe.restriction},c.prototype.isClassChoice=function(){return!!this.cframe&&this.cframe.isClassChoice()},c.prototype.currentFacet=function(){return this.facet},c.prototype.save=function(){return!!this.parent&&this.parent.save()},c.prototype.cancel=function(){this.reset(),this.setMode("view")},c.prototype.getAvailableClassChoices=function(){if(this.cframe){var e=this.cframe.getClassChoices();if(this.parent){for(var t=[],r=0;r<e.length;r++){var i=this.parent.getClassMeta(e[r]),s=(s=!!i&&u.getVariableValueFromBinding("Label",i))||n.FrameHelper.labelFromURL(e[r]);t.push({value:e[r],label:s})}return t}return e}return!1},c.prototype.delete=function(){var e=this.predicate;e&&(this.reset(),this.parent.deleteProperty(e),this.parent.redraw())},c.prototype.add=function(e){this.parent.addProperty(this.property(),e),this.updated(),e&&(this.values[this.values.length-1].setMode(e),this.values[this.values.length-1].setNew()),this.redraw()},c.prototype.goToValue=function(e){this.viewer.goTo(this.subject(),this.property(),e)},c.prototype.addClass=function(e){this.parent.addPropertyClass(this.property(),e),this.updated();var t=this.values[this.values.length-1];t&&(t.setNew(),t.setMode("edit")),this.redraw(),t&&this.viewer.goTo(t.subject())},c.prototype.reset=function(){if(this.parent.objframe.reset(this.predicate),this.cframe&&this.cframe.isData()){for(var e=0;e<this.values.length;e++)this.values[e].reset();this.values=[]}else{var t=[];for(e=0;e<this.originalValues.length;e++)for(var r=0;r<this.values.length;r++)this.values[r].reset(),this.values[r].subject()==this.originalValues[e]&&t.push(this.values[r]);this.values=t}this.redraw(),this.parent.childUpdated()},c.prototype.deletePropertyValue=function(e,t){this.parent.objframe.removePropertyValue(this.property(),e,t);for(var r=[],i=0;i<this.values.length;i++)void 0===t?this.values[i].subject()==e?this.values[i].reset():r.push(this.values[i]):i!=t?(this.values[i].index=r.length,r.push(this.values[i])):this.values[i].reset();this.values=r,this.parent.childUpdated(),this.parent.redraw()},c.prototype.addPropertyValue=function(e){return this.updated(),this.parent.objframe.addPropertyValue(this.property(),e)},c.prototype.cardControlAllows=function(e){if(this.cframe.hasRestriction()){var t=this.cframe.restriction,r=this.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min)return!1}return!0},c.prototype.isNew=function(){return!!this.new_property||this.parent.isNew()},c.prototype.setNew=function(){this.new_property=!0},c.prototype.isUpdated=function(){if(this.values.length!=this.originalValues.length)return!0;for(var e=0;e<this.values.length;e++)if(this.cframe&&this.cframe.isData()){if(this.values[e].value()!=this.originalValues[e])return!0}else{if(this.values[e].subject()!=this.originalValues[e])return!0;if(this.values[e].isUpdated())return!0}return!1},c.prototype.childUpdated=function(){this.viewer.redrawHeader(),this.parent&&this.parent.childUpdated()},c.prototype.setMode=function(e){this.mode=e;for(var t=0;t<this.values.length;t++)this.values[t].setMode(e);this.redraw()},c.prototype.getViewableValues=function(){var e=[];if(this.cframe&&this.cframe.isData())for(var t=0;t<this.values.length;t++){var r=this.values[t].getSummary().long;e.push({label:r,value:t})}return e},c.prototype.hideDisabledControls=function(){return this.hide_disabled_controls},c.prototype.setFacet=function(e,t){if(this.facet=e,!t)for(var r=0;r<this.values.length;r++)this.values[r].parentFacetChange(e);this.redraw()},c.prototype.parentFacetChange=function(e){"page"==e&&"page"!=this.facet&&"multiline"!=this.facet&&this.setFacet("multiline"),"line"==e&&this.setFacet("label")},c.prototype.getDefaultFacets=function(){return{page:{label:"Full Page",value:"page",features:["facet","label","comment","id","control","type","cardinality","body","status","facet","view","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},multiline:{label:"Multiple Lines",value:"multiline",features:["facet","label","comment","id","control","type","cardinality","body","status","facet","view","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},line:{label:"Single Line",value:"line",features:["facet","label","comment","id","control","type","cardinality","body","status","facet","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},summary:{label:"Summary",value:"summary",features:["facet","satus","label","type","cardinality","body","status","facet","viewer"],controls:[]},label:{label:"Label",value:"label",features:["facet","status","label","summary"],controls:[]},icon:{label:"Snippet",value:"icon",features:["facet","summary"],controls:[]}}},c.prototype.getAvailableFacets=function(){return Object.values(this.facets)},c.prototype.getContentOrientation=function(e){return"page"==this.currentFacet()||this.containsPage()?"page":"line"==this.currentFacet()||"multiline"==this.currentFacet()||"summary"==this.currentFacet()?"line":"label"},c.prototype.getDefaultFacet=function(){return this.cframe&&this.cframe.isObject()?"page":"multiline"},c.prototype.hide=function(){this.setView("hidden")},c.prototype.show=function(){this.setView("full")},c.prototype.setView=function(e){this.view=e,this.redraw()},c.prototype.getAvailableViewers=function(){return"view"==this.mode?TerminusDashboard.RenderingMap.getAvailablePropertyViewers(this):TerminusDashboard.RenderingMap.getAvailablePropertyEditors(this)},c.prototype.nukeViewer=function(){this.viewer.remove()},c.prototype.containsPage=function(){if("icon"==this.currentFacet()||"label"==this.currentFacet())return!1;for(var e=0;e<this.values.length;e++)if("page"==this.values[e].facet)return!0;return!1},c.prototype.getViewerForProperty=function(e){return this.mode,new a.HTMLPropertyViewer(this)},c.prototype.getPropertyHeaderViewer=function(){return new a.HTMLPropertyHeaderViewer},c.prototype.getSummary=function(){var e="ok";this.isNew()?e="new":this.isUpdated()&&(e="updated");var t={status:e,valcount:this.values.length};t.long=1!=t.valcount?"("+t.valcount+") ":"";for(var r=0;r<this.values.length;r++)vsum=this.values[r].getSummary(),t.long+=vsum.long,r<this.values.length-1&&(t.long+=", ");return t},c.prototype.getFeaturesForFacet=function(e){return this.facets[e].features.concat(this.facets[e].controls)},c.prototype.showFeature=function(e){if(-1==this.features.indexOf(e)&&-1==this.controls.indexOf(e))return!1;if(-1!=["delete","clone","add"].indexOf(e)&&!this.cardControlAllows(e))return!1;return!(this.hideDisabledControls()&&-1!=["update","reset"].indexOf(e)&&!this.isUpdated())&&(("hide"!=e||"hidden"!=this.view)&&(("show"!=e||"hidden"==this.view)&&-1!=this.getFeaturesForFacet(this.facet).indexOf(e)))},l.prototype.setOptions=function(e){return TerminusDashboard.RenderingMap.decorateRenderer(e,this)},l.prototype.getOptionsForProperty=function(e){return this.options},l.prototype.render=function(e){for(var t in this.buildPropertyRenderers(),this.viewer=e||this.getViewerForObject(),this.properties){var r=this.properties[t].render();r&&this.showFeature("body")&&this.viewer.addRenderedProperty(t,r)}return this.viewer.render(this.view)},l.prototype.buildPropertyRenderers=function(){var e=this.getPropertiesToRender();!1===this.originalProperties&&(this.originalProperties=e);for(var t={},r=0;r<e.length;r++)void 0===this.properties[e[r]]?t[e[r]]=new c(e[r],this,this.getOptionsForProperty(e[r])):t[e[r]]=this.properties[e[r]],-1!=this.newProperties.indexOf(e[r])&&(t[e[r]].setNew(),t[e[r]].mode="edit");this.properties=t},l.prototype.subject=function(){return!!this.objframe&&this.objframe.subjid},l.prototype.subjectClass=function(){return!!this.objframe&&this.objframe.cls},l.prototype.getAvailableViewers=function(){return["html","json"]},l.prototype.depth=function(){return this.parent?this.parent.depth()+1:0},l.prototype.property=function(){return!!this.parent&&this.parent.property()},l.prototype.parentObject=function(){return!!(this.parent&&this.parent.parent&&this.parent.parent.objframe)&&this.parent.parent.objframe},l.prototype.root=function(){return!this.parent},l.prototype.load=function(e){this.controller?this.controller.ui.showDocument(e):this.parent&&this.parent.load(e)},l.prototype.copy=function(e){return new l(e=e||this.objframe,this.parent,this.options)},l.prototype.clone=function(){if(this.root())this.objframe=this.objframe.clone("_:"),this.objframe.newDoc=!0,this.setMode("edit");else{var e=this.objframe.clone(n.FrameHelper.genBNID()),t=this.parentObject(),r=this.property();if(t&&r){void 0===t.children[r]&&(t.children[r]=[]),t.children[r].push(e);var i=this.copy(e);this.parent.values.push(i)}this.parent.redraw()}},l.prototype.cancel=function(){this.reset(),this.setMode("view")},l.prototype.save=function(){if(this.controller)if(this.isNewDocument()){var e=this.inputID();"_:"==e&&(e="");var t=this.extract();this.controller.createDocument(e,t)}else{t=this.extract();this.controller.updateDocument(t)}else this.parent&&this.parent.save()},l.prototype.delete=function(){var e=this.subject();this.controller&&this.root()?(this.isNewDocument()||this.controller.deleteDocument(e),this.nukeViewer()):this.parent&&(this.parent.deletePropertyValue(e),this.parent.redraw())},l.prototype.reset=function(){this.objframe.reset();for(var e={},t=0;t<this.originalProperties.length;t++){var r=this.originalProperties[t];"object"==i(this.properties[r])&&(this.properties[r].reset(),e[r]=this.properties[r])}this.properties=e,this.redraw()},l.prototype.deleteProperty=function(e){this.objframe.removeProperty(e),delete this.properties[e],this.updated()},l.prototype.addProperty=function(e){this.objframe.addProperty(e),this.updated(),this.redraw()},l.prototype.addNewProperty=function(e){this.objframe.addProperty(e),this.updated(),this.newProperties.push(e),this.redraw(),this.goToProperty(e)},l.prototype.addPropertyClass=function(e,t){this.objframe.addProperty(e,t),this.updated()},l.prototype.changeClass=function(e){this.parent&&(this.parent.addClass(e),this.parent.deletePropertyValue(this.subject()))},l.prototype.getClassMeta=function(e){var t=this.getController();return!!(t&&t.classmeta&&t.classmeta[e])&&t.classmeta[e]},l.prototype.getController=function(){return this.controller?this.controller:!(!this.parent||!this.parent.parent)&&this.parent.parent.getController()},l.prototype.getClient=function(){return this.controller?this.controller.getClient():!(!this.parent||!this.parent.parent)&&this.parent.parent.getClient()},l.prototype.inputID=function(){return!!this.idDOM&&this.idDOM.value},l.prototype.isNew=function(){return!!this.new_object||(!!this.isPartOfNewDocument()||!!this.parent&&this.parent.isNew())},l.prototype.setNew=function(){this.new_object=!0},l.prototype.isUpdated=function(){var e=0;for(var t in this.properties){if(this.originalProperties[e]!=t)return!0;if(this.properties[t].isUpdated())return!0;e++}return e!=this.originalProperties.length},l.prototype.childUpdated=function(){this.viewer.redrawHeader(),this.parent&&this.parent.childUpdated()},l.prototype.updated=l.prototype.childUpdated,l.prototype.isNewDocument=function(){return!(!this.root()||!this.objframe.isnew())},l.prototype.isPartOfNewDocument=function(){return!!this.isNewDocument()||!(!this.parent||!this.parent.parent)&&this.parent.parent.isPartOfNewDocument()},l.prototype.setFacet=function(e,t){if(this.facet=e,!t)for(var r in this.properties)this.properties[r].parentFacetChange(e);this.parent?this.parent.redraw():this.redraw()},l.prototype.getDefaultFacets=function(){return{page:{label:"Full Page",value:"page",features:["facet","label","comment","id","control","type","body","status","facet","view","viewer"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},line:{label:"Single Line",value:"line",features:["facet","label","comment","id","type","body","status","facet"],controls:[]},summary:{label:"Summary",value:"summary",features:["facet","satus","label","type","summary","status","facet"],controls:[]},label:{label:"Label",value:"label",features:["facet","status","label"],controls:[]}}},l.prototype.getAvailableFacets=function(){return Object.keys(this.facets)},l.prototype.currentFacet=function(){return this.facet},l.prototype.getDefaultFacet=function(){if(!this.parent)return"page";var e=this.parent.currentFacet();return"page"==e?"page":"multiline"==e?"line":"line"==e?"summary":"label"},l.prototype.parentFacetChange=function(e){"page"==e&&this.setFacet("page"),"multiline"==e&&this.setFacet("summary"),"line"==e&&this.setFacet("summary"),"summary"==e&&this.setFacet("summary")},l.prototype.getContentOrientation=function(){return"page"==this.currentFacet()?"page":"line"==this.currentFacet()?"line":"label"},l.prototype.getLabel=function(){for(var e in this.properties)if("rdfs:label"==n.FrameHelper.getShorthand(e)||"rdfs:label"==e){var t=this.properties[e].values[0];if(t){var r=t.getSummary();if("empty"!=r.long)return r.long}}var i=this.subject();if(i&&"_:"==i.substring(0,2)){var s=this.subjectClass(),o=n.FrameHelper.getShorthand(s);o||(o=s);var a=o.split(":");return a.length>1?"New "+a[1]:"New Object"}return!1},l.prototype.getSummary=function(){var e={status:"ok"};for(var t in this.isUpdated()&&(e.status="updated"),this.isNew()&&(e.status="new"),e.propcount=0,this.properties)e.propcount++;return e.long=e.propcount+" properties",e},l.prototype.getObjectHeaderViewer=function(){return this.header_viewer},l.prototype.getViewerForObject=function(e){return"json"==e?new o.JSONObjectViewer(this):new o.HTMLObjectViewer(this)},l.prototype.getFeaturesForFacet=function(e){return this.facets[e].features.concat(this.facets[e].controls)},l.prototype.hideDisabledControls=function(){return this.hide_disabled_controls},l.prototype.showFeature=function(e){if(-1==this.features.indexOf(e)&&-1==this.controls.indexOf(e))return!1;if(-1!=["delete","clone","add"].indexOf(e)&&!this.cardControlAllows(e))return!1;return!(this.hideDisabledControls()&&-1!=["update","reset"].indexOf(e)&&!this.isUpdated())&&((!this.isNewDocument()||"clone"!=e)&&(("hide"!=e||"hidden"!=this.view)&&(("show"!=e||"hidden"==this.view)&&-1!=this.getFeaturesForFacet(this.facet).indexOf(e))))},l.prototype.cardControlAllows=function(e){if(!this.parent)return!0;if(this.parent.cframe.hasRestriction()){var t=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min&&r<=t.min)return!1}return!0},l.prototype.goToProperty=function(e){this.viewer.goTo(this.subject(),e)},l.prototype.setMode=function(e){for(var t in this.mode=e,this.properties)this.properties[t].setMode(e);this.viewer.redraw()},l.prototype.currentViewer=function(){return this.viewerType},l.prototype.setViewer=function(e){var t=this.getViewerForObject(e);t&&(this.viewerType=e,this.viewer=t,this.viewer.redraw())},l.prototype.setView=function(e){this.view=e,this.viewer.redraw()},l.prototype.hide=function(){this.setView("hidden")},l.prototype.show=function(){this.setView("full")},l.prototype.nukeViewer=function(){this.viewer.remove()},l.prototype.getViewableProperties=function(){return this.objframe.getFilledPropertyList()},l.prototype.getAddableProperties=function(){return this.objframe.getMissingPropertyList()},l.prototype.getPropertiesToRender=function(e){var t=this.standardSort;return e&&e.map&&e.map.patterns,t(this.objframe,(function(){return!0}))},l.prototype.standardSort=function(e,t){var r=[],i=n.FrameHelper.getStdURL("rdfs","label");e.dataframes[i]&&t(e,i,e.dataframes[i])&&r.push(i);var s=n.FrameHelper.getStdURL("rdfs","comment");for(var o in e.dataframes[s]&&r.push(s),e.dataframes)-1==r.indexOf(o)&&r.push(o);for(var o in e.children)-1==r.indexOf(o)&&r.push(o);return r},l.prototype.redraw=function(){this.viewer.clear(),this.render(this.viewer)},l.prototype.extractLDO=function(e){e["rdf:type"]=this.objframe.cls;var t={};return t[this.subject()]=e,t},l.prototype.extractJSONLD=function(e){return e["@type"]=this.objframe.cls,"_:"!=this.subject()&&(e["@id"]=this.subject()),this.objframe.jsonld_context&&(e["@context"]=this.objframe.jsonld_context),e},l.prototype.extract=function(){var e={};for(var t in this.properties){var r=this.properties[t].extract();n.FrameHelper.empty(r)||(e[t]=r)}return(!n.FrameHelper.empty(e)||!this.parent)&&this.extractJSONLD(e)},e.exports={ObjectRenderer:l,PropertyRenderer:c}},function(e,t,r){var i=this,n=(r(14),r(8),r(15));function s(e,t,r,i){this.frame=e,this.index=t,this.parent=r,this.originalValue=this.value(),this.renderer_type="value",this.options=this.setOptions(i)}s.prototype.depth=function(){return!!i.parent&&i.parent.depth()},s.prototype.property=function(){return!!i.parent&&i.parent.property()},s.prototype.subject=function(){return!!i.parent&&i.parent.subject()},s.prototype.subjectClass=function(){return!!i.parent&&i.parent.subjectClass()},s.prototype.type=function(){return!!i.frame&&i.frame.range},s.prototype.range=function(){return!!i.frame&&i.frame.range},s.prototype.value=function(){return!!i.frame&&i.frame.get()},s.prototype.isDocument=function(){return!!i.frame&&i.frame.isDocument()},s.prototype.currentViewer=function(){return i.viewerType},s.prototype.copy=function(e){var t=new s(e,!1,this.parent,this.options);return t.mode=this.mode,t.view=this.view,t},s.prototype.setFacet=function(e){this.facet=e,this.parent.redraw()},s.prototype.parentFacetChange=function(e){"page"==e&&this.setFacet("page"),"multiline"==e&&this.setFacet("line"),"line"==e&&this.setFacet("inline"),"summary"==e&&this.setFacet("icon")},s.prototype.getDefaultFacet=function(){return"page"==this.parent.currentFacet()||"multiline"==this.parent.currentFacet()?"line":"inline"},s.prototype.getAvailableFacets=function(){return Object.values(this.facets)},s.prototype.getDefaultFacets=function(){return{page:{label:"Full Page",value:"page",features:["facet","type","cardinality","body","status","facet","viewer","control"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},line:{label:"Single Line",value:"line",features:["facet","type","cardinality","body","status","facet","viewer","control"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},inline:{label:"Inline",value:"inline",features:["facet","type","cardinality","body","status","facet","viewer","control"],controls:["delete","clone","add","reset","cancel","update","mode","show","hide"]},label:{label:"Label",value:"label",features:["facet","status","body"],controls:[]},icon:{label:"Snippet",value:"icon",features:["facet","summary"],controls:[]}}},s.prototype.currentFacet=function(){return this.facet},s.prototype.setOptions=function(e){return TerminusDashboard.RenderingMap.decorateRenderer(e,this)},s.prototype.hideDisabledControls=function(){return this.hide_disabled_controls},s.prototype.setMode=function(e){this.mode=e,this.options.mode=e,this.viewerType=!1,this.redraw()},s.prototype.setView=function(e){this.view=e,this.options.view=e,this.redraw()},s.prototype.getAPIURL=function(e,t){if(this.parent&&this.parent.parent&&(client=this.parent.parent.getClient()))return client.dbURL()+e+"/"+t;return!1},s.prototype.getClient=function(){return!(!this.parent||!this.parent.parent)&&this.parent.parent.getClient()},s.prototype.getController=function(){return!(!this.parent||!this.parent.parent)&&this.parent.parent.getController()},s.prototype.DBURL=function(){return!!(this.parent&&this.parent.parent&&(client=this.parent.parent.getClient()))&&client.dbURL()},s.prototype.getEntityReference=function(e,t,r,i){if(this.parent&&this.parent.parent&&(client=this.parent.parent.getClient()))return client.getEntityReference(e,t,r,i)},s.prototype.badData=function(e){alert("bad data "+e)},s.prototype.setNew=function(){this.new_value=!0},s.prototype.isNew=function(){return!!this.new_value||this.parent.isNew()},s.prototype.isUpdated=function(){return this.frame.get()!=this.originalValue},s.prototype.getSummary=function(){var e={status:"ok"};this.isNew()?e.status="new":this.isUpdated()&&(e.status="updated");var t=this.frame.get();return t?t.length&&t.length>this.text_summary_length?e.long=t.substring(0,this.text_summary_length)+"... ("+t.length+" characters)":e.long=t:e.long="empty",e},s.prototype.cardControlAllows=function(e){if(this.parent.cframe.hasRestriction()){var t=this.parent.cframe.restriction,r=this.parent.values.length;if(("add"==e||"clone"==e)&&t.max&&r>=t.max)return!1;if("delete"==e&&t.min&&r<=t.min)return!1}return!0},s.prototype.set=function(e){this.frame.set(e),this.viewer.redrawHeader(),this.parent.childUpdated()},s.prototype.delete=function(){this.parent.deletePropertyValue(this.value(),this.index),this.parent.parent.redraw()},s.prototype.load=function(e){this.parent.load(e)},s.prototype.hide=function(){this.setView("hidden")},s.prototype.show=function(){this.setView("full")},s.prototype.cancel=function(){this.reset(),this.setMode("view")},s.prototype.save=function(){this.parent&&this.parent.save()},s.prototype.reset=function(){this.set(this.originalValue),this.redraw()},s.prototype.clone=function(){var e=this.parent.addPropertyValue(this.value()),t=this.copy(e);t.setNew(),t.mode="edit",t.index=this.parent.values.length,this.parent.values.push(t),this.parent.childUpdated(),this.parent.redraw(),this.parent.goToValue(this.parent.values.length-1)},s.prototype.getViewerForValue=function(){return new n.HTMLDataViewer(this)},s.prototype.getFeaturesForFacet=function(e){return this.facets[e].features.concat(this.facets[e].controls)},s.prototype.showFeature=function(e){if(-1==this.features.indexOf(e)&&-1==this.controls.indexOf(e))return!1;if(-1!=["delete","clone","add"].indexOf(e)&&!this.cardControlAllows(e))return!1;return!(this.hideDisabledControls()&&-1!=["update","reset"].indexOf(e)&&!this.isUpdated())&&(("hide"!=e||"hidden"!=this.view)&&(("show"!=e||"hidden"==this.view)&&-1!=this.getFeaturesForFacet(this.facet).indexOf(e)))},s.prototype.render=function(e){return this.viewer=e||this.getViewerForValue(),this.viewer.render()},s.prototype.extract=function(){var e=this.value();if(""===e||!1===e)return e;if(this.frame.isDatatypeProperty()){var t={"@value":this.value()};return this.frame.isString()?t["@language"]=this.frame.lang():t["@type"]=this.type(),t}return this.frame.isChoice()||this.frame.isDocument()?{"@id":e}:void 0},s.prototype.getValueHeaderViewer=function(){return new n.HTMLDataHeaderViewer},s.prototype.getDataValueViewer=function(){return this.viewerType||(this.viewerType=this.getViewerForDataValue()),TerminusDashboard.RenderingMap.getViewer(this.viewerType,this.viewerOptions)},s.prototype.getAvailableViewers=function(){var e=this.frame.getTypeShorthand(),t=this.frame.ftype();return"view"==this.mode?TerminusDashboard.RenderingMap.getAvailableDataViewers(e,t):TerminusDashboard.RenderingMap.getAvailableDataEditors(e,t)},s.prototype.setViewer=function(e){this.viewerType=e,this.redraw()},s.prototype.getViewerForDataValue=function(){var e=this.frame.getTypeShorthand(),t=this.frame.ftype();return"edit"==this.mode?TerminusDashboard.RenderingMap.getEditorForDataFrame(e,t):TerminusDashboard.RenderingMap.getViewerForDataFrame(e,t)},s.prototype.redraw=function(){this.viewer.clear(),this.render(this.viewer)},e.exports=s},function(module,exports,__webpack_require__){var TerminusClient=__webpack_require__(0);function WOQLQueryView(e){this.client=e}WOQLQueryView.prototype.options=function(e){return this.options=e,this},WOQLQueryView.prototype.setQuery=function(e){return this.query=e,this},WOQLQueryView.prototype.setRenderer=function(e){return this.renderer=e,this},WOQLQueryView.prototype.render=function(){if(this.renderer)return this.query&&this.renderer.set(this.query),this.renderer.render(this)},WOQLQueryView.prototype.parseText=function(text,format){try{var WOQL=TerminusClient.WOQL;if("json"==format){var qval=JSON.parse(text);return WOQL.json(qval)}var nw=eval("WOQL."+text);return nw}catch(e){this.error("Failed to parse Query "+e.toString())}},WOQLQueryView.prototype.submitQuery=function(e){},WOQLQueryView.prototype.error=function(e){console.log(e)},WOQLQueryView.prototype.serialise=function(e,t){return"json"==t?JSON.stringify(e.json(),0,2):e.prettyPrint(4)},module.exports=WOQLQueryView},function(e,t,r){var i=r(4),n=r(0),s=r(16),o=r(64),a=r(65),u=r(66),c=r(67);function l(e,t,r){this.client=e,this.qp=t,this.config=r,this.container=document.createElement("span"),this.container.setAttribute("class","terminus-result-pane")}l.prototype.options=function(e){return this.showConfig=!(!e||void 0===e.showConfig)&&e.showConfig,this.editConfig=!(!e||void 0===e.editConfig)&&e.editConfig,this.changeViewType=!e||void 0===e.changeViewType||e.changeViewType,this.intro=!(!e||void 0===e.intro)&&e.intro,this.renderers=e&&e.renderers?e.renderers:{table:new o,graph:new a,stream:new u,chooser:new c},this.config&&(this.viewers=[this.config]),this.viewers=e&&void 0!==e.viewers?this.viewers.concat(e.viewers):this.viewers,this.currentViewer=0,this},l.prototype.getAsDOM=function(){var e=this;if(this.intro){var t="string"==typeof this.intro?document.createTextNode(this.intro):this.intro;this.container.appendChild(t)}var r=document.createElement("span");if(r.setAttribute("class","pane-config-icons"),this.container.appendChild(r),this.resultDOM=document.createElement("span"),this.resultDOM.setAttribute("class","terminus-result-view"),this.result&&this.resultDOM.appendChild(this.getResultDOM()),this.container.appendChild(this.resultDOM),this.showConfig){var i=function(){r.title="Click to Hide View Configuration",u.setAttribute("class","fas fa fa-times-circle"),r.nextSibling?(c.container.insertBefore(o,r.nextSibling),c.input.snippet.value&&c.input.stylizeSnippet()):(c.container.appendChild(o),c.input.snippet.value&&c.input.stylizeSnippet())},n=function(){r.title="Click to View Configuration",u.setAttribute("class","terminus-result-view-icon "+c.getViewConfigIconClass()),c.container.removeChild(o)};this.showingQuery="icon"!=this.showConfig;var s=this.editConfig?"edit":"view";this.input=this.createInput(s);var o=this.input.getAsDOM(),a=document.createElement("span");a.addEventListener("mouseover",(function(){this.style.cursor="pointer"})),a.setAttribute("class","result-pane-config");var u=document.createElement("i");a.appendChild(u),r.appendChild(a);var c=this;a.addEventListener("click",(function(){e.showingQuery?n():i(),e.showingQuery=!e.showingQuery})),i(),"icon"==this.showConfig&&n()}return this.changeViewType&&(cvicons=this.getViewTypeIconDOM(o),cvicons&&r.prepend(cvicons)),this.container},l.prototype.getViewConfigIconClass=function(){return this.changeViewType&&this.viewers.length>1?"fas fa fa-vial":this.viewers[this.currentViewer].icon?this.viewers[this.currentViewer].icon:this.getDefaultViewerIcon(this.viewers[this.currentViewer]).icon},l.prototype.getViewTypeIconDOM=function(e,t){var r=document.createElement("span");if(r.setAttribute("class","terminus-result-icons"),this.viewers.length>1)for(var i=0;i<this.viewers.length;i++){var n=this.getIconForViewer(this.viewers[i],i,r);r.appendChild(n)}return r},l.prototype.changeViewerType=function(e,t){this.currentViewer=t,this.config=e,this.input.setQuery(e),this.input.submit(this.input.qObj)},l.prototype.getDefaultViewerIcon=function(e){return{table:{label:"Table",icon:"fa fa-table"},graph:{label:"Graph",icon:"fas fa-code-branch"},chooser:{label:"Drop-down List",icon:"fas fa-caret-down"},stream:{label:"Result Stream",icon:"fa fa-list"}}[e.type]},l.prototype.getIconForViewer=function(e,t,r){var i=this,s=document.createElement("span"),o=document.createElement("i"),a=this.getDefaultViewerIcon(e);o.title=e.label?e.label:a.label;var u=e.icon?e.icon:a.icon;return o.setAttribute("class",u),o.classList.add("terminus-result-view-icon"),s.appendChild(o),this.currentViewer==t?(s.setAttribute("class","result-icon-selected selected terminus-result-selected"),o.classList.add("terminus-view-selected")):(s.setAttribute("class","result-icon-selectable selectable"),s.addEventListener("mouseover",(function(){this.style.cursor="pointer"}))),s.addEventListener("click",(function(){i.changeViewerType(e,t),n.FrameHelper.removeChildren(r);for(var s=0;s<i.viewers.length;s++){var o=i.getIconForViewer(i.viewers[s],s,r);r.appendChild(o)}})),s},l.prototype.createInput=function(e){var t=new i("rule",e);this.config&&t.setQuery(this.config);var r=this;return t.submit=function(e){r.updateView(e)},t},l.prototype.setResult=function(e){this.result=e},l.prototype.updateResult=function(e){this.result=e,n.FrameHelper.removeChildren(this.resultDOM),this.resultDOM.appendChild(this.getResultDOM())},l.prototype.updateView=function(e){this.config=e,n.FrameHelper.removeChildren(this.resultDOM),this.result&&this.resultDOM.appendChild(this.getResultDOM())},l.prototype.getResultDOM=function(){var e=document.createElement("span");e.setAttribute("class","terminus-query-results");var t=this.config.create(this.client,this.renderers,s.initialiseDataRenderers),r=this;return t.notify=function(e){r.qp.updateResult(e)},this.result.first(),t.setResult(this.result),e.appendChild(t.render()),e},e.exports=l},function(e,t){function r(e){this.svg,this.visid=function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));for(var r="",i=0;i<e;i++)r+=t[Math.floor(Math.random()*t.length)];return r}(8),this.currentDate=Date.now()/1e3,this.link_elements,this.node_elements,this.container=!1,this.loadedNodes={},this.focusNodes=[],this.nodes,this.links,this.selected_id,this.setConfigOptions(e)}r.prototype.load=function(e){this.initD3(this.d3DOM),this.loadNewData(),this.updateGraph(),e&&this.updateSimulation("init")},r.prototype.setData=function(e,t){this.result&&this.clear(),this.result=e,this.load(t)},r.prototype.loadNewData=function(){this.nodes=jQuery.extend(!0,[],this.result.getNodes());for(var e=0;e<this.nodes.length;e++)this.loadedNodes[this.nodes[e].id]=this.nodes[e];this.links=this.result.getEdges()},r.prototype.updateData=function(e,t){this.setFocusNodeFromResult(e),this.result=e,this.reload(t,"update",this.fix_nodes)},r.prototype.setFocusNodeFromResult=function(e){var t=e.getFocusNode();t&&(this.selected_id=t,this.focusNodes.push(t))},r.prototype.setFilter=function(e,t){this.simulation.stop(),this.reload(t,"filter",!0)},r.prototype.wake=function(){this.simulation&&this.updateSimulation("wake")},r.prototype.hibernate=function(){this.simulation.stop()},r.prototype.reload=function(e,t,r){for(var i=0;i<this.nodes.length;i++)this.loadedNodes[this.nodes[i].id]=this.nodes[i];var n=jQuery.extend(!0,[],this.result.getNodesAndFringes());this.nodes=[];var s=this.loadedNodes[this.selected_id];for(i=0;i<n.length;i++){var o=n[i];this.loadedNodes[o.id]?o.id==this.selected_id?(this.loadedNodes[o.id].fx=this.loadedNodes[o.id].x,this.loadedNodes[o.id].fy=this.loadedNodes[o.id].y):r?this.loadedNodes[o.id].x&&(this.loadedNodes[o.id].fx=this.loadedNodes[o.id].x,this.loadedNodes[o.id].fy=this.loadedNodes[o.id].y):(this.loadedNodes[o.id].fx=null,this.loadedNodes[o.id].fy=null):(this.explode_out&&s.x&&(o.x=s.x,o.y=s.y),this.loadedNodes[o.id]=o),this.nodes.push(this.loadedNodes[o.id])}this.links=this.result.getLinks(),this.updateGraph(),e&&this.updateSimulation(t)},r.prototype.clear=function(){this.nodes=[],this.loadedNodes={},this.links=[],this.updateGraph(),jQuery(this.d3DOM).empty(),this.scale_factor=1},r.prototype.initDOM=function(e){this.width||(this.width=this.setWidth()),this.height||(this.height=this.setHeight()),this.d3DOM=e,this.result&&this.load(!0)},r.prototype.getAsDOM=function(){var e=document.createElement("div");return e.setAttribute("class","terminus-gviz-panel"),e.setAttribute("id",this.visid),e.setAttribute("width","100%"),this.container=e,e},r.prototype.setWidth=function(){if(this.container&&this.container.clientWidth)this.width=this.container.clientWidth;else if(this.container.parentNode&&this.container.parentNode.clientWidth)this.width=this.container.parentNode.clientWidth;else{var e=jQuery(this.container).width();0==e&&(e=jQuery(this.container.parentNode).width()),0==e&&(e=800),this.width=e}return this.width},r.prototype.setHeight=function(){if(this.container&&this.container.clientHeight)this.height=this.container.clientHeight;else if(this.container.parentNode&&this.container.parentNode.clientHeight)this.height=this.container.parentNode.clientHeight;else{var e=jQuery(this.container).height();0==e&&(e=jQuery(this.container.parentNode).height()),0==e&&(e=400),this.height=e}return this.height},r.prototype.initD3=function(e){var t=this;this.svg=d3.select(e).append("svg").attr("width",this.width).attr("height",this.height);this.simulation=d3.forceSimulation().force("link",d3.forceLink().distance((function(e){return t.getLinkDistance(e)})).id((function(e){return e.id}))).force("charge",d3.forceManyBody().strength((function(e){return t.getCharge(e)}))).force("collision",d3.forceCollide().radius((function(e){return t.getCollisionRadius(e)}))).force("center",d3.forceCenter(this.width/2,this.height/2)),this.drag_drop=d3.drag().on("start",(function(e){e.fx=e.x,e.fy=e.y})).on("drag",(function(e){t.simulation.restart(),e.fx=d3.event.x,e.fy=d3.event.y})).on("end",(function(e){e.fx=null,e.fx=null,t.simulation.stop()})),this.svg.append("rect").attr("width",this.width).attr("height",this.height).style("fill","none").style("pointer-events","all").call(d3.zoom().on("zoom",(function(){t.zoomed()}))),this.link_group=this.svg.append("g").classed("links",!0),this.node_group=this.svg.append("g").classed("nodes",!0)},r.prototype.zoomed=function(){this.current_transform=d3.event.transform,this.node_elements&&this.node_elements.attr("transform",d3.event.transform),this.link_elements&&this.link_elements.attr("transform",d3.event.transform)},r.prototype.updateGraph=function(e,t){var r=this,i=function(e){r.nodeSelected(e)};e=void 0!==e?e:this.nodes,t=void 0!==t?t:this.links,this.node_elements=this.node_group.selectAll("g").data(e),this.node_elements.exit().remove();var n=this.node_elements.enter().append("g");n.append("circle").style("opacity",.99).attr("r",(function(e){return r.getRadius(e)})).attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).attr("type",(function(e){return r.isFringe(e)?"fringe":"node"})).call(r.drag_drop).on("mouseover",(function(e){d3.select(this).style("cursor","pointer")})).on("mouseout",(function(e){d3.select(this).style("cursor","default")})).on("click",i),n.append("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})).text((function(e){return r.getNodeIconUnicode(e)})).call(r.drag_drop).on("mouseover",(function(e){d3.select(this).style("cursor","pointer")})).on("mouseout",(function(e){d3.select(this).style("cursor","default")})).on("click",i),this.node_elements=n.merge(this.node_elements),this.styleNodeElements(),this.link_elements=this.link_group.selectAll("line").data(t),this.link_elements.exit().remove();var s=this.link_elements.enter().append("line");this.link_elements=s.merge(this.link_elements),this.styleLinkElements(),this.current_transform&&(this.node_elements&&this.node_elements.attr("transform",this.current_transform),this.link_elements&&this.link_elements.attr("transform",this.current_transform))},r.prototype.updateSimulation=function(e){var t=this,r=function(){t.node_elements.selectAll("circle").attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),t.node_elements.selectAll("text").attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})),t.link_elements.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y}))};this.show_force?this.simulation.nodes(this.nodes).on("tick",r).force("link").links(this.links):this.simulation.nodes(this.nodes).on("end",r).force("link").links(this.links),this.nodes.length&&("wake"==e||"init"==e?this.simulation.restart():"filter"==e?this.simulation.restart():this.simulation.alpha(1).restart())},r.prototype.styleNodeElements=function(){var e=this;this.node_elements&&this.node_elements.each((function(t){var r=d3.select(this),i=r.select("circle");i.select("title").remove(),i.style("fill",e.getNodeColour(t)),i.attr("r",e.getRadius(t)),i.classed("highlighted",(function(t){return-1!=e.focusNodes.indexOf(t.id)})),i.append("title").classed("terminus-gnode-title",!0).text(e.getNodeText(t));var n=r.select("text");n.select("title").remove(),n.attr("text-anchor","middle").attr("title",e.getNodeText(t)).attr("dominant-baseline","central").style("font-family","'"+e.fontfam+"'").style("font-weight",e.getNodeIconWeight(t)).style("font-size",e.getNodeIconSize(t)).style("fill",e.getNodeIconColour(t)).text(e.getNodeIconUnicode(t)).append("title").classed("terminus-gnode-title",!0).text(e.getNodeText(t))}))},r.prototype.styleLinkElements=function(){var e=this;this.link_elements&&this.link_elements.each((function(t){var r=d3.select(this);r.select("title").remove(),r.attr("stroke-width",e.getLineWidth(t)),r.attr("marker-end",e.getEdgeArrow(t)),r.style("stroke",e.getEdgeColour(t)),r.append("title").classed("terminus-glink-title",!0).text(e.getLinkText(t))}))},r.prototype.getEdgeArrow=function(e){if(e){var t=this.getEdgeDirection(e),r=this.getEdgeColour(e);return this.svg.append("svg:defs").selectAll("marker").data([void 0]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",22).attr("refY",0).attr("markerWidth",this.getArrowWidth(e)).attr("markerHeight",this.getArrowHeight(e)).attr("orient","auto").attr("markerUnits","userSpaceOnUse").append("svg:path").attr("d",t).style("fill",r),"url(#undefined)"}return""},r.prototype.nodeSelected=function(e){this.selected_id==e.id&&this.selection_grows?(this.selection_grows=!1,this.styleNodeElements()):(this.selection_grows=!0,this.selected_id=e.id,this.styleNodeElements(),this.isFringe(e))},r.prototype.getScaleTransform=function(e,t,r){return"scale("+r+") translate("+e+","+t+")"},r.prototype.scale=function(e){new_mol_width=this.width*e,new_mol_height=this.height*e;var t=this.height-new_mol_height,r=this.width-new_mol_width,i=this;this.node_elements&&this.node_elements.transition().duration(750).attr("transform",(function(n){return i.getScaleTransform(r,t,e)})),this.link_elements&&this.link_elements.transition().duration(750).attr("transform",(function(n){return i.getScaleTransform(r,t,e)})),this.scale_factor=e,this.svg.selectAll("marker").attr("markerWidth",this.getArrowWidth()).attr("markerHeight",this.getArrowHeight())},r.prototype.scaleToFit=function(){0!==this.nodes.length&&(min_x=d3.min(this.nodes.map((function(e){return e.x}))),min_y=d3.min(this.nodes.map((function(e){return e.y}))),max_x=d3.max(this.nodes.map((function(e){return e.x}))),max_y=d3.max(this.nodes.map((function(e){return e.y}))),mol_width=max_x-min_x,mol_height=max_y-min_y,mol_width*=1.05,mol_height*=1.05,width_ratio=this.width/mol_width,height_ratio=this.height/mol_height,min_ratio=Math.min(width_ratio,height_ratio),min_ratio<1&&this.scale(min_ratio))},r.prototype.recentre=function(e){this.translated=!0,this.dcx=this.width/2-e.x,this.dcy=this.height/2-e.y,this.node_elements.attr("transform","translate("+this.dcx+","+this.dcy+")"),this.link_elements.attr("transform","translate("+this.dcx+","+this.dcy+")"),this.text_elements.attr("transform","translate("+this.dcx+","+this.dcy+")")},r.prototype.setConfigOptions=function(e){this.fontfam=e&&e.fontfamily?e.fontfamily():"Font Awesome 5 Free",this.selected_grows=!e||void 0===e.selected_grows()||e.selected_grows(),this.show_force=!e||void 0===e.show_force()||e.show_force(),this.fix_nodes=!(!e||void 0===e.fix_nodes())&&e.fix_nodes(),this.explode_out=!(!e||void 0===e.explode_out())&&e.explode_out(),this.width=!(!e||!e.width())&&e.width(),this.height=!(!e||!e.height())&&e.height(),this.defaults={edge:{type:"edge",distance:e&&e.edge&&e.edge.distance?e.edge.distance:70,arrow:e&&e.edge&&e.edge.arrow?e.edge.arrow:{width:36,height:16},symmetric:!(e&&e.edge&&e.edge.symmetric)||e.edge.symmetric,color:e&&e.edge&&e.edge.color?e.edge.color:[150,150,255],weight:e&&e.edge&&e.edge.weight?e.edge.weight:.3,size:e&&e.edge&&e.edge.size?e.edge.size:4},node:{type:"node",radius:e&&e.node&&e.node.radius?e.node.radius:14,charge:e&&e.node&&e.node.charge?e.node.charge:-60,collisionRadius:e&&e.node&&e.node.collisionRadius?e.node.collisionRadius:20,color:e&&e.node&&e.node.color?e.node.color:[0,255,255],icon:{weight:e&&e.node&&e.node.icon&&e.node.icon.weight?e.node.icon.weight:900,color:e&&e.node&&e.node.icon&&e.node.icon.color?e.node.icon.color:[0,0,255],unicode:e&&e.node&&e.node.icon&&e.node.icon.unicode?e.node.icon.unicode:"",size:e&&e.node&&e.node.icon&&e.node.icon.size?e.node.icon.size:10,faclass:e&&e.node&&e.node.icon&&e.node.icon.faclass?e.node.icon.faclass:"fas fa-user-astronaut"},text:{color:e&&e.node&&e.node.text&&e.node.text.color?e.node.text.color:[0,0,0],size:e&&e.node&&e.node.icon&&e.node.text.size?e.node.text.size:10},border:{color:e&&e.node&&e.node.border&&e.node.border.color?e.node.border.color:[0,0,0],size:e&&e.node&&e.node.border&&e.node.border.size?e.node.border.size:10}}}},r.prototype.getMultiplier=function(e){var t=e&&e.size?e.size:1;return e.id==this.selected_id&&this.selection_grows&&(t*=2),t},r.prototype.getRadius=function(e){var t=e&&e.radius?e.radius:this.defaults.node.radius,r=this.scale_factor?Math.min(this.scale_factor*t,t):t;return r*=this.getMultiplier(e)},r.prototype.getCollisionRadius=function(e){var t=e&&e.collisionRadius?e.collisionRadius:this.defaults.node.collisionRadius;return(this.scale_factor?Math.min(this.scale_factor*t,t):t)*this.getMultiplier(e)},r.prototype.getCharge=function(e){var t=e&&e.charge?e.charge:this.defaults.node.charge;if(t<0)var r=this.scale_factor?Math.max(this.scale_factor*t,t):t;else r=this.scale_factor?Math.min(this.scale_factor*t,t):t;return r*this.getMultiplier(e)},r.prototype.getLinkDistance=function(e){var t=e&&e.distance?e.distance:this.defaults.edge.distance;return this.scale_factor?Math.min(this.scale_factor*t,t):t},r.prototype.getNodeIconSize=function(e){return e&&e.icon&&e.icon.size?e.icon.size+"em":this.getMultiplier(e)+"em"},r.prototype.getNodeColour=function(e){var t=e&&e.color?e.color:this.defaults.node.color;return this.isFringe(e)?"rgba("+t.join(",")+",0.25)":"rgb("+t.join(",")+")"},r.prototype.getNodeIcon=function(e){return e&&e.icon&&e.icon.faclass?e.icon.faclass:this.defaults.node.icon.faclass},r.prototype.getNodeIconUnicode=function(e){return e&&e.icon&&e.icon.unicode?e.icon.unicode:this.defaults.node.icon.unicode},r.prototype.getNodeIconWeight=function(e){return e&&e.icon&&e.icon.weight?e.icon.weight:this.defaults.node.icon.weight},r.prototype.getNodeIconColour=function(e){var t=e&&e.icon&&e.icon.color?e.icon.color:this.defaults.node.icon.color;return this.isFringe(e)?"rgba("+t.join(",")+",0.25)":"rgb("+t.join(",")+")"},r.prototype.getEdgeColour=function(e){var t=e&&e.color?e.color:this.defaults.edge.color,r=e&&e.weight?e.weight:this.defaults.edge.weight;return"rgba("+t.concat([r]).join(",")+")"},r.prototype.getEdgeDirection=function(e){return e&&e.symmetric?"M10,-5 L0,0 L10,5":"M0,-5 L10,0 L0,5"},r.prototype.getLineWidth=function(e){return e&&e.size?e.size:this.defaults.edge.size},r.prototype.getNodeText=function(e){return e&&e.text?e.text:e.id},r.prototype.getLinkText=function(e){return e&&e.text?e.text:e&&e.id?e.id:""},r.prototype.getArrowWidth=function(e){var t=e&&e.arrow&&e.arrow.width?e.arrow.width:this.defaults.edge.arrow.width;return this.scale_factor?Math.min(this.scale_factor*t,t):t},r.prototype.getArrowHeight=function(e){var t=e&&e.arrow&&e.arrow.height?e.arrow.height:this.defaults.edge.arrow.height;return this.scale_factor?Math.min(this.scale_factor*t,t):t},r.prototype.isNeighbourLink=function(e,t){return t.target.id===e.id||t.source.id===e.id},r.prototype.isFringe=function(e){return this.result&&this.result.added&&this.result.added.upgraded&&-1!=this.result.added.upgraded.indexOf(e.id)?(e.type="node",!1):e.type&&"fringe"==e.type},e.exports=r},function(e,t){function r(e,t){this.ui=t,this.vios=[];for(var r=[],n=0;n<e.length;n++){for(var s=0;s<r.length;s++)JSON.stringify(e[n]),JSON.stringify(r[s]);r.push(e[n])}for(n=0;n<r.length;n++)this.vios.push(new i(r[n],this.ui))}function i(e,t){this.ui=t,this.vio=e}r.prototype.getAsDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-violations terminus-show-msg-vio");var r=document.createElement("div");r.setAttribute("class","terminus-violations-heading"),t.appendChild(r);var i=this.vios.length+(this.vios.length>1?" Violations Detected":" Violation Detected");e&&(i+=" "+e),r.appendChild(document.createTextNode(i));for(var n=0;n<this.vios.length;n++)t.appendChild(this.vios[n].getAsDOM());return t},i.prototype.getAsDOM=function(){var e=document.createElement("div");if(e.setAttribute("class","terminus-violation"),this.vio["@type"]){var t=this.vio["vio:message"]||{"@value":""};e.appendChild(this.getPropertyAsDOM(this.vio["@type"],t))}for(var r in this.vio)"vio:message"!=r&&"@type"!=r&&e.appendChild(this.getPropertyAsDOM(r,this.vio[r]));return e},i.prototype.getPropertyAsDOM=function(e,t){var r=document.createElement("div");r.setAttribute("class","terminus-violation-property");var i=document.createElement("span");i.setAttribute("class","terminus-label terminus-violation-property-label"),i.appendChild(document.createTextNode(e));var n=document.createElement("span");return n.setAttribute("class","terminus-violation-property-value"),n.appendChild(document.createTextNode(t["@value"])),r.appendChild(i),r.appendChild(n),r},e.exports=r},function(e,t,r){var i=r(0),n=r(63),s=r(109),o=r(68);function a(e,t){this.ui=e,this.options=t,this.panes=[],this.meta={},this.container=document.createElement("div"),this.container.setAttribute("class","terminus-query-page")}a.prototype.addQueryPane=function(){var e=new n(this.ui.client).options({showQuery:!0,editQuery:!0});return this.panes.push(e),e},a.prototype.addScriptPane=function(e){var t=new s(this.ui.client,e);return this.panes.push(t),t},a.prototype.addScriptPaneDOM=function(){var e=new s(this.ui.client);this.addNewPaneDOM(e)},a.prototype.addQueryPaneDOM=function(){var e=new n(this.ui.client).options({showQuery:!0,editQuery:!0});this.addNewPaneDOM(e)},a.prototype.addDocumentPaneDOM=function(){var e=new o(this.ui.client).options({showQuery:!0,editQuery:!0});this.addNewPaneDOM(e)},a.prototype.addNewPaneDOM=function(e){var t=this.panes[this.panes.length-1];t&&t.empty()?(this.panes[this.panes.length-1]=e,this.paneDOM.removeChild(this.paneDOM.lastChild)):this.panes.push(e);var r=e.getAsDOM(),i=this.getPaneHeader();r.prepend(i),this.paneDOM.appendChild(r)},a.prototype.getAsDOM=function(e){return i.FrameHelper.removeChildren(this.container),this.paneDOM||(this.paneDOM=this.getPanesDOM()),this.container.appendChild(this.paneDOM),this.controlDOM=this.getControlsDOM(),this.container.appendChild(this.controlDOM),this.container},a.prototype.getPaneHeader=function(){var e=document.createElement("div");return e.appendChild(this.getControlsDOM()),e},a.prototype.getPanesDOM=function(e){var t=document.createElement("div");t.setAttribute("class","terminus-query-panes"),0==this.panes.length&&this.addQueryPane();for(var r=0;r<this.panes.length;r++){var i=this.panes[r].getAsDOM(),n=this.getPaneHeader();i.prepend(n),t.appendChild(i)}return t},a.prototype.getControlsDOM=function(e){var t=this,r=document.createElement("div");r.setAttribute("class","terminus-query-page-controls");var i=document.createElement("button");i.setAttribute("class","terminus-btn terminus-new-query-btn"),i.appendChild(document.createTextNode("New Query")),i.addEventListener("click",(function(){return t.addQueryPaneDOM()})),r.appendChild(i);var n=document.createElement("button");n.setAttribute("class","terminus-btn terminus-new-script-btn"),n.appendChild(document.createTextNode("New Script")),n.addEventListener("click",(function(){return t.addScriptPaneDOM()})),r.appendChild(n);var s=document.createElement("button");return s.setAttribute("class","terminus-btn terminus-new-script-btn"),s.appendChild(document.createTextNode("New Document View")),s.addEventListener("click",(function(){return t.addDocumentPaneDOM()})),r.appendChild(s),r},e.exports=a},function(module,exports,__webpack_require__){var TerminusClient=__webpack_require__(0),TerminusCodeSnippet=__webpack_require__(4),UTILS=__webpack_require__(2);function ScriptPane(e,t){this.client=e,this.script=t||"",this.container=document.createElement("div"),this.container.setAttribute("class","terminus-script-pane-cont")}ScriptPane.prototype.empty=function(){return""==this.script},ScriptPane.prototype.createInput=function(e){var t=new TerminusCodeSnippet("code","edit");this.script&&t.setQuery(this.script);var r=this;return t.submit=function(t){r.executeScript(t,e)},t},ScriptPane.prototype.executeScript=function(script,ui){ui&&ui.clearMessages(),this.script=script;var client=this.client,WOQL=TerminusClient.WOQL;try{var res=eval(script);res&&this.updateResult(res)}catch(e){ui&&ui.showError(e),console.error(e)}},ScriptPane.prototype.showOKMessage=function(){var e=document.createTextNode("Script executed ok");this.updateResult(e)},ScriptPane.prototype.updateResult=function(e){TerminusClient.FrameHelper.removeChildren(this.resultDOM),this.resultDOM.appendChild(e)},ScriptPane.prototype.getAsDOM=function(e){return this.container.appendChild(UTILS.getHeaderDom("Enter Script")),this.input=this.createInput(e),this.container.appendChild(this.input.getAsDOM()),this.resultDOM=document.createElement("div"),this.resultDOM.setAttribute("class","terminus-script-results"),this.result&&this.resultDOM.appendChild(this.result),this.container.appendChild(this.resultDOM),this.container},module.exports=ScriptPane},function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=r(111),s=r(29),o=r(112),a=r(2),u=r(0);function c(e){this.ui=e,this.mode="view",this.format="turtle",this.confirm_before_update=!1,this.thv=new o(this.ui.client);var t=u.WOQL;this.woql=t}c.prototype.getOWLView=function(){this.mode="view",this.loadSchema()},c.prototype.appendRuleViews=function(){this.view.appendChild(a.getHeaderDom("Classes")),this.appendClassViews(this.woql.table()),this.appendClassViews(this.woql.graph()),this.view.appendChild(a.getHeaderDom("Properties")),this.appendPropertyViews(this.woql.table()),this.appendPropertyViews(this.woql.graph())},c.prototype.appendPropertyViews=function(e){this.qprops.first();var t=this.thv.showResult(this.qprops,e,!1);this.view.appendChild(t)},c.prototype.appendClassViews=function(e){this.qclasses.first();var t=this.thv.showResult(this.qclasses,e,!1);this.view.appendChild(t)},c.prototype.getAllProperties=function(){var e=this,t=this.woql.from(this.ui.client.connectionConfig.dbURL()).limit(25).start(0).propertyMetadata(),r=this;t.execute(this.ui.client).then((function(i){var n=new u.WOQLResult(i,t);r.qprops=n,e.view.appendChild(a.getHeaderDom("Properties")),r.appendPropertyViews(e.woql.table()),r.appendPropertyViews(e.woql.graph())}))},c.prototype.getAllClasses=function(){var e=this,t=this.woql.from(this.ui.client.connectionConfig.dbURL()).limit(25).start(0).classMetadata(),r=this;t.execute(this.ui.client).then((function(i){var n=new u.WOQLResult(i,t);r.qclasses=n,r.view.appendChild(a.getHeaderDom("Classes")),r.appendClassViews(e.woql.table());var s=e.woql.graph();s.source("v:Subject");s.edge("v:Subject","v:Object").icon({color:[255,255,25],weight:100,unicode:"",size:2}),r.appendClassViews(s)}))},c.prototype.defineViewAction=function(e,t){switch(u.FrameHelper.removeChildren(this.view),a.setSelectedSubMenu(e),t){case"table":this.appendRuleViews();break;case"owl":this.getOWLView();break;default:console.log("Invalid view passed in TerminusSchema.js")}},c.prototype.getTabs=function(e){var t=document.createElement("a");t.setAttribute("class","terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var r=this;if(t.addEventListener("click",(function(){r.defineViewAction(this,e)})),"owl"==e)var i=e.toUpperCase();else i=e.charAt(0).toUpperCase()+e.slice(1);return t.appendChild(document.createTextNode(i+" View")),t},c.prototype.getSchemaViews=function(){var e=document.createElement("ul");e.setAttribute("class","terminus-ul-horizontal");var t=this.getTabs("table");t.classList.add("terminus-submenu-selected"),e.appendChild(t),e.appendChild(this.getTabs("owl")),this.controldom.appendChild(e),this.getAllClasses(),this.getAllProperties()},c.prototype.getAsDOM=function(){return this.holder=document.createElement("div"),this.controldom=document.createElement("div"),this.controldom.setAttribute("class","terminus-schema-controls"),this.view=document.createElement("div"),this.view.setAttribute("class","terminus-schema-view"),this.getSchemaViews(),this.pagedom=document.createElement("div"),this.pagedom.setAttribute("class","terminus-schema-viewer"),this.holder.appendChild(this.controldom),this.controldom.appendChild(this.view),this.holder.appendChild(this.pagedom),this.holder},c.prototype.loadSchema=function(e,t){var r=this;this.ui.showBusy("Fetching Database Schema"),this.ui.client.getSchema(!1,{"terminus:encoding":"terminus:"+this.format}).then((function(i){r.ui.clearBusy(),r.schema=i,r.refreshPage(e,t)})).catch((function(e){r.ui.clearBusy(),r.ui.showError(e)}))},c.prototype.resetControlDOM=function(){u.FrameHelper.removeChildren(this.view),"edit"==this.mode?this.view.appendChild(this.getSchemaSaveButtons()):"import"==this.mode?this.view.appendChild(this.getSchemaImportActionButtons()):"class_frame"==this.mode?(this.ui.showControl("get_schema")&&this.view.appendChild(this.getShowSchemaButton()),this.ui.showControl("class_frame")&&this.view.appendChild(this.getClassFrameChooser())):"view"==this.mode&&(this.ui.showControl("update_schema")&&this.view.appendChild(this.getSchemaEditButton()),this.ui.showControl("import_schema")&&this.view.appendChild(this.getImportButton()),this.ui.showControl("add_new_library")&&this.view.appendChild(this.getNewLibaryButton()),this.ui.showControl("class_frame")&&this.view.appendChild(this.getClassFrameChooser()))},c.prototype.refreshPage=function(e,t){this.view&&(this.resetControlDOM(),this.refreshMainPage(e,t))},c.prototype.refreshMainPage=function(e,t){u.FrameHelper.removeChildren(this.pagedom),"view"==this.mode?this.view.appendChild(this.getSchemaViewDOM()):"edit"==this.mode?this.view.appendChild(this.getSchemaEditDOM()):"import"==this.mode?this.view.appendChild(this.getSchemaImportDOM()):"class_frame"==this.mode&&this.view.appendChild(this.getClassFrameDOM()),e&&this.ui.showMessage(e,t)},c.prototype.getSchemaSaveButtons=function(){var e=document.createElement("span");return e.setAttribute("class","terminus-schema-save-buttons"),e.appendChild(this.getCancelButton()),e.appendChild(this.getSaveButton()),e},c.prototype.getSchemaImportActionButtons=function(){var e=document.createElement("span");return e.setAttribute("class","terminus-schema-import-buttons"),e.appendChild(this.getCancelButton(!0)),e.appendChild(this.getImportSaveButton()),e},c.prototype.getShowSchemaButton=function(){var e=this;return this.getSchemaButton("View Schema","get_schema",(function(){e.ui.clearMessages(),e.mode="view",e.refreshPage()}))},c.prototype.getImportPreviewButton=function(){var e=this;return this.getSchemaButton("Preview","preview",(function(){e.ui.clearMessages(),e.mode="preview",e.refreshPage()}))},c.prototype.getCancelButton=function(e){var t=this;return this.getSchemaButton("Cancel","cancel_update",(function(){t.ui.clearMessages(),t.mode="view",e?t.ui.redraw():t.refreshPage()}))},c.prototype.getImportSaveButton=function(){var e=this;return this.getSchemaButton("Import","import_schema",(function(){e.ui.clearMessages(),"function"==typeof e.doImport&&e.doImport()}))},c.prototype.getSaveButton=function(){var e=this;return this.getSchemaButton("Save","update_schema",(function(){e.ui.clearMessages();var t=e.schema_edit_dom.value;"object"==i(e.schema)&&(t=JSON.parse(t));var r={};return r["terminus:encoding"]="terminus:"+e.format,r.schemaId=e.ui.client.connectionConfig.dbURL()+"/"+e.schema_edit_dom_name.value,e.updateSchema(t,r)}))},c.prototype.getSchemaEditButton=function(){var e=this;return this.getSchemaButton("Edit","update_schema",(function(){e.mode="edit",e.refreshPage()}))},c.prototype.getNewLibaryButton=function(){var e=this;return this.getSchemaButton("New Library","add_new_library",(function(){e.ui.clearMessages(),e.mode="edit",e.refreshPage()}))},c.prototype.getImportButton=function(){var e=this;return this.getSchemaButton("Import New Schema","import_schema",(function(){e.ui.clearMessages(),e.mode="import",e.refreshPage()}))},c.prototype.getSchemaButton=function(e,t,r){var i=document.createElement("button");return i.appendChild(document.createTextNode(e)),i.setAttribute("class","terminus-btn terminus-control-button terminus-schema-"+t),i.addEventListener("click",r),i},c.prototype.updateSchema=function(e,t){this.ui.showBusy("Updating Database Schema");var r=this;return this.ui.client.updateSchema(!1,e,t).then((function(e){if(e["terminus:status"]&&"terminus:success"==e["terminus:status"])r.ui.showBusy("Retrieving updated schema"),r.mode="view",r.loadSchema("Successfully Updated Schema"),r.ui.redraw();else{if(!e["terminus:status"]||"terminus:failure"!=e["terminus:status"])throw new Error("Update Schema returned no terminus:status code");r.ui.clearBusy(),r.ui.showViolations(e["terminus:witnesses"],"schema")}})).catch((function(e){r.ui.clearBusy(),e.data&&e.data["terminus:witnesses"]?r.ui.showViolations(e.data["terminus:witnesses"],"schema"):r.ui.showError(e)}))},c.prototype.load=function(e,t,r){var i=this;r=r||"replace",this.ui.showBusy("Loading schema from "+e);var n=this.ui.client.connectionConfig.schemaURL();return this.ui.client.getSchema(e,{"terminus:user_key":t,"terminus:encoding":"terminus:"+this.format}).then((function(t){var s="append"==r?i.appendSchema(t):t;i.confirm_before_update?(i.ui.showResult("Schema retrieved - click save to deploy"),i.ui.client.connectionConfig.setSchemaURL(n),i.showConfirmPage(s)):(i.ui.showBusy("Updating schema"),i.ui.client.connectionConfig.setSchemaURL(n),i.updateSchema(s,{"terminus:encoding":"terminus:"+i.format}).then((function(t){return i.mode="view",i.ui.clearBusy(),i.ui.redraw(),i.ui.showResult("Successfully deployed new schema from "+e),t})))})).catch((function(e){i.ui.clearBusy(),i.ui.showError(e)}))},c.prototype.appendSchema=function(e){var t=this.schema;if("turtle"==this.format)t=this.schema+e;else if("jsonld"==this.format)for(var r in e)t[r]=e[r];return t},c.prototype.getClassFrameChooser=function(){var e=document.createElement("span");e.setAttribute("class","terminus-class frame-chooser");var t=new n(this.ui);t.empty_choice="View Individual Class Frames";var r=this;t.change=function(e){e&&(r.cls=e,"class_frame"!=r.mode?(r.mode="class_frame",r.refreshPage()):r.refreshMainPage())};var i=t.getAsDOM();return e.appendChild(i),e},c.prototype.getClassFrameDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-schema-page terminus-schema-classframe-page");var t=new s(this.ui,"model");return t.loadCreateDocument(this.cls),t.page_config="model",e.appendChild(t.getAsDOM()),e},c.prototype.showConfirmPage=function(e){this.schema=e,this.confirm_before_update=!1,this.mode="edit",this.refreshPage("Confirm new schema")},c.prototype.getSchemaEditDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-schema-page terminus-schema-edit-page");var t=document.createElement("label");t.setAttribute("class","terminus-control-label"),t.setAttribute("for","basicinput"),t.appendChild(document.createTextNode("Schema name:"));var r=document.createElement("input");r.setAttribute("class","terminus-input-text terminus-schema-id-display"),r.setAttribute("placeholder","Enter schema name"),e.appendChild(t),e.appendChild(r);var n=document.createElement("textarea");return n.setAttribute("class","terminus-schema-edit terminus-schema-textarea"),n.setAttribute("width","100%"),n.setAttribute("style","min-width: 400px; min-height: 400px;"),"string"==typeof this.schema?n.innerHTML=this.schema:"object"==i(this.schema)&&(n.innerHTML=JSON.stringify(this.schema,0,4)),this.schema_edit_dom_name=r,this.schema_edit_dom=n,e.appendChild(n),a.stylizeEditor(this.ui,n,"schema","turtle"),e},c.prototype.getSchemaViewDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-schema-page terminus-schema-view-page");var t=document.createElement("pre");if(t.setAttribute("class","terminus-schema-view terminus-scheme-pre"),"string"==typeof this.schema){var r=this.schema.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");t.innerHTML=r}else"object"==i(this.schema)&&(t.innerHTML=JSON.stringify(this.schema,0,4));return a.stylizeCodeDisplay(this.ui,t,e,"turtle")||e.appendChild(t),e},c.prototype.getSchemaImportDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-form-border terminus-schema-page terminus-schema-import-page"),(s=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group");var t=document.createElement("span");t.setAttribute("class","terminus-url-loader-input terminus-form-label terminus-control-label"),t.appendChild(document.createTextNode("URL")),s.appendChild(t);var r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("class","terminus-form-value terminus-input-text terminus-form-url terminus-url-connect"),r.setAttribute("placeholder","Enter URL of DB to import from"),s.appendChild(r),e.appendChild(s),(s=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(o=document.createElement("span")).setAttribute("class","terminus-url-loader-input terminus-form-label  terminus-control-label terminus-import_mode-input"),o.appendChild(document.createTextNode("Import Mode")),s.appendChild(o);var i=document.createElement("select");i.setAttribute("class","terminus-form-select");var n=document.createElement("option");n.value="replace",n.appendChild(document.createTextNode("Replace Mode")),i.appendChild(n);var s,o,a=document.createElement("option");a.value="append",a.appendChild(document.createTextNode("Append Mode")),i.appendChild(a),i.setAttribute("class","terminus-form-select terminus-import-mode"),s.appendChild(o),s.appendChild(i),e.appendChild(s),(s=document.createElement("div")).setAttribute("class","terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group"),(o=document.createElement("span")).setAttribute("class","terminus-form-label terminus-url-key-input terminus-control-label"),o.appendChild(document.createTextNode("Key"));var u=document.createElement("input");u.setAttribute("type","text"),u.setAttribute("class","terminus-form-value terminus-input-text terminus-url-key"),s.appendChild(o),s.appendChild(u),e.appendChild(s);var c=this;return this.doImport=function(){r.value&&c.load(r.value,u.value,i.value)},e},e.exports=c},function(e,t,r){r(30);var i=r(1),n=r(0);TerminusClassChooser=function(e,t,r){this.ui=e,this.choice=r||!1,this.filter=t,this.show_single=!0},TerminusClassChooser.prototype.setRoot=function(e){this.root=e},TerminusClassChooser.prototype.setFilter=function(e){this.filter=e},TerminusClassChooser.prototype.change=function(e){alert("Need to specify class chooser function ("+e+")")},TerminusClassChooser.prototype.getAsDOM=function(e){var t=document.createElement("span");t.setAttribute("class","terminus-class-chooser");var r=document.createElement("select");r.setAttribute("class",e+" terminus-type-select terminus-class-select");var i=this;r.addEventListener("change",(function(){this.choice=this.value,i.change(this.value),this.value=""})),t.appendChild(r);var s=n.WOQL.query().classMetadata();i=this;return s.execute(this.ui.client).then((function(e){var n=i.getResultsAsOptions(e);if(n){for(var s=0;s<n.length;s++)r.appendChild(n[s]);i.options=n}else t.removeChild(r)})),t},TerminusClassChooser.prototype.getResultsAsOptions=function(e){var t=[];if(e.bindings){if(0==this.show_single&&e.bindings.length<2)return!1;if(this.empty_choice){var r=document.createElement("option");r.setAttribute("class","terminus-class-choice terminus-empty-choice"),r.value="",r.appendChild(document.createTextNode(this.empty_choice)),t.push(r)}for(var s=[],o=0;o<e.bindings.length;o++){var a=i.getVariableValueFromBinding("Element",e.bindings[o]);if(a||(a=i.getVariableValueFromBinding("Class",e.bindings[o])),a&&-1==s.indexOf(a)){s.push(a);var u=document.createElement("option");u.setAttribute("class","terminus-class-choice"),u.value=a,u.value==this.choice&&(u.selected=!0);var c=i.getVariableValueFromBinding("Label",e.bindings[o]);c&&"unknown"!=c||(c=n.FrameHelper.labelFromURL(a)),c["@value"]&&(c=c["@value"]),u.appendChild(document.createTextNode(c)),t.push(u)}}}return t},e.exports=TerminusClassChooser},function(module,exports,__webpack_require__){var TerminusClient=__webpack_require__(0),WOQLRule=__webpack_require__(57),WOQLTable=__webpack_require__(59),WOQLChooser=__webpack_require__(58),WOQLGraph=__webpack_require__(61),WOQLStream=__webpack_require__(62),TerminusFrame=__webpack_require__(9),Datatypes=__webpack_require__(16),SimpleTable=__webpack_require__(64),SimpleGraph=__webpack_require__(65),SimpleStream=__webpack_require__(66),SimpleChooser=__webpack_require__(67),SimpleDocument=__webpack_require__(113),DocumentTable=__webpack_require__(114),SimpleFrameViewer=__webpack_require__(69),HTMLObjectViewer=__webpack_require__(12),HTMLPropertyViewer=__webpack_require__(14),HTMLDataViewer=__webpack_require__(15),TerminusCodeSnippet=__webpack_require__(4),UTILS=__webpack_require__(2);function TerminusHTMLViewer(e){this.client=e}TerminusHTMLViewer.prototype.setRenderers=function(e){},TerminusHTMLViewer.prototype.getEditor=function(e,t,r){TerminusClient.WOQL;var i=new TerminusCodeSnippet({},e,t,r,this.mode).getAsDOM(),n={};return n.width=e,n.height=t,UTILS.stylizeEditor(this.ui,i.snippetText,n,"javascript"),i},TerminusHTMLViewer.prototype.showConfigEditor=function(e,t,r){var i=this.getEditor(300,250,JSON.stringify(t,void 0,2)),n=this;return i.actionButton.addEventListener("click",(function(){try{var t=UTILS.getqObjFromInput(i.snippetText.value);TerminusClient.FrameHelper.removeChildren(r),r.appendChild(n.showResult(e,t))}catch(e){console.log("Error in config editor: "+e)}})),i},TerminusHTMLViewer.prototype.submitConfig=function(e,t,r,i){var n=this.showConfigEditor(e,t,r);i.appendChild(n.dom)},TerminusHTMLViewer.prototype.showConfig=function(e,t,r,i){var n=document.createElement("button");n.setAttribute("class","terminus-btn terminus-query-config-btn"),n.appendChild(document.createTextNode("Config"));var s=this;return n.addEventListener("click",(function(){TerminusClient.FrameHelper.removeChildren(i),s.submitConfig(e,t,r,i)})),n},TerminusHTMLViewer.prototype.showResult=function(e,t,r){var i=document.createElement("span");i.setAttribute("class","terminus-query-results"),e.first();var n={table:new SimpleTable,graph:new SimpleGraph,stream:new SimpleStream,chooser:new SimpleChooser},s=t.create(this.client,n,Datatypes.initialiseDataRenderers);s.setResult(e),i.appendChild(s.render());var o=document.createElement("div");return i.appendChild(o),r&&i.appendChild(this.showConfig(e,t,i,o)),i},TerminusHTMLViewer.prototype.displayResults=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-results");var i={table:new SimpleTable,graph:new SimpleGraph,choice:new SimpleChooser},n=t.create(this.client,i,Datatypes.initialiseDataRenderers);return e?this.loadResults(e,n,(function(){r.appendChild(n.render())})):this.last_result&&(n.setResult(this.last_result),r.appendChild(n.render())),r},TerminusHTMLViewer.prototype.loadResults=function(e,t,r){var i=this;return e.execute(this.client).then((function(r){i.last_result=new TerminusClient.WOQLResult(r,e),t.setResult(i.last_result),console.log("self.last_result",i.last_result)}))},TerminusHTMLViewer.prototype.table=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-table");var i=new WOQLTable(this.client).options(t);return i.setDatatypes(Datatypes.initialiseDataRenderers),i.setRenderer(new SimpleTable),e.execute(this.client).then((function(t){var n=new TerminusClient.WOQLResult(t,e);i.setResult(n),r.appendChild(i.render())})),r},TerminusHTMLViewer.prototype.stream=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-stream");var i=new WOQLStream(this.client).options(t);return i.setDatatypes(Datatypes.initialiseDataRenderers),e.execute(this.client).then((function(t){new WOQLResult(t,e);r.appendChild(i.render())}))},TerminusHTMLViewer.prototype.woql=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-woql");var i=new WOQLQueryViewer(this.client).options(t);return r.appendChild(i.render()),e&&i.setQuery(e,!0),r},TerminusHTMLViewer.prototype.ruleEditor=function(){},TerminusHTMLViewer.prototype.getAddRuleButton=function(e){var t=document.createElement("button");t.appendChild(document.createTextNode("Add another rule"));t.addEventListener("click",(function(){})),e.appendChild(t)},TerminusHTMLViewer.prototype.getConfigButton=function(e){var t=document.createElement("button");t.appendChild(document.createTextNode("Rule"));var r=this;t.addEventListener("click",(function(){e.appendChild(r.ruleEditor()),r.getAddRuleButton(e)})),e.appendChild(t)},TerminusHTMLViewer.prototype.querypane=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-woql-pane");var i=new QueryPane(this.client,e);i.options(t),this.queryPane=i;var n=new WOQLQueryViewer(this.client).options(t);return this.queryViewer=n,r},TerminusHTMLViewer.prototype.chooser=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-chooser");var i=new WOQLChoice(this.client).options(t);return e.execute(this.client).then((function(t){var n=new WOQLResult(t,e);r.appendChild(i.render(n))}))},TerminusHTMLViewer.prototype.graph=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-graph terminus-graph-holder");var i=new WOQLGraph(this.client).options(t);return e.execute(this.client).then((function(t){var n=new WOQLResult(t,e);r.appendChild(i.render(n))}))},TerminusHTMLViewer.prototype.document=function(e,t){var r=document.createElement("span");r.setAttribute("class","terminus-document terminus-document-holder");var i=new TerminusFrame(this.client).options(t);return i.owner=this,i.setDatatypes(Datatypes.initialiseDataRenderers),i.loadDocument(e).then((function(){var e=i.render();e&&r.appendChild(e)})),r},TerminusHTMLViewer.prototype.loadRenderer=function(rendname,frame,args,termframe){var evalstr="new "+rendname+"(";args&&(evalstr+=JSON.stringify(args)),evalstr+=");";try{var nr=eval(evalstr);return nr.terminus=termframe,nr}catch(e){return console.log("Failed to load "+rendname+e.toString()),!1}},module.exports=TerminusHTMLViewer},function(e,t){function r(){}r.prototype.render=function(e){var t=document.createElement("div");for(var r in e.properties){var i=this.renderProperty(e.properties[r]);i&&t.appendChild(i)}return t},r.prototype.renderProperty=function(e){var t=document.createElement("div");t.appendChild(document.createTextNode(e.getLabel()+": "));for(var r=0;r<e.values.length;r++){if(e.values[r].isData())var i=this.renderValue(e.values[r]);else i=this.render(e.values[r]);i&&t.appendChild(i)}return t},r.prototype.renderValue=function(e){var t=document.createElement("span");return t.appendChild(document.createTextNode(e.get()+" ")),t},e.exports=r},function(e,t){function r(){}r.prototype.render=function(e){var t=this.getTableDOM(e),r=document.createElement("tbody");for(var i in e.properties)this.renderProperty(r,e.properties[i]);return t.appendChild(r),t},r.prototype.getTableDOM=function(e){var t=document.createElement("table");t.setAttribute("class","terminus-hover-table");var r=document.createElement("thead"),i=document.createElement("tr"),n=document.createElement("th");return n.setAttribute("class","terminus-table-header-full-css"),n.setAttribute("colspan",2),n.appendChild(document.createTextNode(e.subject()+", "+e.subjectClass())),i.appendChild(n),r.appendChild(i),t.appendChild(r),t},r.prototype.renderProperty=function(e,t){for(var r=0;r<t.values.length;r++){var i=document.createElement("tr"),n=document.createElement("td");n.appendChild(document.createTextNode(t.getLabel()));var s=document.createElement("td");t.values[r].isData()?s.appendChild(this.renderValue(t.values[r])):s.appendChild(this.render(t.values[r])),i.appendChild(n),i.appendChild(s),e.appendChild(i)}},r.prototype.renderValue=function(e){return document.createTextNode(e.get())},e.exports=r},function(e,t,r){var i=r(31),n=r(2),s=r(1);r(0);function o(e){this.ui=e}function a(e){this.ui=e,this.server=this.ui.server(),this.max_cell_size=500,this.max_word_size=40}o.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-server-controller");var t=this;if(this.ui&&this.ui.server()){document.createElement("div").setAttribute("class","terminus-server-connection");var r=document.createElement("div");r.setAttribute("class","span3");var i=document.createElement("ul");i.setAttribute("class","terminus-ul"),r.appendChild(i),e.appendChild(r),(o=document.createElement("a")).setAttribute("class","terminus-dashboard-info terminus-list-group-a terminus-nav-width");var s="Server: "+this.ui.server();if(o.appendChild(document.createTextNode(s)),i.appendChild(o),this.ui.showControl("change-server")){(o=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");t=this;o.addEventListener("click",(function(){n.activateSelectedNav(this,t),t.ui.showLoadURLPage()})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-link"),o.appendChild(a);s=document.createTextNode("Change Server");o.appendChild(s),i.appendChild(o)}if(this.ui.showControl("db")){(o=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");t=this;o.addEventListener("click",(function(){n.activateSelectedNav(this,t),t.ui.db(),t.ui.showServerMainPage()})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-eye"),o.appendChild(a);s=document.createTextNode("View Databases");o.appendChild(s),i.appendChild(o)}if(this.ui.showControl("create_database")){var o;(o=document.createElement("a")).setAttribute("class","terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer");var a;t=this;o.addEventListener("click",(function(){n.activateSelectedNav(this,t),t.ui.db(),t.ui.showCreateDBPage()})),(a=document.createElement("i")).setAttribute("class","terminus-menu-icon fa fa-plus"),o.appendChild(a);s=document.createTextNode("Create New Database");o.appendChild(s),i.appendChild(o)}}return e},o.prototype.getServerLabelDOM=function(){var e=this.ui.client.connection.getServerRecord(),t=e&&e["rdfs:label"]&&e["rdfs:label"]["@value"]?e["rdfs:label"]["@value"]:this.ui.server(),r=e&&e["rdfs:comment"]&&e["rdfs:comment"]["@value"]?e["rdfs:comment"]["@value"]:"";r+=" Server URL: "+this.ui.server();var i=document.createElement("span");return i.setAttribute("class","terminus-server-value"),i.setAttribute("title",r),i.appendChild(document.createTextNode(t)),i=document.createElement("div")},a.prototype.getAsDOM=function(e){var t=this,r=document.createElement("span");if(r.setAttribute("class","terminus-server-home-page"),this.ui.server()){var i=document.createElement("span");if(i.setAttribute("class","terminus-server-home"),this.ui.showView("server"),this.ui.showView("change-server")){var n=document.createElement("button");n.setAttribute("class","terminus-control-button terminus-change-server-button terminus-btn"),n.appendChild(document.createTextNode("Disconnect")),n.addEventListener("click",(function(){t.ui.showLoadURLPage()}))}if(this.ui.showView("create_database")){var s=document.createElement("button");s.setAttribute("class","terminus-control-button terminus-create-db-button terminus-btn"),s.appendChild(document.createTextNode("Create New Database")),s.addEventListener("click",(function(){t.ui.db(),t.ui.clearMessages(),t.ui.showCreateDBPage()}))}this.ui.showView("db")&&i.appendChild(this.getDBListDOM()),r.appendChild(i)}else t.ui.showLoadURLPage();return r},a.prototype.getServerDetailsDOM=function(){var e=document.createElement("span");e.setAttribute("class","terminus-server-details terminus-server-banner");var t=document.createElement("span");t.setAttribute("class","terminus-label terminus-server-info"),t.appendChild(document.createTextNode("Connected to Server - "));var r=document.createElement("span");return r.setAttribute("class","terminus-value terminus-server-info"),r.appendChild(document.createTextNode(this.ui.server())),e.appendChild(t),e.appendChild(r),e},a.prototype.wrapTableLinkCell=function(e,t,r){var i=this,n=document.createElement("p");return n.setAttribute("class","terminus-table-content"),s.wrapShortenedText(n,r,this.max_cell_size,this.max_word_size),e.addEventListener("click",(function(){i.ui.connectToDB(t),i.ui.showDBMainPage()})),n},a.prototype.getNDBListDOM=function(){new TerminusHTMLViewer(this.ui.client),this.ui.client.connection.getServerDBRecords()},a.prototype.getDBListDOM=function(){var e=this,t=document.createElement("div");t.appendChild(n.getHeaderDom("Available Databases"));var r=document.createElement("table");r.setAttribute("class","terminus-db-list terminus-db-size terminus-hover-table terminus-margin-top");var s=document.createElement("thead"),o=document.createElement("tr"),a=document.createElement("th");a.appendChild(document.createTextNode("ID")),a.setAttribute("class","terminus-db-id terminus-table-header-full-css");var u=document.createElement("th");u.appendChild(document.createTextNode("Title")),u.setAttribute("class","terminus-db-title terminus-table-header-full-css");var c=document.createElement("th");c.appendChild(document.createTextNode("Description")),c.setAttribute("class","terminus-db-description terminus-table-header-full-css");var l=document.createElement("th");l.setAttribute("class","terminus-db-size terminus-table-header-full-css"),l.appendChild(document.createTextNode("Size"));var d=document.createElement("th");d.setAttribute("class","terminus-db-created terminus-table-header-full-css"),d.appendChild(document.createTextNode("Created"));var p=document.createElement("th");p.appendChild(document.createTextNode("Delete")),p.setAttribute("class","terminus-db-delete terminus-table-header-full-css"),o.appendChild(a),o.appendChild(u),o.appendChild(c),o.appendChild(p),s.appendChild(o),r.appendChild(s);var h=document.createElement("tbody"),m=this.ui.client.connection.getServerDBRecords();for(var f in m){var g=m[f],y=f.split(":")[1],v=document.createElement("tr"),b=document.createElement("td");b.appendChild(this.wrapTableLinkCell(b,y,y)),b.setAttribute("class","terminus-db-id terminus-db-pointer");var w=document.createElement("td");w.setAttribute("class","terminus-db-title terminus-db-pointer");var C=g&&g["rdfs:label"]&&g["rdfs:label"]["@value"]?g["rdfs:label"]["@value"]:"";w.appendChild(this.wrapTableLinkCell(w,y,C));var x=document.createElement("td");x.setAttribute("class","terminus-db-description terminus-db-pointer");C=g&&g["rdfs:comment"]&&g["rdfs:comment"]["@value"]?g["rdfs:comment"]["@value"]:"";x.appendChild(this.wrapTableLinkCell(x,y,C));var _=document.createElement("td");_.setAttribute("class","terminus-db-size terminus-db-pointer");C=g&&g["terminus:size"]&&g["terminus:size"]["@value"]?g["terminus:size"]["@value"]:"";_.appendChild(this.wrapTableLinkCell(_,y,C));var D=document.createElement("td");D.setAttribute("class","terminus-db-created terminus-db-pointer");C=g&&g["terminus:last_updated"]&&g["terminus:last_updated"]["@value"]?g["terminus:last_updated"]["@value"]:"";D.appendChild(this.wrapTableLinkCell(D,y,C));var O=document.createElement("td");if(O.setAttribute("class","db-delete"),this.deleteDBPermitted(y)){var E;if(this.ui.pluginAvailable("font-awesome"))(E=document.createElement("i")).setAttribute("class","terminus-db-list-del-icon fa fa-times-circle");else(E=document.createElement("button")).appendChild(document.createTextNode("Delete")),E.setAttribute("class","terminus-control-button terminus-delete-db-button");E.addEventListener("click",function(t){return function(){1==confirm("Do you want to delete ".concat(t," Database?"))&&e.ui.deleteDatabase(t)}}(y)),O.appendChild(E)}v.appendChild(b),v.appendChild(w),v.appendChild(x),v.appendChild(O),h.appendChild(v)}if(r.appendChild(h),t.appendChild(r),this.ui.pluginAvailable("datatables"))new i.CspDatatables(this.ui).draw(r);return t},a.prototype.deleteDBPermitted=function(e){return"terminus"!=e&&!!this.ui.client.connection.capabilitiesPermit("delete_database",e)},e.exports={TerminusServerViewer:a,TerminusServerController:o}},function(e,t,r){var i=r(2);function n(e,t){this.ui=e,this.val=t,this.url_input=!1,this.key_input=!1}n.prototype.getLabelDOM=function(){return document.createTextNode("Connect")},n.prototype.getFormFieldDOM=function(e,t,r,i){var n=document.createElement("div");n.setAttribute("class","terminus-form-horizontal terminus-control-group terminus-form-field-spacing terminus-display-flex terminus-field-"+t);var s=document.createElement("span");return s.setAttribute("class","terminus-control-label terminus-form-label terminus-form-field-label terminus-label-"+t),s.appendChild(document.createTextNode(r)),e.setAttribute("type","text"),e.setAttribute("placeholder",i),n.appendChild(s),n.appendChild(e),n},n.prototype.getAsDOM=function(){var e=document.createElement("div");e.setAttribute("class","terminus-form terminus-url-loader"),e.appendChild(i.getHeaderDom("Connect To Terminus Server"));var t=document.createElement("div");t.setAttribute("class","terminus-form-border terminus-margin-top"),e.appendChild(t),this.url_input=document.createElement("input"),this.url_input.setAttribute("class","terminus-form-value terminus-form-url terminus-form-field-input terminus-input-text"),this.val&&(this.url_input.value=this.val);var r=document.createElement("div");r.setAttribute("class","terminus-form-margin-top"),t.appendChild(r),t.appendChild(this.getFormFieldDOM(this.url_input,"connect","URL","Terminus DB URL")),this.key_input=document.createElement("input"),this.key_input.setAttribute("class","terminus-form-value terminus-value terminus-input-text"),t.appendChild(this.getFormFieldDOM(this.key_input,"connect","Key","Server API Key"));var n=document.createElement("div");n.setAttribute("class","terminus-control-buttons");var s=document.createElement("button");s.setAttribute("class","terminus-control-button terminus-url-load terminus-btn terminus-btn-float-right"),s.appendChild(document.createTextNode("Connect"));var o=this;return s.addEventListener("click",(function(){o.url_input.value&&o.ui.load(o.url_input.value,o.key_input.value)})),n.appendChild(s),t.appendChild(n),e},e.exports=n}]);
//# sourceMappingURL=terminus-dashboard.min.js.map
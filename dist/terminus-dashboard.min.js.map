{"version":3,"sources":["webpack://TerminusDashboard/webpack/bootstrap","webpack://TerminusDashboard/./src/html/HTMLHelper.js","webpack://TerminusDashboard/../terminus-client/index.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/utils.js","webpack://TerminusDashboard/./src/Utils.js","webpack://TerminusDashboard/../terminus-client/lib/frameHelper.js","webpack://TerminusDashboard/../terminus-client/lib/errorMessage.js","webpack://TerminusDashboard/./src/html/TerminusViewer.js","webpack://TerminusDashboard/./src/html/query/TerminusCodeSnippet.js","webpack://TerminusDashboard/../terminus-client/lib/const.js","webpack://TerminusDashboard/../terminus-client/lib/utils.js","webpack://TerminusDashboard/./src/plugins/TerminusPlugin.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/bind.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/buildURL.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/cancel/isCancel.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/defaults.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/adapters/xhr.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/createError.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/mergeConfig.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/cancel/Cancel.js","webpack://TerminusDashboard/../terminus-client/lib/connectionCapabilities.js","webpack://TerminusDashboard/../terminus-client/lib/connectionConfig.js","webpack://TerminusDashboard/../terminus-client/lib/terminusIDParser.js","webpack://TerminusDashboard/../terminus-client/lib/framePattern.js","webpack://TerminusDashboard/./src/html/Datatypes.js","webpack://TerminusDashboard/./src/html/datatypes/DateHelper.js","webpack://TerminusDashboard/./src/html/datatypes/GoogleMapHelper.js","webpack://TerminusDashboard/./src/html/DatatypeRenderers.js","webpack://TerminusDashboard/./src/html/TerminusViolation.js","webpack://TerminusDashboard/./src/index.js","webpack://TerminusDashboard/./src/TerminusUI.js","webpack://TerminusDashboard/./src/ApiExplorer.js","webpack://TerminusDashboard/../terminus-client/lib/woqlClient.js","webpack://TerminusDashboard/../terminus-client/lib/dispatchRequest.js","webpack://TerminusDashboard/./node_modules/buffer/index.js","webpack://TerminusDashboard/(webpack)/buildin/global.js","webpack://TerminusDashboard/./node_modules/base64-js/index.js","webpack://TerminusDashboard/./node_modules/ieee754/index.js","webpack://TerminusDashboard/./node_modules/isarray/index.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/index.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/axios.js","webpack://TerminusDashboard/../terminus-client/node_modules/is-buffer/index.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/Axios.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/InterceptorManager.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/dispatchRequest.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/transformData.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/settle.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/enhanceError.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/parseHeaders.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/cookies.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/combineURLs.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/cancel/CancelToken.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/spread.js","webpack://TerminusDashboard/../terminus-client/lib/objectFrame.js","webpack://TerminusDashboard/../terminus-client/lib/woqlResult.js","webpack://TerminusDashboard/../terminus-client/lib/woql.js","webpack://TerminusDashboard/./src/plugins/codemirror.terminus.js","webpack://TerminusDashboard/./src/TerminusDB.js","webpack://TerminusDashboard/./src/html/QueryPane.js","webpack://TerminusDashboard/./src/html/ResultPane.js","webpack://TerminusDashboard/./src/html/datatypes/String.js","webpack://TerminusDashboard/./src/html/datatypes/StringEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Boolean.js","webpack://TerminusDashboard/./src/html/datatypes/BooleanEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Choice.js","webpack://TerminusDashboard/./src/html/datatypes/ChoiceEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Coordinate.js","webpack://TerminusDashboard/./src/html/datatypes/CoordinateEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Date.js","webpack://TerminusDashboard/./src/html/datatypes/DateEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Entity.js","webpack://TerminusDashboard/./src/html/datatypes/EntityEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Image.js","webpack://TerminusDashboard/./src/html/datatypes/ImageEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Link.js","webpack://TerminusDashboard/./src/html/datatypes/Number.js","webpack://TerminusDashboard/./src/html/datatypes/Range.js","webpack://TerminusDashboard/./src/html/datatypes/RangeEditor.js","webpack://TerminusDashboard/./src/html/datatypes/GoogleMapEditor.js","webpack://TerminusDashboard/./src/html/datatypes/GoogleMapViewer.js","webpack://TerminusDashboard/./src/html/datatypes/HTMLMarkupEditor.js","webpack://TerminusDashboard/./src/html/datatypes/S2EntityEditor.js","webpack://TerminusDashboard/./src/html/table/SimpleTable.js","webpack://TerminusDashboard/./src/html/graph/SimpleGraph.js","webpack://TerminusDashboard/./src/html/graph/GraphResultsViewer.js","webpack://TerminusDashboard/./src/html/stream/SimpleStream.js","webpack://TerminusDashboard/./src/html/chooser/SimpleChooser.js","webpack://TerminusDashboard/./src/html/DocumentPane.js","webpack://TerminusDashboard/./src/html/document/SimpleFrameViewer.js","webpack://TerminusDashboard/./src/TerminusQuery.js","webpack://TerminusDashboard/./src/html/ScriptPane.js","webpack://TerminusDashboard/./src/TerminusSchema.js","webpack://TerminusDashboard/./src/TerminusServer.js","webpack://TerminusDashboard/./src/plugins/datatables.terminus.js","webpack://TerminusDashboard/./src/TerminusURL.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TerminusClient","require","HTMLHelper","view","icon","document","createElement","setAttribute","control","type","options","selected","callback","sel","length","opt","label","createTextNode","UTILS","labelFromURL","appendChild","addEventListener","this","which","renderer","viewsDOM","setMode","getActionControl","isNew","cancel","url","window","location","href","loc","split","sh","getShorthand","bits","htmlid","prop","wrap","text","max_cell_size","max_word_size","substring","replacements","words","word","newstr","k","replace","varname","lastIndexOf","obj","scope","frame","orientation","hfeatures","features","display_options","hidden","framedom","getFrameHolderDOM","header","hd","getFrameHeaderDOM","header_style","getFrameBodyDOM","pcls","sp","css","parent","subjectClass","subject","hid","hash","index","idm","objDOM","vholder","charCodeAt","feature","args","rend","val","getInfoboxDOM","sum","getSummary","status","lab","getLabel","getComment","isClassChoice","getClassChoiceTypeSelector","range","getType","disabled","cardControlAllows","show_disabled_buttons","clone","reset","isUpdated","show","save","getViewEntryDOM","getCardinalityDOM","getAddDOM","viewers","mpropDOM","currentViewer","getSelectionControl","viewer","setViewer","viewables","getFilledPropertyList","unshift","add","goToEntry","restriction","getRestriction","min","max","help","cs","getAvailableClassChoices","mlabDOM","cls","changeClass","addClass","addables","getMissingPropertyList","addNewProperty","addNewValue","input","infoDOM","linfo","headerStyle","lval","removePrefixes","bodyStyle","style","dpropDOM","tag","button","title","node","hasChildNodes","removeChild","childNodes","scriptid","src","existingScript","getElementById","script","body","onload","id","cssid","link","rel","parentNode","WOQLClient","ConnectionCapabilities","ConnectionConfig","IDParser","ErrorMessage","FrameHelper","ObjectFrame","WOQLResult","WOQL","isBuffer","toString","isArray","isObject","isFunction","forEach","fn","isArrayBuffer","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","buffer","isString","isNumber","isUndefined","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","merge","result","assignValue","arguments","deepMerge","extend","a","b","thisArg","trim","str","Codemirror","readFile","file","XMLHttpRequest","xmlhttp","ActiveXObject","open","send","xmlDoc","responseText","getFunctionSignature","sigs","spec","descr","server_url","description","database_url","details","format","editmode","document_url","fail_on_id_denied","woql","class","term","source","target","getHeaderDom","h","innerHTML","getButton","getInfoAlertDom","msg","ald","txt","getResponse","currForm","action","response","terminator","rd","br","data","JSON","stringify","pre","stylizeCodeDisplay","showHttpResult","retHttpHeaders","headers","hdres","json","then","deleteStylizedEditor","ui","qip","pluginAvailable","cm","nextElementSibling","removeChildren","stylizeEditor","cmConfig","ar","colorizeTextArea","updateTextArea","dom","pr","colorizePre","removeSelectedNavClass","el","getElementsByClassName","classList","remove","setSelectedSubMenu","setSelected","className","par","parentElement","contains","tolggleContent","content","display","activateSelectedNav","nav","hideDocumentSubMenus","checkDocumentSubMenus","showControl","toggleVisibility","extractValueFromCell","cellValue","DOMParser","parseFromString","firstChild","displayDocumentSubMenus","showSubMenus","checkForMandatoryId","objId","background","getCurrentWoqlQueryObject","query","settings","qval","limit","pageLength","start","elementMetadata","classMetadata","getEverything","getAllDocuments","documentMetadata","and","quad","sub","propertyMetadata","console","log","trimValue","getqObjFromInput","q","qObj","eval","e","standard_urls","rdf","rdfs","xsd","owl","tcs","tbs","xdd","v","terminus","vio","docs","prefix","keys","Math","random","Date","getTime","pref","full","ida","idb","unshorten","sha","shb","prefixes","validURL","nurl","urlFragment","charAt","toUpperCase","slice","urlStr","baseUrl","stype","urlFirst","urlTmp","ext","viewIncludesProperties","parts","join","ty","parsed","parseXsdDate","parseXsdTime","parseXsdDateTime","year","month","day","push","tz","extractXsdTimezone","abs","parseInt","timezone","nparsed","hour","minute","second","xparsed","addXsdPadding","ret","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","convertTimestampToXsd","datetime","ptime","indexOf","dividor","vals","getErrorAsMessage","api","err","formatErrorMessage","method","nmsg","getAPIErrorMessage","getAccessDeniedMessage","accessDenied","db","server","getInvalidURIMessage","parseAPIError","error","redirected","QueryPane","DocumentPane","TerminusViewer","client","getDocumentPane","docid","docConfig","docPaneConfig","dp","defaultPaneView","getDocument","docJSON","getNewDocumentPane","getQueryPane","resultConfigs","results","resultPaneConfigs","queryPaneConfig","qp","defaultQueryView","rpc","defaultResultView","addView","getResult","resultConfig","TerminusCodeSnippet","language","width","height","placeholder","formats","snippet","setQuery","refreshContents","serialise","prettyPrint","undefined","parseText","View","nw","parse","loadConfig","getInputElement","readInput","getAsDOM","with_buttons","scont","snpc","getFormatButtons","serial","ssb","actbtn","getSubmitButton","changeRuleView","nview","submit","getIconsDOM","bsp","view_types","isp","self","cursor","f","btn","qobj","alert","removeCodeMirror","nextSibling","removeElement","stylizeSnippet","freeze","CONNECT","GET_SCHEMA","UPDATE_SCHEMA","UPDATE_DOCUMENT","CLASS_FRAME","WOQL_SELECT","GET_DOCUMENT","DELETE_DATABASE","DELETE_DOCUMENT","CREATE_DATABASE","CREATE_DOCUMENT","WOQL_UPDATE","authorityActionsToArr","Array","map","item","URIEncodePayload","payload","encodeURIComponent","payloadArr","keyElement","valueElement","TerminusPluginManager","preloaded","loaded","loading","precluded","plugins","css_base","js","requires","setPluginOptions","opts","init","calculatePreloaded","toload","calculateRequiredInitPlugins","loadPlugins","pins","pid","getDefaultPlugins","needed_pins","loading_order","getAvailablePlugins","pl","plugin","version_check","pluginmeta","version","jQuery","slider","Quill","JSONEditor","CodeMirror","fontAwesomeCheck","dataTable","select2","google","maps","ol","Map","d3","Error","element","span","insertBefore","getComputedStyle","getPropertyValue","ticker","cback","loadPlugin","pug","loadDynamicCSS","scripts","sid","splice","loadDynamicScript","loadPluginScripts","loadPageCSS","cssfid","cssdom","cssurl","pluginLoadable","pluginLoadedOrLoading","getPluginDOM","plugid","cl","cbox","checked","clab","togglePlugin","redraw","unloadPlugin","drawPlugins","num","dm","clh","showPlugins","apply","utils","encode","params","paramsSerializer","serializedParams","toISOString","hashmarkIndex","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","adapter","defaults","process","transformRequest","transformResponse","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","common","settle","buildURL","parseHeaders","isURLSameOrigin","createError","config","Promise","resolve","reject","requestData","requestHeaders","request","auth","username","password","Authorization","btoa","onreadystatechange","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseType","statusText","onabort","onerror","ontimeout","cookies","xsrfValue","withCredentials","read","toLowerCase","setRequestHeader","onDownloadProgress","onUploadProgress","upload","cancelToken","promise","abort","enhanceError","message","code","config1","config2","Cancel","CONST","connectionConfig","connection","setClientKey","getClientKey","serverURL","curl","addConnection","capabilities","capabilitiesKeys","pred","auths","actions","actionsArr","j","nrec","serverConnected","capabilitiesPermit","dbid","connectionMode","client_checks_capabilities","rec","getServerRecord","getDBRecord","srvr","connectionObj","okeys","oid","dbCapabilityID","getServerDBRecords","dbrecs","removeDB","dbidCap","newParams","setServer","setDB","doc","setDocument","connected_mode","include_key","includeKey","schemaURL","dbURL","queryURL","frameURL","docURL","platformEndpoint","baseURL","inputStr","context","parser","parseServerURL","parseDBID","setSchemaURL","parseSchemaURL","parseDocumentURL","setQueryURL","parseQueryURL","setClassFrameURL","parseClassFrameURL","setContext","validPrefixedURL","expandPrefixed","validIDString","stripOptionalPath","bit","FramePattern","pattern","setPattern","frame_type","children","depth","checkFrame","rtype","getRendererType","illegalRuleType","checkFrameType","checkLabel","checkSubject","checkSubjectClass","checkProperty","checkDepth","checkRange","checkValue","checkParent","checkChildren","checkIndex","checkStatus","rsubj","IDsMatch","found","properties","values","numberMatch","propertyIDsMatch","valuesMatch","rangeIDsMatch","rcls","classIDsMatch","ftype","stringMatch","compareIDs","vala","valb","RegExp","test","isProperty","isData","renderer_type","constructor","FramePatternMatcher","FrameRule","rule","testRules","rules","onmatch","matched_rules","patternMatchesFrame","unpack","arr","nonstring","unpackFeatures","feats","extensions","fstr","fid","frameType","kids","render","compare","collapse","showDisabledButtons","showEmpty","show_empty","dataviewer","headerFeatures","frametype","func","hf","applyFeatureProperty","nfeats","nfeat","fkey","hstyle","header_features","HTMLStringViewer","HTMLStringEditor","HTMLBooleanViewer","HTMLBooleanEditor","HTMLChoiceViewer","HTMLChoiceEditor","HTMLCoordinateViewer","HTMLCoordinateEditor","HTMLDateViewer","HTMLDateEditor","HTMLEntityViewer","HTMLEntityEditor","HTMLImageViewer","HTMLImageEditor","HTMLLinkViewer","HTMLNumberViewer","HTMLRangeViewer","HTMLRangeEditor","GoogleMapEditor","GoogleMapViewer","HTMLMarkupEditor","S2EntityEditor","initialiseDataRenderers","RenderingMap","registerViewerForTypes","registerEditorForTypes","hevopts","universalEditor","universalViewer","addPlugins","createRenderer","createDataRenderer","registerEditorForFrameType","HTMLDateHelper","months","getMonthName","GoogleMapHelper","polygon","polyline","markers","mapLat","mapLong","zoom","stroke","color","opacity","weight","fill","line","destroy","clear","translatePolygonToArray","vertices","getPath","seenValue","getLength","xy","getAt","lat","lng","translateArrayToPolygon","array","jsonified","output","latlong","createPolygon","coords","Polygon","paths","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","setMap","createPolyline","Polyline","clearMarkers","addMarker","position","marker","Marker","addListener","getCoordsFromMarkers","set","x","initMap","mapContainer","center","parseFloat","setPath","event","trigger","DatatypeRenderers","registeredDataViewers","registeredDataEditors","defaultViewers","defaultEditors","specials","editor","getValidDataViewerList","datatype","valids","concat","getValidDataEditorList","nftypes","getEditorForDataFrame","getViewerForDataFrame","record","types","getRenderer","getEditor","TerminusViolations","vios","nvios","TerminusViolation","context_msg","vdom","vioHeading","getPropertyAsDOM","pdom","ldom","mval","TerminusUI","ApiExplorer","TerminusDBsdk","TerminusQueryViewer","TerminusSchemaViewer","TerminusServersdk","TerminusURLLoader","controls","setOptions","connect","showBusy","clearBusy","connectToDB","showView","showDocumentPage","schema","showSchemaPage","showQueryPage","explorer","showExplorer","showDBMainPage","showServerMainPage","showError","createDatabase","dbdets","getBadArguments","dbdoc","generateNewDatabaseDocument","refreshDBList","crec","getCrashString","showMessage","deleteDatabase","delrec","lid","dbn","dets","fname","load","getConnectionEndpoint","clearServer","addURLPrefix","clearDB","TerminusServerViewer","redrawMainPage","showCollaboratePage","showLoadURLPage","TerminusDBViewer","page","showCreateDBPage","TerminusDBCreator","durl","showCreateDocument","TerminusDocumentViewer","getDocCreatorOptions","loadCreateDocument","mainDOM","deleteDBPermitted","getDeleteDBButton","confirm","showResult","showWarning","clearMessages","messages","clearMainPage","main","setMessageDOM","setbuttonControls","buttons","setControllerDOM","controller","setExplorerDOM","setPluginsDOM","setViewerDOM","draw","comps","slocation","redrawControls","toggleDashboardWidget","widget","toggleControl","drawControls","loadControls","ncontrol","nd","drawExplorer","exp","ae","sc","TerminusServerController","TerminusDBController","show_controls","pseudoCapability","show_views","busy","getBusyLoader","bsyDom","pd","pbc","pbsa","pbia","md","msgHolder","showViolations","cmsg","views","document_options","schema_options","piman","getDocViewerOptions","getClassFrameOptions","viewdoc_options","apiNavConfig","mainNav","navText","defaultSelected","database","subNav","getSchema","updateSchema","getClassFrames","viewDocument","createDocument","updateDocument","deleteDocument","select","update","use_fetch","return_full_response","pman","aec","getApiNav","getApiExplorerDom","setSelectedNavMenu","navOnSelect","createNavs","navConfig","ul","navDom","cont","row","apiCont","getConnectExplorer","getDatabaseExplorer","getSchemaApi","getDocumentApi","getQueryApi","changeSubApiDom","curSubMenu","getDatabaseDom","getShowApiDom","getQueryApiDom","subNavOnSelect","subMenuConfig","createSubNavs","getSignature","getForm","getServerForm","form","fd","inpLabel","cd","inpId","keyLabel","resd","gatherips","curApi","urlPlaceholder","formDoc","urlLabel","inpUrl","docUrlLabel","inpDocUrl","inpKey","docLabel","inpDoc","inp","docUrl","getApiSendButton","getApiForm","enc","schurl","buttonSelf","gtxtar","txtar","dcurl","schemaUrlDom","htmlEditor","getValue","getClassFrame","sg","ic","sig","DispatchRequest","URIError","dispatch","dburl","makeDocumentConsistentWithURL","addOptionsToDocument","docurl","qurl","addOptionsToWOQL","cfurl","pdoc","_","addKeyToPayload","dispatchFetch","redirect","referrer","hdrs","credentials","cache","Headers","fetch","ok","axios","btoaImplementation","Buffer","from","delete","catch","post","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","allocUnsafe","TypeError","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","len","copy","fromObject","assertSize","size","loweredCase","utf8ToBytes","base64ToBytes","slowToString","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","indexSize","arrLength","valLength","String","buf","readUInt16BE","foundIndex","hexWrite","offset","Number","remaining","strLen","substr","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","allocUnsafeSlow","_isBuffer","y","list","pos","swap16","swap32","swap64","equals","inspect","match","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","dst","g","Function","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","Axios","mergeConfig","createInstance","defaultConfig","instance","instanceConfig","CancelToken","isCancel","all","promises","spread","default","InterceptorManager","dispatchRequest","interceptors","chain","interceptor","fulfilled","rejected","shift","getUri","handlers","use","eject","transformData","isAbsoluteURL","combineURLs","throwIfCancellationRequested","throwIfRequested","reason","fns","normalizedName","isAxiosError","number","fileName","lineNumber","columnNumber","stack","ignoreDuplicateOf","originURL","msie","userAgent","urlParsingNode","resolveURL","protocol","host","search","hostname","port","pathname","requestURL","expires","path","domain","secure","cookie","toGMTString","decodeURIComponent","now","relativeURL","executor","resolvePromise","token","dataframes","classframes","parentframe","empty","loadClassFrames","originalFrames","loadDataFrames","newDoc","PropertyFrame","cframe","predicate","DataFrame","subjid","ClassFrame","Restriction","loadRestriction","jsonld_context","cf","isValid","hasSchema","frames","domainValue","getPropertyClassFrame","getChosenClassFrame","isLogic","getChosenFrame","addFrame","getAsFrame","ff","getAsFrames","isnew","restrictions","props","filter","ignore_failure","getProperties","filled","missing","nmissing","newb","fillFromSchema","newid","genBNID","pf","cloned","getChild","childid","pframe","getProperty","addProperty","createEmpty","createEmptyChoice","clss","getClassChoices","df","addPropertyValue","addValue","removeProperty","removePropertyValue","removeValue","first","parentObject","root","renderProperties","sortProperties","nprops","unsorted","sort","standardCompare","hasRestriction","rest","currentnum","propcount","long","kid","nframe","extract","extracts","updated","childUpdated","hasCardinalityRestriction","deletePropertyValue","gets","cvalues","fs","renderValues","sortedVals","sortValues","rangeValue","comment","originalValue","nrend","setNew","isValidType","dt","hasCardRestriction","isObjectProperty","isDatatypeProperty","isRestriction","isDocument","isChoice","getStdURL","getChoiceOptions","elements","option","lang","getTypeShorthand","contents","normalizer","loadFromObjectFrame","child","getChosenClassFrames","objframe","chosen","nc","operands","dataframe","cloneDataFrame","other","choices","domcls","operand","cardinality","maxCardinality","minCardinality","nrest","bindings","no_compress","compress","getContext","nprop","shorten","nval","last","next","prev","compareValues","asc_or_desc","getVariableList","count","hasBindings","getBindings","Pattern","WOQLQuery","chain_ended","contains_update","paging_transitive_properties","vocab","loadDefaultVocabulary","tripleBuilder","nspaces","spaces","TripleBuilder","when","Query","Update","into","or","queries","not","triple","isa","eq","JSON_or_IRI","delete_triple","S","P","O","delete_quad","G","add_triple","add_quad","vars","cols","as","vari","remote","group_by","gvarlist","groupedvar","groupquery","Q","lower","u","pad","unique","idgen","typecast","vara","varb","re","matches","less","v1","v2","greater","arith","plus","minus","times","divide","div","var1","star","classid","graph","propid","deleteClass","deleteProperty","nodeid","isLiteralType","arr1","arr2","buildAsClauses","clauses","va","vb","ng","sq","nlist","nvalue","upd","advanceCursor","cleanSubject","cleanPredicate","cleanObject","cleanGraph","cleanClass","last_index","abstract","lastUpdate","Subject","Predicate","Object_or_Literal","Graph","cleanType","asArray","card","addPO","pn","entity","relationship","GraphIRI","Subj","Pred","Obj","concreteDocumentClasses","getDataOfClass","getDataOfProperty","documentProperties","getDocumentConnections","getInstanceMeta","simpleGraphQuery","loadVocabulary","execute","spl","setVocabulary","getVocabulary","getLimit","getPagingProperty","setLimit","setPagingProperty","isPaged","getPage","psize","hasStart","getStart","setPage","pagenum","pstart","setStart","addStart","nextPage","firstPage","previousPage","npage","setPageSize","hasSelect","getSelectVariables","nq","defaultContext","DB_IRI","def","scm","subj","pageprop","indent","show_context","fluent","newlining_operators","operator","getWOQLPrelude","chainable","uncleanArguments","inline","lastArg","hasShortcut","getShortcut","argIsSubQuery","myas","lhs","rhs","uncleanArgument","allArgs","unclean","cstr","oval","uncleanObjectArgument","nstr","part","suff","printLine","ttype","evstr","unit","addEntry","getO","clause","os","od","tb","textdom","objectIsEmpty","darkMode","jsonldCheck","dimensions","fromTextArea","firstLineNumber","lineNumbers","styleActiveLine","lineWrapping","smartIndent","indentWithTabs","newlineAndIndent","autoCloseBrackets","matchBrackets","afterCursor","extraKeys","foldCode","getCursor","refresh","foldGutter","gutters","Pos","setCodemirrorSize","defaultCharWidth","setOption","setSize","setTimeout","on","runMode","innerText","theme","tv","container","pages","getDatabaseDocumentConfig","property_style","label_style","value_style","show_all","getDocumentsQueryPane","docClasses","table","column","column_order","click","getCreateDataPaneConfig","showQuery","editQuery","getCreateDocumentConfig","load_schema","getShowDocumentConfig","getDocumentsGraphConfig","literals","edges","edge","distance","collisionRadius","showDocumentGraph","insertDOM","getAllDocumentConnections","dloader","getLoaderDOM","graph_query_pane","showDocumentConnections","targetDOM","introdom","intro","createFullDocumentPane","result_options","dpoptions","q2","result2","bdom","getBodyAsDOM","getDocumentsDOM","getHomeDOM","showHappyBox","mydb","insertDocument","dchooser","getCreateDataChooser","delw","getDeleteDatabaseWidget","mactions","getDocumentsMenu","tableDOM","graphDOM","document_table","dcDOM","getNavigationDOM","dx","loadCreateDocumentPage","documentLoader","getShowDocumentControl","setClassLoader","page_actions","show_doc_action","tgtd","getToggleGraphTableDOM","redrawDocumentPage","docview","tisp","gisp","ticon","gicon","hov","del","di","icss","dbrec","dbdel","delbut","styleCreateDocumentChooser","change","pholder","chooser","labels","titles","happy","hbox","sets","nm","ispan","htit","pp","pop","nuke","scd","dcip","nbut","is","preventDefault","keyCode","sct","mfd","dht","sci","slab","idip","titip","descip","butfield","cancbut","loadbut","dbc","stopPropagation","getControlHTML","ResultPane","showConfig","editConfig","repl","nresult","updateResult","fireDefaultQueries","qcres","classMetaDataRes","qpres","propertyMetaDataRes","showHeader","addViews","getSection","sName","clearSubMenus","smenus","getResults","sampleQueryDOM","AddEvents","aval","choosen","getQueryMenu","qName","getSubDataMenu","getSchemaSection","section","checkIfDataMenuOpen","isOpen","showDataOfTypeEvent","subPar","showPropertyOfTypeEvent","addCheveronIcon","getDataSection","bd","fireDocumentEvent","getEnterDocumentIdDOM","getDocumentSection","getQueryMenuBlock","getSampleQueriesDOM","showQueryConfig","configspan","ipdom","qicon","sqd","hideQueryConfig","querySnippet","createInput","showingQuery","resultDOM","getAddViewControl","getResultPaneHeader","closable","savePaneButton","closePaneButton","collapsePaneButton","submitQuery","updateQuery","refreshViews","nrp","setResult","showNoBindings","nor","delta","vd","newView","selector","nv","Datatypes","SimpleTable","SimpleGraph","SimpleStream","SimpleChooser","querypane","changeViewType","renderers","stream","getResultDOM","getViewConfigIconClass","cvicons","getViewTypeIconDOM","prepend","getDefaultViewerIcon","getIconForViewer","changeViewerType","updateView","wres","datatypes","notify","html_renderer","show_types","renderFrame","renderValue","wrapShortenedText","big","isBigType","getTypeSize","vallab","elt","foptions","inputs","parseValue","lldom","getInputDOMs","latdom","longdom","getLatLongDOM","firstcol","updateValueFromForm","op","lldoms","butspan","addbut","ipdoms","DateHelper","allowbce","date_spacer","time_spacer","datetime_separator","helper","parseDate","datepart","getDateComponentDOM","timepart","getTimeComponentDOM","hdom","mdom","mlab","sdom","dadom","ydom","ddom","xsdFromParsed","tdom","opdom","onclick","holder","showValue","getEntityViewHTML","internalLink","getController","getEntityLabel","dv","nspan","il","getVariableValueFromBinding","tit","img","commas","TypeHelper","numberWithCommas","delimiter","parseRangeValue","rvals","svals","useCommas","tnode","getRangeSymbolDOM","x2","t2node","data1","data2","firstip","secondip","showing_range","but","changeHandler","mapcontainer","ghelper","latLng","coo","inner","quill","ctl","getClient","d2ch","TerminusDocumentChooser","woqltable","ctls","getControlsDOM","tab","getTableDOM","ctrls","pager","paging","getPaging","columns","getColumnsToRender","thead","getTableHeader","tbody","getTableBody","thr","th","getColumnHeader","colid","getColumnHeaderContents","tr","getHTMLRow","td","getCell","hasRowClick","rc","getRowClick","hasRowHover","getRowHover","hasCellClick","getCellClick","hasCellHover","getCellHover","getCellData","pagesize","psdom","getPageSize","canChangePage","getFirst","getPrev","getPageNumber","getNext","showPaging","chunk","clabel","change_pagesize","pval","canAdvancePage","canRetreatPage","GraphResultsViewer","wgraph","getGraphDOM","gviz","gdom","w","setData","initDOM","svg","visid","chars","randomString","currentDate","link_elements","node_elements","loadedNodes","focusNodes","nodes","links","selected_id","setConfigOptions","initD3","d3DOM","loadNewData","updateGraph","updateSimulation","dqr","getNodes","getEdges","updateData","setFocusNodeFromResult","reload","fix_nodes","getFocusNode","setFilter","simulation","stop","wake","hibernate","no_animate","nnodes","getNodesAndFringes","snode","nnode","fx","fy","explode_out","getLinks","scale_factor","setWidth","setHeight","clientWidth","clientHeight","jqid","append","attr","forceSimulation","force","forceLink","getLinkDistance","forceManyBody","strength","getCharge","forceCollide","radius","getCollisionRadius","forceCenter","drag_drop","drag","restart","zoomed","link_group","classed","node_group","current_transform","transform","follow_node_wrapper","graph_node","nodeSelected","selectAll","exit","node_enter","enter","getRadius","isFringe","getNodeIconUnicode","styleNodeElements","link_enter","styleLinkElements","show_force","alpha","each","getNodeColour","getNodeText","fontfam","getNodeIconWeight","getNodeIconSize","getNodeIconColour","getLineWidth","getEdgeArrow","getEdgeColour","getLinkText","getEdgeDirection","col","reference","getArrowWidth","getArrowHeight","selected_node","selection_grows","getScaleTransform","scale","min_ratio","new_mol_width","new_mol_height","y_trans","x_trans","transition","duration","scaleToFit","min_x","min_y","max_x","max_y","mol_width","mol_height","width_ratio","height_ratio","recentre","translated","dcx","dcy","text_elements","fontfamily","selected_grows","arrow","symmetric","charge","unicode","faclass","border","getMultiplier","mult","colrad","linkDistance","getNodeIcon","isNeighbourLink","added","upgraded","ccdom","ccsel","getEmptyOption","choice","createOptionFromChoice","SimpleFrameViewer","clsid","loadSchema","DocumentFrame","owner","filterFrame","loadDocument","applyRules","loadRenderer","fframe","loadClass","cloader","classLoader","queryPane","pane","showDocConfig","ndom","hideDocConfig","showingConfig","renderResult","fpt","rendname","termframe","evalstr","nr","applyRulesToDocument","tdv","setDatatypes","getScope","setDatatypeViewers","getDatatypeViewer","getFeaturesDOM","orient","getFrameDOM","replaceWith","flist","featuresToCSS","getFeatureDOM","ScriptPane","panes","new_pane","new_pane_type","meta","newPaneOptions","defaultResultOptions","getNewQueryPane","addQueryPane","qpane","addScriptPane","addScriptPaneDOM","addNewPaneDOM","addQueryPaneDOM","setNewDocumentPaneDOM","qdom","qhdr","getPaneHeader","paneDOM","getPanesDOM","controlDOM","newPaneButton","panesDOM","npd","nqhdr","getNewPaneHeader","headerDOM","removePane","showPane","hidePane","newScriptButton","newDocButton","executeScript","showOKMessage","confirm_before_update","classes","views_dom","current_view","retrieveViews","getClassesPane","getPropertiesPane","refreshPanes","getOWLView","controldom","getTabsDOM","pagedom","owldom","updateOWLContents","getSchemaEditButton","getSchemaViewDOM","getSchemaSaveButtons","getSchemaEditDOM","getTabDOM","switchView","toggleTabs","msgtype","getCancelButton","getSaveButton","is_import","getSchemaButton","schema_edit_dom","schema_edit_dom_name","np","getSchemaNameInputDOM","ipval","Datatables","rsc","getServerLabelDOM","srec","desc","getServerDetailsDOM","csbut","crbut","getDBListDOM","scl","wrapTableLinkCell","tdElement","sec","th1","th2","th3","th4","th5","th6","fullid","td1","td2","td3","td4","td5","td6","CspDatatables","wResViewer","qPage","wrViewer","wQuery","currDTSettings","convertToDatatable","DataTable","searching","lengthMenu","initComplete","oInstance","$","html","columnDefs","targets","createdRow","find","cell","dbInfo","parents","dbId","dtResult","executeQuery","pageInfo","formatResultsForDatatableDisplay","generateNewQueryOnPageChange","qTextDom","queryMode","getCallbackSettings","dtAPIChangeSettings","_iDisplayLength","_iDisplayStart","iDraw","chosenValue","setUp","dtdom","updateCurrDTSettings","getNewDataOnChange","drawnTab","aSettings","getDataFromServer","serverSide","processing","autoWidth","ajax","entries","scrollX","showDocument","selectDocumentNavBar","url_input","key_input","getLabelDOM","getFormFieldDOM","ip","ltxt","loadbuts"],"mappings":"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","file":"terminus-dashboard.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 28);\n","const TerminusClient = require('@terminusdb/terminus-client');\nlet HTMLHelper = {};\n\nHTMLHelper.getSettingsControl = function(view){\n\tvar icon = document.createElement('icon');\n\tif(view == 'property') icon.setAttribute('class', 'fa fa-cog terminus-pointer');\n\telse if(view == 'data') icon.setAttribute('class', 'fa fa-edit terminus-pointer');\n\ticon.setAttribute('style', 'margin: 10px;')\n\treturn icon;\n}\n\nHTMLHelper.getControlIcon = function(control){\n\tvar icon;\n\tswitch(control){\n\t\tcase 'delete':\n\t\t\ticon = '-alt-delete';\n\t\tbreak;\n\t\tcase 'add':\n\t\t\ticon = '-plus';\n\t\tbreak;\n\t\tcase 'reset':\n\t\t\ticon = '-undo';\n\t\tbreak;\n\t\tcase 'save':\n\t\t\ticon = '-save';\n\t\tbreak;\n\t\tcase 'hide':\n\t\t\ticon = '-eye-slash';\n\t\tbreak;\n\t}\n\treturn icon;\n}\n\nHTMLHelper.getSelectionControl = function(type, options, selected, callback){\n\tvar sel = document.createElement(\"select\");\n\tsel.setAttribute(\"class\", \"terminus-frame-selector frame-control-selection \" + type);\n\tfor(var i = 0; i < options.length; i++){\n\t\tvar opt = document.createElement(\"option\");\n\t\tif(typeof options[i] == \"object\"){\n\t\t\topt.value = options[i].value;\n\t\t\tvar label = (options[i].label ?  document.createTextNode(options[i].label) : document.createTextNode(TerminusClient.UTILS.labelFromURL(options[i].value)));\n\t\t\topt.appendChild(label);\n\t\t}\n\t\telse {\n\t\t\topt.value = options[i];\n\t\t\tlabel = TerminusClient.UTILS.labelFromURL(opt.value);\n\t\t\topt.appendChild(document.createTextNode(label));\n\t\t}\n\t\tif(selected == opt.value){\n\t\t\topt.setAttribute(\"selected\", \"selected\");\n\t\t}\n\t\tsel.appendChild(opt);\n\t}\n\tsel.addEventListener(\"change\", function(){\n\t\tcallback(this.value);\n\t});\n\treturn sel;\n}\n\nHTMLHelper.getModeSelectorDOM = function(which, renderer){\n\tvar viewsDOM = document.createElement(\"span\");\n\tviewsDOM.setAttribute(\"class\", \"terminus-mode terminus-\"+which+\"-mode\");\n\tif(renderer.mode == \"view\"){\n\t\tvar callback = function(){ renderer.setMode(\"edit\");}\n\t\tviewsDOM.appendChild(HTMLHelper.getActionControl(\"terminus-mode terminus-\"+which+\"-mode\", \"edit\", \" Edit \", callback));\n\t}\n\telse if(renderer.isNew()){\n\t\treturn false;\n\t}\n\telse {\n\t\tvar callback = function(){ renderer.cancel();}\n\t\tviewsDOM.appendChild(HTMLHelper.getActionControl(which, \"cancel\", \"Cancel\", callback));\n\t}\n\treturn viewsDOM;\n}\n\nHTMLHelper.goToName = function(s, p, i){\n\tvar url = window.location.href;\n\tif(url){\n\t\tvar wbits = url.split(\"#\");\n\t\tvar loc = wbits[0];\n\t\tvar sh = TerminusClient.UTILS.getShorthand(s);\n\t    if(!sh) sh = s;\n\t\tvar bits = sh.split(\":\");\n\t\tif(bits.length > 1) sh = bits[1];\n\t\tvar htmlid = sh;\n\t\tif(p){\n\t\t\tvar prop = TerminusClient.UTILS.getShorthand(p);\n\t\t\tif(!prop ) prop = p;\n\t\t\tvar bits = prop.split(\":\");\n\t\t\tif(bits.length > 1) prop = bits[1];\n\t\t\thtmlid += \"_\" + prop;\n\t\t\tif(i){\n\t\t\t\thtmlid += \"_\" + i;\n\t\t\t}\n\t\t}\n\t\twindow.location = loc + \"#\" + htmlid;\n\t}\n}\n\nHTMLHelper.wrapShortenedText = function(wrap, text, max_cell_size, max_word_size){\n\tif(max_cell_size && (text.length > max_cell_size)){\n\t\twrap.setAttribute(\"title\", text);\n\t\ttext = text.substring(0, max_cell_size) + \"...\";\n\t}\n\tif(text && text.length > max_word_size){\n\t\tconst replacements = {}\n\t\tconst words = text.split(\" \");\n\t\tfor(var i = 0; i < words.length; i++){\n\t\t\tvar word = words[i];\n\t\t\tif(word.length > max_word_size){\n\t\t\t\twrap.setAttribute(\"title\", text);\n\t\t\t\tvar newstr = word.substring(0, max_word_size) + \"...\";\n\t\t\t\treplacements[word] = newstr;\n\t\t\t}\n\t\t}\n\t\tfor(var k in replacements){\n\t\t\ttext = text.replace(k, replacements[k]);\n\t\t}\n\t}\n\twrap.appendChild(document.createTextNode(text));\n}\n\nHTMLHelper.getVariableValueFromBinding = function(varname, bind){\n\tfor(var key in bind){\n\t\tvar skey = key.substring(key.lastIndexOf(\"/\")+1);\n\t\tif(skey == varname){\n\t\t\tconst obj = bind[key];\n\t\t\tif(typeof obj == \"object\" && obj['@value']) return obj['@value'];\n\t\t\treturn obj;\n\t\t}\n\t}\n\treturn false;\n}\n\n\n\n/*\n * HTML drawing function for document rendering \n */\n\nHTMLHelper.getFrameDOM = function(scope, frame, orientation, hfeatures, features){\n\tif(frame.display_options.hidden) return false;\n\tvar framedom = HTMLHelper.getFrameHolderDOM(scope, frame, orientation);\n\tif(typeof frame.display_options.header == \"function\"){\n\t\tvar hd = frame.display_options.header(hfeatures);\n\t\tframedom.appendChild(hd);\n\t}\n\telse {\n\t\tvar hd = HTMLHelper.getFrameHeaderDOM(scope, frame, orientation, hfeatures);\n\t\tif(typeof frame.display_options.header_style != \"undefined\"){\n\t\t\thd.setAttribute(\"style\", frame.display_options.header_style);\n\t\t}\n\t\tframedom.appendChild(hd);\n\t}\n\tframedom.appendChild(HTMLHelper.getFrameBodyDOM(scope, frame, orientation, features));\n\treturn framedom;\n}\n\nHTMLHelper.getFrameHolderDOM = function(scope, frame, orientation){\n\tvar pcls = \"terminus-\" + scope + \"-frame\";\n\tif(orientation == \"page\"){\n\t\tvar sp = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar sp = document.createElement(\"span\");\n\t}\n\tvar css = pcls + \" \" + pcls + \"-\" + orientation + \n\t\t(scope == \"object\" && frame.parent ? \"\" : \" terminus-root-frame\") \n\t\t+ \" \" + pcls + \"-\" + frame.display_options.mode;\n\tsp.setAttribute(\"class\", css);\n\tif(scope == \"object\"){\n\t\tsp.setAttribute(\"data-class\", frame.subjectClass());\n\t\tsp.setAttribute(\"data-id\", frame.subject());\t\t\n\t\tvar hid = this.hash(frame.subject());\n\t}\n\telse if(scope == \"property\"){\n\t\tsp.setAttribute('data-property', frame.property());\t\n\t\tvar hid = this.hash(frame.subject()+frame.property());\n\t}\n\telse if(scope == \"data\"){\n\t\tsp.setAttribute('data-value', frame.get());\n\t\tvar hid = this.hash(frame.subject() + frame.property() + frame.index);\n\t}\n\tvar idm = document.createElement(\"a\");\n\tidm.setAttribute(\"class\", \"terminus-\" + scope + \"-idmarker\");\n\tidm.setAttribute(\"name\", hid);\t\t\t\t\n\tsp.appendChild(idm);\n\treturn sp;\n}\n\nHTMLHelper.getFrameHeaderDOM = function(scope, frame, orientation, features){\n\tvar css = \"terminus-\" + scope + \"-header\";\n\tif(orientation == \"page\"){\n\t\tvar objDOM = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar objDOM = document.createElement(\"span\");\n\t}\n\tobjDOM.setAttribute(\"class\", css + \" \" + css + \"-\" + orientation);\n\tif(features) objDOM.appendChild(features);\n\treturn objDOM;\n}\n\nHTMLHelper.getFrameBodyDOM = function(scope, frame, orientation, features){\n\tvar css = \"terminus-\" + scope + \"-properties\";\n\tif(orientation == \"page\"){\n\t\tvar vholder = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar vholder = document.createElement(\"span\");\n\t}\n    vholder.setAttribute('class', css + \" \" + css + \"-\" + orientation);\n    if(features) vholder.appendChild(features);\n    return vholder;\n}\n\nHTMLHelper.hash = function(s) {\n\tvar hash = 0, i, chr;\n\tif (s.length === 0) return hash;\n\tfor (i = 0; i < s.length; i++) {\n\t    chr   = s.charCodeAt(i);\n\t    hash  = ((hash << 5) - hash) + chr;\n\t    hash |= 0; // Convert to 32bit integer\n\t}\n\treturn hash;\n};\n\nHTMLHelper.getFeatureDOM = function(frame, feature, scope, mode, args, rend){\n\n\tif(feature == \"id\"){\t\n\t\tif(scope == \"object\") var val = frame.subject();\n\t\telse if(scope == \"property\") var val = frame.property();\n\t\tif(val == \"_:\") var val = \"New Document\";\n\t\treturn HTMLHelper.getInfoboxDOM(\"object-id\", \"ID\", val, \"The ID that identifies this document\", mode, args, rend);\n\t}\n\telse if(feature == \"summary\"){\n\t\tvar sum = frame.getSummary();\n\t\treturn HTMLHelper.getInfoboxDOM(scope + \"-summary\", false, sum.long, sum.status, mode, args);\n\t}\n\telse if(feature == \"label\"){\n\t\tvar lab = frame.getLabel();\n\t\tif(lab){\n\t\t\treturn HTMLHelper.getInfoboxDOM(scope + \"-type\", false, lab, false, mode, args);\n\t\t}\n\t\treturn false;\n\t}\n\telse if(feature == \"status\"){\n\t\tvar sum = frame.getSummary();\n\t\treturn HTMLHelper.getInfoboxDOM(scope + \"-status-\"+sum.status, false, sum.status, sum.status, mode, args);\n\t}\n\telse if(feature == \"comment\"){\n\t\tvar lab = frame.getComment();\n\t\treturn HTMLHelper.getInfoboxDOM(\"property-comment\", false, lab, false, mode, args);\n\t}\n\telse if(feature == \"type\"){\n\t\tif(scope == \"property\" && mode == \"edit\" && frame.parent && frame.parent.isClassChoice() && frame.isNew()){\n\t\t\treturn this.getClassChoiceTypeSelector(frame, mode, args);\n\t\t}\n\t\tif(scope == \"object\") var lab = frame.subjectClass();\n\t\telse if(scope == \"property\") var lab = frame.range();\n\t\telse if(scope == \"data\") var lab = frame.getType();\n\t\tif(lab){\n\t\t\treturn HTMLHelper.getInfoboxDOM(scope + \"-type\", \"Type\", lab, false, mode, args);\n\t\t}\n\t\treturn false;\n\t}\n\telse if(feature == \"delete\"){\n\t\tvar callback = function(){frame.delete()};\n\t\tvar disabled = false;\n\t\tif(!frame.cardControlAllows(\"delete\", scope)){\n\t\t\tif(!frame.display_options.show_disabled_buttons){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdisabled = \"Cardinality rules prevent deleting this element\";\n\t\t}\n\t\treturn HTMLHelper.getActionControl(scope, \"delete\", \"Delete\", callback, disabled, mode, args);\n\t}\n\telse if(feature == \"clone\"){\n\t\tvar callback = function(){frame.clone()};\n\t\tvar disabled = false;\n\t\tif(!frame.cardControlAllows(\"clone\", scope)){\n\t\t\tif(!frame.display_options.show_disabled_buttons){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdisabled = \"Cardinality rules prevent cloning this element\";\n\t\t}\n\t\treturn HTMLHelper.getActionControl(scope, \"clone\", \"Clone\", callback, disabled, mode, args);\n\t}\n\telse if(feature == \"reset\"){\n\t\tvar callback = function(){frame.reset()};\n\t\tvar disabled = false;\n\t\tif(!frame.isUpdated()){\n\t\t\tif(!frame.display_options.show_disabled_buttons){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdisabled = \"No changes have been made to this element\";\n\t\t}\n\t\treturn HTMLHelper.getActionControl(scope, \"reset\", \"Reset\", callback, disabled, mode, args);\n\t}\n\telse if(feature == \"mode\"){\n\t\tvar callback = function(){frame.mode(\"edit\")};\n\t\treturn HTMLHelper.getActionControl(scope, \"mode\", \"Edit\", callback, mode, args);\n\t}\n\telse if(feature == \"hide\"){\n\t\tvar callback = function(){frame.show()};\n\t\treturn HTMLHelper.getActionControl(scope, \"hide\", \"Hide\", callback, mode, args);\n\t}\n\telse if(feature == \"update\"){\n\t\tvar callback = function(){frame.save()};\n\t\tif(!frame.isUpdated() && !frame.display_options.show_disabled_buttons, mode, args){\n\t\t\treturn false;\n\t\t}\n\t\tvar disabled = frame.isUpdated() ? false : \"No changes have been made to this element\";\n\t\treturn HTMLHelper.getActionControl(scope, \"save\", \"Save\", callback, disabled, mode, args);\n\t}\n\telse if(feature == \"viewer\"){\n\t\treturn false;//this.getViewerSelectorDOM(scope, frame, mode, args);\n\t}\n\telse if(feature == \"view\"){\n\t\treturn this.getViewEntryDOM(scope, frame, mode, args);\n\t}\n\telse if(feature == \"cardinality\"){\n\t\treturn this.getCardinalityDOM(scope, frame, mode, args);\n\t}\n\telse if(feature == \"add\"){\n\t\treturn this.getAddDOM(scope, frame, mode, args);\n\t}\n}\n\nHTMLHelper.getViewerSelectorDOM = function(scope, frame, mode, args){\n\t//var viewers = frame.datatypes.getAvailableViewers();\n\t//var r = frame.datatypes.getRenderer(t);\n\n\tif(viewers && viewers.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-\" + scope + \"-viewer\");\n\t\tvar callback = function(viewer){\n\t\t\tif(viewer){\n\t\t\t\tframe.setViewer(viewer);\n\t\t\t}\n\t\t}\n\t\tvar selected = frame.currentViewer();\n\t\tvar sel = HTMLHelper.getSelectionControl(scope + '-viewer', viewers, selected, callback, mode, args);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\n\n/* needs html viewer context for goto */\nHTMLHelper.getViewEntryDOM = function(scope, frame, mode, args){\n\tif(scope == \"object\"){\n\t\tvar viewables = frame.getFilledPropertyList();\n\t}\n\telse if(scope == \"property\"){\n\t\t\n\t}\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-\"+scope + \"-view-entry\");\n\t\tviewables.unshift({ value: \"\", label: \"View \" + scope});\n\t\tvar callback = function(add){\n\t\t\tif(add){\n\t\t\t\tframe.goToEntry(add);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLHelper.getSelectionControl(scope + \"-view-entry\", viewables, \"\", callback, mode, args);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n\t\n}\n\nHTMLHelper.getCardinalityDOM = function(scope, frame, mode, args){\n\tvar restriction = frame.getRestriction();\n\tif(restriction.min && restriction.max){\n\t\tif(restriction.min == restriction.max){\n\t\t\tvar lab = restriction.min;\n\t\t\tvar help = \"Cardinality: \" + restriction.min;\n\t\t}\n\t\telse {\n\t\t\tvar lab = restriction.min + \"-\" + restriction.max;\n\t\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\n\t\t\thelp += \", Maximum Cardinality: \" + restriction.max;\n\t\t}\n\t}\n\telse if(restriction.min){\n\t\tvar lab = \">\"+(restriction.min-1);\n\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\n\t}\n\telse if(restriction.max){\n\t\tvar lab = \"<\"+(restriction.max+1);\n\t\tvar help = \"Maximum Cardinality: \" + restriction.max;\n\t}\n\telse {\n\t\treturn false;\n\t}\n\treturn HTMLHelper.getInfoboxDOM(\"property-cardinality\", \"Cardinality\", lab, help, mode, args);\n}\n\nHTMLHelper.getClassChoiceTypeSelector = function(frame, mode, args){\n\tvar cs = frame.parent.getAvailableClassChoices();\n\tif(cs && cs.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-change-class\");\n\t\tvar mlabDOM = document.createElement(\"span\");\n\t\tmlabDOM.setAttribute(\"class\", \"terminus-property-change-label\");\n\t\tmlabDOM.appendChild(document.createTextNode(\"Type\"));\n\t\tmpropDOM.appendChild(mlabDOM);\n\t\tvar callback = function(cls){\n\t\t\tif(cls){\n\t\t\t\tframe.changeClass(cls);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLHelper.getSelectionControl(\"change-class\", cs, frame.subjectClass(), callback, mode, args);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLHelper.getAddDOM = function(scope, frame, mode, args){\n\tif(scope == \"property\"){\n\t\tif(frame.isClassChoice()){\n\t\t\tvar cs = frame.getAvailableClassChoices();\n\t\t\tif(cs && cs.length){\n\t\t\t\tvar mpropDOM = document.createElement(\"span\");\n\t\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-add-class\");\n\t\t\t\tcs.unshift({ value: \"\", label: \"Add Type\"});\n\t\t\t\tvar callback = function(cls){\n\t\t\t\t\tif(cls){\n\t\t\t\t\t\tframe.addClass(cls);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar sel = HTMLHelper.getSelectionControl(\"add-property\", cs, \"\", callback, mode, args);\n\t\t\t\tmpropDOM.appendChild(sel);\n\t\t\t\treturn mpropDOM;\n\t\t\t}\n\t\t}\n\t\tif(frame.cardControlAllows(\"add\") || frame.display_options.show_disabled_buttons){\n\t\t\tvar callback = function(){frame.add(\"edit\")};\n\t\t\tvar disabled = (frame.cardControlAllows(\"add\") ? false : \"Cardinality Rules Forbid Add\");\n\t\t\treturn HTMLHelper.getActionControl(scope + \"-add-entry\", \"add\", \"Add\", callback, disabled, mode, args);\n\t\t}\n\t}\n\telse {\n\t\tvar addables = frame.getMissingPropertyList();\n\t\tif(addables && addables.length){\n\t\t\tvar mpropDOM = document.createElement(\"span\");\n\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-\" + scope + \"-add-entry\");\n\t\t\taddables.unshift({ value: \"\", label: \"Add new \" + scope});\n\t\t\tvar callback = function(add){\n\t\t\t\tif(add){\n\t\t\t\t\tif(scope == \"object\") frame.addNewProperty(add);\n\t\t\t\t\telse if(scope == \"property\") frame.addNewValue(add);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(frame.cardControlAllows(\"add\") || frame.display_options.show_disabled_buttons){\n\t\t\t\tvar disabled = (frame.cardControlAllows(\"add\") ? false : \"Cardinality rules forbid adding element\");\n\t\t\t\tvar sel = HTMLHelper.getSelectionControl(scope + \"-add-entry\", addables, \"\", callback, disabled, mode, args);\n\t\t\t\tmpropDOM.appendChild(sel);\n\t\t\t\treturn mpropDOM;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nHTMLHelper.getInfoboxDOM = function(type, label, value, help, mode, args, input){\n\t/*var frow = this.getFrameRow();\n\tvar fgroup = this.getFrameGroup(frow);*/\n\tvar infoDOM = document.createElement(\"span\");\n\tinfoDOM.setAttribute(\"class\", \"terminus-frame-infobox-box \" + \"terminus-\" +type );\n\t//fgroup.appendChild(infoDOM);\n\tif(help){\n\t\tinfoDOM.setAttribute(\"title\", help);\n\t}\n\tif(args && typeof args.label != \"undefined\") label = args.label;\n\tif(label !== false){\n\t\tlabel = (args && args.label ? args.label : label);\n\t\tvar linfo = document.createElement(\"span\");\n\t\tlinfo.setAttribute(\"class\", \"terminus-frame-infobox-label \" + \"terminus-\" +type + \"-label\");\n\t\tlinfo.appendChild(document.createTextNode(label));\n\t\tif(args && args.headerStyle){\n\t\t\tlinfo.setAttribute(\"style\", args.headerStyle);\t\t\t\n\t\t}\n\t\tinfoDOM.appendChild(linfo);\n\t}\n\tvar lval = document.createElement(\"span\");\n\tlval.setAttribute(\"class\", \"terminus-frame-infobox-value \" + \"terminus-\" +type + \"-value\");\n\tif(input){\n\t\tinput.value = value;\n\t\tlval.appendChild(input);\n\t}\n\telse if(args && args.removePrefixes && value && value.split(\":\").length == 2) {\n\t\tvar bits = value.split(\":\");\n\t\tsh = bits[1];\n\t\tlval.setAttribute(\"title\", value);\n\t\tlval.appendChild(document.createTextNode(sh));\n\t}\n\telse {\n\t\tlval.appendChild(document.createTextNode(value));\n\t}\n\tif(args && args.bodyStyle){\n\t\tlval.setAttribute(\"style\", args.bodyStyle);\n\t}\n\tinfoDOM.appendChild(lval);\n\tif(args && args.style){\n\t\tinfoDOM.setAttribute(\"style\", args.style)\n\t}\n\treturn infoDOM;\n}\n\n\nHTMLHelper.getActionControl = function(type, control, label, callback, disabled, mode, args){\n\t//var pman = new TerminusPluginManager();\n\tvar dpropDOM = document.createElement(\"span\");\n\t//dpropDOM.setAttribute(\"class\", \"terminus-action-control terminus-save-btn \" + type + \"-\" + control);\n\tlabel = (args && typeof args.label != \"undefined\" ? args.label : label);\n\ticon = (args && args.icon ? args.icon : false);\n\tif(icon){\n\t\tvar i = document.createElement(\"i\");\n\t\ti.setAttribute(\"class\", \"fa \" + icon);\n\t\ticon = i;\n\t}\n\tvar tag = (args && args.tag ? args.tag : \"button\");\n\tvar button = document.createElement(tag);\n\tif(icon){\n\t\tbutton.appendChild(icon);\n\t}\n\tif(label) button.appendChild(document.createTextNode(\" \" + label + \" \"));\n\tif(args && args.title){\n\t\tbutton.setAttribute(\"title\", args.title);\n\t}\n\tif(disabled){\n\t\t//button.setAttribute(\"class\", \"terminus-frame-control terminus-frame-btn frame-control-action action-disabled \" + type + \"-\" + control + \"-disabled\");\n\t\tbutton.setAttribute(\"title\", disabled);\n\t}\n\telse {\n\t\t//button.setAttribute(\"class\", \"terminus-frame-control terminus-frame-btn frame-control-action \" + type + \"-\" + control);\n\t\t\n\t}\n\tdpropDOM.appendChild(button);\n\treturn dpropDOM;\n}\n\nHTMLHelper.removeChildren = function (node) {\n\tif (node) {\n\t\twhile (node.hasChildNodes()) {\n\t\t\tnode.removeChild(node.childNodes[0]);\n\t\t}\n\t}\n};\n\nHTMLHelper.loadDynamicScript = function (scriptid, src, callback) {\n\tconst existingScript = document.getElementById(scriptid);\n\tif (!existingScript) {\n\t\tconst script = document.createElement('script');\n\t\tscript.src = src; // URL for the third-party library being loaded.\n\t\tdocument.body.appendChild(script);\n\t\tscript.onload = function () {\n\t\t\tscript.id = scriptid; // do it here so it doesn't trigger the callback below on multiple calls\n\t\t\tif (callback) callback(scriptid);\n\t\t};\n\t}\n\tif (existingScript && callback) {\n\t\tcallback(scriptid);\n\t}\n};\n\nHTMLHelper.loadDynamicCSS = function (cssid, src, callback) {\n\tconst existingScript = document.getElementById(cssid);\n\tif (!existingScript) {\n\t\tconst link = document.createElement('link');\n\t\tlink.href = src; // URL for the third-party library being loaded.\n\t\tlink.id = cssid; // e.g., googleMaps or stripe\n\t\tlink.rel = 'stylesheet';\n\t\tdocument.body.appendChild(link);\n\t\tlink.onload = function () {\n\t\t\tif (callback) callback(cssid);\n\t\t};\n\t}\n\tif (existingScript && callback) callback(cssid);\n};\n\n\nHTMLHelper.removeElement = function (node) {\n\tif (node) {\n\t\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\nmodule.exports=HTMLHelper\n","'use strict';\nmodule.exports = {\n\t\t\t\t WOQLClient:require('./lib/woqlClient'),\n                  ConnectionCapabilities:require('./lib/connectionCapabilities'),\n                  ConnectionConfig:require('./lib/connectionConfig'),\n                  IDParser:require('./lib/terminusIDParser'),\n                  ErrorMessage:require('./lib/errorMessage'),\n                  FrameHelper:require('./lib/frameHelper'),\n                  ObjectFrame:require('./lib/objectFrame'),\n                  WOQLResult:require('./lib/woqlResult'),\n                  WOQL:require('./lib/woql')};","'use strict';\n\nvar bind = require('./helpers/bind');\nvar isBuffer = require('is-buffer');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n","/**\n * @file Javascript Api explorer tool\n * @author Kitty Jose\n * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more\n *\n * @summary Set of functions used across scripts\n */\nconst Codemirror= require('./plugins/codemirror.terminus');\nconst TerminusClient = require('@terminusdb/terminus-client');\nconst HTMLHelper = require('./html/HTMLHelper');\n\n// function to read Files\nfunction readFile(file){\n    if (window.XMLHttpRequest){\n        // code for IE7+, Firefox, Chrome, Opera, Safari\n        xmlhttp=new XMLHttpRequest();\n    }\n    else{\n        // code for IE6, IE5\n        xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\");\n    }\n    xmlhttp.open(\"GET\",file,false);\n    xmlhttp.send();\n    xmlDoc=xmlhttp.responseText;\n    return xmlDoc;\n} // readFile()\n\n// function to write api call signatures from woql client\nfunction getFunctionSignature(which){\n  var sigs = {};\n  sigs.connect = {\n    spec   : \"WOQLClient.connect(surl, key)\",\n    descr  : \"\\n\\nConnect to a Terminus server at the given URI with an API key\"\n                + \"Stores the terminus:ServerCapability document returned in the connection register\"\n                + \"which stores, the url, key, capabilities, and database meta-data for the connected server\"\n                + \"If the curl argument is false or null, the this.server will be used if present,\"\n                + \" or the promise will be rejected.\"\n                + \"\\n1)The first (surl) argument: {string} argument it is the Server Url\"\n                + \"\\n2)The second(key) argument: {string} argument contains an API key\",\n    result : \"HTTP 200 on success, 409 for already existing database, otherwise error code\",\n    args   : {server_url : 'url', key: 'Api key'},\n    options: { title: \"\", description: \"\" }\n  };\n  sigs.create = {\n    spec    : \"WOQLClient.createDatabase(dburl, details, key)\",\n    descr   : \"\\n\\nCreate a Terminus Database\"\n                + \"\\n1)The first (dburl) argument:{string}, it is a terminusDB Url or a terminusDB Id \"\n                + \"\\n2)The second(details) argument:{object}, details which is the payload\"\n                + \"\\n which included information of the new database to be created\"\n                +  \"\\n3)The third (key) argument:{string}, contains an API key \",\n    result : \"HTTP 200 on success, 409 for already existing database, otherwise error code\",\n    args   : {database_url : 'url', details: '', key: ' Api key'},\n    options: { title: \"\", description: \"\" }\n  };\n  sigs.delete = {\n      spec  : \"WOQLClient.deleteDatabase(dburl, key)\",\n      descr : \"\\n\\nDeletes a Database\"\n                + \"\\n1)The first (dburl) argument: {string}, it is a terminusDB Url or a terminusDB Id \"\n                + \"\\n2)The second(key) argument: {string}, contains an API key\",\n      result: \"HTTP 200 on success, otherwise error code\",\n  };\n  sigs.getSchema = {\n    spec   : \"WOQLClient.getSchema(surl, options)\",\n    descr  : \"\\n\\nGets the schema of a database.\"\n             +\"\\n1)The first (surl) argument: {string}, it is a dbUrl/schema\"\n             + \"\\n2)The second(key) argument: {string}, contains an API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    options: { format: \"turtle\" }\n  };\n  sigs.getClassFrames = {\n    spec   : \"WOQLClient.getClassFrame = function(cfurl, cls, opts)\",\n    descr  : \"\\n\\nRetrieves a WOQL query on the specified database which updates the state and returns the results\"\n              +  \"\\nThe first (cfurl) argument can be\"\n              + \"\\n1) a valid URL of a terminus database or\"\n              +  \"\\n2) omitted - the current database will be used\"\n              +  \"\\nthe second argument (cls) is the URL / ID of a document class that exists in the database schema\"\n              +  \"\\nthe third argument (opts) is an options json - opts.key is an optional API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    options: { format: \"turtle\" }\n  };\n  sigs.updateSchema = {\n    spec    : \"WOQLClient.updateSchema(schurl, docs, options)\",\n    descr   : \"\\n\\nUpdates the Schema of the specified database\"\n                +\"\\n1)The first (surl) argument :{string}, is a dbUrl/schema\"\n                + \"\\n2)The second(docs) argument:{object}, is a valid owl ontology (new schema to be updated) in turtle format\"\n                + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args   : {document : 'doc'},\n    options: { format: \"turtle\", editmode: \"replace\"}\n  };\n  sigs.createDocument = {\n    spec   : \"WOQLClient.createDocument(docurl, document, options)\",\n    descr  : \"\\n\\nCreates a new document in the specified database\"\n              + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\n              + \"\\n2)The second(document) argument: {object}, is a valid document in json-ld\"\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result : \"Created Document on success (HTTP 200), Violation Report Otherwise (HTTP 400+)\",\n    args   : {document_url : 'url', document: \"doc\"},\n    options: { format: \"turtle\", fail_on_id_denied: false}\n  };\n  sigs.viewDocument = {\n    spec    : \"WOQLClient.getDocument(docurl, options)\",\n    descr   : \"\\n\\nRetrieves a document from the specified database\"\n              + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\n              + \"\\n2)The second (key) argument: {string}, contains an API key\",\n    result : \"Document (HTTP 200), Violation Report Otherwise (HTTP 400+)\",\n    args   : {document_url : 'url'},\n    options: { format: \"turtle\"}\n  };\n  sigs.updateDocument = {\n    spec   : \"WOQLClient.updateDocument(docurl, document, options)\",\n    descr  : \"\\n\\nUpdates a document in the specified database with a new version\"\n                + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\n                + \"\\n2)The second(document) argument: {object}, is a valid document in json-ld\"\n                + \"\\n3)The third (key) argument:{string} argument contains an API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args   : {document_url : 'url', document: \"doc\"},\n    options: { format: \"turtle\", editmode: \"replace\"}\n  };\n  sigs.deleteDocument = {\n    spec  : \"WOQLClient.deleteDocument(docurl, key)\",\n    descr : \"\\n\\nDeletes a document from the specified database\"\n            + \"\\n1)The first (docurl) argument: {string},is a dbUrl/document/document_id\"\n            + \"\\n2)The second (key) argument: {string}, contains an API key\",\n    result: \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args  : {document_url : 'url'},\n  };\n  sigs.select = {\n    spec: \"WOQLClient.select(dburl, query, options)\",\n    descr: \"\\n\\nExecutes a read-only WOQL query on the specified database and returns the results\"\n              + \"\\n1)The first (docurl) argument: {string}, is a terminusDB Url or a terminusDB Id\"\n              + \"\\n2)The second (query) argument: {object}, a valid query in json-ld format \"\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {woql: 'woql'},\n  };\n  sigs.update = {\n    spec  : \"WOQLClient.update(dburl, query, options)\",\n    descr : \"\\n\\nExecutes a WOQL query on the specified database which updates the state and returns the results\"\n              + \"\\n1)The first (dburl) argument: {string}, is a terminusDB Url or a terminusDB Id\"\n              + \"\\n2)The second (query) argument: {object}, a valid query in json-ld format \"\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args  : {woql: 'woql'},\n  };\n  sigs.lookup = {\n    spec: \"WOQLClient.lookup(database_url, woql, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url', term: 'string'},\n  };\n  sigs.map = {\n    spec: \"WOQLClient.lookup(source, target, woql, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {source: 'json', target: \"json\", woql: 'json'},\n  };\n  sigs.getClassFrame = {\n    spec: \"WOQLClient.getClassFrame(class, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url'},\n  };\n  sigs.getPropertyFrame = {\n    spec: \"WOQLClient.getPropertyFrame(class, property, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url', property: 'url'},\n  };\n  sigs.getFilledPropertyFrame = {\n    spec: \"WOQLClient.getPropertyFrame(document_url, property, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {document_url: 'url', property: 'url'},\n  };\n  sigs.getSubClasses = {\n    spec: \"WOQLClient.getSubClasses(class, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url'},\n  };\n  return sigs[which];\n}//getFunctionSignature\n\n// returns dom element for header text\nfunction getHeaderDom(text){\n  var hd = document.createElement('div');\n  hd.setAttribute('class', 'terminus-module-head');\n  var h = document.createElement('h3');\n  h.innerHTML = text;\n  hd.appendChild(h);\n  return hd;\n} // getHeaderTextDom\n\nfunction getButton(text){\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn');\n  button.setAttribute('value', text);\n  button.appendChild(document.createTextNode(text));\n  return button;\n}\n\n// returns dom for alert banner\nfunction getInfoAlertDom(type, label, msg){\n  var ald = document.createElement('div');\n  if(type == 'info') ald.setAttribute('class', 'terminus-alert terminus-alert-success');\n  else ald.setAttribute('class', 'alert');\n  var str = document.createElement('STRONG');\n  str.innerHTML = label;\n  ald.appendChild(str);\n  var txt = document.createTextNode(msg);\n  ald.appendChild(txt);\n  return ald;\n} // getInfoAlertDom()\n\n// formats response results from platform\nfunction getResponse(currForm, action, response, terminator){\n\n  var rd = document.createElement('div');\n\n  // get header result\n  rd.appendChild(getHeaderDom('Result'));\n  var br = document.createElement('BR');\n  rd.appendChild(br);\n\n  var data = JSON.stringify(response, 0, 4);\n\n  var pre = document.createElement('pre');\n  pre.setAttribute('class', 'terminus-api-view terminus-scheme-pre');\n  pre.innerHTML = data;\n\n  var cm = stylizeCodeDisplay(terminator, pre, rd, 'javascript');\n  if(!cm) rd.appendChild(pre);\n\n  var br = document.createElement('BR');\n  rd.appendChild(br);\n\n  currForm.appendChild(rd);\n\n  return currForm;\n}\n\n// formats the response from fetch call and spits out Http header and result\nfunction showHttpResult(response, action, currForm, terminator){\n    //var currForm = document.createElement('div');\n\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n\n    // get header result\n    currForm.appendChild(getHeaderDom('HTTP Header'));\n\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n\n     var retHttpHeaders  = '';\n\n     // iterate over all headers\n     for (let [key, value] of response.headers) {\n       retHttpHeaders = retHttpHeaders +  `${key} = ${value}` + '\\n';\n     }\n\n    // http header result\n    var hdres = document.createElement('pre');\n    hdres.setAttribute('class', 'terminus-api-signature-pre');\n    var txt = document.createTextNode(retHttpHeaders);\n    hdres.appendChild(txt);\n\n    var cm = stylizeCodeDisplay(terminator, hdres, currForm, 'message/http');\n    if(!cm) currForm.appendChild(hdres);\n\n    return response.json()\n    .then(function(response){\n      getResponse(currForm, action, response, terminator); // get return response\n    })\n\n} // UTILS.showHttpResult()\n\n\nfunction deleteStylizedEditor(ui, qip){\n    if(ui.pluginAvailable(\"codemirror\")){\n\t\tvar cm = qip.nextElementSibling;\n\t\tcm.setAttribute('class', 'terminus-hide');\n\t\tHTMLHelper.removeChildren(cm);\n\t}\n}\n\n/* ui: terminus ui reference\n   txt: text area to be stylized\n   view: defines the size of editor to appear in pages (schema/ query)\n   mode: format to be displayed in\n*/\nfunction stylizeEditor(ui, txt, view, mode){\n  if(ui){\n      var cmConfig = ui.pluginAvailable(\"codemirror\");\n      if(!(cmConfig)) return;\n      var cm = new Codemirror(txt, mode, cmConfig);\n  }\n  else{\n      var cm = new Codemirror(txt, mode, {});\n  }\n\tvar ar = cm.colorizeTextArea(view);\n\tcm.updateTextArea(ar);\n}\n\n/* ui: terminus ui reference\n   txt: text area to be stylized\n   dom: stylized pre area is appended to dom\n   mode: format to be displayed in\n*/\nfunction stylizeCodeDisplay(ui, txt, dom, mode){\n    if(ui){\n        var cmConfig = ui.pluginAvailable(\"codemirror\");\n        if(!(cmConfig)) return false;\n        var cm = new Codemirror(txt, mode, cmConfig);\n    }\n    else var cm = new Codemirror(txt, mode, {});\n    var pr = cm.colorizePre();\n    if(dom) dom.appendChild(pr);\n    return true;\n}\n\n/* name: classname to find and remove classes from elements\n*/\nfunction removeSelectedNavClass(name){\n    var el = document.getElementsByClassName(name);\n    if (el.length < 1) return;\n    for(var i=0; i<(el.length + 1); i++){\n        el[i].classList.remove(name);\n    }\n}\n\nfunction setSelectedSubMenu(a){\n    removeSelectedNavClass(\"terminus-submenu-selected\");\n    a.classList.add(\"terminus-submenu-selected\");\n}\n\nfunction setSelected(el, className){\n    var par = el.parentElement;\n    for(var i=0; i<par.childNodes.length; i++){\n        if(par.childNodes[i].classList.contains(className))\n            par.childNodes[i].classList.remove(className);\n    }\n    el.classList.add(className);\n}\n\n// toggles between contents\nfunction tolggleContent(icon, content){\n    if (content.style.display === \"block\"){\n        removeSelectedNavClass(\"fa-chevron-up\");\n        icon.classList.add(\"fa-chevron-down\");\n        content.style.display = \"none\";\n    }\n    else{\n        removeSelectedNavClass(\"fa-chevron-down\");\n        icon.classList.add(\"fa-chevron-up\");\n        content.style.display = \"block\";\n    }\n}\n\n// controls current selected nav bar\nfunction activateSelectedNav(nav, terminator){\n    removeSelectedNavClass(\"terminus-selected\");\n\t//checkDocumentSubMenus(terminator);\n\tnav.classList.add(\"terminus-selected\");\n}\n\nfunction hideDocumentSubMenus(el){\n\tif(el.classList.contains('terminus-display')){\n\t\tel.classList.remove('terminus-display');\n\t\tel.classList.add('terminus-hide');\n\t}\n}\n\nfunction checkDocumentSubMenus(terminator){\n\tif(terminator.ui.showControl(\"get_document\")) {\n\t\tvar gd = document.getElementsByClassName('terminus-get-doc');\n\t\thideDocumentSubMenus(gd[0]);\n\t}\n\tif(terminator.ui.showControl(\"create_document\")) {\n\t\tvar cd = document.getElementsByClassName('terminus-create-doc');\n\t\thideDocumentSubMenus(cd[0]);\n\t}\n}\n\nfunction toggleVisibility(el){\n\tif(el.classList.contains('terminus-display')){\n\t\tel.classList.remove('terminus-display');\n\t\tel.classList.add('terminus-hide');\n\t}\n    else if(el.classList.contains('terminus-hide')){\n        el.classList.remove('terminus-hide');\n\t\tel.classList.add('terminus-display');\n\t}\n}\n\nfunction extractValueFromCell(cellValue){\n    var ihtml = new DOMParser().parseFromString(cellValue, \"text/xml\");\n    return ihtml.firstChild.innerHTML;\n}\n\nfunction displayDocumentSubMenus(ui) {\n\t//display submenus on click of documents\n\tif(ui.showControl(\"get_document\")) {\n\t\tvar gd = document.getElementsByClassName('terminus-get-doc');\n\t\tshowSubMenus(gd[0]);\n\t}\n\tif(ui.showControl(\"create_document\")) {\n\t\tvar cd = document.getElementsByClassName('terminus-create-doc');\n\t\tshowSubMenus(cd[0]);\n\t}\n}\n\nfunction checkForMandatoryId(){\n    var objId = document.getElementsByClassName('terminus-object-id-input');\n    if(objId.length>0){\n        if(!objId[0].value){\n            objId[0].setAttribute('placeholder', 'Required field');\n            objId[0].style.background = '#f8d7da';\n            return false;\n        }\n        else return true;\n    }\n}\n\nfunction showSubMenus (el){\n\tel.classList.remove('terminus-hide');\n\tel.classList.add('terminus-display');\n}\n\n// function which generates query based on current settings from different screens of dashboard\nfunction getCurrentWoqlQueryObject(query, settings){\n\tvar qval;\n    if(!query) query = settings.query;\n\tswitch(query){\n\t\tcase 'Show_All_Schema_Elements':\n\t\t\tqval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .elementMetadata();\n\t\tbreak;\n\t\tcase 'Show_All_Classes':\n\t\t\tqval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .classMetadata();\n\t\tbreak;\n\t\tcase 'Show_All_Data':\n\t\t\tqval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .getEverything();\n\t\tbreak;\n\t\tcase 'Show_All_Documents':\n\t\t\tqval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .getAllDocuments();\n\t\tbreak;\n        case 'Show_All_Document_classes':\n            qval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .documentMetadata();\n        break;\n        case 'Show_Document_Classes':\n            qval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start).and(\n                        TerminusClient.WOQL.quad(\"v:Element\", \"rdf:type\", \"owl:Class\", \"db:schema\"),\n                        TerminusClient.WOQL.abstract(\"v:Element\"),\n                        TerminusClient.WOQL.sub(\"v:Element\", \"tcs:Document\"),\n                        TerminusClient.WOQL.opt().quad(\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n                        TerminusClient.WOQL.opt().quad(\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"));\n        break;\n        case 'Show_All_Properties':\n            qval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .propertyMetadata();\n        break;\n\t\tdefault:\n\t\t\tconsole.log('Invalid query ' + query + ' passed in WOQLTextboxGenerator');\n\t\tbreak;\n\t}\n\treturn qval;\n}\n\n// removes spaces\nfunction trimValue(text){\n    (text).replace(/[\\s\\t\\r\\n\\f]/g,'');\n    return text;\n}\n\n// query string\nfunction getqObjFromInput(q){\n    const WOQL = TerminusClient.WOQL ;\n    //var query = 'WOQL.' + q;\n    var query = q;\n    try {\n        var qObj = eval(query);\n        this.qObj = qObj;\n        return qObj;\n    }\n    catch(e){\n        console.log('Error in getting woql object ',e.toString());\n    }\n}\n\nmodule.exports={tolggleContent,\n               removeSelectedNavClass,\n               stylizeCodeDisplay,\n               stylizeEditor,\n               deleteStylizedEditor,\n               showHttpResult,\n               getHeaderDom,\n               getInfoAlertDom,\n               getFunctionSignature,\n               toggleVisibility,\n               extractValueFromCell,\n               displayDocumentSubMenus,\n               setSelectedSubMenu,\n               checkForMandatoryId,\n               activateSelectedNav,\n               getCurrentWoqlQueryObject,\n               getButton,\n               trimValue,\n               setSelected,\n               getqObjFromInput}\n","/**\n * Helper functions for dealing with frames and linked data documents\n */\nconst FrameHelper = {\n\tstandard_urls: {\n\t\trdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n\t\trdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n\t\txsd: 'http://www.w3.org/2001/XMLSchema#',\n\t\towl: 'http://www.w3.org/2002/07/owl#',\n\t\ttcs: 'http://terminusdb.com/schema/tcs#',\n\t\ttbs: 'http://terminusdb.com/schema/tbs#',\n\t\txdd: 'http://terminusdb.com/schema/xdd#',\n\t\tv: 'http://terminusdb.com/woql/variable/',\n\t\tterminus: 'http://terminusdb.com/schema/terminus#',\n\t\tvio: 'http://terminusdb.com/schema/vio#',\n\t\tdocs: 'http://terminusdb.com/schema/documentation#'\n\t}\n};\n\nFrameHelper.addURLPrefix = function (prefix, url) {\n\tthis.standard_urls[prefix] = url;\n};\n\n\nFrameHelper.removeChildren = function (node) {\n\tif (node) {\n\t\twhile (node.hasChildNodes()) {\n\t\t\tnode.removeChild(node.childNodes[0]);\n\t\t}\n\t}\n};\n\nFrameHelper.removeElement = function (node) {\n\tif (node) {\n\t\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\nFrameHelper.empty = function (obj) {\n\t   // null and undefined are \"empty\"\n\tif (!obj) return true;\n\t// Assume if it has a length property with a non-zero value\n\t// that that property is correct.\n\tif (obj.length > 0) return false;\n\tif (obj.length === 0) return true;\n\t// Otherwise, does it have any properties of its own?\n\t// Note that this doesn't handle\n\t// toString and valueOf enumeration bugs in IE < 9\n\t// for (const key in obj) {\n\tif (typeof obj === 'object') {\n\t\tfor (const key of Object.keys(obj)) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) return false;\n\t\t}\n\t}\n\treturn true;\n};\n\nFrameHelper.genBNID = function () {\n\tconst r = Math.random().toString(36).substring(7);\n\tconst d = new Date();\n\tconst bnid = `_:${r}${d.getTime()}`;\n\treturn bnid;\n};\n\nFrameHelper.getShorthand = function (link) {\n\tif (typeof link === 'object' && link.length) link = link[0];\n\tif (link && typeof link === 'string') {\n\t\tfor (const pref of Object.keys(this.standard_urls)) {\n\t\t\tconst full = this.standard_urls[pref];\n\t\t\tif (link.substring(0, full.length) === full) {\n\t\t\t\tconst sh = `${pref}:${link.substring(full.length)}`;\n\t\t\t\treturn sh;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nFrameHelper.compareIDs = function (ida, idb) {\n\tif (ida === idb) return true;\n\tif (this.unshorten(ida) === idb) return true;\n\tif (this.unshorten(ida) === this.unshorten(idb)) return true;\n\tconst sha = this.getShorthand(ida);\n\tconst shb = this.getShorthand(idb);\n\tif (sha && ((sha === idb) || (sha === shb))) return true;\n\tif (shb && shb === ida) return true;\n\treturn false;\n};\n\n\nFrameHelper.shorten = function (url, prefixes) {\n\tfor (const pref in prefixes) {\n\t\tif (prefixes[pref] == url.substring(0, prefixes[pref].length)) {\n\t\t\treturn (`${pref}:${url.substring(prefixes[pref].length)}`);\n\t\t}\n\t}\n\treturn url;\n};\n\nFrameHelper.unshorten = function (url) {\n\tif (this.validURL(url)) return url;\n\tif (!url) return url;\n\tconst bits = url.split(':');\n\tif (bits[1]) {\n\t\tif (this.standard_urls[bits[0]]) {\n\t\t\treturn this.standard_urls[bits[0]] + bits[1];\n\t\t}\n\t}\n\treturn url;\n};\n\n// Valid URLs are those that start with http:// or https://\nFrameHelper.validURL = function (str) {\n\tif (str && (str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://')) return true;\n\treturn false;\n};\n\n\nFrameHelper.labelFromURL = function (url) {\n\tlet nurl = this.urlFragment(url);\n\tnurl = (nurl || url);\n\tif (nurl.lastIndexOf('/') < nurl.length - 1) {\n\t\tnurl = nurl.substring(nurl.lastIndexOf('/') + 1);\n\t}\n\tnurl = nurl.replace('_', ' ');\n\treturn nurl.charAt(0).toUpperCase() + nurl.slice(1);\n};\n\nFrameHelper.urlFragment = function (url) {\n\turl = (typeof url !== 'string') ? window.location.href : url;\n\tlet bits = url.split('#');\n\tif (bits.length <= 1) {\n\t\tif (!this.validURL(url)) {\n\t\t\tbits = url.split(':');\n\t\t}\n\t}\n\tif (bits.length >= 1) {\n\t\tconst [, urlStr] = bits;\n\n\t\tif (urlStr) {\n\t\t\tconst [baseUrl] = urlStr.split('?');\n\t\t\turl = baseUrl;\n\t\t}\n\t}\n\treturn url;\n};\n\nFrameHelper.isStringType = function (stype) {\n\tif (stype === 'http://www.w3.org/2001/XMLSchema#string') return true;\n\tif (stype === 'xsd:string') return true;\n\treturn false;\n};\n\nFrameHelper.lastURLBit = function (url) {\n\turl = (typeof url === 'undefined') ? window.location.href : url;\n\tconst [urlFirst] = url.split('#');\n\tconst [urlTmp] = urlFirst.split('?');\n\turl = urlTmp.substring(url.lastIndexOf('/') + 1);\n\treturn url;\n};\n\n\nFrameHelper.getStdURL = function (pref, ext, url) {\n\tif (this.standard_urls[pref]) {\n\t\tif (url) {\n\t\t\tif (url === this.standard_urls[pref] + ext) return url;\n\t\t} else {\n\t\t\treturn this.standard_urls[pref] + ext;\n\t\t}\n\t}\n\treturn false;\n};\n\nFrameHelper.viewIncludesProperties = function (view) {\n\tif (view === 'full' || view === 'production' || view === 'terse') {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nFrameHelper.viewIncludesChildren = function (view, type) {\n\treturn this.viewIncludesProperties(view, type);\n};\n\nFrameHelper.viewIncludesValue = function (view, type) {\n\treturn this.viewIncludesProperties(view, type);\n};\n\nFrameHelper.numberWithCommas = function (value) {\n\tif (value >= 1000 || value <= -1000) {\n\t    const parts = value.toString().split('.');\n\t    if (value <= -1000) parts[0] = parts[0].substring(1);\n\t    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n\t    if (value <= -1000) value = `-${parts.join('.')}`;\n\t    else value = parts.join('.');\n\t}\n\treturn value;\n};\n\nFrameHelper.datatypes = [\n\t'xdd:coordinate', 'xdd:coordinatePolyline',\n\t'xdd:coordinatePolygon', 'xdd:dateRange', 'xdd:gYearRange', 'xdd:integerRange',\n\t'xdd:decimalRange', 'xdd:cc', 'xdd:email', 'xdd:html', 'xdd:url', 'xsd:anySimpleType',\n\t'xsd:string', 'xsd:boolean', 'xsd:decimal', 'xsd:double', 'xsd:float', 'xsd:time', 'xsd:date',\n\t'xsd:dateTime', 'xsd:dateTimeStamp', 'xsd:gYear', 'xsd:gMonth', 'xsd:gDay', 'xsd:gYearMonth',\n\t'xsd:gMonthDay', 'xsd:duration', 'xsd:yearMonthDuration', 'xsd:dayTimeDuration',\n\t'xsd:byte', 'xsd:short', 'xsd:integer', 'xsd:long', 'xsd:unsignedByte',\t'xsd:unsignedInt',\n\t'xsd:unsignedLong',\t'xsd:nonNegativeInteger', 'xsd:positiveInteger', 'xsd:negativeInteger',\n\t'xsd:nonPositiveInteger', 'xsd:base64Binary', 'xsd:anyURI', 'xsd:language', 'xsd:normalizedString',\n\t'xsd:token', 'xsd:NMTOKEN',\t'xsd:Name',\t'xsd:NCName', 'xsd:NOTATION', 'xsd:QName', 'xsd:ID',\n\t'xsd:IDREF', 'xsd:ENTITY', 'rdf:XMLLiteral', 'rdf:PlainLiteral', 'rdfs:Literal', 'xdd:json'\n];\n\nFrameHelper.parseDate = function (ty, value) {\n\tlet parsed;\n\tif (ty === 'xsd:date') {\n\t\tparsed = this.parseXsdDate(value);\n\t} else if (ty === 'xsd:time') {\n\t\tparsed = this.parseXsdTime(value);\n\t} else if (ty === 'xsd:dateTime') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t} else if (ty === 'xsd:gYear') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gYearRange') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gMonth') {\n\t\tparsed = { month: value.substring(2) };\n\t} else if (ty === 'xsd:gDay') {\n\t\tparsed = { day: value };\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { year: bits[0], month: bits[1] };\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { month: bits[0], day: bits[1] };\n\t} else if (ty === 'xsd:dateTimeStamp') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t}\n\treturn parsed;\n};\n\nFrameHelper.parseXsdDate = function (val) {\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tlet year;\n\tif (val.substring(0, 1) === '-') {\n\t\tyear = val.substring(0, 5);\n\t} else {\n\t\tyear = val.substring(0, 4);\n\t}\n\tlet parsed;\n\tif (year && Math.abs(year) < 10000) {\n\t\tlet month = val.substring(year.length + 1, year.length + 3);\n\t\tif (month) { month = parseInt(month, 10); } else return false;\n\t\tlet day = val.substring(year.length + 4);\n\t\tif (day) day = parseInt(day, 10);\n\t\telse return false;\n\t\tparsed = {\n\t\t\tyear,\n\t\t\t   month,\n\t\t\t   day,\n\t\t\t   timezone: tz\n\t\t};\n\t}\n\treturn parsed;\n};\n\nFrameHelper.addXsdPadding = function (parsed) {\n\tconst nparsed = {};\n\tif (typeof parsed.year !== 'undefined' && parsed.year !== false && parsed.year < 1000) {\n\t\tif (Math.abs(parsed.year) < 10) nparsed.year = (parsed.year < 0 ? `-000${Math.abs(parsed.year)}` : `000${parsed.year}`);\n\t\telse if (Math.abs(parsed.year) < 100) nparsed.year = (parsed.year < 0 ? `-00${Math.abs(parsed.year)}` : `00${parsed.year}`);\n\t\telse nparsed.year = (parsed.year < 0 ? `-0${Math.abs(parsed.year)}` : `0${parsed.year}`);\n\t} else if (parsed.year) {\n\t\tnparsed.year = parsed.year;\n\t}\n\tif (typeof parsed.month !== 'undefined' && parsed.month !== false && parsed.month < 10) {\n\t\tnparsed.month = `0${parsed.month}`;\n\t} else if (parsed.month) {\n\t\tnparsed.month = parsed.month;\n\t}\n\tif (typeof parsed.day !== 'undefined' && parsed.day !== false && parsed.day < 10) {\n\t\tnparsed.day = `0${parsed.day}`;\n\t} else if (parsed.day) {\n\t\tnparsed.day = parsed.day;\n\t}\n\tif (typeof parsed.hour !== 'undefined' && parsed.hour !== false && parsed.hour < 10) {\n\t\tnparsed.hour = `0${parsed.hour}`;\n\t} else if (parsed.hour) {\n\t\tnparsed.hour = parsed.hour;\n\t}\n\tif (typeof parsed.minute !== 'undefined' && parsed.minute !== false && parsed.minute < 10) {\n\t\tnparsed.minute = `0${parsed.minute}`;\n\t} else if (parsed.minute) {\n\t\tnparsed.minute = parsed.minute;\n\t}\n\tif (typeof parsed.second !== 'undefined' && parsed.second !== false && parsed.second < 10) {\n\t\tnparsed.second = `0${parsed.second}`;\n\t} else if (parsed.second) {\n\t\tnparsed.second = parsed.second;\n\t}\n\treturn nparsed;\n};\n\n\nFrameHelper.xsdFromParsed = function (parsed, ty) {\n\tconst xparsed = this.addXsdPadding(parsed);\n\tlet ret;\n\tif (ty === 'xsd:gYear') {\n\t\tret = (xparsed.year ? xparsed.year : false);\n\t} else if (ty === 'xsd:time') {\n\t\treturn (xparsed.hour && xparsed.minute && xparsed.second) ? `${xparsed.hour}:${xparsed.minute}:${xparsed.second}` : false;\n\t} else if (ty === 'xsd:date') {\n\t\treturn (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}` : false;\n\t} else if (ty === 'xsd:dateTime' || ty === 'xsd:dateTimeStamp') {\n\t\tret = (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}T` : false;\n\t\tif (ret) ret += `${xparsed.hour ? xparsed.hour : '12'}:${xparsed.minute ? xparsed.minute : '00'}:${xparsed.second ? xparsed.second : '00'}`;\n\t} else if (ty === 'xsd:gMonth') {\n\t\tret = (xparsed.month ? `--${xparsed.month}` : false);\n\t} else if (ty === 'xsd:gDay') {\n\t\tret = (xparsed.day ? `---${xparsed.day}` : false);\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tret = (xparsed.year && xparsed.month) ? `${xparsed.year}-${xparsed.month}` : false;\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tret = (xparsed.day && xparsed.month) ? `--${xparsed.month}-${xparsed.day}` : false;\n\t}\n\tif (xparsed.timezone) {\n\t\tret += xparsed.timezone;\n\t}\n\treturn ret;\n};\n\n\nFrameHelper.parseXsdTime = function (val) {\n\tif (!val) return {};\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst parsed = {\n\t\thour: val.substring(0, 2),\n\t\tminute: val.substring(3, 5),\n\t\tsecond: val.substring(6),\n\t\ttimezone: tz\n\t};\n\treturn parsed;\n};\n\nFrameHelper.convertTimestampToXsd = function (val) {\n\t  const a = new Date(val * 1000);\n\t  const parsed = {\n\t\tyear: a.getFullYear(),\n\t\tmonth: a.getMonth() + 1,\n\t\tday: a.getDate(),\n\t\thour: a.getHours(),\n\t\tminute: a.getMinutes(),\n\t\tsecond: a.getSeconds()\n\t  };\n\t  return parsed;\n};\n\nFrameHelper.parseXsdDateTime = function (val) {\n\tif (!val) return {};\n\tif (typeof val === 'number') {\n\t\treturn this.convertTimestampToXsd(val);\n\t}\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst datetime = this.parseXsdDate(val);\n\tconst ptime = this.parseXsdTime(val.substring(val.indexOf('T') + 1));\n\n\tfor (const i of Object.keys(ptime)) {\n\t\tdatetime[i] = ptime[i];\n\t}\n\tdatetime.timezone = tz;\n\treturn datetime;\n};\n\nFrameHelper.extractXsdTimezone = function (val) {\n\tif (val && val.charAt(val.length - 1) === 'Z') {\n\t\treturn 'Z';\n\t}\n\tif (val && (val.charAt(val.length - 6) === '+' || val.charAt(val.length - 6) === '-')) {\n\t\tval.substring(val.length - 6);\n\t}\n\treturn false;\n};\n\nFrameHelper.parseRangeValue = function (val, dividor) {\n\tdividor = (dividor || ',');\n\tlet vals = [];\n\tif (typeof val === 'object' && val.length) {\n\t\tvals = val;\n\t} else if (val) {\n\t\tif (typeof val !== 'string') {\n\t\t\tval = `${val}`;\n\t\t}\n\t\tif (val.length && (val.charAt(0) === '[') && val.charAt(val.length - 1) === ']') {\n\t\t\tvals.push(val.substring(1, val.indexOf(dividor)));\n\t\t\tvals.push(val.substring(val.indexOf(dividor) + 1, val.length - 1));\n\t\t} else {\n\t\t\tvals.push(val);\n\t\t}\n\t}\n\treturn vals;\n};\n\nFrameHelper.loadDynamicScript = function (scriptid, src, callback) {\n\tconst existingScript = document.getElementById(scriptid);\n\tif (!existingScript) {\n\t\tconst script = document.createElement('script');\n\t\tscript.src = src; // URL for the third-party library being loaded.\n\t\tdocument.body.appendChild(script);\n\t\tscript.onload = function () {\n\t\t\tscript.id = scriptid; // do it here so it doesn't trigger the callback below on multiple calls\n\t\t\tif (callback) callback(scriptid);\n\t\t};\n\t}\n\tif (existingScript && callback) {\n\t\tcallback(scriptid);\n\t}\n};\n\nFrameHelper.loadDynamicCSS = function (cssid, src, callback) {\n\tconst existingScript = document.getElementById(cssid);\n\tif (!existingScript) {\n\t\tconst link = document.createElement('link');\n\t\tlink.href = src; // URL for the third-party library being loaded.\n\t\tlink.id = cssid; // e.g., googleMaps or stripe\n\t\tlink.rel = 'stylesheet';\n\t\tdocument.body.appendChild(link);\n\t\tlink.onload = function () {\n\t\t\tif (callback) callback(cssid);\n\t\t};\n\t}\n\tif (existingScript && callback) callback(cssid);\n};\n\nmodule.exports = FrameHelper;\n","function getErrorAsMessage(url, api, err) {\n\t// console.log('getErrorAsMessage');\n\tlet str = '';\n\tif (err.response) {\n\t\terr = err.response;\n\t\tif (err.data) str += `${formatErrorMessage(err.data)}`;\n\t} else if (err.body) str += `${formatErrorMessage(err.data)}`;\n\n\tif (err.status) str += `Code: ${err.status}`;\n\tif (err.action) str += `, Action: ${err.action}`;\n\tif (err.type) str += `, Type: ${err.type}`;\n\tif (url) str += `, url: ${url}`;\n\tif (api && api.method) str += `, method: ${api.method}`;\n\treturn str;\n}\n\nfunction formatErrorMessage(msg) {\n\tif (typeof msg === 'object') {\n\t\tlet nmsg = '';\n\t\tfor (const key of Object.keys(msg)) {\n\t\t\tnmsg += `${key} ${msg[key]} `;\n\t\t}\n\t\treturn nmsg;\n\t}\n\treturn msg;\n}\n\nfunction accessDenied(action, db, server) {\n\tconst err = {};\n\terr.status = 403;\n\terr.url = (server || '') + (db || '');\n\terr.type = 'client';\n\terr.action = action;\n\terr.body = `${err.action} not permitted for ${err.url}`;\n\treturn err;\n}\n\nfunction getAPIErrorMessage(url, api, err) {\n\treturn `API Error ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getAccessDeniedMessage(url, api, err) {\n\treturn `Access Denied ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getInvalidURIMessage(url, call) {\n\tconst str = `Invalid argument to\n            ${call}. \n            ${url}\n            is not a valid Terminus DB API endpoint`;\n\treturn str;\n}\n\n/**\n * Utility functions for generating and retrieving error messages\n * and storing error state\n */\n\nfunction parseAPIError(response) {\n\tconst err = {};\n\terr.status = response.status;\n\terr.type = response.type;\n\tif (response.data && typeof response.data === 'object') {\n\t\tlet msg;\n\t\ttry {\n\t\t\tmsg = response.text();\n\t\t} catch (e) {\n\t\t\ttry {\n\t\t\t\tmsg = response.json();\n\t\t\t} catch (error) {\n\t\t\t\tmsg = response.toString();\n\t\t\t}\n\t\t}\n\t\terr.body = msg;\n\t} else if (response.data) err.body = response.data;\n\terr.url = response.url;\n\terr.headers = response.headers;\n\terr.redirected = response.redirected;\n\treturn err;\n}\n\n\nmodule.exports = {\n\tgetErrorAsMessage,\n\tgetAPIErrorMessage,\n\tgetAccessDeniedMessage,\n\taccessDenied,\n\tgetInvalidURIMessage,\n\tparseAPIError\n};\n","const QueryPane = require(\"./QueryPane\");\nconst DocumentPane = require(\"./DocumentPane\");\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction TerminusViewer(client){\n    this.client = client;\n}\n\nTerminusViewer.prototype.TerminusClient = function(){\n    return TerminusClient;\n}\n\nTerminusViewer.prototype.getDocumentPane = function(docid, docConfig, docPaneConfig){\n    var dp = new DocumentPane(this.client, docid);\n    dp.view = docConfig;\n    if(docPaneConfig) dp.options(docPaneConfig);\n    else dp.options(dp.defaultPaneView);\n    return dp;   \n}\n\nTerminusViewer.prototype.getDocument = function(docid, docConfig, docJSON){\n    return this.getDocumentPane(docid, docConfig);\n}\n\nTerminusViewer.prototype.getNewDocumentPane = function(cls, docConfig, docPaneConfig){\n    var dp = new DocumentPane(this.client, false, cls);\n    dp.view = docConfig;\n    if(docPaneConfig) dp.options(docPaneConfig);\n    else dp.options(dp.defaultPaneView);\n    return dp;   \n}\n\n\nTerminusViewer.prototype.getQueryPane = function(query, resultConfigs, results, resultPaneConfigs, queryPaneConfig){\n    var qp = new QueryPane(this.client, query, results);\n    if(queryPaneConfig) qp.options(queryPaneConfig);\n    else qp.options(qp.defaultQueryView);\n    if(resultConfigs && resultConfigs.length){\n        for(var i = 0 ; i < resultConfigs.length; i++){\n            var rpc = (resultPaneConfigs && resultPaneConfigs[i] ? resultPaneConfigs[i] : qp.defaultResultView);\n            qp.addView(resultConfigs[i], rpc);\n        }\n    }\n    return qp;\n}\n\nTerminusViewer.prototype.getResult = function(query, resultConfig, results){\n    return this.getQueryPane(query, [resultConfig], results);\n}\n\nmodule.exports = TerminusViewer;","const TerminusClient = require('@terminusdb/terminus-client');\nconst UTILS = require('../../Utils');\nconst HTMLHelper = require(\"../HTMLHelper\")\n/*\nqObj: WOQL object\nwidth: width of snippet in px\nheight: height of snippet in px\n*/\nfunction TerminusCodeSnippet(language, mode, format, width, height, placeholder){\n\tthis.language = (language ? language : \"woql\");//woql / rule\n\tthis.mode = (mode ? mode : \"view\");\n    this.width = (width ? width : 1200);\n\tthis.height = (height ? height : 300);\n\tthis.placeholder = (placeholder ? placeholder : \"\");\n    this.format = (format ? format : \"js\");\n    this.formats = {'js': \"WOQL.js\", 'jsonld': \"JSON-LD\"};\n    if(this.mode == 'view')\n        this.snippet = document.createElement('pre');\n    else {\n    \tthis.snippet = document.createElement('textarea');\n    \tthis.snippet.setAttribute(\"spellcheck\", \"false\");\n\t\tthis.snippet.setAttribute(\"class\", \"terminus-code-snippet\");\n    }\n}\n\nTerminusCodeSnippet.prototype.setQuery = function(q){\n\tthis.qObj = q;\n\tthis.refreshContents();\n}\n\nTerminusCodeSnippet.prototype.serialise = function(query, format){\n\tif(format == \"js\"){\n\t\treturn query.prettyPrint(4);\n\t}\n\telse {\n\t\treturn JSON.stringify(query.json(), undefined, 2);\n\t}\n}\n\n//parses a string encoding a woql in either json or js notation\nTerminusCodeSnippet.prototype.parseText = function(text, format){\n\ttry {\n\t\tvar WOQL = TerminusClient.WOQL;\n\t\tvar View = TerminusClient.View;\n\t\tif(format == \"js\"){\n\t\t\tvar nw = eval(text);\n\t\t\tif(this.language == \"rule\"){\n\t\t\t\tthis.view = view;\n\t\t\t\treturn view;\n\t\t\t}\n\t\t\treturn nw;\n\t\t}\n\t\telse {\n\t\t\tvar qval = JSON.parse(text);\n\t\t\tif(this.language == \"woql\"){\n\t\t\t\treturn WOQL.json(qval);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn View.loadConfig(qval);\n\t\t\t}\n\t\t}\n\t}\n\tcatch(e){\n\t\tthis.error = \"Failed to parse Query \" + e.toString() + \" \" + text;\n\t\treturn this.error;\n\t\t//return false;\n\t}\n}\n\nTerminusCodeSnippet.prototype.getInputElement = function(){\n\treturn this.snippet;\n}\n\nTerminusCodeSnippet.prototype.readInput = function(){\n\tif(this.mode == \"edit\") {\n\t\tthis.qObj = this.parseText(this.snippet.value, this.format);\n\t\treturn this.qObj;\n\t}\n\treturn this.qObj;\n}\n\nTerminusCodeSnippet.prototype.get = function(){\n\treturn this.readInput();\n}\n\nTerminusCodeSnippet.prototype.getAsDOM = function(with_buttons){\n    var scont = document.createElement('div');\n\tscont.setAttribute('class', 'terminus-snippet-container')\n    // query\n    var snpc = document.createElement('div');\n    if(this.placeholder){\n\t\tthis.snippet.setAttribute(\"placeholder\", this.placeholder);\n\t}\n    snpc.appendChild(this.getFormatButtons());\n    if(this.qObj){\n    \tvar serial = this.serialise(this.qObj, this.format);\n\t\tif(this.mode == \"edit\"){\n    \t\tthis.snippet.value = serial;\n    \t}\n    \telse {\n    \t\tthis.snippet.appendChild(document.createTextNode(serial));\n    \t}\n\t}\n\telse {\n\t\tthis.snippet.value = \"\";\n\t}\n    snpc.appendChild(this.snippet);\n    if(this.mode == \"edit\"){\n\t\tvar ssb = document.createElement(\"span\");\n\t\tssb.setAttribute(\"class\", \"terminus-query-submit-buttons\");\n\t\tvar actbtn = this.getSubmitButton();\n\t\tssb.appendChild(actbtn);\n    \tsnpc.appendChild(ssb);\n    }\n    scont.appendChild(snpc);\n    return scont;\n}\n\nTerminusCodeSnippet.prototype.changeRuleView = function(nview){\n\tthis.snippet.value = \"view = WOQL.\"+ nview + \"()\";\n\tthis.readInput();\n\tthis.submit(this.qObj);\n}\n\n\nTerminusCodeSnippet.prototype.getIconsDOM = function(){\n    var bsp = document.createElement('span');\n    bsp.setAttribute('class', 'terminus-snippet-icons');\n    for(var i = 0; i<this.view_types.length; i++){\n\t\tvar isp = document.createElement('span');\n\t\tvar icon = document.createElement(\"i\");\n\t\ticon.title = this.view_types[i].label;\n\t\ticon.setAttribute(\"class\", this.view_types[i].icon);\n\t\tisp.appendChild(icon);\n\t\tisp.name = this.view_types[i].id;\n\t\tvar self = this;\n\t\tisp.addEventListener('click', function(){\n\t\t\tif(!(self.view && self.view.type == this.name)){\n\t\t\t\tself.changeRuleView(this.name);\n\t\t\t}\n\t\t});\n\t\tisp.addEventListener('mouseover', function(){\n\t\t\tif(!(self.view && self.view.type == this.name)){\n\t\t\t\tthis.style.cursor = \"pointer\";\n\t\t\t}\n\t\t});\n\t\tbsp.appendChild(isp);\n    }\n    return bsp;\n}\n\nTerminusCodeSnippet.prototype.getFormatButtons = function(){\n    var bsp = document.createElement('span');\n    bsp.setAttribute('class', 'terminus-snippet-panel');\n    //if(this.width) bsp.setAttribute(\"style\", \"width: \"+ this.width +\"px;\");\n    for(f in this.formats){\n        var btn = document.createElement('button');\n        btn.setAttribute('value', f);\n        btn.setAttribute('class', 'terminus-snippet-button');\n\t\tif(f == 'js') btn.classList.add('terminus-snippet-format-selected');\n        btn.appendChild(document.createTextNode(this.formats[f]));\n        var self = this;\n        btn.addEventListener('click', function(){\n\t\t\tUTILS.setSelected(this, 'terminus-snippet-format-selected');\n\t\t\tvar qobj = self.parseText(self.snippet.value, self.format);\n\t\t\tself.format = this.value;\n\t\t\tif(qobj) self.qObj = qobj;\n\t\t\tself.refreshContents();\n        })\n        bsp.appendChild(btn);\n    }\n    return bsp;\n}\n\nTerminusCodeSnippet.prototype.getSubmitButton = function(){\n    var actbtn = document.createElement('button');\n    actbtn.setAttribute('class', 'terminus-btn');\n\tactbtn.setAttribute('type', 'submit');\n\tvar txt = \"Submit\";\n\tif(this.language == \"WOQL\"){\n\t\ttxt = \"Submit Query\";\n\t}\n\telse if(this.language == \"rule\") {\n\t\ttxt = \"Update View\";\n\t}\n\telse if(this.language == \"code\"){\n\t\ttxt = \"Run Script\";\n\t}\n    actbtn.appendChild(document.createTextNode(txt));\n    actbtn.addEventListener('click', () => {\n\t\tthis.readInput();\n\t\tthis.submit(this.qObj);\n    });\n    return actbtn;\n}\n\nTerminusCodeSnippet.prototype.submit = function(){\n\talert(\"Submitted \" + JSON.stringify(this.qObj));\n}\n\nTerminusCodeSnippet.prototype.removeCodeMirror = function(){\n\tvar cm = this.snippet.nextSibling;\n\tif(!cm) return;\n\tif(cm.classList.contains('CodeMirror')) // remove code mirror\n\tHTMLHelper.removeElement(cm);\n}\n\nTerminusCodeSnippet.prototype.stylizeSnippet = function(){\n\tvar dimensions = \"query\";\n\t//dimensions.width = \"1000\";//this.width;\n\t//dimensions.height = \"1000\";//this.height;\n\n\tthis.removeCodeMirror();\n\tif(this.mode == 'view')\n\t\tUTILS.stylizeCodeDisplay(null, this.snippet, null, 'javascript');\n\telse UTILS.stylizeEditor(null, this.snippet, dimensions, 'javascript'); // default view is js\n}\n\nTerminusCodeSnippet.prototype.refreshContents = function(qObj){\n\tqObj = qObj ? qObj : this.qObj;\n\tHTMLHelper.removeChildren(this.snippet);\n\tif(this.mode == \"edit\") this.snippet.value == \"\";\n\tif(!qObj) return;\n\tvar serial = this.serialise(this.qObj, this.format);\n\tif(this.mode == \"edit\"){\n\t\tthis.snippet.value = serial;\n\t\tif(this.snippet.nextSibling){\n\t\t\tthis.removeCodeMirror();\n\t\t\tif(this.format == 'js') var mode = 'javascript';\n\t\t\telse var mode = 'application/ld+json';\n\t\t\tUTILS.stylizeEditor(null,\n\t\t\t\t\t\t\t\tthis.snippet,\n\t\t\t\t\t\t\t\t{width: this.width, height: this.height},\n\t\t\t\t\t\t\t\tmode);\n\t\t}\n\t}\n\telse {\n\t\tthis.snippet.appendChild(document.createTextNode(serial));\n\t\tUTILS.stylizeCodeDisplay(null, this.snippet, null, mode);\n\t}\n}\n\nmodule.exports = TerminusCodeSnippet;\n","\nmodule.exports = Object.freeze({\n\tCONNECT: 'connect',\n\tGET_SCHEMA: 'get_schema',\n\tUPDATE_SCHEMA: 'update_schema',\n\tUPDATE_DOCUMENT: 'update_document',\n\tCLASS_FRAME: 'class_frame',\n\tWOQL_SELECT: 'woql_select',\n\tGET_DOCUMENT: 'get_document',\n\tDELETE_DATABASE: 'delete_database',\n\tDELETE_DOCUMENT: 'delete_document',\n\tCREATE_DATABASE: 'create_database',\n\tCREATE_DOCUMENT: 'create_document',\n\tWOQL_UPDATE: 'woql_update'\n});\n\n/*\n{\"extends\": \"strongloop\",\n  \"env\": {\n\t\t\"browser\": true,\n\t\t\"node\": true,\n\t\t\"es6\": true\n  },\n  \"rules\":{\"max-len\": [\"error\", { \"code\": 100 }]},\n \"parserOptions\": { \"ecmaVersion\": 6 }}\n*/\n","function authorityActionsToArr(action) {\n\tif (Array.isArray(action) === false) return [];\n\n\treturn action.map(item => item['@id']);\n}\n\nfunction URIEncodePayload(payload) {\n\tif (typeof payload === 'string') return encodeURIComponent(payload);\n\tconst payloadArr = [];\n\tfor (const key of Object.keys(payload)) {\n\t\tif (typeof payload[key] === 'object') {\n\t\t\tfor (const keyElement of Object.keys(payload[key])) {\n\t\t\t\t const valueElement = payload[key][keyElement];\n\t\t\t\t payloadArr.push(`${encodeURIComponent(keyElement)}=${encodeURIComponent(valueElement)}`);\n\t\t\t}\n\t\t} else {\n\t\t\tpayloadArr.push(`${encodeURIComponent(key)}=${encodeURIComponent(payload[key])}`);\n\t\t}\n\t}\n\treturn payloadArr.join('&');\n}\n\nmodule.exports = { authorityActionsToArr, URIEncodePayload };\n","const HTMLHelper = require('../html/HTMLHelper');\n\nfunction TerminusPluginManager(){\n\tthis.preloaded = [];\n\tthis.loaded = [];\n\tthis.loading = [];\n\tthis.precluded = [];\n\tthis.plugins = {};\n\tthis.css_base = \"\";//\"https://terminusdb.github.io/terminus-dashboard/dist/\";\n\tthis.plugins[\"font-awesome\"] = {\n\t\tlabel: \"Font Awesome\",\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0-11/css/all.css\"]\n\t};\n\tthis.plugins[\"quill\"] = {\n\t\tlabel: \"Quill\",\n\t\tjs: [\"https://cdn.quilljs.com/1.3.6/quill.min.js\"],\n\t\tcss: [\"https://cdn.quilljs.com/1.3.6/quill.snow.css\"],\n\t};\n\tthis.plugins[\"codemirror\"] = {\n\t\tlabel : \"Code Mirror\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/xml/xml.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/css/css.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/turtle/turtle.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/javascript/javascript.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/anyword-hint.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/runmode/runmode.js\",\n\t\t  \t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/http/http.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/closebrackets.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/matchbrackets.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/display/placeholder.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/foldgutter.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/foldcode.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/indent-fold.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/markdown-fold.js\"\n\n\n\n\t  ],\n\t\tcss: [\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/neo.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/erlang-dark.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/foldgutter.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/eclipse.css\"\n\t\t]\n\t};\n\tthis.plugins[\"jquery\"] = {\n\t\tlabel: \"jQuery\",\n\t\tjs: [\"https://code.jquery.com/jquery-2.2.4.min.js\"]\n\t};\n\tthis.plugins[\"jqueryui\"] = {\n\t\tlabel: \"jQuery UI\",\n\t\tcss: [\"https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css\"],\n\t\tjs: [\"https://code.jquery.com/ui/1.12.0/jquery-ui.js\"],\n\t\trequires: ['jquery']\n\t};\n\tthis.plugins[\"datatables\"] = {\n\t\tlabel: \"Data Tables\",\n\t\tjs: [\"https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js\",\n\t\t\t \"https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.16/b-1.5.1/b-html5-1.5.1/datatables.min.js\"],\n\t\tcss: [\"https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css\"],\n\t\trequires: ['jquery']\n\t};\n\t/*this.plugins[\"prettify\"] = {\n\t\tlabel: \"Prettify\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.css\"],\n\t\trequires: ['jquery']\n\t};*/\n\tthis.plugins[\"gmaps\"] = {\n\t\tlabel: \"Google Maps\",\n\t\tjs: [\"https://maps.googleapis.com/maps/api/js\"],\n\t\t//plugin: \"gmaps.terminus.js\"\n\t};\n\tthis.plugins[\"d3\"] = {\n\t\tlabel: \"d3\",\n\t\tjs: [\"https://code.jquery.com/jquery-2.2.4.min.js\"],\n\t\trequires: ['jquery']\n\t};\n\tthis.plugins[\"select2\"] = {\n\t\tlabel: \"Select 2\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css\"],\n\t\trequires: ['jquery']\n\t};\n\t/*this.plugins[\"jsoneditor\"] = {\n\t\tlabel: \"JSON Editor\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/7.0.4/jsoneditor.min.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/7.0.4/jsoneditor.min.css\"],\n\t\t//plugin: \"jsoneditor.terminus.js\"\n\t};\n\tthis.plugins[\"bootstrap\"] = {\n\t\tlabel: \"Bootstrap\",\n\t\tjs: [\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap.min.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css\"]\n\t};\n\tthis.plugins[\"flot\"] = {\n\t\tlabel: \"Flot\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.min.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.resize.min.js\"],\n\t\trequires: [\"jquery\"]\n\t};*/\n}\n\nTerminusPluginManager.prototype.setPluginOptions = function(opts){\n\tfor(var p in opts){\n\t\tif(!this.plugins[p]) continue;\n\t\tfor(var k in opts[p]){\n\t\t\tthis.plugins[p][k] = opts[p][k];\n\t\t}\n\t}\n}\n\nTerminusPluginManager.prototype.init = function(opts, then){\n\tif(opts) this.setPluginOptions(opts);\n\tthis.calculatePreloaded();\n\tvar toload = this.calculateRequiredInitPlugins(opts);\n\tif(toload && toload[0].length) {\n\t\tif(toload[1].length){\n\t\t\tvar self = this;\n\t\t\tvar nthen = function(){\n\t\t\t\tself.loadPlugins(toload[1], then);\n\t\t\t}\n\t\t\tthis.loadPlugins(toload[0], nthen);\n\t\t}\n\t\telse {\n\t\t\tthis.loadPlugins(toload[0], then);\n\t\t}\n\t}\n\telse if(then){\n\t\tthen();\n\t}\n}\n\nTerminusPluginManager.prototype.calculateRequiredInitPlugins = function(opts){\n\tif(opts){\n\t\tvar pins = [];\n\t\tfor(var pid in opts){\n\t\t\tif(opts[pid] && pins.indexOf(pid) == -1){\n\t\t\t\tif(typeof opts[pid] != \"object\" && opts[pid]){\n\t\t\t\t\tpins.push(pid);\n\t\t\t\t}\n\t\t\t\telse if(typeof opts[pid] == \"object\"){\n\t\t\t\t\tif(!(typeof opts[pid].loaded != \"undefined\" && !opts[pid].loaded)){\n\t\t\t\t\t\tpins.push(pid);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tvar pins = this.getDefaultPlugins();\n\t}\n\tvar needed_pins = [];\n\tfor(var i = 0; i<pins.length; i++){\n\t\tif(this.loaded.indexOf(pins[i]) == -1 && this.preloaded.indexOf(pins[i]) == -1 ){\n\t\t\tneeded_pins.push(pins[i])\n\t\t}\n\t}\n\tvar loading_order = [[], []];\n\tfor(var i = 0; i<needed_pins.length; i++){\n\t\tif(this.plugins[needed_pins[i]]){\n\t\t\tif(this.plugins[needed_pins[i]].requires && this.plugins[needed_pins[i]].requires.length){\n\t\t\t\tloading_order[1].push(needed_pins[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tloading_order[0].push(needed_pins[i]);\n\t\t\t}\n\t\t}\n\t}\n\treturn loading_order;\n}\n\nTerminusPluginManager.prototype.getAvailablePlugins = function(){\n\treturn this.plugins;\n}\n\nTerminusPluginManager.prototype.calculatePreloaded = function(){\n\tfor(var pl in this.plugins){\n\t\tif(this.pluginAvailable(pl)){\n\t\t\tthis.preloaded.push(pl);\n\t\t}\n\t}\n}\n\nTerminusPluginManager.prototype.pluginAvailable = function(plugin, version_check){\n\tif(typeof this.plugins[plugin] == \"object\"){\n\t\tvar pluginmeta = this.plugins[plugin];\n\t\tif(pluginmeta.requires && pluginmeta.requires.length){\n\t\t\tfor(var i =0 ; i < pluginmeta.requires.length; i++){\n\t\t\t\tif(!this.pluginAvailable(pluginmeta.requires[i], version_check)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar required_version = (pluginmeta.version ? pluginmeta.version : false);\n\t\tswitch(plugin){\n\t\t\tcase \"jquery\": {\n\t\t\t\tif(typeof jQuery == \"undefined\") return false;\n\t\t\t\tif(version_check && required_version){}\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"jqueryui\": {\n\t\t\t\ttry{\n\t\t\t\t\tif(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.slider )) return true;\n\t\t\t\t}\n\t\t\t\tcatch(e){}\n\t\t\t\treturn false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"quill\": {\n\t\t\t\tif(typeof Quill == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"jsoneditor\": {\n\t\t\t\tif(typeof JSONEditor == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"codemirror\": {\n\t\t\t\tif(typeof CodeMirror == \"undefined\") return false;\n\t\t\t\treturn this.plugins[plugin];  // sent plugin config with darkmode true/ false\n\t\t\t}\n\t\t\tcase \"font-awesome\": {\n\t\t\t\t//if(typeof CodeMirror != \"undefined\") return true;\n\t\t\t\treturn this.fontAwesomeCheck();\n\t\t\t}\n\t\t\tcase \"datatables\": {\n\t\t\t\t if(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.dataTable)) return true;\n\t\t\t\t return false;\n\t\t\t}\n\t\t\tcase \"select2\": {\n\t\t\t\t if(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.select2 )) return true;\n\t\t\t\t return false;\n\t\t\t}\n\t\t\tcase \"gmaps\": {\n\t\t\t\tif(typeof google == \"undefined\" || typeof google.maps == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase \"openlayers\": {\n\t\t\t\tif(typeof ol == \"undefined\" || typeof ol.Map == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase \"d3\": {\n\t\t\t\tif(typeof d3 == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(new Error(plugin + \" is not a supported plugin ID\"));\n\t}\n\treturn false;\n};\n\nTerminusPluginManager.prototype.fontAwesomeCheck = function(){\n\tvar span = document.createElement('span');\n\tspan.className = 'fa';\n\tspan.style.display = 'none';\n\tif(document.body){\n\t\tdocument.body.insertBefore(span, document.body.firstChild);\n\t\tfunction css(element, property) {\n\t\t  return window.getComputedStyle(element, null).getPropertyValue(property);\n\t\t}\n\t\tvar loaded = false;\n\t\tvar fontAwsm = css(span, 'font-family');\n\t\tif (fontAwsm.replace(/\"/g, \"\") == 'Font Awesome 5 Free') { // remove double quotes\n\t\t\tloaded = true;\n\t\t}\n\t\tdocument.body.removeChild(span);\n\t\treturn loaded;\n\t}\n\treturn false;\n}\n\nTerminusPluginManager.prototype.getDefaultPlugins = function(){\n\tvar defplugs = [\"font-awesome\"];\n\treturn defplugs;\n}\n\nTerminusPluginManager.prototype.loadPlugins = function(plugins, then){\n\tvar ticker = plugins.length;\n\tvar cback = function(){\n\t\tif(--ticker <= 1 && then){\n\t\t\tthen();\n\t\t}\n\t};\n\tfor(var i = 0; i < plugins.length; i++){\n\t\tthis.loadPlugin(plugins[i], cback);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPlugin = function(plugin, then){\n\tvar pug = this.plugins[plugin];\n\tif(pug.css){\n\t\tfor(var i=0; i<pug.css.length; i++){\n\t\t\tvar cssid = plugin + \"_css_\" + i;\n\t\t\tHTMLHelper.loadDynamicCSS(cssid, pug.css[i]);\n\t\t}\n\t}\n\tvar scripts = (pug.js ? pug.js : []);\n\tif(plugin == \"gmaps\" && pug.key){\n\t\tscripts[0] += \"?key=\" + pug.key;\n\t}\n\tif(pug.plugin){\n\t\t//scripts.push(\"plugins/\" + pug.plugin);\n\t}\n\tif(plugin == \"codemirror\"){\n\t\tvar cm = scripts[0];\n\t\tvar sid = plugin + \"_js_\" + (scripts.length -1);\n\t\tscripts.splice(0, 1);\n\t\tvar self = this;\n\t\tvar cback = function(){\n\t\t\tself.loadPluginScripts(plugin, scripts, then);\n\t\t}\n\t\tHTMLHelper.loadDynamicScript(sid, cm, cback);\n\t}\n\telse {\n\t\tthis.loadPluginScripts(plugin, scripts, then);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPluginScripts = function(plugin, scripts, then){\n\tvar ticker = scripts.length - 1;\n\tvar self = this;\n\tvar cback = function(){\n\t\tif(ticker == 0) {\n\t\t\tif(self.loaded.indexOf(plugin) == -1){\n\t\t\t\tself.loaded.push(plugin);\n\t\t\t}\n\t\t\tif(self.loading.indexOf(plugin) != -1){\n\t\t\t\tself.loading.splice(self.loading.indexOf(plugin), 1);\n\t\t\t}\n\t\t\tthen();\n\t\t}\n\t\tticker--;\n\t};\n\tif(scripts.length == 0){\n\t\tthis.loaded.push(plugin);\n\t}\n\telse {\n\t\tthis.loading.push(plugin);\n\t}\n\tfor(var i = 0; i<scripts.length; i++){\n\t\tvar sid = plugin + \"_js_\" + i;\n\t\tHTMLHelper.loadDynamicScript(sid, scripts[i], cback);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPageCSS = function(css){\n\tcssfid = \"terminus_client_css\";\n\tvar cssdom = document.getElementById(cssfid);\n\tif(cssdom){\n\t\tcssdom.parentNode.removeChild(cssdom);\n\t}\n\tif(css){\n\t\tcssurl = this.css_base + \"css/\" + css + \".css\";\n\t\tHTMLHelper.loadDynamicCSS(cssfid, cssurl);\n\t}\n}\n\nTerminusPluginManager.prototype.pluginLoadable = function(pid){\n\treturn (this.precluded.indexOf(pid) !== -1 || this.pluginLoadedOrLoading(pid));\n}\n\nTerminusPluginManager.prototype.pluginLoadedOrLoading = function(pid){\n\tif(this.loaded.indexOf(pid) != -1) return true;\n\tif(this.preloaded.indexOf(pid) != -1) return true;\n\tif(this.loading.indexOf(pid) != -1) return true;\n\treturn false;\n}\n\nTerminusPluginManager.prototype.disabled = function(pid, obj){\n\tif(this.precluded.indexOf(pid) != -1) return true;\n\tif(obj.requires){\n\t\tfor(var i = 0; i<obj.requires.length; i++){\n\t\t\tif(!this.pluginLoadedOrLoading(obj.requires[i])) return true;\n\t\t}\n\t}\n\treturn false;\n}\n\nTerminusPluginManager.prototype.getPluginDOM = function(plugid, obj, ui){\n\tvar a = document.createElement(\"a\");\n\tvar cl = document.createElement(\"span\");\n\ta.appendChild(cl);\n\tcl.setAttribute(\"class\", \"terminus-plugin-control\");\n\tvar cbox = document.createElement(\"input\");\n\tcbox.id = \"terminus-plugin-control-\" + plugid;\n\tcbox.type = \"checkbox\";\n\tif(this.preloaded.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t\tcbox.disabled = true;\n\t}\n\telse if(this.loaded.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t}\n\telse if(this.loading.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t}\n\telse if(this.disabled(plugid, obj)){\n\t\tcbox.disabled = true;\n\t}\n\tvar clab = document.createElement(\"label\");\n\tclab.setAttribute(\"class\", \"terminus-plugin-label terminus-pointer\");\n\tclab.setAttribute(\"for\", cbox.id);\n\tclab.appendChild(document.createTextNode(obj.label));\n\tcl.appendChild(clab);\n\tcl.appendChild(cbox);\n\tvar self = this;\n\tcbox.addEventListener(\"change\", function(){\n\t\tself.togglePlugin(plugid, ui);\n\t});\n\treturn a;\n}\n\nTerminusPluginManager.prototype.togglePlugin = function(plugid, ui){\n\tif(this.loaded.indexOf(plugid) == -1){\n\t\tvar then = function(){\n\t\t\tui.redraw();\n\t\t}\n\t\tthis.loadPlugin(plugid, then);\n\t}\n\telse {\n\t\tthis.unloadPlugin(plugid);\n\t}\n\tHTMLHelper.removeChildren(ui.plugins);\n\tui.drawPlugins();\n}\n\nTerminusPluginManager.prototype.unloadPlugin = function(plugid){\n\tif(!this.plugins[plugid] || this.loaded.indexOf(plugid) == -1) {\n\t\tconsole.log(new Error(plugid + \" plugin unload request when it is not loaded\"));\n\t\treturn false;\n\t}\n\tvar pug = this.plugins[plugid];\n\tvar num = (pug.js) ? pug.js.length : 0;\n\tif(pug.plugin) num++;\n\tfor(var i=0; i< num; i++){\n\t\tvar cssfid = plugid + \"_js_\" + i;\n\t\tvar cssdom = document.getElementById(cssfid);\n\t\tif(cssdom){\n\t\t\tcssdom.parentNode.removeChild(cssdom);\n\t\t}\n\t}\n\tnum = (pug.css ? pug.css.length : 0);\n\tfor(var i=0; i< num; i++){\n\t\tvar cssfid = plugid + \"_css_\" + i;\n\t\tvar cssdom = document.getElementById(cssfid);\n\t\tif(cssdom){\n\t\t\tcssdom.parentNode.removeChild(cssdom);\n\t\t}\n\t}\n\tthis.loaded.splice(this.loaded.indexOf(plugid), 1);\n}\n\nTerminusPluginManager.prototype.getAsDOM = function(ui){\n\tvar dm = document.createElement(\"span\");\n\tdm.setAttribute(\"class\", \"terminus-plugin-manager\");\n\tvar clh = document.createElement(\"span\");\n\tclh.setAttribute(\"class\", \"terminus-plugin-control-header terminus-plugin-nav terminus-pointer\");\n\tclh.appendChild(document.createTextNode(\"Plugins\"));\n\tdm.appendChild(clh);\n\tvar a = document.createElement('a');\n\tthis.showPlugins(a, ui);\n\tclh.appendChild(a);\n\ta.style.display = 'none';\n\tclh.addEventListener('click', function(){\n\t\tif(a.style.display == 'none')\n\t\t\ta.style.display = 'block';\n\t\telse a.style.display = 'none';\n\t})\n\treturn dm;\n}\n\nTerminusPluginManager.prototype.showPlugins = function(a, ui){\n\ta.setAttribute('style', 'background-color: #111;');\n\tfor(var pid in this.plugins){\n\t\ta.appendChild(this.getPluginDOM(pid, this.plugins[pid], ui));\n\t}\n}\n\nmodule.exports=TerminusPluginManager\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  // Only Node.JS has a process variable that is of [[Class]] process\n  if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  } else if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  utils.forEach(['url', 'method', 'params', 'data'], function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(['headers', 'auth', 'proxy'], function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach([\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'maxContentLength',\n    'validateStatus', 'maxRedirects', 'httpAgent', 'httpsAgent', 'cancelToken',\n    'socketPath'\n  ], function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","const UTILS = require('./utils.js');\nconst CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n/*\n * Creates an entry in the connection registry for the server\n * and all the databases that the client has access to\n * maps the input authorties to a per-db array for internal storage and easy\n * access control checks\n * {doc:dbid => {terminus:authority =>\n * [terminus:woql_select, terminus:create_document, auth3, ...]}}\n *\n */\n\nfunction ConnectionCapabilities(connectionConfig, key) {\n\tthis.connection = {};\n\tthis.connectionConfig = connectionConfig;\n\tif (this.connectionConfig.server && key) {\n\t\tthis.setClientKey(this.connectionConfig.server, key);\n\t}\n}\n\nConnectionCapabilities.prototype.getClientKey = function (serverURL) {\n\tif (!serverURL) serverURL = this.connectionConfig.serverURL();\n\tif (serverURL && this.connection[serverURL]) return this.connection[serverURL].key;\n\treturn false;\n};\n\n\n/*\n * Utility functions for changing the state of connections with Terminus servers\n */\nConnectionCapabilities.prototype.setClientKey = function (curl, key) {\n\tif (typeof key === 'string' && key.trim()) {\n\t\tif (typeof this.connection[curl] === 'undefined') {\n\t\t\tthis.connection[curl] = {};\n\t\t}\n\t\tthis.connection[curl].key = key.trim();\n\t}\n};\n\n\n/**\n * @params {string} curl a valid terminusDB server URL\n * @params {object} capabilities it is the connect call response\n */\nConnectionCapabilities.prototype.addConnection = function (curl, capabilities) {\n\tif (typeof this.connection[curl] === 'undefined') {\n\t\tthis.connection[curl] = {};\n\t}\n\tconst capabilitiesKeys = capabilities ? Object.keys(capabilities) : [];\n\n\tfor (const pred of capabilitiesKeys) {\n\t    if (pred === 'terminus:authority' && capabilities[pred]) {\n\t      const auths = Array.isArray(capabilities[pred]) === true\n\t        ? capabilities[pred]\n\t        : [capabilities[pred]];\n\n\t      for (let i = 0; i < auths.length; i += 1) {\n\t        let scope = auths[i]['terminus:authority_scope'];\n\t        const actions = auths[i]['terminus:action'];\n\n\t        if (Array.isArray(scope) === false) scope = [scope];\n\t        const actionsArr = UTILS.authorityActionsToArr(actions);\n\n\t        for (let j = 0; j < scope.length; j += 1) {\n\t          const nrec = scope[j];\n\t          if (typeof this.connection[curl][nrec['@id']] === 'undefined') {\n\t            this.connection[curl][nrec['@id']] = nrec;\n\t          }\n\t          this.connection[curl][nrec['@id']]['terminus:authority'] = actionsArr;\n\t        }\n\t      }\n\t    } else {\n\t      this.connection[curl][pred] = capabilities[pred];\n\t    }\n\t}\n};\n\nConnectionCapabilities.prototype.serverConnected = function () {\n\treturn typeof this.connection[this.connectionConfig.server] !== 'undefined';\n};\n\nConnectionCapabilities.prototype.capabilitiesPermit = function (action, dbid, server) {\n\tif (!this.connectionConfig.connectionMode()\n         || this.connectionConfig.client_checks_capabilities !== true\n         || action === CONST.CONNECT) { return true; }\n\n\tserver = server || this.connectionConfig.server;\n\tdbid = dbid || this.connectionConfig.dbid;\n\n\tlet rec;\n\n\tif (action === CONST.CREATE_DATABASE) {\n\t\trec = this.getServerRecord(server);\n\t} else if (dbid) rec = this.getDBRecord(dbid);\n\telse console.log('no dbid', server, dbid);\n\tif (rec) {\n\t\tconst auths = rec['terminus:authority'];\n\t\tif (auths && auths.indexOf(`terminus:${action}`) !== -1) return true;\n\t} else {\n\t\tconsole.log('problem with ', this.connection, action, server, dbid);\n\t}\n\tthis.error = ErrorMessage.accessDenied(action, dbid, server);\n\treturn false;\n};\n\nConnectionCapabilities.prototype.getServerRecord = function (srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tconst connectionObj = this.connection[url] || {};\n\tconst okeys = Object.keys(connectionObj);\n\n\tfor (const oid of okeys) {\n\t\tif (this.connection[url][oid]['@type'] === 'terminus:Server') {\n\t\t\treturn this.connection[url][oid];\n\t\t}\n\t}\n\treturn false;\n};\n\nConnectionCapabilities.prototype.getDBRecord = function (dbid, srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tdbid = (dbid || this.connectionConfig.dbid);\n\tif (typeof this.connection[url] !== 'object') {\n\t\treturn false;\n\t}\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\tdbid = this.dbCapabilityID(dbid);\n\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\treturn undefined;\n};\n\nConnectionCapabilities.prototype.getServerDBRecords = function (srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tconst dbrecs = {};\n\tconst connectionObj = this.connection[url] || {};\n\n\tfor (const oid of Object.keys(connectionObj)) {\n\t\tif (this.connection[url][oid]['@type'] === 'terminus:Database') {\n\t\t\tdbrecs[oid] = this.connection[url][oid];\n\t\t}\n\t}\n\treturn dbrecs;\n};\n\n/*\n * removes a database record from the connection registry (after deletion, for example)\n */\nConnectionCapabilities.prototype.removeDB = function (dbid, srvr) {\n\tdbid = dbid || this.connectionConfig.dbid;\n\n\tif (dbid && this.connectionConfig.dbid && this.connectionConfig.dbid === dbid) {\n\t\tthis.connectionConfig.dbid = false;\n\t}\n\n\tconst url = srvr || this.connectionConfig.server;\n\tconst dbidCap = this.dbCapabilityID(dbid);\n\tif (dbidCap && this.connection[url] && this.connection[url][dbidCap]) {\n\t\tdelete this.connection[url][dbidCap];\n\t}\n};\n\n\nConnectionCapabilities.prototype.dbCapabilityID = function (dbid) {\n\treturn `doc:${dbid}`;\n};\n\nConnectionCapabilities.prototype.getDBRecord = function (dbid, srvr) {\n\tconst url = srvr || this.connectionConfig.server;\n\tdbid = dbid || this.connectionConfig.dbid;\n\tif (typeof this.connection[url] !== 'object') {\n\t\treturn false;\n\t}\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\tdbid = this.dbCapabilityID(dbid);\n\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\treturn undefined;\n};\n\nmodule.exports = ConnectionCapabilities;\n","\nconst IDParser = require('./terminusIDParser');\n\nfunction ConnectionConfig(params) {\n\tconst newParams = params || {};\n\tthis.server = false;\n\tthis.dbid = false;\n\tthis.docid = false;\n\tif (newParams.server) this.setServer(newParams.server);\n\tif (newParams.db) this.setDB(newParams.db);\n\tif (newParams.doc) this.setDocument(newParams.doc);\n\t/*\n     * client configuration options - connected_mode = connected\n     * tells the client to first connect to the server before invoking other services\n     */\n\n\tthis.connected_mode = newParams.connected_mode || 'connected';\n\t// include a terminus:user_key API key in the calls\n\tthis.include_key = newParams.include_key || true;\n\t// client side checking of access control (in addition to server-side access control)\n\tthis.client_checks_capabilities = newParams.client_checks_capabilities || true;\n}\n\nConnectionConfig.prototype.serverURL = function () {\n\treturn this.server;\n};\n\n\nConnectionConfig.prototype.connectionMode = function () {\n\treturn this.connected_mode === 'connected';\n};\n\nConnectionConfig.prototype.includeKey = function () {\n\treturn this.include_key === true;\n};\n\nConnectionConfig.prototype.schemaURL = function () {\n\treturn `${this.dbURL()}/schema`;\n};\nConnectionConfig.prototype.queryURL = function () {\n\treturn `${this.dbURL()}/woql`;\n};\nConnectionConfig.prototype.frameURL = function () {\n\treturn `${this.dbURL()}/frame`;\n};\nConnectionConfig.prototype.docURL = function () {\n\treturn `${this.dbURL()}/document/${this.docid ? this.docid : ''}`;\n};\n\nConnectionConfig.prototype.dbURL = function (call) {\n\t// url swizzling to talk to platform using server/dbid/platform/ pattern..\n\tif (this.platformEndpoint()) {\n\t\tconst baseURL = this.server.substring(0, this.server.lastIndexOf('/platform/'));\n\n\t\tif (!call || call !== 'create') {\n\t\t\treturn `${baseURL}/${this.dbid}/platform`;\n\t\t} if (call === 'platform') {\n\t\t\treturn `${baseURL}/${this.dbid}`;\n\t\t}\n\t}\n\treturn this.server + this.dbid;\n};\n\nConnectionConfig.prototype.platformEndpoint = function () {\n\tif (this.server && this.server.lastIndexOf('/platform/') === this.server.length - 10) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n/**\n * Utility functions for setting and parsing urls and determining\n * the current server, database and document\n */\nConnectionConfig.prototype.setServer = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseServerURL(inputStr)) {\n\t\tthis.server = parser.server();\n\t\tthis.dbid = false;\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setDB = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseDBID(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n// @param {string} inputStr TerminusDB server URL or a valid TerminusDB Id or omitted\n\nConnectionConfig.prototype.setSchemaURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseSchemaURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setDocument = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseDocumentURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tif (parser.dbid()) this.dbid = parser.dbid();\n\t\tif (parser.docid()) this.docid = parser.docid();\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setQueryURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseQueryURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setClassFrameURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseClassFrameURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nmodule.exports = ConnectionConfig;\n","/*\n11.75s$ npm install\n6.39s$ npm test\n*/\n/*\n * Helper class for parsing and decomposing Terminus URLs /\n * and dealing with namespace prefixed URLs\n */\n// const URL = require('url').URL;\n\n/*\n\"@context\": {\n    \"owl\":\"http://www.w3.org/2002/07/owl#\",\n    \"rdf\":\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"xsd\":\"http://www.w3.org/2001/XMLSchema#\"\n  } */\n\n\nfunction IDParser(context) {\n\tthis.context = context;\n\tthis.server_url = false;\n\tthis.db = false;\n\tthis.doc = false;\n}\n\nIDParser.prototype.server = function () {\n\treturn this.server_url;\n};\n\nIDParser.prototype.dbid = function () {\n\treturn this.db;\n};\n\nIDParser.prototype.docid = function () {\n\treturn this.doc;\n};\n\nIDParser.prototype.setContext = function (context) {\n\tthis.context = context;\n};\n\nIDParser.prototype.parseServerURL = function (str) {\n\tthis.server_url = false;\n\n\tif (this.validURL(str)) {\n\t\tthis.server_url = str;\n\t} else if (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tthis.server_url = this.expandPrefixed(str, this.context);\n\t}\n\n\tif (this.server_url && this.server_url.lastIndexOf('/') !== this.server_url.length - 1\n\t) {\n\t\tthis.server_url += '/';\n\t}\n\treturn this.server_url;\n};\n\nIDParser.prototype.parseDBID = function (str) {\n\tthis.db = false;\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tif (str.lastIndexOf('/') === str.length - 1) {\n\t\t\t// trim trailing slash\n\t\t\tstr = str.substring(0, str.length - 1);\n\t\t}\n\t\tconst index = str.lastIndexOf('/');\n\n\t\tconst serverURL = str.substring(0, index);\n\t\t// only dbNamer\n\t\tstr = str.substring(index + 1);\n\n\t\tif (this.parseServerURL(serverURL) === false) return false;\n\t}\n\n\tif (this.validIDString(str)) {\n\t\tthis.db = str;\n\t}\n\treturn this.db;\n};\n\nIDParser.prototype.parseDocumentURL = function (str) {\n\tthis.doc = false;\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\n\tif (this.validURL(str)) {\n\t\tlet dbURL = str;\n\t\tif (str.lastIndexOf('/document/') !== -1) {\n\t\t\t// get dbURL\n\t\t\tdbURL = str.substring(0, str.lastIndexOf('/document/'));\n\t\t\tstr = str.substring(str.lastIndexOf('/document/') + 10);\n\t\t}\n\t\tif (this.parseDBID(dbURL) === false) return false;\n\t}\n\tif (str.substring(0, 4) === 'doc:') str = str.substring(4);\n\t// check if the document's name hasn't space or '/'\n\tif (this.validIDString(str)) {\n\t\tthis.doc = str;\n\t}\n\treturn this.doc;\n};\n\nIDParser.prototype.parseSchemaURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'schema');\n\t}\n\treturn this.parseDBID(str);\n};\n\nIDParser.prototype.parseQueryURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'woql');\n\t\tstr = this.stripOptionalPath(str, 'query');\n\t}\n\treturn this.parseDBID(str);\n};\n\nIDParser.prototype.stripOptionalPath = function (str, bit) {\n\tif (str.indexOf(`/${bit}`) !== -1) str = str.substring(0, str.indexOf(`/${bit}`));\n\treturn str;\n};\n\nIDParser.prototype.parseClassFrameURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'frame');\n\t}\n\treturn this.parseDBID(str);\n};\n\n// Valid URLs are those that start with http:// or https://\nIDParser.prototype.validURL = function (str) {\n\tif (str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://') return true;\n\treturn false;\n};\n\nIDParser.prototype.validPrefixedURL = function (str, context) {\n\tif (typeof str !== 'string' || typeof context !== 'object') return false;\n\tconst parts = str.split(':');\n\tif (parts.length !== 2) return false;\n\tif (parts[0].length < 1 || parts[1].length < 1) return false;\n\tif (context && context[parts[0]] && this.validIDString(parts[1])) return true;\n\treturn false;\n};\n\nIDParser.prototype.validIDString = function (str) {\n\tif (typeof str !== 'string') return false;\n\tif (str.indexOf(':') !== -1 || str.indexOf(' ') !== -1 || str.indexOf('/') !== -1) return false;\n\treturn true;\n};\n\nIDParser.prototype.expandPrefixed = function (str, context) {\n\tconst parts = str.split(':');\n\treturn context[parts[0]] + parts[1];\n};\n\nmodule.exports = IDParser;\n","const FrameHelper = require('./frameHelper');\n/**\n * A frame pattern can have the following variables\n * renderer : object, property, data, * - matches a specific part of the frame\n * label : matches the label of a property\n * frame_type: object, data, document, id, oneOf\n * subject: id of the subject\n * subjectClass: class of the subject\n * range: type of a property (applies to property and data)\n * property: property id or list of property ids (parent property if it is an object or data)\n * value: value of the property\n * parent: a pattern relating to the parent of this frame\n * children: patterns for matching on the children of a frame\n * depth: how deep are we in the document? starts from 0\n * index: the index of a value in an array\n * status: updated, error, new, ok,\n */\n\nfunction FramePattern(pattern){\n\tif(pattern){\n\t\tthis.setPattern(pattern);\n\t}\n};\n\nFramePattern.prototype.setPattern = function(pattern){\n\tthis.scope = (pattern.scope ? pattern.scope: false);\n\tthis.label = (pattern.label ? pattern.label : false);\n\tthis.frame_type = (pattern.frame_type ? pattern.frame_type : false);\n\tthis.subject = (pattern.subject ? pattern.subject : false);\n\tthis.subjectClass = (pattern.subjectClass ? pattern.subjectClass : false);\n\tthis.range = (pattern.range ? pattern.range : false);\n\tthis.property = (pattern.property ? pattern.property : false);\n\tthis.value = (pattern.value ? pattern.value : false);\n\tthis.parent = (pattern.parent ? new FramePattern(pattern.parent) : false);\n\tthis.children = [];\n\tif (pattern.children) {\n\t\tfor (let i = 0; i < pattern.children.length; i++) {\n\t\t\tthis.children.push(new FramePattern(pattern.children[i]));\n\t\t}\n\t}\n\tthis.depth = (typeof pattern.depth !== 'undefined' ? pattern.depth : false);\n\tthis.index = (pattern.index ? pattern.index : false);\n\tthis.status = (pattern.status ? pattern.status : false);\n}\n\nFramePattern.prototype.checkFrame = function(frame){\n\tvar rtype = this.getRendererType(frame);\n\tif(!rtype) return false;\n\tif(this.scope && (this.scope != rtype) && (this.scope != \"*\" )) return false;\n\tif(this.illegalRuleType(rtype)) return false;\n\tif(this.frame_type && !this.checkFrameType(rtype, frame)) return false;\n\tif(this.label && !this.checkLabel(rtype, frame)) return false;\n\tif(this.subject && !this.checkSubject(rtype, frame)) return false;\n\tif(this.subjectClass && !this.checkSubjectClass(rtype, frame)) return false;\n\tif(this.property && !this.checkProperty(rtype, frame)) return false;\n\tif(this.depth !== false && !this.checkDepth(rtype, frame)) return false;\n\tif(this.range && !this.checkRange(rtype, frame)) return false;\n\tif(this.value && !this.checkValue(rtype, frame)) return false;\n\tif(this.parent && !this.checkParent(rtype, frame)) return false;\n\tif(this.children && this.children.length && !this.checkChildren(rtype, frame)) return false;\n\tif(this.index && !this.checkIndex(rtype, frame)) return false;\n\tif(this.status && !this.checkStatus(rtype, frame)) return false;\n\treturn true;\n};\n\nFramePattern.prototype.illegalRuleType = function (rtype) {\n\t// data frames have no children\n\tif (rtype == 'data' && this.children.length) return true;\n\t// object frames have no range\n\tif (rtype == 'object' && this.range) return true;\n\treturn false;\n};\n\n/* subject is an id or an array of ids,\n/* match is positive if the renderer's subject appears in the array or is the id\n */\nFramePattern.prototype.checkSubject = function (subject, frame) {\n\tif (typeof this.subject !== 'object' || !this.subject.length) this.subject = [this.subject];\n\tconst rsubj = frame.subject();\n\tfor (let i = 0; i < this.subject.length; i++) {\n\t\tif (this.IDsMatch(subject[i], rsubj)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n// at least one child must match all child rules\nFramePattern.prototype.checkChildren = function (rtype, frame) {\n\tfor (let i = 0; i < this.children.length; i++) {\n\t\tlet found = false;\n\t\tif (rtype == 'object') {\n\t\t\tfor (const prop in frame.properties) {\n\t\t\t\tif (this.children[i].checkFrame(frame.properties[prop])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (rtype == 'property') {\n\t\t\tfor (let j = 0; j <= renderer.values.length; j++) {\n\t\t\t\tif (this.children[j].checkFrame(frame.values[j])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!found) return false;\n\t}\n\treturn true;\n};\n\nFramePattern.prototype.checkStatus = function (rtype, frame) {\n\tif (typeof this.status !== 'object' || this.status.length == 0) this.status = [this.status];\n\tfor (let i = 0; i < this.status.length; i++) {\n\t\tif (this.status[i] == 'updated' && !frame.isUpdated()) return false;\n\t\tif (this.status[i] == 'new' && !frame.isNew()) return false;\n\t\tif (this.status[i] == 'unchanged' && frame.isUpdated()) return false;\n\t}\n\treturn true;\n};\n\nFramePattern.prototype.checkDepth = function (rtype, frame) {\n\treturn this.numberMatch(this.depth, frame.depth());\n};\n\nFramePattern.prototype.checkParent = function (rtype, frame) {\n\treturn this.parent.checkFrame(frame.parent);\n};\n\nFramePattern.prototype.checkIndex = function (rtype, frame) {\n\tif (rtype == 'data') {\n\t\treturn this.index == frame.index;\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkProperty = function (rtype, frame) {\n\tif (typeof this.property !== 'object' || !this.property.length) this.property = [this.property];\n\tfor (let i = 0; i < this.property.length; i++) {\n\t\tif (this.propertyIDsMatch(frame.property(), this.property[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n// returns true if any of the values are found\nFramePattern.prototype.checkValue = function (rtype, frame) {\n\tif (typeof this.value !== 'object' || !this.value.length) this.value = [this.value];\n\tfor (let i = 0; i < this.value.length; i++) {\n\t\tif (rtype == 'data') {\n\t\t\tif (this.valuesMatch(frame.value(), this.value[i])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if (rtype == 'property') {\n\t\t\tfor (let j = 0; j <= frame.values.length; j++) {\n\t\t\t\tif (this.getRendererType(frame.values[i]) == 'data'\n\t\t\t\t\t\t&& this.valuesMatch(frame.values[i].get(), this.value[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (rtype == 'object') {\n\t\t\tfor (const prop in frame.properties) {\n\t\t\t\tif (this.checkValue(this.getRendererType(frame.properties[prop]), frame.properties[prop])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkRange = function (rtype, frame) {\n\tif (typeof this.range !== 'object' || !this.range.length) this.range = [this.range];\n\tfor (let i = 0; i < this.range.length; i++) {\n\t\tif (this.rangeIDsMatch(frame.range(), this.range[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkSubjectClass = function (rtype, frame) {\n\tif (typeof this.subjectClass !== 'object' || !this.subjectClass.length) this.subjectClass = [this.subjectClass];\n\tconst rcls = frame.subjectClass();\n\tfor (let i = 0; i < this.subjectClass.length; i++) {\n\t\tif (this.classIDsMatch(this.subjectClass[i], rcls)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkFrameType = function (rtype, frame) {\n\tif (rtype == 'object') return this.frame_type == 'object';\n\tif (rtype == 'data') {\n\t\tif (frame.frame) {\n\t\t\treturn this.frame_type == frame.frame.ftype();\n\t\t}\n\t}\n\tif (rtype == 'property') return false;\n};\n\nFramePattern.prototype.checkLabel = function (rtype, frame) {\n\tif (typeof frame.getLabel !== 'function') {\n\t\tconsole.log(new Error('Rule passed to check label with broken renderer object - no getLabel'));\n\t\treturn false;\n\t}\n\treturn this.stringMatch(this.label, frame.getLabel());\n};\n\nFramePattern.prototype.IDsMatch = function (ida, idb) {\n\treturn FrameHelper.compareIDs(ida, idb);\n};\n\nFramePattern.prototype.classIDsMatch = function (ida, idb) {\n\treturn this.IDsMatch(ida, idb);\n};\nFramePattern.prototype.propertyIDsMatch = function (ida, idb) {\n\tconst match = this.IDsMatch(ida, idb);\n\treturn match;\n};\nFramePattern.prototype.rangeIDsMatch = function (ida, idb) {\n\treturn this.IDsMatch(ida, idb);\n};\nFramePattern.prototype.valuesMatch = function (vala, valb) {\n\treturn vala == valb;\n};\nFramePattern.prototype.numberMatch = function (vala, valb) {\n\tif (typeof vala === 'string') {\n\t\ttry {\n\t\t\treturn eval(valb + vala);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn vala === valb;\n};\n\nFramePattern.prototype.stringMatch = function (vala, valb) {\n\tconst pat = new RegExp(vala);\n\treturn pat.test(valb);\n};\n\nFramePattern.prototype.getRendererType = function (frame) {\n\tif (frame.isProperty()) return 'property';\n\tif (frame.isObject()) return 'object';\n\tif (frame.isData()) return 'data';\n\tif (frame.renderer_type) return frame.renderer_type;\n\tconsole.log(new Error(`frame configuration passed non-renderer type ${frame.constructor.name}`));\n\tconsole.log(renderer);\n\treturn false;\n};\n\n\n\n\n\n/**\n * FramePatternMatcher does pattern matching on frames\n * Does a given pattern match a given frame?\n */\nconst FramePatternMatcher = {}\n\n/**\n * Runs an array of matching rules across a frame and calls the passed onmatch function on each match\n * The optional onmatch function is called with each hit and is passed the frame and the rule that hit it.\n * A list of the matched rules is returned.\n *\n */\nFramePatternMatcher.testRules = function(rules, frame, onmatch){\n\tvar matched_rules = [];\n\tif(rules && rules.length){\n\t\tfor(var i = 0; i<rules.length; i++){\n\t\t\tvar match = (!rules[i].rule.pattern || FramePatternMatcher.patternMatchesFrame(rules[i].rule.pattern, frame));\n\t\t\tif(match){\n\t\t\t\tmatched_rules.push(rules[i]);\n\t\t\t\tif(onmatch && typeof onmatch == \"function\"){\n\t\t\t\t\tonmatch(frame, rules[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn matched_rules;\n}\n\n/**\n * Determines whether a given pattern matches a given frame\n */\nFramePatternMatcher.patternMatchesFrame = function(pattern, frame){\n\tif(typeof pattern == \"object\" && pattern.length){ //multiple patterns are ANDed\n\t\tfor(var i = 0 ; i<pattern.length; i++){\n\t\t\tvar fp = new FramePattern(pattern[i]);\n\t\t\tif(!fp.checkFrame(frame)) return false;\n\t\t}\n\t\treturn true;\n\t}\n\telse {\n\t\tvar fp = new FramePattern(pattern);\n\t\treturn fp.checkFrame(frame);\n\t}\n}\n\n\n\nfunction FrameRule(){\n\tthis.rule = { pattern: {} };\n\treturn this;\n};\n\n\nFrameRule.prototype.unpack = function(arr, nonstring){\n\tif(nonstring) var str = arr.join(\",\");\n\tvar str = \"'\" + arr.join(\"','\") + \"'\";\n\treturn str;\n}\n\nFrameRule.prototype.unpackFeatures = function(feats){\n\tlet extensions = {};\n\tvar fstr = \"\";\n\tfor(var i = 0; i<feats.length; i++){\n\t\tif(typeof feats[i] == \"string\"){\n\t\t\tfstr += '\"' + feats[i] + '\"';\n\t\t}\n\t\telse if(typeof feats[i] == \"object\"){\n\t\t\tvar fid = Object.keys(feats[i])[0];\n\t\t\tfstr += '\"' +  fid + '\"';\n\t\t\tfor(var prop in feats[i][fid]){\n\t\t\t\textensions[prop] = feats[i][fid][prop];\n\t\t\t}\n\t\t}\n\t\tif(i < feats.length - 1){\n\t\t\tfstr += \", \"\n\t\t}\n\t}\n\tfor(var k = 0; k < Object.keys(extensions).length; k++){\n\t\tvar ext = Object.keys(extensions)[k];\n\t\tvar val = extensions[ext];\n\t\tfstr += \").\" + ext + \"(\";\n\t\tif(typeof val == \"function\"){\n\t\t\tfstr += val;\n\t\t}\n\t\telse if(typeof val == \"string\"){\n\t\t\tfstr += '\"' + val + '\"';\n\t\t}\n\t\telse if(typeof val == \"object\"){\n\t\t\tfstr += JSON.stringify(val);\n\t\t}\n\t}\n\treturn fstr;\n}\n\nFrameRule.prototype.prettyPrint = function(type){\n\t//starts with obj. ...\n\tif(this.scope() == \"*\"){\n\t\tvar str = \"all()\";\n\t}\n\telse {\n\t\tvar str = this.scope() + \"()\";\n\t}\n\tif(typeof this.frameType() != \"undefined\"){\n\t\tstr += \".frame_type(\" + this.unpack(this.frameType()) + \")\";\n\t}\n\tif(typeof this.label() != \"undefined\"){\n\t\tstr += \".label(\" + this.unpack(this.label()) + \")\";\n\t}\n\tif(typeof this.subject() != \"undefined\"){\n\t\tstr += \".subject(\" + this.unpack(this.subject()) + \")\";\n\t}\n\tif(typeof this.subjectClass() != \"undefined\"){\n\t\tstr += \".subjectClass(\" + this.unpack(this.subjectClass()) + \")\";\n\t}\n\tif(typeof this.property() != \"undefined\"){\n\t\tstr += \".property(\" + this.unpack(this.property()) + \")\";\n\t}\n\tif(typeof this.range() != \"undefined\"){\n\t\tstr += \".range(\" + this.unpack(this.range()) + \")\";\n\t}\n\tif(typeof this.value() != \"undefined\"){\n\t\tstr += \".value(\" + this.unpack(this.value()) + \")\";\n\t}\n\tif(typeof this.children() != \"undefined\" && this.children.length > 0){\n\t\tstr += \".children(\\n\";\n\t\tvar kids = this.children();\n\t\tfor(var i = 0; i< kids.length; i++){\n\t\t\tstr += kids.prettyPrint() + \"\\n\";\n\t\t}\n\t\tstr += \")\";\n\t}\n\tif(typeof this.parent() != \"undefined\"){\n\t\tstr += \".parent(\" + this.parent.prettyPrint() + \")\";\n\t}\n\tif(typeof this.depth() != \"undefined\"){\n\t\tvar d = this.depth();\n\t\tif(typeof d == \"string\"){\n\t\t\tstr += \".depth('\" + this.depth() + \"')\";\n\t\t}\n\t\telse {\n\t\t\tstr += \".depth(\" + this.depth() + \")\";\n\t\t}\n\t}\n\tif(typeof this.index() != \"undefined\"){\n\t\tstr += \".index(\" + this.unpack(this.index(), true) + \")\";\n\t}\n\tif(typeof this.status() != \"undefined\"){\n\t\tstr += \".status(\" + this.unpack(this.status()) + \")\";\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \".renderer('\" + this.renderer() + \"')\";\n\t}\n\tif(typeof this.render() != \"undefined\"){\n\t\tstr += \".render(\" + this.render + \")\";\n\t}\n\tif(typeof this.compare() != \"undefined\"){\n\t\tstr += \".compare(\" + this.compare() + \")\";\n\t}\n\tif(typeof this.mode() != \"undefined\"){\n\t\tstr += \".mode('\" + this.mode() + \"')\";\n\t}\n\tif(typeof this.collapse() != \"undefined\"){\n\t\tstr += \".collapse(\" + this.collapse() + \")\";\n\t}\n\tif(typeof this.hidden() != \"undefined\"){\n\t\tstr += \".hidden(\" + this.hidden() + \")\";\n\t}\n\tif(typeof this.view() != \"undefined\"){\n\t\tstr += \".view('\" + this.view() + \"')\";\n\t}\n\tif(typeof this.showDisabledButtons() != \"undefined\"){\n\t\tstr += \".showDisabledButtons(\" + this.showDisabledButtons() + \")\";\n\t}\n\tif(typeof this.header() != \"undefined\"){\n\t\tstr += \".header(\" + this.header() + \")\";\n\t}\n\tif(typeof this.style() != \"undefined\"){\n\t\tstr += \".style(\\\"\" + this.style() + \"\\\")\";\n\t}\n\tif(typeof this.headerStyle() != \"undefined\"){\n\t\tstr += \".headerStyle(\\\"\" + this.headerStyle() + \"\\\")\";\n\t}\n\tif(typeof this.args() != \"undefined\"){\n\t\tstr += \".args(\" + JSON.stringify(this.args()) + \")\";\n\t}\n\tif(typeof this.showEmpty() != \"undefined\"){\n\t\tstr += \".showEmpty(\" + this.show_empty() + \")\";\n\t}\n\tif(typeof this.dataviewer() != \"undefined\"){\n\t\tstr += \".dataviewer(\\\"\" + this.dataviewer() + \"\\\")\";\n\t}\n\tif(typeof this.features() != \"undefined\"){\n\t\tstr += \".features(\" + this.unpackFeatures(this.features()) + \")\";\n\t}\n\tif(typeof this.headerFeatures() != \"undefined\"){\n\t\tstr += \".headerFeatures(\" + this.unpackFeatures(this.headerFeatures()) + \")\";\n\t}\n\treturn str;\n}\n\nFrameRule.prototype.scope = function(scope){\n\tif(typeof scope == \"undefined\") return this.rule.pattern.scope;\n\tthis.rule.pattern.scope = scope;\n\treturn this;\n};\n\nFrameRule.prototype.frameType = function(...frametype){\n\tif(typeof frametype == \"undefined\" || frametype.length == 0) return this.rule.pattern.frametype;\n\tthis.rule.pattern.frametype = frametype;\n\treturn this;\n};\n\nFrameRule.prototype.label = function(...label){\n\tif(typeof label == \"undefined\" || label.length == 0) return this.rule.pattern.label;\n\tthis.rule.pattern.label = label;\n\treturn this;\n};\n\nFrameRule.prototype.subject = function(...subject){\n\tif(typeof subject == \"undefined\" || subject.length == 0) return this.rule.pattern.subject;\n\tthis.rule.pattern.subject = subject;\n\treturn this;\n};\n\nFrameRule.prototype.subjectClass = function(...subjectClass){\n\tif(typeof subjectClass == \"undefined\" || subjectClass.length == 0) return this.rule.pattern.subjectClass;\n\tthis.rule.pattern.subjectClass = subjectClass;\n\treturn this;\n};\n\nFrameRule.prototype.property = function(...property){\n\tif(typeof property == \"undefined\" || property.length == 0) return this.rule.pattern.property;\n\tthis.rule.pattern.property = property;\n\treturn this;\n};\n\nFrameRule.prototype.depth = function(depth){\n\tif(typeof depth == \"undefined\") return this.rule.pattern.depth;\n\tthis.rule.pattern.depth = depth;\n\treturn this;\n};\n\nFrameRule.prototype.range = function(...range){\n\tif(typeof range == \"undefined\" || range.length == 0) return this.rule.pattern.range;\n\tthis.rule.pattern.range = range;\n\treturn this;\n};\n\nFrameRule.prototype.value = function(...value){\n\tif(typeof value == \"undefined\" || value.length == 0) return this.rule.pattern.value;\n\tthis.rule.pattern.value = value;\n\treturn this;\n};\n\nFrameRule.prototype.pattern = function () {\n\treturn this.rule.pattern;\n};\n\nFrameRule.prototype.json = function(json){\n\tif(!json) return this.rule;\n\tthis.rule = json;\n\treturn this;\n}\n\nFrameRule.prototype.parent = function(parent){\n\tif(typeof parent == \"undefined\") return this.rule.pattern.parent;\n\tthis.rule.pattern.parent = parent.pattern();\n\treturn this;\n};\n\nFrameRule.prototype.children = function(...children){\n\tif(typeof children == \"undefined\") return this.rule.pattern.children;\n\tif(typeof this.rule.pattern.children == \"undefined\"){\n\t\tthis.rule.pattern.children = [];\n\t}\n\tfor (let i = 0; i < children.length; i++) {\n\t\tthis.rule.pattern.children.push(children[i].pattern());\n\t}\n\treturn this;\n};\n\nFrameRule.prototype.index = function(...index){\n\tif(typeof index == \"undefined\" || index.length == 0) return this.rule.pattern.index;\n\tthis.rule.pattern.index = index;\n\treturn this;\n};\n\nFrameRule.prototype.status = function(...status){\n\tif(typeof status == \"undefined\" || status.length == 0) return this.rule.pattern.status;\n\tthis.rule.pattern.status = status;\n\treturn this;\n};\n\n/**\n * The below correspond to rule actions - what happens when a pattern matches\n */\n\n/**\n * These onces can apply to features - if the rule includes an earlier features or header_features call, subsequent render, style, hidden and args apply to it\n */\nFrameRule.prototype.render = function(func){\n\tif(!func) return this.rule.render;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"render\", func);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"render\", func);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.render = func;\n\t}\n\treturn this;\n}\n\nFrameRule.prototype.style = function(style){\n\tif(typeof style == \"undefined\") return this.rule.style;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"style\", style);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"style\", style);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.style = style;\n\t}\n\treturn this;\n};\n\n/**\n * The frame or feature will be hidden or unhidden (boolean)\n */\nFrameRule.prototype.hidden = function(m){\n\tif(typeof m == \"undefined\") return this.rule.hidden;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"hidden\", m);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"hidden\", m);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.hidden = m;\n\t}\n\treturn this;\n}\n\n/**\n * Specifies arguments to a renderer \n */\nFrameRule.prototype.args = function(json){\n\tif(!json) return this.rule.args;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"args\", json);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"args\", json);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.args = json;\n\t}\n\treturn this;\n}\n\n/**\n * Adds a property to a feature array\n */\nFrameRule.prototype.applyFeatureProperty = function(feats, prop, val){\n\tvar nfeats = [];\n\tfor(var i = 0; i<feats.length; i++){\n\t\tif(typeof feats[i] == \"string\"){\n\t\t\tvar nfeat = {};\n\t\t\tnfeat[feats[i]] = {};\n\t\t\tnfeat[feats[i]][prop] = val;\n\t\t\tnfeats.push(nfeat);\n\t\t}\n\t\telse if(typeof feats[i] == \"object\"){\n\t\t\tlet fkey = Object.keys(feats[i])[0];\n\t\t\tif(fkey){\n\t\t\t\tvar nfeat = feats[i];\n\t\t\t\tnfeat[fkey][prop] = val;\n\t\t\t\tnfeats.push(nfeat);\n\t\t\t}\n\t\t}\n\t}\n\treturn nfeats;\n}\n\t\n\n\n/**\n * These apply to regular frames\n */\nFrameRule.prototype.renderer = function(rend){\n\tif(!rend) return this.rule.renderer;\n\tthis.rule.renderer = rend;\n\treturn this;\n}\n\nFrameRule.prototype.headerStyle = function(hstyle){\n\tif(!hstyle) return this.rule.header_style;\n\tthis.rule.header_style = hstyle;\n\treturn this;\n}\n\n/**\n * Function which specifies the ordering of values in a frame\n */\nFrameRule.prototype.compare = function(func){\n\tif(!func) return this.rule.compare;\n\tthis.rule.compare = func;\n\treturn this;\n}\n\n/**\n * Edit / view mode\n */\nFrameRule.prototype.mode = function(m){\n\tif(!m) return this.rule.mode;\n\tthis.rule.mode = m;\n\treturn this;\n}\n\n/**\n * Specifies whether a frame should be presented in collapsed form or not\n */\nFrameRule.prototype.collapse = function(m){\n\tif(!m) return this.rule.collapse;\n\tthis.rule.collapse = m;\n\treturn this;\n}\n\n/**\n * Specifies whether a frame should include a view selector\n */\n\nFrameRule.prototype.view = function(m){\n\tif(!m) return this.rule.view;\n\tthis.rule.view = m;\n\treturn this;\n}\n\n/**\n * Should actions which are disabled in the given context be displayed?\n */\nFrameRule.prototype.showDisabledButtons = function(m){\n\tif(!m) return this.rule.show_disabled_buttons;\n\tthis.rule.show_disabled_buttons = m;\n\treturn this;\n}\n\nFrameRule.prototype.features = function(...m){\n\tif(typeof m == \"undefined\" || m.length == 0) return this.rule.features;\n\tthis.rule.features = m;\n\treturn this;\n}\n\nFrameRule.prototype.headerFeatures = function(...m){\n\tif(typeof m == \"undefined\" || m.length == 0) return this.rule.header_features;\n\tthis.rule.header_features = m;\n\treturn this;\n}\n\nFrameRule.prototype.header = function(m){\n\tif(!m) return this.rule.header;\n\tthis.rule.header = m;\n\treturn this;\n}\n\nFrameRule.prototype.showEmpty = function(m){\n\tif(!m) return this.rule.show_empty;\n\tthis.rule.show_empty = m;\n\treturn this;\n}\n\nFrameRule.prototype.dataviewer = function(m){\n\tif(!m) return this.rule.dataviewer;\n\tthis.rule.dataviewer = m;\n\treturn this;\n}\n\nmodule.exports = {FramePatternMatcher, FramePattern, FrameRule } ;\n","const HTMLStringViewer = require('./datatypes/String');\nconst HTMLStringEditor = require('./datatypes/StringEditor');\nconst HTMLBooleanViewer = require('./datatypes/Boolean');\nconst HTMLBooleanEditor = require('./datatypes/BooleanEditor');\nconst HTMLChoiceViewer = require('./datatypes/Choice');\nconst HTMLChoiceEditor = require('./datatypes/ChoiceEditor');\nconst HTMLCoordinateViewer = require('./datatypes/Coordinate');\nconst HTMLCoordinateEditor = require('./datatypes/CoordinateEditor');\nconst HTMLDateViewer = require('./datatypes/Date');\nconst HTMLDateEditor = require('./datatypes/DateEditor');\nconst HTMLEntityViewer = require('./datatypes/Entity');\nconst HTMLEntityEditor = require('./datatypes/EntityEditor');\nconst HTMLImageViewer = require('./datatypes/Image');\nconst HTMLImageEditor = require('./datatypes/ImageEditor');\nconst HTMLLinkViewer = require('./datatypes/Link');\nconst HTMLNumberViewer = require('./datatypes/Number');\nconst HTMLRangeViewer = require('./datatypes/Range');\nconst HTMLRangeEditor = require('./datatypes/RangeEditor');\nconst GoogleMapEditor = require('./datatypes/GoogleMapEditor');\nconst GoogleMapViewer = require('./datatypes/GoogleMapViewer');\nconst HTMLMarkupEditor = require('./datatypes/HTMLMarkupEditor');\nconst S2EntityEditor = require('./datatypes/S2EntityEditor');\n\n\nfunction initialiseDataRenderers(RenderingMap, plugins, options){\n\tRenderingMap.registerViewerForTypes(\"HTMLBooleanViewer\", {label: \"Checkbox Viewer\"}, [\"xsd:boolean\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLBooleanEditor\", {label: \"Checkbox Editor\"}, [\"xsd:boolean\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLChoiceViewer\", {label: \"Choice Viewer\"}, [\"oneOf\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLChoiceEditor\", {label: \"Choice Selector\"}, [\"oneOf\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLCoordinateViewer\", {label: \"Coordinate Viewer\"}, [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLCoordinateEditor\", {label: \"Coordinate Editor\"}, [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLDateViewer\", {label: \"Date Viewer\"}, [\"xsd:time\", \"xsd:date\", \"xsd:dateTime\", \"xsd:gYear\", \n\t\t\"xsd:gYearRange\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:dateTimeStamp\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLDateEditor\", {label: \"Date Editor\"}, [\"xsd:time\", \"xsd:date\", \"xsd:dateRange\" ,\"xsd:dateTime\", \"xsd:gYear\", \n\t\t\"xsd:gYearRange\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:dateTimeStamp\"]);\n\t\n\tvar hevopts = {label: \"Document Viewer\"};\n\tif (options && options[\"HTMLEntityViewer\"]) hevopts.args = options[\"HTMLEntityViewer\"];\n\tRenderingMap.registerViewerForTypes(\"HTMLEntityViewer\", hevopts, [\"document\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLEntityEditor\", {label: \"Document Selector\"}, [\"document\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLImageViewer\", {label: \"Image Viewer\"}, [\"xdd:url\", \"xsd:anyURI\", \"xsd:base64Binary\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLImageEditor\", {label: \"Image Editor\"}, [\"xsd:base64Binary\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLImageViewer\", {label: \"Image Viewer\"}, [\"xdd:url\", \"xsd:anyURI\", \"xsd:base64Binary\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLImageEditor\", {label: \"Image Editor\"}, [\"xsd:base64Binary\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLLinkViewer\", {label: \"Link Viewer\"}, [\"xdd:url\", \"xsd:anyURI\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLNumberViewer\", {label: \"Number with commas\"}, \n\t\t\t[\"xsd:decimal\", \"xsd:double\", \"xsd:float\", \"xsd:short\", \"xsd:integer\", \"xsd:long\", \n\t\t\t\t\"xsd:nonNegativeInteger\", \"xsd:positiveInteger\", \"xsd:negativeInteger\", \"xsd:nonPositiveInteger\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLRangeViewer\", {label: \"Range Viewer\"}, [\"xdd:gYearRange\", \"xdd:dateRange\", \"xdd:integerRange\", \"xdd:decimalRange\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLRangeEditor\", {label: \"Range Editor\"}, [\"xdd:gYearRange\", \"xdd:dateRange\", \"xdd:integerRange\", \"xdd:decimalRange\"]);\n\tRenderingMap.universalEditor = \"HTMLStringEditor\";\n\tRenderingMap.universalViewer = \"HTMLStringViewer\";\n\taddPlugins(RenderingMap, plugins);\n\tRenderingMap.createRenderer = function(type, args){\n\t\tlet r = createDataRenderer(type, args);\n\t\treturn r;\n\t}\n}\n\nfunction createDataRenderer(type, options){\n\ttry {\n\t\tvar viewer = eval(\"new \" + type + \".\" + type + \"()\");\n\t\tif(viewer.options) viewer.options(options);\n\t}\n\tcatch(e){\n\t\treturn false;\n\t}\n\treturn viewer;\n}\n\nfunction addPlugins(RenderingMap, plugins){\n\tif(plugins && plugins.indexOf(\"gmaps\") != -1){\n\t\tRenderingMap.registerEditorForTypes(\"GoogleMapEditor\", {label: \"Google Map Editor\"}, [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\t\tRenderingMap.registerViewerForTypes(\"GoogleMapViewer\", {label: \"Google Map Editor\"}, [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\t}\n\tif(plugins && plugins.indexOf(\"quill\") != -1){\n\t\tRenderingMap.registerEditorForTypes(\"HTMLMarkupEditor\", {label: \"Quill WYSIWIG HTML Editor\"}, [\"xdd:html\"]);\n\t}\n\tif(plugins && plugins.indexOf(\"select2\") != -1){\n\t\tRenderingMap.registerEditorForFrameType(\"S2EntityEditor\", {label: \"S2 Autocomplete Selector\"}, \"document\");\n\t}\n}\n\nmodule.exports = {createDataRenderer, initialiseDataRenderers};","function HTMLDateHelper(){\n\tthis.months = [\"January\", \"Februrary\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n}\n\nHTMLDateHelper.prototype.getMonthName = function(num){\n\treturn this.months[num-1];\n}\n\nmodule.exports={HTMLDateHelper}","function GoogleMapHelper(options){\n\tthis.polygon = false;\n\tthis.polyline = false;\n\tthis.markers = [];\n\tthis.init(options);\n}\n\nGoogleMapHelper.prototype.init = function(config){\n\tthis.type = ((config && config.type) ? config.type: 'Shape'); \n\tthis.width = ((config && config.width) ? config.width : '400px'); \n\tthis.height = ((config && config.height ) ? config.height : '400px'); \n\tthis.mapLat = ((config && config.mapLat) ? config.mapLat : '41.9010004'); \n\tthis.mapLong = ((config && config.mapLong ) ? config.mapLong : '12.500061500000015');\n\tthis.zoom = ((config && config.zoom) ? config.zoom : 3);\n\tthis.stroke = ((config && config.stroke) ? config.stroke : { color: '#FF0000', opacity: 0.3, weight: 3});\n\tthis.fill = ((config && config.fill) ? config.fill : { color: '#FF0000', opacity: 0.1});\n\tthis.line = ((config && config.line) ? config.line : { color: '#000000', opacity: 0.9, weight: 3});\n}\n\nGoogleMapHelper.prototype.destroy = function(){\n    this.clear();\n} \n\nGoogleMapHelper.prototype.translatePolygonToArray = function(polygon){\n   var data = \"[\";\n   var vertices = polygon.getPath();\n   var seenValue = false;\n   for (var j=0; j<vertices.getLength(); j++){\n       if(seenValue){\n           data = data + \",\";\n       }\n       var xy = vertices.getAt(j);\n       data = data + \"[\" + xy.lat() + \",\" + xy.lng() + \"]\"\n       seenValue = true;\n   }\n   data = data + \"]\";\n   return data;\n};\n\nGoogleMapHelper.prototype.translateArrayToPolygon = function(array){\n   var jsonified = JSON.parse(array);\n   var output = [];\n   for(var i=0;i<jsonified.length;i++){\n       var latlong = {}\n       latlong.lat = jsonified[i][0];\n       latlong.lng = jsonified[i][1];\n       output.push(latlong);\n   }\n   return output;\n}\n\nGoogleMapHelper.prototype.createPolygon = function(coords, map) {\n\tvar polygon = new google.maps.Polygon({\n        paths: coords,\n        strokeColor: this.stroke.color,\n        strokeOpacity: this.stroke.opacity,\n        strokeWeight: this.stroke.weight,\n        fillColor: this.fill.color,\n        fillOpacity: this.fill.opacity\n\t});\n    polygon.setMap(map);\n\treturn polygon;\n}\n\nGoogleMapHelper.prototype.createPolyline = function(coords){\n\tvar init = {\n\t      strokeColor: this.line.color,\n\t      strokeOpacity: this.line.opacity,\n\t      strokeWeight: this.line.weight\n\t};\n\tif(coords){\n\t\tinit.paths = coords;\n\t}\n\tvar poly = new google.maps.Polyline(init);\n\treturn poly;\n}\n\nGoogleMapHelper.prototype.clearMarkers = function() {\n\tfor (var i = 0; i < this.markers.length; i++ ) {\n\t\tthis.markers[i].setMap(null);\n\t}\n\tthis.markers.length = 0;\n}\n\n\nGoogleMapHelper.prototype.addMarker = function(position, map, frame, title, ty) {\n\tvar init = {\n\t\tposition: position, \n\t\tmap: map\n\t}\n\tif(title){\n\t\tinit.title = title;\n\t}\n\tvar marker = new google.maps.Marker(init);\n\tvar self = this;\n\tif(this.markers.length == 0 && ty == \"xdd:coordinatePolygon\"){\n     \tmarker.addListener('click', function() {\n\t\t\tvar coords = self.getCoordsFromMarkers();\n    \t\tself.polygon = self.createPolygon(coords, map);\n            self.clearMarkers();\n            self.polyline.setMap(null);\n            frame.set(self.translatePolygonToArray(self.polygon));\n        });                \t\n    }\n\tthis.markers.push(marker);\n\tif(ty == \"xdd:coordinatePolyline\"){\n\t\tvar x = this.translatePolygonToArray(this.polyline);\n\t\tframe.set(x);\n\t}\n\treturn marker;\n}\n\nGoogleMapHelper.prototype.getCoordsFromMarkers = function(){\n\treturn this.polyline.getPath();\n}\n\nGoogleMapHelper.prototype.clear = function(){\n\tif(this.polygon) {\n\t\tthis.polygon.setMap(null);\n\t\tthis.polygon = false;\n\t}\n\tif(this.polyline) {\n\t\tthis.clearMarkers();\n\t\tthis.polyline.setMap(null);\n\t}\n}\n\nGoogleMapHelper.prototype.initMap = function(mapContainer, value, type){\n\tmapContainer.style.width = this.width;\n\tmapContainer.style.height = this.height;\n\tif(typeof google == \"undefined\"){\n\t\talert(\"google is not effing loaded\");\n\t\treturn false;\n\t}\n\tvar map = new google.maps.Map(mapContainer, {\n\t    zoom: this.zoom,\n\t\tcenter: {lat: parseFloat(this.mapLat), lng: parseFloat(this.mapLong)}  \n\t});\n\tif(type == \"xdd:coordinatePolygon\"){\n\t    this.polyline = this.createPolyline();\n\t\tthis.polyline.setMap(map);\n\t\tvar coords = (value ? this.translateArrayToPolygon(value) : []);\n\t\tif(value){\n\t    \tthis.polygon = this.createPolygon(coords, map);\n\t    }\n\t}\n\telse if(type == \"xdd:coordinatePolyline\"){\n\t\tvar coords = (value ? this.translateArrayToPolygon(value) : []);\n\t    this.polyline = this.createPolyline();\n\t\tthis.polyline.setMap(map);\t\t\n\t\tif(value){\n\t    \tthis.polyline.setPath(coords);\n\t    }\n\t}\t\n\telse if(type == \"xdd:coordinate\"){\n\t\tif(value){\n\t\t\tthis.clearMarkers();\n            var lat = parseFloat(value.substring(1, value.indexOf(\",\")));\n\t\t\tvar long = parseFloat(value.substring(value.indexOf(\",\")+1, value.length-1));\n            var init = {\n            \tposition: {lat: lat, lng: long},\n        \t\tmap: map\n\t        }\n\t        var marker = new google.maps.Marker(init);\n\t        this.markers.push(marker);\n\t\t}\n\t}\n    google.maps.event.trigger(map, 'resize');\n    return map;\n}\n\nmodule.exports=GoogleMapHelper;","/*\n * Maintains a list of renderers that are available for rendering \n * datatype values - also covers choice values and id values\n */\n\nfunction DatatypeRenderers(options){\n\tthis.registeredDataViewers = {},\n\tthis.registeredDataEditors = {},\n\tthis.defaultViewers = {};\n\tthis.defaultEditors = {};\n\tthis.universalViewer = false;\n\tthis.universalEditor = false;\n\tif(options) this.options(options);\n\t//links to other documents, choices, id field, id fields of contained objects, ids of structural elements: properties, etc\n\tthis.specials = ['document', 'oneOf', 'id', 'contained', 'structural'];\n}\n\nDatatypeRenderers.prototype.options = function (options){\n\tthis.universalViewer = (options && options.universalViewer ? options.universalViewer : false);\n\tthis.universalEditor = (options && options.universalEditor ? options.universalEditor : false);\n\tthis.editor = (options && options.editor ? options.editor : false);\n}\n\nDatatypeRenderers.prototype.getValidDataViewerList = function(datatype){\n\tlet valids = [];\n\tif(datatype && typeof this.registeredDataViewers[datatype] != \"undefined\"){\n\t\tvalids = valids.concat(this.registeredDataViewers[datatype]);\n\t}\n\tif(this.universalViewer && valids.indexOf(this.universalViewer) == -1){\n\t\tvalids.push(this.universalViewer);\n\t}\n\treturn valids;\n};\n\nDatatypeRenderers.prototype.getValidDataEditorList = function(datatype){\n\tlet valids = [];\n\tif(datatype && typeof this.registeredDataEditors[datatype] != \"undefined\"){\n\t\tvar nftypes = this.registeredDataEditors[datatype];\n\t\tif(nftypes){\n\t\t\tfor(var i = 0; i<nftypes.length; i++){\n\t\t\t\tif(valids.indexOf(nftypes[i]) == -1) valids.push(nftypes[i]);\n\t\t\t}\n\t\t}\n\t}\n\tif(typeof this.registeredDataEditors[datatype] != \"undefined\"){\n\t\tvalids = valids.concat(this.registeredDataEditors[datatype]);\n\t}\n\tif(this.universalEditor && valids.indexOf(this.universalEditor) == -1){\n\t\tvalids.push(this.universalEditor);\n\t}\n\treturn valids;\n}\n\nDatatypeRenderers.prototype.getEditorForDataFrame = function(datatype){\n\tvar vals = this.getValidDataEditorList(datatype);\n\tif(this.defaultEditors[datatype] && vals[this.defaultEditors[datatype]]){\n\t\treturn vals[this.defaultEditors[datatype]];\n\t}\n\t//last added is default if no explicit default is set\n\tif(vals){\n\t\treturn vals[Object.keys(vals)[0]];\n\t}\n\telse {\n\t\tif(this.universalEditor) return this.universalEditor;\n\t}\n}\n\nDatatypeRenderers.prototype.getViewerForDataFrame = function(datatype){\n\tvar vals = this.getValidDataViewerList(datatype);\n\tif(this.defaultViewers[datatype] && vals[this.defaultViewers[datatype]]){\n\t\treturn vals[this.defaultViewers[datatype]];\n\t}\n\tif(vals){\n\t\treturn vals[Object.keys(vals)[0]];\n\t}\n\telse {\n\t\tif(this.universalViewer) return this.universalViewer;\n\t}\n\n}\n\nDatatypeRenderers.prototype.registerViewerForTypes = function(viewer, record, types){\n\tfor(var i = 0; i < types.length; i++){\n\t\tif(typeof this.registeredDataViewers[types[i]] == \"undefined\"){\n\t\t\tthis.registeredDataViewers[types[i]] = {};\n\t\t}\n\t\tif(!this.registeredDataViewers[types[i]][viewer]){\n\t\t\tthis.registeredDataViewers[types[i]][viewer] = record;\n\t\t}\n\t}\n}\n\nDatatypeRenderers.prototype.registerEditorForTypes = function(viewer, record, types){\n\tfor(var i = 0; i < types.length; i++){\n\t\tif(typeof this.registeredDataEditors[types[i]] == \"undefined\"){\n\t\t\tthis.registeredDataEditors[types[i]] = {};\n\t\t}\n\t\tif(!this.registeredDataEditors[types[i]][viewer]){\n\t\t\tthis.registeredDataEditors[types[i]][viewer] = record;\n\t\t}\t\t\t\n\t}\n}\n\nDatatypeRenderers.prototype.getRenderer = function(type, value){\n\tvar r = {};\n\tlet v = this.getViewerForDataFrame(type);\n\tif(v){\n\t\tif(typeof v == \"object\"){\n\t\t\tr.name = Object.keys(v)[0];\n\t\t\tif(v[r.name].label){\n\t\t\t\tr.label = v[r.name].label;\n\t\t\t}\n\t\t\tif(v[r.name].args){\n\t\t\t\tr.args = v[r.name].args;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tr.name = v;\n\t\t}\n\t\treturn r;\n\t}\n\treturn false;\n}\n\nDatatypeRenderers.prototype.getEditor = function(type, value){\n\tvar r = {};\n\tlet v = this.getEditorForDataFrame(type);\n\tif(v){\n\t\tif(typeof v == \"object\"){\n\t\t\tr.name = Object.keys(v)[0];\n\t\t\tif(v[r.name].label){\n\t\t\t\tr.label = v[r.name].label;\n\t\t\t}\n\t\t\tif(v[r.name].args){\n\t\t\t\tr.args = v[r.name].args;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tr.name = v;\n\t\t}\n\t\treturn r;\n\t}\n\treturn false;\n}\n\n\nmodule.exports=DatatypeRenderers;\n\n\n","function TerminusViolations(vios, ui){\n\tthis.ui = ui;\n\tthis.vios = [];\n\tvar nvios = [];\n\tfor(var i = 0; i<vios.length; i++){\n\t\tnvios.push(vios[i]);\n\t}\n\tfor(var i = 0; i<nvios.length; i++){\n\t\tthis.vios.push(new TerminusViolation(nvios[i], this.ui));\n\t}\n}\n\nTerminusViolations.prototype.getAsDOM = function(context_msg){\n\tvar vdom = document.createElement(\"div\");\n\tvdom.setAttribute(\"class\", \"terminus-violations terminus-show-msg-vio\");\n\tvar vioHeading = document.createElement(\"div\");\n\tvioHeading.setAttribute('class', 'terminus-violations-heading');\n\tvdom.appendChild(vioHeading);\n\tvar msg = this.vios.length + (this.vios.length > 1 ? \" Violations Detected\" : \" Violation Detected\");\n\tif(context_msg) msg += \" \" + context_msg;\n\tvioHeading.appendChild(document.createTextNode(msg));\n\tfor(var i = 0; i<this.vios.length; i++){\n\t\tvdom.appendChild(this.vios[i].getAsDOM());\n\t}\n\treturn vdom;\n}\n\n/*\n * Class for displaying violation reports as HTML\n */\nfunction TerminusViolation(vio, ui){\n\tthis.ui = ui;\n\tthis.vio = vio;\n}\n\nTerminusViolation.prototype.getAsDOM = function(){\n\tvar vdom = document.createElement(\"div\");\n\tvdom.setAttribute(\"class\", \"terminus-violation\");\n\tif(this.vio['@type']){\n\t\tvar msg = this.vio['vio:message'] || {\"@value\": \"\"};\n\t\tvdom.appendChild(this.getPropertyAsDOM(this.vio[\"@type\"], msg));\n\t}\n\tfor(var prop in this.vio){\n\t\tif(prop != \"vio:message\" && prop != \"@type\"){\n\t\t\tvdom.appendChild(this.getPropertyAsDOM(prop, this.vio[prop]));\n\t\t}\n\t}\n\treturn vdom;\n}\n\nTerminusViolation.prototype.getPropertyAsDOM = function(prop, val){\n\tvar pdom = document.createElement(\"div\");\n\tpdom.setAttribute(\"class\", \"terminus-violation-property\");\n\tvar ldom = document.createElement(\"span\");\n\tldom.setAttribute(\"class\", \"terminus-label terminus-violation-property-label\");\n\tldom.appendChild(document.createTextNode(prop));\n\tvar vdom = document.createElement(\"span\");\n\tvdom.setAttribute(\"class\", \"terminus-violation-property-value\");\n\tvar mval = val[\"@value\"] || val;\n\tif(mval && typeof mval != \"object\") vdom.appendChild(document.createTextNode(mval));\n\tpdom.appendChild(ldom);\n\tpdom.appendChild(vdom);\n\treturn pdom;\n}\n\nmodule.exports=TerminusViolations\n","const TerminusUI = require('./TerminusUI');\nconst TerminusViewer =require('./html/TerminusViewer')\nmodule.exports={TerminusUI:TerminusUI,\n\tTerminusViewer:TerminusViewer}","/**\n * Terminus UI object\n *\n * Traffic control of messages going between different Terminus UI pages and features\n *\n * @param opts - options array\n */\nconst ApiExplorer = require('./ApiExplorer');\nconst TerminusDBsdk = require('./TerminusDB');\nconst TerminusViolations = require('./html/TerminusViolation');\nconst TerminusQueryViewer = require('./TerminusQuery');\nconst TerminusSchemaViewer = require('./TerminusSchema');\nconst TerminusServersdk = require('./TerminusServer');\nconst TerminusURLLoader = require('./TerminusURL');\nconst TerminusPluginManager = require('./plugins/TerminusPlugin');\nconst UTILS = require('./Utils');\nconst HTMLHelper = require('./html/HTMLHelper');\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction TerminusUI(opts){\n\tthis.client = new TerminusClient.WOQLClient();\n\tthis.controls = [];\n\tthis.setOptions(opts);\n}\n\n/*\n * Client connects to specified server and specified part\n * opts is a json with the following fields:\n * server: mandatory URL of the server to connect to\n * key: optional client API key\n * dbid: id of the database to connect to\n * schema: if set, the UI will load the schema page after connecting\n * query: if set, the query will be sent to the server and the results will be loaded on the query page\n * document: if set, the document page corresponding to this document will be loaded after connecting\n *\n * (note: schema, query, document are mutually exclusive and must also have a dbid set)\n */\nTerminusUI.prototype.connect = function(opts){\n\tvar self = this;\n\tthis.client.connectionConfig.server = false;\n\tvar key = ((opts && opts.key) ? opts.key : false);\n\tthis.showBusy(\"Connecting to server at \" + opts.server);\n\treturn this.client.connect(opts.server, key)\n\t.then( function(response) {\n\t\tself.clearBusy();\n\t\tif(opts && opts.db && self.getDBRecord(opts.db)){\n\t\t\tself.connectToDB(opts.db);\n\t\t\tif(opts.document && self.showView(\"get_document\")){\n\t\t\t\tresponse = self.showDocumentPage(opts.document);\n\t\t\t}\n\t\t\telse if(opts.schema && self.showView(\"get_schema\")){\n\t\t\t\tresponse = self.showSchemaPage(opts.schema);\n\t\t\t}\n\t\t\telse if(opts.query && self.showView(\"woql_select\")){\n\t\t\t\tself.showQueryPage(opts.query);\n\t\t\t}\n\t\t\telse if(opts.explorer && self.showView(\"api_explorer\")){\n\t\t\t\tself.showExplorer(opts.explorer);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tself.showDBMainPage();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tself.showServerMainPage();\n\t\t}\n\t\tself.redraw();\n\t\treturn response;\n\t})\n\t.catch(function(err) {\n\t\tself.clearBusy();\n\t\tself.showError(err);\n\t\tthrow(err);\n\t});\n}\n\n/**\n * Sends a request to create a new database to the server and interprets the response\n *\n * dbdets is a json object with the following fields:\n * id: the id of the new database (alphanumeric, no spaces, url friendly) mandatory\n * title: the text name of the new database for tables, etc. mandatory\n * description: text description of the database (optional)\n * key: a API client key for server auth\n * schema: the url of another Terminus DB from which to import schema\n * instance: the url of another Terminus DB from which to import data\n *\n */\nTerminusUI.prototype.createDatabase = function(dbdets){\n\tvar self = this;\n\tif(!dbdets.id || !dbdets.title){\n        return Promise.reject(new Error(self.getBadArguments(\"createDatabase\", \"ID and title are mandatory fields\")));\n\t}\n\tvar dbid = dbdets.id;\n\tself.showBusy(\"Creating Database \" + dbdets.title + \" with id \" + dbid);\n\tvar dbdoc = this.generateNewDatabaseDocument(dbdets);\n\treturn this.client.createDatabase(dbid, dbdoc)\n\t.then(function(response){ //reload list of databases in background..\n\t\tself.clearBusy();\n\t\treturn self.refreshDBList()\n\t\t.then(function(response){\n\t\t\tif(crec = self.client.connection.getDBRecord(dbid)){\n\t\t\t\tself.client.connectionConfig.dbid = dbid;\n\t\t\t\tself.showDBMainPage();\n\t\t\t\tself.showMessage(\"Successfully Created Database \" + dbid, \"success\");\n\t\t\t}\n\t\t\telse {\n\t\t        return Promise.reject(new Error(self.getCrashString(\"createDatabase\", \"Failed to retrieve record of created database \" + dbid)));\n\t\t\t}\n\t\t})\n\t})\n\t.catch(function(error){\n\t\tself.clearBusy();\n\t\tself.showError(error);\n\t});\n}\n\n/**\n * Deletes the database with the passed id from the currently connected server\n */\nTerminusUI.prototype.deleteDatabase = function(dbid){\n\tvar self = this;\n\tvar delrec = this.client.connection.getDBRecord();\n\tvar lid = (dbid ? dbid : this.db());\n\tvar dbn = (delrec && delrec['rdfs:label'] && delrec['rdfs:label'][\"@value\"] ? delrec['rdfs:label'][\"@value\"] + \" (id: \" + lid + \")\" : lid);\n\tthis.showBusy(\"Deleting database \" + dbn);\n\treturn this.client.deleteDatabase(lid)\n\t.then(function(response){\n\t\tself.clearBusy();\n\t\tself.showServerMainPage();\n\t\tself.showMessage(\"Successfully Deleted Database \" + dbn, \"warning\");\n\t\tself.refreshDBList();\n\t\treturn response;\n\t})\n\t.catch(function(error){\n\t\tself.clearBusy();\n\t\tself.showError(error);\n\t});\n}\n\n/*\n * Transforms a details (id, title, description) array into  json-ld document\n */\nTerminusUI.prototype.generateNewDatabaseDocument = function(dets){\n\tvar doc = {\n\t\t\"@context\" : {\n\t\t\trdfs: \"http://www.w3.org/2000/01/rdf-schema#\",\n\t\t\tterminus: \"http://terminusdb.com/schema/terminus#\"\n\t\t},\n\t\t\"@type\": \"terminus:Database\"\n\t}\n\tif(dets.title){\n\t\tdoc['rdfs:label'] = {\n\t\t\t\"@language\":  \"en\",\n\t\t\t\"@value\": dets.title\n\t\t};\n\t}\n\tif(dets.description){\n\t\tdoc['rdfs:comment'] = {\n\t\t\t\"@language\":  \"en\",\n\t\t\t\"@value\": dets.description\n\t\t};\n\t}\n\tdoc['terminus:allow_origin'] = { \"@type\" : \"xsd:string\", \"@value\" : \"*\" };\n\treturn doc;\n}\n\nTerminusUI.prototype.getBadArguments = function(fname, str){\n\treturn \"Bad arguments to \" + fname + \": \" + str;\n}\n\nTerminusUI.prototype.getCrashString = function(fname, str){\n\treturn \"Results from \" + fname + \" indicate the possibility of a system failure \" + str;\n}\n\n/*\n * Parses the passed URL and turns it into a call to the connect function - loads the appropriate endpoing\n */\nTerminusUI.prototype.load = function(url, key){\n\tvar args = {};\n\tif(url && url.indexOf(\"/document/\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/document/\"));\n\t\targs.document = url.substring(url.indexOf(\"/document/\")+10);\n\t}\n\telse if(url && url.indexOf(\"/schema\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/schema\"));\n\t\targs.schema = {};\n\t}\n\telse if(url && url.indexOf(\"/woql\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/query\"));\n\t\targs.query = url.substring(url.indexOf(\"/query\")+7);\n\t}\n\targs.server = url;\n\tif(key) args.key = key;\n\treturn this.connect(args);\n}\n\n/**\n * Fetches the DB URL from the url by chopping off the extra bits\n */\nTerminusUI.prototype.getConnectionEndpoint = function(url){\n\tif(url && url.lastIndexOf(\"/schema\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/schema\"));\n\t}\n\tif(url && url.lastIndexOf(\"/document\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/document\"));\n\t}\n\tif(url && url.lastIndexOf(\"/frame\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/frame\"));\n\t}\n\tif(url && url.lastIndexOf(\"/woql\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/woql\"));\n\t}\n\treturn url;\n}\n\nTerminusUI.prototype.server = function(){\n\treturn this.client.connectionConfig.server;\n}\n\nTerminusUI.prototype.db = function(){\n\treturn this.client.connectionConfig.dbid;\n}\n\nTerminusUI.prototype.clearServer = function(){\n\tthis.client.connectionConfig.server = false;\n}\n\nTerminusUI.prototype.connectToDB = function(dbid){\n\tthis.client.connectionConfig.dbid = dbid;\n\t//set standard prefixes for the current db\n\tTerminusClient.UTILS.addURLPrefix('doc', this.client.connectionConfig.dbURL() + \"/document/\");\n\tTerminusClient.UTILS.addURLPrefix('scm', this.client.connectionConfig.dbURL() + \"/schema#\");\n}\n\nTerminusUI.prototype.clearDB = function(){\n\tthis.client.connectionConfig.dbid = false;\n}\n\nTerminusUI.prototype.removeDB = function(db, url){\n\tthis.client.connection.removeDB(db, url);\n}\n\nTerminusUI.prototype.getDBRecord = function(db, url){\n\treturn this.client.connection.getDBRecord(db, url);\n}\n\nTerminusUI.prototype.refreshDBList = function(){\n\tvar self = this;\n\treturn this.client.connect();\n}\n\nTerminusUI.prototype.showServerMainPage = function(){\n\tthis.viewer = new TerminusServersdk.TerminusServerViewer(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showCollaboratePage = function(){\n\tthis.viewer = new TerminusURLLoader(this);\n\tthis.redrawMainPage();\n}\n\n\nTerminusUI.prototype.showLoadURLPage = function(val){\n\tthis.viewer = new TerminusURLLoader(this, val);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showDBMainPage = function(){\n\tthis.viewer = new TerminusDBsdk.TerminusDBViewer(this);\n\tthis.page = \"db\";\n\tthis.redraw();\n}\n\nTerminusUI.prototype.showCreateDBPage = function(){\n\tthis.viewer = new TerminusDBsdk.TerminusDBCreator(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showSchemaPage = function(durl){\n\tthis.viewer = new TerminusSchemaViewer(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showQueryPage = function(query){\n\tthis.viewer = new TerminusQueryViewer(this, query, this.options);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showDocumentPage = function(durl){\n\tthis.viewer = new TerminusDBsdk.TerminusDBViewer(this);\n\tthis.page = \"docs\";\n\tif(durl){\n\t\tthis.viewer.docid = durl;\n\t}\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showCreateDocument = function(durl){\n\tthis.viewer = new TerminusDocumentViewer(this, \"create\", this.getDocCreatorOptions());\n\tconst promise = this.viewer.loadCreateDocument(durl);\n\tthis.redrawMainPage();\n\treturn promise;\n}\n\nTerminusUI.prototype.redrawMainPage = function(){\n\tHTMLHelper.removeChildren(this.mainDOM);\n\tif(this.viewer && this.mainDOM){\n\t\tvar x = this.viewer.getAsDOM();\n\t\tthis.mainDOM.appendChild(x);\n\t}\n}\n\nTerminusUI.prototype.deleteDBPermitted = function(dbid){\n\tif(dbid == \"terminus\") return false;\n\tif(this.client.connection.capabilitiesPermit(\"delete_database\", dbid)){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.getDeleteDBButton = function(dbid){\n\tif(!this.deleteDBPermitted(dbid)) return false;\n\t//var delbut = document.createElement('button');\n\tvar icon = document.createElement('i');\n\ticon.setAttribute(\"class\", \"terminus-db-list-del-icon fa fa-trash\");\n\t//delbut.appendChild(icon);\n\t//delbut.appendChild(document.createTextNode(\"Delete Database\"));\n\t//delbut.setAttribute(\"class\", \"terminus-control-button terminus-delete-db-button\");\n\t\t// function to fix db in a closure\n\tvar self = this;\n\tvar delDB = function(db){\n\t\treturn function(){\n\t\t\tlet deleteConfirm = confirm(`This action is irreversible, it will remove the database from the system permanently. Are you sure you want to delete ${db} Database?`);\n\t\t\tif (deleteConfirm == true) {\n\t\t\t\tself.deleteDatabase(db);\n\t\t\t}\n\t\t}\n\t};\n\ticon.addEventListener(\"click\", delDB(dbid));\n\treturn icon;\n}\n\nTerminusUI.prototype.showResult = function(response){\n\tthis.showMessage(response, \"success\");\n};\n\nTerminusUI.prototype.showError = function(response){\n\tthis.showMessage(response, \"error\");\n};\n\nTerminusUI.prototype.showWarning = function(response){\n\tthis.showMessage(response, \"warning\");\n};\n\n\nTerminusUI.prototype.clearMessages = function(response){\n\tif(this.messages) HTMLHelper.removeChildren(this.messages);\n};\n\nTerminusUI.prototype.clearMainPage = function(){\n\tif(this.main) HTMLHelper.removeChildren(this.main);\n}\n\nTerminusUI.prototype.setMessageDOM = function(dom){\n\tthis.messages = dom;\n}\n\nTerminusUI.prototype.setbuttonControls = function(dom){\n\tthis.buttons = dom;\n}\n\nTerminusUI.prototype.setControllerDOM = function(dom){\n\tthis.controller = dom;\n}\n\nTerminusUI.prototype.setExplorerDOM = function(dom){\n\tthis.explorer = dom;\n}\n\nTerminusUI.prototype.setPluginsDOM = function(dom){\n\tthis.plugins = dom;\n}\n\nTerminusUI.prototype.setViewerDOM = function(dom){\n\tthis.mainDOM = dom;\n}\n\nTerminusUI.prototype.draw = function(comps, slocation){\n\tif(comps && comps.viewer) this.setViewerDOM(comps.viewer);\n\tif(comps && comps.buttons) this.setbuttonControls(comps.buttons);\n\tif(comps && comps.messages) this.setMessageDOM(comps.messages);\n\tif(comps && comps.controller) this.setControllerDOM(comps.controller);\n\t//if(comps && comps.explorer) this.setExplorerDOM(comps.explorer);\n\tif(comps && comps.plugins) this.setPluginsDOM(comps.plugins);\n\tif(this.plugins){\n\t\tthis.drawPlugins();\n\t}\n\tif(this.buttons){\n\t\t//this.toggleControl();\n\t}\n\tvar self = this;\n\tvar cdrawn = false;\n\tif(slocation && slocation.server){\n\t\tif(typeof this.client.connection.connection[slocation.server] == \"undefined\") {\n\t\t\treturn this.connect(slocation)\n\t\t\t.catch(function(error){\n\t\t\t\tself.showLoadURLPage();\n\t\t\t});\n\t\t}\n\t}\n\telse {\n\t\tthis.showLoadURLPage();\n\t};\n}\n\nTerminusUI.prototype.redraw = function(msg){\n\tthis.clearMessages();\n\tthis.redrawControls();\n\tif(this.explorer){\n\t\tHTMLHelper.removeChildren(this.explorer);\n\t\t//this.drawExplorer();\n\t}\n\tif(this.viewer){\n\t\tthis.redrawMainPage();\n\t}\n\tif(msg) this.showMessage(msg);\n};\n\n\nTerminusUI.prototype.toggleDashboardWidget = function(widget){\n    HTMLHelper.removeChildren(this.controller);\n    HTMLHelper.removeChildren(this.explorer);\n    UTILS.removeSelectedNavClass('terminus-dashboard-selected');\n    widget.classList.add('terminus-dashboard-selected');\n}\n\nTerminusUI.prototype.toggleControl = function(){\n /* var self = this;\n  this.buttons.client.addEventListener('click', function(){\n    self.toggleDashboardWidget(this);\n    self.drawControls();\n    self.showServerMainPage();\n  })\n  this.buttons.explorer.addEventListener('click', function(){\n    self.toggleDashboardWidget(this);\n    self.drawExplorer();\n  })*/\n}\n\nTerminusUI.prototype.redrawControls = function(){\n\tif(this.controller){\n\t\tHTMLHelper.removeChildren(this.controller);\n\t\tthis.drawControls();\n\t}\n}\n\nTerminusUI.prototype.drawControls = function(){\n\tthis.controls = [];\n\tthis.loadControls();\n\tfor(var i = 0; i<this.controls.length; i++){\n\t\tvar ncontrol = this.controls[i];\n\t\tif(ncontrol && (nd = ncontrol.getAsDOM())){\n\t\t\tthis.controller.appendChild(nd);\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.drawExplorer = function(){\n\tif(this.explorer){\n\t\tif(this.showControl(\"api_explorer\")){\n\t\t\tvar exp = new ApiExplorer(this);\n\t\t\tae = exp.getAsDOM();\n\t\t\tthis.explorer.appendChild(ae);\n\t\t\tthis.explorer.style.display = 'block';\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.loadControls = function(){\n\tif(this.showControl('server')){\n\t\tvar sc = new TerminusServersdk.TerminusServerController(this);\n\t\tif(sc) {\n\t\t\tthis.controls.push(sc);\n\t\t}\n\t\tif(this.db() && this.showControl(\"db\")){\n\t\t\tvar sc = new TerminusDBsdk.TerminusDBController(this);\n\t\t\tif(sc) this.controls.push(sc);\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.showControl = function(el){\n\tif(this.show_controls.indexOf(el) == -1) return false;\n\tif(this.pseudoCapability(el)) return true;\n\tif(this.client.connection.capabilitiesPermit(el)) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.showView = function(el){\n\tif(this.show_views.indexOf(el) == -1) return false;\n\tif(this.pseudoCapability(el)) return true;\n\tif(this.client.connection.capabilitiesPermit(el)) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.clearBusy = function(response){\n\tthis.clearMessages();\n\tif(this.viewer && typeof this.viewer.busy == \"function\") this.viewer.busy(false);\n}\n\nTerminusUI.prototype.getBusyLoader = function(bsyDom){\n     var pd = document.createElement('div');\n     var pbc = document.createElement('div');\n     pbc.setAttribute('class', 'term-progress-bar-container');\n     pd.appendChild(pbc);\n\n     var pbsa = document.createElement('div');\n     pbsa.setAttribute('class', 'term-progress-bar term-stripes animated reverse slower');\n     pbc.appendChild(pbsa);\n     var pbia = document.createElement('span');\n     pbia.setAttribute('class', 'term-progress-bar-inner');\n     pbsa.appendChild(pbia);\n\n     bsyDom.appendChild(pd);\n}\n\nTerminusUI.prototype.showMessage = function(msg, type){\n\tif(this.messages){\n\t\tHTMLHelper.removeChildren(this.messages);\n\t\tvar md = document.createElement('div');\n        switch(type){\n            case 'busy':\n                var msgHolder = document.createElement('div');\n                msgHolder.setAttribute('class', 'terminus-busy-msg')\n                msgHolder.appendChild(document.createTextNode(msg));\n                md.appendChild(msgHolder);\n                this.getBusyLoader(md);\n            break;\n            case 'success':\n                md.setAttribute('class', 'terminus-show-msg-success');\n                md.appendChild(document.createTextNode(msg));\n            break;\n            case 'error':\n                md.setAttribute('class', 'terminus-show-msg-error');\n                md.appendChild(document.createTextNode(msg));\n            break;\n            case 'info':\n                md.setAttribute('class', 'terminus-show-msg-info');\n                md.appendChild(document.createTextNode(msg));\n            break;\n            case 'warning':\n                md.setAttribute('class', 'terminus-show-msg-warning');\n                md.appendChild(document.createTextNode(msg));\n            break;\n        }\n\t\tthis.messages.appendChild(md);\n\t}\n};\n\nTerminusUI.prototype.showViolations = function(vios, type){\n\tvar nvios = new TerminusViolations(vios, this);\n\tif(this.messages){\n\t\tvar cmsg = (type == \"schema\" ? \" in Schema\" : \" in Document\");\n\t\tHTMLHelper.removeChildren(this.messages);\n\t\tthis.messages.appendChild(nvios.getAsDOM(cmsg));\n\t}\n}\n\nTerminusUI.prototype.showBusy = function(msg){\n\tthis.showMessage(msg, \"busy\");\n\tif(this.viewer && typeof this.viewer.busy == \"function\") this.viewer.busy(msg);\n};\n\nTerminusUI.prototype.pseudoCapability = function(el){\n\tvar pseuds = [\"server\", \"db\", \"collaborate\", \"change-server\", \"api_explorer\", \"import_schema\", \"add_new_library\"];\n\tif(pseuds.indexOf(el) == -1) return false;\n\treturn true;\n}\n\nTerminusUI.prototype.setOptions = function(opts){\n\tthis.show_controls = opts && opts.controls ? opts.controls :\n\t\t[\"server\", \"db\", \"change-server\", \"schema_format\",\n\t\t\t\"import_schema\", \"class_frame\", \"create_database\",\n\t\t\t\"collaborate\", \"get_document\", \"update_schema\",\n\t\t\t\"get_schema\", \"woql_select\"\n\t\t];\n\tthis.show_views = opts && opts.views ? opts.views : this.show_controls;\n\tif(opts.document){\n\t\tthis.document_options = opts.document;\n\t}\n\tif(opts.schema){\n\t\tthis.schema_options = opts.schema;\n\t}\n\tthis.piman = new TerminusPluginManager();\n\tvar self = this;\n\tthis.piman.init(opts.plugins, function(){\n\t\t/*var pins = [\"gmaps\", \"quill\", \"select2\"];\n\t\tfor(var i = 0; i<pins.length; i++){\n\t\t\tif(self.piman.pluginAvailable(pins[i])){\n\t\t\t\t//RenderingMap.addPlugin(pins[i]);\n\t\t\t}\n\t\t}*/\n\t\t//self.redraw();\n\t});\n\tif(opts.css && this.piman){\n\t\tthis.piman.loadPageCSS(opts.css);\n\t}\n\tthis.loadControls();\n}\n\nTerminusUI.prototype.pluginAvailable = function(p){\n\treturn this.piman.pluginAvailable(p);\n}\n\nTerminusUI.prototype.drawPlugins = function(){\n\tif(!this.piman) {\n\t\tconsole.log(new Error(\"No plugin manager initialised in UI object\"));\n\t\treturn false;\n\t}\n\tthis.plugins.appendChild(this.piman.getAsDOM(this));\n}\n\nTerminusUI.prototype.getDocViewerOptions = function(){\n\tif(this.document_options && this.document_options['view']){\n\t\treturn this.document_options['view'];\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.getDocCreatorOptions = function(){\n\tif(this.document_options && this.document_options['view']){\n\t\treturn this.document_options['view'];\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.getClassFrameOptions = function(){\n\treturn this.viewdoc_options;\n}\n\nmodule.exports=TerminusUI\n","/**\n * @file Javascript Api explorer tool\n * @author Kitty Jose\n * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more\n *\n * @summary Displays a demo and description of api calls from WOQLCLient and what happens under the hood of api calls\n */\nconst TerminusPluginManager = require('./plugins/TerminusPlugin');\nconst UTILS = require('./Utils');\nconst TerminusClient = require('@terminusdb/terminus-client');\nconst HTMLHelper = require('./html/HTMLHelper');\n\nlet apiNavConfig = {\n    mainNav: {\n        connect: {\n    \t\tnavText: 'Connect API',\n            action : 'connect',\n            icon   : 'link',\n            defaultSelected: true\n    \t},\n        database: {\n            navText: 'Database API',\n            action : 'create',\n            icon   : 'database'\n        },\n        schema: {\n            navText: 'Schema API',\n            action : 'schema',\n            icon   : 'cog'\n        },\n        document: {\n            navText: 'Document API',\n            action : 'document',\n            icon   : 'file'\n        },\n        query: {\n            navText: 'Query API',\n            action : 'query',\n            icon   : 'search'\n        }\n    },\n    subNav: {\n        database: {\n            createDatabase: {\n                navText: 'Create database',\n                action : 'create',\n                icon   : 'plus',\n                defaultSelected: true\n            },\n            deleteDatabase: {\n                navText: 'Delete database',\n                action : 'delete',\n                icon   : 'trash-alt'\n            }\n        },\n        schema: {\n            getSchema: {\n                navText: 'View Schema',\n                action : 'getSchema',\n                icon   : 'eye',\n                defaultSelected: true\n            },\n            updateSchema: {\n                navText: 'Update Schema',\n                action : 'updateSchema',\n                icon   : 'arrow-up'\n            },\n            getClassFrames: {\n                navText: 'Get Class Frames',\n                action : 'getClassFrames',\n                icon   : 'share-alt'\n            }\n        },\n        document: {\n            viewDocument: {\n        \t\tnavText: 'View Document',\n                action : 'viewDocument',\n                icon   : 'eye',\n                defaultSelected: true\n        \t},\n            createDocument: {\n                navText: 'Create Document',\n                action : 'createDocument',\n                icon   : 'plus'\n            },\n            updateDocument: {\n                navText: 'Update Document',\n                action : 'updateDocument',\n                icon   : 'arrow-up'\n            },\n            deleteDocument:{\n                navText: 'Delete Document',\n                action : 'deleteDocument',\n                icon   : 'trash-alt'\n            }\n        },\n        query: {\n            select: {\n                navText: 'Select',\n                action : 'select',\n                icon   : 'mouse-pointer',\n                defaultSelected: true\n            },\n            update: {\n                navText: 'Update',\n                action : 'update',\n                icon   : 'arrow-up'\n            }\n        }\n    }\n}\n\nfunction ApiExplorer(ui){\n    this.ui = ui;\n    this.viewer = ui.mainDOM;\n    this.client = new TerminusClient.WOQLClient();\n    this.client.use_fetch = true;\n    this.client.return_full_response = true;\n    this.pman = new TerminusPluginManager();\n}\n\n// Controller provides access to Api explorer functions\nApiExplorer.prototype.getAsDOM = function(){\n \tvar aec = document.createElement(\"div\");\n    aec.setAttribute(\"class\", \"terminus-db-controller\");\n    if(this.ui){\n       this.getApiNav(aec, this.viewer); // nav\n       this.getApiExplorerDom('connect', this.viewer); // content dom\n    } // if this.ui\n    return aec;\n }\n\n/***** Api Nav bar *****/\n// Toggle selected nav bars\nApiExplorer.prototype.setSelectedNavMenu = function(a){\n    UTILS.removeSelectedNavClass(\"terminus-selected\");\n    a.classList.add(\"terminus-selected\");\n}\n\nApiExplorer.prototype.navOnSelect = function(action, nav, viewer){\n    UTILS.removeSelectedNavClass(\"terminus-selected\");\n    nav.classList.add(\"terminus-selected\");\n    this.getApiExplorerDom(action, viewer);\n}\n\n// create nav bars\nApiExplorer.prototype.createNavs = function(navConfig, viewer, ul){\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    if(navConfig.defaultSelected) a.classList.add('terminus-selected');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        self.navOnSelect(navConfig.action, this, viewer);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-' + navConfig.icon);\n    a.appendChild(icon);\n    var txt = document.createTextNode(navConfig.navText);\n    a.appendChild(txt);\n    ul.appendChild(a);\n}\n\n// gets api nav bar\nApiExplorer.prototype.getApiNav = function(navDom, viewer){\n    // list view of apis\n    var nav = document.createElement('div');\n    navDom.appendChild(nav);\n    // connect to server api\n    var ul = document.createElement('ul');\n    ul.setAttribute('class', 'terminus-ul');\n    nav.appendChild(ul);\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.mainNav){\n        if (apiNavConfig.mainNav.hasOwnProperty(key)) {\n            this.createNavs(apiNavConfig.mainNav[key], viewer, ul);\n        }\n    } // for apiNavConfig\n    return navDom;\n} // getApiNav()\n\n/***** Api sub navs  *****/\n// get schema api explorer - nav bar, alert msg, headers ...\nApiExplorer.prototype.getApiExplorerDom = function(view, viewer){\n    // clear of viewer\n    HTMLHelper.removeChildren(viewer);\n    // wrapper\n    var wrap = document.createElement('div');\n    //wrap.setAttribute('class', 'terminus-wrapper terminus-wrapper-height');\n    viewer.appendChild(wrap);\n    var cont = document.createElement('div');\n    cont.setAttribute('class', 'container-fluid');\n    wrap.appendChild(cont);\n    var row = document.createElement('div');\n    row.setAttribute('class', 'row-fluid');\n    cont.appendChild(row);\n    var body = document.createElement('div');\n    body.setAttribute('class', 'terminus-module-body');\n    row.appendChild(body);\n    var api = document.createElement('div');\n    api.setAttribute('class', 'terminus-module-body terminus-module-body-white-bg terminus-module-body-width');\n    body.appendChild(api);\n    // body\n    var cont = document.createElement('div');\n    var self = this;\n    switch(view){\n        case 'connect':\n            var apiCont = self.getConnectExplorer(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'create':\n            var apiCont = self.getDatabaseExplorer(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'schema':\n            var apiCont = self.getSchemaApi(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'document':\n            var apiCont = self.getDocumentApi(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'query':\n            var apiCont = self.getQueryApi(cont);\n            api.appendChild(apiCont);\n        break;\n    }// switch(api)\n    return wrap;\n} // getApiExplorerDom\n\n// on trigger of click event - change dom\nApiExplorer.prototype.changeSubApiDom = function(curSubMenu, action, cont, body){\n    HTMLHelper.removeChildren(body);\n    switch(curSubMenu){\n        case 'database':\n            var dom = this.getDatabaseDom(action, body);\n        break;\n        case 'schema':  // getShowApiDom() deals with schema and document\n             var dom = this.getShowApiDom(action, body);\n        break;\n        case 'document': // getShowApiDom() deals with schema and document\n             var dom = this.getShowApiDom(action, body);\n        break;\n        case 'query':\n            var dom = this.getQueryApiDom(action, body);\n        break;\n        default:\n            console.log('Invalid Api Config');\n        break;\n    }\n    cont.appendChild(dom);\n}\n\nApiExplorer.prototype.subNavOnSelect = function(curSubMenu, subMenuConfig, subNav, cont, body){\n    UTILS.setSelectedSubMenu(subNav);\n    this.changeSubApiDom(curSubMenu, subMenuConfig.action, cont, body);\n}\n\n// create sub nav bars\nApiExplorer.prototype.createSubNavs = function(curSubMenu, subMenuConfig, cont, body, ul){\n    // comment getclassframes for api explorer time being\n    if(subMenuConfig.action == 'getClassFrames') return;\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    if(subMenuConfig.defaultSelected) a.classList.add('terminus-submenu-selected');\n    var self = this;\n    a.addEventListener(\"click\", function() {\n        self.subNavOnSelect(curSubMenu, subMenuConfig, this, cont, body);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-' + subMenuConfig.icon);\n    a.appendChild(icon);\n    var txt = document.createTextNode(subMenuConfig.navText);\n    a.appendChild(txt);\n    ul.appendChild(a);\n}\n\n// get connect to server api calls - on click of connectAPI nav bar\nApiExplorer.prototype.getConnectExplorer = function(body){\n    var self = this;\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // get signature\n    var b = this.getSignature('connect');\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    //form to get server url\n    this.getForm( '', body, true, 'connect', 'URL : server_url');\n    //body.appendChild(form);\n    return body;\n} // getConnectExplorer\n\n// get database api calls - on click of databaseAPI nav bar - submenus of database Api defined here\nApiExplorer.prototype.getDatabaseExplorer = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.database){\n        if (apiNavConfig.subNav.database.hasOwnProperty(key))\n            this.createSubNavs('database', apiNavConfig.subNav.database[key], cont, body, ul);\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    // landing page\n    var dom = this.getDatabaseDom(apiNavConfig.subNav.database.createDatabase.action, body);\n    cont.appendChild(dom);\n    return cont;\n} // getDatabaseExplorer\n\n// get schema api calls - on click of SchemaAPI nav bar - submenus of schema Api defined here\nApiExplorer.prototype.getSchemaApi = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.schema){\n        if (apiNavConfig.subNav.schema.hasOwnProperty(key)) {\n            this.createSubNavs('schema', apiNavConfig.subNav.schema[key], cont, body, ul);\n        }\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    var dom = this.getShowApiDom(apiNavConfig.subNav.schema.getSchema.action, body);\n    cont.appendChild(dom);\n    return cont;\n} // getSchemaApi\n\n// get document api calls - on click of DocumentAPI nav bar\nApiExplorer.prototype.getDocumentApi = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.document){\n        if (apiNavConfig.subNav.document.hasOwnProperty(key)) {\n            this.createSubNavs('document', apiNavConfig.subNav.document[key], cont, body, ul);\n        }\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    var dom = this.getShowApiDom(apiNavConfig.subNav.document.viewDocument.action, body);\n    cont.appendChild(dom);\n    return cont;\n} // getDocumentApi\n\n// get query api calls - on click of QueryAPI nav bar - submenus of Query Api defined here\nApiExplorer.prototype.getQueryApi  = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.query){\n        if (apiNavConfig.subNav.query.hasOwnProperty(key)) {\n            this.createSubNavs('query', apiNavConfig.subNav.query[key], cont, body, ul);\n        }\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    var dom = this.getQueryApiDom(apiNavConfig.subNav.query.select.action, body);\n    cont.appendChild(dom);\n    return cont;\n} //getQueryApi\n\n/***** Api Content view  *****/\n// get database dom\nApiExplorer.prototype.getDatabaseDom = function(mode, body){\n    var self = this;\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // get signature\n    var b = this.getSignature(mode);\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    //form to get database id\n    if(mode == 'create') this.getForm( null, body, false, mode, 'URL : server/database_id');\n    else this.getForm( null, body, true, mode, 'URL : server/database_id');\n    return body;\n} // getConnectExplorer\n\n//get create & delete db form\nApiExplorer.prototype.getServerForm = function(){\n  // form\n  var form = document.createElement('form');\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var inpLabel = document.createElement('label');\n  inpLabel.setAttribute('class', 'terminus-control-label');\n  inpLabel.setAttribute('for', 'basicinput');\n  inpLabel.innerHTML = 'Url:';\n  fd.appendChild(inpLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var inpId = document.createElement('input');\n  inpId.setAttribute('type', 'text');\n  inpId.setAttribute('id', 'basicinput');\n  inpId.setAttribute('class', 'terminus-input-text');\n  inpId.setAttribute('placeholder', 'URL : server_url');\n  if(this.val) inpId.value = this.val;\n  cd.appendChild(inpId);\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var keyLabel = document.createElement('label');\n  keyLabel.setAttribute('class', 'terminus-control-label');\n  keyLabel.setAttribute('for', 'basicinput');\n  keyLabel.innerHTML = 'Key:';\n  fd.appendChild(keyLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var key = document.createElement('input');\n  key.setAttribute('type', 'text');\n  key.setAttribute('id', 'basicinput');\n  key.setAttribute('class', 'span8 terminus-input-text');\n  key.setAttribute('placeholder', 'Key : key');\n  if(this.val) key.value = this.val;\n  cd.appendChild(key);\n\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n  button.setAttribute('type', 'button');\n  button.innerHTML = 'Send Api';\n  var gatherips = function(){\n    var input = {};\n    input.url = inpId.value;\n    input.key = key.value;\n    return input;\n  }\n  var resd = document.createElement('div');\n  form.appendChild(button);\n  form.appendChild(resd);\n  var self = this;\n  button.addEventListener(\"click\", function(){\n    var buttonSelf = this;\n    //opts = {};\n    var input = gatherips();\n    self.client.connect(input.url, input.key)\n    .then(function(response){\n      HTMLHelper.removeChildren(resd);\n      var resultDom = UTILS.showHttpResult(response, 'connect', resd, self.ui);\n    });\n  }) // button click\n  return form;\n} // getServerForm()\n\n// get database api calls - on click of databaseAPI nav bar - submenus of database Api defined here\nApiExplorer.prototype.getDatabaseExplorer = function(cont){\n  var body = document.createElement('div');\n  // list view of Databse tools\n  var ul = document.createElement('ul');\n  ul.setAttribute('class','terminus-ul-horizontal');\n  // loop over apiNavConfig\n  for (var key in apiNavConfig.subNav.database){\n      if (apiNavConfig.subNav.database.hasOwnProperty(key)) {\n          this.createSubNavs('database', apiNavConfig.subNav.database[key], cont, body, ul);\n      }\n  } // for apiNavConfig\n  cont.appendChild(ul);\n  // landing page\n  var dom = this.getDatabaseDom(apiNavConfig.subNav.database.createDatabase.action, body);\n  cont.appendChild(dom);\n  return cont;\n} // getDatabaseExplorer\n\n\n// get schema & document dom\nApiExplorer.prototype.getShowApiDom = function(action, body){\n    var self = this;\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // signature\n    var b = this.getSignature(action);\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // get input\n    switch(action){\n        case 'getSchema':\n            this.getForm( 'schema', body, true, action, 'URL : server/database_id');\n        break;\n        case 'getClassFrames':\n            this.getForm( 'getClassFrames', body, true, action, 'URL : server/database_id');\n        break;\n        case 'updateSchema':\n            this.getForm( 'schema', body, false, action, 'URL : server/database_id');\n        break;\n        case 'viewDocument':\n            this.getForm('document', body, true, action, 'URL : server/database_id/document/document_id');\n        break;\n        case 'deleteDocument':\n            this.getForm('document', body, true, action, 'URL : server/database_id/document/document_id');\n        break;\n        case 'createDocument':\n            this.getForm('document', body, false, action, 'URL : server/database_id/document/document_id');\n        break;\n        case 'updateDocument':\n            this.getForm('document', body, false, action, 'URL : server/database_id/document/document_id');\n        break;\n        default:\n            console.log('Invalid Api Call on form');\n        break;\n   }// switch(action)\n\n   return body;\n } // getShowApiDom()\n\n// get query api dom\nApiExplorer.prototype.getQueryApiDom = function(action, body){\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // signature\n    var b = this.getSignature(action);\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    this.getForm( 'query', body, false, action, 'URL : server/database_id');\n    return body;\n} // getQueryApiDom\n\n/*ApiExplorer.prototype.getClassFramesForm = function(){\n    // form\n    var form = document.createElement('form');\n    form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var inpLabel = document.createElement('label');\n    inpLabel.setAttribute('class', 'terminus-control-label');\n    inpLabel.setAttribute('for', 'basicinput');\n    inpLabel.innerHTML = 'Url:';\n    fd.appendChild(inpLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpUrl = document.createElement('input');\n    inpUrl.setAttribute('type', 'text');\n    inpUrl.setAttribute('id', 'basicinput');\n    inpUrl.setAttribute('class', 'span8 terminus-input-text');\n    inpUrl.setAttribute('placeholder', 'URL : database_url');\n    if(this.val) inpUrl.value = this.val;\n    cd.appendChild(inpUrl);\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var inpLabel = document.createElement('label');\n    inpLabel.setAttribute('class', 'terminus-control-label');\n    inpLabel.setAttribute('for', 'basicinput');\n    inpLabel.innerHTML = 'Url/ ID:';\n    fd.appendChild(inpLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpDocUrl = document.createElement('input');\n    inpDocUrl.setAttribute('type', 'text');\n    inpDocUrl.setAttribute('id', 'basicinput');\n    inpDocUrl.setAttribute('class', 'span8 terminus-input-text');\n    inpDocUrl.setAttribute('placeholder', 'Url or ID of document class');\n    cd.appendChild(inpDocUrl);\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var optLabel = document.createElement('label');\n    optLabel.setAttribute('class', 'terminus-control-label');\n    optLabel.setAttribute('for', 'basicinput');\n    optLabel.innerHTML = 'Options:';\n    fd.appendChild(optLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var optInp = document.createElement('input');\n    optInp.setAttribute('type', 'text');\n    optInp.setAttribute('id', 'basicinput');\n    optInp.setAttribute('class', 'span8 terminus-input-text');\n    optInp.setAttribute('placeholder', 'options');\n    cd.appendChild(optInp);\n    var button = document.createElement('button');\n    button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n    button.setAttribute('type', 'button');\n    button.innerHTML = 'Send Api';\n    var gatherips = function(){\n        var input = {};\n        input.url = inpUrl.value;\n        input.docUrl = inpDocUrl.value;\n        input.options = optInp.value;\n        return input;\n    }\n    var self = this;\n    button.addEventListener(\"click\", function(form){\n      var input = gatherips();\n      var buttonSelf = this;\n      opts = {};\n      opts.explorer = true;\n      self.client.getClassFrame(input.url, input.docUrl, opts)\n      .then(function(response){\n          var currForm = buttonSelf.parentNode;\n          var resultDom = UTILS.showHttpResult(response, 'getClassFrames', currForm, self.ui);\n      });\n    }) // button click\n    form.appendChild(button);\n    return form;\n}   */\n\n// get form for all Apis\nApiExplorer.prototype.getForm = function(curApi, body, view, action, urlPlaceholder){\n    // form\n    var formDoc = document.createElement('form');\n    formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    formDoc.appendChild(fd);\n    var urlLabel = document.createElement('label');\n    urlLabel.setAttribute('class', 'terminus-control-label');\n    urlLabel.setAttribute('for', 'basicinput');\n    urlLabel.innerHTML = 'Url:';\n    fd.appendChild(urlLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpUrl = document.createElement('input');\n    inpUrl.setAttribute('type', 'text');\n    inpUrl.setAttribute('id', 'basicinput');\n    inpUrl.setAttribute('class', 'span8 terminus-input-text');\n    inpUrl.setAttribute('placeholder', urlPlaceholder);\n    cd.appendChild(inpUrl);\n    // add extra form fields based on current api chosen\n    switch(curApi){\n        case 'getClassFrames':\n            var fd = document.createElement('div');\n            fd.setAttribute('class', 'terminus-control-group');\n            formDoc.appendChild(fd);\n            var docUrlLabel = document.createElement('label');\n            docUrlLabel.setAttribute('class', 'terminus-control-label');\n            docUrlLabel.setAttribute('for', 'basicinput');\n            docUrlLabel.innerHTML = 'Url/ ID:';\n            fd.appendChild(docUrlLabel);\n            var cd = document.createElement('div');\n            cd.setAttribute('class', 'terminus-controls');\n            fd.appendChild(cd);\n            var inpDocUrl = document.createElement('input');\n            inpDocUrl.setAttribute('type', 'text');\n            inpDocUrl.setAttribute('id', 'basicinput');\n            inpDocUrl.setAttribute('class', 'span8 terminus-input-text');\n            inpDocUrl.setAttribute('placeholder', 'Url or ID of document class');\n            cd.appendChild(inpDocUrl);\n        break;\n        case 'schema':\n            //encoding\n           /* var fd = document.createElement('div');\n            fd.setAttribute('class', 'terminus-control-group');\n            formDoc.appendChild(fd);\n            var encLabel = document.createElement('label');\n            encLabel.setAttribute('class', 'terminus-control-label');\n            encLabel.setAttribute('for', 'basicinput');\n            encLabel.innerHTML = 'Encoding:';\n            fd.appendChild(encLabel);\n            var cd = document.createElement('div');\n            cd.setAttribute('class', 'terminus-controls');\n            fd.appendChild(cd);\n            var inpEnc = document.createElement('select');\n            inpEnc.setAttribute('style', 'height: 50px;width: 300px;padding: 10px;');\n            inpEnc.setAttribute('placeholder', 'turtle');\n            var optTurt = document.createElement('option');\n            optTurt.setAttribute('value', 'terminus:turtle');\n            optTurt.appendChild(document.createTextNode('turtle'));\n            inpEnc.appendChild(optTurt);\n            var optJld = document.createElement('option');\n            optJld.setAttribute('value', 'terminus:jsonld');\n            optJld.appendChild(document.createTextNode('jsonLD'));\n            inpEnc.appendChild(optJld);\n            cd.appendChild(inpEnc); */\n        break;\n    }\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    formDoc.appendChild(fd);\n    var keyLabel = document.createElement('label');\n    keyLabel.setAttribute('class', 'terminus-control-label');\n    keyLabel.setAttribute('for', 'basicinput');\n    keyLabel.innerHTML = 'Key:';\n    fd.appendChild(keyLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpKey = document.createElement('input');\n    inpKey.setAttribute('type', 'text');\n    inpKey.setAttribute('id', 'basicinput');\n    inpKey.setAttribute('class', 'span8 terminus-input-text');\n    inpKey.setAttribute('placeholder', 'Key');\n    cd.appendChild(inpKey);\n    if(!view){\n        // include text area only if call is type post\n        var fd = document.createElement('div');\n        fd.setAttribute('class', 'terminus-control-group');\n        formDoc.appendChild(fd);\n        var docLabel = document.createElement('label');\n        docLabel.setAttribute('class', 'terminus-control-label');\n        docLabel.setAttribute('for', 'basicinput');\n        if(curApi == 'query') docLabel.innerHTML = 'Query:';\n        docLabel.innerHTML = 'Document:';\n        fd.appendChild(docLabel);\n        var cd = document.createElement('div');\n        cd.setAttribute('class', 'terminus-controls');\n        fd.appendChild(cd);\n        var inpDoc = document.createElement('textarea');\n        cd.appendChild(inpDoc);\n        inpDoc.setAttribute('class', 'terminus-api-explorer-text-area');\n        UTILS.stylizeEditor(this.ui, inpDoc, 'api-doc', 'javascript');\n    }\n    body.appendChild(formDoc);\n    // gather inputs\n    var inp ={};\n    inp.url = inpUrl;\n    inp.key = inpKey;\n    if(curApi == 'getClassFrames') inp.docUrl = inpDocUrl;\n    //if(curApi == 'schema') inp.enc = inpEnc;\n    if(!view) inp.doc = inpDoc;\n    var form = this.getApiSendButton(action, inp);\n    body.appendChild(form);\n}\n\n// define event listeners on send api of schema & documents\n\nApiExplorer.prototype.getApiForm = function(action, input){\n  // form\n  var form = document.createElement('form');\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n  button.setAttribute('type', 'button');\n  button.innerHTML = 'Send Api';\n  form.appendChild(button);\n  var resd = document.createElement('div');\n  form.appendChild(resd);\n  var self = this;\n  switch(action){\n    case 'getSchema':\n      button.addEventListener(\"click\", function(){\n        var opts = {};\n        opts['terminus:encoding'] = input.enc.value;\n        opts['terminus:user_key'] = 'terminus:turtle';\n        var schurl = input.url.value;\n        var buttonSelf = this;\n        self.client.getSchema(schurl, opts)\n        .then(function(response){\n          HTMLHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, 'getSchema', resd, self.ui);\n        });\n      }) // button click\n    break;\n    case 'updateSchema':\n      button.addEventListener(\"click\", function(){\n        var buttonSelf = this;\n        opts = {};\n        opts['terminus:encoding'] = input.enc.value;\n        opts['terminus:user_key'] = 'terminus:turtle';\n        var schurl = input.url.value;\n        self.client.connectionConfig.connected_mode = false;\n        self.client.updateSchema(schurl, input.doc.value, opts)\n        .then(function(response){\n          var gtxtar = document.createElement('textarea');\n          gtxtar.setAttribute('readonly', true);\n          gtxtar.innerHTML = response;\n          var currForm = buttonSelf.parentNode;\n          currForm.appendChild(gtxtar);\n          UTILS.stylizeEditor(this.ui, txtar, 'schema', 'turtle');\n        });\n      }) // button click\n    break;\n    case 'viewDocument':\n      button.addEventListener(\"click\", function(){\n      var dcurl = input.value;\n      var buttonSelf = this;\n      var opts = {};\n      opts.format = 'turtle';\n      self.client.getDocument(dcurl, opts)\n      .then(function(response){\n        HTMLHelper.removeChildren(resd);\n        var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n      });\n    }) // button click\n    break;\n    case 'deleteDocument':\n      button.addEventListener(\"click\", function(){\n      var dcurl = input.value;\n      var buttonSelf = this;\n      var opts = {};\n      self.client.deleteDocument(dcurl, opts)\n      .then(function(response){\n        HTMLHelper.removeChildren(resd);\n        var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n      });\n    }) // button click\n    break;\n    case 'createDocument':\n      button.addEventListener(\"click\", function(){\n        var dcurl = input.schemaUrlDom.value;\n        var payload = input.htmlEditor.getValue();\n        var buttonSelf = this;\n        opts = {};\n        self.client.createDocument(dcurl, payload, opts)\n        .then(function(response){\n          HTMLHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n        });\n      }) // button click\n    break;\n    case 'updateDocument':\n      button.addEventListener(\"click\", function(){\n        var dcurl = input.schemaUrlDom.value;\n        var payload = input.htmlEditor.getValue();\n        var buttonSelf = this;\n        opts = {};\n        opts.editmode = 'replace';\n        opts.format = 'json';\n        self.client.updateDocument(dcurl, payload, opts)\n        .then(function(response){\n          HTMLHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n        });\n      }) // button click\n    break;\n  } // switch(action)\n\n  var br = document.createElement('BR');\n  form.appendChild(br);\n  var br = document.createElement('BR');\n  form.appendChild(br);\n\n  return form;\n} // getApiForm()\n\n\n// define event listeners on send api of schema & documents\nApiExplorer.prototype.getApiSendButton = function(action, input){\n    // form\n    var form = document.createElement('form');\n    form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n    var button = document.createElement('button');\n    button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n    button.setAttribute('type', 'button');\n    button.innerHTML = 'Send Api';\n    form.appendChild(button);\n    var resd = document.createElement('div');\n    form.appendChild(resd);\n    var self = this;\n    switch(action){\n        case 'connect':\n            button.addEventListener(\"click\", function(){\n                self.client.connect(input.url.value, input.key.value)\n                .then(function(response){\n                \tHTMLHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n               });\n            }) // button click\n        break;\n        case 'create':\n            button.addEventListener(\"click\", function(form){\n              self.client.createDatabase(input.url.value, JSON.parse(input.doc.value), input.key.value)\n              .then(function(response){\n            \t  HTMLHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n            }) // button click\n        break;\n        case 'delete':\n            button.addEventListener(\"click\", function(){\n              var opts ={}\n              self.client.deleteDatabase(input.url.value, input.key.value)\n              .then(function(response){\n            \t  HTMLHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n            }) // button click\n        break\n        case 'getSchema':\n            button.addEventListener(\"click\", function(){\n                var opts = {};\n                opts['terminus:encoding'] = 'terminus:turtle';\n                opts['terminus:user_key'] = input.key.value;\n                var schurl = input.url.value;\n                self.client.getSchema(schurl, opts)\n                .then(function(response){\n                \tHTMLHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n                });\n            }) // button click\n        break;\n        case 'updateSchema':\n            button.addEventListener(\"click\", function(){\n                opts = {};\n                opts['terminus:encoding'] = 'terminus:turtle';\n                opts['terminus:user_key'] = input.key.value;\n                var payload = input.doc.value;\n                var schurl = input.url.value;\n                self.client.connectionConfig.connected_mode = false;\n                self.client.updateSchema(schurl, input.doc.value, opts)\n                //self.client.updateSchema(schurl, input.doc.value, opts)\n                .then(function(response){\n                \tHTMLHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n                });\n            }) // button click\n        break;\n        case 'getClassFrames':\n            button.addEventListener(\"click\", function(form){\n                var schurl = input.url.value;\n                opts = {};\n                opts.explorer = true;\n                self.client.getClassFrame(input.url, JSON.parse(input.docUrl.value), opts)\n                .then(function(response){\n                    var currForm = buttonSelf.parentNode;\n                    var resultDom = UTILS.showHttpResult(response, action, currForm, self.ui);\n                });\n            }) // button click\n        break;\n        case 'viewDocument':\n          button.addEventListener(\"click\", function(){\n              var dcurl = input.url.value;\n              var opts = {};\n              opts['terminus:encoding'] = \"jsonld\";\n              opts['terminus:user_key'] = input.key.value;\n              self.client.getDocument(dcurl, opts)\n              .then(function(response){\n            \t    HTMLHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n        }) // button click\n        break;\n        case 'deleteDocument':\n          button.addEventListener(\"click\", function(){\n              var dcurl = input.url.value;\n              var opts = {};\n              opts.key = input.key.value;\n              self.client.deleteDocument(dcurl, opts)\n              .then(function(response){\n            \t  HTMLHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n          }) // button click\n        break;\n        case 'createDocument':\n          button.addEventListener(\"click\", function(){\n              var dcurl = input.url.value;\n              var payload = input.doc.value;\n              opts = {};\n              opts['terminus:encoding'] = \"jsonld\";\n              opts['terminus:user_key'] = input.key.value;\n              self.client.createDocument(dcurl, JSON.parse(payload), opts)\n              .then(function(response){\n            \t   HTMLHelper.removeChildren(resd);\n                   var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n               });\n          }) // button click\n        break;\n        case 'updateDocument':\n          button.addEventListener(\"click\", function(){\n            var dcurl = input.url.value;\n            var payload = input.doc.value;\n            var buttonSelf = this;\n            opts = {};\n            opts['terminus:encoding'] = \"jsonld\";\n            opts['terminus:user_key'] = input.key.value;\n            self.client.updateDocument(dcurl, JSON.parse(payload), opts)\n            .then(function(response){\n            \tHTMLHelper.removeChildren(resd);\n                var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n            });\n          }) // button click\n        break;\n        case 'select':\n            button.addEventListener(\"click\", function(){\n                var opts = {};\n                opts.key = input.key.value;\n                var doc = JSON.parse(input.doc.value);\n                self.client.select(input.url.value, doc, opts)\n                .then(function(response){\n                \tHTMLHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n                });\n            }) // button click\n        break;\n        case 'update':\n            button.addEventListener(\"click\", function(){\n              var opts = {};\n              opts.key = input.key.value;\n              var doc = JSON.parse(input.doc.value);\n              self.client.update(input.url.value, doc, opts)\n              .then(function(response){\n            \t  HTMLHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n            }) // button click\n        break;\n        default:\n            console.log('Invalid Api call on button');\n        break;\n    } // switch(action)\n    var br = document.createElement('BR');\n    form.appendChild(br);\n    var br = document.createElement('BR');\n    form.appendChild(br);\n    return form;\n} // getApiSendButton()\n\n// get signature of api calls\nApiExplorer.prototype.getSignature = function(action){\n    var api = document.createElement('div');\n    // get header signature\n    var sg = document.createElement('button');\n    sg.appendChild(document.createTextNode('Click to read API Signature'));\n    sg.setAttribute('class', 'terminus-collapsible');\n    ic = document.createElement('i');\n    ic.setAttribute('class', 'terminus-cheveron-float fa fa-chevron-down');\n    sg.appendChild(ic);\n    api.appendChild(sg);\n    var br = document.createElement('BR');\n    api.appendChild(br);\n    var cl = document.createElement('div');\n    cl.setAttribute('class', 'terminus-collapsible-content content');\n    var sig = UTILS.getFunctionSignature(action);\n    var txt = document.createTextNode(sig.spec);\n    var pre = document.createElement('pre');\n    pre.setAttribute('class', 'terminus-api-signature-pre');\n    pre.appendChild(txt);\n    var txt =  document.createTextNode(sig.descr);\n    pre.appendChild(txt);\n    var br = document.createElement('BR');\n    pre.appendChild(br);\n    var br = document.createElement('BR');\n    pre.appendChild(br);\n    var txt = document.createTextNode(sig.result);\n    pre.appendChild(txt);\n    cl.appendChild(pre);\n    api.appendChild(cl);\n    var br = document.createElement('BR');\n    api.appendChild(br);\n    sg.addEventListener('click', function(){\n        UTILS.tolggleContent(ic, cl);\n    });\n    return api;\n} // getSignature()\n\n// displays signature only on click\nfunction tolggleSignatureContent(content){\n    if (content.style.display === \"block\")\n        content.style.display = \"none\";\n    else content.style.display = \"block\";\n}\n\nmodule.exports=ApiExplorer\n","\nconst CONST = require('./const');\nconst DispatchRequest = require('./dispatchRequest');\nconst ErrorMessage = require('./errorMessage');\nconst ConnectionCapabilities = require('./connectionCapabilities');\nconst ConnectionConfig = require('./connectionConfig');\nconst UTILS = require('./utils.js');\n\n/**\n * @file Javascript WOQL client object\n * @license Apache Version 2\n * @summary Simple Javascript Client for accessing the Terminus DB API\n */\n\n/**\n  * @param {Object} params\n  */\nfunction WOQLClient(params) {\n\t// current connection context variables\n\tconst key = params ? params.key : undefined;\n\tthis.use_fetch = false;\n\tthis.return_full_response = false;\n\tthis.connectionConfig = new ConnectionConfig(params);\n\tthis.connection = new ConnectionCapabilities(this.connectionConfig, key);\n}\n\nWOQLClient.CONST = CONST;\n\n/**\n * Connect to a Terminus server at the given URI with an API key\n * Stores the terminus:ServerCapability document returned\n * in the connection register which stores, the url, key, capabilities,\n * and database meta-data for the connected server\n *\n * If the curl argument is false or null,\n * this.connectionConfig.server will be used if present,\n * or the promise will be rejected.\n\n * @param  {string} curl Terminus server URI\n * @param  {string} API  key\n * @return {Promise}\n * @public\n */\nWOQLClient.prototype.connect = function (curl, key) {\n\tif (curl && !this.connectionConfig.setServer(curl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(curl, CONST.CONNECT))\n\t\t);\n\t}\n\tconst serverURL = this.connectionConfig.serverURL();\n\tif (key) {\n\t\tthis.connection.setClientKey(serverURL, key);\n\t}\n\t// unset the current server setting until successful connect\n\tthis.connectionConfig.server = false;\n\tconst self = this;\n\treturn this.dispatch(serverURL, CONST.CONNECT).then((response) => {\n\t\tself.connectionConfig.server = serverURL;\n\t\tself.connection.addConnection(serverURL, response);\n\t\treturn response;\n\t});\n};\n\n/**\n * Create a Terminus Database by posting\n * a terminus:Database document to the Terminus API\n *\n * The dburl argument can be\n *    1) a valid URL of a terminus database or\n *    2) a valid Terminus database id or\n *    3) can be omitted\n * \t\tin case 2) the current server will be used,\n * \t\tin case 3) the database id will be set from the @id field of the terminuse:Database document.\n *\n * The second (details) argument contains a terminus:Database document\n * with a mandatory rdfs:label field and an optional rdfs:comment field.\n * The third (key) argument contains an optional API key\n *\n * @param {string} dburl Terminus server URI or a TerminusID\n * @param {object} details\n * @param {string} key\n * @return {Promise}\n * @public\n */\nWOQLClient.prototype.createDatabase = function (dburl, details, key) {\n\tif (dburl && !this.connectionConfig.setDB(dburl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(dburl, 'Create Database'))\n\t\t);\n\t}\n\tif (\n\t\tdetails\n    && details['@id']\n    && !this.connectionConfig.setDB(details['@id'], details['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(details['@id'], 'Create Database'))\n\t\t);\n\t}\n\tdetails = this.makeDocumentConsistentWithURL(details, this.connectionConfig.dbURL());\n\n\tconst opts = {};\n\tif (key) {\n\t\topts.key = key;\n\t}\n\tconst doc = this.addOptionsToDocument(details, opts);\n\treturn this.dispatch(this.connectionConfig.dbURL('create'), CONST.CREATE_DATABASE, doc);\n};\n\n/**\n * Delete a Database\n * @param {String} dburl it is a terminusDB Url or a terminusDB Id\n * @param {String} key an optional API key\n * @return {Promise}\n *\n * if dburl is omitted, the current server and database will be used\n */\nWOQLClient.prototype.deleteDatabase = function (dburl, key) {\n\tif (dburl && !this.connectionConfig.setDB(dburl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(dburl, 'Delete Database'))\n\t\t);\n\t}\n\tconst opts = {};\n\n\tif (key) {\n\t\topts.key = key;\n\t}\n\n\tconst self = this;\n\treturn this.dispatch(`${this.connectionConfig.dbURL()}`, CONST.DELETE_DATABASE, opts).then(\n\t\t(response) => {\n\t\t\tself.connection.removeDB();\n\t\t\treturn response;\n\t\t}\n\t);\n};\n\n/**\n * Retrieves the schema of the specified database\n *\n * @param {string} schurl TerminusDB server URL or a valid TerminusDB Id or omitted\n * @param {object} opts is an options object\n * @return {Promise}\n *\n * opts.format is optional and defines which format is requested (*json / turtle)\n * opts.key is an optional API key\n */\nWOQLClient.prototype.getSchema = function (schurl, opts) {\n\tif (schurl && !this.connectionConfig.setSchemaURL(schurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(schurl, 'Get Schema'))\n\t\t);\n\t}\n\t// consoleco.log('schemaURL', this.connectionConfig.schemaURL());\n\treturn this.dispatch(this.connectionConfig.schemaURL(), CONST.GET_SCHEMA, opts);\n};\n\n/**\n * Updates the Schema of the specified database\n *\n * @param {string} schurl TerminusDB server URL or a valid TerminusDB Id or omitted\n * @param {object} doc is a valid owl ontology in json-ld or turtle format\n * @param {object} opts is an options object\n * @return {Promise}\n *\n * if omitted the current server and database will be used\n * opts.format is used to specify which format is being used (*json / turtle)\n * opts.key is an optional API key\n */\nWOQLClient.prototype.updateSchema = function (schurl, doc, opts) {\n\tif (schurl && !this.connectionConfig.setSchemaURL(schurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(schurl, 'Update Schema'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(doc, opts);\n\treturn this.dispatch(this.connectionConfig.schemaURL(), 'update_schema', doc);\n};\n\n/**\n * Creates a new document in the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus database (an id will be randomly assigned) or\n * 2) a valid URL or of a terminus document (the document will be given the passed URL) or\n * 3) a valid terminus document id (the current server and database will be used)\n * 4) can be omitted (the URL will be taken from the document if present)\n * The second argument (doc) is a valid document in json-ld\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.createDocument = function (docurl, doc, opts) {\n\tif (docurl && !this.connectionConfig.setDocument(docurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Create Document'))\n\t\t);\n\t} if (\n\t\tdoc\n    && doc['@id']\n    && !this.connectionConfig.setDocument(doc['@id'], doc['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(doc['@id'], 'Create Document'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(\n\t\tthis.makeDocumentConsistentWithURL(doc, this.connectionConfig.docURL()),\n\t\topts\n\t);\n\treturn this.dispatch(this.connectionConfig.docURL(), 'create_document', doc);\n};\n\n/**\n * Retrieves a document from the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database\n * the second argument (opts) is an options json -\n * \t\topts.key is an optional API key\n * \t\topts.shape is frame | *document\n */\nWOQLClient.prototype.getDocument = function (docurl, opts) {\n\tif (docurl && (!this.connectionConfig.setDocument(docurl) || !this.connectionConfig.docid)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Get Document'))\n\t\t);\n\t}\n\treturn this.dispatch(this.connectionConfig.docURL(), 'get_document', opts);\n};\n\n/**\n * Updates a document in the specified database with a new version\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database or\n * 3) omitted in which case the id will be taken from the document @id field\n * the second argument (doc) is a document in json-ld format\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.updateDocument = function (docurl, doc, opts) {\n\tif (docurl && !this.connectionConfig.setDocument(docurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Update Document'))\n\t\t);\n\t}\n\tif (doc && doc['@id']\n    && !this.connectionConfig.setDocument(doc['@id'], doc['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(doc['@id'], 'Update Document'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(\n\t\tthis.makeDocumentConsistentWithURL(doc, this.connectionConfig.docURL()),\n\t\topts\n\t);\n\treturn this.dispatch(this.connectionConfig.docURL(), 'update_document', doc);\n};\n\n/**\n * Deletes a document from the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database\n * 3) omitted - the current document will be used\n * the second argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.deleteDocument = function (docurl, opts) {\n\tif (docurl && (!this.connectionConfig.setDocument(docurl) || !this.connectionConfig.docid)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Delete Document'))\n\t\t);\n\t}\n\treturn this.dispatch(this.connectionConfig.docURL(), 'delete_document', opts);\n};\n\n/**\n * Executes a read-only WOQL query on the specified database and returns the results\n *\n * @param {string} qurl TerminusDB server URL or omitted (the current DB will be used)\n * @param {string} woql is a \"woql query select statement\"\n * @param {object} opts it can contents the API key (opts.key)\n *\n */\nWOQLClient.prototype.select = function (qurl, woql, opts) {\n\tif (qurl && !this.connectionConfig.setQueryURL(qurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(qurl, 'Select'))\n\t\t);\n\t}\n\tlet q = { 'terminus:query': JSON.stringify(woql) };\n\tq = this.addOptionsToWOQL(q, opts);\n\treturn this.dispatch(this.connectionConfig.queryURL(), CONST.WOQL_SELECT, q);\n};\n\n/**\n * Executes a WOQL query on the specified database which updates the state and returns the results\n *\n * The first (qurl) argument can be\n * 1) a valid URL of a terminus database or\n * 2) omitted - the current database will be used\n * the second argument (woql) is a woql select statement encoded as a string\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.update = function (qurl, woql, opts) {\n\tif (qurl && !this.connectionConfig.setQueryURL(qurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(qurl, 'Update'))\n\t\t);\n\t}\n\twoql = this.addOptionsToWOQL(woql, opts);\n\treturn this.dispatch(this.connectionConfig.queryURL(), 'woql_update', woql);\n};\n\n/**\n * Retrieves a WOQL query on the specified database which updates the state and returns the results\n *\n * The first (cfurl) argument can be\n * 1) a valid URL of a terminus database or\n * 2) omitted - the current database will be used\n * the second argument (cls) is the URL / ID of a document class that exists in the database schema\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.getClassFrame = function (cfurl, cls, opts) {\n\tif (cfurl && !this.connectionConfig.setClassFrameURL(cfurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(cfurl, 'Get Class Frame'))\n\t\t);\n\t}\n\tif (!opts) opts = {};\n\topts['terminus:class'] = cls;\n\treturn this.dispatch(this.connectionConfig.frameURL(), 'class_frame', opts);\n};\n\n/*\n * Utility functions for adding standard fields to API arguments\n */\nWOQLClient.prototype.addOptionsToWOQL = function (woql, opts) {\n\tif (opts && opts.key) {\n\t\twoql.key = opts.key;\n\t}\n\treturn woql;\n};\n\nWOQLClient.prototype.addOptionsToDocument = function (doc, opts) {\n\tconst pdoc = {};\n\tpdoc['@context'] = doc['@context'];\n\tif (pdoc['@context'] && doc['@id']) { // add blank node prefix as document base url\n\t\tpdoc['@context']._ = `${doc['@id']}/`;\n\t}\n\tif (opts && opts['terminus:encoding'] && opts['terminus:encoding'] === 'terminus:turtle') {\n\t\tpdoc['terminus:turtle'] = doc;\n\t\tpdoc['terminus:schema'] = this.connectionConfig.schemaURL();\n\t\tdelete pdoc['terminus:turtle']['@context'];\n\t} else {\n\t\tpdoc['terminus:document'] = doc;\n\t\tdelete pdoc['terminus:document']['@context'];\n\t}\n\tpdoc['@type'] = 'terminus:APIUpdate';\n\tif (opts && opts['terminus:user_key']) {\n\t\tpdoc['terminus:user_key'] = opts['terminus:user_key'];\n\t}\n\tif (opts && opts.key) {\n\t\tpdoc['terminus:user_key'] = opts.key;\n\t}\n\treturn pdoc;\n};\n\nWOQLClient.prototype.addKeyToPayload = function (payload, url) {\n\tif (typeof payload !== 'object')payload = {};\n\tif (payload.key) {\n\t\tpayload['terminus:user_key'] = payload.key;\n\t\tdelete payload.key;\n\t} else if (this.connection.getClientKey()) {\n\t\tpayload['terminus:user_key'] = this.connection.getClientKey();\n\t} else if (this.connection.getClientKey(url)) {\n\t\tpayload['terminus:user_key'] = this.connection.getClientKey(url);\n\t}\n\treturn payload;\n};\n\nWOQLClient.prototype.makeDocumentConsistentWithURL = function (doc, dburl) {\n\tdoc['@id'] = dburl;\n\treturn doc;\n};\n\nWOQLClient.prototype.dispatch = function (url, action, payload) {\n\tif (this.connectionConfig.includeKey()) {\n\t\tpayload = this.addKeyToPayload(payload, url);\n\t}\n\tif (this.use_fetch) {\n\t\treturn this.dispatchFetch(url, action, payload);\n\t}\n\treturn DispatchRequest(url, action, payload);\n};\n\n\nWOQLClient.prototype.dispatchFetch = function (url, action, payload) {\n\tconst api = {\n\t\t//mode: 'cors',  no-cors, cors, *same-origin\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrer: 'client', // no-referrer, *client\n\t};\n\tlet hdrs = {};\n\tif (this.connectionConfig.platformEndpoint()) {\n\t\tapi.credentials = 'include'; // include, *same-origin, omit\n\t}\n\tif (payload && payload['terminus:user_key']) {\n\t\thdrs = { Authorization: `Basic ${btoa(`:${payload['terminus:user_key']}`)}` };\n\t\tdelete (payload['terminus:user_key']);\n\t}\n\t// read only API calls - use GET\n\tswitch (action) {\n\tcase CONST.DELETE_DATABASE:\n\tcase CONST.DELETE_DOCUMENT:\n\t\tif (Object.keys(payload).length > 0) url += `?${UTILS.URIEncodePayload(payload)}`;\n\t\tapi.method = 'DELETE';\n\t\tapi.cache = 'no-cache';\n\t\tbreak;\n\tcase CONST.CREATE_DATABASE:\n\tcase CONST.UPDATE_SCHEMA:\n\tcase CONST.CREATE_DOCUMENT:\n\tcase CONST.UPDATE_DOCUMENT:\n\tcase CONST.WOQL_UPDATE:\n\t\tapi.method = 'POST';\n\t\tapi.cache = 'no-cache';\n\t\thdrs['Content-Type'] = 'application/json';\n\t\tapi.body = JSON.stringify(payload);\n\t\tbreak;\n\tcase CONST.GET_SCHEMA:\n\tcase CONST.CONNECT:\n\tcase CONST.CLASS_FRAME:\n\tcase CONST.WOQL_SELECT:\n\tcase CONST.GET_DOCUMENT:\n\tdefault:\n\t\tapi.method = 'GET';\n\t\tif (Object.keys(payload).length > 0) url += `?${UTILS.URIEncodePayload(payload)}`;\n\t}\n\tconst self = this;\n\tif (Object.keys(hdrs).length > 0) {\n\t\tapi.headers = new Headers(hdrs);\n\t}\n\treturn fetch(url, api).then((response) => {\n\t\tif (self.return_full_response) return response;\n\t\tif (response.ok) {\n\t\t\treturn response.json();\n\t\t}\n\t\tself.error = self.parseAPIError(response);\n\t\treturn Promise.reject(new Error(self.getAPIErrorMessage(url, api, self.error)));\n\t});\n};\n\nmodule.exports = WOQLClient;\n","const axios = require('axios');\nconst UTILS = require('./utils.js');\nconst CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n/*\nAccess-Control-Allow-Credentials   true\nAccess-Control-Allow-Headers  X-PINGOTHER, Content-Type\nAccess-Control-Allow-Methods GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS\nAccess-Control-Allow-Origin: http://localhost:3000 // WILD CARD WILL NOT WORK WHEN POSTING\n*/\n\nfunction btoaImplementation(str) {\n\ttry {\n\t\treturn btoa(str);\n\t} catch (err) {\n\t\t// console.log('in buffer')\n\t\treturn Buffer.from(str).toString('base64');\n\t}\n}\n\nfunction DispatchRequest(url, action, payload) {\n\t/*\n\t*CORS is only required when trying to fetch data from a browser,\n\t*as browsers by default will block requests to different origins\n\t*/\n\tconst options = {\n\t\tmode: 'cors', // no-cors, cors, *same-origin\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrer: 'client',\n\t\t// url:url,\n\t\t// no-referrer, *client\n\t};\n\tif (payload && payload['terminus:user_key']) {\n\t\toptions.headers = { Authorization: `Basic ${btoaImplementation(`:${payload['terminus:user_key']}`)}` };\n\t\tdelete (payload['terminus:user_key']);\n\t}\n\n\tswitch (action) {\n\tcase CONST.DELETE_DATABASE:\n\tcase CONST.DELETE_DOCUMENT:\n\t\tif (payload) {\n\t\t\tconst ext = UTILS.URIEncodePayload(payload);\n\t\t\tif (ext) url += `?${ext}`;\n\t\t}\n\t\treturn axios.delete(url, options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n\t\t\t\tthrow new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t});\n\tcase CONST.CREATE_DATABASE:\n\tcase CONST.UPDATE_SCHEMA:\n\tcase CONST.CREATE_DOCUMENT:\n\tcase CONST.UPDATE_DOCUMENT:\n\tcase CONST.WOQL_UPDATE:\n\t\toptions.headers = options.headers ? options.headers : {};\n\t\toptions.headers['Content-Type'] = 'application/json';\n\t\treturn axios.post(url, JSON.stringify(payload), options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n\t\t\t\tconst e = new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t\tif (err.response && err.response.data) e.data = err.response.data;\n\t\t\t\tthrow e;\n\t\t\t});\n\tcase CONST.GET_SCHEMA:\n\tcase CONST.CONNECT:\n\tcase CONST.CLASS_FRAME:\n\tcase CONST.WOQL_SELECT:\n\tcase CONST.GET_DOCUMENT:\n\tdefault:\n\t\tif (payload) {\n\t\t\tconst ext = UTILS.URIEncodePayload(payload);\n\t\t\tif (ext) url += `?${ext}`;\n\t\t}\n\t\treturn axios.get(url, options)\n\t\t\t.then((response => response.data))\n\t\t\t.catch((err) => {\n\t\t\t\tthrow new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t});\n\t}\n}\n\nmodule.exports = DispatchRequest;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\nmodule.exports = function isBuffer (obj) {\n  return obj != null && obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n  config.method = config.method ? config.method.toLowerCase() : 'get';\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","/**\n * Represents a frame for programmatic access to object frame, anywhere within a document\n * Recursive data structure where this.children contains an indexed array of object frames\n * and this.dataframes contains a property indexed array of data frames\n * Every object frame carries a reference to its classframe\n * This gives us instructions as to how to create new frames according to the schema\n * After that it's turtles all the way down.\n * @param cls - ID of the class (URL)\n * @param classframe - an array of frames representing a class\n * @param archetypes list of class frames\n * @param parent parent object\n * @returns\n */\nconst FrameHelper = require('./frameHelper');\nconst FramePattern = require('./framePattern');\n\nfunction ObjectFrame(cls, dataframes, classframes, parent, parentframe) {\n\t// the class of the frame - mandatory\n\tthis.empty();\n\tthis.cls = cls;\n\n\t// array of frames representing the full class frame\n\t// (optional - required to be able to safely add missing properties)\n\tif (classframes && typeof classframes === 'object') {\n\t\tthis.loadClassFrames(classframes);\n\t}\n\tif (dataframes && typeof dataframes === 'object') {\n\t\tthis.originalFrames = dataframes;\n\t\tthis.loadDataFrames(dataframes);\n\t} else {\n\t\tthis.originalFrames = false;\n\t}\n\t// parent object frame\n\tthis.parent = parent;\n\t// original frame used by parent to create me\n\tthis.parentframe = parentframe;\n\t// set to true if this is a newly created document\n\tthis.newDoc = false;\n}\n\n/**\n * Loads class frames for the object's class - the instructions about how to put an object together\n */\nObjectFrame.prototype.loadClassFrames = function (classframes) {\n\tfor (let j = 0; j < classframes.length; j += 1) {\n\t\tif (classframes[j]['@context']) this.jsonld_context = classframes[j]['@context'];\n\n\t\tconst cf = new ClassFrame(classframes[j]);\n\t\tif (cf.isValid()) {\n\t\t\tif(!this.classframes) this.classframes = {};\n\t\t\tif(typeof this.classframes[classframes[j].property] === 'undefined') {\n\t\t\t\tthis.classframes[classframes[j].property] = [];\n\t\t\t}\n\t\t\tthis.classframes[classframes[j].property] = cf;\n\t\t\tif (cf.isObject() && this.properties[classframes[j].property]) {\n\t\t\t\tfor (let i = 0; i < this.properties[classframes[j].property].values.length; i += 1) {\n\t\t\t\t\tthis.properties[classframes[j].property].values[i].loadClassFrames(classframes[j].frame);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n};\n\n/**\n * Does this object have a schema loaded?\n */\nObjectFrame.prototype.hasSchema = function () {\n\treturn !FrameHelper.empty(this.classframes);\n};\n\n/*\n * Loads an array of data frames into the object's internal index\n * {property: [frames]}\n */\nObjectFrame.prototype.loadDataFrames = function (frames) {\n\tif (typeof frames !== 'object' || !frames.length) return undefined;\n\tif (!this.originalFrames) this.originalFrames = frames;\n\tif (!this.subjid && frames[0].domainValue) this.subjid = frames[0].domainValue;\n\tfor (let i = 0; i < frames.length; i += 1) {\n\t\tif (frames[i]['@context']) this.jsonld_context = frames[i]['@context'];\n\t\tlet cframe = this.getPropertyClassFrame(frames[i].property, frames[i]);\n\t\tif (cframe.isClassChoice()) {\n\t\t\tcframe = cframe.getChosenClassFrame(frames[i].range);\n\t\t\tif (!cframe) {\n\t\t\t\tconsole.log(`no choice frame ${frames[i].range}`);\n\t\t\t}\n\t\t} else if (cframe.isLogic()) {\n\t\t\tcframe = cframe.getChosenFrame(frames[i]);\n\t\t}\n\t\tif (cframe) {\n\t\t\tif (typeof this.properties[frames[i].property] === 'undefined') {\n\t\t\t\tthis.properties[frames[i].property] = new PropertyFrame(frames[i].property, cframe, this);\n\t\t\t}\n\t\t\tthis.properties[frames[i].property].addFrame(frames[i]);\n\t\t}\n\t}\n\treturn this;\n};\n\n/*\n * Serialises the javascript object as an array of frames\n */\nObjectFrame.prototype.getAsFrame = function (prop, parent) {\n\tif (this.parentframe) return this.parentframe;\n\tconst ff = { type: 'objectProperty', property: prop };\n\tff.range = this.cls;\n\tff.domain = parent.cls;\n\tff.domainValue = parent.subjid;\n\tff.frame = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tff.frame = ff.frame.concat(ff.frame, this.properties[prop].getAsFrames());\n\t}\n\treturn ff;\n};\n\nObjectFrame.prototype.getAsFrames = function (prop, parent) {\n\tvar frames = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tframes = frames.concat(frames, this.properties[prop].getAsFrames());\n\t}\n\treturn frames;\n}\n\nObjectFrame.prototype.isnew = function () {\n\treturn this.newDoc;\n};\n\n/**\n * Cleans out object and sets everything empty\n */\nObjectFrame.prototype.empty = function () {\n\t// all indexed by property\n\tthis.properties = {};\n\tthis.restrictions = {};\n\tthis.subjid = false;\n\tthis.cls = false;\n};\n\n/*\n * Resets object state to original state\n */\nObjectFrame.prototype.reset = function (prop) {\n\tif (prop) {\n\t\tconst props = [];\n\t\tfor (let i = 0; i < this.originalFrames.length; i += 1) {\n\t\t\tif (this.originalFrames[i].property === prop) {\n\t\t\t\tprops.push(this.originalFrames[i]);\n\t\t\t}\n\t\t}\n\t\tif (this.properties[prop]) this.properties[prop] = [];\n\t\tthis.loadDataFrames(props);\n\t} else {\n\t\tthis.restrictions = {};\n\t\tthis.properties = {};\n\t\tthis.loadDataFrames(this.originalFrames);\n\t}\n};\n\n/*\n * Clears out any specific information from a tree\n */\nObjectFrame.prototype.clear = function () {\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.properties[prop].clear();\n\t}\n\treturn this;\n};\n\n/*\n * Filters the frame and its children\n */\nObjectFrame.prototype.filter = function (rules, onmatch, options) {\n\tconst cascading = (options && options.ignore_failure ? true : false);\n\tvar hits = FramePattern.FramePatternMatcher.testRules(rules, this, onmatch);\n\t//if(hits.length || cascading){\n\t\tfor (const prop of Object.keys(this.properties)) {\n\t\t\tthis.properties[prop].filter(rules, onmatch, options);\n\t\t}\n\t//}\n\treturn this;\n};\n\n\n/**\n * If a class frame is present, it is returned for the given property\n * If no class frame is present and an instance frame is passed in the\n * this enables make it up as you go along editing\n * second argument a class frame will be created from the instance frame.\n */\nObjectFrame.prototype.getPropertyClassFrame = function (prop, instance) {\n\tif (this.classframes && typeof this.classframes === 'object' && typeof this.classframes[prop] === 'object') {\n\t\treturn this.classframes[prop];\n\t}\n\tif (instance) {\n\t\tconst cf = new ClassFrame(instance);\n\t\treturn cf;\n\t}\n\tif (this.properties[prop]) {\n\t\treturn new ClassFrame(this.properties[prop].values[0]);\n\t}\n\treturn false;\n};\n\n/*\n * Returns a list of properties - type can be filled|missing|all\n */\nObjectFrame.prototype.getProperties = function (type) {\n\tif(type == \"filled\" || !this.classframes){\n\t\treturn Object.keys(this.properties);\n\t}\n\tif (type == 'missing') {\n\t\tconst filled = Object.keys(this.properties);\n\t\tconst all = Object.keys(this.classframes);\n\t\tconst missing = [];\n\t\tfor (let i = 0; i < all.length; i++) {\n\t\t\tif (filled.indexOf(all[i]) == -1 && missing.indexOf(all[i]) == -1) {\n\t\t\t\tmissing.push(all[i]);\n\t\t\t}\n\t\t}\n\t\treturn missing;\n\t}\n\treturn Object.keys(this.classframes);\n};\n\n/**\n * Missing properties are those that are present in the classframe,\n * but not instantiated in the current object frame\n * for this to work we need to load the frame with the associated classframe\n */\nObjectFrame.prototype.getMissingPropertyList = function () {\n\tvar missing = this.getProperties(\"missing\");\n\tconst nmissing = [];\n\tfor (let i = 0; i < missing.length; i++) {\n\t\tconst cframe = this.getPropertyClassFrame(missing[i]);\n\t\tconst newb = { label: cframe.getLabel(), value: missing[i] };\n\t\tnmissing.push(newb);\n\t}\n\treturn nmissing;\n};\n\n/**\n * List of properties that are filled in the object\n */\nObjectFrame.prototype.getFilledPropertyList = function () {\n\tvar props = this.getProperties(\"filled\");\n\tconst filled = [];\n\tfor (let i = 0; i < props.length; i++) {\n\t\tconst cframe = this.getPropertyClassFrame(props[i]);\n\t\tconst newb = { label: cframe.getLabel(), value: props[i] };\n\t\tfilled.push(newb);\n\t}\n\treturn filled;\n};\n\n/*\n * Fills the object frame from the schema - adding all the necessary property frames, etc to make it complete\n */\nObjectFrame.prototype.fillFromSchema = function (newid) {\n\tif (newid) this.subjid = newid;\n\tnewid = (newid || FrameHelper.genBNID());\n\tconst properties = {};\n\tif(this.classframes){\n\t\tfor (const prop of Object.keys(this.classframes)) {\n\t\t\tconst pf = this.getPropertyClassFrame(prop);\n\t\t\tproperties[prop] = new PropertyFrame(prop, pf, this);\n\t\t\tproperties[prop].fillFromSchema(newid);\n\t\t}\n\t}\n\tthis.properties = properties;\n\tthis.originalFrames = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.originalFrames.push(this.properties[prop].getAsFrames());\n\t}\n\treturn this;\n};\n\n/*\n * Clones an object frame to be a copy of the current frame\n */\nObjectFrame.prototype.clone = function (newid) {\n\tconst properties = {};\n\tconst cloned = new ObjectFrame(this.cls, false, false, this.parent);\n\tcloned.classframes = this.classframes;\n\tcloned.subjid = newid;\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tproperties[prop] = this.properties[prop].clone();\n\t}\n\tcloned.properties = properties;\n\treturn cloned;\n};\n\n\n/**\n * Returns a child frame with a particular id\n * If the second parameter is included, it will only look in that specific property\n * Otherwise searches all properties for the child\n */\nObjectFrame.prototype.getChild = function (childid, prop) {\n\tlet pframe = this.getProperty(prop);\n\tfor (let i = 0; i < pframe.values.length; pframe++) {\n\t\tif (pframe.values[i].isObject() && pframe.values[i].subject === childid) return pframe.values[i];\n\t}\n\tif (!prop) {\n\t\tfor (const key of Object.keys(this.properties)) {\n\t\t\tfor (let i = 0; i < this.properties[key].values.length; i += 1) {\n\t\t\t\tif (this.properties[key].values[i].subject() === childid) return this.properties[key].values[i];\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.addProperty = function (prop, cls) {\n\tconst cframe = this.getPropertyClassFrame(prop);\n\tconst nprop = new PropertyFrame(prop, cframe, this);\n\tif (nprop.isData()) {\n\t\tconst df = cframe.copy();\n\t\tdf.set('');\n\t}\n\tif (cframe.isObject()) {\n\t\tif (!cframe.isClassChoice()) {\n\t\t\tconst df = cframe.createEmpty(FrameHelper.genBNID());\n\t\t}\n\t\tif (cls) {\n\t\t\tconst df = cframe.createEmptyChoice(cls, FrameHelper.genBNID());\n\t\t}\n\t\tconst clss = cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst df = cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t}\n\t}\n\tif (typeof this.properties[prop] === 'undefined') {\n\t\tthis.properties[prop] = [];\n\t}\n\tthis.properties[prop].push(df);\n\treturn df;\n};\n\nObjectFrame.prototype.addPropertyValue = function (prop, value) {\n\tconst pframe = this.properties[prop];\n\treturn pframe.addValue(value);\n};\n\nObjectFrame.prototype.removeProperty = function (prop) {\n\tif (typeof this.properties[prop] !== 'undefined') {\n\t\tdelete (this.properties[prop]);\n\t}\n};\n\nObjectFrame.prototype.removePropertyValue = function (prop, value, index) {\n\tconst pframe = this.properties[prop];\n\tpframe.removeValue(value, index);\n\tif (pframe.values.length == 0) {\n\t\tthis.removeProperty(prop);\n\t}\n};\n\nObjectFrame.prototype.error = function (msg) {\n\tconsole.error(msg);\n};\n\n\nObjectFrame.prototype.subject = function () {\n\treturn this.subjid;\n};\n\nObjectFrame.prototype.get = ObjectFrame.prototype.subject;\n\nObjectFrame.prototype.isObject = function () { return true; };\nObjectFrame.prototype.isProperty = function () { return false; };\nObjectFrame.prototype.isData = function () { return false; };\n\n\nObjectFrame.prototype.subjectClass = function () {\n\treturn this.cls;\n};\n\nObjectFrame.prototype.depth = function () {\n\tif (this.parent) return (this.parent.depth() + 1);\n\treturn 0;\n};\n\nObjectFrame.prototype.getProperty = function (prop) {\n\treturn this.properties[prop];\n};\n\nObjectFrame.prototype.first = function (prop) {\n\tif (this.properties && this.properties[prop]) {\n\t\treturn this.properties[prop].first();\n\t}\n};\n\nObjectFrame.prototype.property = function (prop) {\n\tif (this.parent) return this.parent.property();\n\treturn false;\n};\n\nObjectFrame.prototype.parentObject = function () {\n\tif (this.parent && this.parent.parent) {\n\t\treturn this.parent.parent;\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.root = function () {\n\tif (this.parent) return false;\n\treturn true;\n};\n\nObjectFrame.prototype.renderProperties = function () {\n\tconst props = this.sortProperties();\n\tconst nprops = [];\n\tfor (let i = 0; i < props.length; i++) {\n\t\tif (this.properties[props[i]].render) {\n\t\t\tconst rend = this.properties[props[i]].render(this.properties[props[i]]);\n\t\t\tif (rend) nprops.push(rend);\n\t\t}\n\t}\n\treturn nprops;\n};\n\nObjectFrame.prototype.sortProperties = function () {\n\tconst unsorted = Object.keys(this.properties);\n\tif (this.compare) {\n\t\treturn unsorted.sort((a, b) => this.compare(a, b, this));\n\t}\n\treturn unsorted.sort((a, b) => this.standardCompare(a, b, this));\n};\n\n/*\n * Label first, then datatype properties, then object properties\n */\nObjectFrame.prototype.standardCompare = function (a, b, doc) {\n\tif (a == 'rdfs:label') return -1;\n\tif (b == 'rdfs:label') return 1;\n\tif (a == 'rdfs:comment') return -1;\n\tif (b == 'rdfs:comment') return 1;\n\tif (doc.properties[a].isData() && doc.properties[b].isObject()) return -1;\n\tif (doc.properties[b].isData() && doc.properties[a].isObject()) return 1;\n\treturn 0;\n};\n\nObjectFrame.prototype.cardControlAllows = function(action){\n\tif(!this.parent) return true;\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nObjectFrame.prototype.isUpdated = function(){\n\tvar i = 0;\n\tfor(var prop in this.properties){\n\t\tif(this.originalFrames[i] != prop) return true;\n\t\tif(this.properties[prop].isUpdated()) return true;\n\t\ti++;\n\t}\n\tif(i != this.originalFrames.length) return true;\n\treturn false;\n}\n\nObjectFrame.prototype.isNew = function(){\n\treturn (this.subject().substring(0, 2) == \"_:\");\n}\n\nObjectFrame.prototype.getSummary = function(){\n\tvar ret = { status: \"ok\" };\n\tif(this.isUpdated()) ret.status = \"updated\";\n\tif(this.isNew()) ret.status = \"new\";\n\tret.propcount = 0;\n\tfor(var prop in this.properties){\n\t\tret.propcount++;\n\t}\n\tret.long = ret.propcount + \" properties\";\n\treturn ret;\n}\n\nfunction PropertyFrame(property, cframe, parent) {\n\tthis.predicate = property;\n\tthis.cframe = cframe;\n\tthis.parent = parent;\n\tthis.values = [];\n}\n\nPropertyFrame.prototype.addFrame = function (frame) {\n\tif(this.cframe.isData()){\n\t\tvar df = new DataFrame(frame, this, this.values.length);\n\t\tthis.values.push(df);\n\t} else {\n\t\tconst kid = new ObjectFrame(this.range(), cframe.frame, frame.frame, this, frame);\n\t\tthis.values.push(kid);\n\t}\n};\n\nPropertyFrame.prototype.fillFromSchema = function (newid) {\n\tif (this.isData() || (this.isObject() && !this.isClassChoice())) {\n\t\tvar values = [];\n\t\tif (this.cframe.hasRestriction() && this.cframe.restriction.min) {\n\t\t\tfor (let i = 0; i < this.cframe.restriction.min; i += 1) {\n\t\t\t\tvar nframe = this.createEmpty(newid);\n\t\t\t\tnframe.parent = this;\n\t\t\t\tvalues.push(nframe);\n\t\t\t}\n\t\t} \n\t\telse {\n\t\t\tvar nframe = this.createEmpty(newid);\n\t\t\tnframe.parent = this;\n\t\t\tvalues.push(nframe);\n\t\t}\n\t\tthis.values = values;\n\t}\n\telse if (this.isClassChoice()) {\n\t\tconst clss = this.cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst empty = this.cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\tempty.parent = this;\n\t\t\tthis.values = [empty];\n\t\t}\n\t}\n};\n\nPropertyFrame.prototype.isData = function () {\n\treturn this.cframe.isData();\n};\n\nPropertyFrame.prototype.isObject = function () {\n\treturn this.cframe.isObject();\n};\n\nPropertyFrame.prototype.isProperty = function () {\n\treturn true;\n};\n\nPropertyFrame.prototype.property = function () {\n\treturn this.predicate;\n};\n\nPropertyFrame.prototype.extract = function () {\n \tconst extracts = [];\n \tfor (let i = 0; i < this.values.length; i++) {\n \t\tconst val = this.values[i].extract();\n \t\tif (val !== '' && val !== false && typeof val !== 'undefined') extracts.push(val);\n \t}\n\treturn extracts;\n};\n\nPropertyFrame.prototype.subject = function () {\n\treturn (this.parent ? this.parent.subject() : false);\n};\nPropertyFrame.prototype.subjectClass = function () {\n\treturn (this.parent ? this.parent.subjectClass() : false);\n};\nPropertyFrame.prototype.depth = function () {\n\treturn (this.parent ? this.parent.depth() : false);\n};\nPropertyFrame.prototype.updated = function () {\n\treturn (this.parent ? this.parent.childUpdated() : false);\n};\nPropertyFrame.prototype.range = function () {\n\treturn (this.cframe ? this.cframe.range : '');\n};\nPropertyFrame.prototype.getLabel = function () {\n\treturn (\n\t\tthis.cframe ? this.cframe.getLabel() : '');\n};\nPropertyFrame.prototype.getComment = function () {\n\treturn (this.cframe ? this.cframe.getComment() : false);\n};\nPropertyFrame.prototype.hasCardinalityRestriction = function () {\n\treturn (this.cframe ? this.cframe.hasRestriction() : false);\n};\nPropertyFrame.prototype.getRestriction = function () {\n\treturn (this.cframe ? this.cframe.restriction : false);\n};\nPropertyFrame.prototype.isClassChoice = function () {\n\treturn (this.cframe ? this.cframe.isClassChoice() : false);\n};\n\nPropertyFrame.prototype.deletePropertyValue = function (value, index) {\n\tthis.parent.removePropertyValue(this.property(), value, index);\n};\n\nPropertyFrame.prototype.get = function(){\n\tvar gets = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]) {\n\t\t\tvar x = this.values[i].get();\n\t\t\tif(x) gets.push(x);\n\t\t}\n\t}\n\treturn gets;\n}\n\nPropertyFrame.prototype.clear = function(){\n\tfor(var i = 0 ; i<this.values.length; i++){\n\t\tthis.values[i].clear();\n\t}\n}\n\nPropertyFrame.prototype.clone = function(){\n\tconst cvalues = [];\n\tconst cloned = new PropertyFrame(this.predicate, this.cframe, this.parent);\n\tfor(var i = 0 ; i<this.values.length; i++){\n\t\tcvalues.push(this.values[i].clone());\n\t}\n\tcloned.values = cvalues;\n\treturn cloned;\n\t//\n}\n\nPropertyFrame.prototype.getAsFrames = function(){\n\tvar fs = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]){\n\t\t\tif(this.isData()){\n\t\t\t\tfs.push(this.values[i].getAsFrame());\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfs = fs.concat(this.values[i].getAsFrames());\n\t\t\t}\n\t\t}\n\t}\n\treturn fs;\n}\n\nPropertyFrame.prototype.createEmpty = function(){\n\tif (this.cframe.isData()) {\n\t\tconst df = this.cframe.copy();\n\t\tdf.set('');\n\t\treturn df;\n\t}\n\telse if (this.cframe.isObject()) {\n\t\tif (!this.cframe.isClassChoice()) {\n\t\t\tconst df = this.cframe.createEmpty(FrameHelper.genBNID());\n\t\t\treturn df;\n\t\t}\n\t\tconst clss = this.cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst df = this.cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\treturn df;\n\t\t}\n\t}\n}\n\nPropertyFrame.prototype.filter = function (rules, onmatch, options) {\n\tconst cascading = (options && options.ignore_failure ? true : false);\n\tvar hits = FramePattern.FramePatternMatcher.testRules(rules, this, onmatch);\n\t//if(hits.length || cascading){\n\t\tfor (var i = 0; i<this.values.length; i++){\n\t\t\tthis.values[i].filter(rules, onmatch, options);\n\t\t}\n\t//}\n\treturn this;\n}\n\n/*\n * Shorthand functions to make it easier to access the underlying data\n */\n\nPropertyFrame.prototype.first = function () {\n\tif (this.values && this.values[0]) {\n\t\treturn this.values[0].get();\n\t}\n};\n\nPropertyFrame.prototype.renderValues = function(){\n\tvar sortedVals = this.sortValues();\n\tvar vals = [];\n\tfor(var i = 0; i<sortedVals.length; i++){\n\t\tif(sortedVals[i] && sortedVals[i].render){\n\t\t\tvar rend = sortedVals[i].render(sortedVals[i]);\n\t\t\tif(rend) vals.push(rend);\n\t\t}\n\t}\n\treturn vals;\n};\n\nPropertyFrame.prototype.sortValues = function () {\n\tif (this.compare) {\n\t\treturn this.values.sort((a, b) => this.compare(a, b, this));\n\t}\n\treturn this.values;\n};\n\nPropertyFrame.prototype.cardControlAllows = function(action){\n\tif(this.cframe.hasRestriction()){\n\t\tvar rest = this.cframe.restriction;\n\t\tvar currentnum = this.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nPropertyFrame.prototype.isUpdated = function(){\n\treturn true;\n\tif(this.values.length != this.originalValues.length) return true;\n\tfor(var i = 0 ; i < this.values.length; i++){\n\t\tif(this.cframe && this.cframe.isData()){\n\t\t\tif(this.values[i].value() != this.originalValues[i]){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif(this.values[i].subject() != this.originalValues[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(this.values[i].isUpdated()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\n\nfunction DataFrame(frame, parent, index) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tthis.index = index;\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nDataFrame.prototype.load = function (frame) {\n\tif (typeof frame !== 'object') {\n\t\tthis.error('No frame passed to load');\n\t\treturn;\n\t}\n\t// all the meta-data carried in frames:\n\tthis.type = frame.type;\n\tthis.predicate = frame.property;\n\tthis.range = frame.range;\n\tthis.rangeValue = frame.rangeValue;\n\tthis.domain = frame.domain;\n\tthis.domainValue = frame.domainValue;\n\tthis.frame = frame.frame;\n\tthis.label = frame.label;\n\tthis.comment = frame.comment;\n\tconst { restriction } = frame;\n\tthis.restriction = false;\n\tif (restriction && typeof restriction === 'object') {\n\t\tthis.restriction = new Restriction(restriction);\n\t}\n};\n\nDataFrame.prototype.filter = function (rules, onmatch) {\n\tFramePattern.FramePatternMatcher.testRules(rules, this, onmatch);\n\treturn this;\n};\n\nDataFrame.prototype.delete = function () {\n\tthis.parent.deletePropertyValue(this.get(), this.index);\n};\n\nDataFrame.prototype.save = function () {\n\tif (this.parent) {\n\t\tthis.parent.save();\n\t}\n};\n\nDataFrame.prototype.reset = function () {\n\tthis.set(this.originalValue);\n\t// this.redraw();\n};\n\nDataFrame.prototype.clone = function () {\n\tconst newb = this.parent.addPropertyValue(this.get());\n\tconst nrend = this.copy(newb);\n\tnrend.setNew();\n\tnrend.mode = 'edit';\n\tnrend.index = this.parent.values.length;\n\tthis.parent.values.push(nrend);\n};\n\n\nDataFrame.prototype.depth = function () { return (this.parent ? this.parent.depth() : false); };\nDataFrame.prototype.property = function () { return (this.parent ? this.parent.property() : false); };\nDataFrame.prototype.subject = function () { return (this.parent ? this.parent.subject() : false); };\nDataFrame.prototype.subjectClass = function () { return (this.parent ? this.parent.subjectClass() : false); };\nDataFrame.prototype.range = function () {\treturn (this.frame ? this.frame.range : false); };\n\nDataFrame.prototype.isValidType = function (dt) {\n\tconst vtypes = ['datatypeProperty', 'objectProperty', 'restriction '];\n\tif (vtypes.indexOf(dt) === -1) return false;\n\treturn true;\n};\n\n\nDataFrame.prototype.getAsFrame = function () {\n\t const ff = { type: this.type, property: this.property() };\n\t if (this.range) ff.range = this.range;\n\t if (this.rangeValue) ff.rangeValue = this.rangeValue;\n\t if (this.domain) ff.domain = this.domain;\n\t if (this.domainValue) ff.domainValue = this.domainValue;\n\t if (this.frame) ff.frame = this.frame;\n\t if (this.label) ff.label = this.label;\n\t if (this.comment) ff.comment = this.comment;\n\t return ff;\n};\n\nDataFrame.prototype.hasRestriction = function () {\n\t if (this.restriction) {\n\t\t return this.restriction.hasCardRestriction();\n\t }\n\t return false;\n};\n\nDataFrame.prototype.copy = function (newid) {\n\tconst copy = new DataFrame(this, this.parent);\n\tif (newid) copy.domainValue = newid;\n\treturn copy;\n};\n\nDataFrame.prototype.getLabel = function () {\n\tlet lab = '';\n\tif(this.predicate == \"rdfs:label\") return \"Name\";\n\tif(this.predicate == \"rdfs:comment\") return \"Description\";\n\tif (this.label && typeof this.label === 'object') lab = this.label['@value'];\n\tif (this.label && typeof this.label === 'string') lab = this.label;\n\t// always return something\n\tif (!lab && this.property()) lab = FrameHelper.labelFromURL(this.property());\n\tif (!lab) lab = FrameHelper.labelFromURL(this.cls);\n\treturn lab;\n};\n\nDataFrame.prototype.getType = function () {\n\tif (this.range) return this.range;\n\tif (this.rangeValue && this.rangeValue.type) return this.rangeValue.type;\n\treturn false;\n};\n\nObjectFrame.prototype.getLabel = DataFrame.prototype.getLabel;\n\nDataFrame.prototype.getComment = function () {\n\tlet comment = '';\n\tif (this.comment && typeof this.comment === 'object') comment = this.comment['@value'];\n\tif (this.comment && typeof this.comment === 'string') comment = this.comment;\n\treturn comment;\n};\n\nObjectFrame.prototype.getComment = DataFrame.prototype.getComment;\n\n\nDataFrame.prototype.error = function (msg) {\n\tif (msg)\tthis.err = msg;\n\treturn this.err;\n};\n\nDataFrame.prototype.isValid = function () {\n\tif (!(this.type && this.isValidType(this.type))) {\n\t\tthis.error(`Missing or Illegal Frame Type ${this.type}`);\n\t\treturn false;\n\t}\n\tif (!(this.predicate)) {\n\t\tthis.error('Missing Frame Property');\n\t\treturn false;\n\t}\n\tif (!(this.domain)) {\n\t\tthis.error('Missing Frame Domain');\n\t\treturn false;\n\t}\n\tif (!(this.range)) {\n\t\tthis.error('Missing Frame Range');\n\t\treturn false;\n\t}\n\tif (this.isObjectProperty() && !(this.frame && typeof this.frame === 'object')) {\n\t\tthis.error('Missing Object Frame');\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nDataFrame.prototype.isObjectProperty = function () {\n\treturn this.type === 'objectProperty';\n};\n\nDataFrame.prototype.isDatatypeProperty = function () {\n\treturn this.type === 'datatypeProperty';\n};\n\nDataFrame.prototype.isLogic = function () {\n\tif (this.type === 'and' || this.type === 'or' || this.type === 'xor') {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.isRestriction = function () {\n\treturn this.type === 'restriction';\n};\n\nDataFrame.prototype.ftype = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isDatatypeProperty()) return 'data';\n\tif (this.isChoice()) return 'oneOf';\n\tif (this.isObject()) return 'object';\n\tif (this.isLogic()) return 'logic';\n\tif (this.isClassChoice()) return 'class_choice';\n\treturn undefined;\n};\n\n\nDataFrame.prototype.isClassChoice = function () {\n\treturn (this.frame && this.frame.type === 'class_choice');\n};\n\nDataFrame.prototype.isString = function () {\n\tif (this.range === FrameHelper.getStdURL('xsd', 'string')) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.getChoiceOptions = function () {\n\tconst opts = [];\n\tfor (let i = 0; i < this.frame.elements.length; i += 1) {\n\t\tconst option = {};\n\t\tif (this.frame.elements[i].label) {\n\t\t\toption.label = this.frame.elements[i].label['@value'];\n\t\t} else {\n\t\t\toption.label = FrameHelper.labelFromURL(this.frame.elements[i].class);\n\t\t}\n\t\toption.value = this.frame.elements[i].class;\n\t\topts.push(option);\n\t}\n\treturn opts;\n};\n\nDataFrame.prototype.lang = function () {\n\treturn 'en';\n};\n\nDataFrame.prototype.isChoice = function () {\n\treturn (this.frame && this.frame.type === 'oneOf');\n};\n\nDataFrame.prototype.isDocument = function () {\n\treturn (this.frame && this.frame.type === 'document');\n};\n\nDataFrame.prototype.isData = function () {\n\treturn (this.isDocument() || this.isChoice() || this.isDatatypeProperty());\n};\n\nDataFrame.prototype.isObject = function () {\n\treturn (this.isObjectProperty() && this.frame && !(this.isChoice() || this.isDocument()));\n};\n\nDataFrame.prototype.isProperty = function () {\n\treturn false;\n};\n\nDataFrame.prototype.getTypeShorthand = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isChoice()) return 'choice';\n\tconst sh = FrameHelper.getShorthand(this.getType());\n\treturn (sh || this.getType());\n};\n\nDataFrame.prototype.get = function () {\n\tif (this.contents) {\n\t\treturn this.contents;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue && typeof this.rangeValue['@value'] !== 'undefined') {\n\t\treturn this.rangeValue['@value'];\n\t}\n\tif (this.isChoice() || this.isDocument()) {\n\t\treturn this.frame.domainValue;\n\t}\n\treturn '';\n};\n\nDataFrame.prototype.set = function (value, normalizer) {\n\tif (normalizer) value = normalizer(value, this);\n\tthis.contents = value;\n\tif (this.isChoice() || this.isDocument()) {\n\t\tthis.frame.domainValue = value;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue) {\n\t\tthis.rangeValue['@value'] = value;\n\t}\n};\n\nDataFrame.prototype.clear = function () {\n\tif (this.isDocument() || this.isChoice() || this.isDatatypeProperty()) {\n\t\tthis.set('');\n\t}\n};\n\nDataFrame.prototype.cardControlAllows = function(action){\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n\n/*\n * Class frames represent the archetypal version of a property frame as returned by the class frame api\n */\nfunction ClassFrame(frame, parent) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nClassFrame.prototype = DataFrame.prototype;\n\nClassFrame.prototype.loadFromObjectFrame = function (par, child) {\n\t// all the meta-data carried in frames:\n\tthis.type = 'objectProperty';\n\tthis.predicate = par.property;\n\tthis.range = par.range;\n\tthis.rangeValue = child.subjid;\n\tthis.domain = par.cls;\n\tthis.domainValue = par.subjid;\n\tthis.label = par.getLabel();\n\tthis.comment = par.getComment();\n\tthis.restriction = par.restriction;\n};\n\nClassFrame.prototype.createEmptyChoice = function (cls, newid) {\n\tconst cf = this.getChosenClassFrames(cls);\n\tconst objframe = new ObjectFrame(cls);\n\tif (newid) objframe.subjid = newid;\n\tobjframe.loadClassFrames(cf);\n\tconst fframe = objframe.fillFromSchema();\n\treturn fframe;\n};\n\nClassFrame.prototype.getChosenClassFrames = function (chosen) {\n\tlet nc = [];\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\tif (chosen === this.frame.operands[i][j].domain) {\n\t\t\t\tnc = nc.concat(this.frame.operands[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\treturn nc;\n};\n\nClassFrame.prototype.createEmpty = function (newid) {\n\tif (this.isObject()) {\n\t\tconst objframe = new ObjectFrame(this.range);\n\t\tif (newid) objframe.subjid = newid;\n\t\tobjframe.loadClassFrames(this.frame);\n\t\tconst fframe = objframe.fillFromSchema();\n\t\treturn fframe;\n\t}\n\tif (this.isData()) {\n\t\tconst dataframe = this.copy();\n\t\tdataframe.set('');\n\t\treturn dataframe;\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.cloneDataFrame = function (newid, other) {\n\treturn other;\n};\n\nClassFrame.prototype.clone = function (newid, other) {\n\tif (this.isObject()) {\n\t\tconsole.log('cannot clone class frame');\n\t} else if (this.isData()) {\n\t\treturn this.cloneDataFrame(newid, other);\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.getClassChoices = function () {\n\tconst choices = [];\n\tif (this.frame.operands) {\n\t\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\t\tconst domcls = this.frame.operands[i][j].domain;\n\t\t\t\tif (domcls && choices.indexOf(domcls) === -1) {\n\t\t\t\t\tchoices.push(domcls);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn choices;\n};\n\nClassFrame.prototype.getChosenClassFrame = function (chosen) {\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tconst operand = this.frame.operands[i];\n\t\tif (operand.length) {\n\t\t\tfor (let j = 0; j < operand.length; j += 1) {\n\t\t\t\tif (operand[j] && (chosen === operand[j].domain)) {\n\t\t\t\t\tconst cf = new ClassFrame(operand);\n\t\t\t\t\treturn cf;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (operand.range && chosen === operand.range) {\n\t\t\tconst cf = new ClassFrame(operand);\n\t\t\treturn cf;\n\t\t}\n\t}\n\treturn false;\n};\n\nClassFrame.prototype.getChosenFrame = function (dataframe) {\n\treturn dataframe;\n};\n\n\nfunction Restriction(restriction) {\n\tthis.min = 0;\n\tthis.max = 0;\n\tif (restriction) this.loadRestriction(restriction);\n}\n\nRestriction.prototype.hasCardRestriction = function () {\n\tif (this.min === 0 && this.max === 0) return false;\n\treturn true;\n};\n\nRestriction.prototype.loadRestriction = function (restriction) {\n\tif (typeof restriction.cardinality !== 'undefined') {\n\t\tthis.max = restriction.cardinality;\n\t\tthis.min = restriction.cardinality;\n\t} else if (typeof restriction.maxCardinality !== 'undefined') {\n\t\tthis.max = restriction.maxCardinality;\n\t} else if (typeof restriction.minCardinality !== 'undefined') {\n\t\tthis.min = restriction.minCardinality;\n\t} else if (typeof restriction.type !== 'undefined' && restriction.type === 'and' && typeof restriction.operands === 'object') {\n\t\tfor (let i = 0; i < restriction.operands.length; i += 1) {\n\t\t\tconst nrest = new Restriction(restriction.operands[i]);\n\t\t\tif (this.max === 0 && nrest.max > 0) this.max = nrest.max;\n\t\t\telse if (this.max > 0 && nrest.max > 0 && nrest.max < this.max) this.max = nrest.max;\n\t\t\tif (this.min === 0 && nrest.min > 0) this.min = nrest.min;\n\t\t\telse if (this.min > 0 && nrest.min > 0 && nrest.min > this.min) this.min = nrest.min;\n\t\t}\n\t}\n};\n\nmodule.exports = ObjectFrame;\n","const FrameHelper = require('./frameHelper');\n\nfunction WOQLResult(results, query, config) {\n\tthis.bindings = results.bindings;\n\tif(query.constructor.name == \"WOQLQuery\"){\n\t\tthis.query = query;\n\t}\n\telse {\n\t\tthis.query = query.query;\n\t}\n\tthis.cursor = 0;\n\tif (!(config && config.no_compress)) {\n\t\tconst context = (config && config.context ? config.context : false);\n\t\tthis.compress(context);\n\t}\n}\n\nWOQLResult.prototype.compress = function (context) {\n\tcontext = (context || this.query.getContext());\n\tfor (let i = 0; i < this.bindings.length; i++) {\n\t\tfor (const prop of Object.keys(this.bindings[i])) {\n\t\t\tconst nprop = FrameHelper.shorten(prop, context);\n\t\t\tconst nval = ((typeof this.bindings[i][prop] === 'string')\n\t\t\t\t? FrameHelper.shorten(this.bindings[i][prop], context)\n\t\t\t\t: this.bindings[i][prop]\n\t\t\t);\n\t\t\tdelete (this.bindings[i][prop]);\n\t\t\tthis.bindings[i][nprop] = nval;\n\t\t}\n\t}\n\treturn this;\n}\n\nWOQLResult.prototype.first = function () {\n\tthis.cursor = 0;\n\treturn this.bindings[0];\n};\n\nWOQLResult.prototype.last = function(){\n\tthis.cursor = this.bindings.length-1;\n\treturn this.bindings[this.bindings.length-1];\n}\n\nWOQLResult.prototype.next = function () {\n\tconst res = this.bindings[this.cursor];\n\tthis.cursor++;\n\treturn res;\n};\n\nWOQLResult.prototype.prev = function () {\n\tif (this.cursor > 0) {\n\t\tthis.cursor--;\n\t\treturn this.bindings[this.cursor];\n\t}\n};\n\nWOQLResult.prototype.compareValues = function(a, b, asc_or_desc){\n\tif(!a || !b) return 0;\n\tif(typeof a['@value'] != \"undefined\" && typeof b['@value'] != \"undefined\"){\n\t\ta = a['@value'];\n\t\tb = b['@value'];\n\t}\n\tif (a > b) {\n\t\treturn (asc_or_desc && asc_or_desc == 'asc' ? 1 : -1);\n\t}\n\tif (b > a) {\n\t\treturn (asc_or_desc && asc_or_desc == 'asc' ? -1 : 1);\n\t}\n};\n\nWOQLResult.prototype.sort = function(key, asc_or_desc){\n\tthis.bindings.sort((a, b) => {\n\t\treturn this.compareValues(a[key], b[key], asc_or_desc);\n\t});\n\tthis;\n}\n\nWOQLResult.prototype.getVariableList = function () {\n\tif (this.bindings && this.bindings[0]) {\n\t\treturn Object.keys(this.bindings[0]);\n\t}\n};\n\nWOQLResult.prototype.count = function () {\n\treturn this.bindings.length;\n};\n\nWOQLResult.prototype.hasBindings = function (result) {\n\treturn (this.bindings && this.count());\n};\n\nWOQLResult.prototype.getBindings = function () {\n\treturn this.bindings;\n};\n\nmodule.exports = WOQLResult;\n","/**\n * The WOQL object is a wrapper around the WOQL query object\n * Syntactic sugar to allow you to write WOQL.triple()... instead of new WOQLQuery().triple()\n * Every function matches one of the public api functions of the woql query object\n */\n\nconst FrameHelper = require('./frameHelper');\nconst Pattern = require('./framePattern');\n\nconst WOQL = {};\n\n/*\n * We expose all the real woql predicates via the WOQL object,\n * for ease of typing - all return a WOQL query object\n */\nWOQL.when = function(Query, Update){ return new WOQLQuery().when(Query, Update);}\nWOQL.opt = function(query){ return new WOQLQuery().opt(query); }\nWOQL.from = function(dburl, query){ return new WOQLQuery().from(dburl, query); }\nWOQL.into = function(dburl, query){ return new WOQLQuery().into(dburl, query); }\nWOQL.limit = function(limit, query){ return new WOQLQuery().limit(limit, query); }\nWOQL.start = function(start, query){ return new WOQLQuery().start(start, query); }\nWOQL.select = function(...list){ return new WOQLQuery().select(...list); }\nWOQL.or = function(...queries){\treturn new WOQLQuery().or(...queries); }\nWOQL.and = function(...queries){ return new WOQLQuery().and(...queries); }\nWOQL.not = function(query){ return new WOQLQuery().not(query); }\nWOQL.triple = function(a, b, c){ return new WOQLQuery().triple(a, b, c); }\nWOQL.quad = function(a, b, c, d){ return new WOQLQuery().quad(a, b, c, d); }\nWOQL.sub = function(a, b){ return new WOQLQuery().sub(a, b); }\nWOQL.isa = function(a, b){\treturn new WOQLQuery().isa(a, b);\t}\nWOQL.eq = function(a, b){ return new WOQLQuery().eq(a, b);}\nWOQL.trim = function(a, b){\treturn new WOQLQuery().trim(a, b);\t}\nWOQL.delete = function(JSON_or_IRI){ return new WOQLQuery().delete(JSON_or_IRI);\t}\nWOQL.delete_triple = function( S, P, O ){ return new WOQLQuery().delete_triple (S, P, O);\t}\nWOQL.delete_quad = function( S, P, O, G ){ return new WOQLQuery().delete_quad (S, P, O, G); }\nWOQL.add_triple = function( S, P, O ){ return new WOQLQuery().add_triple (S, P, O); }\nWOQL.add_quad = function( S, P, O, G ){ \treturn new WOQLQuery().add_quad (S, P, O, G);}\nWOQL.get = function(vars, cols, target){\treturn new WOQLQuery().get(vars, cols, target); }\nWOQL.as = function(map, vari){\treturn new WOQLQuery().as(map, vari); }\nWOQL.remote = function(url){\treturn new WOQLQuery().remote(url); }\nWOQL.file = function(url){\treturn new WOQLQuery().file(url); }\nWOQL.list = function(...vars){\treturn new WOQLQuery().list(...vars); }\nWOQL.group_by = function(gvarlist, groupedvar, groupquery, output){\treturn new WOQLQuery().group_by(gvarlist, groupedvar, groupquery, output); }\nWOQL.update = function(Q){\treturn new WOQLQuery().update(Q); }\n\n/* String and other processing functions */\nWOQL.concat = function(list, v){\treturn new WOQLQuery().concat(list, v); }\nWOQL.lower = function(u, l){\treturn new WOQLQuery().lower(u, l); }\nWOQL.pad = function(input, pad, len, output){\treturn new WOQLQuery().pad(input, pad, len, output); }\nWOQL.join = function(...list){\treturn new WOQLQuery().join(...list); }\nWOQL.unique = function(prefix, vari, type){\treturn new WOQLQuery().unique(prefix, vari, type); }\nWOQL.idgen = function(prefix, vari, type, output){\treturn new WOQLQuery().idgen(prefix, vari, type, output); }\nWOQL.typecast = function(vara, type, varb){\treturn new WOQLQuery().typecast(vara, type, varb); }\nWOQL.re = function(pattern, test, matches){\treturn new WOQLQuery().re(pattern, test, matches); }\n\nWOQL.less = function(v1, v2){\treturn new WOQLQuery().less(v1, v2); }\nWOQL.greater = function(v1, v2){\treturn new WOQLQuery().greater(v1, v2); }\n\n\n/* Mathematical Processing */\nWOQL.eval = function(arith, v){\treturn new WOQLQuery().eval(arith, v);}\nWOQL.plus = function(...args){\treturn new WOQLQuery().plus(...args);}\nWOQL.minus = function(...args){\treturn new WOQLQuery().minus(...args); }\nWOQL.times = function(...args){\treturn new WOQLQuery().times(...args); }\nWOQL.divide = function(...args){ return new WOQLQuery().divide(...args); }\nWOQL.exp = function(a, b){\treturn new WOQLQuery().exp(a, b); }\nWOQL.div = function(...args){\treturn new WOQLQuery().div(...args); }\nWOQL.comment = function(arg){\treturn new WOQLQuery().comment(arg); }\nWOQL.length = function(var1, res){\treturn new WOQLQuery().length(var1, res);}\n\n\n//language extensions that can be chained after 'grounded' stuff (clauses with a specific subject) sub, isa, delete_triple, add_triple, delete_quad, add_quad, node\n//WOQL.value = function(vars){\treturn new WOQLQuery().list(vars); }\n//These ones are special ones for dealing with the schema only...\nWOQL.star = function(G, S, P, O){\treturn new WOQLQuery().star(G, S, P, O); }\nWOQL.addClass = function(classid, graph){\treturn new WOQLQuery().addClass(classid, graph); }\nWOQL.addProperty = function(propid, type, graph){\treturn new WOQLQuery().addProperty(propid, type, graph); }\nWOQL.deleteClass = function(classid, graph){\treturn new WOQLQuery().deleteClass(classid, graph); }\nWOQL.deleteProperty = function(propid, type, graph){\treturn new WOQLQuery().deleteProperty(propid, type, graph); }\nWOQL.node = function(nodeid, type){\treturn new WOQLQuery().node(nodeid, type); }\n\n\n/*\n * Beneath here are pseudo predicates - they belong to the javascript object\n * but not to the WOQL language\n */\n//returns empty query object\nWOQL.query = function(){\treturn new WOQLQuery(); }\n//loads query from json\nWOQL.json = function(json){\treturn new WOQLQuery().json(json); }\n\nWOQL.rule = function(){ return new Pattern.FrameRule(); }\n//Simple utility function for typechecking\nWOQL.isLiteralType = function(t){\n\tif(t){\n\t\tvar pref = t.split(\":\");\n\t\tif(pref[0] == \"xdd\" || pref[0] == \"xsd\") return true;\n\t}\n\treturn false;\n}\n/**\n * The WOQL Query object implements the WOQL language via the fluent style\n * @param query - json version of query\n * @returns WOQLQuery object\n */\nfunction WOQLQuery(query){\n\tthis.query = (query ? query : {});\n\tthis.cursor = this.query;\n\tthis.chain_ended = false;\n\tthis.contains_update = false;\n\t// operators which preserve global paging\n\tthis.paging_transitive_properties = ['select', 'from', 'start', 'when', 'opt', 'limit'];\n\tthis.vocab = this.loadDefaultVocabulary();\n\t//object used to accumulate triples from fragments to support usage like node(\"x\").label(\"y\");\n\tthis.tripleBuilder = false;\n\treturn this;\n}\n\n/**\n * Takes an array of variables, an optional array of column names\n */\nWOQLQuery.prototype.get = function(arr1, arr2, target){\n\tif(arr1.json){\n\t\tvar map = arr1.json();\n\t\ttarget = arr2;\n\t}\n\telse {\n\t\tvar map = this.buildAsClauses(arr1, arr2);\n\t}\n\tif(target){\n\t\tif(target.json) target = target.json();\n\t\tthis.cursor['get'] = [map, target];\n\t}\n\telse {\n\t\tthis.cursor['get'] = [map, {}];\n\t\tthis.cursor = this.cursor[\"get\"][1];\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.buildAsClauses = function(vars, cols){\n\tvar clauses = [];\n\tif(vars && typeof vars == \"object\" && vars.length){\n\t\tfor(var i = 0; i<vars.length; i++){\n\t\t\tvar v = vars[i];\n\t\t\tif(cols && typeof cols == \"object\" && cols.length){\n\t\t\t\tvar c = cols[i];\n\t\t\t\tif(typeof c == \"string\"){\n\t\t\t\t\tc = {\"@value\": c};\n\t\t\t\t}\n\t\t\t\tclauses.push({as: [c, v]});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tv.as ? clauses.push(v) : clauses.push({as: [v]});\n\t\t\t}\n\t\t}\n\t}\n\treturn clauses;\n}\n\nWOQLQuery.prototype.typecast = function(va, type, vb){\n\tthis.cursor['typecast'] = [va, type, vb];\n\treturn this;\n}\n\nWOQLQuery.prototype.length = function(va, vb){\n\tthis.cursor['length'] = [va, vb];\n\treturn this;\n}\n\nWOQLQuery.prototype.re = function(p, s, m){\n\tthis.cursor['re'] = [p, s, m];\n\treturn this;\n}\n\nWOQLQuery.prototype.remote = function(json){\n\tthis.cursor['remote'] = [json];\n\treturn this;\n}\n\nWOQLQuery.prototype.file = function(json){\n\tthis.cursor['file'] = [json];\n\treturn this;\n}\n\n//WOQL.group_by = function(gvarlist, groupedvar, groupquery, output){\treturn new WOQLQuery().group_by(gvarlist, groupedvar, groupquery, output); }\n\nWOQLQuery.prototype.group_by = function(gvarlist, groupedvar, groupquery, output){\n\tvar args = [];\n\tthis.cursor['group_by'] = args;\n\tif(gvarlist.json){\n\t\targs.push(gvarlist.json());\n\t}\n\tif(gvarlist['list']){\n\t\targs.push(gvarlist);\n\t}\n\telse {\n\t\targs.push({'list': gvarlist});\n\t}\n\tif(typeof groupedvar == \"object\" && Array.isArray(groupedvar)){\n\t\tng = [];\n\t\tfor(var i = 0; i<groupedvar.length; i++){\n\t\t\tng.push(groupedvar[i].substring(0, 2) != \"v:\" ? \"v:\" + groupedvar[i] : groupedvar[i]);\n\t\t}\n\t\tgroupedvar = {\"list\": ng};\n\t}\n\telse if(typeof groupedvar == \"string\"){\n\t\tif(groupedvar.substring(0, 2) != \"v:\") groupedvar = \"v:\" + groupedvar;\n\t}\n\targs.push(groupedvar);\n\tif(output){\n\t\tgroupquery = groupquery.json ? groupquery.json() : groupquery;\n\t\targs.push(groupquery);\n\t}\n\telse {\n\t\toutput = groupquery;\n\t\tvar sq = {};\n\t\tthis.cursor = sq;\n\t\targs.push(sq);\n\t}\n\tif(output.substring(0, 2) != \"v:\") output = \"v:\" + output;\n\targs.push(output);\n\treturn this;\n}\n\nWOQLQuery.prototype.idgen = function(prefix, vari, type, mode){\n\tthis.cursor['idgen'] = [prefix];\n\tif(vari.json){\n\t\tthis.cursor['idgen'].push(vari.json());\n\t}\n\telse if(vari.list){\n\t\tthis.cursor['idgen'].push(vari);\n\t}\n\telse {\n\t\tthis.cursor['idgen'].push({\"list\": vari})\n\t}\n\tif(mode){\n\t\tthis.cursor['idgen'].push(mode);\n\t}\n\tthis.cursor['idgen'].push(type);\n\treturn this;\n}\n\n\nWOQLQuery.prototype.unique = function(prefix, vari, type){\n\tthis.cursor['unique'] = [prefix];\n\tif(vari.json){\n\t\tthis.cursor['unique'].push(vari.json());\n\t}\n\telse if(vari.list){\n\t\tthis.cursor['unique'].push(vari);\n\t}\n\telse {\n\t\tthis.cursor['unique'].push({\"list\": vari})\n\t}\n\tthis.cursor['unique'].push(type);\n\treturn this;\n}\n\n\nWOQLQuery.prototype.concat = function(list, v){\n\tif(typeof list == \"string\"){\n\t\tvar nlist = list.split(/(v:[\\w_]+)\\b/);\n\t\tvar nxlist = [];\n\t\tfor(var i = 1; i<nlist.length; i++){\n\t\t\tif(nlist[i-1].substring(nlist[i-1].length-1) == \"v\" && nlist[i].substring(0, 1) == \":\"){\n\t\t\t\tnlist[i-1] = nlist[i-1].substring(0, nlist[i-1].length-1);\n\t\t\t\tnlist[i] = nlist[i].substring(1);\n\t\t\t}\n\t\t}\n\t}\n\telse if(list.list){\n\t\tvar nlist = list.list;\n\t}\n\telse if(typeof list == \"object\"){\n\t\tvar nlist = list;\n\t}\n\tvar args = [];\n\tfor(var i = 0; i<nlist.length; i++){\n\t\tif(!nlist[i]) continue;\n\t\tif(typeof nlist[i] == \"string\"){\n\t\t\tif(nlist[i].substring(0, 2) == \"v:\"){\n\t\t\t\targs.push(nlist[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar nvalue = {\"@value\": nlist[i], \"@type\": \"xsd:string\"};\n\t\t\t\targs.push(nvalue);\n\t\t\t}\n\t\t}\n\t\telse if(nlist[i]){\n\t\t\targs.push(nlist[i]);\n\t\t}\n\t}\n\tif(v.indexOf(\":\") == -1) v = \"v:\" + v;\n\tthis.cursor['concat'] = [{\"list\": args}, v];\n\treturn this;\n};\n\nWOQLQuery.prototype.lower = function(u, l){\n\tthis.cursor['lower'] = [u, l];\n\treturn this;\n};\n\nWOQLQuery.prototype.pad = function(input, pad, len, output){\n\tthis.cursor['pad'] = [input, pad, len, output];\n\treturn this;\n}\n\nWOQLQuery.prototype.join = function(...list){\n\tthis.cursor['join'] = list;\n\treturn this;\n}\n\nWOQLQuery.prototype.less = function(v1, v2){\n\tthis.cursor['less'] = [v1, v2];\n\treturn this;\n}\n\nWOQLQuery.prototype.greater = function(v1, v2){\n\tthis.cursor['greater'] = [v1, v2];\n\treturn this;\n}\n\n\nWOQLQuery.prototype.list  = function(...vars){\n\tthis.cursor['list'] = vars;\n\treturn this;\n}\n\n\n/*\n * json version of query for passing to api\n */\nWOQLQuery.prototype.json = function(json){\n\tif(json){\n\t\tthis.query = json;\n\t\treturn this;\n\t}\n\treturn this.query;\n}\n\n/*\n * Functions which take a query as an argument advance the cursor to make the chaining of queries fall\n * into the corrent place in the encompassing json\n */\nWOQLQuery.prototype.when = function(Query, Update){\n\tif(typeof Query == 'boolean'){\n\t\tif(Query){\n\t\t\tthis.cursor[\"when\"] = [{\"true\": []}, {}];\n\t\t}\n\t\telse {\n\t\t\tthis.cursor[\"when\"] = [{\"false\": []}, {}];\n\t\t}\n\t}\n\telse {\n\t\tvar q = (Query.json ? Query.json() : Query);\n\t\tthis.cursor['when'] = [q, {}];\n\t}\n\tif(Update){\n\t\tvar upd = (Update.json ? Update.json() : Update);\n\t\tthis.cursor[\"when\"][1] = upd;\n\t}\n\tthis.cursor = this.cursor[\"when\"][1];\n\treturn this;\n}\n\nWOQLQuery.prototype.opt = function(query){\n\tif(query){\n\t\tvar q = ((typeof query.json == \"function\") ? query.json() : query);\n\t\tthis.cursor[\"opt\"] = [q];\n\t}\n\telse {\n\t\tthis.cursor['opt'] = [{}];\n\t\tthis.cursor = this.cursor[\"opt\"][0];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.from = function(dburl, query){\n\tthis.advanceCursor(\"from\", dburl);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.into = function(dburl, query){\n\tthis.advanceCursor(\"into\", dburl);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n};\n\n\nWOQLQuery.prototype.limit = function(limit, query){\n\tthis.advanceCursor(\"limit\", limit);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.start = function(start, query){\n\tthis.advanceCursor(\"start\", start);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.select = function (...list) {\n\tthis.cursor.select = list;\n\tconst index = list.length;\n\tif (typeof this.cursor.select[index - 1] === 'object') {\n\t\tthis.cursor.select[index - 1] = this.cursor.select[index - 1].json();\n\t} else {\n\t\tthis.cursor.select[index] = {};\n\t\tthis.cursor = this.cursor.select[index];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.and = function (...queries) {\n\tthis.cursor.and = [];\n\tfor (let i = 0; i < queries.length; i++) {\n\t\tif (queries[i].contains_update) this.contains_update = true;\n\t\tthis.cursor.and.push(queries[i].json());\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.or = function (...queries) {\n\tthis.cursor.or = [];\n\tfor (let i = 0; i < queries.length; i++) {\n\t\tif (queries[i].contains_update) this.contains_update = true;\n\t\tthis.cursor.or.push(queries[i].json());\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.not = function (query) {\n\tif (query) {\n\t\tif (query.contains_update) this.contains_update = true;\n\t\tthis.cursor.not = [query.json()];\n\t} else {\n\t\tthis.cursor.not = [{}];\n\t\tthis.cursor = this.cursor.not[0];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.triple = function(a, b, c){\n\tthis.cursor[\"triple\"] = [this.cleanSubject(a),this.cleanPredicate(b),this.cleanObject(c)];\n\treturn this.last(\"triple\", this.cleanSubject(a));\n}\n\nWOQLQuery.prototype.quad = function(a, b, c, g){\n\tthis.cursor[\"quad\"] = [this.cleanSubject(a),this.cleanPredicate(b),this.cleanObject(c),this.cleanGraph(g)];\n\treturn this.last(\"quad\", this.cleanSubject(a));\n}\n\nWOQLQuery.prototype.eq = function(a, b){\n\tthis.cursor[\"eq\"] = [this.cleanObject(a),this.cleanObject(b)];\n\treturn this.last();\n};\n\nWOQLQuery.prototype.sub = function(a, b){\n\tif(!b && this.tripleBuilder){\n\t\tthis.tripleBuilder.sub(this.cleanClass(a));\n\t\treturn this;\n\t}\n\tthis.cursor[\"sub\"] = [this.cleanClass(a),this.cleanClass(b)];\n\treturn this.last(\"sub\", a);\n}\n\nWOQLQuery.prototype.comment = function(val){\n\tif(val && val.json){\n\t\tthis.cursor['comment'] = [val.json()];\n\t}\n\telse if(typeof val == \"string\"){\n\t\tthis.cursor['comment'] = [{\"@value\": val, \"@language\": \"en\"}];\n\t}\n\telse if(typeof val == \"object\"){\n\t\tif(val.length) this.cursor['comment'] = val;\n\t\telse this.cursor['comment'] = [val];\n\t}\n\telse {\n\t\tthis.cursor['comment'] = [];\n\t}\n\tvar last_index = this.cursor['comment'].length;\n\tthis.cursor['comment'][last_index] = {};\n\tthis.cursor = this.cursor['comment'][last_index];\n\treturn this;\n}\n\n\nWOQLQuery.prototype.abstract = function(varname){\n\tif(varname){\n\t\treturn this.quad(varname, \"tcs:tag\", \"tcs:abstract\", \"db:schema\");\n\t}\n\telse if(this.tripleBuilder){\n\t\tthis.tripleBuilder.abstract();\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.isa = function(a, b){\n\tif(!b && this.tripleBuilder){\n\t\tthis.tripleBuilder.isa(this.cleanClass(a));\n\t\treturn this;\n\t}\n\tif(b){\n\t\tthis.cursor[\"isa\"] = [this.cleanClass(a),this.cleanClass(b)];\n\t\treturn this.last(\"isa\", a);\n\t}\n}\n\nWOQLQuery.prototype.trim = function(a, b){\n\tthis.cursor['trim'] = [a, b];\n\treturn this.last('trim', b);\n}\n\nWOQLQuery.prototype.eval = function(arith, v){\n\tarith = arith.json ? arith.json() : arith;\n\tthis.cursor['eval'] = [arith, v];\n\treturn this.last('eval', v);\n}\n\nWOQLQuery.prototype.plus = function (...args) {\n\tthis.cursor.plus = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.plus.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.minus = function (...args) {\n\tthis.cursor.minus = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.minus.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.times = function (...args) {\n\tthis.cursor.times = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.times.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.divide = function (...args) {\n\tthis.cursor.divide = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.divide.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.div = function (...args) {\n\tthis.cursor.div = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.div.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.exp = function (a, b) {\n\ta = (a.json ? a.json() : a);\n\tb = (b.json ? b.json() : b);\n\tthis.cursor.exp = [a, b];\n\treturn this.last();\n};\n\nWOQLQuery.prototype.delete = function (JSON_or_IRI) {\n\tthis.cursor.delete = [JSON_or_IRI];\n\treturn this.lastUpdate();\n};\n\nWOQLQuery.prototype.delete_triple = function( Subject, Predicate, Object_or_Literal ){\n\tthis.cursor['delete_triple'] = [this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal)];\n\treturn this.lastUpdate('delete_triple', this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.add_triple = function( Subject, Predicate, Object_or_Literal ){\n\tthis.cursor['add_triple'] =[this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal)];\n\treturn this.lastUpdate('add_triple', this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.delete_quad = function( Subject, Predicate, Object_or_Literal, Graph ){\n\tthis.cursor['delete_quad'] =[this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal),this.cleanGraph(Graph)];\n\treturn this.lastUpdate('delete_quad', this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.add_quad = function( Subject, Predicate, Object_or_Literal, Graph){\n\tthis.cursor['add_quad'] = [this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal),this.cleanGraph(Graph)];\n\treturn this.lastUpdate(\"add_quad\", this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.update = function(woql){\n\tthis.cursor['update'] = [ woql.json() ];\n\treturn this.lastUpdate();\n}\n\n/**\n * Schema manipulation shorthand\n */\nWOQLQuery.prototype.addClass = function(c, graph){\n\tif(c){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tc = (c.indexOf(\":\") == -1) ? \"scm:\" + c : c;\n\t\tthis.add_quad(c, \"rdf:type\", \"owl:Class\", graph);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.addProperty = function(p, t, g){\n\tt = (t ? t : \"xsd:string\");\n\tif(p){\n\t\tvar graph = (g ? this.cleanGraph(g) : \"db:schema\");\n\t\tp = (p.indexOf(\":\") == -1) ?  \"scm:\" + p : p;\n\t\tt = (t.indexOf(\":\") == -1) ? this.cleanType(t) : t ;\n\t\tvar tc = this.cursor;\n\t\tif(WOQL.isLiteralType(t)){\n\t\t\tthis.and(\n\t\t\t\tWOQL.add_quad(p, \"rdf:type\", \"owl:DatatypeProperty\", graph),\n\t\t\t\tWOQL.add_quad(p, \"rdfs:range\", t, graph)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tthis.and(\n\t\t\t\tWOQL.add_quad(p, \"rdf:type\", \"owl:ObjectProperty\", graph),\n\t\t\t\tWOQL.add_quad(p, \"rdfs:range\", t, graph)\n\t\t\t);\n\t\t}\n\t}\n\treturn this.lastUpdate(\"add_quad\", this.cleanClass(p));\n}\n\nWOQLQuery.prototype.deleteClass = function(c, graph){\n\tif(c){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tc = (c.indexOf(\":\") == -1) ?  \"scm:\" + c : c;\n\t\treturn this.and(\n\t\t\tWOQL.delete_quad(c, \"v:All\", \"v:Al2\", graph),\n\t\t\tWOQL.opt().delete_quad(\"v:Al3\", \"v:Al4\", c, graph)\n\t\t);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.deleteProperty = function(p, graph){\n\tif(p){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tp = (p.indexOf(\":\") == -1) ? \"scm:\" + p : p;\n\t\treturn this.and(\n\t\t\tWOQL.delete_quad(p, \"v:All\", \"v:Al2\", graph),\n\t\t\tWOQL.delete_quad(\"v:Al3\", \"v:Al4\", p, graph)\n\t\t);\n\t}\n\treturn this;\n}\n\n/**\n * Language elements that cannot be invoked from the top level and therefore are not exposed in the WOQL api\n */\nWOQLQuery.prototype.as = function(a, b){\n\tif(!a || !b) return;\n\tif(!this.asArray){\n\t\tthis.asArray = true;\n\t\tthis.query = [];\n\t}\n\tb = (b.indexOf(\":\") == -1 ? \"v:\" + b : b);\n\tvar val = (typeof a == \"object\" ? a : { \"@value\" : a});\n\tthis.query.push({as: [val, b]});\n\treturn this;\n}\n\n/**\n * WOQL API\n */\n\nWOQLQuery.prototype.node = function(node, type){\n\ttype = (type ? type : \"triple\");\n\tthis.tripleBuilder = new TripleBuilder(type, this.cursor, node);\n\treturn this;\n}\n\nWOQLQuery.prototype.max = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"max\");\n\treturn this;\n}\n\nWOQLQuery.prototype.cardinality = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"cardinality\");\n\treturn this;\n}\n\nWOQLQuery.prototype.min = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"min\");\n\treturn this;\n}\n\nWOQLQuery.prototype.graph = function(g){\n\tg = this.cleanGraph(g);\n\tvar t = (this.type == \"triple\") ? \"quad\" : false;\n\tif(this.type == \"add_triple\") t = \"add_quad\";\n\tif(this.type == \"delete_triple\") t = \"delete_quad\";\n\tif(!this.tripleBuilder){\n\t\tthis.tripleBuilder = new TripleBuilder(t, this.cursor);\n\t}\n\tthis.tripleBuilder.graph(g);\n\treturn this;\n}\n\nWOQLQuery.prototype.domain = function(d){\n\td = this.cleanClass(d);\n\tif(this.tripleBuilder) this.tripleBuilder.addPO('rdfs:domain',d);\n\treturn this;\n}\n\nWOQLQuery.prototype.label = function(l, lang){\n\tif(this.tripleBuilder) this.tripleBuilder.label(l, lang);\n\treturn this;\n}\n\nWOQLQuery.prototype.description = function(c, lang){\n\tif(this.tripleBuilder) this.tripleBuilder.description(c, lang);\n\treturn this;\n}\n\nWOQLQuery.prototype.parent = function(...p){\n\tif(this.tripleBuilder){\n\t\tfor(var i = 0 ; i<p.length; i++){\n\t\t\tvar pn = this.cleanClass(p[i]);\n\t\t\tthis.tripleBuilder.addPO('rdfs:subClassOf', pn);\n\t\t}\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.entity = function(...p){\n\treturn this.parent(\"tcs:Entity\");\n}\n\nWOQLQuery.prototype.relationship = function(...p){\n\treturn this.parent(\"tcs:Entity\");\n}\n\nWOQLQuery.prototype.property = function(p,val){\n\tif(this.tripleBuilder) {\n\t\tp = this.cleanPredicate(p);\n\t\tthis.tripleBuilder.addPO(p, val);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.star = function(GraphIRI, Subj, Pred, Obj){\n\tSubj = (Subj ? this.cleanSubject(Subj) : \"v:Subject\");\n\tPred = (Pred ? this.cleanPredicate(Pred) : \"v:Predicate\");\n\tObj = (Obj  ? this.cleanObject(Obj) : \"v:Object\");\n\tGraphIRI = (GraphIRI ? this.cleanGraph(GraphIRI) : false);\n\tif(GraphIRI){\n\t\treturn this.quad(Subj, Pred, Obj, GraphIRI);\n\t}\n\telse {\n\t\treturn this.triple(Subj, Pred, Obj);\n\t}\n}\n\n\nWOQLQuery.prototype.getEverything = function(GraphIRI){\n\tif(GraphIRI){\n\t\tGraphIRI = this.cleanGraph(GraphIRI);\n\t\treturn this.quad(\"v:Subject\", \"v:Predicate\", \"v:Object\", GraphIRI);\n\t}\n\telse {\n\t\treturn this.triple(\"v:Subject\", \"v:Predicate\", \"v:Object\");\n\t}\n}\n\nWOQLQuery.prototype.getAllDocuments = function(){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", \"rdf:type\", \"v:Type\"),\n\t\tWOQL.sub(\"v:Type\", \"tcs:Document\")\n\t);\n}\n\nWOQLQuery.prototype.documentMetadata = function(){\n\treturn this.and(\n\t\tWOQL.triple(\"v:ID\", \"rdf:type\", \"v:Class\"),\n\t\tWOQL.sub(\"v:Class\", \"tcs:Document\"),\n\t\tWOQL.opt().triple(\"v:ID\", \"rdfs:label\", \"v:Label\"),\n\t\tWOQL.opt().triple(\"v:ID\", \"rdfs:comment\", \"v:Comment\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:label\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:comment\", \"v:Type_Comment\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.concreteDocumentClasses = function(){\n\treturn this.and(\n\t\tWOQL.sub(\"v:Class\", \"tcs:Document\"),\n\t\tWOQL.not().abstract(\"v:Class\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:comment\", \"v:Comment\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.propertyMetadata = function(){\n\treturn this.and(\n\t\tWOQL.or(\n\t\t\tWOQL.quad(\"v:Property\", \"rdf:type\", \"owl:DatatypeProperty\", \"db:schema\"),\n\t\t\tWOQL.quad(\"v:Property\", \"rdf:type\", \"owl:ObjectProperty\", \"db:schema\")\n\t\t),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:range\", \"v:Range\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdf:type\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:domain\", \"v:Domain\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.elementMetadata = function(){\n\treturn this.and(\n\t\tWOQL.quad(\"v:Element\", \"rdf:type\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:subClassOf\", \"v:Parent\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:domain\", \"v:Domain\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:range\", \"v:Range\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.classMetadata = function(){\n\treturn this.and(\n\t\tWOQL.quad(\"v:Element\", \"rdf:type\", \"owl:Class\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getDataOfClass = function(chosen){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", \"rdf:type\", chosen),\n\t\tWOQL.opt().triple(\"v:Subject\", \"v:Property\", \"v:Value\")\n\t);\n}\n\nWOQLQuery.prototype.getDataOfProperty = function(chosen){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", chosen, \"v:Value\"),\n\t\tWOQL.opt().triple(\"v:Subject\", \"rdfs:label\", \"v:Label\")\n\t);\n}\n\nWOQLQuery.prototype.documentProperties = function(id){\n\treturn this.and(\n\t\tWOQL.triple(id, \"v:Property\", \"v:Property_Value\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:label\", \"v:Property_Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdf:type\", \"v:Property_Type\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getDocumentConnections = function(id){\n\treturn this.and(\n\t\tWOQL.or(\n\t\t\tWOQL.triple(id, \"v:Outgoing\", \"v:Entid\"),\n\t\t\tWOQL.triple(\"v:Entid\", \"v:Incoming\", id)\n\t\t),\n\t\tWOQL.isa(\"v:Entid\", \"v:Enttype\"),\n\t\tWOQL.sub(\"v:Enttype\", \"tcs:Document\"),\n\t\tWOQL.opt().triple(\"v:Entid\", \"rdfs:label\", \"v:Label\"),\n\t\tWOQL.opt().quad(\"v:Enttype\", \"rdfs:label\", \"v:Class_Label\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getInstanceMeta = function(url){\n\treturn this.and(\n\t\tWOQL.triple(url, \"rdf:type\", \"v:InstanceType\"),\n\t\tWOQL.opt().triple(url, \"rdfs:label\", \"v:InstanceLabel\"),\n\t\tWOQL.opt().triple(url, \"rdfs:comment\", \"v:InstanceComment\"),\n\t\tWOQL.opt().quad(\"v:InstanceType\", \"rdfs:label\", \"v:ClassLabel\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.simpleGraphQuery = function(){\n\treturn this.and(\n\t    WOQL.triple(\"v:Source\", \"v:Edge\", \"v:Target\"),\n\t    WOQL.isa(\"v:Source\", \"v:Source_Class\"),\n\t    WOQL.sub(\"v:Source_Class\", \"tcs:Document\"),\n\t    WOQL.isa(\"v:Target\", \"v:Target_Class\"),\n\t    WOQL.sub(\"v:Target_Class\", \"tcs:Document\"),\n\t    WOQL.opt().triple(\"v:Source\", \"rdfs:label\", \"v:Source_Label\"),\n\t    WOQL.opt().triple(\"v:Source\", \"rdfs:comment\", \"v:Source_Comment\"),\n\t    WOQL.opt().quad(\"v:Source_Class\", \"rdfs:label\", \"v:Source_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Source_Class\", \"rdfs:comment\", \"v:Source_Type_Comment\", \"db:schema\"),\n\t    WOQL.opt().triple(\"v:Target\", \"rdfs:label\", \"v:Target_Label\"),\n\t    WOQL.opt().triple(\"v:Target\", \"rdfs:comment\", \"v:Target_Comment\"),\n\t    WOQL.opt().quad(\"v:Target_Class\", \"rdfs:label\", \"v:Target_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Target_Class\", \"rdfs:comment\", \"v:Target_Type_Comment\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Edge\", \"rdfs:label\", \"v:Edge_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Edge\", \"rdfs:comment\", \"v:Edge_Type_Comment\", \"db:schema\")\n\t);\n}\n\n\n/**\n * Queries the schema graph and loads all the ids found there as vocabulary that can be used without prefixes\n * ignoring blank node ids\n */\nWOQLQuery.prototype.loadVocabulary = function(client){\n\tvar nw = new WOQLQuery().quad(\"v:S\", \"v:P\", \"v:O\", \"db:schema\");\n\tnw.execute(client).then( (result) => {\n\t\tif(result.bindings && result.bindings.length > 0){\n\t\t\tfor(var i = 0; i<result.bindings.length; i++){\n\t\t\t\tfor(var k in result.bindings[i]){\n\t\t\t\t\tvar v = result.bindings[i][k]\n\t\t\t\t\tif(typeof v == \"string\"){\n\t\t\t\t\t\tvar spl = v.split(\":\");\n\t\t\t\t\t\tif(spl.length == 2 && spl[1] && spl[0] != \"_\"){\n\t\t\t\t\t\t\tthis.vocab[spl[1]] = v;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\n\n/**\n * Provides the query with a 'vocabulary' a list of well known predicates that can be used without prefixes mapping: id: prefix:id ...\n */\nWOQLQuery.prototype.setVocabulary = function(vocab){\n\tthis.vocab = vocab;\n}\n\nWOQLQuery.prototype.getVocabulary = function(vocab){\n\treturn this.vocab;\n}\n\nWOQLQuery.prototype.getLimit = function(){\n\treturn this.getPagingProperty(\"limit\");\n}\n\nWOQLQuery.prototype.setLimit = function(l){\n\treturn this.setPagingProperty(\"limit\", l);\n}\n\nWOQLQuery.prototype.isPaged = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"limit\") return true;\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\treturn this.isPaged(q[prop][q[prop].length-1]);\n\t\t}\n\t}\n\treturn false;\n}\n\nWOQLQuery.prototype.getPage = function(){\n\tif(this.isPaged()){\n\t\tvar psize = this.getLimit();\n\t\tif(this.hasStart()){\n\t\t\tvar s = this.getStart();\n\t\t\treturn (parseInt(s / psize) + 1);\n\t\t}\n\t\telse return 1;\n\t}\n\telse return false;\n}\n\nWOQLQuery.prototype.setPage = function(pagenum){\n\tvar pstart = (this.getLimit() * (pagenum - 1));\n\tif(this.hasStart()){\n\t\tthis.setStart(pstart);\n\t}\n\telse {\n\t\tthis.addStart(pstart);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.nextPage = function(){\n\treturn this.setPage(this.getPage() + 1);\n}\n\nWOQLQuery.prototype.firstPage = function(){\n\treturn this.setPage(1);\n}\n\nWOQLQuery.prototype.previousPage = function(){\n\tconst npage = this.getPage() - 1;\n\tif(npage > 0) this.setPage(npage);\n\treturn this;\n}\n\nWOQLQuery.prototype.setPageSize = function(size){\n\tthis.setPagingProperty(\"limit\", size);\n\tif(this.hasStart()){\n\t\tthis.setStart(0);\n\t}\n\telse {\n\t\tthis.addStart(0);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.hasSelect = function(){\n\treturn (this.getPagingProperty(\"select\") ? true : false);\n}\n\nWOQLQuery.prototype.getSelectVariables = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"select\") {\n\t\t\tvar vars = q[prop].slice(0, q[prop].length - 1);\n\t\t\treturn vars;\n\t\t}\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar val = this.getSelectVariables(q[prop][q[prop].length-1]);\n\t\t\tif(typeof val != \"undefined\"){\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t}\n}\n\nWOQLQuery.prototype.hasStart = function(){\n\treturn (typeof this.getPagingProperty(\"start\") != \"undefined\");\n}\n\nWOQLQuery.prototype.getStart = function(){\n\treturn this.getPagingProperty(\"start\");\n}\n\nWOQLQuery.prototype.setStart = function(start){\n\treturn this.setPagingProperty(\"start\", start);\n}\n\nWOQLQuery.prototype.addStart = function(s){\n\tif(this.hasStart()) this.setStart(s);\n\telse {\n\t\tvar nq = {'start': [s, this.query]};\n\t\tthis.query = nq;\n\t}\n\treturn this;\n}\n\n\n/**\n * Executes the query using the passed client to connect to a server\n */\nWOQLQuery.prototype.execute = function(client){\n\tif(!this.query[\"@context\"]){\n\t\tthis.query['@context'] = this.defaultContext(client.connectionConfig.dbURL());\n\t\tvar json = this.json();\n\t}\n\telse {\n\t\tvar json = this.json();\n\t}\n\tif(this.contains_update){\n\t\treturn client.select(false, json);\n\t\t//return client.update(false, json);\n\t}\n\telse {\n\t\treturn client.select(false, json);\n\t}\n}\n\n/*\n * Internal State Control Functions\n * Not part of public API -\n */\n\n /**\n * Advances internal cursor to support chaining of calls: limit(50).start(50). rather than (limit, [50, (start, [50, (lisp-style (encapsulation)))))\n */\nWOQLQuery.prototype.advanceCursor = function(action, value){\n\tthis.cursor[action] = [value];\n\tthis.cursor[action][1] = {};\n\tthis.cursor = this.cursor[action][1];\n}\n\nWOQLQuery.prototype.loadDefaultVocabulary = function(){\n\tvar vocab = {};\n\tvocab.type = \"rdf:type\";\n\tvocab.label = \"rdfs:label\";\n\tvocab.Class = \"owl:Class\";\n\tvocab.DatatypeProperty = \"owl:DatatypeProperty\";\n\tvocab.ObjectProperty = \"owl:ObjectProperty\";\n\tvocab.Entity = \"tcs:Entity\";\n\tvocab.Document = \"tcs:Document\";\n\tvocab.Relationship = \"tcs:Relationship\";\n\tvocab.temporality = \"tcs:temporality\";\n\tvocab.geotemporality = \"tcs:geotemporality\";\n\tvocab.geography = \"tcs:geography\";\n\tvocab.abstract = \"tcs:abstract\";\n\tvocab.comment = \"rdfs:comment\";\n\tvocab.range = \"rdfs:range\";\n\tvocab.domain = \"rdfs:domain\";\n\tvocab.subClassOf = \"rdfs:subClassOf\";\n\tvocab.string = \"xsd:string\";\n\tvocab.integer = \"xsd:integer\";\n\tvocab.decimal = \"xsd:decimal\";\n\tvocab.email = \"xdd:email\";\n\tvocab.json = \"xdd:json\";\n\tvocab.dateTime = \"xsd:dateTime\";\n\tvocab.date = \"xsd:date\";\n\tvocab.coordinate = \"xdd:coordinate\";\n\tvocab.line = \"xdd:coordinatePolyline\";\n\tvocab.polygon = \"xdd:coordinatePolygon\";\n\treturn vocab;\n}\n\nWOQLQuery.prototype.defaultContext = function(DB_IRI){\n\tlet def = {}\n\tfor(var pref in FrameHelper.standard_urls){\n\t\tdef[pref] = FrameHelper.standard_urls[pref];\n\t}\n\tdef.scm = DB_IRI + \"/schema#\"\n\tdef.doc = DB_IRI + \"/document/\"\n\tdef.db = DB_IRI + \"/\";\n\treturn def;\n}\n\n\n\n/**\n * Called to indicate that this is the last call that is chainable - for example triple pattern matching..\n *\n */\nWOQLQuery.prototype.last = function(call, subject){\n\tthis.chain_ended = true;\n\tif(call) this.tripleBuilder = new TripleBuilder(call, this.cursor, this.cleanSubject(subject));\n\treturn this;\n}\n\nWOQLQuery.prototype.lastUpdate = function(call, subj){\n\tthis.contains_update = true;\n\tvar ret = this.last(call, subj);\n\treturn ret;\n}\n\n/**\n * Returns the value of one of the 'paging' related properties (limit, start,...)\n */\nWOQLQuery.prototype.getPagingProperty = function(pageprop, q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == pageprop) return q[prop][0];\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar val = this.getPagingProperty(pageprop, q[prop][q[prop].length-1]);\n\t\t\tif(typeof val != \"undefined\"){\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Sets the value of one of the paging_transitive_properties properties\n */\nWOQLQuery.prototype.setPagingProperty = function(pageprop, val, q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == pageprop) {\n\t\t\tq[prop][0] = val;\n\t\t}\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tthis.setPagingProperty(pageprop, val, q[prop][q[prop].length-1]);\n\t\t}\n\t}\n\treturn this;\n}\n\n/**\n * Retrieves the value of the current json-ld context\n */\nWOQLQuery.prototype.getContext = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"@context\") return q[prop];\n\t\tif(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar nq = q[prop][1];\n\t\t\tvar nc = this.getContext(nq);\n\t\t\tif(nc) return nc;\n\t\t}\n\t}\n}\n\n\n/**\n * Retrieves the value of the current json-ld context\n */\nWOQLQuery.prototype.context = function(c){\n\tthis.cursor['@context'] = c;\n}\n\n\n/*\n* Transforms from internal json representation to human writable WOQL.js format\n*/\nWOQLQuery.prototype.prettyPrint = function(indent, show_context, q, fluent){\n\tif(!this.indent) this.indent = indent;\n\tq = (q ? q : this.query);\n\tvar str = \"\";\n\tconst newlining_operators = [\"get\", \"from\", \"into\"];\n\tfor(var operator in q){\n\t\t//ignore context in pretty print\n\t\tif(operator == \"@context\") {\n\t\t\tif( show_context){\n\t\t\t\tvar c = this.getContext();\n\t\t\t\tif(c) str += \"@context: \" + JSON.stringify(c) + \"\\n\";\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\t//statement starts differently depending on indent and whether it is fluent style or regular function style\n\t\tstr += this.getWOQLPrelude(operator, fluent, indent - this.indent);\n\t\tvar val = q[operator];\n\t\tif(this.chainable(operator, val[val.length-1])){\n\t\t\t//all arguments up until the last are regular function arguments\n\t\t\tstr += this.uncleanArguments(operator,  val.slice(0, val.length-1), indent, show_context);\n\t\t\tif(newlining_operators.indexOf(operator) !== -1){\n\t\t\t\t//some fluent function calls demand a linebreak..\n\t\t\t\tstr += \"\\n\" + nspaces(indent-this.indent);\n\t\t\t}\n\t\t\t//recursive call to query included in tail\n\t\t\tstr += this.prettyPrint(indent, show_context, val[val.length-1], true);\n\t\t}\n\t\telse {\n\t\t\t//non chainable operators all live inside the function call parameters\n\t\t\tstr += this.uncleanArguments(operator,  val, indent, show_context);\n\t\t}\n\t}\n\t//remove any trailing dots in the chain (only exist in incompletely specified queries)\n\tif(str.substring(str.length-1) == \".\"){\n\t\tstr = str.substring(0, str.length-1);\n\t}\n\treturn str;\n}\n\n/**\n * Gets the starting characters for a WOQL query - varies depending on how the query is invoked and how indented it is\n */\nWOQLQuery.prototype.getWOQLPrelude = function(operator, fluent, inline){\n\tif(operator === \"true\" || operator === \"false\"){\n\t\treturn operator;\n\t}\n\tif(fluent){\n\t\treturn \".\" + operator;\n\t}\n\treturn (inline ? \"\\n\" + nspaces(inline) : \"\") + \"WOQL.\" + operator;\n}\n\n/**\n * Determines whether a given operator can have a chained query as its last argument\n */\nWOQLQuery.prototype.chainable = function(operator, lastArg){\n\tconst non_chaining_operators = [\"and\", \"or\"];\n\tif(lastArg && typeof lastArg == \"object\" && typeof lastArg['@value'] == \"undefined\"  && typeof lastArg['@type'] == \"undefined\"  && typeof lastArg['value'] == \"undefined\" && non_chaining_operators.indexOf(operator) == -1){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Transforms arguments to WOQL functions from the internal (clean) version, to the WOQL.js human-friendly version\n */\nWOQLQuery.prototype.uncleanArguments = function(operator, args, indent, show_context){\n\tstr = '(';\n\tconst args_take_newlines = [\"and\", \"or\"];\n\tif(this.hasShortcut(operator, args)){\n\t\treturn this.getShortcut(args, indent);\n\t}\n\telse {\n\t\tfor(var i = 0; i<args.length; i++){\n\t\t\tif(this.argIsSubQuery(operator, args[i], i)){\n\t\t\t\tstr += this.prettyPrint(indent + this.indent, show_context, args[i], false);\n\t\t\t}\n\t\t\telse if(operator == \"get\" && i == 0){ // weird one, needs special casing\n\t\t\t\tstr += \"\\n\" + nspaces(indent-this.indent) + \"WOQL\";\n\t\t\t\tfor(var j = 0; j < args[0].length; j++){\n\t\t\t\t\tvar myas = (args[0][j].as ? args[0][j].as : args[0][j]);\n\t\t\t\t\tvar lhs = myas[0];\n\t\t\t\t\tvar rhs = myas[1];\n\t\t\t\t\tif(typeof lhs == \"object\" && lhs['@value']){\n\t\t\t\t\t\tlhs = lhs['@value'];\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof lhs == \"object\") {\n\t\t\t\t\t\tlhs = JSON.stringify(lhs);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tlhs = '\"' + lhs + '\"'\n\t\t\t\t\t}\n\t\t\t\t\tstr += '.as(' + lhs;\n\t\t\t\t\tif(rhs) str += ', \"' + rhs + '\"';\n\t\t\t\t\tstr += \")\";\n\t\t\t\t\tstr += \"\\n\" + nspaces(indent);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstr += this.uncleanArgument(operator, args[i], i, args);\n\t\t\t}\n\t\t\tif(i < args.length -1) str +=  ',';\n\t\t}\n\t}\n\tif(args_take_newlines.indexOf(operator) != -1){\n\t\tstr += \"\\n\" + nspaces(indent-this.indent);\n\t}\n\tstr += \")\";\n\treturn str;\n}\n\n\n/**\n * Passed as arguments: 1) the operator (and, triple, not, opt, etc)\n * 2) the value of the argument\n * 3) the index (position) of the argument.\n */\nWOQLQuery.prototype.uncleanArgument = function(operator, val, index, allArgs){\n\t//numeric values go out untouched...\n\tconst numeric_operators = [\"limit\", \"start\", \"eval\", \"plus\", \"minus\", \"times\", \"divide\", \"exp\", \"div\"];\n\tif(operator == \"isa\"){\n\t\tval = (index == 0 ? this.unclean(val, 'subject') : this.unclean(val, 'class'));\n\t}\n\telse if(operator == \"sub\"){\n\t\tval = this.unclean(val, 'class');\n\t}\n\telse if([\"select\"].indexOf(operator) != -1){\n\t\tif(val.substring(0, 2) == \"v:\") val = val.substring(2);\n\t}\n\telse if([\"quad\", \"add_quad\", \"delete_quad\", \"add_triple\", \"delete_triple\", \"triple\"].indexOf(operator) != -1){\n\t\tswitch(index){\n\t\t\tcase 0: val = this.unclean(val, \"subject\"); break;\n\t\t\tcase 1: val = this.unclean(val, \"predicate\"); break;\n\t\t\tcase 2: val = this.unclean(val, \"object\"); break;\n\t\t\tcase 3: val = this.unclean(val, \"graph\"); break;\n\t\t}\n\t}\n\tif(typeof val == \"object\"){\n\t\tif(operator == \"concat\" && index == 0){\n\t\t\tvar cstr = \"\";\n\t\t\tif(val.list){\n\t\t\t\tfor(var i = 0 ; i<val.list.length; i++){\n\t\t\t\t\tif(val.list[i]['@value']) cstr += val.list[i]['@value'];\n\t\t\t\t\telse cstr += val.list[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar oval = '\"' + cstr + '\"';\n\t\t}\n\t\telse {\n\t\t\tvar oval = this.uncleanObjectArgument(operator, val, index);\n\t\t}\n\t\treturn oval;\n\t}\n\t//else if(numeric_operators.indexOf(operator) !== -1){\n\t//\treturn val;\n\t//}\n\tif(typeof val == \"string\"){\n\t\treturn '\"' + val + '\"';\n\t}\n\treturn val;\n}\n\n\n\nWOQLQuery.prototype.uncleanObjectArgument = function(operator, val, index){\n\tif(val['@value'] && (val['@language'] || (val['@type'] && val['@type'] == \"xsd:string\"))) return '\"' + val['@value'] + '\"';\n\tif(val['@value'] && (val['@type'] && val['@type'] == \"xsd:integer\")) return val['@value'];\n\tif(val['list']) {\n\t\tvar nstr = \"[\";\n\t\tfor(var i = 0 ; i<val['list'].length; i++){\n\t\t\tif(typeof val['list'][i] == \"object\"){\n\t\t\t\tnstr += this.uncleanObjectArgument(\"list\", val['list'][i], i);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnstr += '\"' + val['list'][i] + '\"';\n\t\t\t}\n\t\t\tif(i < val['list'].length-1){\n\t\t\t\tnstr += \",\";\n\t\t\t}\n\t\t}\n\t\tnstr += \"]\";\n\t\treturn nstr;\n\t}\n\treturn JSON.stringify(val);\n}\n\nWOQLQuery.prototype.argIsSubQuery = function(operator, arg, index){\n\tconst squery_operators = [\"and\", \"or\", \"when\", \"not\", \"opt\", \"exp\", \"minus\", \"div\", \"divide\", \"plus\", \"multiply\"];\n\tif(squery_operators.indexOf(operator) !== -1){\n\t\tif(arg && typeof arg != \"object\") return false;\n\t\treturn true;\n\t}\n\tif(operator == \"group_by\" && index == 2) return true;\n\telse return false;\n}\n\n/**\n * Goes from the properly prefixed clean internal version of a variable to the WOQL.js unprefixed form\n */\nWOQLQuery.prototype.unclean = function(s, part){\n\tif(typeof s != \"string\") return s;\n\tif(s.indexOf(\":\") == -1) return s;\n\tif(s.substring(0,4) == \"http\") return s;\n\tvar suff = s.split(\":\")[1];\n\tif(this.vocab && this.vocab[suff] && this.vocab[suff] == s){\n\t\treturn suff;\n\t}\n\tif(!part) return s;\n\tif(part == \"subject\" && (s.split(\":\")[0] == \"doc\")) return suff;\n\tif(part == \"class\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"predicate\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"type\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"graph\" && (s.split(\":\")[0] == \"db\")) return suff;\n\treturn s;\n}\n\nWOQLQuery.prototype.hasShortcut = function(operator, args, indent, show_context){\n\tif(operator == \"true\") return true;\n}\n\nWOQLQuery.prototype.getShortcut = function(operator, args, indent, show_context){\n\tif(operator == \"true\") return true;\n}\n\nfunction nspaces(n){\n\tlet spaces = \"\";\n\tfor(var i = 0; i<n; i++){\n\t\tspaces += \" \";\n\t}\n\treturn spaces;\n}\n\nWOQLQuery.prototype.printLine = function(indent, clauses){\n\treturn \"(\\n\" + nspaces(indent) + \"WOQL.\" + clauses.join(\",\\n\"+ nspaces(indent) + \"WOQL.\") + \"\\n\" + nspaces(indent - this.indent) + \")\";\n}\n\nWOQLQuery.prototype.cleanSubject = function(s){\n\tif(typeof s != \"string\") return s;\n\tif(s.indexOf(\":\") != -1) return s;\n\tif(this.vocab && this.vocab[s]) return this.vocab[s];\n\treturn \"doc:\" + s;\n}\n\nWOQLQuery.prototype.cleanPredicate = function(p){\n\tif(p.indexOf(\":\") != -1) return p;\n\tif(this.vocab && this.vocab[p]) return this.vocab[p];\n\treturn \"scm:\" + p;\n}\nWOQLQuery.prototype.cleanType = function(t){\n\tif(t.indexOf(\":\") != -1) return t;\n\tif(this.vocab && this.vocab[t]) return this.vocab[t];\n\treturn \"scm:\" + t;\n}\n\nWOQLQuery.prototype.cleanObject = function(o){\n\tif(typeof o != \"string\" || o.indexOf(\":\") != -1) return o;\n\tif(this.vocab && this.vocab[o]) return this.vocab[o];\n\treturn { \"@value\": o, \"@language\": \"en\"};\n}\n\nWOQLQuery.prototype.cleanGraph = function(g){\n\tif(g.indexOf(\":\") != -1) return g;\n\tif(this.vocab && this.vocab[g]) return this.vocab[g];\n\treturn \"db:\" + g;\n}\n\nWOQLQuery.prototype.cleanClass = function(c){\n\tif(c.indexOf(\":\") != -1) return c;\n\tif(this.vocab && this.vocab[c]) return this.vocab[c];\n\treturn \"scm:\" + c;\n}\n\n/*\n * higher level composite queries - not language or api elements\n */\n/**\n * Class for enabling building of triples from pieces\n * type is add_quad / remove_quad / add_triple / remove_triple\n */\nfunction TripleBuilder(type, cursor, s){\n\t//what accumulation type are we\n\tthis.type = type;\n\tthis.cursor = cursor;\n\tthis.subject = (s ? s : false);\n\tthis.g = false;\n}\n\nTripleBuilder.prototype.label = function(l, lang){\n\tlang = (lang ? lang : \"en\");\n\tif(l.substring(0, 2) == \"v:\"){\n\t\tvar d = {\"value\": l, \"@language\": lang }\n\t}\n\telse {\n\t\tvar d = {\"@value\": l, \"@language\": lang }\n\t}\n\tvar x = this.addPO('rdfs:label', d);\n\treturn x;\n}\n\nTripleBuilder.prototype.description = function(c, lang){\n\tlang = (lang ? lang : \"en\");\n\tif(c.substring(0, 2) == \"v:\"){\n\t\tvar d = {\"value\": c, \"@language\": lang }\n\t}\n\telse {\n\t\tvar d = {\"@value\": c, \"@language\": lang }\n\t}\n\treturn this.addPO('rdfs:comment', d);\n}\n\nTripleBuilder.prototype.addPO = function(p, o, g){\n\tif(this.type){\n\t\tvar ttype = (this.type == \"isa\" || this.type == \"sub\" ? \"triple\" : this.type);\n\t}\n\telse var ttype = \"triple\";\n\tvar evstr = ttype + '(\"' + this.subject + '\", \"' + p + '\", ';\n\tif(typeof o == \"string\"){\n\t\tevstr += \"'\" + o + \"'\";\n\t}\n\telse if(typeof o == \"object\"){\n\t\tevstr += JSON.stringify(o);\n\t}\n\telse {\n\t\tevstr += o;\n\t}\n\tif(ttype.substring(ttype.length-4) == \"quad\" || this.g){\n\t\tvar g = (g ? g : (this.g ? this.g : \"db:schema\"));\n\t\tevstr += ', \"' + g + '\"';\n\t}\n\tevstr += \")\";\n\ttry {\n\t\tvar unit = eval(\"new WOQLQuery().\" + evstr );\n\t\treturn this.addEntry(unit);\n\t}\n\tcatch(e){\n\t\tconsole.error(e);\n\t\treturn this;\n\t}\n}\n\nTripleBuilder.prototype.getO = function(s, p){\n\tif(this.cursor['and']){\n\t\tfor(var i = 0; i<this.cursor['and'].length; i++){\n\t\t\tvar clause = this.cursor['and'][i];\n\t\t\tvar key = Object.keys(clause)[0];\n\t\t\tif(clause[key][0] == s && clause[key][1] == p && clause[key][2]) return clause[key][2];\n\t\t}\n\t}\n\telse if(Object.keys(this.cursor)) {\n\t\tvar key =  Object.keys(this.cursor)[0];\n\t\tif(this.cursor[key][0] == s && this.cursor[key][1] == p && this.cursor[key][2])  return this.cursor[key][2];\n\t}\n\treturn false;\n}\n\nTripleBuilder.prototype.addEntry = function(unit){\n\tif(this.cursor[this.type]){\n\t\tvar next = {};\n\t\tnext[this.type] = this.cursor[this.type];\n\t\tthis.cursor['and'] = [next];\n\t\tdelete(this.cursor[this.type]);\n\t}\n\tif(this.cursor['and']){\n\t\tthis.cursor['and'].push(unit.json());\n\t}\n\telse {\n\t\tvar j = unit.json();\n\t\tif(j[this.type]) this.cursor[this.type] = j[this.type];\n\t\telse {\n\t\t\talert(JSON.stringify(j));\n\t\t}\n\t}\n\treturn this;\n}\n\nTripleBuilder.prototype.card = function(n, which){\n\tlet os = this.subject;\n\tthis.subject += \"_\" + which;\n\tthis.addPO('rdf:type', \"owl:Restriction\");\n\tthis.addPO(\"owl:onProperty\", os);\n\tswitch(which){\n\t\tcase \"max\": this.addPO(\"owl:maxCardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t\t\tbreak;\n\t\tcase \"min\": this.addPO(\"owl:minCardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t\t\tbreak;\n\t\tdefault: this.addPO(\"owl:cardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t}\n\tlet od = this.getO(os, \"rdfs:domain\");\n\tif(od){\n\t\tvar x = this.subject;\n\t\tthis.subject = od;\n\t\tthis.addPO(\"rdfs:subClassOf\", this.subject);\n\t\t//this.triples.push([od, \"rdfs:subClassOf\", this.subject]);\n\t}\n\tthis.subject = os;\n\treturn this;\n};\n\nTripleBuilder.prototype.isa = function(a){\n\tvar unit = new WOQLQuery.isa(this.subject, a);\n\tthis.tb.addEntry(unit);\n}\n\nTripleBuilder.prototype.graph = function(g){\n\tthis.g = g;\n}\n\nTripleBuilder.prototype.sub = function(s){\n\tvar unit = new WOQLQuery.sub(this.subject, s);\n\treturn this.addEntry(unit);\n}\n\nTripleBuilder.prototype.abstract = function(){\n\treturn this.addPO('tcs:tag', \"tcs:abstract\");\n}\n\nmodule.exports = WOQL;\n","function Codemirror(text, format, config){\n  this.textdom = text;\n  this.mode = format;\n  if(objectIsEmpty(config)) this.darkMode = config.darkMode;\n  if(this.jsonldCheck(format)) this.mode = 'javascript';\n}\n// checks if a json object is empty\nfunction objectIsEmpty(arg) {\n  for (var item in arg) {\n    return false;\n  }\n  return true;\n}\n\nfunction autocomplete(){\n    var orig = CodeMirror.hint.javascript = function (cm) {\n        var list = [];//\"limit()\",\"start()\",\"triple()\"];//Session.get(Template.strSessionDistinctFields) || [];\n        var cursor = cm.getCursor();\n        var currentLine = cm.getLine(cursor.line);\n        var start = cursor.ch;\n        var end = start;\n        while (end < currentLine.length && /[\\w$]+/.test(currentLine.charAt(end))) ++end;\n        while (start && /[\\w$]+/.test(currentLine.charAt(start - 1))) --start;\n        var curWord = start != end && currentLine.slice(start, end);\n        var regex = new RegExp('^' + curWord, 'i');\n        var result = {\n            list: (!curWord ? list : list.filter(function (item) {\n                return item.match(regex);\n            })).sort(),\n            from: CodeMirror.Pos(cursor.line, start),\n            to: CodeMirror.Pos(cursor.line, end)\n        };\n        return result;\n    };\n    // codeMirror.hint.sql is defined when importing codemirror/addon/hint/sql-hint\n    // (this is mentioned in codemirror addon documentation)\n    // Reference the hint function imported here when including other hint addons\n    // or supply your own\n   \t//cm.replaceSelection(\".\");\n    //codeMirror.showHint(cm, CodeMirror.hint.javascript, hintOptions);\n}\n\n/*\ntxtar    : editor is attached to textar\nmode     : format for highlighting, ex: json, html etc.\neditable : readOnly false/ nocursor is special value in code editor to set readonly true */\nCodemirror.prototype.colorizeTextArea = function(dimensions){\n    //initize auto complete\n    /*CodeMirror.commands.autocomplete = function(cm) {\n    cm.showHint({hint: CodeMirror.hint.anyword});\n    }*/\n\n    // initialise code editor on text area\n    var editor = CodeMirror.fromTextArea(this.textdom, {\n        mode                : this.mode,\n        firstLineNumber     : 1,\n        lineNumbers         : true,\n        styleActiveLine     : true,\n        lineWrapping        : true,\n        smartIndent         : true,\n        indentWithTabs      : true,\n        newlineAndIndent    : true,\n        autoCloseBrackets   : true,\n        matchBrackets       : {afterCursor: true},\n        extraKeys           : {\"Ctrl-F\": \"find\",\n                               //\"Tab\": \"autocomplete\",\n                               \"Ctrl-Q\": function(cm){ cm.foldCode(cm.getCursor()); }},\n        refresh             : true,\n        foldGutter          : true,\n        gutters             : [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\"]\n    });\n    editor.foldCode(CodeMirror.Pos(13, 0));\n    if(false && !(objectIsEmpty(dimensions))){\n      editor.setSize(dimensions.width, dimensions.height);\n    }\n    else this.setCodemirrorSize(editor, dimensions);\n    editor.defaultCharWidth('20px');\n    if(true || this.darkMode) editor.setOption(\"theme\", 'erlang-dark');\n    else editor.setOption(\"theme\", 'neo');\n    return editor;\n} // colorizeTextArea()\n\n/*\n  set editor size according to screens\n  editor : code mirror editor Object\n  mode   : editor being viewed from schema/ doc/ query page*/\nCodemirror.prototype.setCodemirrorSize = function(editor, dimensions){\n  switch(dimensions){\n    case 'query':\n      editor.setSize('auto', '400');\n    break;\n    case 'schema':\n      editor.setSize('auto', '1550');\n    break;\n    case 'document':\n     editor.setSize('765', '500');\n    break;\n    case 'api-doc':\n        editor.setSize('800', '500');\n    break;\n    case 'doc-json':\n        editor.setSize('1410', 'auto');\n    break;\n    case 'doc-json-create':\n        editor.setSize('1410', '500');\n    break;\n  } // switch(dimensions)\n} // setCodemirrorSize()\n\n// updateTextArea(): highlights new changes on editor\nCodemirror.prototype.updateTextArea = function(editor){\n  editor.save();\n  setTimeout(function() {\n      editor.refresh();\n  },1);\n  // save changes of code mirror editor\n  editor.on('change', function(){\n    editor.save();\n  });\n} //updateTextArea()\n\n/*\ncolorizePre() to colorise pre tags (read only mode)\ntext (string)    : The document to run through the highlighter.\nmode (mode spec) : format to highlight color\noutput (DOM node): The tokens will be converted to spans as in an editor,\n                   and inserted into the node (through innerHTML).*/\nCodemirror.prototype.colorizePre = function(){\n  CodeMirror.runMode(this.textdom.innerText, this.mode, this.textdom);\n  if(true || this.darkMode)\n      var theme = 'cm-s-erlang-dark';\n  else var theme = 'cm-s-neo';\n  this.textdom.setAttribute('class', 'CodeMirror CodeMirror-wrap ' + theme + ' terminus-wrap-text terminus-wrapper-height ');\n  return this.textdom;\n} // colorizePre()\n\nCodemirror.prototype.jsonldCheck = function(format){\n  if(format == 'jsonld') return true;\n}\n\nmodule.exports=Codemirror\n","/*\n * User Interface elements dealing with database level functions - view, delete, create, db\n * view document etc\n */\nconst UTILS=require('./Utils');\nconst TerminusClient = require('@terminusdb/terminus-client');\nconst HTMLHelper = require('./html/HTMLHelper');\nconst TerminusViewer = require(\"./html/TerminusViewer\");\n\n\n/**\n * DB home page main function\n * @param {TerminusUI} ui\n */\nfunction TerminusDBViewer(ui){\n\tthis.ui = ui;\n\tthis.tv = new TerminusViewer(ui.client);\n\tthis.container = document.createElement(\"span\");\n\tthis.container.setAttribute(\"class\", \"terminus-main-page\");\n\tthis.pages = [\"home\"];\n}\n\n//Document configuration for DB meta-data listing on DB home page\nTerminusDBViewer.prototype.getDatabaseDocumentConfig = function(){\n\tvar property_style = \"display: block; padding: 0.3em 1em;\"\n\tvar box_style = \"padding: 8px; border: 1px solid #afafaf; background-color: #efefef;\"\n\tvar label_style = \"display: inline-block; min-width: 100px; font-weight: 600; color: #446ba0;\";\n\tvar value_style = \"font-weight: 400; color: #002856;\";\n\tvar config = TerminusClient.View.document();\n\tconfig.show_all(\"SimpleFrameViewer\");\n\tconfig.object().style(box_style);\n\tconfig.object().headerFeatures(\"id\").style(property_style).args({headerStyle: label_style + \" padding-right: 10px;\", bodyStyle: value_style, label: \"Database ID\", removePrefixes: true});\n\tconfig.object().headerFeatures(\"type\").style(property_style).args({headerStyle: label_style + \" padding-right: 10px;\", bodyStyle: value_style})\n\tconfig.object().features(\"value\").style(property_style);\n\tconfig.property().features(\"label\").style(label_style);\n\tconfig.property().features(\"label\", \"value\");\n\tconfig.property().property(\"terminus:id\").hidden(true);\n\tconfig.data().features(\"value\").style(value_style);\n\treturn config;\n}\n\n\n/**\n * Query Pane Configurations\n */\n\n//documents home page table\nTerminusDBViewer.prototype.getDocumentsQueryPane = function(docs, docClasses){\n\tvar table = TerminusClient.View.table();\n\t//table.pager(true);\n\ttable.column('ID').header('Document ID');\n\ttable.column('Label').header('Name');\n\ttable.column('Comment').header('Description');\n\ttable.column_order(\"ID\", \"Label\", \"Type\", \"Comment\");\n\tvar self = this;\n\tvar x = function(row){\n\t\tself.showDocumentPage(row[\"v:ID\"], docClasses, false, docs);\n\t}\n\ttable.row().click(x);\n\tvar qp = this.tv.getResult(docs.query, table, docs);\n\treturn qp;\n}\n\n\n//Create document page pane configuration\t\t\nTerminusDBViewer.prototype.getCreateDataPaneConfig = function(){\n\tconst pc = {\n\t\tshowQuery: false, \n\t\teditQuery: false\n\t};\n\treturn pc;\n}\n\n//Document configuration for create document page\nTerminusDBViewer.prototype.getCreateDocumentConfig = function(){\n\tvar property_style = \"display: block; padding: 0.3em 1em;\"\n\tvar box_style = \"padding: 8px; border: 1px solid #afafaf; background-color: #efefef;\"\n\tvar label_style = \"display: inline-block; min-width: 100px; font-weight: 600; color: #446ba0;\";\n\tvar value_style = \"font-weight: 400; color: #002856;\";\n\t\n\tvar config = TerminusClient.View.document().load_schema(true);\n\tconfig.all().mode(\"edit\");\n\tconfig.show_all(\"SimpleFrameViewer\");\n\tconfig.object().style(box_style);\n\tconfig.object().depth(0).headerFeatures(\"id\").style(property_style).args({headerStyle: label_style + \" padding-right: 10px;\", bodyStyle: value_style, label: \"Document ID\", removePrefixes: true});\n\tconfig.object().headerFeatures(\"type\").style(property_style).args({headerStyle: label_style + \" padding-right: 10px;\", bodyStyle: value_style})\n\tconfig.object().features(\"value\").style(property_style);\n\tconfig.property().features(\"label\").style(label_style);\n\tconfig.property().features(\"label\", \"value\");\n\tconfig.property().property(\"terminus:id\").hidden(true);\n\tconfig.data().features(\"value\").style(value_style);\n\treturn config;\n}\n\n//Document configuration for view / edit document page\nTerminusDBViewer.prototype.getShowDocumentConfig = function(){\n\tvar property_style = \"display: block; padding: 1.5em 1em 0.8em 1em; position: relative;\"\n\tvar config = TerminusClient.View.document().load_schema(true);\n\tconfig.show_all(\"SimpleFrameViewer\");\n\tconfig.object().depth(0).style(\"border: 1px solid #aaa; background-color: #fafafd\").headerStyle(\"background-color: #002856; color: white; padding: 8px; display: block; \");\n\tconfig.object().headerFeatures(\"id\", \"type\").args({headerStyle: \"text-align: right; display: inline-block; width: 200px; padding-right: 10px; text-weight: 600px; color: white\"});\n\t//config.object().headerFeatures(\"mode\").style(\"float: right\");\n\tconfig.object().features(\"value\").style(property_style);\n\tconfig.property().features(\"label\", \"value\");\n\tconfig.property().features(\"label\").style(\"text-align: right; display: inline-block; width: 200px; padding-right: 10px; font-weight: 600; color: #002856\");\n\tconfig.property().features(\"value\").style(\"display: inline-block; vertical-align: top\");\n\tconfig.data().features(\"value\").style(\"color: #002856; display: block; margin-bottom: 1em;\");\n\treturn config;\n};\n\nTerminusDBViewer.prototype.getDocumentsGraphConfig = function(res){\n\tvar graph = TerminusClient.View.graph();\n\tgraph.literals(false);\n\tgraph.height(800).width(1250);\n\tgraph.edges([\"v:doc1\", \"v:doc2\"], [\"v:doc1\", \"v:Enttype\"], [\"v:doc2\", \"v:Enttype2\"]);\n\tgraph.node(\"v:Label\", \"v:Label2\", \"v:Predicate\").hidden(true);\n\tgraph.edge(\"v:doc1\", \"v:doc2\").distance(100).text(\"v:Predicate\");\n\tgraph.edge(\"v:doc1\", \"v:Enttype\").distance(100).text(\"Class\");\n\tgraph.edge(\"v:doc2\", \"v:Enttype2\").distance(100).text(\"Class\");\n    graph.node(\"v:Enttype\").text(\"v:Enttype\").color([200, 250, 200]).icon({label: true, color: [15, 50, 10]}).collisionRadius(80);\n    graph.node(\"v:Enttype2\").text(\"v:Enttype2\").color([200, 250, 200]).icon({label: true, color: [15, 50, 10]}).collisionRadius(80);\n\tgraph.node(\"v:doc1\").size(24).text(\"v:Label1\").icon({label: true, color: [15, 50, 10]}).collisionRadius(80)\n\tgraph.node(\"v:doc2\").size(24).text(\"v:Label2\").icon({label: true, color: [15, 50, 10]}).collisionRadius(80)\n\treturn graph;\n}\n\nTerminusDBViewer.prototype.showDocumentGraph = function(insertDOM){\n\tvar dburl = this.ui.client.connectionConfig.dbURL();\n\tvar q = TerminusClient.WOQL.from(dburl).limit(200).getAllDocumentConnections();\n\tvar qp = this.tv.getResult(q, this.getDocumentsGraphConfig());\n\tvar dloader = this.getLoaderDOM(\"Terminus Server is generating the document graph\");\n\tinsertDOM.appendChild(dloader)\n\tinsertDOM.appendChild(qp.getAsDOM());\n\tthis.graph_query_pane = qp;\n\tqp.load().finally(() => insertDOM.removeChild(dloader));\n}\n\nTerminusDBViewer.prototype.showDocumentConnections = function(docid, targetDOM, docClasses, docs){\n\tvar q = TerminusClient.WOQL.limit(50).getDocumentConnections(docid);\n\tvar viewer = TerminusClient.View.table().column_order(\"Outgoing\", \"Incoming\", \"Entid\", \"Label\", \"Enttype\", \"Class_Label\" );\n\tviewer.column(\"Entid\").hidden(true);\n\tviewer.column(\"Enttype\").hidden(true);\n\tviewer.column(\"Label\").header(\"Document Name\");\n\tviewer.column(\"Class_Label\").header(\"Type\");\n\tviewer.column(\"Incoming\").header(\"Incoming Link\");\n\tviewer.column(\"Outgoing\").header(\"Outgoing Link\");\n\tvar self = this;\n\tvar x = function(row){\n\t\tself.showDocumentPage(row[\"v:Entid\"], docClasses, false, docs);\n\t}\n\tviewer.row().click(x);\n\tvar graph = TerminusClient.View.graph();\n\tgraph.literals(false);\n\tgraph.height(800).width(1250);\n\tgraph.edges([\"v:Docid\", \"v:Entid\"], [\"v:Entid\", \"v:Docid\"]);\n\tgraph.node(\"Outgoing\", \"Incoming\", \"Label\", \"Enttype\", \"Class_Label\").hidden(true);\n\t\n\t//graph.edge(\"v:Entid\", \"v:Docid\").distance(200).text(\"v:Incoming\");\n\tgraph.edge(\"v:Entid\", \"v:Docid\").v(\"v:Incoming\").in(\"unknown\").hidden(true);\n\tgraph.edge(\"v:Entid\", \"v:Docid\").distance(200).text(\"v:Incoming\").color([255, 0, 0]);\n\n\tgraph.edge(\"v:Docid\", \"v:Entid\").v(\"v:Outgoing\").in(\"unknown\").hidden(true);\n\tgraph.edge(\"v:Docid\", \"v:Entid\").distance(200).text(\"v:Outgoing\").color([0, 0, 255]);\n\t\n\tgraph.node(\"v:Docid\").text(\"v:Docid\").icon({label: true});\n\tgraph.node(\"v:Entid\").text(\"v:Label\");\n\tvar introdom = document.createElement(\"h3\");\n\tintrodom.style = \"margin-top: 1.5em; margin-bottom: -32px; color: #224488;\"\n\tintrodom.appendChild(document.createTextNode(\"Links from other documents\"));\n\tvar rpc = { intro: introdom, viewers: [graph] }\n    var qp = this.tv.getQueryPane(q, [viewer], false, [rpc]);\n    var dloader = this.getLoaderDOM(\"Fetching document relationship table\");\n\ttargetDOM.appendChild(dloader)\n\ttargetDOM.appendChild(qp.getAsDOM());\n\tqp.load().finally(() => targetDOM.removeChild(dloader));\n}\n\n\nTerminusDBViewer.prototype.createFullDocumentPane = function(docid, result_options, target, docClasses, docs){\n\tvar self = this;\n\tvar func = function(v){\n\t\tself.showDocumentPage(v, docClasses, false, docs);\n\t};\n\tvar dpoptions = {\"HTMLEntityViewer\": { \"onclick\": func}};\n\tvar dp = this.tv.getDocumentPane(docid, result_options, dpoptions);\t\n\treturn dp;\n}\n\n/**\n * HTML Page drawing functions\n */\n\n/**\n * Called first - runs set-up queries to seed UI elements\n * before drawing the page body \n */\nTerminusDBViewer.prototype.getAsDOM = function(){\n\tHTMLHelper.removeChildren(this.container);\n\tvar limit = 20;\n\tvar WOQL = TerminusClient.WOQL;\n\tvar dburl = this.ui.client.connectionConfig.dbURL();\n\tvar q = WOQL.from(dburl).limit(limit).documentMetadata();\n\tq.execute(this.ui.client).then( (result) => {\n\t\tvar docs = new TerminusClient.WOQLResult(result, q);\n\t\tvar q2 = WOQL.from(dburl).concreteDocumentClasses();\n\t\tq2.execute(this.ui.client).then( (result2) => {\n\t\t\tvar docClasses = new TerminusClient.WOQLResult(result2, q2);\n\t\t\tvar bdom = this.getBodyAsDOM(docs, docClasses);\n\t\t\tif(bdom) this.container.appendChild(bdom);\n\t\t});\n\t}).catch((e) => {\n\t\tthis.ui.showError(e);\n\t});\n\treturn this.container;\n}\n\n/**\n * Two main pages - DB home page and documents section\n */\nTerminusDBViewer.prototype.getBodyAsDOM = function(docs, docClasses){\n\tif(this.body){\n\t\tHTMLHelper.removeChildren(this.body);\n\t}\n\telse {\n\t\tthis.body = document.createElement(\"div\");\n\t\tthis.body.setAttribute(\"class\", \"terminus-home-body terminus-document-view\");\n\t}\n\tif(this.ui.page == \"docs\"){\n\t\t(this.docid ? \n\t\t\tthis.showDocumentPage(this.docid, docClasses, this.body, docs) :\t\t\n\t\t\tthis.getDocumentsDOM(docs, docClasses, this.body));\n\t}\n\telse {\n\t\t this.getHomeDOM(docs, docClasses, this.body);\n\t}\n\treturn this.body\n}\n\n/**\n * DB home page \n */\nTerminusDBViewer.prototype.getHomeDOM = function(docs, docClasses, body){\n\tvar intro = this.showHappyBox(\"dbhome\", \"demo\");\n\tbody.appendChild(intro);\n\tvar config = this.getDatabaseDocumentConfig();\n\tvar cont = document.createElement(\"span\");\n\tintro.appendChild(cont);\n\tvar mydb = this.ui.db();\n\tthis.ui.connectToDB(\"terminus\");\n\tthis.insertDocument(\"doc:\" + mydb, cont, config);\n\tthis.ui.connectToDB(mydb); \n\tif(docs.count() > 0){\n\t\tbody.appendChild(this.showHappyBox(\"dbhome\", \"intro\"));\n\t\tbody.appendChild(this.showHappyBox(\"happy\", \"query\"));\n\t}\n\telse if(docClasses.count() > 0) {\n\t\tvar dchooser = this.getCreateDataChooser(docClasses, docs);\n\t\tif(docClasses.count() <= 3){\n\t\t\tbody.appendChild(this.showHappyBox(\"empty\", \"schema\"));\n\t\t\tbody.appendChild(this.showHappyBox(\"empty\", \"query\"));\n\t\t}\n\t\telse  {\n\t\t\tbody.appendChild(this.showHappyBox(\"happy\", \"docs\", dchooser));\n\t\t\tbody.appendChild(this.showHappyBox(\"happy\", \"query\"));\n\t\t}\n\t}\n\telse {\n\t\tbody.appendChild(this.showHappyBox(\"empty\", \"schema\"));\n\t\tbody.appendChild(this.showHappyBox(\"empty\", \"query\"));\t\n\t}\n\tvar delw = this.getDeleteDatabaseWidget(\"fa-2x\");\n\tif(delw) body.appendChild(this.showHappyBox(\"happy\", \"delete\", delw));\n\treturn body;\n}\n\n/**\n * Main Document Listing Page\n */\nTerminusDBViewer.prototype.getDocumentsDOM = function(docs, docClasses, body){\n\tvar mactions = this.getDocumentsMenu(docs, docClasses, body);\n\tif(mactions) body.appendChild(mactions);\n\tthis.tableDOM = document.createElement(\"span\");\n\tbody.appendChild(this.tableDOM);\n\tthis.graphDOM = document.createElement(\"span\");\n\tthis.graphDOM.setAttribute(\"class\", \"terminus-documents-graph\");\n\tthis.graphDOM.style.display = \"none\";\n\tbody.appendChild(this.graphDOM);\n\tif(docs.count() > 0){\n\t\tif(!this.document_table) this.document_table = this.getDocumentsQueryPane(docs, docClasses);\n\t\tthis.tableDOM.appendChild(this.document_table.getAsDOM());\n\t\tthis.showDocumentGraph(this.graphDOM);\n\t}\n\telse {\n\t\tvar dchooser = this.getCreateDataChooser(docClasses, docs);\n\t\tif(docClasses.count() <= 3){\n\t\t\tthis.ui.showWarning(\"The database must have a schema before you can add documents to it\")\n\t\t\tbody.appendChild(this.showHappyBox(\"empty\", \"schema\"));\n\t\t\tbody.appendChild(this.showHappyBox(\"empty\", \"query\"));\n\t\t}\n\t\telse {\n\t\t\tthis.ui.showWarning(\"No documents have been added to the database\");\n\t\t\tbody.appendChild(this.showHappyBox(\"happy\", \"docs\", dchooser));\n\t\t\tbody.appendChild(this.showHappyBox(\"happy\", \"query\"));\n\t\t}\n\t}\n\treturn body;\n}\n\n/**\n * Document View / Edit Page\n */\nTerminusDBViewer.prototype.showDocumentPage = function(docid, docClasses, target, docs){\n\tthis.ui.clearMessages();\n\tHTMLHelper.removeChildren(target);\n\tthis.ui.page = \"docs\";\n\tthis.ui.redrawControls();\n\tvar start = docid.substring(0, 4);\n\tif(start != \"doc:\" && start != \"http\") docid = \"doc:\" + docid;\t\n\tvar config = this.getShowDocumentConfig();\n\tvar dp = this.createFullDocumentPane(docid, config, target, docClasses, docs);\n\tthis.docid = docid; \n\tthis.pages.push(docid);\n\tvar dcDOM = document.createElement(\"span\");\n\tvar vc = this.showDocumentConnections(docid, dcDOM, docClasses, docs);\n\treturn dp.load().then(() => {\n\t\tHTMLHelper.removeChildren(this.container);\n\t\tvar nav = this.getNavigationDOM(docClasses, docs);\n\t\tthis.container.appendChild(nav);\n\t\tvar mactions = this.getDocumentsMenu(docs, docClasses, this.container, docid);\n\t\tif(mactions) this.container.appendChild(mactions);\n\t\tvar dx = dp.getAsDOM();\n\t\tthis.container.appendChild(dx);\n\t\tthis.container.appendChild(dcDOM);\n\t})\n\t.catch((e) => {\n\t\tthis.ui.showError(e)\n\t});\t\n}\n\n\n/**\n * Main Create New Document Page\n */\nTerminusDBViewer.prototype.loadCreateDocumentPage = function(cls, docClasses, docs){\n\tthis.ui.page = \"docs\";\n\tthis.ui.redrawControls();\n\tvar WOQL = TerminusClient.WOQL;\n\tvar dburl = this.ui.client.connectionConfig.dbURL();\n\tvar config = this.getCreateDocumentConfig();\n\n\tvar dp = this.tv.getNewDocumentPane(cls, config);\n\tdp.documentLoader = this.getShowDocumentControl(docClasses, docs);\n\t/*var df = new DocumentPane(this.ui.client).options({\n\t\tshowQuery: true,\n\t\teditQuery: true,\n\t\tshowConfig: false,\n\t\teditConfig: false,\n\t\tloadDocument: this.getShowDocumentControl(docClasses, docs)\n\t});*/\n\tif(docClasses && docClasses.count() > 0){\n\t\tvar dchooser = this.getCreateDataChooser(docClasses, docs );\n\t\tdp.setClassLoader(dchooser);\n\t}\n\telse {\n\t\tvar q2 = WOQL.from(dburl).concreteDocumentClasses();\n\t\tq2.execute(this.ui.client).then( (result2) => {\n\t\t\tdocClasses = (docClasses ? docClasses : new TerminusClient.WOQLResult(result2, q2));\n\t\t\tvar dchooser = this.getCreateDataChooser(docClasses, docs );\n\t\t\tdp.setClassLoader(dchooser);\n\t\t});\n\t}\n\tthis.container.appendChild(dp.getAsDOM());\n\tdp.load().then(() => {\n\t\tHTMLHelper.removeChildren(this.container);\n\t\tvar nav = this.getNavigationDOM(docClasses, docs);\n\t\tthis.container.appendChild(nav);\n\t\tthis.container.appendChild(dp.getAsDOM());\n\t});\n}\n\n/**\n * Toolbox Menu on top of the page on the documents home page\n */\nTerminusDBViewer.prototype.getDocumentsMenu = function(docs, docClasses, target, docid){\n\tvar self = this;\n\tvar page_actions = document.createElement(\"div\");\n\tpage_actions.setAttribute(\"class\", \"terminus-home-actions\");\n\tvar span = document.createElement('span');\n\tpage_actions.appendChild(span);\n\tif(docs.count() > 0){\n\t\tvar show_doc_action = this.getShowDocumentControl(docClasses, docs, target);\n\t\tspan.appendChild(show_doc_action);\n\t\tif(!docid){\n\t\t\tvar tgtd = this.getToggleGraphTableDOM();\n\t\t\tif(tgtd) page_actions.appendChild(tgtd);\n\t\t}\n\t}\t\n\treturn page_actions;//turned off create document stuff\n\tif(docClasses.count() > 0){\n\t\tvar ch = function(cls){\n\t\t\tif(cls)\tself.loadCreateDocumentPage(cls, docClasses, docs);\n\t\t}\n\t\tvar dchooser = this.getCreateDataChooser(docClasses, docs, ch);\n\t\tif(docs.count() > 1) span.appendChild(dchooser);\n\t}\n\telse {\n\t\tthis.ui.showError(\"No document classes found in schema - you must define a document, entity or relationship class before you can create documents\");\n\t}\n\treturn page_actions;\n}\n\n\nTerminusDBViewer.prototype.getLoaderDOM = function(msg){\n\tvar cont = document.createElement('div');\n\tcont.setAttribute('class', 'terminus-busy-msg')\n\tcont.appendChild(document.createTextNode(msg));           \n\tthis.ui.getBusyLoader(cont, msg);\n\treturn cont;\n}\n\n\n/**\n * Switches between graph and table display modes on documents home page\n */\nTerminusDBViewer.prototype.redrawDocumentPage = function(){\n\tif(this.docview == \"graph\"){\n\t\tthis.tableDOM.style.display = \"none\";\n\t\tthis.graphDOM.style.display = \"inline\";\n\t}\n\telse {\n\t\tthis.tableDOM.style.display = \"inline\";\n\t\tthis.graphDOM.style.display = \"none\";\n\t}\n}\t\n\nTerminusDBViewer.prototype.getToggleGraphTableDOM = function(){\n\t// delete database\n\tvar isp = document.createElement('span');\n\tisp.setAttribute(\"class\", \"terminus-toggle-documents\");\n\tvar tisp = document.createElement('span');\n\tvar gisp = document.createElement('span');\n\tisp.appendChild(tisp);\n\tisp.appendChild(gisp);\n\tvar ticon = document.createElement(\"i\");\n\tticon.setAttribute(\"class\", \"fa fa-table\");\n\tticon.classList.add('terminus-result-view-icon');\n\tvar gicon = document.createElement(\"i\");\n\ttisp.appendChild(ticon);\n\tgisp.appendChild(gicon);\n\tgisp.setAttribute(\"title\", \"Click to view a graph of the links between the documents in the database\");\n\ttisp.setAttribute(\"title\", \"Switch back to a regular table of documents\");\n\tgicon.setAttribute(\"class\", \"fas fa-code-branch\");\n\tgicon.classList.add('terminus-result-view-icon');\n\tif(this.docview && this.docview == \"graph\"){\n\t\tgisp.style.display = \"none\";\n\t}\n\telse {\n\t\ttisp.style.display = \"none\";\n\t}\n\n\tvar hov = function(ticon){\n\t\ttisp.addEventListener('mouseover', function(){\n\t\t\tthis.style.cursor = \"pointer\";\n\t\t});\n\t}\n\thov(gisp);\n\thov(tisp);\n\n\tgisp.addEventListener(\"click\", () => {\n\t\tif(this.docview && this.docview == \"graph\") return;\n\t\tif(!this.graph_query_pane){\n\t\t\tthis.showDocumentGraph(this.graphDOM);\n\t\t}\n\t\tthis.docview = \"graph\";\n\t\tgisp.style.display = \"none\";\n\t\tthis.graphDOM.style.display = \"inline\";\n\t\ttisp.style.display = \"inline\";\n\t\tthis.tableDOM.style.display = \"none\";\n\n\t});\n\tticon.addEventListener(\"click\", () => {\n\t\tif(!this.docview || this.docview == \"table\") return;\n\t\tthis.docview = \"table\";\n\t\ttisp.style.display = \"none\";\n\t\tgisp.style.display = \"inline\";\n\t\tthis.graphDOM.style.display = \"none\";\n\t\tthis.tableDOM.style.display = \"inline\";\n\t});\n\tisp.appendChild(tisp);\n\tisp.appendChild(gisp);\n\treturn isp;\t\n}\n\nTerminusDBViewer.prototype.getDeleteDatabaseWidget = function(css){\n\t// delete database\n\tif(this.ui.db() == \"terminus\") return;\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", \"terminus-db-widget\");\n\tHTMLHelper.removeChildren(this.container);\n    var del = document.createElement('button');\n    del.setAttribute('class', 'terminus-btn terminus-btn-float-right terminus-home-del');\n    del.setAttribute('type', 'button');\n\tdel.appendChild(document.createTextNode('Delete Database'));\n\tvar di = document.createElement(\"i\");\n\tvar icss = \"fa fa-trash fa-2x terminus-icon-padding\" + (css ? \" \" + css : \"\");\n\tdi.setAttribute(\"class\", icss);\n\tdel.appendChild(di);\n\tvar dbrec = this.ui.getDBRecord();\n\tif(dbrec)\n\t\tvar nm = (dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.ui.db());\n\telse var nm = this.ui.db();\n    var self = this;\n\tvar dbdel = this.ui.db();\n\tvar delbut = this.ui.getDeleteDBButton(dbdel);\n\tif(delbut){\n\t\td.appendChild(delbut);\n\t}\n\treturn d;\n}\n\nTerminusDBViewer.prototype.styleCreateDocumentChooser = function(){\n\tvar select = document.getElementsByClassName('woql-chooser');\n\tfor(i=0; i<select.length; i++){\n\t\tif(select[i].type == 'select'){\n\t\t\tselect[i].classList.add('terminus-form-doc-value');\n\t\t\tvar self = this;\n\t\t\tselect[i].addEventListener('change', function(){\n\t\t\t\tself.showCreateDocument(this.value);\n\t\t\t})\n\t\t}\n\t}\n}\n\nTerminusDBViewer.prototype.getCreateDataChooser = function(docClasses, docs, change, pholder){\n\tpholder = (pholder ? pholder : \"Create a New Document\");\n\t//qopts  = (qopts ? qopts :  {});\n\t//var dp = new QueryPane(this.ui.client, docClasses.query, docClasses).options(qopts);\n\tvar chooser = TerminusClient.View.chooser().values(\"Class\").labels(\"Label\").titles(\"Comment\").show_empty(pholder);\n\t\n\tvar self = this;\n\tchooser.change = (change ? change : function(cls){\n\t\tif(cls)\tself.loadCreateDocumentPage(cls, docClasses, docs);\n\t});\n\tvar dp = this.tv.getResult(docClasses.query, chooser, docClasses);\n\tvar dchooser = dp.getAsDOM();\n\treturn dchooser;\n}\n\nTerminusDBViewer.prototype.showHappyBox = function(happy, type, chooser){\n\tvar hbox = document.createElement(\"div\");\n\thbox.setAttribute(\"class\", \"terminus-welcome-box terminus-no-res-alert\");\n\tvar self = this;\n\tvar sets = {};\n\tif(type == \"schema\"){\n\t\tsets.title = (happy == \"happy\") ? \"Document Classes Created\" : \"Create Schema from OWL\";\n\t\tsets.text = (happy == \"happy\") ? \"You have successfully created a schema with valid document classes!\" : \"You can create a schema for your database from an OWL document\";\n\t\tsets.css = \"fa fa-cog fa-2x terminus-welcome-icons\";\n\t}\n\telse if(type == \"docs\"){\n\t\tsets.css = \"fa fa-book fa-2x terminus-welcome-icons\";\n\t\tsets.title = \"Create Documents\";\n\t\tsets.text = (happy == \"happy\") ? \"Add data to the system through easy to use automatically generated forms for each document type\" : \"You should create a schema and add at least one document classes before you add data to the system\";\n\t}\n\telse if(type == \"intro\"){\n\t\tsets.css = \"fa fa-book fa-2x terminus-welcome-icons\";\n\t\tsets.title = \"View Documents\";\n\t\tsets.text = \"View the documents in the database and add new ones\";\n\t}\n\telse if(type == \"query\"){\n\t\tsets.css = \"fa fa-search fa-2x terminus-welcome-icons\";\n\t\tsets.title = (happy == \"happy\") ? \"Run Queries\" : \"Create Schema with Queries\";\n\t\tsets.text = (happy == \"happy\") ? \"You can add data to the system with queries and scripts, and import data directly from CSVs and URLs\" : \"You can write WOQL queries to create a schema through our query interface\";\n\t}\n\telse if(type == \"demo\"){\n\t\tsets.css = \"fa fa-database fa-2x terminus-welcome-icons\";\n\t\tvar dbrec = this.ui.getDBRecord();\n\t\tif(dbrec)\n\t\t\tvar nm = (dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.ui.db());\n\t\telse var nm = this.ui.db();\n\t\tsets.title = nm ;\n\t\tsets.text = \"\";\n\t}\n\telse if(type == \"delete\"){\n\t\tsets.css = \"fa fa-trash fa-2x terminus-welcome-icons terminus-db-list-del-icon\";\n\t\tsets.title = \"Delete Database\";\n\t\tsets.text = \"This will delete all data and permanently remove all record of this database from the system\";\n\t}\n\tvar ispan =  document.createElement(\"span\");\n\tispan.setAttribute(\"class\", \"terminus-db-widget\");\n\tvar ic = document.createElement(\"i\");\n\tic.setAttribute(\"class\", sets.css);\n\tispan.appendChild(ic);\n\thbox.appendChild(ispan);\n\tvar htit = document.createElement(\"span\");\n\thtit.appendChild(document.createElement(\"strong\").appendChild(document.createTextNode(sets.title)));\n\thtit.classList.add('terminus-welcome-title');\n\thbox.appendChild(htit);\n\tvar body = document.createElement(\"p\");\n\tbody.setAttribute('class', 'terminus-welcome-body');\n\tbody.appendChild(document.createTextNode(sets.text));\n\thbox.appendChild(body);\n\tif(type == \"schema\"){\n\t\thbox.addEventListener(\"click\", function(){\n\t\t\tself.ui.page = \"schema\";\n\t\t\tself.ui.showSchemaPage();\n\t\t\tself.ui.clearMessages();\n\t\t\tself.ui.redrawControls();\n\t\t});\n\t};\n\tif(type == \"delete\"){\n\t\tispan.addEventListener(\"click\", function(){\n\t\t\tself.ui.clearMessages();\n\t\t\tlet db = self.ui.db();\n\t\t\tlet deleteConfirm = confirm(`This action is irreversible, it will remove the database from the system permanently. Are you sure you want to delete ${db} Database?`);\n\t\t\tif (deleteConfirm == true) {\n\t\t\t\tself.ui.deleteDatabase();\n\t\t\t\tself.ui.client.connectionConfig.dbid = false;\n\t\t\t\tself.ui.redrawControls();\n\t\t\t}\n\t\t});\n\t}\n\tif(type == \"intro\" || (type == \"docs\" && false && !chooser)){\n\t\thbox.addEventListener(\"click\", function(){\n\t\t\tself.ui.page = \"docs\";\n\t\t\tself.ui.showDocumentPage();\n\t\t\tself.ui.clearMessages();\n\t\t\tself.ui.redrawControls();\n\t\t});\n\t};\n\tif(type == \"query\"){\n\t\thbox.addEventListener(\"click\", function(){\n\t\t\tself.ui.page = \"query\";\n\t\t\tself.ui.showQueryPage();\n\t\t\tself.ui.clearMessages();\n\t\t\tself.ui.redrawControls();\n\t\t});\n\t};\n\tif(type == \"query\" || type == \"schema\" || type == \"intro\"){\n\t\thbox.addEventListener('mouseover', function(){\n\t\t\tthis.style.cursor = \"pointer\";\n\t\t});\n\t}\n\tif(type == \"docs\" && false && chooser){\n\t\tvar sp = document.createElement('span');\n\t\tsp.setAttribute('class', 'terminus-welcome-chooser');\n\t\tsp.appendChild(chooser);\n\t\thbox.appendChild(sp);\n\t}\n\treturn hbox;\n}\n\nTerminusDBViewer.prototype.getNavigationDOM = function(docClasses, docs){\n\tvar s = document.createElement(\"span\");\n\ts.setAttribute('class', 'terminus-back-to-home terminus-backtohome-span');\n\tvar i = document.createElement(\"span\");\n\ti.setAttribute(\"class\", \"fa fas fa-arrow-left\");\n\ts.appendChild(i);\n\tvar p =  this.pages[this.pages.length-2];\n\tif(p){\n\t\tvar msg = (p == \"home\" ? \"document list\" : p)\n\t\ts.appendChild(document.createTextNode(\" back to \" + msg));\n\t}\n\telse {\n\t\tthis.pages.push(\"home\");\n\t\ts.appendChild(document.createTextNode(\" back to document list \"));\n\t}\n\ts.addEventListener(\"click\", () => {\n\t\tvar pp = this.pages.pop();\n\t\tp =  this.pages[this.pages.length-1];\n\t\tif(p == \"home\"){\n\t\t\tdelete(this[\"docid\"]);\n\t\t\tthis.getAsDOM();\n\t\t}\n\t\telse {\n\t\t\tpp = this.pages.pop();\n\t\t\tthis.docid = pp;\n\t\t\tthis.showDocumentPage(pp, docClasses, false, docs);\n\t\t}\n\t});\n\ts.addEventListener('mouseover', function(){\n\t\tthis.style.cursor = \"pointer\";\n\t});\n\treturn s;\n}\n\nTerminusDBViewer.prototype.insertDocument = function(docid, insertDOM, config, nuke){\n\tvar dp = this.tv.getDocument(docid, config);\n\tdp.load().then(() => {\n\t\tif(nuke) HTMLHelper.removeChildren(insertDOM);\n\t\tinsertDOM.appendChild(dp.getAsDOM());\n\t})\n\t.catch((e) => this.ui.showError(e));\t\n}\n\nTerminusDBViewer.prototype.getShowDocumentControl = function(docClasses, docs, target){\n\tvar scd = document.createElement(\"span\");\n\tscd.setAttribute(\"class\", \"terminus-get-doc terminus-document-chooser terminus-form-horizontal terminus-control-group\");\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"terminus-document-chooser-label terminus-doc-control-label terminus-control-label-padding\");\n\tvar dcip = document.createElement(\"input\");\n\tdcip.setAttribute(\"class\", \"terminus-form-doc-value terminus-document-chooser terminus-doc-input-text\");\n\tdcip.setAttribute(\"placeholder\", \"Enter Document ID to view ...\");\n\tvar nbut = document.createElement(\"button\");\n\tnbut.setAttribute('class', \"terminus-control-button terminus-document-button terminus-btn\");\n\tnbut.setAttribute('title', 'Enter Document ID to view');\n\tvar is = document.createElement('i');\n\tis.setAttribute('class', 'fa fa-caret-left');\n\tnbut.appendChild(is);\n\tnbut.appendChild(document.createTextNode(\" Load \"));\n\tvar i = document.createElement('i');\n\ti.setAttribute('class', 'fa fa-caret-right');\n\tnbut.appendChild(i);\n\tvar self = this;\n\tnbut.addEventListener(\"click\", function(){\n\t\tif(dcip.value) {\n\t\t\tself.showDocumentPage(dcip.value, docClasses, target, docs);\n\t\t}\n\t})\n\tdcip.addEventListener(\"keyup\", function(event) {\n\t\tevent.preventDefault();\n\t\tif (event.keyCode === 13 && dcip.value) {\n\t\t\tself.showDocumentPage(dcip.value, docClasses, target, docs);\n\t\t}\n\t});\n\tscd.appendChild(lab);\n\tscd.appendChild(dcip);\n\tscd.appendChild(nbut);\n\treturn scd;\n}\n\n/**\n * Class Representing the create Database form\n * @param {TerminusUI} ui\n */\nfunction TerminusDBCreator(ui){\n\tthis.ui = ui;\n}\n\nTerminusDBCreator.prototype.getAsDOM = function(selected){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-db-creator\");\n\tvar sct = document.createElement(\"h3\");\n\tsct.setAttribute(\"class\", \"terminus-db-creator-title terminus-module-head\");\n\tsct.appendChild(UTILS.getHeaderDom(\"Create Database\"));\n\tscd.appendChild(sct);\n\tvar mfd = document.createElement('div');\n\tmfd.setAttribute('class', 'terminus-form-border ');\n\tscd.appendChild(mfd);\n\tvar dht = document.createElement('div');\n\tdht.setAttribute('class', 'terminus-form-margin-top');\n\tmfd.appendChild(dht);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-id-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"ID\"));\n\tsci.appendChild(slab);\n\tvar idip = document.createElement(\"input\");\n\tidip.setAttribute(\"type\", \"text\");\n\tidip.setAttribute(\"class\", \"terminus-form-value terminus-input-text\");\n\tidip.setAttribute(\"placeholder\", \"No spaces or special characters allowed in IDs\");\n\tsci.appendChild(idip);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-title-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Title\"));\n\tvar titip = document.createElement(\"input\");\n\ttitip.setAttribute(\"type\", \"text\");\n\ttitip.setAttribute(\"placeholder\", \"A brief title for the Database\");\n\ttitip.setAttribute(\"class\", \"terminus-form-value terminus-input-text\");\n\tsci.appendChild(slab);\n\tsci.appendChild(titip);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-title-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Description\"));\n\tsci.appendChild(slab);\n\tvar descip = document.createElement(\"textarea\");\n\tdescip.setAttribute(\"class\", \"terminus-textarea terminus-db-description terminus-textarea \");\n\tdescip.setAttribute(\"placeholder\", \"A short text describing the database and its purpose\");\n\tsci.appendChild(descip);\n\tmfd.appendChild(sci);\n\tvar butfield = document.createElement(\"div\");\n\tbutfield.setAttribute(\"class\", \"terminus-control-buttons\");\n\tvar cancbut = document.createElement(\"button\");\n\tcancbut.setAttribute(\"class\", \"terminus-control-button terminus-cancel-db-button terminus-btn terminus-btn-float-right\");\n\tcancbut.appendChild(document.createTextNode(\"Cancel\"));\n\tvar loadbut = document.createElement(\"button\");\n\tloadbut.setAttribute(\"class\", \"terminus-control-button terminus-create-db-button terminus-btn terminus-btn-float-right\");\n\tloadbut.appendChild(document.createTextNode(\"Create\"));\n\tvar self = this;\n\tvar gatherips = function(){\n\t\tvar input = {};\n\t\tinput.id = idip.value;\n\t\tinput.title = titip.value;\n\t\tinput.description = descip.value;\n\t\t//input.schema = schem.value;\n\t\t//input.key = kip.value;\n\t\t//input.data = datip.value;\n\t\treturn input;\n\t}\n\tvar self = this;\n\tloadbut.addEventListener(\"click\", function(){\n\t\tvar input = gatherips();\n\t\tself.ui.createDatabase(input);\n\t})\n\tcancbut.addEventListener(\"click\", function(){\n\t\tself.ui.showServerMainPage();\n\t})\n\tbutfield.appendChild(cancbut);\n\tbutfield.appendChild(loadbut);\n\tmfd.appendChild(butfield);\n\n\treturn scd;\n}\n\n/*\n * User Interface elements dealing with database level functions - view, delete, create, db\n * view document etc\n */\nfunction TerminusDBController(ui){\n\tthis.ui = ui;\n}\n\n/*\n* Controller provides access to the server level functions (create/delete db) and db-level functions (schema, query, document)\n* Populates left hand column on dashboard page\n*/\nTerminusDBController.prototype.getAsDOM = function(){\n   var self = this;\n   var dbc = document.createElement(\"div\");\n   dbc.setAttribute(\"class\", \"terminus-db-controller\");\n   if(this.ui && this.ui.db()){\n\t   var scd = document.createElement(\"div\");\n\t   scd.setAttribute(\"class\", \"terminus-field terminus-db-connection\");\n\t   var dbrec = this.ui.client.connection.getDBRecord();\n\t   var nm = (dbrec && dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.ui.db());\n\t   //dbc.appendChild(scd);\n\t   var nav = document.createElement('div');\n\t   nav.setAttribute('class', 'span3');\n\t   dbc.appendChild(nav);\n\t   var ul = document.createElement('ul');\n\t   ul.setAttribute('class','terminus-ul' );\n\t   nav.appendChild(ul);\n\t   // connected to db\n\t   var a = document.createElement('a');\n\t   a.setAttribute('class', 'terminus-dashboard-info terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer\"');\n\t   a.appendChild(document.createTextNode(nm));\n\t   ul.appendChild(a);\n\t   var p = this.ui.page ? this.ui.page : \"db\";\n\t   if(this.ui.showControl(\"db\")){\n\t\t   if(p == \"db\") {\n\t\t\t   a.classList.add(\"terminus-selected\");\n\t\t\t   self.ui.page = \"db\";\n\t\t   }\n\t\t   a.addEventListener(\"click\", function(event){\n\t\t\t   event.stopPropagation();\n\t\t\t   self.ui.showDBMainPage();\n\t\t\t   self.ui.page = \"db\";\n\t\t\t   self.ui.clearMessages();\n\t\t\t   self.ui.redrawControls();\n\t\t   });\n\t   }\n\t   if(this.ui.showControl(\"get_document\")){\n\t\t   var item = this.getControlHTML(\"Documents\", \"fas fa fa-book\");\n\t\t   if(p == \"docs\") item.classList.add(\"terminus-selected\");\n\t\t   item.addEventListener(\"click\", function(event){\n\t\t\t   event.stopPropagation();\n\t\t\t   self.ui.showDocumentPage();\n\t\t\t   self.ui.clearMessages();\n\t\t\t   self.ui.page = \"docs\";\n\t\t\t   self.ui.redrawControls();\n\t\t\t});\n\t\t   ul.appendChild(item);\n\t   }\n\t   if(this.ui.showControl(\"delete_database\")){\n\t\t   var item = this.getControlHTML(\"Delete Database\", \"fa-trash-alt\");\n\t\t   item.addEventListener(\"click\", function(event){\n\t\t\t   UTILS.activateSelectedNav(this, self);\n\t\t\t   self.ui.clearMessages();\n\t\t\t   self.ui.deleteDatabase();\n\t\t   });\n\t\t   ul.appendChild(item);\n\t   }\n\t   if(this.ui.showControl(\"woql_select\")){\n\t\t   var item = this.getControlHTML(\"Query\", \"fa-search\");\n\t\t   if(p == \"query\") item.classList.add(\"terminus-selected\");\n\t\t   item.addEventListener(\"click\", function(event){\n\t\t\t   UTILS.activateSelectedNav(this, self);\n\t\t\t   event.stopPropagation();\n\t\t\t   self.ui.page = \"query\";\n\t\t\t   self.ui.showQueryPage();\n\t\t\t   self.ui.clearMessages();\n\t\t\t   self.ui.redrawControls();\n\t\t   });\n\t\t   ul.appendChild(item);\n\t   }\n\t   if(this.ui.showControl(\"get_schema\")){\n\t\t   var item = this.getControlHTML(\"Schema\", \"fa-cog\");\n\t\t   if(p == \"schema\") item.classList.add(\"terminus-selected\");\n\t\t   item.addEventListener(\"click\", function(){\n\t\t\t   UTILS.activateSelectedNav(this, self);\n\t\t\t   self.ui.page = \"schema\";\n\t\t\t   self.ui.showSchemaPage();\n\t\t\t   self.ui.clearMessages();\n\t\t\t   self.ui.redrawControls();\n\t\t   })\n\t\t   ul.appendChild(item);\n\t   }\n   }\n   return dbc;\n}\n\n\nTerminusDBController.prototype.getControlHTML = function(text, ic, css){\n   var self = this;\n   var a = document.createElement('a');\n   a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n   var icon = document.createElement('i');\n   icon.setAttribute('class', 'terminus-menu-icon fa ' + ic);\n   a.appendChild(icon);\n   var txt = document.createTextNode(text);\n   a.appendChild(txt);\n   return a;\n}\n\n\n\nmodule.exports={TerminusDBViewer:TerminusDBViewer,\n\t            TerminusDBController:TerminusDBController,\n\t            TerminusDBCreator:TerminusDBCreator}\n","const TerminusClient = require('@terminusdb/terminus-client');\nconst TerminusCodeSnippet = require('./query/TerminusCodeSnippet');\nconst ResultPane = require(\"./ResultPane\");\nconst UTILS = require('../Utils');\nconst HTMLHelper = require('./HTMLHelper');\nconst TerminusViolations = require('./TerminusViolation');\n\nfunction QueryPane(client, query, result){\n\tthis.client = client;\n\tthis.query = query;\n\tthis.result = result;\n\tthis.views = [];\n\tthis.container = document.createElement('span');\n\tthis.messages = document.createElement('div');\n\tthis.messages.setAttribute('class', 'terminus-query-messages');\n\tthis.defaultResultView = { showConfig: false, editConfig: false };\n\tthis.defaultQueryView = { showQuery: false, editQuery: false };\n}\n\nQueryPane.prototype.load = function(repl){\n\treturn this.query.execute(this.client).then( (result) => {\n\t\t\tlet nresult = new TerminusClient.WOQLResult(result, this.query);\n\t\t\tthis.updateResult(nresult);\n\t});\n}\n\n\nQueryPane.prototype.fireDefaultQueries = function(){\n\tlet WOQL = TerminusClient.WOQL;\n\tvar query = WOQL.query().classMetadata();\n\tquery.execute(this.client).then((results) => {\n\t\tlet qcres = new TerminusClient.WOQLResult(results, query);\n\t\tthis.classMetaDataRes = qcres;\n\t})\n\tvar query = WOQL.query().propertyMetadata();\n\tquery.execute(this.client).then((results) => {\n\t\tlet qpres = new TerminusClient.WOQLResult(results, query);\n\t\tthis.propertyMetaDataRes = qpres;\n\t})\n}\n\nQueryPane.prototype.options = function(opts){\n\tthis.showQuery = (opts && typeof opts.showQuery != \"undefined\" ? opts.showQuery : false);\n\tthis.editQuery = (opts && typeof opts.editQuery != \"undefined\" ? opts.editQuery : false);\n\tthis.showHeader = (opts && typeof opts.showHeader != \"undefined\" ? opts.showHeader : false);\n\tthis.addViews = (opts && typeof opts.addViews != \"undefined\" ? opts.addViews : false);\n\tthis.intro = (opts && typeof opts.intro != \"undefined\" ? opts.intro : false);\n\tvar css = (opts && typeof opts.css != \"undefined\" ? opts.css : 'terminus-query-pane-cont');\n    this.container.setAttribute('class', css);\n    return this;\n}\n\nQueryPane.prototype.getSection = function(sName){\n\tvar btn = document.createElement('button');\n\tbtn.setAttribute('class', 'terminus-query-section');\n\tbtn.appendChild(document.createTextNode(sName));\n\treturn btn;\n}\n\nQueryPane.prototype.clearSubMenus = function(btn){\n\tvar par = btn.parentElement.parentElement;\n\tvar smenus = par.getElementsByClassName('terminus-queries-submenu');\n\tfor(var i=0; i<smenus.length; i++){\n\t\tHTMLHelper.removeChildren(smenus[i]);\n\t}\n}\n\nQueryPane.prototype.getResults = function(query){\n\tif(query)\n\t\tthis.input.setQuery(query);\n\tHTMLHelper.removeChildren(this.sampleQueryDOM);\n\tthis.sampleQueryDOM.appendChild(document.createTextNode(\" Saved Queries \"))\n\tthis.input.refreshContents();\n}\n\nQueryPane.prototype.AddEvents = function(btn, aval){\n\tvar self = this;\n\tbtn.addEventListener('click', function(){\n\t\tlet WOQL = TerminusClient.WOQL;\n\t\tself.clearSubMenus(this);\n\t\tvar query;\n\t\tswitch(this.value){\n\t\t\tcase 'Show All Schema Elements':\n\t\t\t\tquery = WOQL.query().elementMetadata();\n\t\t\tbreak;\n\t\t\tcase 'Show All Classes':\n\t\t\t\tquery = WOQL.query().classMetadata();\n\t\t\tbreak;\n\t\t\tcase 'Show All Properties':\n\t\t\t\tquery = WOQL.query().propertyMetadata();\n\t\t\tbreak;\n\t\t\tcase 'Show Document Classes':\n\t\t\t\tquery = WOQL.query().concreteDocumentClasses();\n\t\t\tbreak;\n\t\t\tcase 'Show All Data':\n\t\t\t\tquery = WOQL.query().getEverything();\n\t\t\tbreak;\n\t\t\tcase 'Show all documents':\n\t\t\t\tquery = WOQL.query().documentMetadata();\n\t\t\tbreak;\n\t\t\tcase 'Show data of chosen type':\n\t\t\t\tvar choosen = aval || 'scm:' + this.innerText;\n\t\t\t\tquery = WOQL.query().getDataOfClass(choosen);\n\t\t\tbreak;\n\t\t\tcase 'Show data of chosen property':\n\t\t\t\tvar choosen = aval || 'scm:' + this.innerText;\n\t\t\t\tquery = WOQL.query().getDataOfProperty(choosen);\n\t\t\tbreak;\n\t\t\tcase 'Show data of type':\n\t\t\t\treturn;\n\t\t\tbreak;\n\t\t\tcase 'Show data for property':\n\t\t\t\treturn;\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log('Invalid Type of query');\n\t\t\tbreak;\n\t\t}\n\t\tself.getResults(query);\n\t})\n}\n\nQueryPane.prototype.getQueryMenu = function(qName){\n\tvar btn = document.createElement('button');\n\tbtn.setAttribute('class', 'terminus-load-queries');\n\tbtn.setAttribute('value', qName);\n\tbtn.appendChild(document.createTextNode(qName));\n\tthis.AddEvents(btn);\n\treturn btn;\n}\n\nQueryPane.prototype.getSubDataMenu = function(qName, val, aval){\n\tvar btn = document.createElement('button');\n\tbtn.setAttribute('class', 'terminus-load-queries');\n\tbtn.setAttribute('value', qName);\n\tbtn.appendChild(document.createTextNode(val));\n\tthis.AddEvents(btn, aval);\n\treturn btn;\n}\n\n// schema queries\nQueryPane.prototype.getSchemaSection = function(d){\n\tvar section = this.getSection('Schema Queries');\n\td.appendChild(section);\n\tvar btn = this.getQueryMenu('Show All Schema Elements');\n\td.appendChild(btn);\n\tvar btn = this.getQueryMenu('Show All Classes');\n\td.appendChild(btn);\n\tvar btn = this.getQueryMenu('Show Document Classes');\n\td.appendChild(btn);\n\tvar btn = this.getQueryMenu('Show All Properties');\n\td.appendChild(btn);\n}\n\nQueryPane.prototype.checkIfDataMenuOpen = function(btn){\n\tvar isOpen = false;\n\tif(btn.children.length){\n\t\tfor(var i=0; i<btn.children.length; i++){\n\t\t\t//var child = btn.children[i].getElementsByClassName('terminus-queries-submenu');\n\t\t\tvar child = btn.getElementsByClassName('terminus-queries-submenu');\n\t\t\tif(child.length){\n\t\t\t\tfor(var j=0; j<child.length; j++){\n\t\t\t\t\tHTMLHelper.removeElement(child[j]);\n\t\t\t\t\tisOpen = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn isOpen;\n}\n\nQueryPane.prototype.showDataOfTypeEvent = function(btn){\n\tvar self = this;\n\tbtn.addEventListener('click', function(){\n\t\tvar isMenuOpen = self.checkIfDataMenuOpen(this);\n\t\tif(!isMenuOpen){\n\t\t\tvar subPar = document.createElement('div');\n\t\t\tsubPar.setAttribute('class', 'terminus-queries-submenu');\n\t\t\tif(self.classMetaDataRes && self.classMetaDataRes.hasBindings()){\n\t\t\t\tfor(var i = 0; i<self.classMetaDataRes.bindings.length; i++){\n\t\t\t\t\tvar text = self.classMetaDataRes.bindings[i]['v:Label']['@value'];\n\t\t\t\t\tvar val = self.classMetaDataRes.bindings[i]['v:Element'];\n\t\t\t\t\tsubPar.appendChild(self.getSubDataMenu('Show data of chosen type', text, val));\n\t\t\t\t}\n\t\t\t}\n\t\t\tbtn.appendChild(subPar);\n\t\t}\t\t\n\t})\n}\n\nQueryPane.prototype.showPropertyOfTypeEvent = function(btn){\n\tvar self = this;\n\tbtn.addEventListener('click', function(){\n\t\tvar isMenuOpen = self.checkIfDataMenuOpen(this);\n\t\tif(!isMenuOpen){\n\t\t\tvar subPar = document.createElement('div');\n\t\t\tsubPar.setAttribute('class', 'terminus-queries-submenu');\n\t\t\tif(self.propertyMetaDataRes && self.propertyMetaDataRes.hasBindings()){\n\t\t\t\tfor(var i = 0; i<self.propertyMetaDataRes.bindings.length; i++){\n\t\t\t\t\tvar text = self.propertyMetaDataRes.bindings[i]['v:Label']['@value'];\n\t\t\t\t\tvar val = self.propertyMetaDataRes.bindings[i]['v:Property'];\n\t\t\t\t\tsubPar.appendChild(self.getSubDataMenu('Show data of chosen property', text, val));\n\t\t\t\t}\n\t\t\t}\n\t\t\tbtn.appendChild(subPar);\n\t\t}\n\t})\n}\n\nQueryPane.prototype.addCheveronIcon = function(btn){\n\tvar i = document.createElement('i');\n\ti.setAttribute('class', 'fa fa-chevron-right terminus-query-section');\n\tbtn.appendChild(i);\n}\n\n// data queries\nQueryPane.prototype.getDataSection = function(d){\n\tvar section = this.getSection('Data Queries');\n\td.appendChild(section);\n\t// div to populate submenu on data of type\n\tvar bd = document.createElement('div');\n\tbd.setAttribute('class', 'terminus-query-submenu');\n\td.appendChild(bd);\n\tvar btn = this.getQueryMenu('Show data of type');\n\tbd.appendChild(btn);\n\tthis.addCheveronIcon(btn);\n\tthis.showDataOfTypeEvent(btn);\n\t// div to populate submenu on property of type\n\tvar bd = document.createElement('div');\n\tbd.setAttribute('class', 'terminus-query-submenu');\n\td.appendChild(bd);\n\tvar btn = this.getQueryMenu('Show data for property');\n\tbd.appendChild(btn);\n\tthis.showPropertyOfTypeEvent(btn);\n\tthis.addCheveronIcon(btn);\n\tvar btn = this.getQueryMenu('Show All Data');\n\td.appendChild(btn);\n}\n\nQueryPane.prototype.fireDocumentEvent = function(document){\n\tlet WOQL = TerminusClient.WOQL;\n\tvar query = WOQL.query().documentProperties(document);\n\tthis.getResults(query);\n}\n\nQueryPane.prototype.getEnterDocumentIdDOM = function(){\n\tvar sp = document.createElement('span');\n\tsp.setAttribute('class', 'terminus-display-flex');\n\tvar inp = document.createElement('input');\n\tinp.setAttribute('class', 'terminus-doc-id-input');\n\tinp.setAttribute('placeholder', 'doc:myDocId');\n\tvar sub = document.createElement('button');\n\tsub.setAttribute('class', 'terminus-btn terminus-doc-id-input-submit');\n\tsub.appendChild(document.createTextNode('Submit'));\n\tvar self = this;\n\tsub.addEventListener('click', function(){\n\t\tself.fireDocumentEvent(inp.value);\n\t})\n\tsp.appendChild(inp);\n\tsp.appendChild(sub);\n\treturn sp;\n}\n\n// document queries\nQueryPane.prototype.getDocumentSection = function(d){\n\tvar section = this.getSection('Document Queries');\n\td.appendChild(section);\n\tvar btn = this.getQueryMenu('Show all documents');\n\td.appendChild(btn);\n\td.appendChild(this.getEnterDocumentIdDOM());\n}\n\n// bottom color transaprent\nQueryPane.prototype.getQueryMenuBlock = function(){\n\tvar d = document.createElement('div');\n\td.setAttribute('class', 'terminus-load-queries');\n\tthis.getSchemaSection(d);\n\tthis.getDataSection(d);\n\tthis.getDocumentSection(d);\n\treturn d;\n}\n\nQueryPane.prototype.getSampleQueriesDOM = function(){\n\tvar i = document.createElement('icon');\n\ti.setAttribute('class', 'fa fa-ellipsis-v terminus-ellipsis-icon');\n\ti.setAttribute('title', 'Click to load sample Queries');\n\ti.setAttribute('value', false);\n\ti.appendChild(document.createTextNode(\" Saved Queries \"))\n\tthis.sampleQueryDOM = i;\n\tvar self = this;\n\ti.addEventListener('click', function(e){\n\t\tif(e.target !== this) return;\n\t\tif(this.children.length) {\n\t\t\tHTMLHelper.removeChildren(this);\n\t\t\tthis.appendChild(document.createTextNode(\" Saved Queries \"))\n\t\t}\n\t\telse{\n\t\t\tvar d = self.getQueryMenuBlock();\n\t\t\tthis.appendChild(d);\n\t\t}\n\t})\n\treturn i;\n}\n\nQueryPane.prototype.getAsDOM = function(){\n\tif(this.intro){\n\t\tthis.container.appendChild(UTILS.getHeaderDom(this.intro));\n\t}\n\tif(this.showQuery) {\n\t\tthis.fireDefaultQueries();\n\t\tvar configspan = document.createElement(\"span\");\n\t\tconfigspan.setAttribute(\"class\", \"pane-config-icons\");\n\t\tthis.querySnippet = configspan;\n\t\tthis.container.appendChild(configspan);\n\t\tvar mode = (this.editQuery ? \"edit\" : \"view\");\n\t\tthis.input = this.createInput(mode);\n\t\tvar ipdom = this.input.getAsDOM(true);\n\t\tvar ispan = document.createElement(\"span\");\n\t\tispan.setAttribute(\"class\", \"query-pane-config\");\n\t\tvar ic = document.createElement(\"i\");\n\t\t//ic.setAttribute('style', 'margin:10px;')\n\t\tconfigspan.appendChild(ic);\n\t\tvar self = this;\n\t\tfunction showQueryConfig(){\n\t\t\tif(self.showQuery != \"always\"){\n\t\t\t\tconfigspan.title=\"Click to Hide Query\";\n\t\t\t\tic.setAttribute(\"class\", \"fas fa fa-times-circle\");\n\t\t\t}\n\t\t\tconfigspan.classList.remove('terminus-click-to-view-query');\n\t\t\tif(configspan.nextSibling){\n\t\t\t\tself.container.insertBefore(ipdom, configspan.nextSibling);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tself.container.appendChild(ipdom);\n\t\t\t}\n\t\t\tvar qicon = self.getSampleQueriesDOM();\n\t\t\tvar sqd = document.createElement(\"span\");\n\t\t\tsqd.setAttribute(\"class\", \"sample-queries-pane\");\n\t\t\tsqd.appendChild(qicon);\n\t\t\tipdom.appendChild(sqd);\n\t\t\tself.input.stylizeSnippet();\n\t\t}\n\t\tfunction hideQueryConfig(){\n\t\t\tconfigspan.title=\"Click to View Query\";\n            ic.setAttribute(\"class\", \"fas fa fa-search terminus-query-view-icon\");\n\t\t\tconfigspan.classList.add('terminus-click-to-view-query');\n\t\t\tself.container.removeChild(ipdom);\n\t\t}\n\t\tconfigspan.addEventListener(\"click\", () => {\n\t\t\tif(this.showingQuery) hideQueryConfig();\n\t\t\telse showQueryConfig();\n\t\t\tthis.showingQuery = !this.showingQuery;\n\t\t});\n\t\tshowQueryConfig();\n\t\tif(this.showQuery == \"icon\") hideQueryConfig();\n\t}\n\tthis.resultDOM = document.createElement(\"span\");\n\tif(this.showQuery){\n\t\tthis.resultDOM.setAttribute(\"class\", \"terminus-query-results-full\");\n\t}\n\telse {\n\t\tthis.resultDOM.setAttribute(\"class\", \"terminus-query-results\");\n\t}\n\tthis.resultDOM.appendChild(this.messages);\n\tif(this.views.length == 0){\n\t\tthis.addView(TerminusClient.View.table(), this.defaultResultView);\n\t}\n\t//this is where we want to put in the view headers in the case of the query page\n\tfor(var i = 0; i<this.views.length; i++){\n\t\tvar vdom = this.views[i].getAsDOM();\n\t\tif(vdom){\n\t\t\tif(this.showHeader){\n\t\t\t\tvar closable = (this.views.length != 1);\n\t\t\t\t//var qhdr = this.getResultPaneHeader(closable);\n\t\t\t\t//vdom.prepend(qhdr);\n\t\t\t}\n\t\t\tthis.resultDOM.appendChild(vdom);\n\t\t}\n\t}\n\tthis.container.appendChild(this.resultDOM);\n\tif(this.addViews) this.container.appendChild(this.getAddViewControl());\n\treturn this.container;\n}\n\n\nQueryPane.prototype.getResultPaneHeader = function(closable){\n\tvar c = document.createElement('div');\n\tvar savePaneButton = document.createElement('button');\n\tsavePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\tsavePaneButton.appendChild(document.createTextNode('Save'));\n\tc.appendChild(savePaneButton);\n\tif(closable){\n\t\tvar closePaneButton = document.createElement('button');\n\t\tclosePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tclosePaneButton.appendChild(document.createTextNode('Close'));\n\t\tc.appendChild(closePaneButton);\n\t}\n\tvar collapsePaneButton = document.createElement('button');\n\tcollapsePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\tcollapsePaneButton.appendChild(document.createTextNode('Collapse'));\n\tc.appendChild(collapsePaneButton);\n\treturn c;\n}\n\nQueryPane.prototype.createInput = function(mode){\n    let input = new TerminusCodeSnippet(\"woql\", mode, null, 800);\n    if(this.query){\n    \tinput.setQuery(this.query);\n\t}\n\tvar self = this;\n\tinput.submit = function(qObj){\n\t\tself.submitQuery(qObj);\n\t};\n\treturn input;\n}\n\nQueryPane.prototype.updateQuery = function(qObj){\n\tthis.query = qObj;\n\tif(this.input) this.input.setQuery(this.query);\n}\n\nQueryPane.prototype.updateResult = function(result){\n\tthis.result = result;\n\tthis.updateQuery(result.query);\n\tthis.refreshViews();\n}\n\nQueryPane.prototype.addView = function(config, options){\n\tvar nrp = new ResultPane(this.client, this, config).options(options);\n\tif(this.result){\n\t\tnrp.setResult(this.result);\n\t}\n\tthis.views.push(nrp);\n\treturn nrp;\n}\n\nQueryPane.prototype.empty = function(){\n\treturn (typeof this.query == \"undefined\");\n}\n\nQueryPane.prototype.clearMessages = function(){\n\tif(this.messages.children.length) HTMLHelper.removeChildren(this.messages);\n}\n\nQueryPane.prototype.getBusyLoader = function(){\n     var pbc = document.createElement('div');\n     pbc.setAttribute('class', 'term-progress-bar-container');\n     var pbsa = document.createElement('div');\n     pbsa.setAttribute('class', 'term-progress-bar term-stripes animated reverse slower');\n     pbc.appendChild(pbsa);\n     var pbia = document.createElement('span');\n     pbia.setAttribute('class', 'term-progress-bar-inner');\n     pbsa.appendChild(pbia);\n\t return pbc;\n}\n\nQueryPane.prototype.showBusy = function(msg){\n\tvar msgHolder = document.createElement('div');\n\tmsgHolder.setAttribute('class', 'terminus-busy-msg')\n\tmsgHolder.appendChild(document.createTextNode(msg));\n\tmsgHolder.appendChild(this.getBusyLoader());\n\tthis.messages.appendChild(msgHolder);\n}\n\nQueryPane.prototype.showError = function(e){\n\tthis.showMessage(e, \"error\");\n}\n\nQueryPane.prototype.showMessage = function(m, type){\n\tvar md = document.createElement('div');\n\tmd.setAttribute('class', 'terminus-show-msg-' + type);\n\tmd.appendChild(document.createTextNode(m));\n\tthis.messages.appendChild(md);\n}\n\nQueryPane.prototype.showNoBindings = function(){\n\tnor = document.createElement('div');\n\tnor.setAttribute('class', 'terminus-show-msg-warning');\n\tnor.appendChild(document.createTextNode(\"No results available for this query\"));\n\tthis.clearMessages();\n\tthis.messages.appendChild(nor);\n}\t\n\nQueryPane.prototype.submitQuery = function(qObj){\n\tthis.clearMessages();\n\tif(!qObj){\n\t\tthis.showError(\"Query could not be extracted from input box - remember that the last element in the query must be a WOQL object\")\n\t}\n\tif(typeof qObj == 'string'){\n\t\tthis.showError(qObj);\n\t\treturn;\n\t}\n    this.query = qObj;\n\tthis.showBusy('Fetching results ...');\n\tvar self = this;\n\tvar start = Date.now();\n    qObj.execute(this.client).then((results) => {\n\t\tvar r = new TerminusClient.WOQLResult(results, qObj);\n\t\tthis.result = r;\n\t\tthis.clearMessages();\n\t\tif(this.result.hasBindings()){\n\t\t\tvar delta = Date.now() - start;\n\t\t\tthis.showMessage(\"Query returned \" + this.result.count() + \" results in \" + (delta/1000) + \" seconds\", \"info\");\n\t\t\tthis.refreshViews();\n\t\t}\n\t\telse this.showNoBindings();\n\t}).catch((error) => {\n\t\tthis.clearMessages();\n\t\tif(error.data && error.data['terminus:witnesses']){\n\t\t\tthis.showViolations(error.data['terminus:witnesses']);\n\t\t}\n\t\telse {\n\t\t\tthis.showError(error);\n\t\t}\n\t});\n}\n\nQueryPane.prototype.refreshViews = function(){\n\tfor(var i = 0; i<this.views.length; i++){\n\t\tthis.views[i].updateResult(this.result);\n\t}\n}\n\nQueryPane.prototype.showViolations = function(vios){\n    var nvios = new TerminusViolations(vios, this); \n\tthis.messages.appendChild(nvios.getAsDOM(\"\"));\n}\n\nQueryPane.prototype.getAddViewControl = function(){\n\tvar vd = document.createElement('div');\n\tvd.setAttribute('class', 'terminus-add-view-selector');\n\tvar self = this;\n\tvar WOQL = TerminusClient.WOQL;\n\tvar newView = function(val){\n\t\tself.selector.value = \"\";\n\t\tvar c= eval('WOQL.' + val + \"()\");\n\t\tvar nv = self.addView(c, self.defaultResultView);\n\t\tif(self.result){\n\t\t\tnv.setResult(self.result);\n\t\t}\n\t\tvar vdom = nv.getAsDOM();\n\t\tif(vdom){\n\t\t\tself.resultDOM.appendChild(vdom);\n\t\t}\n\t}\n\tvar opts = [\n\t\t{ value: \"\", label: \"Add another view of results\"},\n\t\t{ value: \"table\", label: \"Add Table View\"},\n\t\t{ value: \"stream\", label: \"Add Stream View\"},\n\t\t{ value: \"graph\", label: \"Add Graph View\"},\n\t\t{ value: \"chooser\", label: \"Add Drop-down View\"},\n\t\t{ value: \"map\", label: \"Add Map View\"}\n\t];\n\tvar sel = HTMLHelper.getSelectionControl(\"view\", opts, false,newView);\n\tthis.selector = sel;\n\tvd.appendChild(sel);\n\treturn vd;\n}\n\nmodule.exports = QueryPane;","const TerminusCodeSnippet = require('./query/TerminusCodeSnippet');\nconst Datatypes = require(\"./Datatypes\");\nconst DatatypeRenderers = require(\"./DatatypeRenderers\");\n\nconst SimpleTable = require(\"./table/SimpleTable\");\nconst SimpleGraph = require(\"./graph/SimpleGraph\");\nconst SimpleStream = require(\"./stream/SimpleStream\");\nconst SimpleChooser = require(\"./chooser/SimpleChooser\");\nconst HTMLHelper = require('./HTMLHelper');\n\n/**\n * Result Pane is defined by a WOQL configuration object\n * Visually it consists of a single rule editor (showing the current state of the configuration object) which may be collapsed behind a configuration link\n * and a single result view which shows the result of the rule when applied to the current results.\n *\n */\nfunction ResultPane(client, querypane, config){\n    this.client = client;\n    this.qp = querypane;\n    this.config = config;\n\tthis.container = document.createElement('span');\n    this.container.setAttribute('class', 'terminus-result-pane');\n}\n\nResultPane.prototype.options = function(opts){\n\tthis.showConfig = (opts && typeof opts.showConfig != \"undefined\" ? opts.showConfig : false);\n    this.editConfig = (opts && typeof opts.editConfig != \"undefined\" ? opts.editConfig : false);\n    this.changeViewType = (opts && typeof opts.changeViewType != \"undefined\" ? opts.changeViewType : true);\n    this.intro = (opts && typeof opts.intro != \"undefined\" ? opts.intro : false);\n    this.renderers =  (opts && opts.renderers ? opts.renderers : {\n\t\ttable: new SimpleTable(),\n\t\tgraph: new SimpleGraph(),\n\t\tstream: new SimpleStream(),\n\t\tchooser: new SimpleChooser()\n    });\n    if(this.config){\n        this.viewers = [this.config];\n    }\n    this.viewers =  (opts && typeof opts.viewers != \"undefined\" ? this.viewers.concat(opts.viewers) : this.viewers);\n    this.currentViewer = 0;\n    return this;\n}\n\nResultPane.prototype.getRenderer = function(){\n    if(this.config && this.config.renderer()){\n        return this.config.renderer();\n    }\n    else {\n        if(this.config.type && this.renderers[this.config.type]){\n            return this.renderers[this.config.type];\n        }\n    }\n    return false;\n}\n\nResultPane.prototype.getAsDOM = function(){\n    if(this.intro){\n        var di = (typeof this.intro == \"string\" ? document.createTextNode(this.intro) : this.intro);\n\t\tthis.container.appendChild(di);\n\t}\n    var configspan = document.createElement(\"span\");\n    configspan.setAttribute(\"class\", \"pane-config-icons\");\n    this.container.appendChild(configspan);\n\tthis.resultDOM = document.createElement('span');\n\tthis.resultDOM.setAttribute('class', 'terminus-result-view');\n\tif(this.result){\n\t\tthis.resultDOM.appendChild(this.getResultDOM());\n\t}\n\tthis.container.appendChild(this.resultDOM);\n\tif(this.showConfig){\n        this.showingQuery = (this.showConfig != \"icon\");\n\t\tvar mode = (this.editConfig ? \"edit\" : \"view\");\n\t\tthis.input = this.createInput(mode);\n\t\tvar ipdom = this.input.getAsDOM();\n        var ispan = document.createElement(\"span\");\n        ispan.addEventListener('mouseover', function(){\n            this.style.cursor = \"pointer\";\n\t\t});\n\t\tispan.setAttribute(\"class\", \"result-pane-config\");\n\t\tvar ic = document.createElement(\"i\");\n\t\tispan.appendChild(ic);\n\t\tconfigspan.appendChild(ispan);\n\t\tvar self = this;\n\t\tfunction showQueryConfig(){\n\t\t\tconfigspan.title=\"Click to Hide View Configuration\";\n\t\t\tic.setAttribute(\"class\", \"fas fa fa-times-circle\");\n            if(configspan.nextSibling){\n                self.container.insertBefore(ipdom, configspan.nextSibling);\n                if(self.input.snippet.value)\n\t\t\t\t\tself.input.stylizeSnippet();\n            }\n            else{\n                self.container.appendChild(ipdom);\n                if(self.input.snippet.value)\n\t\t\t\t\tself.input.stylizeSnippet();\n            }\n\t\t}\n\t\tfunction hideQueryConfig(){\n\t\t\tconfigspan.title=\"Click to View Configuration\";\n            ic.setAttribute(\"class\", \"terminus-result-icons terminus-result-view-icon \" + self.getViewConfigIconClass());\n\t\t\tself.container.removeChild(ipdom);\n\t\t}\n\t\tispan.addEventListener(\"click\", () => {\n\t\t\tif(this.showingQuery) hideQueryConfig();\n\t\t\telse showQueryConfig();\n\t\t\tthis.showingQuery = !this.showingQuery;\n        });\n        showQueryConfig();\n\t\tif(this.showConfig == \"icon\") hideQueryConfig();\n    }\n    if(this.changeViewType){\n        cvicons = this.getViewTypeIconDOM(ipdom);\n        if(cvicons) configspan.prepend(cvicons);\n    }\n\treturn this.container;\n}\n\nResultPane.prototype.getViewConfigIconClass = function(){\n    if(this.changeViewType && this.viewers.length > 1){\n        return \"fas fa fa-vial\";\n    }\n    if(this.viewers[this.currentViewer].icon){\n        return this.viewers[this.currentViewer].icon;\n    }\n    var def = this.getDefaultViewerIcon(this.viewers[this.currentViewer]);\n    return def.icon;\n}\n\n\nResultPane.prototype.getViewTypeIconDOM = function(sp, ipdom){\n    var bsp = document.createElement('span');\n    bsp.setAttribute('class', 'terminus-result-icons');\n    if(this.viewers.length > 1){\n        for(var i = 0; i<this.viewers.length; i++){\n            var isp = this.getIconForViewer(this.viewers[i], i, bsp);\n            bsp.appendChild(isp);\n        }\n    }\n    return bsp;\n}\n\nResultPane.prototype.changeViewerType = function(viewer, index){\n    this.currentViewer = index;\n    this.config = viewer;\n    if(this.input){\n        this.input.setQuery(viewer);\n        this.input.submit(this.input.qObj);\n    }\n    else {\n        this.updateView(viewer);\n    }    \n}\n\n\nResultPane.prototype.getDefaultViewerIcon = function(viewer){\n    var view_types = {\n        table: {label: \"Table\", icon: \"fa fa-table\"},\n\t\tgraph: {label: \"Graph\", icon: \"fas fa-code-branch\"},\n\t\tchooser: {label: \"Drop-down List\", icon: \"fas fa-caret-down\"},\n\t\tstream: {label: \"Result Stream\", icon: \"fa fa-list\"}\n    }\n    return view_types[viewer.type];\n}\n\n\nResultPane.prototype.getIconForViewer = function(viewer, index, container){\n    var isp = document.createElement('span');\n    var icon = document.createElement(\"i\");\n    var def = this.getDefaultViewerIcon(viewer);\n    icon.title = (viewer.label) ? viewer.label : def.label;\n    var ic = (viewer.icon ? viewer.icon : def.icon);\n    icon.setAttribute(\"class\", ic);\n    icon.classList.add('terminus-result-view-icon');\n    //icon.classList.add('circle-icon');\n    isp.appendChild(icon);\n    if(this.currentViewer == index){\n        isp.setAttribute(\"class\", \"result-icon-selected selected terminus-result-selected\");\n        icon.classList.add('terminus-view-selected');\n    }\n    else {\n        isp.setAttribute(\"class\", \"result-icon-selectable selectable\");\n        isp.addEventListener('mouseover', function(){\n            this.style.cursor = \"pointer\";\n\t\t});\n    }\n    isp.addEventListener(\"click\", () => {\n        this.changeViewerType(viewer, index);\n        HTMLHelper.removeChildren(container);\n        for(var i = 0; i<this.viewers.length; i++){\n            var isp = this.getIconForViewer(this.viewers[i], i, container);\n            container.appendChild(isp);\n        }\n    });\n    return isp;\n}\n\nResultPane.prototype.createInput = function(mode){\n    let input = new TerminusCodeSnippet(\"rule\", mode);\n    if(this.config){\n    \tinput.setQuery(this.config);\n\t}\n\tvar self = this;\n\tinput.submit = function(config){\n\t\tself.updateView(config);\n\t};\n\treturn input;\n}\n\nResultPane.prototype.setResult = function(wres){\n\tthis.result = wres;\n}\n\nResultPane.prototype.updateResult = function(wres){\n\tthis.result = wres;\n\tHTMLHelper.removeChildren(this.resultDOM);\n\tthis.resultDOM.appendChild(this.getResultDOM());\n}\n\nResultPane.prototype.updateView = function(config){\n\tthis.config = config;\n\tHTMLHelper.removeChildren(this.resultDOM);\n\tif(this.result){\n\t\tthis.resultDOM.appendChild(this.getResultDOM());\n\t}\n}\n\nResultPane.prototype.getResultDOM = function(){\n\tlet span = document.createElement(\"span\");\n\tspan.setAttribute(\"class\", \"terminus-query-results\");\n    let viewer = this.config.create(this.client);\n    viewer.datatypes = new DatatypeRenderers();\n    Datatypes.initialiseDataRenderers(viewer.datatypes);\n    var self = this;\n    viewer.notify = function(r){\n        self.qp.updateResult(r);\n    }\n\tthis.result.first();\n    viewer.setResult(this.result);\n    \n    var html_renderer = this.getRenderer();\n\n\tspan.appendChild(html_renderer.render(viewer));\n\treturn span;\n}\n\nmodule.exports = ResultPane;\n","const HTMLHelper = require('../HTMLHelper');\n\nfunction HTMLStringViewer(options){\n\tthis.options(options);\t\n}\n\nHTMLStringViewer.prototype.options = function(options){\n\tthis.size = ((options && options.size) ? options.size : false);\n\tthis.css = ((options && options.css) ? \"terminus-literal-value \" + options.css : \"terminus-literal-value\");\n\tthis.max_word_size = (options && options.max_word_size ? options.max_word_size : false);\n\tthis.max_cell_size = (options && options.max_cell_size ? options.max_cell_size : false);\n\tthis.show_types = (options && options.show_types ? options.show_types : false);\n}\n\nHTMLStringViewer.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\treturn this.render(value);\n}\n\nHTMLStringViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\nHTMLStringViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', this.css);\n\tinput.setAttribute('data-value', value);\n\tif(this.show_types && this.type != \"id\"){\n\t\tvalue += \" (\" + this.type + \")\";\n\t}\n\tif(this.max_word_size || this.max_cell_size){\n\t\tHTMLHelper.wrapShortenedText(input, value, this.max_cell_size, this.max_word_size);\n\t}\n\telse {\n\t\tvalue = document.createTextNode(value);\n\t\tinput.appendChild(value);\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLStringViewer}\n\n\n","function HTMLStringEditor(options){\n\tthis.options(options);\t\n}\n\nHTMLStringEditor.prototype.options = function(options){\t\n\tthis.css = ((options && options.css) ? \"terminus-literal-value \" + options.css : \"terminus-literal-value\");\n\tthis.opts = options;\n}\n\nHTMLStringEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar big = ((this.opts && typeof this.opts.big != \"undefined\") ? this.opts.big : this.isBigType(this.type, value));\n\tif(big){\n\t\tvar input = document.createElement(\"textarea\");\n\t\tthis.css += \" terminus-literal-big-value\";\t\t\n\t}\n\telse {\n\t\tvar size = ((this.opts && typeof this.opts.size != \"undefined\") ? this.opts.size : this.getTypeSize(this.type, value));\n\t\tvar input = document.createElement(\"input\");\n\t\tinput.setAttribute('type', \"text\");\n\t\tinput.setAttribute('size', size);\n\t}\n\tinput.setAttribute('class', this.css);\n\tinput.setAttribute(\"data-value\", value);\n\t\n\tinput.value = value;\n\tvar self = this;\n\tinput.addEventListener(\"input\", function(){\n\t\tframe.set(this.value);\n\t});\n\treturn input;\n}\n\nHTMLStringEditor.prototype.isBigType = function(ty, value){\n\tif(value && value.length && value.length > 100) return true;\n\tvar longs = [\"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\", \"xsd:base64Binary\", \"xdd:html\", \"xdd:json\", \"rdf:XMLLiteral\"];\n\tif(longs.indexOf(ty) == -1) return false;\n\treturn true;\n}\n\nHTMLStringEditor.prototype.getTypeSize = function(ty, value){\n\tif(value && value.length && value.length > 40) return 80;\n\tvar bigs = [\"xdd:url\", \"xdd:coordinate\", \"xsd:anyURI\"];\n\tvar smalls = [\"xsd:gYearMonth\", \"xdd:gYearRange\", \"xsd:decimal\", \"xsd:float\", \"xsd:time\", \"xsd:date\", \n\t\t\"xsd:dateTimeStamp\",\"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:duration\", \"xsd:yearMonthDuration\", \"xsd:dayTimeDuration\", \n\t\t\"xsd:nonNegativeInteger\", \"xsd:positiveInteger\", \"xsd:negativeInteger\",\t\"xsd:nonPositiveInteger\", \"xsd:integer\",\"xsd:unsignedInt\"];\n\tvar tinys = [\"xsd:boolean\", \"xsd:gYear\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:byte\", \"xsd:short\", \"xsd:unsignedByte\", \"xsd:language\"];\n\tif(bigs.indexOf(ty) != -1) return 80;\n\tif(smalls.indexOf(ty) != -1) return 16;\n\tif(tinys.indexOf(ty) != -1) return 8;\n\treturn 32;\n}\n\nmodule.exports={HTMLStringEditor}\n\n\n","function HTMLBooleanViewer(options){\n\tthis.options(options);\n}\n\nHTMLBooleanViewer.prototype.options = function(options){\n\tthis.css = \"terminus-literal-value terminus-literal-value-boolean \" + ((options && options.css) ?  options.css : \"\");\n}\n\nHTMLBooleanViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLBooleanViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\t\n}\n\nHTMLBooleanViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', this.css);\n\tif(value){\n\t\tvar vallab = document.createTextNode(value);\n\t\tinput.appendChild(vallab);\n\t}\n\treturn input;\n}\n\n\nmodule.exports={HTMLBooleanViewer}\n\n","function HTMLBooleanEditor(options){\n\tthis.options(options);\n}\n\nHTMLBooleanEditor.prototype.options = function(options){\t\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n}\n\nHTMLBooleanEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar input = document.createElement(\"input\");\n\tinput.setAttribute('type', \"checkbox\");\n\tif(value){\n\t\tinput.setAttribute(\"checked\", \"checked\");\t\t\t\t\t\n\t}\n\tinput.addEventListener(\"change\", function(){\n\t\tif(value){\n\t\t\tframe.set(\"\");\n\t\t}\n\t\telse {\n\t\t\tframe.set(\"true\");\n\t\t}\n\t});\n\treturn input;\n}\n\nmodule.exports={HTMLBooleanEditor}\n\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLChoiceViewer(options){};\nHTMLChoiceViewer.prototype.options = function(options){}\n\nHTMLChoiceViewer.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tif(frame.frame && frame.frame.elements){\n\t\tthis.elements = frame.frame.elements;\n\t}\n\treturn this.render(value);\n}\n\nHTMLChoiceViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\nHTMLChoiceViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-choice-value\");\n\tinput.setAttribute('data-value', value);\n\tvar lab = false;\n\tif(value && this.elements){\n\t\tfor(var i = 0; i<this.elements.length; i++){\n\t\t\tvar elt = this.elements[i];\n\t\t\tif(elt.class == value){\n\t\t\t\tif(elt.label && elt.label[\"@value\"]){\n\t\t\t\t\tlab = elt.label[\"@value\"];\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\t\t\t\t\n\t\t}\n\t}\n\tif(value && !lab){\n\t\tlab = TerminusClient.UTILS.labelFromURL(value);\t\t\t\t\t\n\t}\n\tif(lab){\n\t\tinput.appendChild(document.createTextNode(lab));\t\t\n\t}\n\treturn input\n}\n\nmodule.exports={HTMLChoiceViewer}\n\n\n","const HTMLHelper = require('../HTMLHelper');\n\nfunction HTMLChoiceEditor(options){};\n\nHTMLChoiceEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar optInput = document.createElement(\"select\");\n\toptInput.setAttribute('class', \"terminus-choice-picker\");\n\tvar foptions = frame.getChoiceOptions();\n\tfoptions.unshift({ value: \"\", label: \"Not Specified\"});\n\tvar callback = function(val){\n\t\tframe.set(val);\n\t}\n\tvar sel = HTMLHelper.getSelectionControl(\"select-choice\", foptions, value, callback);\n\treturn sel;\n}\n\nmodule.exports={HTMLChoiceEditor}\n\n","function HTMLCoordinateViewer(options){\n\tthis.inputs = [];\n}\n\nHTMLCoordinateViewer.prototype.parseValue = function(value){\n\ttry {\n\t\tvar parsed = (value ? JSON.parse(value) : false);\n\t\tif(parsed && this.type == \"xdd:coordinate\"){\n\t\t\tparsed = [parsed];\n\t\t}\n\t\treturn parsed;\n\t}\n\tcatch(e){\n\t\tthis.error = this.type + \" value \" + value + \" failed to parse as json\", e.toString();\n\t\treturn [];\n\t}\n}\n\n\nHTMLCoordinateViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLCoordinateViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\nHTMLCoordinateViewer.prototype.render = function(value){ \n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-coordinate\");\n\tif(value){\n\t\tinput.setAttribute('data-value', value);\t\t\n\t\tvar parsed = this.parseValue(value);\n\t\tif(parsed){\n\t\t\tfor(var i = 0; i < parsed.length; i++){\n\t\t\t\tvar lldom = document.createElement(\"span\");\n\t\t\t\tlldom.setAttribute(\"class\", \"latlong\");\n\t\t\t\tlldom.appendChild(document.createTextNode(\"Latitude: \"));\n\t\t\t\tlldom.appendChild(document.createTextNode(parsed[i][0] + \" °\" + \" \"));\n\t\t\t\tlldom.appendChild(document.createTextNode(\"Longitude: \"));\n\t\t\t\tlldom.appendChild(document.createTextNode(parsed[i][1] + \" °\" ));\n\t\t\t\tinput.appendChild(lldom);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tinput.setAttribute(\"title\", this.error);\n\t\t}\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLCoordinateViewer}\n\n","function HTMLCoordinateEditor(options){\n\tthis.inputs = [];\n}\n\nHTMLCoordinateEditor.prototype.getInputDOMs = function(lat, long, change){\n\tvar latdom = document.createElement(\"input\");\n\tlatdom.setAttribute(\"type\", \"text\");\n\tlatdom.value = lat;\n\tvar longdom = document.createElement(\"input\");\n\tlongdom.setAttribute(\"type\", \"text\");\n\tlongdom.value = long;\n\tlatdom.addEventListener(\"change\", change);\n\tlongdom.addEventListener(\"change\", change);\n\treturn [latdom, longdom];\n}\n\nHTMLCoordinateEditor.prototype.getLatLongDOM = function(lat, long, ty, index, parent){\n\tvar lldom = document.createElement(\"span\");\n\tlldom.setAttribute(\"class\", \"terminus-lat-long\");\n\tvar firstcol = document.createElement(\"span\");\n\tfirstcol.setAttribute(\"class\", \"terminus-lat-long-col\");\n\tlldom.appendChild(firstcol);\n\tif(index > 2 || (ty == \"xdd:coordinatePolyline\" && index > 1)){\n\t\tvar delbut = document.createElement(\"button\");\n\t\tdelbut.setAttribute(\"class\", \"delete-coordinate\");\n\t\tdelbut.appendChild(document.createTextNode(\"Remove\"));\n\t\tdelbut.addEventListener(\"click\", function(){\n\t\t\tlong.value = \"\";\n\t\t\tlat.value = \"\";\n\t\t\tparent.removeChild(lldom);\n\t\t});\n\t\tfirstcol.appendChild(delbut);\n\t}\n\tlldom.appendChild(document.createTextNode(\"Latitude: \"));\n\tlldom.appendChild(lat);\n\tlldom.appendChild(document.createTextNode(\" °\" + \" \"));\n\tlldom.appendChild(document.createTextNode(\"  Longitude: \"));\n\tlldom.appendChild(long);\n\tlldom.appendChild(document.createTextNode(\" ° \" ));\n\treturn lldom;\n}\n\n\nHTMLCoordinateEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-coordinate\");\n\tinput.setAttribute('data-value', value);\n\ttry {\n\t\tvar parsed = (value ? JSON.parse(value) : false);\n\t}\n\tcatch(e){\n\t\tthis.error = this.type + \" failed to parse as json\", e.toString();\n\t\tvar parsed = false;\n\t}\n\tvar self = this;\n\tvar updateValueFromForm = function(){\n\t\tvar vals = [];\n\t\tfor(var i = 0; i<self.inputs.length; i++){\n\t\t\tif(self.inputs[i][0].value && self.inputs[i][1].value){\n\t\t\t\tvar val = \"[\" + self.inputs[i][0].value + \",\" + self.inputs[i][1].value + \"]\";\n\t\t\t\tvals.push(val);\n\t\t\t}\n\t\t}\n\t\tif(vals.length == 0){\n\t\t\tframe.set(\"\");\n\t\t}\n\t\telse if(this.type == \"xdd:coordinate\"){\n\t\t\tframe.set(vals[0]);\n\t\t}\n\t\telse {\n\t\t\tvar op = \"[\";\n\t\t\tfor(var i = 0; i<vals.length; i++){\n\t\t\t\top += vals[i];\n\t\t\t\tif(i+1 < vals.length) op += \",\";\n\t\t\t}\n\t\t\top += \"]\";\n\t\t\tframe.set(op);\n\t\t}\n\t};\n\tif(!parsed){\n\t\tif(this.type == \"xdd:coordinate\") parsed = [\"\",\"\"];\n\t\telse {\n\t\t\tparsed = [[\"\",\"\"],[\"\",\"\"]];\n\t\t\tif(this.type == \"xdd:coordinatePolygon\") parsed.push([\"\",\"\"]);\n\t\t}\n\t}\n\tif(this.type == \"xdd:coordinate\"){\n\t\tparsed = [parsed];\n\t}\n\tfor(var i = 0; i < parsed.length; i++){\n\t\tthis.inputs.push(this.getInputDOMs(parsed[i][0], parsed[i][1], updateValueFromForm))\n\t}\n\tvar lldoms = document.createElement(\"span\");\n\tfor(var i = 0; i < this.inputs.length; i++){\n\t\tvar lldom = this.getLatLongDOM(this.inputs[i][0], this.inputs[i][1], this.type, i, lldoms);\n\t\tlldoms.appendChild(lldom);\n\t}\n\tinput.appendChild(lldoms);\n\tvar self = this;\n\tif(this.type != \"xdd:coordinate\"){\n\t\tvar butspan = document.createElement(\"span\");\n\t\tbutspan.setAttribute(\"class\", \"terminus-add-coordinate\")\n\t\tvar addbut = document.createElement(\"button\");\n\t\taddbut.setAttribute(\"class\", \"terminus-add-coordinate\");\n\t\taddbut.appendChild(document.createTextNode(\"Add\"));\n\t\taddbut.addEventListener(\"click\", function(){\n\t\t\tvar ipdoms = self.getInputDOMs(\"\", \"\", updateValueFromForm);\n\t\t\tvar lldom = self.getLatLongDOM(ipdoms[0], ipdoms[1], this.type, self.inputs.length, lldoms);\n\t\t\tlldoms.appendChild(lldom);\n\t\t\tself.inputs.push(ipdoms);\n\t\t});\n\t\tbutspan.appendChild(addbut);\n\t\tinput.appendChild(butspan);\t\t\t\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLCoordinateEditor}","const DateHelper = require('./DateHelper');\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLDateViewer(options){\n\tthis.options(options);\n}\n\nHTMLDateViewer.prototype.options = function(options){\n\tthis.max = (options && options.max ? options.max : false);\n\tthis.min = (options && options.min ? options.min : false);\n\tthis.allowbce = (options && options.allowbce ? options.allowbce : false);\n\tthis.date_spacer = \"/\";\n\tthis.time_spacer = \":\";\n\tthis.datetime_separator = \", \";\n\tthis.helper = new DateHelper.HTMLDateHelper();\n}\n\nHTMLDateViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLDateViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\nHTMLDateViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-date\");\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tvar parsed = TerminusClient.UTILS.DateHelper.parseDate(this.type, value);\n\t\tvar datepart = this.getDateComponentDOM(parsed);\n\t\tvar timepart = this.getTimeComponentDOM(parsed);\n\t\tif(timepart) input.appendChild(timepart);\n\t\tif(timepart && datepart) input.appendChild(document.createTextNode(this.datetime_separator));\n\t\tif(datepart) input.appendChild(datepart);\n\t}\n\treturn input;\n}\n\nHTMLDateViewer.prototype.getTimeComponentDOM = function(parsed, ty){\n\tvar hdom = (parsed.hour ? document.createElement(\"span\") : false);\n\tif(hdom){\n\t\thdom.setAttribute(\"class\", \"terminus-time-hour\");\n\t\thdom.appendChild(document.createTextNode(parsed.hour));\n\t}\n\tvar mdom = (typeof parsed.minute != \"undefined\" ? document.createElement(\"span\") : false);\n\tif(mdom){\n\t\tmdom.setAttribute(\"class\", \"terminus-time-minute\");\n\t\tvar mlab = (parsed.minute < 10 ? parsed.minute : parsed.minute);\n\t\tmdom.appendChild(document.createTextNode(mlab));\n\t}\n\tvar sdom = (typeof parsed.second != \"undefined\" ? document.createElement(\"span\") : false);\n\tif(sdom){\n\t\tsdom.setAttribute(\"class\", \"terminus-time-second\");\n\t\tvar slab = (parsed.second < 10 ? parsed.second : parsed.second);\n\t\tsdom.appendChild(document.createTextNode(slab));\n\t}\n\tvar tz = (parsed.timezone ? document.createElement(\"span\") : false);\n\tif(tz){\n\t\tsdom.setAttribute(\"class\", \"terminus-time-timezone\");\n\t\tsdom.appendChild(document.createTextNode(parsed.timezone));\n\t}\n\tif(hdom || mdom || sdom || tz){\n\t\tvar dadom = document.createElement(\"span\");\n\t\tdadom.setAttribute(\"class\", \"terminus-time-components time-\"+ty);\n\t\tif(hdom) dadom.appendChild(hdom); \n\t\tif(mdom) {\n\t\t\tif(hdom) dadom.appendChild(document.createTextNode(this.time_spacer));\n\t\t\tdadom.appendChild(mdom); \n\t\t}\n\t\tif(sdom) {\n\t\t\tif(mdom || hdom) dadom.appendChild(document.createTextNode(this.time_spacer));\n\t\t\tdadom.appendChild(sdom); \n\t\t}\n\t\tif(tz){\n\t\t\tdadom.appendChild(document.createTextNode(\" (Timezone: \")); \n\t\t\tdadom.appendChild(sdom); \n\t\t\tdadom.appendChild(document.createTextNode(\")\")); \t\t\t\n\t\t}\n\t\treturn dadom;\n\t}\n\treturn false;\n}\n\nHTMLDateViewer.prototype.getDateComponentDOM = function(parsed, ty){\n\tvar ydom = (parsed.year ? document.createElement(\"span\") : false);\n\tif(ydom){\n\t\tydom.setAttribute(\"class\", \"terminus-date-year\");\n\t\tydom.appendChild(document.createTextNode(parsed.year));\n\t}\n\tvar mdom = (parsed.month ? document.createElement(\"span\") : false);\n\tif(mdom){\n\t\tmdom.setAttribute(\"class\", \"terminus-date-month\");\n\t\tmdom.appendChild(document.createTextNode(this.helper.getMonthName(parsed.month)));\t\t\n\t}\n\tvar ddom = (parsed.day ? document.createElement(\"span\") : false );\n\tif(ddom){\n\t\tddom.setAttribute(\"class\", \"terminus-date-day\");\n\t\tddom.appendChild(document.createTextNode(parsed.day));\t\t\n\t}\n\tif(ydom || mdom || ddom){\n\t\tvar dadom = document.createElement(\"span\");\n\t\tif(ddom) dadom.appendChild(ddom); \n\t\tif(mdom) {\n\t\t\tif(ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(mdom); \n\t\t}\n\t\tif(ydom) {\n\t\t\tif(mdom || ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(ydom); \n\t\t}\n\t\treturn dadom;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLDateViewer}","const DateHelper = require('./DateHelper');\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLDateEditor(options){\n\tthis.options(options);\n}\n\nHTMLDateEditor.prototype.options = function(options){\n\tthis.max = (options && options.max ? options.max : false);\n\tthis.min = (options && options.min ? options.min : false);\n\tthis.allowbce = (options && options.allowbce ? options.allowbce : false);\n\tthis.date_spacer = \"/\";\n\tthis.time_spacer = \":\";\n\tthis.datetime_separator = \", \";\n\tthis.helper = new DateHelper.HTMLDateHelper();\n}\n\nHTMLDateEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-date\");\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tthis.parsed = TerminusClient.UTILS.DateHelper.parseDate(this.type, value);\n\t}\n\telse this.parsed = {};\n\tvar datepart = this.getDateComponentDOM(this.parsed, this.type, frame);\n\tvar timepart = this.getTimeComponentDOM(this.parsed, this.type, frame);\n\tif(timepart) input.appendChild(timepart);\n\tif(timepart && datepart) input.appendChild(document.createTextNode(this.datetime_separator));\n\tif(datepart) input.appendChild(datepart);\n\treturn input;\n}\n\nHTMLDateEditor.prototype.set = function(part, val, frame, ty){\n\tthis.parsed[part] = val;\n\tvar xsd = TerminusClient.UTILS.DateHelper.xsdFromParsed(this.parsed, ty);\n\tif(xsd){\n\t\tframe.set(xsd);\n\t}\n}\n\nHTMLDateEditor.prototype.getTimeComponentDOM = function(parsed, ty, frame){\n\tif([\"xsd:dateTime\", \"xsd:dateTimeStamp\", \"xsd:time\"].indexOf(ty) == -1){\n\t\treturn false;\n\t}\n\tvar self = this;\n\tvar hdom = document.createElement(\"input\");\n\thdom.setAttribute(\"class\", \"terminus-hour-input terminus-hour-\"+ty);\n\thdom.setAttribute(\"size\", 2);\n\thdom.setAttribute(\"placeholder\", \"HH\");\n\thdom.value = (parsed.hour ? parsed.hour : \"\");\n\thdom.addEventListener(\"input\", function(){\n\t\tself.set(\"hour\", this.value, frame, ty);\n\t});\n\tvar mdom = document.createElement(\"input\");\n\tmdom.setAttribute(\"class\", \"terminus-minute-input terminus-minute-\"+ty);\n\tmdom.setAttribute(\"size\", 2);\n\tmdom.setAttribute(\"placeholder\", \"MM\");\n\tmdom.value = (parsed.minute ? parsed.minute: \"\");\n\tmdom.addEventListener(\"input\", function(){\n\t\tself.set(\"minute\", this.value, frame, ty);\n\t});\n\tvar sdom = document.createElement(\"input\");\n\tsdom.setAttribute(\"class\", \"terminus-second-input terminus-second-\"+ty);\n\tsdom.setAttribute(\"size\", 8);\n\tsdom.setAttribute(\"placeholder\", \"SS.sss...\");\n\tsdom.value = (parsed.second ? parsed.second: \"\");\n\tsdom.addEventListener(\"input\", function(){\n\t\tself.set(\"second\", this.value, frame, ty);\n\t})\n\tvar tdom = document.createElement(\"span\");\n\ttdom.appendChild(hdom);\n\ttdom.appendChild(document.createTextNode(this.time_spacer));\n\ttdom.appendChild(mdom);\n\ttdom.appendChild(document.createTextNode(this.time_spacer));\n\ttdom.appendChild(sdom);\n\treturn tdom;\n}\n\nHTMLDateEditor.prototype.getDateComponentDOM = function(parsed, ty, frame){\n\tvar self = this;\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:gYear\", \"xsd:gYearMonth\", \"xsd:dateTimeStamp\"].indexOf(ty) != -1){\n\t\tvar ydom = document.createElement(\"input\");\n\t\tydom.setAttribute(\"class\", \"terminus-year-input terminus-year-\"+ty);\n\t\tydom.setAttribute(\"size\", 6);\n\t\tydom.setAttribute(\"placeholder\", \"YYYY\");\n\t\tydom.value = (parsed.year ? parsed.year : \"\");\n\t\tydom.addEventListener(\"input\", function(){\n\t\t\tself.set(\"year\", this.value, frame, ty);\n\t\t})\n\t}\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:gYearMonth\", \"xsd:dateTimeStamp\", \"xsd:gMonth\", \"xsd:gMonthDay\"].indexOf(ty) != -1){\n\t\tvar mdom = document.createElement(\"select\");\n\t\tmdom.setAttribute(\"class\", \"terminus-month-input terminus-month-\"+ty);\n\t\tfor(var i = 0; i<this.helper.months.length; i++){\n\t\t\tvar opdom = document.createElement(\"option\");\n\t\t\topdom.value = i+1;\n\t\t\topdom.appendChild(document.createTextNode(this.helper.months[i]));\n\t\t\tif(parsed.month && parsed.month == i+1){\n\t\t\t\topdom.selected = true;\n\t\t\t}\n\t\t\tmdom.appendChild(opdom);\n\t\t}\n\t\tmdom.addEventListener(\"change\", function(){\n\t\t\tself.set(\"month\", this.value, frame, ty);\n\t\t})\n\t}\t\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:dateTimeStamp\", \"xsd:gDay\", \"xsd:gMonthDay\"].indexOf(ty) != -1){\n\t\tvar ddom = document.createElement(\"input\");\n\t\tddom.setAttribute(\"class\", \"terminus-day-input terminus-day-\"+ty);\n\t\tddom.setAttribute(\"size\", 2);\n\t\tddom.setAttribute(\"placeholder\", \"DD\");\n\t\tddom.value = (parsed.day ? parsed.day : \"\");\t\n\t\tddom.addEventListener(\"input\", function(){\n\t\t\tself.set(\"day\", this.value, frame, ty);\n\t\t})\n\t}\t\n\tif(ydom || mdom || ddom){\n\t\tvar dadom = document.createElement(\"span\");\n\t\tif(ddom) dadom.appendChild(ddom); \n\t\tif(mdom) {\n\t\t\tif(ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(mdom); \n\t\t}\n\t\tif(ydom) {\n\t\t\tif(mdom || ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(ydom); \n\t\t}\n\t\treturn dadom;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLDateEditor}","const HTMLHelper = require('../HTMLHelper');\n\nfunction HTMLEntityViewer(options){\n\tthis.options(options);\n}\n\nHTMLEntityViewer.prototype.options = function(options){\n\tthis.onclick = (options && options.onclick ? options.onclick: false);\n}\n\nHTMLEntityViewer.prototype.renderFrame = function(frame, dataviewer){\n\t//this.client = dataviewer.getClient();\n\treturn this.render(frame.get());\t\n}\n\nHTMLEntityViewer.prototype.renderValue = function(dataviewer){\n\t//this.client = dataviewer.getClient();\n\treturn this.render(dataviewer.value());\n}\n\nHTMLEntityViewer.prototype.render = function(value){\n\tvar holder = document.createElement(\"span\");\n\tholder.setAttribute(\"class\", \"terminus-literal-value terminus-entity-reference-value\");\n\tvar self = this;\n\tif(this.holder){\n\t\treturn this.holder;\n\t}\n\tif(value){\n\t\tvar dom = this.showValue(value)\n\t\tholder.appendChild(dom);\n\t}\n\treturn holder;\n}\n\nHTMLEntityViewer.prototype.showValue = function(value){\n\tif(this.onclick){\n\t\tvar self = this;\n\t\tvar a = document.createElement(\"a\");\n\t\ta.style.color = \"#0000aa\";\n\t\ta.appendChild(document.createTextNode(value));\n\t\ta.addEventListener(\"click\", function(event){\n\t\t\tself.onclick(value);\n\t\t});\n\t\ta.addEventListener(\"mouseover\", function(event){\n\t\t\ta.style.cursor = \"pointer\";\n\t\t});\n\t\treturn a; \t\n\t}\n\telse {\n\t\treturn document.createTextNode(value);\n\t}\n}\n\n\nHTMLEntityViewer.prototype.getEntityViewHTML = function(value, frame, dataviewer){\n\tvar span = document.createElement(\"span\");\n\tvar self = this;\n\tspan.setAttribute(\"class\", \"terminus-internal-link\");\n\tspan.appendChild(dataviewer.internalLink(value));\n\tif(controller = renderer.getController()){\n\t\tcontroller.getInstanceMeta(value).then(function(response){\n\t\t\tvar lab = self.getEntityLabel(value, response, dataviewer);\n\t\t\tif(lab){ \n\t\t\t\tHTMLHelper.removeChildren(span);\n\t\t\t\tspan.appendChild(lab);\n\t\t\t}\t\n\t\t});\n\t}\n\treturn span;\n}\n\nHTMLEntityViewer.prototype.getEntityLabel = function(url, response, dv){\n\tvar nspan = document.createElement(\"span\");\n\tif(response && (il = HTMLHelper.getVariableValueFromBinding(\"InstanceLabel\", response))){\n\t\tnspan.appendChild(dv.internalLink(url, il));\n\t\tvar rt = HTMLHelper.getVariableValueFromBinding(\"InstanceType\", response);\n\t\tvar tit = url + \" Type: \" + rt;\n\t\tvar ic = HTMLHelper.getVariableValueFromBinding(\"InstanceComment\", response);\n\t\tif(typeof ic == \"object\" && ic[\"@value\"]){\n\t\t\ttit += \" \" + ic[\"@value\"];\n\t\t}\n\t\tnspan.setAttribute(\"title\", tit);\n\t\treturn nspan;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLEntityViewer}","function HTMLEntityEditor(options){}\nHTMLEntityEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar input = document.createElement(\"input\");\n\tinput.setAttribute(\"class\", \"terminus-literal-value terminus-entity-reference-value\");\n\tinput.setAttribute(\"type\", \"text\");\n\tinput.setAttribute('size', 80);\n\tinput.value = value;\n\tvar self = this;\n\tinput.addEventListener(\"change\", function(){\n\t\tvar url = this.value;\n\t\tif(url.indexOf(\"/\") == -1 && url.indexOf(\":\") == -1){\n\t\t\turl = \"doc:\" + url;\n\t\t}\n\t\tframe.set(url);\n\t});\n\treturn input;\n}\n\nmodule.exports={HTMLEntityEditor}","function HTMLImageViewer(options){}\n\nHTMLImageViewer.prototype.options = function(options){}\n\n\nHTMLImageViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLImageViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\t\nHTMLImageViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-image-value\");\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tvar img = document.createElement(\"a\");\n\t\timg.setAttribute('src', value);\n\t\tinput.appendChild(img);\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLImageViewer}\n\n\n","function HTMLImageEditor(options){}\nHTMLImageEditor.prototype.renderFrame = function(frame, dataviewer){\n\tif(this.type == \"xsd:base64Binary\"){\n\t\tvar input = document.createElement(\"textarea\");\n\t\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-b64image-value\");\n\t\tinput.value = value;\n\t\tinput.addEventListener(\"change\", function(){\n\t\t\tframe.set(this.value);\n\t\t});\n\t\treturn input;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLImageEditor}","function HTMLLinkViewer(options){\n\tthis.options(options);\n}\n\nHTMLLinkViewer.prototype.options = function(options){\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n}\n\nHTMLLinkViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLLinkViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\t\nHTMLLinkViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', this.css);\n\tinput.setAttribute('size', 80);\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tvar a = document.createElement(\"a\");\n\t\ta.setAttribute('href', value);\n\t\ta.appendChild(document.createTextNode(value));\n\t\tinput.appendChild(a);\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLLinkViewer}\n\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLNumberViewer(options){\n\tthis.options(options);\n}\n\nHTMLNumberViewer.prototype.options = function(options){\n\tthis.commas = (options && options.commas ? options.commas : true);\n}\n\nHTMLNumberViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLNumberViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\t\nHTMLNumberViewer.prototype.render = function(value){\n\tif(value === 0) value = \"0\";\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', 'terminus-number-value terminus-literal-value');\n\tinput.setAttribute('data-value', value);\n\tvalue = (this.commas ? TerminusClient.UTILS.TypeHelper.numberWithCommas(value) : value);\n\tinput.appendChild(document.createTextNode(value));\n\treturn input;\n}\n\nmodule.exports={HTMLNumberViewer}\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLRangeViewer(options){\n\tthis.options(options);\n}\n\nHTMLRangeViewer.prototype.options = function(options){\n\tthis.commas = (options && options.commas ? options.commas : true);\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n\tthis.delimiter = (options && options.delimiter ? options.delimiter : false);\n}\n\nHTMLRangeViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLRangeViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\t\nHTMLRangeViewer.prototype.render = function(value){\n\tvar vals = TerminusClient.UTILS.TypeHelper.parseRangeValue(value, this.delimiter);\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", this.css);\n\tvar rvals = document.createElement(\"span\");\n\trvals.setAttribute(\"class\", \"terminus-range-value-left\");\n\tvar svals = document.createElement(\"span\");\n\tsvals.setAttribute(\"class\", \"terminus-range-value-right\");\n\tvar x = (this.useCommas() ? TerminusClient.UTILS.TypeHelper.numberWithCommas(vals[0]) : vals[0]);\n\tvar tnode = document.createTextNode(x);\n\trvals.appendChild(tnode);\n\td.appendChild(rvals);\t\n\tif(vals.length == 2){\n\t\td.appendChild(getRangeSymbolDOM());\n\t\tvar x2 = (this.useCommas(renderer) ? TerminusClient.UTILS.TypeHelper.numberWithCommas(vals[1]) : vals[1]);\n\t\tvar t2node = document.createTextNode(x2);\n\t\tsvals.appendChild(t2node);\n\t\td.appendChild(svals);\t\n\t}\n\treturn d;\n}\n\nHTMLRangeViewer.prototype.useCommas = function(){\n\tif([\"xdd:gYearRange\", \"xdd:dateRange\"].indexOf(this.type) != -1) return false;\n\treturn this.commas;\n}\n\nfunction getRangeSymbolDOM(){\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", \"terminus-range-indicator\");\n\td.setAttribute(\"title\", \"The value is uncertain, it lies somewhere in this range\");\n\td.appendChild(document.createTextNode(\" ... \"));\n\treturn d;\n}\n\nmodule.exports={HTMLRangeViewer}\n","const TerminusClient = require('@terminusdb/terminus-client');\nconst HTMLHelper = require('../HTMLHelper');\n\nfunction HTMLRangeEditor(options){\n\tthis.options(options);\n}\n\nHTMLRangeEditor.prototype.options = function(options){\n\tthis.commas = (options && options.commas ? options.commas : true);\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n\tthis.delimiter = (options && options.delimiter ? options.delimiter : false);\n}\n\nHTMLRangeEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar vals = TerminusClient.UTILS.TypeHelper.parseRangeValue(value, this.delimiter);\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", this.css);\n\tvar rvals = document.createElement(\"span\");\n\tvar svals = document.createElement(\"span\");\n\tvar data1 = (vals.length > 0 ? vals[0] : \"\");\n\tvar data2 = (vals.length > 1 ? vals[1] : \"\");\n\tvar firstip = document.createElement(\"input\");\n\tfirstip.setAttribute('type', \"text\");\n\tfirstip.setAttribute('size', 16);\n\tif(data1){\n\t\tfirstip.value = data1;\n\t}\n\tvar secondip = document.createElement(\"input\");\n\tsecondip.setAttribute('type', \"text\");\n\tsecondip.setAttribute('size', 16);\n\tif(data2){\n\t\tthis.showing_range = true;\n\t\tsecondip.value = data2;\n\t}\n\trvals.appendChild(firstip);\n\td.appendChild(rvals);\t\n\tif(this.showing_range){\n\t\tsvals.appendChild(getRangeSymbolDOM());\n\t\tsvals.appendChild(secondip);\n\t}\n\td.appendChild(svals);\t\n\tvar but = document.createElement(\"button\");\n\tbut.setAttribute(\"class\", \"terminus-change-range\");\n\tvar txt = this.showing_range ? \"Change to Simple Value\" : \"Change to Uncertain Range\";\n\tbut.appendChild(document.createTextNode(txt));\n\td.appendChild(but);\t\n\tvar self = this;\n\tbut.addEventListener(\"click\", function(){\n\t\tif(self.showing_range){\n\t\t\tself.showing_range = false;\n\t\t\tsecondip.value = \"\";\t\t\t\t\n\t\t\tHTMLHelper.removeChildren(svals);\n\t\t}\n\t\telse {\n\t\t\tself.showing_range = true;\n\t\t\tsecondip.value = \"\";\t\t\t\t\n\t\t\tsvals.appendChild(getRangeSymbolDOM());\n\t\t\tsvals.appendChild(secondip);\n\t\t}\n\t\tvar txt = self.showing_range ? \"Change to Simple Value\" : \"Change to Uncertain Range\";\n\t\tbut.innerText = txt;\n\t\tchangeHandler();\n\t});\n\tvar changeHandler = function(){\n\t\tif(self.showing_range && secondip.value){\n\t\t\tif(firstip.value) frame.set(\"[\" + firstip.value + \",\" + secondip.value + \"]\");\t\t\t\t\n\t\t\telse frame.set(secondip.value);\t\t\t\t\n\t\t}\n\t\telse {\n\t\t\tframe.set(firstip.value);\n\t\t}\n\t}\n\tfirstip.addEventListener(\"change\", changeHandler);\n\tsecondip.addEventListener(\"change\", changeHandler);\n\treturn d;\n}\n\nfunction getRangeSymbolDOM(){\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", \"terminus-range-indicator\");\n\td.setAttribute(\"title\", \"The value is uncertain, it lies somewhere in this range\");\n\td.appendChild(document.createTextNode(\" ... \"));\n\treturn d;\n}\n\nmodule.exports={HTMLRangeEditor}\n","const GoogleMapHelper = require(\"./GoogleMapHelper\")\nfunction GoogleMapEditor(options){}\n\nGoogleMapEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar mapcontainer = document.createElement(\"div\");\n\tmapcontainer.setAttribute('class', \"gmap-window gmap-editor\");\n\tvar self = this;\n\tvar ghelper = new GoogleMapHelper();\n\tvar map = ghelper.initMap(mapcontainer, value, this.type);\n    if(ty == \"xdd:coordinate\"){\n\t    google.maps.event.addListener(map, 'click', function(event) {\n\t    \tvar position = event.latLng;\n\t    \tvar coo = \"[\" + position.lat() + \",\" + position.lng() + \"]\";\n\t    \trenderer.set(coo);\n\t        ghelper.clearMarkers();\n\t        var init = {\n\t    \t\tposition: position, \n\t    \t\tmap: map\n\t    \t}\n\t    \tvar marker = new google.maps.Marker(init);\n\t    \tghelper.markers.push(marker);\n\t  \t});\n\t}\n    else {\n    \tgoogle.maps.event.addListener(map, 'click', function(event) {\n        \tvar path = ghelper.polyline.getPath();\n        \tpath.push(event.latLng);\n      \t    var position = event.latLng;\n      \t    ghelper.addMarker(position, map, frame, '#' + path.getLength(), this.type);\n      \t});\n    }\n    return mapcontainer;\n}\n\nmodule.exports={GoogleMapEditor};","const GoogleMapHelper = require(\"./GoogleMapHelper\")\n\nfunction GoogleMapViewer(options){}\n\nGoogleMapViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nGoogleMapViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\t\nGoogleMapViewer.prototype.render = function(value){\n\tvar map = document.createElement(\"div\");\n\tmap.setAttribute('class', \"gmap-window gmap-viewer\");\n\tvar self = this;\n\tvar ghelper = new GoogleMapHelper();\n\tghelper.initMap(map, value, this.type);\t\t\n    return map;\n}\n\nmodule.exports={GoogleMapViewer};","function HTMLMarkupEditor(options){}\n\nHTMLMarkupEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar input = document.createElement(\"div\");\n\tinput.setAttribute('class', \"html-wysiwyg\");\n\tvar inner = document.createElement(\"span\");\n\tinner.setAttribute('class', \"html-literal literal-value\");\n\tinner.innerHTML=value;\n\tinput.appendChild(inner);\n\tif(typeof Quill != \"undefined\"){\n\t\tvar quill = new Quill(inner, { theme: 'snow' });\n\t\tquill.on(\"text-change\", function(){\n\t\t\tframe.set(quill.root.innerHTML);\n\t\t});\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLMarkupEditor}","function S2EntityEditor(options){}\n\nS2EntityEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar cls = frame.range();\n\tvar cback = frame.set;\n\tvar ctl = dataviewer.getClient();\n\tvar d2ch = new TerminusDocumentChooser(ctl, cls, value);\n\td2ch.change = function(val){\n\t\tframe.set(val);\n\t}\n\td2ch.view = \"label\";\n\tvar d2dom = d2ch.getAsDOM();\n\treturn d2dom;\n}\n\n\nmodule.exports={S2EntityEditor}","const HTMLHelper = require('../HTMLHelper');\n\nfunction SimpleTable(){\n\tthis.holder = document.createElement(\"div\");\n\tthis.holder.setAttribute('class', 'terminus-simple-table-holder')\n}\n\nSimpleTable.prototype.options = function(options){\n\tfor(var k in options){\n\t\tthis[k] = options[k];\n\t}\n\treturn this;\n}\n\n\nSimpleTable.prototype.render = function(woqltable){\n\tif(woqltable) this.woqltable = woqltable;\n\tHTMLHelper.removeChildren(this.holder);\n\tvar ctls = this.getControlsDOM();\n\tvar tab = this.getTableDOM();\n\tif(ctls) this.holder.appendChild(ctls)\n\tthis.holder.appendChild(tab);\n\treturn this.holder;\n}\n\nSimpleTable.prototype.getControlsDOM = function(result){\n\tvar ctrls = document.createElement(\"span\");\n\tif(this.woqltable.config.pager()){\n\t\tvar paging = this.getPaging(result);\n\t\tif(paging) ctrls.appendChild(paging);\n\t}\n\treturn ctrls;\n}\n\nSimpleTable.prototype.getTableDOM = function(){\n\tconst columns = this.woqltable.getColumnsToRender();\n\tvar tab = document.createElement(\"table\");\n\ttab.setAttribute(\"class\", \"terminus-hover-table terminus-simple-table\");\n\tvar thead = this.getTableHeader(columns);\n\ttab.appendChild(thead);\n\tvar tbody = this.getTableBody(columns);\n\ttab.appendChild(tbody);\n\treturn tab;\n}\n\nSimpleTable.prototype.getTableHeader = function(cols){\n\tvar thead = document.createElement(\"thead\");\n\tvar thr = document.createElement(\"tr\");\n\tfor(var i = 0; i<cols.length; i++){\n\t\tvar th = this.getColumnHeader(cols[i]);\n\t\tthr.appendChild(th);\n\t}\n\tthead.appendChild(thr);\n\treturn thead;\n}\n\nSimpleTable.prototype.getColumnHeader = function(colid){\n\tvar th = document.createElement(\"th\");\n\tth.setAttribute('class', 'terminus-table-header-full-css');\n\tvar clab = this.woqltable.getColumnHeaderContents(colid);\n\tth.appendChild(clab);\n\treturn th;\n}\n\nSimpleTable.prototype.getTableBody = function(cols){\n\tvar tbody = document.createElement(\"tbody\");\n\twhile(row = this.woqltable.next()){\n\t\tvar tr = this.getHTMLRow(row, cols);\n\t\tif(tr) tbody.appendChild(tr);\n\t}\n\treturn tbody;\n}\n\nSimpleTable.prototype.getHTMLRow = function(row, cols){\n\tvar tr = document.createElement(\"tr\");\n\tfor(var i = 0; i<cols.length; i++){\n\t\tvar td = this.getCell(cols[i], row);\n\t\ttr.appendChild(td);\n\t}\n\tvar self = this;\n\tif(this.woqltable.hasRowClick(row)){\n\t\tvar rc = this.woqltable.getRowClick(row);\n\t\ttr.addEventListener(\"click\", function(){\n\t\t\trc(row);\n\t\t});\n\t\ttr.addEventListener(\"mouseover\", function(){\n\t\t\tthis.style.cursor = \"pointer\";\n\t\t});\n\t}\n\tif(this.woqltable.hasRowHover(row)){\n\t\tvar rc = this.woqltable.getRowHover(row);\n\t\ttr.addEventListener(\"mouseover\", function(){\n\t\t\trc(row);\n\t\t});\n\t}\n\treturn tr;\n}\n\nSimpleTable.prototype.getCell = function(key, row){\n\tvar td = document.createElement(\"td\");\n\tif(this.woqltable.hasCellClick(row, key)){\n\t\tvar rc = this.woqltable.getCellClick(row, key);\n\t\ttd.addEventListener(\"click\", function(){\n\t\t\trc(row);\n\t\t});\n\t\ttd.addEventListener(\"mouseover\", function(){\n\t\t\tthis.style.cursor = \"pointer\";\n\t\t});\n\t}\n\tif(this.woqltable.hasCellHover(row, key)){\n\t\tvar rc = this.woqltable.getCellHover(row, key);\n\t\ttr.addEventListener(\"mouseover\", function(){\n\t\t\trc(row);\n\t\t});\n\t}\n\tvar c = this.getCellData(key, row);\n\tif(c) td.appendChild(c);\n\treturn td;\n}\n\nSimpleTable.prototype.getCellData = function(key, row){\n\tvar renderer = this.woqltable.getRenderer(key, row);\n\tif(renderer && typeof renderer == \"function\"){\n\t\treturn renderer(row[key], key, row);\n\t}\n\telse if(renderer && typeof renderer == \"object\"){\n\t\treturn this.woqltable.renderValue(renderer, row[key], key, row);\n\t}\n\tvar val = row[key]\n\tif(val && val['@value']) val = val['@value'];\n\treturn document.createTextNode(val);\n}\n\nSimpleTable.prototype.getPaging = function(){\n\tif(this.woqltable.result.query.isPaged()){\n\t\tvar pdom = document.createElement(\"div\");\n\t\tpdom.setAttribute(\"class\", \"table-page-size\");\n\t\tif(this.woqltable.config.pagesize()){\n\t\t\tlet psdom = this.getPageSize();\n\t\t\tif(psdom) pdom.appendChild(psdom);\n\t\t}\n\t\tif(this.woqltable.canChangePage()){\n\t\t\tvar pn = this.woqltable.result.query.getPage();\n\t\t\tif(pn > 2){\n\t\t\t\tpdom.appendChild(this.getFirst());\n\t\t\t}\n\t\t\tif(pn > 1){\n\t\t\t\tpdom.appendChild(this.getPrev(pn));\n\t\t\t}\n\t\t\tif(this.woqltable.config.page()) pdom.appendChild(this.getPageNumber(pn));\n\t\t\tpdom.appendChild(this.getNext(this.woqltable.result));\n\t\t}\n\t\treturn pdom;\n\t}\n}\n\nSimpleTable.prototype.showPaging = function(){\n\tif(this.woqltable.result.query.isPaged() && this.woqltable.config.pager() && this.woqltable.canChangePage()) return true;\n\treturn false;\n}\n\n\nSimpleTable.prototype.getPageSize = function(){\n\tif(this.showPaging()){\n\t\tvar chunk = document.createElement(\"span\");\n\t\tchunk.setAttribute(\"class\", \"woql-table-pagesize\");\n\t\tclabel = document.createElement(\"span\");\n\t\tclabel.appendChild(document.createTextNode(\"Page Size\"));\n\t\tchunk.appendChild(clabel);\n\t\tif(this.woqltable.config.change_pagesize){\n\t\t\tvar ctl = document.createElement(\"input\");\n\t\t\tctl.setAttribute(\"size\", 6);\n\t\t\tvar self = this;\n\t\t\tctl.value = this.woqltable.getPageSize();\n\t\t\tctl.addEventListener(\"blur\", function(){\n\t\t\t\tvar pval = (this.value ? parseInt(this.value) : false);\n\t\t\t\tself.woqltable.setPageSize(pval);\n\t\t\t});\n\t\t\tchunk.appendChild(ctl);\n\t\t}\n\t\telse {\n\t\t\tchunk.appendChild(document.createTextNode(this.woqltable.getPageSize()));\n\t\t}\n\t\treturn chunk;\n\t}\n\treturn false;\n}\n\nSimpleTable.prototype.getPageNumber = function(){\n\tvar ctl = document.createElement(\"input\");\n\tctl.setAttribute(\"size\", 4);\n\tctl.value = this.woqltable.result.query.getPage();\n\tvar self = this;\n\tctl.addEventListener(\"blur\", function(){\n\t\tvar pval = (this.value ? parseInt(this.value) : false);\n\t\tself.woqltable.setPage(pval);\n\t});\n\treturn ctl;\n}\n\nSimpleTable.prototype.getNext = function(result){\n\tvar ctl = document.createElement(\"button\");\n\tvar self = this;\n\tctl.appendChild(document.createTextNode(\"next\"));\n\tif(!this.woqltable.canAdvancePage(result)){\n\t\tctl.setAttribute(\"disabled\", \"disabled\");\n\t}\n\telse {\n\t\tctl.addEventListener(\"click\", function(){\n\t\t\tself.woqltable.nextPage();\n\t\t});\n\t}\n\treturn ctl;\n}\n\nSimpleTable.prototype.getPrev = function(result){\n\tvar ctl = document.createElement(\"button\");\n\tctl.appendChild(document.createTextNode(\"previous\"));\n\tvar self = this;\n\tif(!this.woqltable.canRetreatPage(result)){\n\t\tctl.setAttribute(\"disabled\", \"disabled\");\n\t}\n\telse {\n\t\tctl.addEventListener(\"click\", function(){\n\t\t\tself.woqltable.previousPage();\n\t\t});\n\t}\n\treturn ctl;\n}\n\nSimpleTable.prototype.getFirst = function(result){\n\tvar ctl = document.createElement(\"button\");\n\tctl.appendChild(document.createTextNode(\"first\"));\n\tvar self = this;\n\tif(!this.woqltable.canRetreatPage(result) || this.woqltable.getPage() <= 2){\n\t\tctl.setAttribute(\"disabled\", \"disabled\");\n\t}\n\telse {\n\t\tctl.addEventListener(\"click\", function(){\n\t\t\tself.woqltable.firstPage();\n\t\t});\n\t}\n\treturn ctl;\n}\n\nmodule.exports = SimpleTable;\n","const HTMLHelper = require('../HTMLHelper');\nconst GraphResultsViewer = require('./GraphResultsViewer');\n\n\nfunction SimpleGraph(){\n\tthis.holder = document.createElement(\"div\");\n}\n\nSimpleGraph.prototype.setResult = function(result){\n\tthis.result = result;\n}\n\nSimpleGraph.prototype.render = function(wgraph){\n\tthis.graph = wgraph;\n\tHTMLHelper.removeChildren(this.holder);\n\t//var ctls = this.getControlsDOM(result);\n\tvar tab = this.getGraphDOM(this.result);\n\t//if(ctls) this.holder.appendChild(ctls)\n\tthis.holder.appendChild(tab);\n\treturn this.holder;\n}\n\n\nSimpleGraph.prototype.getGraphDOM = function(){\n\tthis.gviz = new GraphResultsViewer(this.graph.config);\n\tvar gdom = this.gviz.getAsDOM();\n\tvar h = this.graph.config.height() ? this.graph.config.height() : 800;\n\tvar w = this.graph.config.width() ? this.graph.config.width() : 800;\n\tgdom.setAttribute(\"style\", \"border: 1px solid #aaa; width: \" + w + \"px; height: \" + h + \"px; \" + this.graph.config.width() + \"px\");\n\tthis.gviz.setData(this.graph);\n\tthis.gviz.initDOM(gdom);\n\treturn gdom;\n}\n\nmodule.exports = SimpleGraph;\n","function GraphResultsViewer(config) {\n\tthis.svg;\n\tthis.visid = randomString(8);\n\tthis.currentDate = Date.now() / 1000; // nowish\n\t// Individual links, nodes and text graphical elements\n\tthis.link_elements;\n\tthis.node_elements;\n\t// DOM object that this this is directly drawn into\n\tthis.container = false;\n\t// Map of ids to loaded nodes for ease\n\tthis.loadedNodes = {};\n\tthis.focusNodes = [];\n\t// Currently displayed nodes and links\n\tthis.nodes;\n\tthis.links;\n\t// Var for selecting and deselecting elements\n\tthis.selected_id;\n\tthis.setConfigOptions(config);\n}\n\n/*\n * Loads the graph with new data and optionally starts the animation\n */\nGraphResultsViewer.prototype.load = function(show) {\n\tthis.initD3(this.d3DOM);\n\tthis.loadNewData();\n\tthis.updateGraph();\n\tif(show){\n\t\tthis.updateSimulation(\"init\");\n\t}\n}\n\n/*\n * Called to issue a new set of datapoints\n */\nGraphResultsViewer.prototype.setData = function(dqr, show){\n\t//this.setFocusNodeFromResult(dqr);\n\tif(this.result){\n\t\tthis.clear();\n\t}\n\tthis.result = dqr;\n\t//if(this.svg){\n\t\tthis.load(show);\n\t//}\n}\n\nGraphResultsViewer.prototype.loadNewData = function(){\n\tthis.nodes = jQuery.extend(true, [], this.result.getNodes());\n\tfor(var i = 0 ; i<this.nodes.length; i++){\n\t\tthis.loadedNodes[this.nodes[i].id] = this.nodes[i];\n\t}\n\tthis.links = this.result.getEdges();\n\t//this.browser.rebuildController();\n}\n\n\n/*\n * Called to indicate that the current set of datapoints has been updated\n */\nGraphResultsViewer.prototype.updateData = function(dqr, show) {\n\tthis.setFocusNodeFromResult(dqr);\n\tthis.result = dqr;\n\tthis.reload(show, \"update\", this.fix_nodes);\n}\n\nGraphResultsViewer.prototype.setFocusNodeFromResult = function(dqr) {\n\tvar fn = dqr.getFocusNode();\n\tif(fn){\n\t\tthis.selected_id = fn;\n\t\tthis.focusNodes.push(fn);\n\t}\n}\n\n/*\n * Called to indicate that the filter setting has been changed on the current datapoints\n */\nGraphResultsViewer.prototype.setFilter = function(dqr, show){\n\tthis.simulation.stop();\n\tthis.reload(show, \"filter\", true);\n}\n\nGraphResultsViewer.prototype.wake = function() {\n\tif(this.simulation)\tthis.updateSimulation(\"wake\");\n}\n\nGraphResultsViewer.prototype.hibernate = function() {\n\tthis.simulation.stop();\n}\n\n/*\n * Called when more data is added to the result but the query remains the same\n */\nGraphResultsViewer.prototype.reload = function(show, mode, no_animate) {\n\tfor(var i = 0 ; i<this.nodes.length; i++){\n\t\tthis.loadedNodes[this.nodes[i].id] = this.nodes[i];\n\t}\n\tvar nnodes = jQuery.extend(true, [], this.result.getNodesAndFringes());\n\tthis.nodes = [];\n\tvar snode = this.loadedNodes[this.selected_id];\n\tfor(var i = 0 ; i<nnodes.length; i++){\n\t\tvar nnode = nnodes[i];\n\t\tif(this.loadedNodes[nnode.id]){\n\t\t\tif(nnode.id == this.selected_id){\n\t\t\t\tthis.loadedNodes[nnode.id].fx = this.loadedNodes[nnode.id].x;\n\t\t\t\tthis.loadedNodes[nnode.id].fy = this.loadedNodes[nnode.id].y;\n\t\t\t}\n\t\t\telse if(!no_animate) {\n\t\t\t\tthis.loadedNodes[nnode.id].fx = null;\n\t\t\t\tthis.loadedNodes[nnode.id].fy = null;\n\t\t\t}\n\t\t\telse if(this.loadedNodes[nnode.id].x){\n\t\t\t\tthis.loadedNodes[nnode.id].fx = this.loadedNodes[nnode.id].x;\n\t\t\t\tthis.loadedNodes[nnode.id].fy = this.loadedNodes[nnode.id].y;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif(this.explode_out && snode.x){\n\t\t\t\tnnode.x = snode.x;\n\t\t\t\tnnode.y = snode.y;\n\t\t\t}\n\t\t\tthis.loadedNodes[nnode.id] = nnode;\n\t\t}\n\t\tthis.nodes.push(this.loadedNodes[nnode.id]);\n\t}\n\tthis.links = this.result.getLinks();\n\tthis.updateGraph();\n\tif(show){\n\t\t//this.browser.rebuildController();\n\t\tthis.updateSimulation(mode);\n\t}\n}\n\nGraphResultsViewer.prototype.clear = function() {\n\tthis.nodes = [];\n\tthis.loadedNodes = {};\n\tthis.links = [];\n\tthis.updateGraph();\n\tjQuery(this.d3DOM).empty();\n\tthis.scale_factor = 1;\n}\n\n/*\n * Called to initialise the DOM when it is first loaded (called after setData)\n */\nGraphResultsViewer.prototype.initDOM = function(vdom) {\n\tif(!this.width) this.width = this.setWidth();\n\tif(!this.height) this.height = this.setHeight();\n\tthis.d3DOM = vdom;\n\tif(this.result){\n\t\tthis.load(true);\n\t}\n}\n\n/*\n * Generate the div that contains the visualisation panel\n */\nGraphResultsViewer.prototype.getAsDOM = function() {\n\tvar vdom = document.createElement(\"div\");\n\tvdom.setAttribute(\"class\", \"terminus-gviz-panel\");\n\tvdom.setAttribute(\"id\", this.visid);\n\tvdom.setAttribute(\"width\", \"100%\");\n\tthis.container = vdom;\n\treturn vdom;\n}\n\n/*\n * Calculates the width of the container area available for the SVG\n */\nGraphResultsViewer.prototype.setWidth = function() {\n\tif(this.container && this.container.clientWidth){\n\t\tthis.width = this.container.clientWidth;\n\t}\n\telse if(this.container.parentNode && this.container.parentNode.clientWidth){\n\t\tthis.width = this.container.parentNode.clientWidth;\n\t}\n\telse {\n\t\tvar w = jQuery(this.container).width();\n\t\tif(w == 0){\n\t\t\tw = jQuery(this.container.parentNode).width();\n\t\t}\n\t\tif(w == 0) {\n\t\t\tw = 800;\n\t\t}\n\t\tthis.width = w;\n\t}\n\treturn this.width;\n}\n\nGraphResultsViewer.prototype.setHeight = function() {\n\tif(this.container && this.container.clientHeight){\n\t\tthis.height = this.container.clientHeight;\n\t}\n\telse if(this.container.parentNode && this.container.parentNode.clientHeight){\n\t\tthis.height = this.container.parentNode.clientHeight;\n\t}\n\telse {\n\t\tvar w = jQuery(this.container).height();\n\t\tif(w == 0){\n\t\t\tw = jQuery(this.container.parentNode).height();\n\t\t}\n\t\tif(w == 0) {\n\t\t\tw = 400;\n\t\t}\n\t\tthis.height = w;\n\t}\n\treturn this.height;\n}\n\n\nGraphResultsViewer.prototype.initD3 = function(jqid) {\n\tvar self = this;\n\n\t/********************* Seed the data **************************/\n\tthis.svg = d3.select(jqid).append(\"svg\")\n\t\t.attr(\"width\", this.width)\n\t\t.attr(\"height\", this.height);\n\n\tvar distanceFun = function(link){\n\t\treturn self.getLinkDistance(link);\n\t}\n\n\t// create the force object\n\tthis.simulation  = d3.forceSimulation()\n\t\t//link distance varies with link type\n\t    .force(\"link\", d3.forceLink().distance(distanceFun).id(function(link) { return link.id; }))\n\t    //charge is the same for all nodes\n\t    .force('charge', d3.forceManyBody().strength(function(node){ return self.getCharge(node)}))\n\t    //collision radius changes with node type\n\t    .force('collision', d3.forceCollide().radius(function(node) {\n\t    \treturn (self.getCollisionRadius(node));\n\t    }))\n\t\t.force(\"center\", d3.forceCenter(this.width / 2, this.height / 2));\n\n\t// node drag\n\tthis.drag_drop = d3.drag()\n\t\t.on('start', function(node) {\n\t\t\tnode.fx = node.x\n\t\t\tnode.fy = node.y\n\t\t})\n\t\t.on('drag', function(node) {\n\t\t\tself.simulation.restart()\n\t\t\tnode.fx = d3.event.x;\n\t\t\tnode.fy = d3.event.y;\n\t\t})\n\t\t.on('end', function(node) {\n\t\t\tnode.fx = null;\n\t\t\tnode.fx = null;\n\t\t\tself.simulation.stop()\n\t\t});\n\n\tthis.svg.append(\"rect\")\n\t   .attr(\"width\", this.width)\n\t   .attr(\"height\", this.height)\n\t   .style(\"fill\", \"none\")\n\t   .style(\"pointer-events\", \"all\")\n\t   .call(d3.zoom().on(\"zoom\", function(){self.zoomed()}));\n\n\t// Append graphic element to svg which are groups for graph elements\n\tthis.link_group = this.svg.append(\"g\").classed(\"links\", true);\n\tthis.node_group = this.svg.append(\"g\").classed(\"nodes\", true);\n}\n\nGraphResultsViewer.prototype.zoomed = function() {\n\tthis.current_transform = d3.event.transform;\n\tif(this.node_elements)\n\t\tthis.node_elements.attr(\"transform\", d3.event.transform);\n    if(this.link_elements)\n    \tthis.link_elements.attr(\"transform\", d3.event.transform);\n}\n\n/***\n * updates the svg with the current nodes and links\n */\nGraphResultsViewer.prototype.updateGraph = function(nodes, links) {\n\tvar self = this;\n\n\tvar follow_node_wrapper = function(graph_node){\n\t\tself.nodeSelected(graph_node);\n\t}\n\tvar zoomed = function(){\n\t\tself.zoomed();\n\t}\n\n\tnodes = (typeof nodes != \"undefined\" ? nodes : this.nodes);\n\tlinks = (typeof links != \"undefined\" ? links : this.links);\n\tthis.node_elements  = this.node_group.selectAll(\"g\").data(nodes);\n\tthis.node_elements.exit().remove();\n\n\t/*Create and place the \"blocks\" containing the circle and the text */\n    var node_enter = this.node_elements.enter().append(\"g\");\n\n\t// enter and create new ones\n\tnode_enter.append(\"circle\")\n\t\t.style('opacity', 0.99)\n\t\t.attr('r', function(node){return self.getRadius(node)})\n\t\t.attr(\"cx\",  function(node){ return node.x})\n\t\t.attr(\"cy\",  function(node){ return node.y})\n\t\t.attr(\"type\", function(node) {return self.isFringe(node) ? \"fringe\" : \"node\"})\n\t\t.call(self.drag_drop)\n\t\t.on(\"mouseover\", function(d){ d3.select(this).style(\"cursor\", \"pointer\"); })\n\t\t.on(\"mouseout\", function(d){ d3.select(this).style(\"cursor\", \"default\"); })\n\t\t.on('click', follow_node_wrapper);\n\n    node_enter.append(\"text\")\n\t\t.attr(\"x\",  function(node){ return node.x})\n\t\t.attr(\"y\",  function(node){ return node.y})\n\t\t.text(function(node) { return self.getNodeIconUnicode(node)})\n\t\t.call(self.drag_drop)\n\t\t.on(\"mouseover\", function(d){ d3.select(this).style(\"cursor\", \"pointer\"); })\n\t\t.on(\"mouseout\", function(d){ d3.select(this).style(\"cursor\", \"default\"); })\n\t\t.on('click', follow_node_wrapper);\n\n\t// merge new and old nodes\n\tthis.node_elements = node_enter.merge(this.node_elements);\n\n\tthis.styleNodeElements();\n\n\t// update LINKS ********************************************\n\tthis.link_elements  = this.link_group.selectAll(\"line\").data(links);\n\n\t// remove old links\n\tthis.link_elements.exit().remove();\n\t// enter and create new ones\n\tvar link_enter = this.link_elements.enter().append(\"line\");\n\n\t// merge new and old links\n\tthis.link_elements = link_enter.merge(this.link_elements)\n\n\tthis.styleLinkElements();\n\n\t//execute the current state of the pan-zoom transform\n\tif(this.current_transform){\n\t\tif(this.node_elements)\n\t\t\tthis.node_elements.attr(\"transform\", this.current_transform);\n\t    if(this.link_elements)\n\t    \tthis.link_elements.attr(\"transform\", this.current_transform);\n\t}\n}\n\nGraphResultsViewer.prototype.updateSimulation = function(mode) {\n\tvar self = this;\n\t//move all of the graphical elements corresponding to the nodes with each tick\n\tvar ticker = function(){\n\t\tself.node_elements.selectAll(\"circle\")\n\t\t\t.attr(\"cx\",  function(node){ return node.x})\n\t\t\t.attr(\"cy\",  function(node){ return node.y});\n\t\tself.node_elements.selectAll(\"text\")\n\t\t\t.attr(\"x\",  function(node){ return node.x})\n\t\t\t.attr(\"y\",  function(node){ return node.y});\n\t\tself.link_elements\n\t\t\t.attr('x1', function(link){ return link.source.x})\n\t\t\t.attr('y1', function(link){ return link.source.y})\n\t\t\t.attr('x2', function(link){ return link.target.x})\n\t\t\t.attr('y2', function(link){ return link.target.y});\n\t}\n\tif(this.show_force){\n\t\tthis.simulation.nodes(this.nodes).on('tick', ticker).force('link').links(this.links);\n\t}\n\telse {\n\t\tthis.simulation.nodes(this.nodes).on('end', ticker).force('link').links(this.links);\n\t}\n\tif(this.nodes.length){\n\t\tif(mode == \"wake\" || mode == \"init\"){\n\t\t\tthis.simulation.restart();\n\t\t}\n\t\telse if(mode == \"filter\"){\n\t\t\tthis.simulation.restart();\n\t\t}\n\t\telse {\n\t\t\tthis.simulation.alpha(1).restart();\n\t\t}\n\t}\n}\n\nGraphResultsViewer.prototype.styleNodeElements = function() {\n\tvar self = this;\n\tif(this.node_elements){\n\t\tthis.node_elements.each(function(node){\n\t\t\tvar g = d3.select(this);\n\t\t\tvar sel = g.select(\"circle\");\n\t\t\tsel.select(\"title\").remove();\n\t\t\tsel.style(\"fill\", self.getNodeColour(node));\n\t\t\tsel.attr('r', self.getRadius(node));\n\t\t\tsel.classed(\"highlighted\", function(node) { return self.focusNodes.indexOf(node.id) != -1});\n\t\t\tsel.append(\"title\")\n\t\t\t\t.classed(\"terminus-gnode-title\", true)\n\t\t\t\t.text(self.getNodeText(node));\n\t\t\tvar txt = g.select(\"text\");\n\t\t\ttxt.select(\"title\").remove();\n\t\t\ttxt.attr('text-anchor', 'middle')\n\t\t\t\t.attr(\"title\", self.getNodeText(node))\n\t\t\t\t.attr('dominant-baseline', 'central')\n\t\t\t\t.style('font-family', \"'\" + self.fontfam + \"'\")\n\t\t\t\t.style('font-weight', self.getNodeIconWeight(node))\n\t\t\t\t.style('font-size', self.getNodeIconSize(node))\n\t\t\t\t.style(\"fill\", self.getNodeIconColour(node))\n\t\t\t\t.text(self.getNodeIconUnicode(node))\n\t\t\t\t.append(\"title\")\n\t\t\t\t\t.classed(\"terminus-gnode-title\", true)\n\t\t\t\t\t.text(self.getNodeText(node));\n\t\t});\n\t}\n}\n\nGraphResultsViewer.prototype.styleLinkElements = function() {\n\tvar self = this;\n\tif(this.link_elements){\n\t\tthis.link_elements.each(function(link){\n\t\t\tvar sel = d3.select(this);\n\t\t\tsel.select(\"title\").remove();\n\t\t\tsel.attr(\"stroke-width\", self.getLineWidth(link));\n\t\t\tsel.attr(\"marker-end\", self.getEdgeArrow(link));\n\t\t\tsel.style(\"stroke\", self.getEdgeColour(link));\n\t\t\tsel.append(\"title\")\n\t\t\t\t.classed(\"terminus-glink-title\", true)\n\t\t\t\t.text(self.getLinkText(link));\n\t\t});\n\t}\n}\n\nGraphResultsViewer.prototype.getEdgeArrow = function(edge) {\n\tif(edge){\n\t\tvar dir = this.getEdgeDirection(edge);\n\t\t//if(dir){\n\t\t\tvar col = this.getEdgeColour(edge);\n\t\t\tvar reference;\n\t\t\tthis.svg.append(\"svg:defs\").selectAll(\"marker\")\n\t\t\t\t.data([reference])\n\t\t\t\t.enter().append(\"svg:marker\")\n\t\t\t\t.attr(\"id\", String)\n\t\t\t\t.attr(\"viewBox\", \"0 -5 10 10\")\n\t\t\t\t.attr(\"refX\", 22)  // This sets how far back it sits, kinda\n\t\t\t\t.attr(\"refY\", 0)\n\t\t\t\t.attr(\"markerWidth\", this.getArrowWidth(edge))\n\t\t\t\t.attr(\"markerHeight\", this.getArrowHeight(edge))\n\t\t\t\t.attr(\"orient\", \"auto\")\n\t\t\t\t.attr(\"markerUnits\", \"userSpaceOnUse\")\n\t\t\t\t.append(\"svg:path\")\n\t\t\t\t\t.attr(\"d\", dir)\n\t\t\t\t\t.style(\"fill\", col);\n\t\t\t\treturn \"url(#\" + reference + \")\";\n\t\t//}\n\t}\n\treturn \"\";\n}\n\n\nGraphResultsViewer.prototype.nodeSelected = function(selected_node) {\n\tvar self = this;\n\tif(this.selected_id == selected_node.id && this.selection_grows){\n\t\tthis.selection_grows = false;\n\t\tthis.styleNodeElements();\n\t}\n\telse {\n\t\tthis.selection_grows = true;\n\t\tthis.selected_id = selected_node.id;\n\t\tthis.styleNodeElements();\n\t\t//this.browser.nodeSelected(selected_node);\n\t\tif(this.isFringe(selected_node)){\n\t\t\t//this.browser.followNode(selected_node);\n\t\t}\n\t}\n}\n\nGraphResultsViewer.prototype.getScaleTransform = function(x, y, scale_factor){\n\treturn \"scale(\"+ scale_factor + \") translate(\" + x + \",\" + y + \")\";\n}\n\nGraphResultsViewer.prototype.scale = function(min_ratio) {\n    // the new dimensions of the molecule\n    new_mol_width = this.width * min_ratio;\n    new_mol_height = this.height * min_ratio;\n\n    var y_trans = (this.height - new_mol_height) ;\n\n    var x_trans = (this.width - new_mol_width);\n    // do the actual moving\n    var self = this;\n    if(this.node_elements)\n    \tthis.node_elements.transition()\n        .duration(750).attr(\"transform\", function(node){ return self.getScaleTransform(x_trans, y_trans, min_ratio)});\n    if(this.link_elements)\n        this.link_elements.transition()\n        .duration(750).attr(\"transform\", function(node){ return self.getScaleTransform(x_trans, y_trans, min_ratio)});\n\tthis.scale_factor = min_ratio;\n\tthis.svg.selectAll(\"marker\").attr(\"markerWidth\", this.getArrowWidth())\n\t\t\t.attr(\"markerHeight\", this.getArrowHeight());\n}\n\n\nGraphResultsViewer.prototype.scaleToFit = function() {\n    // Center the view on the molecule(s) and scale it so that everything\n    // fits in the window\n    //no molecules, nothing to do\n    if (this.nodes.length === 0)\n        return;\n\n    // Get the bounding box\n    min_x = d3.min(this.nodes.map(function(d) {return d.x;}));\n    min_y = d3.min(this.nodes.map(function(d) {return d.y;}));\n    max_x = d3.max(this.nodes.map(function(d) {return d.x;}));\n    max_y = d3.max(this.nodes.map(function(d) {return d.y;}));\n\n    // The width and the height of the graph\n    mol_width = max_x - min_x;\n    mol_height = max_y - min_y;\n\n    mol_width = mol_width * 1.05;\n    mol_height = mol_height * 1.05;\n    // how much larger the drawing area is than the width and the height\n    width_ratio = this.width / mol_width;\n    height_ratio = this.height / mol_height;\n\n    // we need to fit it in both directions, so we scale according to\n    // the direction in which we need to scale the most\n    min_ratio = Math.min(width_ratio, height_ratio);\n    if(min_ratio < 1){\n    \tthis.scale(min_ratio);\n    }\n};\n\n// recentre graph\nGraphResultsViewer.prototype.recentre = function(graph_node) {\n\tthis.translated = true;\n\t// get the x and y you need to transform the nodes by\n\tthis.dcx = (this.width/2-graph_node.x);\n\tthis.dcy = (this.height/2-graph_node.y);\n\t//zoom.translate([dcx,dcy]); If we do zooming we'll need to do something here\n\tthis.node_elements.attr(\"transform\", \"translate(\"+ this.dcx + \",\" + this.dcy  + \")\");\n\tthis.link_elements.attr(\"transform\", \"translate(\"+ this.dcx + \",\" + this.dcy  + \")\");\n\tthis.text_elements.attr(\"transform\", \"translate(\"+ this.dcx + \",\" + this.dcy  + \")\");\n}\n\n\nGraphResultsViewer.prototype.setConfigOptions = function(config) {\n\t//configuration options for different types of behaviour\n\t// Need to explicitly know font family name for unicode glyphs\n\tthis.fontfam = (config && (config.fontfamily()) ? config.fontfamily() : 'Font Awesome 5 Free');\n\tthis.selected_grows = (config && typeof config.selected_grows() != \"undefined\" ? config.selected_grows() : true);\n\tthis.show_force = (config && typeof config.show_force() != \"undefined\" ? config.show_force() : true);\n\tthis.fix_nodes = (config && typeof config.fix_nodes() != \"undefined\" ? config.fix_nodes() : false);\n\tthis.explode_out = (config && typeof config.explode_out() != \"undefined\" ? config.explode_out(): false);\n\tthis.width = (config && config.width() ? config.width(): false);\n\tthis.height = (config && config.height() ? config.height(): false);\n\tthis.defaults = {\n\t\tedge: {\n\t\t\ttype: \"edge\",\n\t\t\tdistance: (config && config.edge && config.edge.distance ? config.edge.distance : 70),\n\t\t\tarrow: (config && config.edge && config.edge.arrow ? config.edge.arrow : { width: 36, height: 16}),\n\t\t\tsymmetric: (config && config.edge && config.edge.symmetric ? config.edge.symmetric : true),\n\t\t\tcolor: (config && config.edge && config.edge.color ? config.edge.color : [150,150,255]),\n\t\t\tweight: (config && config.edge && config.edge.weight ? config.edge.weight : 0.3),\n\t\t\tsize: (config && config.edge && config.edge.size ? config.edge.size : 4)\n\t\t},\n\t\tnode: {\n\t\t\ttype: \"node\",\n\t\t\tradius: (config && config.node && config.node.radius ? config.node.radius : 14),\n\t\t\tcharge: (config && config.node && config.node.charge ? config.node.charge : -60),\n\t\t\tcollisionRadius: (config && config.node && config.node.collisionRadius ? config.node.collisionRadius : 20),\n\t\t\tcolor: (config && config.node && config.node.color ? config.node.color : [0,255,255]),\n\t\t\ticon: {\n\t\t\t\tweight: (config && config.node && config.node.icon && config.node.icon.weight ? config.node.icon.weight : 900),\n\t\t\t\tcolor: (config && config.node && config.node.icon && config.node.icon.color ? config.node.icon.color : [0,0,255]),\n\t\t\t\tunicode: (config && config.node && config.node.icon && config.node.icon.unicode ? config.node.icon.unicode : \"\\uf4fb\"),\n\t\t\t\tsize: (config && config.node && config.node.icon && config.node.icon.size ? config.node.icon.size : 10),\n\t\t\t\tfaclass: (config && config.node && config.node.icon && config.node.icon.faclass ? config.node.icon.faclass : \"fas fa-user-astronaut\")\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\tcolor: (config && config.node && config.node.text && config.node.text.color ? config.node.text.color : [0,0,0]),\n\t\t\t\tsize: (config && config.node && config.node.icon && config.node.text.size ? config.node.text.size : 10)\n\t\t\t},\n\t\t\tborder: {\n\t\t\t\tcolor: (config && config.node && config.node.border && config.node.border.color ? config.node.border.color : [0,0,0]),\n\t\t\t\tsize: (config && config.node && config.node.border && config.node.border.size ? config.node.border.size : 10)\n\t\t\t}\n\t\t}\n\t}\n}\n\n/*\n * Dimensions / forces / etc all settable with a scale factor - for zooming\n */\nGraphResultsViewer.prototype.getMultiplier = function(node) {\n\tvar mult = (node && node.size ? node.size : 1);\n\tif(node.id == this.selected_id && this.selection_grows){\n\t\tmult = mult * 2;\n\t}\n\treturn mult;\n}\n\nGraphResultsViewer.prototype.getRadius = function(node) {\n\tvar radius = (node && node.radius ? node.radius : this.defaults.node.radius);\n\tvar r = (this.scale_factor ? Math.min(this.scale_factor * radius, radius) : radius);\n\tr = r * this.getMultiplier(node);\n\treturn r;\n}\n\nGraphResultsViewer.prototype.getCollisionRadius = function(node) {\n\tvar colrad = (node && node.collisionRadius ? node.collisionRadius : this.defaults.node.collisionRadius );\n\tvar v = (this.scale_factor ? Math.min(this.scale_factor * colrad, colrad) : colrad);\n\treturn v * this.getMultiplier(node);\n}\n\nGraphResultsViewer.prototype.getCharge = function(node) {\n\tvar charge = (node && node.charge ? node.charge : this.defaults.node.charge);\n\tif(charge < 0){\n\t\tvar v = (this.scale_factor ? Math.max(this.scale_factor * charge, charge) : charge);\n\t}\n\telse {\n\t\tvar v = (this.scale_factor ? Math.min(this.scale_factor * charge, charge) : charge);\n\t}\n\treturn v * this.getMultiplier(node);\n}\n\nGraphResultsViewer.prototype.getLinkDistance = function(link) {\n\tvar linkDistance = (link && link.distance ? link.distance : this.defaults.edge.distance);\n\tvar x = (this.scale_factor ? Math.min(this.scale_factor * linkDistance, linkDistance) : linkDistance);\n\treturn x;\n}\n\nGraphResultsViewer.prototype.getNodeIconSize = function(node) {\n\tif(node && node.icon && node.icon.size){\n\t\treturn node.icon.size + \"em\";\n\t}\n\treturn (this.getMultiplier(node) + \"em\");\n}\n\nGraphResultsViewer.prototype.getNodeColour = function(node) {\n\tvar col = (node && node.color ? node.color : this.defaults.node.color);\n\tif(this.isFringe(node)){\n\t\treturn \"rgba(\"+col.join(\",\")+\",0.25)\";\n\t}\n\telse {\n\t\treturn \"rgb(\"+col.join(\",\")+\")\";\n\t}\n}\n\nGraphResultsViewer.prototype.getNodeIcon = function(node) {\n\tvar fac = (node && node.icon && node.icon.faclass ? node.icon.faclass : this.defaults.node.icon.faclass);\n\treturn fac;\n}\n\nGraphResultsViewer.prototype.getNodeIconUnicode= function(node) {\n\tif(node && typeof node.icon != \"undefined\"){\n\t\tif(node.icon.unicode){\n\t\t\treturn node.icon.unicode;\n\t\t}\n\t\tif(node.icon.label === true)\treturn this.getNodeText(node);\n\t\telse if(node.icon.label) return node.icon.label;\n\t}\n\treturn this.defaults.node.icon.unicode;\n}\n\nGraphResultsViewer.prototype.getNodeIconWeight = function(node) {\n\treturn (node && node.icon && node.icon.weight ? node.icon.weight : this.defaults.node.icon.weight );\n}\n\nGraphResultsViewer.prototype.getNodeIconColour = function(node) {\n\tvar col = (node && node.icon && node.icon.color ? node.icon.color : this.defaults.node.icon.color );\n\tif(this.isFringe(node)){\n\t\treturn \"rgba(\"+col.join(\",\")+\",0.25)\";\n\t}\n\telse {\n\t\treturn \"rgb(\"+col.join(\",\")+\")\";\n\t}\n}\n\nGraphResultsViewer.prototype.getEdgeColour = function(edge) {\n\tvar col = (edge && edge.color ? edge.color : this.defaults.edge.color );\n\tvar weight = (edge && edge.weight ? edge.weight : this.defaults.edge.weight);\n\tvar nc = col.concat([weight]);\n\treturn \"rgba(\"+nc.join(\",\")+\")\";\n}\n\nGraphResultsViewer.prototype.getEdgeDirection = function(edge) {\n\tif(edge && edge.symmetric){\n\t\treturn \"M10,-5 L0,0 L10,5\";\n\t}\n\treturn \"M0,-5 L10,0 L0,5\";\n\treturn false;\n}\n\nGraphResultsViewer.prototype.getLineWidth = function(link) {\n\tvar x = (link && link.size ? link.size : this.defaults.edge.size);\n\treturn x;\n}\n\n\nGraphResultsViewer.prototype.getNodeText = function(node) {\n\tif(node && node.text) return node.text;\n\treturn node.id;\n}\n\nGraphResultsViewer.prototype.getLinkText = function(edge) {\n\tif(edge && edge.text) return edge.text;\n\tif(edge && edge.id) return edge.id;\n\treturn \"\";\n}\n\nGraphResultsViewer.prototype.getArrowWidth = function(edge) {\n\tvar w = (edge && edge.arrow && edge.arrow.width ? edge.arrow.width : this.defaults.edge.arrow.width);\n\treturn (this.scale_factor ? Math.min(this.scale_factor * w, w) : w);\n}\n\nGraphResultsViewer.prototype.getArrowHeight = function(edge) {\n\tvar w = (edge && edge.arrow && edge.arrow.height ? edge.arrow.height : this.defaults.edge.arrow.height );\n\treturn (this.scale_factor ? Math.min(this.scale_factor * w, w) : w);\n}\n\nGraphResultsViewer.prototype.isNeighbourLink = function(node, link) {\n\treturn link.target.id === node.id || link.source.id === node.id;\n}\n\nGraphResultsViewer.prototype.isFringe = function(node){\n\tif(this.result && this.result.added && this.result.added.upgraded){\n\t\tif(this.result.added.upgraded.indexOf(node.id) != -1){\n\t\t\tnode.type = \"node\";\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn node.type && node.type == \"fringe\";\n}\n\nfunction randomString(length) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz'.split('');\n    if (! length) {\n        length = Math.floor(Math.random() * chars.length);\n    }\n    var str = '';\n    for (var i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\n\nmodule.exports = GraphResultsViewer;\n","const HTMLHelper = require('../HTMLHelper');\n\nfunction SimpleStream(){\t\n\tthis.holder = document.createElement(\"div\");\n}\n\nSimpleStream.prototype.options = function(options){\n\tfor(var k in options){\n\t\tthis[k] = options[k];\n\t}\n\treturn this;\n}\n\n\nSimpleStream.prototype.render = function(stream){\n\tif(stream) this.stream = stream;\n\tHTMLHelper.removeChildren(this.holder);\n\t//var ctls = this.getControlsDOM();\n\t//var tab = this.getTableDOM();\n\t//if(ctls) this.holder.appendChild(ctls)\n\t//this.holder.appendChild(tab);\n\treturn this.holder;\n}\n\nmodule.exports = SimpleStream;","function SimpleChooser(){}\n\nSimpleChooser.prototype.options = function(options){\n\tthis.options = options;\n\treturn this;\n}\n\nSimpleChooser.prototype.render = function(chooser){\n\tif(chooser) this.chooser = chooser;\n\tif(this.chooser.config.show_empty() == false && this.chooser.count() < 1) return false;\n\tvar ccdom = document.createElement(\"span\");\n\tccdom.setAttribute(\"class\", \"woql-chooser\");\n\tvar ccsel = document.createElement(\"select\");\n\tccsel.setAttribute(\"class\", \" woql-chooser\");\n\tvar self = this;\n\tccsel.addEventListener(\"change\", function(){\n\t\tself.chooser.set(this.value);\n\t});\n\tvar opts = [];\n\tif(this.chooser.config.show_empty()){\n\t\topts.push(this.getEmptyOption())\n\t}\n\tthis.chooser.first();\n\twhile(choice = this.chooser.next()){\n\t\tvar opt = this.createOptionFromChoice(choice);\n\t\topts.push(opt);\n\t}\n\tfor(var i = 0; i<opts.length; i++){\n\t\tccsel.appendChild(opts[i]);\n\t}\n\tccdom.appendChild(ccsel);\n\treturn ccdom;\n}\n\nSimpleChooser.prototype.getEmptyOption = function(){\n\tvar choice = { id: \"\", label: this.chooser.config.show_empty()};\n\treturn this.createOptionFromChoice(choice);\n}\n\nSimpleChooser.prototype.createOptionFromChoice = function(choice){\n\tvar opt = document.createElement(\"option\");\n\topt.setAttribute(\"class\", \"terminus-woql-chooser-choice\");\n\topt.value = choice.id;\n\tif(choice.selected) opt.selected = true;\n\tif(typeof choice.label == \"string\"){\n\t\topt.appendChild(document.createTextNode(choice.label));\n\t}\n\telse if(choice.label){\n\t\topt.appendChild(choice.label);\n\t}\n\tif(choice.title){\n\t\topt.setAttribute(\"title\", choice.title);\n\t}\n\treturn opt;\n}\n\nmodule.exports = SimpleChooser;","const TerminusCodeSnippet = require('./query/TerminusCodeSnippet');\nconst UTILS = require('../Utils');\nconst HTMLHelper = require('./HTMLHelper');\n//const TerminusFrame = require(\"../old/viewer/TerminusFrame\");\nconst TerminusClient = require('@terminusdb/terminus-client');\nconst SimpleFrameViewer = require(\"./document/SimpleFrameViewer\");\nconst Datatypes = require(\"./Datatypes\");\nconst DatatypeRenderers = require(\"./DatatypeRenderers\");\n\n\nfunction DocumentPane(client, docid, clsid){\n\tthis.client = client;\n\tthis.container = document.createElement('span');\n\tthis.container.setAttribute('class', 'terminus-document-cont');\n\tthis.defaultPaneView = { showConfig: false, editConfig: false, intro: false, loadSchema: false };\n\tthis.docid = (docid ? docid : false);\n\tthis.clsid = (clsid ? clsid : false);\n\tthis.datatypes = new DatatypeRenderers();\n    //Datatypes.initialiseDataRenderers(this.datatypes);\n}\n\nDocumentPane.prototype.load = function(){\n\tif(this.docid || this.clsid){\n\t\tthis.frame = new TerminusClient.DocumentFrame(this.client, this.view);\n\t\tthis.frame.owner = this;\n\t}\n\tif(this.docid){\n\t\treturn this.frame.load(this.docid, this.clsid)\n\t\t.then(() => this.filterFrame());\n\t}\n\tif(this.clsid){\n\t\treturn this.frame.load(false, this.clsid).then(() => {\n\t\t\tthis.frame.document.fillFromSchema(\"_:\");\n\t\t\tthis.filterFrame();\n\t});\t\n\t}\n\treturn Promise.reject(\"Either document id or class id must be specified before loading a document\");\n}\n\nDocumentPane.prototype.options = function(opts){\n\tthis.showQuery = (opts && typeof opts.showQuery != \"undefined\" ? opts.showQuery : false);\n\tthis.showConfig = (opts && typeof opts.showConfig != \"undefined\" ? opts.showConfig : false);\n\tthis.editConfig = (opts && typeof opts.editConfig != \"undefined\" ? opts.editConfig : false);\n\tthis.intro = (opts && typeof opts.intro != \"undefined\" ? opts.intro : false);\n\tthis.documentLoader = (opts && typeof opts.loadDocument != \"undefined\" ? opts.loadDocument : false);\n\tthis.loadSchema = (opts && typeof opts.loadSchema != \"undefined\" ? opts.loadSchema : false);\n\tthis.viewers = (opts && typeof opts.viewers != \"undefined\" ? opts.viewers : false);\n    Datatypes.initialiseDataRenderers(this.datatypes, false, opts);\n    return this;\n}\n\nDocumentPane.prototype.filterFrame = function(){\n\tvar self = this;\n\tvar myfilt = function(frame, rule){\n\t\tif(typeof rule.render() != \"undefined\"){\n\t\t\tframe.render = rule.render();\n\t\t}\n\t\telse {\n\t\t\tif(rule.renderer()){\n\t\t\t\tvar renderer = self.loadRenderer(rule.renderer(), frame, rule.args);\t\t\n\t\t\t}\n\t\t\tif(renderer && renderer.render){\n\t\t\t\tframe.render = function(fframe){\n\t\t\t\t\treturn renderer.render(fframe);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(rule.compare()){\n\t\t\tframe.compare = rule.compare();\n\t\t}\n\t}\n\tthis.frame.applyRules(false, false, myfilt);\n}\n\nDocumentPane.prototype.loadDocument = function(docid, config){\n\tthis.docid = docid;\n\tthis.view = config;\n\treturn this.load();\n}\n\nDocumentPane.prototype.loadClass = function(cls, config){\n\tthis.clsid = cls;\n\tthis.docid = false;\n\tthis.view = config;\n\treturn this.load();\n}\n\n\n\nDocumentPane.prototype.setClassLoader = function(cloader){\n\tthis.classLoader = cloader;\n\tif(this.queryPane){\n\t\tthis.queryPane.appendChild(this.classLoader);\n\t}\n\treturn this;\n}\n\nDocumentPane.prototype.getQueryPane = function(){\n\tvar pane = document.createElement(\"div\");\n\tpane.setAttribute(\"class\", \"terminus-document-query\");\n\tif(this.documentLoader){\n\t\tpane.appendChild(this.documentLoader);\n\t}\n\tif(this.classLoader){\n\t\tpane.appendChild(this.classLoader);\n\t}\n\treturn pane;\n}\n\nDocumentPane.prototype.getAsDOM = function(){\n\tif(this.intro){\n\t\tthis.container.appendChild(UTILS.getHeaderDom(this.intro));\n\t}\n\tvar configspan = document.createElement(\"span\");\n\tconfigspan.setAttribute(\"class\", \"pane-config-icons\");\n\tthis.container.appendChild(configspan);\n\tif(this.showQuery && (this.documentLoader || this.classLoader)){\n\t\tvar ipdom = this.getQueryPane();\n\t\tvar ispan = document.createElement(\"span\");\n\t\tispan.setAttribute(\"class\", \"document-pane-config\");\n\t\tvar ic = document.createElement(\"i\");\n\t\tispan.appendChild(ic);\n\t\tif(this.showQuery != \"always\") configspan.appendChild(ispan);\n\t\tvar self = this;\n\t\tfunction showQueryConfig(){\n\t\t\tispan.title=\"Click to Hide Query\";\n\t\t\tic.setAttribute(\"class\", \"fas fa fa-times-circle\");\n\t\t\tif(configspan.nextSibling) self.container.insertBefore(ipdom, configspan.nextSibling);\n\t\t\telse self.container.appendChild(ipdom);\n\t\t}\n\t\tfunction hideQueryConfig(){\n\t\t\tispan.title=\"Click to View Query\";\n            ic.setAttribute(\"class\", \"fas fa fa-search\");\n\t\t\tself.container.removeChild(ipdom);\n\t\t}\n\t\tispan.addEventListener(\"click\", () => {\n\t\t\tif(this.showingQuery) hideQueryConfig();\n\t\t\telse showQueryConfig();\n\t\t\tthis.showingQuery = !this.showingQuery;\n\t\t});\n\t\tshowQueryConfig();\n\t\tif(this.showQuery == \"icon\") hideQueryConfig();\n\t\tthis.queryPane = ipdom;\n\t}\n\tif(this.showConfig){\n        this.showingConfig = (this.showConfig != \"icon\");\n\t\tvar mode = (this.editConfig ? \"edit\" : \"view\");\n\t\tthis.input = this.createInput(mode);\n\t\tvar ndom = this.input.getAsDOM();\n        var nspan = document.createElement(\"span\");\n        nspan.addEventListener('mouseover', function(){\n            this.style.cursor = \"pointer\";\n\t\t});\n\t\tnspan.setAttribute(\"class\", \"result-pane-config\");\n\t\tvar nc = document.createElement(\"i\");\n\t\tnspan.appendChild(nc);\n\t\tconfigspan.appendChild(nspan);\n\t\tvar self = this;\n\t\tfunction showDocConfig(){\n\t\t\tnspan.title=\"Click to Hide View Configuration\";\n\t\t\tnc.setAttribute(\"class\", \"fas fa fa-times-circle\");\n\t\t\tif(configspan.nextSibling) self.container.insertBefore(ndom, configspan.nextSibling);\n\t\t\telse self.container.appendChild(ndom);\n\t\t\t//stylize only after ta or pre have been appended\n\t\t\tif((self.input.snippet.value) || (self.input.snippet.innerHTML))\n\t\t\t\tself.input.stylizeSnippet();\n\t\t}\n\t\tfunction hideDocConfig(){\n\t\t\tnspan.title=\"Click to View Configuration\";\n            nc.setAttribute(\"class\", \"fas fa fa-vial\");\n\t\t\tself.container.removeChild(ndom);\n\t\t}\n\t\tnspan.addEventListener(\"click\", () => {\n\t\t\tif(this.showingConfig) hideDocConfig();\n\t\t\telse showDocConfig();\n\t\t\tthis.showingConfig = !this.showingConfig;\n        });\n        showDocConfig();\n\t\tif(this.showConfig == \"icon\") hideDocConfig();\n\t}\n\tthis.resultDOM = document.createElement(\"span\");\n\tthis.resultDOM.setAttribute(\"class\", \"terminus-document-results\");\n\t//var form = (this.input.format == \"js\" ? \"javascript\" : \"json\");\n\t//UTILS.stylizeEditor(ui, this.input.snippet, {width: this.input.width, height: this.input.height}, form);\n\tthis.container.appendChild(this.resultDOM);\n\tthis.renderResult();\n\treturn this.container;\n}\n\nDocumentPane.prototype.renderResult = function(){\n\tif(this.resultDOM){\n\t\tHTMLHelper.removeChildren(this.resultDOM);\n\t}\n\telse {\n\t\tthis.resultDOM = document.createElement(\"span\");\n\t\tthis.resultDOM.setAttribute(\"class\", \"terminus-document-results\");\n\t\t//var form = (this.input.format == \"js\" ? \"javascript\" : \"json\");\n\t\t//UTILS.stylizeEditor(ui, this.input.snippet, {width: this.input.width, height: this.input.height}, form);\n\t\tthis.container.appendChild(this.resultDOM);\n\t}\n\tif(this.frame && this.frame.document.render){\n\t\tvar fpt = this.frame.document.render();\n\t\tif(fpt){\n\t\t\tthis.resultDOM.appendChild(fpt);\n\t\t}\n\t}\n}\n\nDocumentPane.prototype.loadRenderer = function(rendname, frame, args, termframe){\n\tvar evalstr = \"new \" + rendname + \"(\";\n\tif(args) evalstr += JSON.stringify(args);\n\tevalstr += \");\";\n\ttry {\n\t\tvar nr = eval(evalstr);\n\t\tnr.frame = frame;\n\t\tnr.datatypes = this.datatypes;\n\t\treturn nr;\n\t}\n\tcatch(e){\n\t\tconsole.log(\"Failed to load \" + rendname + e.toString());\n\t\treturn false;\n\t}\n}\n\n\nDocumentPane.prototype.createInput = function(mode){\n    let input = new TerminusCodeSnippet(\"rule\", mode);\n    if(this.view){\n    \tinput.setQuery(this.view);\n\t}\n\tvar self = this;\n\tinput.submit = function(qObj){\n\t\tself.updateView(qObj);\n\t};\n\treturn input;\n}\n\nDocumentPane.prototype.updateView = function(docview){\n\tthis.view = docview;\n\tthis.frame.options(this.view);\n\tif(this.input) this.input.setQuery(this.view);\n\tthis.frame.applyRulesToDocument(this.frame.document, this.frame.config);\n\tthis.frame.renderer = this.frame.document;\n\tthis.renderResult();\n}\n\nDocumentPane.prototype.updateResult = function(result){\n\tthis.result = result;\n\tthis.updateQuery(result.query);\n\tthis.refreshViews();\n}\n\nDocumentPane.prototype.empty = function(){\n\treturn (typeof this.view == \"undefined\");\n}\n\nDocumentPane.prototype.clearMessages = function(){}\nDocumentPane.prototype.showError = function(){}\n\nDocumentPane.prototype.submitQuery = function(qObj){\n\tthis.clearMessages();\n\ttdv.owner = this;\n\ttdv.setDatatypes(Datatypes.initialiseDataRenderers);\n\ttdv.loadDocument(id).then(() => {\n\t\tlet dom = tdv.render();\n\t\tif(dom) holder.appendChild(dom);\n\t});\n\treturn holder;   \n}\n\nmodule.exports = DocumentPane;\n","const HTMLHelper = require(\"../HTMLHelper\");\n\nfunction SimpleFrameViewer(){}\n\nSimpleFrameViewer.prototype.getScope = function(frame){\n\tif(frame.isProperty()) return \"property\";\n\tif(frame.isObject()) return \"object\";\n\tif(frame.isData()) return \"data\";\n}\n\nSimpleFrameViewer.prototype.setDatatypeViewers = function(datatypes){\n\tthis.datatypes = datatypes;\n}\n\n\nSimpleFrameViewer.prototype.getDatatypeViewer = function(frame, mode){\n\tvar dv = frame.display_options.dataviewer;\n\tif(!dv){\n\t\tif(frame.isChoice()) var t = \"oneOf\";\n\t\telse if(frame.isDocument()) var t = \"document\";\n\t\telse t = frame.getType();\n\t\tif(mode && mode == \"edit\"){\n\t\t\tvar r = this.datatypes.getEditor(t);\n\t\t}\n\t\telse {\n\t\t\tvar r = this.datatypes.getRenderer(t);\n\t\t}\n\t\tdv = r.name;\n\t}\n\tif(frame.display_options.args){\n\t\tvar args = frame.display_options.args ;\n\t}\n\telse {\n\t\tif(r && r.args){\n\t\t\t args = r.args;\n\t\t}\n\t\telse args = false;\n\t}\n\tvar rend = this.datatypes.createRenderer(dv, args);\n\trend.type = frame.getType();\n\treturn rend;\n}\n\nSimpleFrameViewer.prototype.render = function(frame){\n\tif(!frame) frame = this.frame;\n\tif(!frame) return;\n\n\tvar scope = this.getScope(frame);\n\tif(frame.display_options.header_features && frame.display_options.header_features.length){\n\t\tvar hfeatures = this.getFeaturesDOM(frame.display_options.header_features, scope, frame, frame.display_options.mode);\n\t}\n\telse var hfeatures = false;\n\tif(frame.display_options.features && frame.display_options.features.length){\n\t\tvar features = this.getFeaturesDOM(frame.display_options.features, scope, frame, frame.display_options.mode);\n\t}\n\telse var features = false;\n\tvar orient = (scope == \"object\" || scope == \"property\") ? \"page\" : \"line\";\n\tvar ndom = HTMLHelper.getFrameDOM(scope, frame, orient, hfeatures, features);\n\tif(!ndom) return false;\n\tif(this.framedom){\n\t\tthis.framedom.replaceWith(ndom);\n\t}\n\tthis.framedom = ndom;\n\tif(frame.display_options.style){\n\t\tthis.framedom.setAttribute(\"style\", frame.display_options.style);\t\t\t\t\n\t}\n\treturn this.framedom;\n}\t\n\nSimpleFrameViewer.prototype.getFeaturesDOM = function(flist, scope, frame, mode){\n\tvar features = document.createElement(\"span\");\n\tfeatures.setAttribute(\"class\", \"terminus-features terminus-\" + scope + \"-features features-\" + featuresToCSS(flist));\n\tfor(var i = 0; i<flist.length; i++){\n\t\tlet render = false;\n\t\tlet style = false;\n\t\tlet args = false;\n\t\tlet fid = flist[i];\n\t\tif(typeof fid == \"object\"){\n\t\t\tfid = Object.keys(flist[i])[0];\n\t\t\tif(flist[i][fid].hidden) continue;\n\t\t\tif(flist[i][fid].style) style = flist[i][fid].style;\n\t\t\tif(flist[i][fid].render) render = flist[i][fid].render;\n\t\t\tif(flist[i][fid].args){\n\t\t\t\targs = flist[i][fid].args;\n\t\t\t} \n\t\t}\n\t\telse if(typeof fid != \"string\") continue;\n\t\tif(render){\n\t\t\tvar dom = render(frame, fid, scope, mode, args);\n\t\t\tif(style) dom.setAttribute(\"style\", style);\n\t\t\tif(dom)\tfeatures.appendChild(dom);\n\t\t}\n\t\telse if(fid == \"value\"){\n\t\t\tif(scope == \"data\"){\n\t\t\t\tvar dv = this.getDatatypeViewer(frame, mode, args);\n\t\t\t\tif(dv) {\n\t\t\t\t\tvar dom = dv.renderFrame(frame, this);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar dom = document.createTextNode(frame.get());\t\t\t\n\t\t\t\t}\n\t\t\t\tif(dom){\n\t\t\t\t\tif(style) dom.setAttribute(\"style\", style);\t\t\t\n\t\t\t\t\tfeatures.appendChild(dom);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(scope == 'object'){\n\t\t\t\t\tvar vals = frame.renderProperties();\n\t\t\t\t\tfor(var j = 0; j<vals.length; j++){\n\t\t\t\t\t\tif(style) vals[j].setAttribute(\"style\", style);\n\t\t\t\t\t\tfeatures.appendChild(vals[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar vals = frame.renderValues();\t\t    \n\t\t\t\t\tvar cont = document.createElement(\"span\");\n\t\t\t\t\tif(style) cont.setAttribute(\"style\", style);\n\t\t\t\t\tfor(var j = 0; j<vals.length; j++){\n\t\t\t\t\t\tcont.appendChild(vals[j]);\n\t\t\t\t\t}\n\t\t\t\t\tfeatures.appendChild(cont);\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif(fid == \"id\" && mode == \"edit\" && scope == \"object\" && frame.isNew()){\n\t\t\t\tvar rend = this.datatypes.createRenderer(\"HTMLStringEditor\", args);\n\t\t\t\tvar dom = rend.renderFrame(frame, this);\n\t\t\t}\n\t\t\telse var dom = false;\n\t\t\tvar dom = HTMLHelper.getFeatureDOM(frame, fid, scope, mode, args, dom);\n\t\t\tif(dom){\n\t\t\t\tif(style) dom.setAttribute(\"style\", style);\t\t\t\n\t\t\t\tfeatures.appendChild(dom);\n\t\t\t}\n\t\t}\n\t}\n\treturn features;\n}\t\t\t\t\t\n\t\n\nfunction featuresToCSS(flist){\n\tvar s = \"\";\n\tfor(var i = 0; i<flist.length; i++){\n\t\tif(typeof flist[i] == \"object\"){\n\t\t\ts += Object.keys(flist[i])[0] + \"-\";\n\t\t}\n\t\telse {\n\t\t\ts += flist[i] + \"-\";\n\t\t}\n\t}\n\treturn s.substring(0, s.length-1);\n}\n\n\n\nmodule.exports = SimpleFrameViewer;","const TerminusClient = require('@terminusdb/terminus-client');\nconst ScriptPane = require(\"./html/ScriptPane\");\nconst HTMLHelper = require('./html/HTMLHelper');\nconst TerminusViewer = require(\"./html/TerminusViewer\");\n\nfunction TerminusQueryViewer(ui, options){\n\tthis.ui = ui;\n\tthis.tv = new TerminusViewer(ui.client);\n\tthis.options = options;\n\tthis.panes = [];\n\tthis.new_pane = false;\n\tthis.new_pane_type = false;\n\tthis.meta = {};\n\tthis.container = document.createElement(\"div\");\n\tthis.container.setAttribute(\"class\", \"terminus-query-page\");   \n}\n\nTerminusQueryViewer.prototype.newPaneOptions = function(){ \n\tvar opts = {\n\t\tshowQuery: \"always\", \n\t\teditQuery: true,\n\t\tshowHeader: true, \n\t\tcss: \"terminus-full-query-pane\"\n\t};\n\treturn opts;\n} \n\nTerminusQueryViewer.prototype.defaultResultOptions = function(){ \n\tvar opts = {\n\t\tshowConfig: \"icon\", \n\t\teditConfig: true,\n\t\tshowHeader: false, \n\t\tviewers: [new TerminusClient.View.graph()],\n\t};\n\treturn opts;\n} \n\nTerminusQueryViewer.prototype.getNewQueryPane = function(){\n\tlet table = TerminusClient.View.table();\n\tlet qpane = this.tv.getQueryPane(false, [table], false, [this.defaultResultOptions()], this.newPaneOptions());\n\treturn qpane;\n}\n\nTerminusQueryViewer.prototype.addQueryPane = function(){\n\tvar qpane = this.getNewQueryPane();\n\tthis.panes.push(qpane);\n\treturn qpane;\n}\n\nTerminusQueryViewer.prototype.addScriptPane = function(q){\n\tlet qpane = new ScriptPane(this.ui.client, q);\n\tthis.panes.push(qpane);\n\treturn qpane;\n}\n\nTerminusQueryViewer.prototype.addScriptPaneDOM = function(){\n\tlet qpane = new ScriptPane(this.ui.client);\n\tthis.addNewPaneDOM(qpane);\n}\n\nTerminusQueryViewer.prototype.addQueryPaneDOM = function(){\n\tlet qpane = this.addQueryPane();\n\tthis.addNewPaneDOM(qpane);\n}\n\nTerminusQueryViewer.prototype.setNewDocumentPaneDOM = function(){\n\tthis.new_pane = this.tv.getDocumentPane();\n\t//this.new_pane = new DocumentPane(this.ui.client).options({showQuery: true, editQuery: true});\n\tthis.new_pane_type = \"document\";\n}\n\nTerminusQueryViewer.prototype.addNewPaneDOM = function(qpane){\n\tvar lpane = this.panes[this.panes.length-1];\n\t//if(lpane && lpane.empty()){\n\t//\tthis.panes[this.panes.length-1] = qpane;\n\t//\tthis.paneDOM.removeChild(this.paneDOM.lastChild)\t\t \n\t//}\n\t//else {\n\t\tthis.panes.push(qpane);\n\t//}\n\tvar qdom = qpane.getAsDOM();\n\tvar qhdr = this.getPaneHeader();\n\tqdom.prepend(qhdr);\n\tthis.paneDOM.appendChild(qdom);\n}\n\nTerminusQueryViewer.prototype.getAsDOM = function(q){\n\tHTMLHelper.removeChildren(this.container);\n\tif(!this.paneDOM) this.paneDOM = this.getPanesDOM();\n\tthis.container.appendChild(this.paneDOM);\n\tthis.controlDOM = this.getControlsDOM();\n\t//this.container.appendChild(this.controlDOM);\n\tvar cont = document.createElement(\"span\");\n\tcont.setAttribute(\"class\", \"terminus-new-query-pane\");\n\tvar newPaneButton = document.createElement('button');\n\t\tnewPaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tnewPaneButton.appendChild(document.createTextNode('Add New Query'));\n\t\tnewPaneButton.addEventListener('click', () => this.addQueryPaneDOM());\t   \n\tcont.appendChild(newPaneButton); \n\tthis.container.appendChild(cont);\n\treturn this.container;\n}\n\nTerminusQueryViewer.prototype.getPanesDOM = function(q){\n\tthis.panesDOM = document.createElement(\"div\");\n\tthis.panesDOM.setAttribute(\"class\", \"terminus-query-panes\");\n\tfor(var i = 0; i<this.panes.length; i++){\n\t\tvar pd = this.panes[i].getAsDOM();\n\t\tvar qhdr = this.getPaneHeader();\n\t\tpd.prepend(qhdr);\n\t\tthis.panesDOM.appendChild(pd);\n\t}\n\tif(!this.new_pane){\n\t\tthis.new_pane = this.getNewQueryPane();\n\t}\n\tvar npd = this.new_pane.getAsDOM();\n\tvar nqhdr = this.getNewPaneHeader();\n\tthis.new_pane.headerDOM = nqhdr;\n\tthis.new_pane.paneDOM = npd;\n\tnpd.prepend(nqhdr);\n\tthis.panesDOM.appendChild(npd);\n\treturn this.panesDOM;\n}\n\nTerminusQueryViewer.prototype.removePane = function(pane, index){\n\tHTMLHelper.removeChildren(pane.paneDOM);\n\tpane.paneDOM.appendChild(pane.headerDOM);\n\tif(this.panes[i]){\n\t\tthis.panes.splice(i, 1);\n\t}\n}\n\nTerminusQueryViewer.prototype.showPane = function(pane){\n\t//HTMLHelper.removeChildren(pane.paneDOM);\n\t//var pd = pane.getAsDOM();\n\t//var qhdr = this.getPaneHeader();\n\t//pd.prepend(qhdr);\n\t//pane.headerDOM = qhdr;\t\n}\n\nTerminusQueryViewer.prototype.hidePane = function(pane){\n\t\n}\n\n\n\nTerminusQueryViewer.prototype.getPaneHeader = function(){\n\tvar hdr = document.createElement(\"div\");\n\t//hdr.appendChild(this.getControlsDOM());\n\treturn hdr;\n}\n\nTerminusQueryViewer.prototype.getNewPaneHeader = function(){\n\tvar hdr = document.createElement(\"div\");\n\t//hdr.appendChild(this.getControlsDOM(\"new\"));\n\treturn hdr;\n}\n\nTerminusQueryViewer.prototype.getControlsDOM = function(isnew){\n\tvar c = document.createElement(\"div\");\n\tc.setAttribute(\"class\", \"terminus-query-page-controls\");    \n\tif(isnew == \"new\"){\n\t\tvar newPaneButton = document.createElement('button');\n\t\tnewPaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tnewPaneButton.appendChild(document.createTextNode('WOQL Query'));\n\t\t//newPaneButton.addEventListener('click', () => this.addQueryPaneDOM());\t    \n\t\tc.appendChild(newPaneButton);\n\t\tvar newScriptButton = document.createElement('button');\n\t\tnewScriptButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tnewScriptButton.appendChild(document.createTextNode('Script'));\n\t\t//newScriptButton.addEventListener('click', () => this.addScriptPaneDOM());\t    \n\t\tc.appendChild(newScriptButton);\n\t\tvar newDocButton = document.createElement('button');\n\t\tnewDocButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tnewDocButton.appendChild(document.createTextNode('Document Query'));\n\t\tnewDocButton.addEventListener('click', () => this.setNewDocumentPaneDOM());\t    \n\t\tc.appendChild(newDocButton);\n\t}\n\telse {\n\t\tvar savePaneButton = document.createElement('button');\n\t\tsavePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tsavePaneButton.appendChild(document.createTextNode('Save'));\n\t\tc.appendChild(savePaneButton);\n\t\tvar closePaneButton = document.createElement('button');\n\t\tclosePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tclosePaneButton.appendChild(document.createTextNode('Close'));\n\t\tc.appendChild(closePaneButton);\n\t\tvar collapsePaneButton = document.createElement('button');\n\t\tcollapsePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tcollapsePaneButton.appendChild(document.createTextNode('Collapse'));\t\t\n\t\tc.appendChild(collapsePaneButton);\n\t}\n\treturn c;\n}\n\n\nmodule.exports=TerminusQueryViewer\n","const TerminusClient = require('@terminusdb/terminus-client');\nconst TerminusCodeSnippet = require('./query/TerminusCodeSnippet');\nconst UTILS = require('../Utils');\nconst HTMLHelper = require('./HTMLHelper');\n\n\nfunction ScriptPane(client, script){\n\tthis.client = client;\n\tthis.script = (script ? script : \"\");\n\tthis.container = document.createElement('div');\n    this.container.setAttribute('class', 'terminus-script-pane-cont');\n}\n\nScriptPane.prototype.empty = function(){\n\treturn this.script == \"\";\n}\n\n\nScriptPane.prototype.createInput = function(ui){\n\tlet input = new TerminusCodeSnippet(\"code\", \"edit\");\n\tif(this.script){\n\t\tinput.setQuery(this.script);\n\t}\n\tvar self = this;\n\tinput.submit = function(qObj){\n\t\tself.executeScript(qObj, ui);\n\t};\n\treturn input;\n}\n\n\nScriptPane.prototype.executeScript = function(script, ui){\n    if(ui) ui.clearMessages();\n    this.script = script;\n\tvar client = this.client;\n\tvar WOQL = TerminusClient.WOQL;\n\ttry {\n\t\tvar res = eval(script);\n\t\tif(res){\n\t\t\tthis.updateResult(res);\n\t\t}\n\t\telse {\n\t\t\t//executed ok message \n\t\t}\n\t}\n\tcatch(e){\n\t\tif(ui) ui.showError(e);\n\t\tconsole.error(e);\n\t}\n}\n\nScriptPane.prototype.showOKMessage = function(){\n    var msg = document.createTextNode(\"Script executed ok\");\n    this.updateResult(msg);\n}\n\nScriptPane.prototype.updateResult = function(res){\n    HTMLHelper.removeChildren(this.resultDOM);\n    this.resultDOM.appendChild(res);\n}\n\n\nScriptPane.prototype.getAsDOM = function(ui){\n\tthis.container.appendChild(UTILS.getHeaderDom('Enter Script'));\n\tthis.input = this.createInput(ui);\n\tthis.container.appendChild(this.input.getAsDOM());\n\tthis.resultDOM = document.createElement(\"div\");\n\tthis.resultDOM.setAttribute(\"class\", \"terminus-script-results\"); \n\t//var form = (this.input.format == \"js\" ? \"javascript\" : \"json\");\n\t//UTILS.stylizeEditor(ui, this.input.snippet, {width: this.input.width, height: this.input.height}, form);\n\tif(this.result){\n        this.resultDOM.appendChild(this.result);\n    }\n\tthis.container.appendChild(this.resultDOM);\n\treturn this.container;\n}\n\n\nmodule.exports = ScriptPane;\n","/*\n * Draws the screen for viewing and updating the schema\n * and provides wrappers around the client's schema API\n */\nconst UTILS=require('./Utils')\nconst TerminusClient = require('@terminusdb/terminus-client');\nconst HTMLHelper = require('./html/HTMLHelper');\nconst TerminusViewer = require('./html/TerminusViewer');\n\n\nfunction TerminusSchemaViewer(ui){\n\tthis.ui = ui;\n\tthis.tv = new TerminusViewer(ui.client);\n\n\tthis.mode = \"view\";\n\tthis.format = \"turtle\";\n\tthis.confirm_before_update = false;\n\tthis.woql = TerminusClient.WOQL;\n\tthis.views = { \n\t\tclasses: {\n\t\t\ttitle: \"Classes\"\n\t\t}, \n\t\tproperties: {\n\t\t\ttitle: \"Properties\"\n\t\t}, \n\t\towl: {\n\t\t\ttitle: \"OWL\"\t\n\t\t}\n\t}\n\tthis.views_dom = document.createElement(\"div\");\n\tthis.current_view = \"classes\";\n\tthis.retrieveViews();\n}\n\nTerminusSchemaViewer.prototype.getClassesPane = function() {\n\tlet WOQL = TerminusClient.WOQL;\n\tlet query = this.woql.from(this.ui.client.connectionConfig.dbURL())\n\t\t.limit(100)\n\t\t\t.start(0)\n\t\t\t.and(\n\t\t\t\tWOQL.quad(\"v:Class\", \"rdf:type\", \"owl:Class\", \"db:schema\"),\n\t\t\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\t\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:subClassOf\", \"v:Parent\", \"db:schema\"),\n\t\t\t\tWOQL.opt().quad(\"v:Child\", \"rdfs:subClassOf\", \"v:Class\", \"db:schema\"),\n\t\t\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\t\t\tWOQL.opt().quad(\"v:Class\", \"tcs:tag\", \"v:Abstract\", \"db:schema\")\n\t);\t\n\t\n\tvar table = TerminusClient.View.table();\n\ttable.column_order(\"Class\", \"Label\", \"Comment\", \"Parent\", \"Child\", \"Abstract\")\n\ttable.column('Comment').header('Description');\n\ttable.column('Class').header('Class ID');\n\ttable.column('Label').header('Name');\n\ttable.column('Child').header('Subclasses');\n\ttable.column('Parent').header('Parent Classes');\n\ttable.column('Range').header('Type');\n\n\tvar graph = TerminusClient.View.graph();\n\tgraph.edges([\"v:Class\", \"v:Parent\"], [\"v:Child\", \"v:Class\"], [\"v:Class\", \"v:Abstract\"]);\n\t\n\t\n\tgraph.height(800);\n\tgraph.width(1200);\n\tgraph.edge(\"v:Class\", \"v:Parent\").text(\"Parent Class\").distance(120);\n\tgraph.edge(\"v:Child\", \"v:Class\").text(\"Parent Class\").distance(120);\n\tgraph.edge(\"v:Class\", \"v:Abstract\").text(\"Abstract Class\").weight(2).color([0,0,0]);\n\tgraph.node(\"Parent\").size(20).color([180, 220, 250]).icon({label: true, size: 0.7, color: [90, 90, 140]});\n\tgraph.node(\"Class\").text(\"v:Label\").size(32).collisionRadius(80).icon({label: true, size: 0.7, color: [24, 34, 89]});\n\n\tvar rpc = { viewers: [graph] }\n    var qp = this.tv.getQueryPane(query, [table], false, [rpc]);\n\t//var qp = this.tv.getQueryPane(query, [graph, table]);\n\n\treturn qp;\n}\n\nTerminusSchemaViewer.prototype.getPropertiesPane = function() {\n\tlet query = this.woql.from(this.ui.client.connectionConfig.dbURL())\n\t   .limit(100)\n\t   .start(0)\n\t   .propertyMetadata();\n\n    var table = TerminusClient.View.table();\n\ttable.column_order(\"Property\", \"Label\", \"Range\", \"Domain\", \"Comment\")\n\ttable.column('Comment').header('Description');\n\ttable.column('Property').header('Property ID');\n\ttable.column('Label').header('Name');\n\ttable.column('Domain').header('Domain');\n\ttable.column('Range').header('Type');\n\n\tvar graph = TerminusClient.View.graph();\n\tgraph.height(800);\n\tgraph.width(1200);\n\tgraph.edges([\"Domain\", \"Property\"], [\"Property\", \"Range\"]);\n\tgraph.edge(\"Domain\", \"Property\").text(\"Domain Class\").color([20, 200, 20]).distance(120);\n\tgraph.edge(\"Property\", \"Range\").text(\"Property Type\").distance(100);\n\tgraph.node(\"Type\").hidden(true);\n\tgraph.node(\"Range\").text(\"v:Range\").size(20).collisionRadius(100).color([220, 250, 180]).icon({label: true, size: 0.8, color: [50, 60, 40]});\n\tgraph.node(\"Range\").v(\"Type\").in(\"owl:datatypeProperty\").hidden(true);\n\tgraph.node(\"Property\").text(\"v:Label\").size(24).collisionRadius(100).color([180, 220, 250]).icon({label: true, size: 0.8, color: [50, 60, 40]});\n\tgraph.node(\"Domain\").color([220, 250, 180]).size(20).collisionRadius(100).icon({label: true, size: 0.7, color: [24, 34, 89]});\n\tvar rpc = { viewers: [graph] }\n\tvar qp = this.tv.getQueryPane(query, [table], false, [rpc]);\n\t//var qp = this.tv.getQueryPane(query, [graph, table]);\n\treturn qp;\n}\n\nTerminusSchemaViewer.prototype.refreshPanes = function(){\n\tif(this.views.classes.pane) this.views.classes.pane.load();\n\tif(this.views.properties.pane) this.views.properties.pane.load();\n}\n\nTerminusSchemaViewer.prototype.retrieveViews = function(){\n\tif(!this.views.classes.pane){\n\t\tlet pane = this.getClassesPane();\n\t\tthis.views.classes.pane = pane;\n\t\tlet dom = pane.getAsDOM();\n\t\tif(this.current_view != \"classes\") dom.style.display = \"none\";\n\t\tthis.views_dom.appendChild(dom);\n\t\tpane.load();\n\t\tthis.views.classes.dom = dom;\n\t}\n\tif(!this.views.properties.pane){\n\t\tlet pane = this.getPropertiesPane();\n\t\tthis.views.properties.pane = pane;\n\t\tlet dom = pane.getAsDOM();\n\t\tif(this.current_view != \"properties\") dom.style.display = \"none\";\n\t\tthis.views_dom.appendChild(dom);\n\t\tthis.views.properties.dom = dom;\n\t\tpane.load();\n\t}\n\tif(!this.views.owl.dom){\n\t\tthis.views.owl.dom = this.getOWLView();\n\t\tthis.views_dom.appendChild(this.views.owl.dom);\n\t\tif(this.current_view != \"owl\") this.views.owl.dom.style.display = \"none\";\t\t\n\t}\n}\n\n\n/*\n * Retrieves schema from API and writes the response into the page\n */\nTerminusSchemaViewer.prototype.getAsDOM = function(){\n\n\tthis.holder = document.createElement(\"div\");\n\tthis.controldom = document.createElement(\"div\");\n\tthis.controldom.setAttribute(\"class\", \"terminus-schema-controls\");\n\tthis.controldom.appendChild(this.getTabsDOM());\n\tthis.view = document.createElement(\"div\");\n\tthis.view.setAttribute(\"class\", \"terminus-schema-view\");\n\tthis.view.appendChild(this.views_dom);\n\tthis.pagedom = document.createElement(\"div\");\n\tthis.pagedom.setAttribute(\"class\", \"terminus-schema-viewer\");\n\tthis.holder.appendChild(this.controldom);\n\tthis.pagedom.appendChild(this.view);\n\tthis.holder.appendChild(this.pagedom);\n\treturn this.holder;\n}\n\nTerminusSchemaViewer.prototype.getOWLView = function(){\n\tvar owldom = document.createElement(\"div\");\n\tthis.loadSchema();\n\treturn owldom;\n}\n\nTerminusSchemaViewer.prototype.updateOWLContents = function(){\n\tvar owldom = this.views.owl.dom;\n\tHTMLHelper.removeChildren(owldom);\n\tif(this.mode == 'view'){\n\t\towldom.appendChild(this.getSchemaEditButton());\n\t\towldom.appendChild(this.getSchemaViewDOM());\n\t}\n\telse if(this.mode == \"edit\"){\n\t\towldom.appendChild(this.getSchemaSaveButtons());\n\t\towldom.appendChild(this.getSchemaEditDOM());\n\t\towldom.appendChild(this.getSchemaSaveButtons());\n\t}\n}\n\n\nTerminusSchemaViewer.prototype.getTabsDOM = function(){\n\tvar ul = document.createElement('ul');\n\tul.setAttribute('class', 'terminus-ul-horizontal');\n\tfor(var k in this.views){\n\t\tvar a = this.getTabDOM(k, this.views[k].title);\n\t\tul.appendChild(a);\n\t\tif(k == this.current_view) \tUTILS.setSelectedSubMenu(a);\n\t}\n\treturn ul;\n}\n\nTerminusSchemaViewer.prototype.getTabDOM = function(view, title){\n\tvar a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        self.switchView(this, view);\n    })\n\ta.appendChild(document.createTextNode(title));\n    return a;\n}\n\nTerminusSchemaViewer.prototype.switchView = function(a, view){\n\tUTILS.setSelectedSubMenu(a);\n\tif(view != this.current_view){\n\t\tthis.current_view = view;\n\t\tthis.toggleTabs();\n\t}\n}\n\nTerminusSchemaViewer.prototype.toggleTabs = function(){\n\tfor(var k in this.views){\n\t\tif(this.views[k].dom && k == this.current_view) this.views[k].dom.style.display = \"block\";\n\t\telse if(this.views[k].dom) this.views[k].dom.style.display = \"none\";\n\t}\n}\n\nTerminusSchemaViewer.prototype.loadSchema = function(msg, msgtype){\n\tvar self = this;\n\tthis.ui.showBusy(\"Fetching Database Schema\");\n\treturn this.ui.client.getSchema(false, {\"terminus:encoding\": \"terminus:\" + this.format})\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t\tself.schema = response;\n\t\tself.updateOWLContents() \n\t})\n\t.catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\n}\n\nTerminusSchemaViewer.prototype.getSchemaSaveButtons = function(){\n\tvar ssb = document.createElement(\"span\");\n\tssb.setAttribute(\"class\", \"terminus-schema-save-buttons\");\n\tssb.appendChild(this.getCancelButton());\n\tssb.appendChild(this.getSaveButton());\n\treturn ssb;\n}\n\nTerminusSchemaViewer.prototype.getCancelButton = function(is_import){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tself.mode = \"view\";\n\t\tself.updateOWLContents();\n\t}\n\treturn this.getSchemaButton(\"Cancel\", \"cancel_update\", func);\n}\n\nTerminusSchemaViewer.prototype.getSaveButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tvar text = self.schema_edit_dom.value;\n\t\tif(typeof(self.schema) == \"object\"){\n\t\t\ttext = JSON.parse(text);\n\t\t}\n\t\tvar opts = {};\n\t\topts['terminus:encoding'] =  'terminus:' + self.format;\n\t\tif(!(TerminusClient.UTILS.empty(self.schema_edit_dom_name)))\n\t\t\topts['schemaId'] = self.ui.client.connectionConfig.dbURL() + '/' + self.schema_edit_dom_name.value;\n\t\telse opts['schemaId'] = self.ui.client.connectionConfig.dbURL() + '/' + 'schema';\n\t\treturn self.updateSchema(text, opts);\n\t}\n\treturn this.getSchemaButton(\"Save\", \"update_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getSchemaEditButton = function(){\n\tvar ssb = document.createElement(\"span\");\n\tssb.setAttribute(\"class\", \"terminus-schema-save-buttons\");\n\tvar self = this;\n\tvar func = function(){\n\t\tself.mode = \"edit\";\n\t\tself.updateOWLContents();\n\t}\n\tvar but = this.getSchemaButton(\"Edit\", \"update_schema\", func);\n\tssb.appendChild(but);\n\treturn ssb;\n}\n\n/*\n * Updates schema, then fetches updated version and updates the page with it\n */\nTerminusSchemaViewer.prototype.updateSchema  = function(text, opts) {\n\tthis.ui.showBusy(\"Updating Database Schema\");\n\tvar self = this;\n\treturn this.ui.client.updateSchema(false, text, opts)\n\t.then(function(response){\n\t\tif(response['terminus:status'] && response['terminus:status'] == \"terminus:success\"){\n\t\t\tself.ui.showBusy(\"Retrieving updated schema\");\n\t\t\tself.mode = \"view\";\n\t\t\tself.loadSchema(\"Successfully Updated Schema\");\n\t\t\tself.refreshPanes();\n\t\t\tself.updateOWLContents();\n\t\t}\n\t\telse if(response['terminus:status'] && response['terminus:status'] == \"terminus:failure\"){\n\t\t\tself.ui.clearBusy();\n\t\t\tself.ui.showViolations(response['terminus:witnesses'], \"schema\");\n\t\t}\n\t\telse {\n\t\t\tthrow new Error(\"Update Schema returned no terminus:status code\");\n\t\t}\n\t})\n\t.catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tif(error.data && error.data['terminus:witnesses']){\n\t\t\tself.ui.showViolations(error.data['terminus:witnesses'], \"schema\");\n\t\t}\n\t\telse {\n\t\t\tself.ui.showError(error);\n\t\t}\n\t});\n}\n\nTerminusSchemaViewer.prototype.getSchemaEditDOM = function(){\n\tvar np = document.createElement(\"div\");\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-edit-page\");\n\tif(this.ui.showControl(\"add_new_library\")) var sid = this.getSchemaNameInputDOM(np);\n\tvar ipval = document.createElement(\"textarea\");\n\tipval.setAttribute(\"class\", \"terminus-schema-edit terminus-schema-textarea\");\n\tipval.setAttribute(\"width\", \"100%\");\n\tipval.setAttribute(\"style\", \"min-width: 400px; min-height: 400px;\");\n\tif(typeof(this.schema) == \"string\"){\n\t\tipval.innerHTML = this.schema;\n\t}\n\telse if(typeof (this.schema) == \"object\") {\n\t\tipval.innerHTML = JSON.stringify(this.schema, 0, 4);\n\t}\n\tif(this.ui.showControl(\"add_new_library\")) this.schema_edit_dom_name = sid;\n\tthis.schema_edit_dom = ipval;\n\tnp.appendChild(ipval);\n\tUTILS.stylizeEditor(this.ui, ipval, 'schema', 'turtle');\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.getSchemaViewDOM = function(){\n\tvar self = this;\n\tvar np = document.createElement(\"div\");\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-view-page\");\n\tvar ipval = document.createElement(\"pre\");\n\tipval.setAttribute(\"class\", \"terminus-schema-view terminus-scheme-pre\");\n\tif(typeof(this.schema) == \"string\"){\n\t\tvar txt = this.schema.replace(/&/g, \"&amp;\")\n         .replace(/</g, \"&lt;\")\n         .replace(/>/g, \"&gt;\")\n         .replace(/\"/g, \"&quot;\")\n         .replace(/'/g, \"&#039;\");\n\t\tipval.innerHTML = txt;\n\t}\n\telse if(typeof (this.schema) == \"object\") {\n\t\tipval.innerHTML = JSON.stringify(this.schema, 0, 4);\n\t}\n\tvar cm = UTILS.stylizeCodeDisplay(this.ui, ipval, np, 'turtle');\n\tif(!cm) np.appendChild(ipval);\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.getSchemaButton = function(label, action, func){\n\tvar opt = document.createElement(\"button\");\n\topt.appendChild(document.createTextNode(label));\n\topt.setAttribute(\"class\", \"terminus-btn terminus-control-button terminus-schema-\" + action);\n\topt.addEventListener(\"click\", func);\n\treturn opt;\n}\n\n\nmodule.exports=TerminusSchemaViewer\n","/* User interface elements that relate to server context\n *\n * TerminusServerController is a control widget that invokes server actions\n * TerminusServerViewer is a window that displays server actions and server screens\n *\n */\n const Datatables = require('./plugins/datatables.terminus');\n const UTILS =require('./Utils');\n const HTMLHelper = require('./html/HTMLHelper');\n \n function TerminusServerController(ui){\n\t this.ui = ui;\n }\n\nTerminusServerController.prototype.getAsDOM = function(){\n\tvar rsc = document.createElement(\"div\");\n\trsc.setAttribute(\"class\", \"terminus-server-controller\");\n\tvar self = this;\n\tif(this.ui && this.ui.server()){\n\t\tvar scd = document.createElement(\"div\");\n\t\tscd.setAttribute(\"class\", \"terminus-server-connection\");\n        var nav = document.createElement('div');\n        nav.setAttribute('class', 'span3');\n        var ul = document.createElement('ul');\n        ul.setAttribute('class', 'terminus-ul');\n        nav.appendChild(ul);\n        rsc.appendChild(nav);\n        // connected to server\n        // change server\n        if(this.ui.showControl(\"change-server\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.activateSelectedNav(this, self);\n\t\t\t\tself.ui.clearMessages();\n                self.ui.showLoadURLPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-link');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Change Server');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n        // view databases\n        if(this.ui.showControl(\"db\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n                UTILS.activateSelectedNav(this, self);\n                if(self.ui.db()){\n                    self.ui.clearDB();\n\t\t\t\t\tself.ui.redrawControls();\n                }\n\t\t\t\tself.ui.clearMessages();\n                self.ui.showServerMainPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-home');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Home');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n\t\tif(this.ui.showControl(\"create_database\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n               UTILS.activateSelectedNav(this, self);\n                if(self.ui.db()){\n                    self.ui.clearDB();\n\t\t\t\t\tself.ui.redrawControls();\n\t\t\t\t}\n\t\t\t\tself.ui.clearMessages();\n                self.ui.showCreateDBPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-plus');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Create Database');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n        if(this.ui.showControl(\"collaborate\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n               UTILS.activateSelectedNav(this, self);\n                if(self.ui.db()){\n                    self.ui.clearDB();\n\t\t\t\t\tself.ui.redrawControls();\n                }\n\t\t\t\tself.ui.clearMessages();\n                self.ui.showCollaboratePage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-share-alt');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Collaborate');\n            a.appendChild(txt);\n            ul.appendChild(a);\n\t\t}\n\t}\n\treturn rsc;\n}\n\nTerminusServerController.prototype.getServerLabelDOM = function(){\n\tvar srec = this.ui.client.connection.getServerRecord();\n\tvar lab = (srec && srec['rdfs:label'] && srec['rdfs:label'][\"@value\"] ? srec['rdfs:label'][\"@value\"] : this.ui.server());\n\tvar desc = (srec && srec['rdfs:comment'] && srec['rdfs:comment'][\"@value\"] ? srec['rdfs:comment'][\"@value\"] : \"\");\n\tdesc += \" Server URL: \"+ this.ui.server();\n\tvar val = document.createElement(\"span\");\n\tval.setAttribute(\"class\", \"terminus-server-value\");\n\tval.setAttribute(\"title\", desc);\n\tval.appendChild(document.createTextNode(lab));\n    val =  document.createElement('div');\n\treturn val;\n}\n\nfunction TerminusServerViewer(ui){\n\tthis.ui = ui;\n\tthis.server = this.ui.server();\n\tthis.max_cell_size = 500;\n\tthis.max_word_size = 40;\n\tthis.css_base = \"https://terminusdb.github.io/terminus-dashboard/dist/\";\n\n}\n\nTerminusServerViewer.prototype.getAsDOM = function(selected){\n\tvar self = this;\n\tvar pd = document.createElement(\"span\");\n\tpd.setAttribute(\"class\", \"terminus-server-home-page\");\n\tif(this.ui.server()){\n\t\tvar scd = document.createElement(\"span\");\n\t\tscd.setAttribute(\"class\", \"terminus-server-home\");\n\t\tif(this.ui.showView(\"server\")){\n\t\t\tscd.appendChild(this.getServerDetailsDOM());\n\t\t}\n\t\tif(this.ui.showView(\"change-server\")){\n\t\t\tvar csbut = document.createElement(\"button\");\n\t\t\tcsbut.setAttribute(\"class\", \"terminus-control-button terminus-change-server-button terminus-btn\")\n\t\t\tcsbut.appendChild(document.createTextNode(\"Disconnect\"));\n\t\t\tcsbut.addEventListener(\"click\", function(){\n\t\t\t\tif(self.ui.db()){\n\t\t\t\t\tself.ui.clearDB();\n\t\t\t\t}\n\t\t\t\tself.ui.showLoadURLPage();\n\t\t\t})\n\t\t\t// 11092019 scd.appendChild(csbut);\n\t\t}\n\t\tif(this.ui.showView(\"create_database\")){\n\t\t\tvar crbut = document.createElement(\"button\");\n\t\t\tcrbut.setAttribute(\"class\", \"terminus-control-button terminus-create-db-button terminus-btn\")\n\t\t\tcrbut.appendChild(document.createTextNode(\"Create New Database\"));\n\t\t\tcrbut.addEventListener(\"click\", function(){\n\t\t\t\tif(self.ui.db()){\n\t\t\t\t\tself.ui.clearDB();\n\t\t\t\t}\n\t\t\t\tself.ui.clearMessages();\n\t\t\t\tself.ui.showCreateDBPage();\n\t\t\t})\n\t\t}\n\t\tif(this.ui.showView(\"db\")){\n\t\t\tscd.appendChild(this.getDBListDOM());\n\t\t}\n\t\tpd.appendChild(scd);\n\t}\n\telse {\n\t\tself.ui.showLoadURLPage();\n\t}\n\treturn pd;\n}\n\nTerminusServerViewer.prototype.getServerDetailsDOM = function(){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-server-details terminus-welcome-box terminus-no-res-alert\");\n\tvar icon = document.createElement(\"img\");\n\ticon.setAttribute(\"class\", \"terminus-server-main-logo\")\n\tvar url = this.css_base + \"css/img/TerminusDB_Logo_Original.png\" \n\ticon.setAttribute(\"src\", url);\n\tscd.appendChild(icon);\n\tvar scl = document.createElement(\"p\");\n\tscl.setAttribute(\"class\", \"terminus-server-running\")\n\tscl.appendChild(document.createTextNode(\"Terminus Server running at \"))\n\tscl.appendChild(document.createTextNode(this.ui.server()))\n\tscd.appendChild(scl);\n\treturn scd;\n}\n\nTerminusServerViewer.prototype.wrapTableLinkCell = function(tdElement,dbid, text){\n\tvar self = this;\n\tvar wrap = document.createElement(\"p\");\n//\twrap.setAttribute(\"href\", \"#\");\n\twrap.setAttribute(\"class\", \"terminus-table-content\");\n\tHTMLHelper.wrapShortenedText(wrap, text, this.max_cell_size, this.max_word_size);\n\ttdElement.addEventListener(\"click\", function(){\n\t\tself.ui.connectToDB(dbid);\n\t\tself.ui.showDBMainPage();\n\t});\n\treturn wrap;\n}\n\nTerminusServerViewer.prototype.getDBListDOM = function(){\n\t//var self = this;\n\tvar sec = document.createElement(\"div\");\n\tsec.setAttribute(\"class\", \"terminus-db-list\");\n\t//sec.appendChild(UTILS.getHeaderDom('Databases'));\n\tvar scd = document.createElement(\"table\");\n\tscd.setAttribute(\"class\", \"terminus-db-list terminus-db-size terminus-hover-table terminus-margin-top\");\n\tvar thead = document.createElement(\"thead\");\n\tvar thr = document.createElement(\"tr\");\n\tvar th1 = document.createElement(\"th\");\n\tth1.appendChild(document.createTextNode(\"Database ID\"));\n\tth1.setAttribute(\"class\", \"terminus-db-id terminus-table-header-full-css\");\n\tth1.style.width = \"20%\";\n\tvar th2 = document.createElement(\"th\");\n\tth2.appendChild(document.createTextNode(\"Title\"));\n\tth2.setAttribute(\"class\", \"terminus-db-title terminus-table-header-full-css\");\n\tth2.style.width = \"30%\";\n\tvar th3 = document.createElement(\"th\");\n\tth3.appendChild(document.createTextNode(\"Description\"));\n\tth3.setAttribute(\"class\", \"terminus-db-description terminus-table-header-full-css\");\n\tth3.style.width = \"50%\";\n\tvar th4 = document.createElement(\"th\");\n\tth4.setAttribute(\"class\", \"terminus-db-size terminus-table-header-full-css\");\n\tth4.appendChild(document.createTextNode(\"Size\"));\n\tvar th5 = document.createElement(\"th\");\n\tth5.setAttribute(\"class\", \"terminus-db-created terminus-table-header-full-css\");\n\tth5.appendChild(document.createTextNode(\"Created\"));\n\tvar th6 = document.createElement(\"th\");\n\tth6.appendChild(document.createTextNode(\"Delete\"));\n\tth6.setAttribute(\"class\", \"terminus-db-delete terminus-table-header-full-css\");\n\tthr.appendChild(th1);\n\tthr.appendChild(th2);\n\tthr.appendChild(th3);\n\t//thr.appendChild(th4);\n\t//thr.appendChild(th5);\n\t//thr.appendChild(th6);\n\tthead.appendChild(thr);\n\tscd.appendChild(thead);\n\tvar tbody = document.createElement(\"tbody\");\n\tvar dbrecs = this.ui.client.connection.getServerDBRecords();\n\tfor(let fullid in dbrecs){\n\t\tlet dbrec = dbrecs[fullid];\n\t\tconst dbid = fullid.split(\":\")[1];\n\t\tlet tr = document.createElement(\"tr\");\n\t\tvar td1 = document.createElement(\"td\");\n\t\ttd1.appendChild(this.wrapTableLinkCell(td1,dbid, dbid));\n\t\ttd1.setAttribute(\"class\", \"terminus-db-id terminus-db-pointer\");\n\t\tvar td2 = document.createElement(\"td\");\n\t\ttd2.setAttribute(\"class\", \"terminus-db-title terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['rdfs:label'] && dbrec['rdfs:label']['@value'] ? dbrec['rdfs:label']['@value'] : \"\");\n\t\ttd2.appendChild(this.wrapTableLinkCell(td2,dbid, txt));\n\t\tvar td3 = document.createElement(\"td\");\n\t\ttd3.setAttribute(\"class\", \"terminus-db-description terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['rdfs:comment'] && dbrec['rdfs:comment']['@value'] ? dbrec['rdfs:comment']['@value'] : \"\");\n\t\ttd3.appendChild(this.wrapTableLinkCell(td3,dbid, txt));\n\t\tvar td4 = document.createElement(\"td\");\n\t\ttd4.setAttribute(\"class\", \"terminus-db-size terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['terminus:size'] && dbrec['terminus:size']['@value'] ? dbrec['terminus:size']['@value'] : \"\");\n\t\ttd4.appendChild(this.wrapTableLinkCell(td4,dbid, txt));\n\t\tvar td5 = document.createElement(\"td\");\n\t\ttd5.setAttribute(\"class\", \"terminus-db-created terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['terminus:last_updated'] && dbrec['terminus:last_updated']['@value'] ? dbrec['terminus:last_updated']['@value'] : \"\");\n\t\ttd5.appendChild(this.wrapTableLinkCell(td5,dbid, txt));\n\t\tvar td6 = document.createElement(\"td\");\n\t\ttd6.setAttribute(\"class\", \"db-delete\");\n\t\tvar delbut = this.ui.getDeleteDBButton(dbid);\n\t\tif(delbut) td6.appendChild(delbut);\n\n\t\ttr.appendChild(td1);\n\t\ttr.appendChild(td2);\n\t\ttr.appendChild(td3);\n\t\t//tr.appendChild(td4);\n\t\t//tr.appendChild(td5);\n\t\t//tr.appendChild(td6);\n\t\ttbody.appendChild(tr);\n\t}\n\tscd.appendChild(tbody);\n\tsec.appendChild(scd);\n\n\tif(this.ui.pluginAvailable(\"datatables\")){\n        var dt = new Datatables.CspDatatables(this.ui);\n\t\tvar tab = dt.draw(scd);\n\t}\n\treturn sec;\n}\n\n\nmodule.exports = {TerminusServerViewer,TerminusServerController}\n","const TerminusClient = require('@terminusdb/terminus-client');\nconst HTMLHelper = require('../html/HTMLHelper');\nconst UTILS= require('../Utils')\n\n/*** client side processing ***/\nfunction CspDatatables(ui){\n    this.ui = ui;\n}\n\nCspDatatables.prototype.convertToDatatable = function(tab){\n    var dt = this;\n    var table = jQuery(tab).DataTable({\n         searching : false,\n         pageLength: 25,\n         lengthMenu: [10, 25, 50, 75, 100],\n         paging    : true,\n         select    : true,\n         initComplete: function(settings) {\n                        var ict =settings.oInstance.api();\n                        ict.$('td').each(function(){\n                            this.setAttribute('title', $(this).html())\n                        })},\n         columnDefs:[{targets:'_all',className:\"truncate\"}],\n         createdRow: function(row) {\n                            var td = $(row).find(\".truncate\");\n                            td.attr(\"title\", td.html());}\n    }); //jQuery(tab)\n\n    // on click of row connect to db, on click of 5th column delete db\n    jQuery(tab, 'tbody').on('click', 'td', function(){\n        if(table.cell(this).index().column == 5){\n            var dbInfo = table.row(jQuery(this).parents('tr')).data();\n            var dbId = UTILS.extractValueFromCell(dbInfo[0]);\n            dt.ui.deleteDatabase(dbId);\n            return;\n        }\n        else dt.ui.showDBMainPage();\n     }); // on click\n\n    tab.setAttribute('class'      , 'stripe dataTable terminus-db-size');\n    tab.setAttribute('cellpadding', '1');\n    tab.setAttribute('cellspacing', '0');\n    tab.setAttribute('border'     , '0');\n    return tab;\n}\n\nCspDatatables.prototype.draw = function(dtResult){\n    return(this.convertToDatatable(dtResult));\n}\n\n/*** server side processing ***/\nfunction Datatables(wResViewer, qPage){\n   this.wrViewer = wResViewer;\n   this.wQuery = wResViewer.wQuery;\n   this.ui = wResViewer.ui;\n   this.qPage = qPage;\n   this.currDTSettings = wResViewer.settings;\n}\n\n/*\n    query: new woqlquery with current pagination changes\n    pageInfo: current drawCallBack page change info\n    resultDOM: result dom on veiwer page\n*/\nDatatables.prototype.executeQuery = function(qObj, pageInfo, resultDOM){\n    var self = this;\n    // return this.wQuery.execute(query)\n    return qObj.execute(this.ui.client)\n    .then(function(result){\n      var dtResult = {};\n      var wqRes = new TerminusClient.WOQLResult(result, qObj);\n      dtResult = self.wrViewer.formatResultsForDatatableDisplay(result.bindings, pageInfo)\n      return dtResult.data;\n    })\n    .catch(function(err){\n      console.error(err);\n      self.ui.showError(err);\n    });\n}\n\n/* get query string based on datatable pagination and current query */\n/*Datatables.prototype.getQueryOnPagination = function(wq, settings){\n    switch(settings.query){\n        case 'Show_All_Documents':\n            return wq.getAllDocumentQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Data':\n            return wq.getEverythingQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Schema_Elements':\n            return wq.getElementMetaDataQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_Document_Classes':\n        \tvar sqp = wq.getConcreteDocumentClassPattern(\"Class\");\n            return wq.getClassMetaDataQuery(sqp);\n        break;\n        case 'Show_All_Properties':\n            return wq.getPropertyListQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Classes':\n            return wq.getClassMetaDataQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_Data_Class':\n            return  wq.getDataOfChosenClassQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        case 'Show_Property_Class':\n            return wq.getDataOfChosenPropertyQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        case 'Show_Document_Info_by_Id':\n            return wq.getDocumentQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Document_classes':\n            return wq.getClassesQuery(settings.pageLength, settings.start);\n        break;\n        default:\n            console.log('Invalid woql option passed');\n        break;\n\n    }\n}   */\n/*\n    pageInfo: current drawCallBack page change info\n*/\nDatatables.prototype.generateNewQueryOnPageChange = function(pageInfo){\n    if(this.qPage) UTILS.deleteStylizedEditor(this.ui, pageInfo.qTextDom);\n    var qObj = UTILS.getCurrentWoqlQueryObject(null, pageInfo);\n    //var query = this.getQueryOnPagination(this.wQuery, pageInfo)\n    if(this.qPage) {\n        if(pageInfo.queryMode.value == 'woql')\n            pageInfo.qTextDom.value = JSON.stringify(qObj.prettyPrint(), undefined, 2);\n        else pageInfo.qTextDom.value = JSON.stringify(qObj, undefined, 2);\n        UTILS.stylizeEditor(this.ui, pageInfo.qTextDom, 'query', 'javascript');\n    }\n    //return query;\n    return qObj;\n}\n\n/*\n    dt: Datatable reference\n    len : current number of records to display\n*/\nDatatables.prototype.getCallbackSettings = function(dt, dtAPIChangeSettings){\n    var pageInfo = {};\n    pageInfo.pageLength  = dtAPIChangeSettings._iDisplayLength;\n    pageInfo.start       = dtAPIChangeSettings._iDisplayStart;\n    pageInfo.draw        = dtAPIChangeSettings.iDraw;\n    pageInfo.qTextDom    = dt.qTextDom;\n    pageInfo.queryMode   = dt.queryMode;\n    if(this.qPage) pageInfo.query = dt.query;\n    else pageInfo.query = 'Show_All_Document_classes';\n    pageInfo.chosenValue = dt.chosenValue;\n    return pageInfo;\n}\n\n/*\n    tab: datatable table dom\n    settings : settings from woql txt generator\n    resultDOM: result dom of viewer\n*/\nDatatables.prototype.setUp = function(tab, settings, resultDOM){\n    // delete previous datatable\n    HTMLHelper.removeChildren(this.dtdom);\n    this.dtdom = document.createElement('div');\n    this.dtdom.appendChild(tab);\n    resultDOM.appendChild(this.dtdom);\n    // saving query text box dom to change limit value on change of datatable page length\n    this.qTextDom = settings.qTextDom;\n    this.query = settings.query;\n    this.chosenValue = settings.chosenValue;\n    this.queryMode = settings.queryMode;\n}\n\n// update datatables settings so it can be reused in WOQLTextboxGenerator to re write query in woql/ jsonld\nDatatables.prototype.updateCurrDTSettings = function(pageInfo){\n    this.currDTSettings.pageLength = pageInfo.pageLength;\n    this.currDTSettings.start      = pageInfo.start;\n}\n\nDatatables.prototype.getNewDataOnChange = function(drawnTab, aSettings, resultDOM){\n    var pageInfo = this.getCallbackSettings(this, aSettings);\n    this.updateCurrDTSettings(pageInfo);\n   // var query = this.generateNewQueryOnPageChange(pageInfo);\n    var qObj = this.generateNewQueryOnPageChange(pageInfo);\n    return this.executeQuery(qObj, pageInfo, resultDOM);\n    //return this.executeQuery(query, pageInfo, resultDOM);\n    //return  dtResult.result.data;\n}\n\nDatatables.prototype.getDataFromServer = function(dtResult, resultDOM){\n    var dt = this;\n    var tab = dtResult.tab;\n    this.setUp(tab, this.wrViewer.settings, resultDOM);\n    // initialize datatables\n    var table = jQuery(tab).DataTable({\n         searching   : false,\n         pageLength  : dt.wrViewer.settings.pageLength,\n         serverSide  : true,\n         processing  : true,\n         lengthMenu  : [25, 50, 75, 100],\n         dom         : 'RBlftip',\n         columns     : dtResult.result.columns,\n         paging      : true,\n         select      : true,\n         autoWidth   : true,\n         ajax        : function (data, callback, settings) {\n                            if(Object.entries(dtResult.result.data).length > 0){\n                                // first draw is loaded\n                                var res = dtResult.result.data;\n                                dtResult.result.data = {};\n                                callback(res);\n                            }\n                            else{\n                                dt.getNewDataOnChange(this, settings, resultDOM)\n                                    .then(function(result){\n                                     callback(result);\n                                })\n                            }\n                       },\n         buttons     : [{ extend: 'copy', text: 'Copy to clipboard' },\n                        { extend: 'excel', text: 'Export to Excel' }],\n         columnDefs  : [{ targets:'_all',\n                          className:\"truncate\"}],\n         createdRow  : function(row){\n                            var td = $(row).find(\".truncate\");\n                            td.attr(\"title\", td.html());},\n         scrollX     : true\n    }); //jQuery(tab)\n\n    // on click of doc\n    jQuery(tab, 'tbody').on('click', 'td', function(){\n        if(table.cell(this).data){\n            if(this.innerText.substring(0, 4) == \"doc:\"){\n                if(dt.wrViewer.result.ui) {\n        \t\t\tdt.wrViewer.result.ui.showDocument(this.innerText);\n        \t\t\tdt.wrViewer.result.ui.redraw();\n        \t\t\tdt.wrViewer.selectDocumentNavBar(dt.ui);\n        \t\t}\n            }\n        }\n     }); // on click\n\n    //styling\n    tab.setAttribute('class'      , 'stripe dataTable');\n    tab.setAttribute('style'      , 'margin: 0!important');\n    tab.setAttribute('cellpadding', '1');\n    tab.setAttribute('cellspacing', '1');\n    tab.setAttribute('border'     , '0');\n\n    return tab;\n}\n\n/*\nserverside: true or false\n*/\nDatatables.prototype.draw = function(dtResult, resultDOM){\n    return(this.getDataFromServer(dtResult, resultDOM));\n}\n\nmodule.exports={Datatables, CspDatatables}\n","const UTILS = require(\"./Utils.js\");\n\nfunction TerminusURLLoader(ui, val){\n\tthis.ui = ui;\n\tthis.val = val;\n\tthis.url_input = false;\n\tthis.key_input = false;\n}\n\nTerminusURLLoader.prototype.getLabelDOM = function(){\n\treturn document.createTextNode(\"Connect\");\n}\n\nTerminusURLLoader.prototype.getFormFieldDOM = function(ip, fname, ltxt, pholder){\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-horizontal terminus-control-group terminus-form-field-spacing terminus-display-flex terminus-field-\"+fname);\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"terminus-control-label terminus-form-label terminus-form-field-label terminus-label-\"+fname);\n\tlab.appendChild(document.createTextNode(ltxt))\n\tip.setAttribute(\"type\", \"text\");\n\tip.setAttribute(\"placeholder\", pholder);\n\tsci.appendChild(lab);\n\tsci.appendChild(ip);\n\treturn sci;\n}\n\nTerminusURLLoader.prototype.getAsDOM = function(){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-form terminus-url-loader\");\n\tscd.appendChild(UTILS.getHeaderDom('Connect To Terminus Server'));\n\tvar mfd = document.createElement('div');\n\tmfd.setAttribute('class', 'terminus-form-border terminus-margin-top');\n\tscd.appendChild(mfd);\n\tthis.url_input = document.createElement(\"input\");\n\tthis.url_input.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-form-field-input terminus-input-text\");\n\tif(this.val){\n\t\tthis.url_input.value = this.val;\n\t}\n\tvar dht = document.createElement('div');\n\tdht.setAttribute('class', 'terminus-form-margin-top');\n\tmfd.appendChild(dht);\n\tmfd.appendChild(this.getFormFieldDOM(this.url_input, \"connect\", \"URL\", \"Terminus DB URL\"));\n\tthis.key_input = document.createElement(\"input\");\n\tthis.key_input.setAttribute(\"class\", \"terminus-form-value terminus-value terminus-input-text\");\n\tmfd.appendChild(this.getFormFieldDOM(this.key_input, \"connect\", \"Key\", \"Server API Key\"));\n\tvar loadbuts = document.createElement(\"div\");\n\tloadbuts.setAttribute(\"class\", \"terminus-control-buttons\");\n\tvar loadbut = document.createElement(\"button\");\n\tloadbut.setAttribute(\"class\", \"terminus-control-button terminus-url-load terminus-btn terminus-btn-float-right\");\n\tloadbut.appendChild(document.createTextNode(\"Connect\"));\n\tvar self = this;\n\tloadbut.addEventListener(\"click\", function(){\n\t\tif(self.url_input.value){\n\t\t\tself.ui.load(self.url_input.value, self.key_input.value);\n\t\t}\n\t});\n\tloadbuts.appendChild(loadbut);\n\tmfd.appendChild(loadbuts);\n\treturn scd;\n}\n\n\nmodule.exports=TerminusURLLoader\n"],"sourceRoot":""}
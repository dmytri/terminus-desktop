{"version":3,"sources":["webpack://TerminusDashboard/webpack/bootstrap","webpack://TerminusDashboard/../terminus-client/index.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/utils.js","webpack://TerminusDashboard/./src/Utils.js","webpack://TerminusDashboard/./src/html/HTMLFrameHelper.js","webpack://TerminusDashboard/../terminus-client/lib/frameHelper.js","webpack://TerminusDashboard/./src/html/query/TerminusCodeSnippet.js","webpack://TerminusDashboard/../terminus-client/lib/errorMessage.js","webpack://TerminusDashboard/./src/viewer/TerminusFrame.js","webpack://TerminusDashboard/./src/plugins/TerminusPlugin.js","webpack://TerminusDashboard/../terminus-client/lib/const.js","webpack://TerminusDashboard/../terminus-client/lib/utils.js","webpack://TerminusDashboard/./src/viewer/WOQLRule.js","webpack://TerminusDashboard/./src/html/Datatypes.js","webpack://TerminusDashboard/./src/html/datatypes/String.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/bind.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/buildURL.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/cancel/isCancel.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/defaults.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/adapters/xhr.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/createError.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/mergeConfig.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/cancel/Cancel.js","webpack://TerminusDashboard/../terminus-client/lib/connectionCapabilities.js","webpack://TerminusDashboard/../terminus-client/lib/connectionConfig.js","webpack://TerminusDashboard/../terminus-client/lib/terminusIDParser.js","webpack://TerminusDashboard/../terminus-client/lib/framePattern.js","webpack://TerminusDashboard/./src/viewer/WOQLChooser.js","webpack://TerminusDashboard/./src/viewer/WOQLTable.js","webpack://TerminusDashboard/./src/viewer/DatatypeRenderers.js","webpack://TerminusDashboard/./src/viewer/WOQLGraph.js","webpack://TerminusDashboard/./src/viewer/WOQLStream.js","webpack://TerminusDashboard/./src/html/QueryPane.js","webpack://TerminusDashboard/./src/html/datatypes/StringEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Boolean.js","webpack://TerminusDashboard/./src/html/datatypes/BooleanEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Choice.js","webpack://TerminusDashboard/./src/html/datatypes/ChoiceEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Coordinate.js","webpack://TerminusDashboard/./src/html/datatypes/CoordinateEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Date.js","webpack://TerminusDashboard/./src/html/datatypes/DateHelper.js","webpack://TerminusDashboard/./src/html/datatypes/DateEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Entity.js","webpack://TerminusDashboard/./src/html/datatypes/EntityEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Image.js","webpack://TerminusDashboard/./src/html/datatypes/ImageEditor.js","webpack://TerminusDashboard/./src/html/datatypes/Link.js","webpack://TerminusDashboard/./src/html/datatypes/Number.js","webpack://TerminusDashboard/./src/html/datatypes/Range.js","webpack://TerminusDashboard/./src/html/datatypes/RangeEditor.js","webpack://TerminusDashboard/./src/html/datatypes/GoogleMapEditor.js","webpack://TerminusDashboard/./src/html/datatypes/GoogleMapHelper.js","webpack://TerminusDashboard/./src/html/datatypes/GoogleMapViewer.js","webpack://TerminusDashboard/./src/html/datatypes/HTMLMarkupEditor.js","webpack://TerminusDashboard/./src/html/datatypes/S2EntityEditor.js","webpack://TerminusDashboard/./src/html/table/SimpleTable.js","webpack://TerminusDashboard/./src/html/graph/SimpleGraph.js","webpack://TerminusDashboard/./src/html/stream/SimpleStream.js","webpack://TerminusDashboard/./src/html/chooser/SimpleChooser.js","webpack://TerminusDashboard/./src/html/DocumentPane.js","webpack://TerminusDashboard/./src/html/document/SimpleFrameViewer.js","webpack://TerminusDashboard/./src/html/document/ObjectViewer.js","webpack://TerminusDashboard/./src/index.js","webpack://TerminusDashboard/./src/TerminusUI.js","webpack://TerminusDashboard/./src/ApiExplorer.js","webpack://TerminusDashboard/../terminus-client/lib/woqlClient.js","webpack://TerminusDashboard/../terminus-client/lib/dispatchRequest.js","webpack://TerminusDashboard/./node_modules/buffer/index.js","webpack://TerminusDashboard/(webpack)/buildin/global.js","webpack://TerminusDashboard/./node_modules/base64-js/index.js","webpack://TerminusDashboard/./node_modules/ieee754/index.js","webpack://TerminusDashboard/./node_modules/isarray/index.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/index.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/axios.js","webpack://TerminusDashboard/../terminus-client/node_modules/is-buffer/index.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/Axios.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/InterceptorManager.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/dispatchRequest.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/transformData.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/settle.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/core/enhanceError.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/parseHeaders.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/cookies.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/combineURLs.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/cancel/CancelToken.js","webpack://TerminusDashboard/../terminus-client/node_modules/axios/lib/helpers/spread.js","webpack://TerminusDashboard/../terminus-client/lib/objectFrame.js","webpack://TerminusDashboard/../terminus-client/lib/woqlResult.js","webpack://TerminusDashboard/../terminus-client/lib/woql.js","webpack://TerminusDashboard/./src/plugins/codemirror.terminus.js","webpack://TerminusDashboard/./src/TerminusDB.js","webpack://TerminusDashboard/./src/viewer/WOQLQueryView.js","webpack://TerminusDashboard/./src/html/ResultPane.js","webpack://TerminusDashboard/./src/html/graph/GraphResultsViewer.js","webpack://TerminusDashboard/./src/html/TerminusViolation.js","webpack://TerminusDashboard/./src/TerminusQuery.js","webpack://TerminusDashboard/./src/html/ScriptPane.js","webpack://TerminusDashboard/./src/TerminusSchema.js","webpack://TerminusDashboard/./src/html/TerminusHTMLViewer.js","webpack://TerminusDashboard/./src/html/document/SimpleDocument.js","webpack://TerminusDashboard/./src/html/document/DocumentTable.js","webpack://TerminusDashboard/./src/html/document/PropertyViewer.js","webpack://TerminusDashboard/./src/html/document/DataViewer.js","webpack://TerminusDashboard/./src/TerminusServer.js","webpack://TerminusDashboard/./src/plugins/datatables.terminus.js","webpack://TerminusDashboard/./src/TerminusURL.js","webpack://TerminusDashboard/./src/client/RenderingMap.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","WOQLClient","require","ConnectionCapabilities","ConnectionConfig","IDParser","ErrorMessage","FrameHelper","ObjectFrame","WOQLResult","WOQL","isBuffer","toString","isArray","val","isObject","isFunction","forEach","obj","fn","length","isArrayBuffer","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","buffer","isString","isNumber","isUndefined","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","window","document","merge","result","assignValue","arguments","deepMerge","extend","a","b","thisArg","trim","str","replace","Codemirror","TerminusClient","readFile","file","XMLHttpRequest","xmlhttp","ActiveXObject","open","send","xmlDoc","responseText","getFunctionSignature","which","sigs","spec","descr","args","server_url","options","title","description","database_url","details","format","editmode","document_url","fail_on_id_denied","woql","class","term","source","target","getHeaderDom","text","hd","createElement","setAttribute","h","innerHTML","appendChild","getButton","button","createTextNode","getInfoAlertDom","type","label","msg","ald","txt","getResponse","currForm","action","response","terminator","rd","br","data","JSON","stringify","pre","stylizeCodeDisplay","showHttpResult","retHttpHeaders","headers","hdres","json","then","deleteStylizedEditor","ui","qip","pluginAvailable","cm","nextElementSibling","removeChildren","stylizeEditor","view","cmConfig","ar","colorizeTextArea","updateTextArea","dom","pr","colorizePre","removeSelectedNavClass","el","getElementsByClassName","classList","remove","setSelectedSubMenu","add","setSelected","className","par","parentElement","childNodes","contains","tolggleContent","icon","content","style","display","activateSelectedNav","nav","hideDocumentSubMenus","checkDocumentSubMenus","showControl","toggleVisibility","extractValueFromCell","cellValue","DOMParser","parseFromString","firstChild","displayDocumentSubMenus","showSubMenus","checkForMandatoryId","objId","background","getCurrentWoqlQueryObject","query","settings","qval","limit","pageLength","start","elementMetadata","classMetadata","getEverything","getAllDocuments","documentMetadata","and","quad","sub","opt","propertyMetadata","console","log","trimValue","getqObjFromInput","q","qObj","eval","this","e","TerminusPluginManager","HTMLFrameHelper","control","callback","disabled","dpropDOM","addEventListener","selected","sel","labelFromURL","renderer","viewsDOM","setMode","getActionControl","isNew","cancel","url","location","href","loc","split","sh","getShorthand","bits","htmlid","prop","wrap","max_cell_size","max_word_size","substring","replacements","words","word","newstr","k","varname","lastIndexOf","help","input","infoDOM","linfo","lspacer","lval","scope","frame","orientation","hfeatures","features","display_options","hidden","framedom","getFrameHolderDOM","header","header_features","getFrameHeaderDOM","getFrameBodyDOM","pcls","sp","css","parent","subjectClass","subject","hid","hash","index","idm","objDOM","vholder","charCodeAt","feature","getInfoboxDOM","sum","getSummary","status","lab","getLabel","getComment","isClassChoice","getClassChoiceTypeSelector","range","getType","cardControlAllows","show_disabled_buttons","clone","reset","isUpdated","hide","show","save","getViewerSelectorDOM","getViewEntryDOM","getCardinalityDOM","getAddDOM","viewers","terminus","datatypes","getAvailableViewers","getRenderer","mpropDOM","currentViewer","getSelectionControl","viewer","setViewer","viewables","getFilledPropertyList","unshift","goToEntry","restriction","getRestriction","min","max","cs","getAvailableClassChoices","mlabDOM","cls","changeClass","addClass","addables","getMissingPropertyList","addNewProperty","addNewValue","standard_urls","rdf","rdfs","xsd","owl","tcs","tbs","xdd","v","vio","docs","prefix","node","hasChildNodes","removeChild","parentNode","keys","Math","random","Date","getTime","link","pref","full","ida","idb","unshorten","sha","shb","prefixes","validURL","nurl","urlFragment","charAt","toUpperCase","slice","urlStr","baseUrl","stype","urlFirst","urlTmp","ext","viewIncludesProperties","parts","join","ty","parsed","parseXsdDate","parseXsdTime","parseXsdDateTime","year","month","day","push","tz","extractXsdTimezone","abs","parseInt","timezone","nparsed","hour","minute","second","xparsed","addXsdPadding","ret","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","convertTimestampToXsd","datetime","ptime","indexOf","dividor","vals","scriptid","src","existingScript","getElementById","script","body","onload","id","cssid","rel","UTILS","TerminusCodeSnippet","language","width","height","placeholder","formats","snippet","setQuery","refreshContents","serialise","prettyPrint","undefined","parseText","nw","parse","loadConfig","error","getInputElement","readInput","getAsDOM","with_buttons","scont","snpc","getFormatButtons","serial","actbtn","getSubmitButton","changeRuleView","nview","submit","getIconsDOM","bsp","view_types","isp","self","cursor","f","btn","qobj","alert","removeCodeMirror","nextSibling","removeElement","stylizeSnippet","dimensions","getErrorAsMessage","api","err","formatErrorMessage","method","nmsg","getAPIErrorMessage","getAccessDeniedMessage","accessDenied","db","server","getInvalidURIMessage","parseAPIError","redirected","DatatypeRenderers","TerminusFrame","client","load_schema","opts","config","setDatatypes","func","loadDocument","getDocument","loadDataFrames","loadDocumentSchema","ncls","getClassFrame","loadSchemaFrames","dataframes","domain","classframes","loadClassFrames","subjid","newDoc","fillFromSchema","render","applyRulesToDocument","doc","filter","rules","rule","loadRenderer","compare","setFrameDisplayOptions","rendname","owner","preloaded","loaded","loading","precluded","plugins","js","requires","setPluginOptions","init","calculatePreloaded","toload","calculateRequiredInitPlugins","loadPlugins","pins","pid","getDefaultPlugins","needed_pins","loading_order","getAvailablePlugins","pl","plugin","version_check","pluginmeta","version","jQuery","slider","Quill","JSONEditor","CodeMirror","fontAwesomeCheck","dataTable","select2","google","maps","ol","Map","d3","Error","element","span","insertBefore","getComputedStyle","getPropertyValue","ticker","cback","loadPlugin","pug","loadDynamicCSS","scripts","sid","splice","loadDynamicScript","loadPluginScripts","loadPageCSS","cssfid","cssdom","cssurl","pluginLoadable","pluginLoadedOrLoading","getPluginDOM","plugid","cl","cbox","checked","clab","togglePlugin","redraw","unloadPlugin","drawPlugins","num","dm","clh","showPlugins","freeze","CONNECT","GET_SCHEMA","UPDATE_SCHEMA","UPDATE_DOCUMENT","CLASS_FRAME","WOQL_SELECT","GET_DOCUMENT","DELETE_DATABASE","DELETE_DOCUMENT","CREATE_DATABASE","CREATE_DOCUMENT","WOQL_UPDATE","authorityActionsToArr","Array","map","item","URIEncodePayload","payload","encodeURIComponent","payloadArr","keyElement","valueElement","WOQLChooser","WOQLTable","WOQLGraph","WOQLStream","FrameConfig","WOQLStreamConfig","WOQLChooserConfig","WOQLTableConfig","WOQLRule","addNamespacesToVariables","vars","nvars","nvar","removeNamespaceFromVariable","mvar","getMatchingRules","row","context","matches","match","WOQLChartRule","WOQLChartConfig","table","chart","graph","WOQLGraphConfig","chooser","stream","loadJSON","jr","conf","nr","renderers","tf","trenderer","setRenderer","rend","json_rules","get_schema","show_all","all","show_parts","fp","showDisabledButtons","collapse","headerFeatures","showEmpty","show_empty","featureRenderers","feature_renderers","dataviewer","wqt","change","values","labels","titles","sort","direction","onChange","value_variable","label_variable","title_variable","sort_variable","sort_direction","dtypes","column_order","pagesize","pager","page","order","show_pager","editable","show_pagesize","change_pagesize","show_pagenumber","column","cols","setVariables","literals","show_literals","source_variable","fontfamily","fontfam","show_force","force","fix_nodes","fixed","explode_out","explode","selected_grows","bigsel","gwidth","gheight","edges","nedges","show_edges","edge","getConfigAsJSON","showfix_nodes_force","estrs","variables","literal","removeNamespacesFromVariables","size","color","charge","distance","weight","symmetric","collisionRadius","arrow","border","click","hover","constraints","mjson","w","hdr","onClick","onHover","list","current_variable","tester","test","constraint","vundertest","constructor","padding","paddingObj","connectNulls","bool","fill","stroke","strokeWidth","interval","dot","isVisible","labelRotate","angle","domainArr","strokeDasharray","dashArr","iconSize","iconType","showTicks","xAxis","woqlRule","bar","line","point","area","cartesianGrid","legend","_title","_description","layout","_layout","margin","marginObj","_margin","rulesArr","HTMLStringViewer","HTMLStringEditor","HTMLBooleanViewer","HTMLBooleanEditor","HTMLChoiceViewer","HTMLChoiceEditor","HTMLCoordinateViewer","HTMLCoordinateEditor","HTMLDateViewer","HTMLDateEditor","HTMLEntityViewer","HTMLEntityEditor","HTMLImageViewer","HTMLImageEditor","HTMLLinkViewer","HTMLNumberViewer","HTMLRangeViewer","HTMLRangeEditor","GoogleMapEditor","GoogleMapViewer","HTMLMarkupEditor","S2EntityEditor","initialiseDataRenderers","RenderingMap","registerViewerForTypes","registerEditorForTypes","universalEditor","universalViewer","addPlugins","createRenderer","createDataRenderer","registerEditorForFrameType","show_types","renderFrame","renderValue","wrapShortenedText","apply","utils","encode","params","paramsSerializer","serializedParams","toISOString","hashmarkIndex","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","adapter","defaults","process","transformRequest","transformResponse","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","validateStatus","common","settle","buildURL","parseHeaders","isURLSameOrigin","createError","Promise","resolve","reject","requestData","requestHeaders","request","auth","username","password","Authorization","btoa","onreadystatechange","readyState","responseURL","responseHeaders","getAllResponseHeaders","responseType","statusText","onabort","onerror","ontimeout","cookies","xsrfValue","withCredentials","read","toLowerCase","setRequestHeader","onDownloadProgress","onUploadProgress","upload","cancelToken","promise","abort","enhanceError","message","code","config1","config2","Cancel","CONST","connectionConfig","connection","setClientKey","getClientKey","serverURL","curl","addConnection","capabilities","capabilitiesKeys","pred","auths","actions","actionsArr","j","nrec","serverConnected","capabilitiesPermit","dbid","connectionMode","client_checks_capabilities","rec","getServerRecord","getDBRecord","srvr","connectionObj","okeys","oid","dbCapabilityID","getServerDBRecords","dbrecs","removeDB","dbidCap","newParams","docid","setServer","setDB","setDocument","connected_mode","include_key","includeKey","schemaURL","dbURL","queryURL","frameURL","docURL","platformEndpoint","baseURL","inputStr","parser","parseServerURL","parseDBID","setSchemaURL","parseSchemaURL","parseDocumentURL","setQueryURL","parseQueryURL","setClassFrameURL","parseClassFrameURL","setContext","validPrefixedURL","expandPrefixed","validIDString","stripOptionalPath","bit","FramePattern","pattern","setPattern","frame_type","children","depth","checkFrame","rtype","getRendererType","illegalRuleType","checkFrameType","checkLabel","checkSubject","checkSubjectClass","checkProperty","checkDepth","checkRange","checkValue","checkParent","checkChildren","checkIndex","checkStatus","rsubj","IDsMatch","found","properties","numberMatch","propertyIDsMatch","valuesMatch","rangeIDsMatch","rcls","classIDsMatch","ftype","stringMatch","compareIDs","vala","valb","RegExp","isProperty","isData","renderer_type","FramePatternMatcher","FrameRule","testRules","onmatch","matched_rules","patternMatchesFrame","unpack","arr","nonstring","unpackFeatures","feats","extensions","fstr","fid","frameType","kids","headerStyle","frametype","hf","applyFeatureProperty","nfeats","nfeat","fkey","hstyle","header_style","set","ch","setResult","choices","getVariableList","next","includeRow","rowToChoice","binding","rownum","choice","getRowID","getLabelFromBinding","getTitleFromBinding","getSelectedFromBinding","rval","getSpecialRenderer","renderSpecial","count","first","prev","DataValue","datavalue","datatype","res","onChangeQuery","canAdvancePage","getLimit","canChangePage","canRetreatPage","getPage","getPageSize","setPage","setPageSize","update","nextPage","firstPage","previousPage","getColumnsToRender","hasColumnOrder","getColumnOrder","hasSelect","getSelectVariables","col","getColumnHeaderContents","colid","hr","nquery","execute","results","nresult","notify","hasDefinedEvent","getDefinedEvent","getRowClick","getCellClick","getRowHover","getCellHover","hasCellClick","hasRowClick","hasCellHover","hasRowHover","getSpecificRender","getRendererForDatatype","dv","nvalue","registeredDataViewers","registeredDataEditors","defaultViewers","defaultEditors","specials","editor","getValidDataViewerList","valids","concat","getValidDataEditorList","nftypes","getEditorForDataFrame","getViewerForDataFrame","record","types","getEditor","nodes","node_ids","calculateVariableTypes","getEdges","bindings","getBindings","rowIncludesEdge","makeEdgesFromRow","getNodes","source_variables","makeNodeFromSource","target_variables","makeNodeFromTarget","adornNode","adornEdge","makeEdgeFromRow","eid","extractFromBinding","lits","includeNode","includeLiteralNode","nid","genBNID","getLiteralOwner","addAdornedNode","addAdornedEdge","createEdgesFromIDs","ndid","ks","kt","nodetype","rad","radius","es","page_size","wqrs","ResultPane","QueryPane","views","container","messages","fireDefaultQueries","qcres","classMetaDataRes","qpres","propertyMetaDataRes","showQuery","editQuery","showHeader","addViews","intro","defaultResultView","showConfig","editConfig","getSection","sName","clearSubMenus","smenus","getResults","sampleQueryDOM","AddEvents","choosen","innerText","getDataOfClass","getDataOfProperty","getQueryMenu","qName","getSubDataMenu","getSchemaSection","section","checkIfDataMenuOpen","isOpen","child","showDataOfTypeEvent","subPar","hasBindings","showPropertyOfTypeEvent","addCheveronIcon","getDataSection","bd","fireDocumentEvent","documentProperties","getEnterDocumentIdDOM","inp","getDocumentSection","getQueryMenuBlock","getSampleQueriesDOM","showQueryConfig","configspan","ic","qicon","ipdom","hideQueryConfig","querySnippet","createInput","showingQuery","resultDOM","addView","vdom","getAddViewControl","getResultPaneHeader","closable","savePaneButton","closePaneButton","collapsePaneButton","submitQuery","updateQuery","updateResult","refreshViews","nrp","empty","clearMessages","getBusyLoader","pd","pbc","pbsa","pbia","showBusy","msgHolder","showError","md","showNoBindings","nor","vd","newView","selector","nv","big","isBigType","getTypeSize","vallab","elements","elt","foptions","getChoiceOptions","inputs","parseValue","lldom","getInputDOMs","lat","long","latdom","longdom","getLatLongDOM","firstcol","delbut","updateValueFromForm","op","lldoms","butspan","addbut","ipdoms","DateHelper","allowbce","date_spacer","time_spacer","datetime_separator","helper","HTMLDateHelper","parseDate","datepart","getDateComponentDOM","timepart","getTimeComponentDOM","hdom","mdom","mlab","sdom","slab","dadom","ydom","getMonthName","ddom","months","part","xsdFromParsed","tdom","opdom","onclick","holder","showValue","getEntityViewHTML","internalLink","controller","getController","getInstanceMeta","getEntityLabel","nspan","il","getVariableValueFromBinding","tit","img","commas","numberWithCommas","delimiter","parseRangeValue","rvals","svals","x","useCommas","tnode","getRangeSymbolDOM","x2","t2node","data1","data2","firstip","secondip","showing_range","but","changeHandler","GoogleMapHelper","mapcontainer","ghelper","initMap","event","addListener","position","latLng","coo","lng","clearMarkers","marker","Marker","markers","path","polyline","getPath","addMarker","getLength","polygon","mapLat","mapLong","zoom","opacity","destroy","clear","translatePolygonToArray","vertices","seenValue","xy","getAt","translateArrayToPolygon","array","jsonified","output","latlong","createPolygon","coords","Polygon","paths","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","setMap","createPolyline","Polyline","getCoordsFromMarkers","mapContainer","center","parseFloat","setPath","trigger","inner","quill","theme","on","root","ctl","getClient","d2ch","TerminusDocumentChooser","SimpleTable","woqltable","ctls","getControlsDOM","tab","getTableDOM","ctrls","paging","getPaging","columns","thead","getTableHeader","tbody","getTableBody","thr","th","getColumnHeader","tr","getHTMLRow","td","getCell","rc","getCellData","isPaged","pdom","pn","getFirst","getPrev","getPageNumber","getNext","chunk","clabel","pval","GraphResultsViewer","SimpleGraph","wgraph","getGraphDOM","gviz","gdom","setData","initDOM","SimpleStream","SimpleChooser","ccdom","ccsel","getEmptyOption","createOptionFromChoice","Datatypes","SimpleFrameViewer","DocumentPane","clsid","loadClass","setClassLoader","cloader","classLoader","queryPane","documentLoader","getQueryPane","pane","ispan","showDocConfig","nc","ndom","hideDocConfig","showingConfig","renderResult","fpt","termframe","evalstr","updateView","docview","tdv","getScope","getDatatypeViewer","isChoice","isDocument","getFeaturesDOM","orient","getFrameDOM","replaceWith","flist","featuresToCSS","renderProperties","renderValues","getFeatureDOM","HTMLObjectViewer","HTMLObjectHeaderViewer","headerViewer","renderedDOM","getObjectBodyDOM","getObjectDOM","getContentOrientation","hasFeatureViewer","featureViewer","redrawHeader","nheader","redrawBody","nbody","addRenderedProperty","renderedprop","goTo","subj","goToName","getObjectIDMarker","sumDOM","controlsDOM","showFeature","facetDOM","getObjectFacetDOM","getObjectLabelDOM","idDOM","getObjectIDDOM","typeDOM","getObjectTypeDOM","getObjectStatusDOM","viewDOM","getViewPropertyDOM","hideDOM","getObjectControlsDOM","getObjectSummaryDOM","addDOM","getAddPropertyDOM","getModeSelectorDOM","getObjectDeleteDOM","cpropDOM","getObjectCloneDOM","rpropDOM","getObjectResetDOM","upropDOM","getObjectUpdateDOM","showDOM","getObjectShowDOM","getObjectHideDOM","getAvailableFacets","currentFacet","setFacet","isNewDocument","required","getClassMeta","cmt","getAddableProperties","getViewableProperties","goToProperty","TerminusUI","ApiExplorer","TerminusDBsdk","TerminusViolations","TerminusQueryViewer","TerminusSchemaViewer","TerminusServersdk","TerminusURLLoader","controls","setOptions","connect","clearBusy","connectToDB","showView","showDocument","schema","showSchemaPage","showQueryPage","explorer","showExplorer","showDBMainPage","showServerMainPage","createDatabase","dbdets","getBadArguments","myserver","dbdoc","generateNewDatabaseDocument","getSchema","updateSchema","refreshDBList","crec","getCrashString","showMessage","deleteDatabase","delrec","lid","dbn","dets","fname","load","getConnectionEndpoint","clearServer","clearDB","TerminusServerViewer","redrawMainPage","showCollaboratePage","showLoadURLPage","TerminusDBViewer","showCreateDBPage","TerminusDBCreator","durl","showDocumentPage","TerminusDocumentViewer","getDocViewerOptions","showCreateDocument","getDocCreatorOptions","loadCreateDocument","mainDOM","deleteDBPermitted","getDeleteDBButton","confirm","showResult","clearMainPage","main","setMessageDOM","setbuttonControls","buttons","setControllerDOM","setExplorerDOM","setPluginsDOM","setViewerDOM","draw","comps","slocation","redrawControls","toggleDashboardWidget","widget","toggleControl","drawControls","loadControls","ncontrol","nd","drawExplorer","exp","ae","sc","TerminusServerController","TerminusDBController","show_controls","pseudoCapability","show_views","busy","bsyDom","showViolations","vios","nvios","cmsg","document_options","schema_options","piman","getClassFrameOptions","viewdoc_options","apiNavConfig","mainNav","navText","defaultSelected","database","subNav","getClassFrames","viewDocument","createDocument","updateDocument","deleteDocument","select","use_fetch","return_full_response","pman","aec","getApiNav","getApiExplorerDom","setSelectedNavMenu","navOnSelect","createNavs","navConfig","ul","navDom","cont","apiCont","getConnectExplorer","getDatabaseExplorer","getSchemaApi","getDocumentApi","getQueryApi","changeSubApiDom","curSubMenu","getDatabaseDom","getShowApiDom","getQueryApiDom","subNavOnSelect","subMenuConfig","createSubNavs","getSignature","getForm","getServerForm","form","fd","inpLabel","cd","inpId","keyLabel","resd","gatherips","curApi","urlPlaceholder","formDoc","urlLabel","inpUrl","docUrlLabel","inpDocUrl","inpKey","docLabel","inpDoc","docUrl","getApiSendButton","getApiForm","enc","schurl","buttonSelf","gtxtar","txtar","dcurl","schemaUrlDom","htmlEditor","getValue","sg","sig","DispatchRequest","URIError","dispatch","dburl","makeDocumentConsistentWithURL","addOptionsToDocument","docurl","qurl","addOptionsToWOQL","cfurl","pdoc","_","addKeyToPayload","dispatchFetch","redirect","referrer","hdrs","credentials","cache","Headers","fetch","ok","axios","btoaImplementation","Buffer","from","delete","catch","post","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","allocUnsafe","TypeError","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","len","copy","fromObject","assertSize","loweredCase","utf8ToBytes","base64ToBytes","slowToString","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","indexSize","arrLength","valLength","String","buf","readUInt16BE","foundIndex","hexWrite","offset","Number","remaining","strLen","substr","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","allocUnsafeSlow","_isBuffer","y","pos","swap16","swap32","swap64","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","dst","g","Function","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","Axios","mergeConfig","createInstance","defaultConfig","instance","instanceConfig","CancelToken","isCancel","promises","spread","default","InterceptorManager","dispatchRequest","interceptors","chain","interceptor","fulfilled","rejected","shift","getUri","handlers","use","eject","transformData","isAbsoluteURL","combineURLs","throwIfCancellationRequested","throwIfRequested","reason","fns","normalizedName","isAxiosError","number","fileName","lineNumber","columnNumber","stack","ignoreDuplicateOf","originURL","msie","userAgent","urlParsingNode","resolveURL","protocol","host","search","hostname","port","pathname","requestURL","expires","secure","cookie","toGMTString","decodeURIComponent","now","relativeURL","executor","resolvePromise","token","parentframe","originalFrames","PropertyFrame","cframe","predicate","DataFrame","ClassFrame","Restriction","loadRestriction","jsonld_context","cf","isValid","hasSchema","frames","domainValue","getPropertyClassFrame","getChosenClassFrame","isLogic","getChosenFrame","addFrame","getAsFrame","ff","getAsFrames","isnew","restrictions","props","ignore_failure","getProperties","filled","missing","nmissing","newb","newid","pf","cloned","getChild","childid","pframe","getProperty","addProperty","createEmpty","createEmptyChoice","clss","getClassChoices","df","addPropertyValue","addValue","removeProperty","removePropertyValue","removeValue","parentObject","sortProperties","nprops","unsorted","standardCompare","hasRestriction","rest","currentnum","propcount","kid","nframe","extract","extracts","updated","childUpdated","hasCardinalityRestriction","deletePropertyValue","gets","cvalues","fs","sortedVals","sortValues","rangeValue","comment","originalValue","nrend","setNew","isValidType","dt","hasCardRestriction","isObjectProperty","isDatatypeProperty","isRestriction","getStdURL","option","lang","getTypeShorthand","contents","normalizer","loadFromObjectFrame","getChosenClassFrames","objframe","chosen","operands","dataframe","cloneDataFrame","other","domcls","operand","cardinality","maxCardinality","minCardinality","nrest","no_compress","compress","getContext","nprop","shorten","nval","last","compareValues","asc_or_desc","Pattern","WOQLQuery","chain_ended","contains_update","paging_transitive_properties","vocab","loadDefaultVocabulary","tripleBuilder","nspaces","spaces","TripleBuilder","when","Query","Update","into","or","queries","not","triple","isa","eq","JSON_or_IRI","delete_triple","S","P","O","delete_quad","G","add_triple","add_quad","as","vari","remote","group_by","gvarlist","groupedvar","groupquery","Q","lower","u","pad","unique","idgen","typecast","vara","varb","re","less","v1","v2","greater","arith","plus","minus","times","divide","div","var1","star","classid","propid","deleteClass","deleteProperty","nodeid","isLiteralType","arr1","arr2","buildAsClauses","clauses","va","vb","ng","sq","nlist","upd","advanceCursor","cleanSubject","cleanPredicate","cleanObject","cleanGraph","cleanClass","last_index","abstract","lastUpdate","Subject","Predicate","Object_or_Literal","Graph","cleanType","asArray","card","addPO","entity","relationship","GraphIRI","Subj","Pred","Obj","concreteDocumentClasses","getDocumentConnections","simpleGraphQuery","loadVocabulary","spl","setVocabulary","getVocabulary","getPagingProperty","setLimit","setPagingProperty","psize","hasStart","getStart","pagenum","pstart","setStart","addStart","npage","nq","defaultContext","DB_IRI","def","scm","pageprop","indent","show_context","fluent","newlining_operators","operator","getWOQLPrelude","chainable","uncleanArguments","inline","lastArg","hasShortcut","getShortcut","argIsSubQuery","myas","lhs","rhs","uncleanArgument","allArgs","unclean","cstr","oval","uncleanObjectArgument","nstr","suff","printLine","ttype","evstr","unit","addEntry","getO","clause","os","od","tb","textdom","objectIsEmpty","darkMode","jsonldCheck","fromTextArea","firstLineNumber","lineNumbers","styleActiveLine","lineWrapping","smartIndent","indentWithTabs","newlineAndIndent","autoCloseBrackets","matchBrackets","afterCursor","extraKeys","foldCode","getCursor","refresh","foldGutter","gutters","Pos","setCodemirrorSize","setSize","defaultCharWidth","setOption","setTimeout","runMode","pages","dbc","dbrec","nm","getControlHTML","q2","result2","docClasses","bdom","getBodyAsDOM","getRulesForListOfDocuments","getRulesForGraphOfDocuments","getDocumentsDOM","getHomeDOM","showHappyBox","delw","getDeleteDatabaseWidget","mydb","insertDocument","dchooser","getCreateDataChooser","page_actions","loadCreateDocumentPage","show_doc_action","getShowDocumentControl","prepend","dp","ddp","g2","del","di","dbdel","styleCreateDocumentChooser","qopts","ropts","pholder","happy","hbox","sets","htit","getNavigationDOM","pp","pop","insertDOM","scd","dcip","nbut","is","preventDefault","keyCode","getDocumentTableConfig","rowClick","annotateValue","ID","Class","Description","getExplanation","explaination","getClassesDOM","TerminusHTMLViewer","qres","nt","lg","unicode","sct","mfd","dht","sci","idip","titip","descip","schem","kip","datip","butfield","cancbut","loadbut","WOQLQueryView","querypane","qp","changeViewType","getResultDOM","getViewConfigIconClass","cvicons","getViewTypeIconDOM","getDefaultViewerIcon","getIconForViewer","changeViewerType","wres","svg","visid","chars","randomString","currentDate","link_elements","node_elements","loadedNodes","focusNodes","links","selected_id","setConfigOptions","initD3","d3DOM","loadNewData","updateGraph","updateSimulation","dqr","updateData","setFocusNodeFromResult","reload","getFocusNode","setFilter","simulation","stop","wake","hibernate","no_animate","nnodes","getNodesAndFringes","snode","nnode","fx","fy","getLinks","scale_factor","setWidth","setHeight","clientWidth","clientHeight","jqid","append","attr","forceSimulation","forceLink","getLinkDistance","forceManyBody","strength","getCharge","forceCollide","getCollisionRadius","forceCenter","drag_drop","drag","restart","zoomed","link_group","classed","node_group","current_transform","transform","follow_node_wrapper","graph_node","nodeSelected","selectAll","exit","node_enter","enter","getRadius","isFringe","getNodeIconUnicode","styleNodeElements","link_enter","styleLinkElements","alpha","each","getNodeColour","getNodeText","getNodeIconWeight","getNodeIconSize","getNodeIconColour","getLineWidth","getEdgeArrow","getEdgeColour","getLinkText","getEdgeDirection","reference","getArrowWidth","getArrowHeight","selected_node","selection_grows","getScaleTransform","scale","min_ratio","new_mol_width","new_mol_height","y_trans","x_trans","transition","duration","scaleToFit","min_x","min_y","max_x","max_y","mol_width","mol_height","width_ratio","height_ratio","recentre","translated","dcx","dcy","text_elements","faclass","getMultiplier","mult","colrad","linkDistance","getNodeIcon","isNeighbourLink","added","upgraded","TerminusViolation","context_msg","vioHeading","getPropertyAsDOM","ldom","ScriptPane","panes","new_pane","new_pane_type","meta","newPaneOptions","defaultResultOptions","getNewQueryPane","qpane","addQueryPane","addScriptPane","addScriptPaneDOM","addNewPaneDOM","addQueryPaneDOM","setNewDocumentPaneDOM","addDocumentPaneDOM","qdom","qhdr","getPaneHeader","paneDOM","getPanesDOM","controlDOM","newPaneButton","panesDOM","npd","nqhdr","getNewPaneHeader","headerDOM","removePane","showPane","hidePane","newScriptButton","newDocButton","executeScript","showOKMessage","confirm_before_update","thv","changeHeaders","setGraphSize","getOWLView","loadSchema","appendRuleViews","appendClassViews","appendPropertyViews","qprops","qclasses","getAllProperties","getAllClasses","defineViewAction","getTabs","getSchemaViews","tview","controldom","pagedom","msgtype","refreshPage","resetControlDOM","getSchemaSaveButtons","getSchemaImportActionButtons","getShowSchemaButton","getClassFrameChooser","getSchemaEditButton","getImportButton","getNewLibaryButton","refreshMainPage","getSchemaViewDOM","getSchemaEditDOM","getSchemaImportDOM","ssb","getCancelButton","getSaveButton","getImportSaveButton","getSchemaButton","getImportPreviewButton","is_import","doImport","schema_edit_dom","schema_edit_dom_name","origurl","newschema","appendSchema","showConfirmPage","s2","nschema","getSchemaNameInputDOM","np","ipval","klab","modes","overwrite","SimpleDocument","DocumentTable","HTMLPropertyViewer","HTMLDataViewer","setRenderers","snippetText","showConfigEditor","cSnippet","actionButton","cObj","submitConfig","cdom","cbtn","cDisplay","displayResults","loadResults","last_result","WOQLQueryViewer","ruleEditor","getAddRuleButton","rbtn","getConfigButton","wqv","queryViewer","WOQLChoice","renderProperty","td2","HTMLPropertyHeaderViewer","propDOM","npropDOM","getPropertyDOM","getPropertyIDMarker","getPropertyBodyDOM","addRenderedValue","renderedval","wrapper","expModeMenu","getPropertyControlsDOM","getPropertyLabelDOM","statDOM","getPropertyStatusDOM","getPropertySummaryDOM","prelude","getPropertyFacetDOM","getViewValueDOM","getPropertyIDDOM","getPropertyRangeDOM","getPropertyCardinalityDOM","getPropertyCommentDOM","getActionControlDOM","settingsDOM","getPropertyDeleteDOM","getAddValueDOM","getPropertyResetDOM","getPropertyUpdateDOM","getPropertyShowDOM","getPropertyHideDOM","getSettingsControlDOM","getViewableValues","goToValue","HTMLDataHeaderViewer","valDOM","nvalDOM","getValueDOM","getValueIDMarker","getValueBodyDOM","facet","getDataValueViewer","getDOM","getSummaryDOM","HTMLTerminusClient","fireInternalLink","getValueFacetDOM","getValueTypeDOM","getValueStatusDOM","getValueControlsDOM","getValueDeleteDOM","getValueCloneDOM","getValueResetDOM","getValueUpdateDOM","getValueShowDOM","getValueHideDOM","Datatables","rsc","getServerLabelDOM","srec","desc","csbut","crbut","getDBListDOM","getServerDetailsDOM","scl","scs","wrapTableLinkCell","tdElement","getNDBListDOM","sec","th1","th2","th3","th4","th5","th6","fullid","td1","td3","td4","td5","td6","CspDatatables","wResViewer","qPage","wrViewer","wQuery","currDTSettings","convertToDatatable","DataTable","searching","lengthMenu","initComplete","oInstance","$","html","columnDefs","targets","createdRow","find","cell","dbInfo","parents","dbId","dtResult","executeQuery","pageInfo","formatResultsForDatatableDisplay","generateNewQueryOnPageChange","qTextDom","queryMode","getCallbackSettings","dtAPIChangeSettings","_iDisplayLength","_iDisplayStart","iDraw","chosenValue","setUp","dtdom","updateCurrDTSettings","getNewDataOnChange","drawnTab","aSettings","getDataFromServer","serverSide","processing","autoWidth","ajax","entries","scrollX","selectDocumentNavBar","url_input","key_input","getLabelDOM","getFormFieldDOM","ip","ltxt","loadbuts","ObjectViewer","getViewer","vi","getAvailableDataViewers","nviewers","getAvailableDataEditors","registerViewerForFrameType","compiled_options","compileOptions","facets","getDefaultFacets","deffacet","getDefaultFacet","hide_disabled_buttons","viewerType","viewerOptions","header_viewer"],"mappings":"kCACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,I,+BCjFrDhC,EAAOD,QAAU,CACZkC,WAAWC,EAAQ,IACNC,uBAAuBD,EAAQ,IAC/BE,iBAAiBF,EAAQ,IACzBG,SAASH,EAAQ,IACjBI,aAAaJ,EAAQ,GACrBK,YAAYL,EAAQ,GACpBM,YAAYN,EAAQ,IACpBO,WAAWP,EAAQ,IACnBQ,KAAKR,EAAQ,M,6BCR/B,IAAIT,EAAO,EAAQ,IACfkB,EAAW,EAAQ,IAMnBC,EAAWjC,OAAOkB,UAAUe,SAQhC,SAASC,EAAQC,GACf,MAA8B,mBAAvBF,EAASxC,KAAK0C,GA2EvB,SAASC,EAASD,GAChB,OAAe,OAARA,GAA+B,iBAARA,EAuChC,SAASE,EAAWF,GAClB,MAA8B,sBAAvBF,EAASxC,KAAK0C,GAwEvB,SAASG,EAAQC,EAAKC,GAEpB,GAAID,QAUJ,GALmB,iBAARA,IAETA,EAAM,CAACA,IAGLL,EAAQK,GAEV,IAAK,IAAIjD,EAAI,EAAGC,EAAIgD,EAAIE,OAAQnD,EAAIC,EAAGD,IACrCkD,EAAG/C,KAAK,KAAM8C,EAAIjD,GAAIA,EAAGiD,QAI3B,IAAK,IAAI1B,KAAO0B,EACVvC,OAAOkB,UAAUC,eAAe1B,KAAK8C,EAAK1B,IAC5C2B,EAAG/C,KAAK,KAAM8C,EAAI1B,GAAMA,EAAK0B,GAoFrClD,EAAOD,QAAU,CACf8C,QAASA,EACTQ,cA9RF,SAAuBP,GACrB,MAA8B,yBAAvBF,EAASxC,KAAK0C,IA8RrBH,SAAUA,EACVW,WAtRF,SAAoBR,GAClB,MAA4B,oBAAbS,UAA8BT,aAAeS,UAsR5DC,kBA7QF,SAA2BV,GAOzB,MAL4B,oBAAhBW,aAAiCA,YAAkB,OACpDA,YAAYC,OAAOZ,GAEnB,GAAUA,EAAU,QAAMA,EAAIa,kBAAkBF,aAyQ3DG,SA9PF,SAAkBd,GAChB,MAAsB,iBAARA,GA8Pde,SArPF,SAAkBf,GAChB,MAAsB,iBAARA,GAqPdC,SAAUA,EACVe,YA7OF,SAAqBhB,GACnB,YAAsB,IAARA,GA6OdiB,OA1NF,SAAgBjB,GACd,MAA8B,kBAAvBF,EAASxC,KAAK0C,IA0NrBkB,OAjNF,SAAgBlB,GACd,MAA8B,kBAAvBF,EAASxC,KAAK0C,IAiNrBmB,OAxMF,SAAgBnB,GACd,MAA8B,kBAAvBF,EAASxC,KAAK0C,IAwMrBE,WAAYA,EACZkB,SAtLF,SAAkBpB,GAChB,OAAOC,EAASD,IAAQE,EAAWF,EAAIqB,OAsLvCC,kBA7KF,SAA2BtB,GACzB,MAAkC,oBAApBuB,iBAAmCvB,aAAeuB,iBA6KhEC,qBAjJF,WACE,OAAyB,oBAAdC,WAAoD,gBAAtBA,UAAUC,SACY,iBAAtBD,UAAUC,SACY,OAAtBD,UAAUC,WAI/B,oBAAXC,QACa,oBAAbC,WA0ITzB,QAASA,EACT0B,MA/EF,SAASA,IACP,IAAIC,EAAS,GACb,SAASC,EAAY/B,EAAKtB,GACG,iBAAhBoD,EAAOpD,IAAoC,iBAARsB,EAC5C8B,EAAOpD,GAAOmD,EAAMC,EAAOpD,GAAMsB,GAEjC8B,EAAOpD,GAAOsB,EAIlB,IAAK,IAAI7C,EAAI,EAAGC,EAAI4E,UAAU1B,OAAQnD,EAAIC,EAAGD,IAC3CgD,EAAQ6B,UAAU7E,GAAI4E,GAExB,OAAOD,GAmEPG,UAxDF,SAASA,IACP,IAAIH,EAAS,GACb,SAASC,EAAY/B,EAAKtB,GACG,iBAAhBoD,EAAOpD,IAAoC,iBAARsB,EAC5C8B,EAAOpD,GAAOuD,EAAUH,EAAOpD,GAAMsB,GAErC8B,EAAOpD,GADiB,iBAARsB,EACFiC,EAAU,GAAIjC,GAEdA,EAIlB,IAAK,IAAI7C,EAAI,EAAGC,EAAI4E,UAAU1B,OAAQnD,EAAIC,EAAGD,IAC3CgD,EAAQ6B,UAAU7E,GAAI4E,GAExB,OAAOD,GA0CPI,OA/BF,SAAgBC,EAAGC,EAAGC,GAQpB,OAPAlC,EAAQiC,GAAG,SAAqBpC,EAAKtB,GAEjCyD,EAAEzD,GADA2D,GAA0B,mBAARrC,EACXrB,EAAKqB,EAAKqC,GAEVrC,KAGNmC,GAwBPG,KAzKF,SAAcC,GACZ,OAAOA,EAAIC,QAAQ,OAAQ,IAAIA,QAAQ,OAAQ,O;;;;;;;GC7JjD,IAAMC,WAAYrD,oBAAQ,IACpBsD,eAAiBtD,oBAAQ,GAE/B,SAASuD,SAASC,GAYd,OAXIjB,OAAOkB,eAEPC,QAAQ,IAAID,eAIZC,QAAQ,IAAIC,cAAc,qBAE9BD,QAAQE,KAAK,MAAMJ,GAAK,GACxBE,QAAQG,OACRC,OAAOJ,QAAQK,aACRD,OAIX,SAASE,qBAAqBC,GAC5B,IAAIC,EAAO,CACXA,QAAe,CACbC,KAAS,gCACTC,MAAS,seAOT1B,OAAS,+EACT2B,KAAS,CAACC,WAAa,MAAOhF,IAAK,WACnCiF,QAAS,CAAEC,MAAO,GAAIC,YAAa,KAErCP,OAAc,CACZC,KAAU,iDACVC,MAAU,qTAKV1B,OAAS,+EACT2B,KAAS,CAACK,aAAe,MAAOC,QAAS,GAAIrF,IAAK,YAClDiF,QAAS,CAAEC,MAAO,GAAIC,YAAa,KAErCP,OAAc,CACVC,KAAQ,wCACRC,MAAQ,wKAGR1B,OAAQ,6CAEZwB,UAAiB,CACfC,KAAS,sCACTC,MAAS,6JAGT1B,OAAS,mGACT6B,QAAS,CAAEK,OAAQ,WAErBV,eAAsB,CACpBC,KAAS,wDACTC,MAAS,sZAMT1B,OAAS,mGACT6B,QAAS,CAAEK,OAAQ,WAErBV,aAAoB,CAClBC,KAAU,iDACVC,MAAU,kRAIV1B,OAAS,mGACT2B,KAAS,CAAC7B,SAAW,OACrB+B,QAAS,CAAEK,OAAQ,SAAUC,SAAU,YAEzCX,eAAsB,CACpBC,KAAS,uDACTC,MAAS,sQAIT1B,OAAS,iFACT2B,KAAS,CAACS,aAAe,MAAOtC,SAAU,OAC1C+B,QAAS,CAAEK,OAAQ,SAAUG,mBAAmB,IAElDb,aAAoB,CAClBC,KAAU,0CACVC,MAAU,6LAGV1B,OAAS,8DACT2B,KAAS,CAACS,aAAe,OACzBP,QAAS,CAAEK,OAAQ,WAErBV,eAAsB,CACpBC,KAAS,uDACTC,MAAS,6RAIT1B,OAAS,mGACT2B,KAAS,CAACS,aAAe,MAAOtC,SAAU,OAC1C+B,QAAS,CAAEK,OAAQ,SAAUC,SAAU,YAEzCX,eAAsB,CACpBC,KAAQ,yCACRC,MAAQ,0LAGR1B,OAAQ,mGACR2B,KAAQ,CAACS,aAAe,QAE1BZ,OAAc,CACZC,KAAM,2CACNC,MAAO,8SAIP1B,OAAQ,+CACR2B,KAAM,CAACW,KAAM,SAEfd,OAAc,CACZC,KAAQ,2CACRC,MAAQ,2TAIR1B,OAAQ,+CACR2B,KAAQ,CAACW,KAAM,SAEjBd,OAAc,CACZC,KAAM,iDACNzB,OAAQ,+CACR2B,KAAM,CAACY,MAAO,MAAOC,KAAM,WAE7BhB,IAAW,CACTC,KAAM,mDACNzB,OAAQ,+CACR2B,KAAM,CAACc,OAAQ,OAAQC,OAAQ,OAAQJ,KAAM,SAE/Cd,cAAqB,CACnBC,KAAM,2CACNzB,OAAQ,+CACR2B,KAAM,CAACY,MAAO,QAEhBf,iBAAwB,CACtBC,KAAM,wDACNzB,OAAQ,+CACR2B,KAAM,CAACY,MAAO,MAAOvF,SAAU,QAEjCwE,uBAA8B,CAC5BC,KAAM,+DACNzB,OAAQ,+CACR2B,KAAM,CAACS,aAAc,MAAOpF,SAAU,QAExCwE,cAAqB,CACnBC,KAAM,2CACNzB,OAAQ,+CACR2B,KAAM,CAACY,MAAO,SAEhB,OAAOf,EAAKD,GAId,SAASoB,aAAaC,GACpB,IAAIC,EAAK/C,SAASgD,cAAc,OAChCD,EAAGE,aAAa,QAAS,wBACzB,IAAIC,EAAIlD,SAASgD,cAAc,MAG/B,OAFAE,EAAEC,UAAYL,EACdC,EAAGK,YAAYF,GACRH,EAGT,SAASM,UAAUP,GACjB,IAAIQ,EAAStD,SAASgD,cAAc,UAIpC,OAHAM,EAAOL,aAAa,QAAS,gBAC7BK,EAAOL,aAAa,QAASH,GAC7BQ,EAAOF,YAAYpD,SAASuD,eAAeT,IACpCQ,EAIT,SAASE,gBAAgBC,EAAMC,EAAOC,GACpC,IAAIC,EAAM5D,SAASgD,cAAc,OACtB,QAARS,EAAgBG,EAAIX,aAAa,QAAS,yCACxCW,EAAIX,aAAa,QAAS,SAC/B,IAAItC,EAAMX,SAASgD,cAAc,UACjCrC,EAAIwC,UAAYO,EAChBE,EAAIR,YAAYzC,GAChB,IAAIkD,EAAM7D,SAASuD,eAAeI,GAElC,OADAC,EAAIR,YAAYS,GACTD,EAIT,SAASE,YAAYC,EAAUC,EAAQC,EAAUC,GAE/C,IAAIC,EAAKnE,SAASgD,cAAc,OAGhCmB,EAAGf,YAAYP,aAAa,WAC5B,IAAIuB,EAAKpE,SAASgD,cAAc,MAChCmB,EAAGf,YAAYgB,GAEf,IAAIC,EAAOC,KAAKC,UAAUN,EAAU,EAAG,GAEnCO,EAAMxE,SAASgD,cAAc,OACjCwB,EAAIvB,aAAa,QAAS,yCAC1BuB,EAAIrB,UAAYkB,EAEPI,mBAAmBP,EAAYM,EAAKL,EAAI,eACzCA,EAAGf,YAAYoB,GAEnBJ,EAAKpE,SAASgD,cAAc,MAKhC,OAJAmB,EAAGf,YAAYgB,GAEfL,EAASX,YAAYe,GAEdJ,EAIT,SAASW,eAAeT,EAAUD,EAAQD,EAAUG,GAGhD,IAAIE,EAAKpE,SAASgD,cAAc,MAChCe,EAASX,YAAYgB,GACjBA,EAAKpE,SAASgD,cAAc,MAChCe,EAASX,YAAYgB,GAGrBL,EAASX,YAAYP,aAAa,gBAE9BuB,EAAKpE,SAASgD,cAAc,MAChCe,EAASX,YAAYgB,GAEpB,IAAIO,EAAkB,GAdoC,uBAiB1D,YAAyBV,EAASW,QAAlC,+CAA2C,iCAAjC9H,EAAiC,KAA5BN,EAA4B,KACzCmI,EAAiBA,EAAiB,GAAH,OAAO7H,EAAP,cAAgBN,GAAU,MAlBD,kFAsB3D,IAAIqI,EAAQ7E,SAASgD,cAAc,OACnC6B,EAAM5B,aAAa,QAAS,8BAC5B,IAAIY,EAAM7D,SAASuD,eAAeoB,GAMlC,OALAE,EAAMzB,YAAYS,GAETY,mBAAmBP,EAAYW,EAAOd,EAAU,iBACjDA,EAASX,YAAYyB,GAEtBZ,EAASa,OACfC,MAAK,SAASd,GACbH,YAAYC,EAAUC,EAAQC,EAAUC,MAM9C,SAASc,qBAAqBC,EAAIC,GAC9B,GAAGD,EAAGE,gBAAgB,cAAc,CACtC,IAAIC,EAAKF,EAAIG,mBACbD,EAAGnC,aAAa,QAAS,iBACzBnC,eAAejD,YAAYyH,eAAeF,IAS5C,SAASG,cAAcN,EAAIpB,EAAK2B,EAAM9I,GAClC,GAAGuI,EAAG,CACF,IAAIQ,EAAWR,EAAGE,gBAAgB,cAClC,IAAKM,EAAW,OAChB,IAAIL,EAAK,IAAIvE,WAAWgD,EAAKnH,EAAM+I,QAG/BL,EAAK,IAAIvE,WAAWgD,EAAKnH,EAAM,IAE1C,IAAIgJ,EAAKN,EAAGO,iBAAiBH,GAC7BJ,EAAGQ,eAAeF,GAQnB,SAASjB,mBAAmBQ,EAAIpB,EAAKgC,EAAKnJ,GACtC,GAAGuI,EAAG,CACF,IAAIQ,EAAWR,EAAGE,gBAAgB,cAClC,IAAKM,EAAW,OAAO,EACvB,IAAIL,EAAK,IAAIvE,WAAWgD,EAAKnH,EAAM+I,QAE9BL,EAAK,IAAIvE,WAAWgD,EAAKnH,EAAM,IACxC,IAAIoJ,EAAKV,EAAGW,cAEZ,OADGF,GAAKA,EAAIzC,YAAY0C,IACjB,EAKX,SAASE,uBAAuBlK,GAC5B,IAAImK,EAAKjG,SAASkG,uBAAuBpK,GACzC,KAAImK,EAAGvH,OAAS,GAChB,IAAI,IAAInD,EAAE,EAAGA,EAAG0K,EAAGvH,OAAS,EAAInD,IAC5B0K,EAAG1K,GAAG4K,UAAUC,OAAOtK,GAI/B,SAASuK,mBAAmB9F,GACxByF,uBAAuB,6BACvBzF,EAAE4F,UAAUG,IAAI,6BAGpB,SAASC,YAAYN,EAAIO,GAErB,IADA,IAAIC,EAAMR,EAAGS,cACLnL,EAAE,EAAGA,EAAEkL,EAAIE,WAAWjI,OAAQnD,IAC/BkL,EAAIE,WAAWpL,GAAG4K,UAAUS,SAASJ,IACpCC,EAAIE,WAAWpL,GAAG4K,UAAUC,OAAOI,GAE3CP,EAAGE,UAAUG,IAAIE,GAIrB,SAASK,eAAeC,EAAMC,GACI,UAA1BA,EAAQC,MAAMC,SACdjB,uBAAuB,iBACvBc,EAAKX,UAAUG,IAAI,mBACnBS,EAAQC,MAAMC,QAAU,SAGxBjB,uBAAuB,mBACvBc,EAAKX,UAAUG,IAAI,iBACnBS,EAAQC,MAAMC,QAAU,SAKhC,SAASC,oBAAoBC,EAAKjD,GAC9B8B,uBAAuB,qBAE1BmB,EAAIhB,UAAUG,IAAI,qBAGnB,SAASc,qBAAqBnB,GAC1BA,EAAGE,UAAUS,SAAS,sBACxBX,EAAGE,UAAUC,OAAO,oBACpBH,EAAGE,UAAUG,IAAI,kBAInB,SAASe,sBAAsBnD,GAC3BA,EAAWe,GAAGqC,YAAY,iBAE5BF,qBADSpH,SAASkG,uBAAuB,oBACjB,IAEtBhC,EAAWe,GAAGqC,YAAY,oBAE5BF,qBADSpH,SAASkG,uBAAuB,uBACjB,IAI1B,SAASqB,iBAAiBtB,GACtBA,EAAGE,UAAUS,SAAS,qBACxBX,EAAGE,UAAUC,OAAO,oBACpBH,EAAGE,UAAUG,IAAI,kBAEPL,EAAGE,UAAUS,SAAS,mBAC1BX,EAAGE,UAAUC,OAAO,iBAC1BH,EAAGE,UAAUG,IAAI,qBAInB,SAASkB,qBAAqBC,GAE1B,OADY,IAAIC,WAAYC,gBAAgBF,EAAW,YAC1CG,WAAWzE,UAG5B,SAAS0E,wBAAwB5C,GAE7BA,EAAGqC,YAAY,iBAEjBQ,aADS9H,SAASkG,uBAAuB,oBACzB,IAEdjB,EAAGqC,YAAY,oBAEjBQ,aADS9H,SAASkG,uBAAuB,uBACzB,IAIlB,SAAS6B,sBACL,IAAIC,EAAQhI,SAASkG,uBAAuB,4BAC5C,GAAG8B,EAAMtJ,OAAO,EACZ,QAAIsJ,EAAM,GAAGxL,QACTwL,EAAM,GAAG/E,aAAa,cAAe,kBACrC+E,EAAM,GAAGhB,MAAMiB,WAAa,WACrB,GAMnB,SAASH,aAAc7B,GACtBA,EAAGE,UAAUC,OAAO,iBACpBH,EAAGE,UAAUG,IAAI,oBAIlB,SAAS4B,0BAA0BC,EAAOC,GACzC,IAAIC,EAEJ,OADOF,IAAOA,EAAQC,EAASD,OACxBA,GACN,IAAK,2BACJE,EAAOvH,eAAe9C,KAAKsK,MAAMF,EAASG,YACpBC,MAAMJ,EAASI,OACfC,kBACvB,MACA,IAAK,mBACJJ,EAAOvH,eAAe9C,KAAKsK,MAAMF,EAASG,YACpBC,MAAMJ,EAASI,OACfE,gBACvB,MACA,IAAK,gBACJL,EAAOvH,eAAe9C,KAAKsK,MAAMF,EAASG,YACpBC,MAAMJ,EAASI,OACfG,gBACvB,MACA,IAAK,qBACJN,EAAOvH,eAAe9C,KAAKsK,MAAMF,EAASG,YACpBC,MAAMJ,EAASI,OACfI,kBACvB,MACM,IAAK,4BACDP,EAAOvH,eAAe9C,KAAKsK,MAAMF,EAASG,YAC7BC,MAAMJ,EAASI,OACfK,mBACjB,MACA,IAAK,wBACDR,EAAOvH,eAAe9C,KAAKsK,MAAMF,EAASG,YAC7BC,MAAMJ,EAASI,OAAOM,IACvBhI,eAAe9C,KAAK+K,KAAK,YAAa,WAAY,YAAa,aAC/DjI,eAAe9C,KAAf,SAA6B,aAC7B8C,eAAe9C,KAAKgL,IAAI,YAAa,gBACrClI,eAAe9C,KAAKiL,MAAMF,KAAK,YAAa,aAAc,UAAW,aACrEjI,eAAe9C,KAAKiL,MAAMF,KAAK,YAAa,eAAgB,YAAa,cACzF,MACA,IAAK,sBACDV,EAAOvH,eAAe9C,KAAKsK,MAAMF,EAASG,YAC7BC,MAAMJ,EAASI,OACfU,mBACjB,MACN,QACCC,QAAQC,IAAI,iBAAmBjB,EAAQ,mCAGzC,OAAOE,EAIR,SAASgB,UAAUvG,GAEf,OADCA,EAAMlC,QAAQ,gBAAgB,IACxBkC,EAIX,SAASwG,iBAAiBC,GACtB,IAAMvL,KAAO8C,eAAe9C,KAExBmK,MAAQoB,EACZ,IACI,IAAIC,KAAOC,KAAKtB,OAEhB,OADAuB,KAAKF,KAAOA,KACLA,KAEX,MAAMG,GACFR,QAAQC,IAAI,gCAAgCO,EAAEzL,aAItD5C,OAAOD,QAAQ,CAACwL,8BACDb,8CACAvB,sCACAc,4BACAP,0CACAN,8BACA7B,0BACAW,gCACAhC,0CACA+F,kCACAC,0CACAK,gDACAxB,sCACA0B,wCACAb,wCACAgB,oDACA7E,oBACAgG,oBACA9C,wBACA+C,oC,qPCngBf,IAAMM,EAAwBpM,EAAQ,GAChCsD,EAAiBtD,EAAQ,GAC3BqM,EAAkB,CAEtBA,iBAAmC,SAASpG,EAAMqG,EAASpG,EAAOqG,EAAUC,GAChE,IAAIJ,EAAf,IACIK,EAAWjK,SAASgD,cAAc,QACtCiH,EAAShH,aAAa,QAAS,6CAA+CQ,EAAO,IAAMqG,GAChF,IAAIF,EAAf,IAiBKtG,EAAStD,SAASgD,cAAc,UA0BrC,OAzBCM,EAAOF,YAAYpD,SAASuD,eAAeG,IACxCsG,GACF1G,EAAOL,aAAa,QAAS,kFAAoFQ,EAAO,IAAMqG,EAAU,aACxIxG,EAAOL,aAAa,QAAS+G,KAG7B1G,EAAOL,aAAa,QAAS,kEAAoEQ,EAAO,IAAMqG,GAC9GxG,EAAO4G,iBAAiB,SAAS,WAChC,GAAqB,QAAlBR,KAAKvG,UAAoB,CAC3B,IAAI6E,EAAQhI,SAASkG,uBAAuB,4BACzC8B,EAAMtJ,OAAO,EACXsJ,EAAM,GAAGxL,MAIRuN,EAASD,IAHb9B,EAAM,GAAG/E,aAAa,cAAe,kBACrC+E,EAAM,GAAGhB,MAAMiB,WAAa,WAIzB8B,EAASD,QAEVC,EAASD,OAIhBG,EAAS7G,YAAYE,GAEf2G,GAGRJ,mBAAqC,SAASrE,GAE7C,IADW,IAAIoE,GACPzE,gBAAgB,gBAAgB,CACvC,IAAI2B,EAAO9G,SAASgD,cAAc,QAIlC,MAHW,YAARwC,EAAoBsB,EAAK7D,aAAa,QAAS,8BAClC,QAARuC,GAAgBsB,EAAK7D,aAAa,QAAS,+BACnD6D,EAAK7D,aAAa,QAAS,iBACpB6D,EAGP,IAAIxD,EAAStD,SAASgD,cAAc,UAGpC,OAFAM,EAAOL,aAAa,QAAS,gBAC7BK,EAAOF,YAAYpD,SAASuD,eAAe,aACpCD,GAITuG,eAAiC,SAASC,GACzC,IAAIhD,EACJ,OAAOgD,GACN,IAAK,SACJhD,EAAO,cACR,MACA,IAAK,MACJA,EAAO,QACR,MACA,IAAK,QACJA,EAAO,QACR,MACA,IAAK,OACJA,EAAO,QACR,MACA,IAAK,OACJA,EAAO,aAGT,OAAOA,GAGR+C,oBAAsC,SAASpG,EAAM1B,EAASoI,EAAUJ,GACvE,IAAIK,EAAMpK,SAASgD,cAAc,UACjCoH,EAAInH,aAAa,QAAS,mDAAqDQ,GAC/E,IAAI,IAAIlI,EAAI,EAAGA,EAAIwG,EAAQrD,OAAQnD,IAAI,CACtC,IAAI0N,EAAMjJ,SAASgD,cAAc,UACjC,GAAwB,UAArB,EAAOjB,EAAQxG,IAAe,CAChC0N,EAAIzM,MAAQuF,EAAQxG,GAAGiB,MACvB,IAAIkH,EAAS3B,EAAQxG,GAAGmI,MAAS1D,SAASuD,eAAexB,EAAQxG,GAAGmI,OAAS1D,SAASuD,eAAezC,EAAejD,YAAYwM,aAAatI,EAAQxG,GAAGiB,QACxJyM,EAAI7F,YAAYM,QAGhBuF,EAAIzM,MAAQuF,EAAQxG,GACpBmI,EAAQ5C,EAAejD,YAAYwM,aAAapB,EAAIzM,OACpDyM,EAAI7F,YAAYpD,SAASuD,eAAeG,IAEtCyG,GAAYlB,EAAIzM,OAClByM,EAAIhG,aAAa,WAAY,YAE9BmH,EAAIhH,YAAY6F,GAKjB,OAHAmB,EAAIF,iBAAiB,UAAU,WAC9BH,EAASL,KAAKlN,UAER4N,GAGRP,mBAAqC,SAASpI,EAAO6I,GACpD,IAAIC,EAAWvK,SAASgD,cAAc,QAEtC,GADAuH,EAAStH,aAAa,QAAS,0BAA0BxB,EAAM,SAC3C,QAAjB6I,EAAS5N,KAAe,CAC1B,IAAIqN,EAAW,WAAYO,EAASE,QAAQ,SAC5CD,EAASnH,YAAYyG,EAAgBY,iBAAiB,0BAA0BhJ,EAAM,QAAS,OAAQ,SAAUsI,QAE7G,IAAGO,EAASI,QAChB,OAAO,EAGHX,EAAW,WAAYO,EAASK,UACpCJ,EAASnH,YAAYyG,EAAgBY,iBAAiBhJ,EAAO,SAAU,SAAUsI,IAElF,OAAOQ,GAGRV,SAA2B,SAASvM,EAAGD,EAAG9B,GACzC,IAAIqP,EAAM7K,OAAO8K,SAASC,KAC1B,GAAGF,EAAI,CACN,IACIG,EADQH,EAAII,MAAM,KACN,GACZC,EAAKnK,EAAejD,YAAYqN,aAAa5N,GAC1C2N,IAAIA,EAAK3N,IACZ6N,EAAOF,EAAGD,MAAM,MACZtM,OAAS,IAAGuM,EAAKE,EAAK,IAC9B,IAAIC,EAASH,EACb,GAAG5N,EAAE,CACJ,IAEI8N,EAFAE,EAAOvK,EAAejD,YAAYqN,aAAa7N,GAC/CgO,IAAOA,EAAOhO,IACd8N,EAAOE,EAAKL,MAAM,MACdtM,OAAS,IAAG2M,EAAOF,EAAK,IAChCC,GAAU,IAAMC,EACb9P,IACF6P,GAAU,IAAM7P,GAGlBwE,OAAO8K,SAAWE,EAAM,IAAMK,IAIhCvB,kBAAoC,SAASyB,EAAMxI,EAAMyI,EAAeC,GAKvE,GAJGD,GAAkBzI,EAAKpE,OAAS6M,IAClCD,EAAKrI,aAAa,QAASH,GAC3BA,EAAOA,EAAK2I,UAAU,EAAGF,GAAiB,OAExCzI,GAAQA,EAAKpE,OAAS8M,EAAc,CAGtC,IAFA,IAAME,EAAe,GACfC,EAAQ7I,EAAKkI,MAAM,KACjBzP,EAAI,EAAGA,EAAIoQ,EAAMjN,OAAQnD,IAAI,CACpC,IAAIqQ,EAAOD,EAAMpQ,GACjB,GAAGqQ,EAAKlN,OAAS8M,EAAc,CAC9BF,EAAKrI,aAAa,QAASH,GAC3B,IAAI+I,EAASD,EAAKH,UAAU,EAAGD,GAAiB,MAChDE,EAAaE,GAAQC,GAGvB,IAAI,IAAIC,KAAKJ,EACZ5I,EAAOA,EAAKlC,QAAQkL,EAAGJ,EAAaI,IAGtCR,EAAKlI,YAAYpD,SAASuD,eAAeT,KAG1C+G,4BAA8C,SAASkC,EAAShP,GAC/D,IAAI,IAAID,KAAOC,EAAK,CAEnB,GADWD,EAAI2O,UAAU3O,EAAIkP,YAAY,KAAK,IACnCD,EAAQ,CAClB,IAAMvN,EAAMzB,EAAKD,GACjB,MAAiB,UAAd,EAAO0B,IAAmBA,EAAI,UAAkBA,EAAI,UAChDA,GAGT,OAAO,GAIRqL,cAAgC,SAASpG,EAAMC,EAAOlH,EAAOyP,EAAMC,GAGlE,IAAIC,EAAUnM,SAASgD,cAAc,QAMrC,GALAmJ,EAAQlJ,aAAa,QAAS,uCAA6CQ,GAExEwI,GACFE,EAAQlJ,aAAa,QAASgJ,GAE5BvI,EAAM,CACR,IAAI0I,EAAQpM,SAASgD,cAAc,QACnCoJ,EAAMnJ,aAAa,QAAS,yCAA+CQ,EAAO,UAClF2I,EAAMhJ,YAAYpD,SAASuD,eAAeG,IAC1CyI,EAAQ/I,YAAYgJ,GAErB,IAAIC,EAAUrM,SAASgD,cAAc,QACrCqJ,EAAQpJ,aAAa,QAAS,0CAAgDQ,EAAO,WACrF4I,EAAQjJ,YAAYpD,SAASuD,eAAe,MAC5C4I,EAAQ/I,YAAYiJ,GACpB,IAAIC,EAAOtM,SAASgD,cAAc,QAElC,GADAsJ,EAAKrJ,aAAa,QAAS,yCAA+CQ,EAAO,UAC9EyI,EACFA,EAAM1P,MAAQA,EACd8P,EAAKlJ,YAAY8I,QAEb,GAAG1P,EAAO,CACd,IAAIyO,EAAKnK,EAAejD,YAAYqN,aAAa1O,GAC3C,GAAGyO,EAAG,CACL,IAAIE,EAAOF,EAAGD,MAAM,KACjBC,EAAKE,EAAK,GAChBmB,EAAKrJ,aAAa,QAASzG,GAC9B8P,EAAKlJ,YAAYpD,SAASuD,eAAe0H,SAGzCqB,EAAKlJ,YAAYpD,SAASuD,eAAe/G,IAI3C,OADA2P,EAAQ/I,YAAYkJ,GACbH,GAORtC,YAA8B,SAAS0C,EAAOC,EAAOC,EAAaC,EAAWC,GAC5E,GAAGH,EAAMI,gBAAgBC,OAAQ,OAAO,EACxC,IAAIC,EAAWjD,EAAgBkD,kBAAkBR,EAAOC,EAAOC,GAC/D,QAA0C,IAAhCD,EAAMI,gBAAgBI,QAC/B,GAA0C,mBAAhCR,EAAMI,gBAAgBI,OAAqB,CACpD,IAAIjK,EAAKyJ,EAAMI,gBAAgBI,OAAOR,EAAMI,gBAAgBK,gBAAiBP,GAC7EI,EAAS1J,YAAYL,QAGlB,CACAA,EAAK8G,EAAgBqD,kBAAkBX,EAAOC,EAAOC,EAAaC,GACnEA,GAAW3J,EAAGK,YAAYsJ,GAC7BI,EAAS1J,YAAYL,GAEtB,OAAO+J,EAAS1J,YAAYyG,EAAgBsD,gBAAgBZ,EAAOC,EAAOC,EAAaE,KAGxF9C,kBAAoC,SAAS0C,EAAOC,EAAOC,GAC1D,IAAIW,EAAO,YAAcb,EAAQ,SACjC,GAAkB,QAAfE,EACF,IAAIY,EAAKrN,SAASgD,cAAc,YAG5BqK,EAAKrN,SAASgD,cAAc,QAEjC,IAAIsK,EAAMF,EAAO,IAAMA,EAAO,IAAMX,GACzB,UAATF,GAAqBC,EAAMe,OAAS,GAAK,wBACxC,IAAMH,EAAO,IAAMZ,EAAMI,gBAAgBlQ,KAE5C,GADA2Q,EAAGpK,aAAa,QAASqK,GACb,UAATf,EAAkB,CACpBc,EAAGpK,aAAa,aAAcuJ,EAAMgB,gBACpCH,EAAGpK,aAAa,UAAWuJ,EAAMiB,WACjC,IAAIC,EAAMhE,KAAKiE,KAAKnB,EAAMiB,gBAEtB,GAAY,YAATlB,EAAoB,CAC3Bc,EAAGpK,aAAa,gBAAiBuJ,EAAMtP,YACnCwQ,EAAMhE,KAAKiE,KAAKnB,EAAMiB,UAAUjB,EAAMtP,iBAEtC,GAAY,QAATqP,EAAgB,CACvBc,EAAGpK,aAAa,aAAcuJ,EAAMpQ,OAChCsR,EAAMhE,KAAKiE,KAAKnB,EAAMiB,UAAYjB,EAAMtP,WAAasP,EAAMoB,OAEhE,IAAIC,EAAM7N,SAASgD,cAAc,KAIjC,OAHA6K,EAAI5K,aAAa,QAAS,YAAcsJ,EAAQ,aAChDsB,EAAI5K,aAAa,OAAQyK,GACtBL,EAAGjK,YAAYyK,GACXR,GAGRxD,kBAAoC,SAAS0C,EAAOC,EAAOC,EAAaE,GACvE,IAAIW,EAAM,YAAcf,EAAQ,UAChC,GAAkB,QAAfE,EACF,IAAIqB,EAAS9N,SAASgD,cAAc,YAGhC8K,EAAS9N,SAASgD,cAAc,QAIrC,OAFA8K,EAAO7K,aAAa,QAASqK,EAAM,IAAMA,EAAM,IAAMb,GAC/CE,GAAUmB,EAAO1K,YAAYuJ,GAC5BmB,GAGRjE,gBAAkC,SAAS0C,EAAOC,EAAOC,EAAaE,GACrE,IAAIW,EAAM,YAAcf,EAAQ,cAChC,GAAkB,QAAfE,EACF,IAAIsB,EAAU/N,SAASgD,cAAc,YAGjC+K,EAAU/N,SAASgD,cAAc,QAInC,OAFA+K,EAAQ9K,aAAa,QAASqK,EAAM,IAAMA,EAAM,IAAMb,GACnDE,GAAUoB,EAAQ3K,YAAYuJ,GAC1BoB,GAGXlE,KAAuB,SAASvM,GAC/B,IAAc/B,EAAVoS,EAAO,EACX,GAAiB,IAAbrQ,EAAEoB,OAAc,OAAOiP,EAC3B,IAAKpS,EAAI,EAAGA,EAAI+B,EAAEoB,OAAQnD,IAEtBoS,GAAUA,GAAQ,GAAKA,EADfrQ,EAAE0Q,WAAWzS,GAErBoS,GAAQ,EAEZ,OAAOA,GAGR9D,cAAgC,SAASoE,EAAS1B,EAAOC,GACxD,GAAc,MAAXyB,EAAgB,CAClB,GAAY,UAAT1B,EAAmB,IAAInO,EAAMoO,EAAMiB,eACjC,GAAY,YAATlB,EAAyBnO,EAAMoO,EAAMtP,WAC7C,GAAU,MAAPkB,EAAiBA,EAAM,eAC1B,OAAOyL,EAAgBqE,cAAc,YAAa,KAAM9P,EAAK,4CAEzD,GAAc,WAAX6P,EAAqB,CAC5B,IAAIE,EAAM3B,EAAM4B,aAChB,OAAOvE,EAAgBqE,cAAc3B,EAAQ,YAAY,EAAO4B,EAAG,KAAOA,EAAIE,QAE1E,GAAc,SAAXJ,EAEP,SADIK,EAAM9B,EAAM+B,aAER1E,EAAgBqE,cAAc3B,EAAQ,SAAS,EAAO+B,GAI1D,GAAc,UAAXL,EAAoB,CACvBE,EAAM3B,EAAM4B,aAChB,OAAOvE,EAAgBqE,cAAc3B,EAAQ,WAAW4B,EAAIE,QAAQ,EAAOF,EAAIE,OAAQF,EAAIE,QAEvF,GAAc,WAAXJ,EAAqB,CAC5B,IAAIK,EAAM9B,EAAMgC,aAChB,OAAO3E,EAAgBqE,cAAc,oBAAoB,EAAOI,GAE5D,GAAc,QAAXL,EAAkB,CACzB,GAAY,YAAT1B,GAAqD,QAA9BC,EAAMI,gBAAgBlQ,MAAkB8P,EAAMe,QAAUf,EAAMe,OAAOkB,iBAAmBjC,EAAM9B,QACvH,OAAOhB,KAAKgF,2BAA2BlC,GAExC,GAAY,UAATD,EAAuB+B,EAAM9B,EAAMgB,oBACjC,GAAY,YAATjB,EAAyB+B,EAAM9B,EAAMmC,aACxC,GAAY,QAATpC,EAAqB+B,EAAM9B,EAAMoC,UACzC,QAAGN,GACKzE,EAAgBqE,cAAc3B,EAAQ,QAAS,OAAQ+B,GAI3D,GAAc,UAAXL,EAAoB,CAC3B,IAAIlE,EAAW,WAAWyC,EAAK,UAC3BxC,GAAW,EACf,IAAIwC,EAAMqC,kBAAkB,SAAUtC,GAAO,CAC5C,IAAIC,EAAMI,gBAAgBkC,sBACzB,OAAO,EAER9E,EAAW,kDAEZ,OAAOH,EAAgBY,iBAAiB8B,EAAO,SAAU,SAAUxC,EAAUC,GAEzE,GAAc,SAAXiE,EAAmB,CACtBlE,EAAW,WAAWyC,EAAMuC,SAC5B/E,GAAW,EACf,IAAIwC,EAAMqC,kBAAkB,QAAStC,GAAO,CAC3C,IAAIC,EAAMI,gBAAgBkC,sBACzB,OAAO,EAER9E,EAAW,iDAEZ,OAAOH,EAAgBY,iBAAiB8B,EAAO,QAAS,QAASxC,EAAUC,GAEvE,GAAc,SAAXiE,EAAmB,CACtBlE,EAAW,WAAWyC,EAAMwC,SAC5BhF,GAAW,EACf,IAAIwC,EAAMyC,YAAY,CACrB,IAAIzC,EAAMI,gBAAgBkC,sBACzB,OAAO,EAER9E,EAAW,4CAEZ,OAAOH,EAAgBY,iBAAiB8B,EAAO,QAAS,QAASxC,EAAUC,GAEvE,GAAc,QAAXiE,EAAkB,CACrBlE,EAAW,WAAWyC,EAAM0C,QAChC,OAAOrF,EAAgBY,iBAAiB8B,EAAO,OAAQ,OAAQxC,GAE3D,GAAc,QAAXkE,EAAkB,CACrBlE,EAAW,WAAWyC,EAAM2C,QAChC,OAAOtF,EAAgBY,iBAAiB8B,EAAO,OAAQ,OAAQxC,GAE3D,GAAc,UAAXkE,EAAoB,CACvBlE,EAAW,WAAWyC,EAAM4C,QAChC,IAAI5C,EAAMyC,cAAgBzC,EAAMI,gBAAgBkC,sBAC/C,OAAO,EAEJ9E,GAAWwC,EAAMyC,aAAsB,4CAC3C,OAAOpF,EAAgBY,iBAAiB8B,EAAO,OAAQ,OAAQxC,EAAUC,GAErE,MAAc,UAAXiE,EACAvE,KAAK2F,qBAAqB9C,EAAOC,GAEtB,QAAXyB,EACAvE,KAAK4F,gBAAgB/C,EAAOC,GAEjB,eAAXyB,EACAvE,KAAK6F,kBAAkBhD,EAAOC,GAEnB,OAAXyB,EACAvE,KAAK8F,UAAUjD,EAAOC,QADzB,GAKN3C,qBAAuC,SAAS0C,EAAOC,GACtD,IAAIiD,EAAUjD,EAAMkD,SAASC,UAAUC,sBAC/BlG,KAAKgG,SAASC,UAAUE,YAAYpT,GAE5C,GAAGgT,GAAWA,EAAQ/Q,OAAO,CAC5B,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,YAAcsJ,EAAQ,WACrD,IAKIpC,EAAWqC,EAAMuD,gBACjB3F,EAAMP,EAAgBmG,oBAAoBzD,EAAQ,UAAWkD,EAAStF,GAN3D,SAAS8F,GACpBA,GACFzD,EAAM0D,UAAUD,MAMlB,OADAH,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAKRjG,gBAAkC,SAAS0C,EAAOC,GACjD,GAAY,UAATD,EACF,IAAI4D,EAAY3D,EAAM4D,wBAMvB,GAAGD,GAAaA,EAAUzR,OAAO,CAChC,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,YAAYsJ,EAAQ,eACnD4D,EAAUE,QAAQ,CAAE7T,MAAO,GAAIkH,MAAO,QAAU6I,IAChD,IAKInC,EAAMP,EAAgBmG,oBAAoBzD,EAAQ,cAAe4D,EAAW,IALjE,SAAS7J,GACpBA,GACFkG,EAAM8D,UAAUhK,MAKlB,OADAwJ,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAIRjG,kBAAoC,SAAS0C,EAAOC,GACnD,IAAI+D,EAAc/D,EAAMgE,iBACxB,GAAGD,EAAYE,KAAOF,EAAYG,IACjC,GAAGH,EAAYE,KAAOF,EAAYG,IACjC,IAAIpC,EAAMiC,EAAYE,IAClBxE,EAAO,gBAAkBsE,EAAYE,QAErC,CACAnC,EAAMiC,EAAYE,IAAM,IAAMF,EAAYG,IAC1CzE,EAAO,wBAA0BsE,EAAYE,IACjDxE,GAAQ,0BAA4BsE,EAAYG,SAG7C,GAAGH,EAAYE,IACfnC,EAAM,KAAKiC,EAAYE,IAAI,GAC3BxE,EAAO,wBAA0BsE,EAAYE,QAE7C,KAAGF,EAAYG,IAKnB,OAAO,EAJHpC,EAAM,KAAKiC,EAAYG,IAAI,GAC3BzE,EAAO,wBAA0BsE,EAAYG,IAKlD,OAAO7G,EAAgBqE,cAAc,uBAAwB,cAAeI,EAAKrC,IAGlFpC,2BAA6C,SAAS2C,GACrD,IAAImE,EAAKnE,EAAMe,OAAOqD,2BACtB,GAAGD,GAAMA,EAAGjS,OAAO,CAClB,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,kCAC/B,IAAI4N,EAAU7Q,SAASgD,cAAc,QACrC6N,EAAQ5N,aAAa,QAAS,kCAC9B4N,EAAQzN,YAAYpD,SAASuD,eAAe,SAC5CuM,EAAS1M,YAAYyN,GACrB,IAKIzG,EAAMP,EAAgBmG,oBAAoB,eAAgBW,EAAInE,EAAMgB,gBALzD,SAASsD,GACpBA,GACFtE,EAAMuE,YAAYD,MAKpB,OADAhB,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAGRjG,UAA4B,SAAS0C,EAAOC,GAC3C,GAAY,YAATD,EAAoB,CACtB,GAAGC,EAAMiC,gBAAgB,CACxB,IAAIkC,EAAKnE,EAAMoE,2BACf,GAAGD,GAAMA,EAAGjS,OAAO,EACdoR,EAAW9P,SAASgD,cAAc,SAC7BC,aAAa,QAAS,+BAC/B0N,EAAGN,QAAQ,CAAE7T,MAAO,GAAIkH,MAAO,aAC/B,IAAIqG,EAAW,SAAS+G,GACpBA,GACFtE,EAAMwE,SAASF,IAGb1G,EAAMP,EAAgBmG,oBAAoB,eAAgBW,EAAI,GAAI5G,GAEtE,OADA+F,EAAS1M,YAAYgH,GACd0F,GAGT,GAAGtD,EAAMqC,kBAAkB,QAAUrC,EAAMI,gBAAgBkC,sBAAsB,CAC5E/E,EAAW,WAAWyC,EAAMlG,IAAI,SAApC,IACI0D,GAAYwC,EAAMqC,kBAAkB,QAAiB,+BACzD,OAAOhF,EAAgBY,iBAAiB8B,EAAQ,aAAc,MAAO,MAAOxC,EAAUC,QAGnF,CACJ,IAAIiH,EAAWzE,EAAM0E,yBACrB,GAAGD,GAAYA,EAASvS,OAAO,CAC9B,IAAIoR,KAAW9P,SAASgD,cAAc,SAC7BC,aAAa,QAAS,YAAcsJ,EAAQ,cACrD0E,EAASZ,QAAQ,CAAE7T,MAAO,GAAIkH,MAAO,WAAa6I,IAC9CxC,EAAW,SAASzD,GACpBA,IACU,UAATiG,EAAmBC,EAAM2E,eAAe7K,GAC1B,YAATiG,GAAqBC,EAAM4E,YAAY9K,KAGjD,GAAGkG,EAAMqC,kBAAkB,QAAUrC,EAAMI,gBAAgBkC,sBAAsB,CAC5E9E,GAAYwC,EAAMqC,kBAAkB,QAAiB,0CACrDzE,EAAMP,EAAgBmG,oBAAoBzD,EAAQ,aAAc0E,EAAU,GAAIlH,EAAUC,GAE5F,OADA8F,EAAS1M,YAAYgH,GACd0F,IAIV,OAAO,IAGRxU,EAAOD,QAAQwO,G,cCvjBf,MAAMhM,EAAc,CACnBwT,cAAe,CACdC,IAAK,8CACLC,KAAM,wCACNC,IAAK,oCACLC,IAAK,iCACLC,IAAK,oCACLC,IAAK,oCACLC,IAAK,oCACLC,EAAG,uCACHnC,SAAU,yCACVoC,IAAK,oCACLC,KAAM,+CAIRlU,aAA2B,SAAUmU,EAAQpH,GAC5ClB,KAAK2H,cAAcW,GAAUpH,GAI9B/M,eAA6B,SAAUoU,GACtC,GAAIA,EACH,KAAOA,EAAKC,iBACXD,EAAKE,YAAYF,EAAKtL,WAAW,KAKpC9I,cAA4B,SAAUoU,GACjCA,GACFA,EAAKG,WAAWD,YAAYF,IAI/BpU,MAAoB,SAAUW,GAE7B,IAAKA,EAAK,OAAO,EAGjB,GAAIA,EAAIE,OAAS,EAAG,OAAO,EAC3B,GAAmB,IAAfF,EAAIE,OAAc,OAAO,EAK7B,GAAmB,iBAARF,EACV,IAAK,MAAM1B,KAAOb,OAAOoW,KAAK7T,GAC7B,GAAIvC,OAAOkB,UAAUC,eAAe1B,KAAK8C,EAAK1B,GAAM,OAAO,EAG7D,OAAO,GAGRe,QAAsB,WAIrB,MADc,KAFJyU,KAAKC,SAASrU,SAAS,IAAIuN,UAAU,MACrC,IAAI+G,MACUC,aAIzB5U,aAA2B,SAAU6U,GAEpC,GADoB,iBAATA,GAAqBA,EAAKhU,SAAQgU,EAAOA,EAAK,IACrDA,GAAwB,iBAATA,EAClB,IAAK,MAAMC,KAAQ1W,OAAOoW,KAAK3I,KAAK2H,eAAgB,CACnD,MAAMuB,EAAOlJ,KAAK2H,cAAcsB,GAChC,GAAID,EAAKjH,UAAU,EAAGmH,EAAKlU,UAAYkU,EAAM,CAE5C,MADY,GAAED,KAAQD,EAAKjH,UAAUmH,EAAKlU,WAK7C,OAAO,GAGRb,WAAyB,SAAUgV,EAAKC,GACvC,GAAID,IAAQC,EAAK,OAAO,EACxB,GAAIpJ,KAAKqJ,UAAUF,KAASC,EAAK,OAAO,EACxC,GAAIpJ,KAAKqJ,UAAUF,KAASnJ,KAAKqJ,UAAUD,GAAM,OAAO,EACxD,MAAME,EAAMtJ,KAAKwB,aAAa2H,GACxBI,EAAMvJ,KAAKwB,aAAa4H,GAC9B,SAAIE,GAASA,IAAQF,GAASE,IAAQC,OAClCA,GAAOA,IAAQJ,IAKpBhV,QAAsB,SAAU+M,EAAKsI,GACpC,IAAK,MAAMP,KAAQO,EAClB,GAAIA,EAASP,IAAS/H,EAAIa,UAAU,EAAGyH,EAASP,GAAMjU,QACrD,MAAS,GAAEiU,KAAQ/H,EAAIa,UAAUyH,EAASP,GAAMjU,UAGlD,OAAOkM,GAGR/M,UAAwB,SAAU+M,GACjC,GAAIlB,KAAKyJ,SAASvI,GAAM,OAAOA,EAC/B,IAAKA,EAAK,OAAOA,EACjB,MAAMO,EAAOP,EAAII,MAAM,KACvB,OAAIG,EAAK,IACJzB,KAAK2H,cAAclG,EAAK,IACpBzB,KAAK2H,cAAclG,EAAK,IAAMA,EAAK,GAGrCP,GAIR/M,SAAuB,SAAU8C,GAChC,SAAIA,GAAgC,YAAxBA,EAAI8K,UAAU,EAAG,IAA4C,aAAxB9K,EAAI8K,UAAU,EAAG,KAKnE5N,aAA2B,SAAU+M,GACpC,IAAIwI,EAAO1J,KAAK2J,YAAYzI,GAM5B,OALAwI,EAAQA,GAAQxI,GACPoB,YAAY,KAAOoH,EAAK1U,OAAS,IACzC0U,EAAOA,EAAK3H,UAAU2H,EAAKpH,YAAY,KAAO,KAE/CoH,EAAOA,EAAKxS,QAAQ,IAAK,MACb0S,OAAO,GAAGC,cAAgBH,EAAKI,MAAM,IAGlD3V,YAA0B,SAAU+M,GAEnC,IAAIO,GADJP,EAAsB,iBAARA,EAAoB7K,OAAO8K,SAASC,KAAOF,GAC1CI,MAAM,KAMrB,GALIG,EAAKzM,QAAU,IACbgL,KAAKyJ,SAASvI,KAClBO,EAAOP,EAAII,MAAM,OAGfG,EAAKzM,QAAU,EAAG,CACrB,MAAO,CAAE+U,GAAUtI,EAEnB,GAAIsI,EAAQ,CACX,MAAOC,GAAWD,EAAOzI,MAAM,KAC/BJ,EAAM8I,GAGR,OAAO9I,GAGR/M,aAA2B,SAAU8V,GACpC,MAAc,4CAAVA,GACU,eAAVA,GAIL9V,WAAyB,SAAU+M,GAClCA,OAAsB,IAARA,EAAuB7K,OAAO8K,SAASC,KAAOF,EAC5D,MAAOgJ,GAAYhJ,EAAII,MAAM,MACtB6I,GAAUD,EAAS5I,MAAM,KAEhC,OADAJ,EAAMiJ,EAAOpI,UAAUb,EAAIoB,YAAY,KAAO,IAK/CnO,UAAwB,SAAU8U,EAAMmB,EAAKlJ,GAC5C,GAAIlB,KAAK2H,cAAcsB,GAAO,CAC7B,IAAI/H,EAGH,OAAOlB,KAAK2H,cAAcsB,GAAQmB,EAFlC,GAAIlJ,IAAQlB,KAAK2H,cAAcsB,GAAQmB,EAAK,OAAOlJ,EAKrD,OAAO,GAGR/M,uBAAqC,SAAU2H,GAC9C,MAAa,SAATA,GAA4B,eAATA,GAAkC,UAATA,GAMjD3H,qBAAmC,SAAU2H,EAAM/B,GAClD,OAAOiG,KAAKqK,uBAAuBvO,EAAM/B,IAG1C5F,kBAAgC,SAAU2H,EAAM/B,GAC/C,OAAOiG,KAAKqK,uBAAuBvO,EAAM/B,IAG1C5F,iBAA+B,SAAUrB,GACxC,GAAIA,GAAS,KAAQA,IAAU,IAAM,CACjC,MAAMwX,EAAQxX,EAAM0B,WAAW8M,MAAM,KACjCxO,IAAU,MAAMwX,EAAM,GAAKA,EAAM,GAAGvI,UAAU,IAClDuI,EAAM,GAAKA,EAAM,GAAGpT,QAAQ,wBAAyB,KACjCpE,EAAhBA,IAAU,IAAe,IAAGwX,EAAMC,KAAK,OAC9BD,EAAMC,KAAK,KAE5B,OAAOzX,GAGRqB,UAAwB,CACvB,iBAAkB,yBAClB,wBAAyB,gBAAiB,iBAAkB,mBAC5D,mBAAoB,SAAU,YAAa,WAAY,UAAW,oBAClE,aAAc,cAAe,cAAe,aAAc,YAAa,WAAY,WACnF,eAAgB,oBAAqB,YAAa,aAAc,WAAY,iBAC5E,gBAAiB,eAAgB,wBAAyB,sBAC1D,WAAY,YAAa,cAAe,WAAY,mBAAoB,kBACxE,mBAAoB,yBAA0B,sBAAuB,sBACrE,yBAA0B,mBAAoB,aAAc,eAAgB,uBAC5E,YAAa,cAAe,WAAY,aAAc,eAAgB,YAAa,SACnF,YAAa,aAAc,iBAAkB,mBAAoB,eAAgB,YAGlFA,UAAwB,SAAUqW,EAAI1X,GACrC,IAAI2X,EACJ,GAAW,aAAPD,EACHC,EAASzK,KAAK0K,aAAa5X,QACrB,GAAW,aAAP0X,EACVC,EAASzK,KAAK2K,aAAa7X,QACrB,GAAW,iBAAP0X,EACVC,EAASzK,KAAK4K,iBAAiB9X,QACzB,GAAW,cAAP0X,EACVC,EAAS,CAAEI,KAAM/X,QACX,GAAW,mBAAP0X,EACVC,EAAS,CAAEI,KAAM/X,QACX,GAAW,eAAP0X,EACVC,EAAS,CAAEK,MAAOhY,EAAMiP,UAAU,SAC5B,GAAW,aAAPyI,EACVC,EAAS,CAAEM,IAAKjY,QACV,GAAW,mBAAP0X,EAAyB,CACnC,MAAM/I,EAAO3O,EAAMwO,MAAM,KACzB,KAAOG,EAAKzM,OAAS,GAAGyM,EAAKuJ,KAAK,IAClCP,EAAS,CAAEI,KAAMpJ,EAAK,GAAIqJ,MAAOrJ,EAAK,SAChC,GAAW,kBAAP+I,EAAwB,CAClC,MAAM/I,EAAO3O,EAAMwO,MAAM,KACzB,KAAOG,EAAKzM,OAAS,GAAGyM,EAAKuJ,KAAK,IAClCP,EAAS,CAAEK,MAAOrJ,EAAK,GAAIsJ,IAAKtJ,EAAK,QACpB,sBAAP+I,IACVC,EAASzK,KAAK4K,iBAAiB9X,IAEhC,OAAO2X,GAGRtW,aAA2B,SAAUO,GACpC,MAAMuW,EAAKjL,KAAKkL,mBAAmBxW,GAInC,IAAImW,EAMAJ,EACJ,GAVIQ,IACHvW,EAAMA,EAAIqN,UAAU,EAAGrN,EAAIM,OAASiW,EAAGjW,UAIvC6V,EAD2B,MAAxBnW,EAAIqN,UAAU,EAAG,GACbrN,EAAIqN,UAAU,EAAG,GAEjBrN,EAAIqN,UAAU,EAAG,KAGb6G,KAAKuC,IAAIN,GAAQ,IAAO,CACnC,IAAIC,EAAQpW,EAAIqN,UAAU8I,EAAK7V,OAAS,EAAG6V,EAAK7V,OAAS,GACzD,IAAI8V,EAA6C,OAAO,EAA3CA,EAAQM,SAASN,EAAO,IACrC,IAAIC,EAAMrW,EAAIqN,UAAU8I,EAAK7V,OAAS,GACtC,IAAI+V,EACC,OAAO,EACZN,EAAS,CACRI,OACGC,QACAC,IALKA,EAAMK,SAASL,EAAK,IAMzBM,SAAUJ,GAGf,OAAOR,GAGRtW,cAA4B,SAAUsW,GACrC,MAAMa,EAAU,GAiChB,YAhC2B,IAAhBb,EAAOI,OAAwC,IAAhBJ,EAAOI,MAAkBJ,EAAOI,KAAO,IAC5EjC,KAAKuC,IAAIV,EAAOI,MAAQ,GAAIS,EAAQT,KAAQJ,EAAOI,KAAO,EAAK,OAAMjC,KAAKuC,IAAIV,EAAOI,QAAW,MAAKJ,EAAOI,OACvGjC,KAAKuC,IAAIV,EAAOI,MAAQ,IAAKS,EAAQT,KAAQJ,EAAOI,KAAO,EAAK,MAAKjC,KAAKuC,IAAIV,EAAOI,QAAW,KAAIJ,EAAOI,OAC/GS,EAAQT,KAAQJ,EAAOI,KAAO,EAAK,KAAIjC,KAAKuC,IAAIV,EAAOI,QAAW,IAAGJ,EAAOI,OACvEJ,EAAOI,OACjBS,EAAQT,KAAOJ,EAAOI,WAEK,IAAjBJ,EAAOK,QAA0C,IAAjBL,EAAOK,OAAmBL,EAAOK,MAAQ,GACnFQ,EAAQR,MAAS,IAAGL,EAAOK,QACjBL,EAAOK,QACjBQ,EAAQR,MAAQL,EAAOK,YAEE,IAAfL,EAAOM,MAAsC,IAAfN,EAAOM,KAAiBN,EAAOM,IAAM,GAC7EO,EAAQP,IAAO,IAAGN,EAAOM,MACfN,EAAOM,MACjBO,EAAQP,IAAMN,EAAOM,UAEK,IAAhBN,EAAOc,OAAwC,IAAhBd,EAAOc,MAAkBd,EAAOc,KAAO,GAChFD,EAAQC,KAAQ,IAAGd,EAAOc,OAChBd,EAAOc,OACjBD,EAAQC,KAAOd,EAAOc,WAEM,IAAlBd,EAAOe,SAA4C,IAAlBf,EAAOe,QAAoBf,EAAOe,OAAS,GACtFF,EAAQE,OAAU,IAAGf,EAAOe,SAClBf,EAAOe,SACjBF,EAAQE,OAASf,EAAOe,aAEI,IAAlBf,EAAOgB,SAA4C,IAAlBhB,EAAOgB,QAAoBhB,EAAOgB,OAAS,GACtFH,EAAQG,OAAU,IAAGhB,EAAOgB,SAClBhB,EAAOgB,SACjBH,EAAQG,OAAShB,EAAOgB,QAElBH,GAIRnX,cAA4B,SAAUsW,EAAQD,GAC7C,MAAMkB,EAAU1L,KAAK2L,cAAclB,GACnC,IAAImB,EACJ,GAAW,cAAPpB,EACHoB,IAAOF,EAAQb,MAAOa,EAAQb,SACxB,IAAW,aAAPL,EACV,SAAQkB,EAAQH,MAAQG,EAAQF,QAAUE,EAAQD,SAAW,GAAEC,EAAQH,QAAQG,EAAQF,UAAUE,EAAQD,SACnG,GAAW,aAAPjB,EACV,SAAQkB,EAAQb,MAAQa,EAAQZ,OAASY,EAAQX,MAAQ,GAAEW,EAAQb,QAAQa,EAAQZ,SAASY,EAAQX,MACnF,iBAAPP,GAAgC,sBAAPA,GACnCoB,KAAOF,EAAQb,MAAQa,EAAQZ,OAASY,EAAQX,MAAQ,GAAEW,EAAQb,QAAQa,EAAQZ,SAASY,EAAQX,UAC1Fa,GAAQ,GAAEF,EAAQH,KAAOG,EAAQH,KAAO,QAAQG,EAAQF,OAASE,EAAQF,OAAS,QAAQE,EAAQD,OAASC,EAAQD,OAAS,QACpH,eAAPjB,EACVoB,IAAOF,EAAQZ,OAAS,KAAIY,EAAQZ,QACnB,aAAPN,EACVoB,IAAOF,EAAQX,KAAO,MAAKW,EAAQX,MAClB,mBAAPP,EACVoB,KAAOF,EAAQb,OAAQa,EAAQZ,QAAU,GAAEY,EAAQb,QAAQa,EAAQZ,QAClD,kBAAPN,IACVoB,KAAOF,EAAQX,MAAOW,EAAQZ,QAAU,KAAIY,EAAQZ,SAASY,EAAQX,OAKtE,OAHIW,EAAQL,WACXO,GAAOF,EAAQL,UAETO,GAIRzX,aAA2B,SAAUO,GACpC,IAAKA,EAAK,MAAO,GACjB,MAAMuW,EAAKjL,KAAKkL,mBAAmBxW,GAUnC,OATIuW,IACHvW,EAAMA,EAAIqN,UAAU,EAAGrN,EAAIM,OAASiW,EAAGjW,SAEzB,CACduW,KAAM7W,EAAIqN,UAAU,EAAG,GACvByJ,OAAQ9W,EAAIqN,UAAU,EAAG,GACzB0J,OAAQ/W,EAAIqN,UAAU,GACtBsJ,SAAUJ,IAKZ9W,sBAAoC,SAAUO,GAC3C,MAAMmC,EAAI,IAAIiS,KAAW,IAANpU,GASnB,MARe,CAChBmW,KAAMhU,EAAEgV,cACRf,MAAOjU,EAAEiV,WAAa,EACtBf,IAAKlU,EAAEkV,UACPR,KAAM1U,EAAEmV,WACRR,OAAQ3U,EAAEoV,aACVR,OAAQ5U,EAAEqV,eAKZ/X,iBAA+B,SAAUO,GACxC,IAAKA,EAAK,MAAO,GACjB,GAAmB,iBAARA,EACV,OAAOsL,KAAKmM,sBAAsBzX,GAEnC,MAAMuW,EAAKjL,KAAKkL,mBAAmBxW,GAC/BuW,IACHvW,EAAMA,EAAIqN,UAAU,EAAGrN,EAAIM,OAASiW,EAAGjW,SAExC,MAAMoX,EAAWpM,KAAK0K,aAAahW,GAC7B2X,EAAQrM,KAAK2K,aAAajW,EAAIqN,UAAUrN,EAAI4X,QAAQ,KAAO,IAEjE,IAAK,MAAMza,KAAKU,OAAOoW,KAAK0D,GAC3BD,EAASva,GAAKwa,EAAMxa,GAGrB,OADAua,EAASf,SAAWJ,EACbmB,GAGRjY,mBAAiC,SAAUO,GAC1C,OAAIA,GAAsC,MAA/BA,EAAIkV,OAAOlV,EAAIM,OAAS,GAC3B,MAEJN,GAAuC,MAA/BA,EAAIkV,OAAOlV,EAAIM,OAAS,IAA6C,MAA/BN,EAAIkV,OAAOlV,EAAIM,OAAS,IACzEN,EAAIqN,UAAUrN,EAAIM,OAAS,IAErB,IAGRb,gBAA8B,SAAUO,EAAK6X,GAC5CA,EAAWA,GAAW,IACtB,IAAIC,EAAO,GAcX,MAbmB,iBAAR9X,GAAoBA,EAAIM,OAClCwX,EAAO9X,EACGA,IACS,iBAARA,IACVA,EAAO,GAAEA,KAENA,EAAIM,QAA6B,MAAlBN,EAAIkV,OAAO,IAA8C,MAA/BlV,EAAIkV,OAAOlV,EAAIM,OAAS,IACpEwX,EAAKxB,KAAKtW,EAAIqN,UAAU,EAAGrN,EAAI4X,QAAQC,KACvCC,EAAKxB,KAAKtW,EAAIqN,UAAUrN,EAAI4X,QAAQC,GAAW,EAAG7X,EAAIM,OAAS,KAE/DwX,EAAKxB,KAAKtW,IAGL8X,GAGRrY,kBAAgC,SAAUsY,EAAUC,EAAKrM,GACxD,MAAMsM,EAAiBrW,SAASsW,eAAeH,GAC/C,IAAKE,EAAgB,CACpB,MAAME,EAASvW,SAASgD,cAAc,UACtCuT,EAAOH,IAAMA,EACbpW,SAASwW,KAAKpT,YAAYmT,GAC1BA,EAAOE,OAAS,WACfF,EAAOG,GAAKP,EACRpM,GAAUA,EAASoM,IAGrBE,GAAkBtM,GACrBA,EAASoM,IAIXtY,eAA6B,SAAU8Y,EAAOP,EAAKrM,GAClD,MAAMsM,EAAiBrW,SAASsW,eAAeK,GAC/C,IAAKN,EAAgB,CACpB,MAAM3D,EAAO1S,SAASgD,cAAc,QACpC0P,EAAK5H,KAAOsL,EACZ1D,EAAKgE,GAAKC,EACVjE,EAAKkE,IAAM,aACX5W,SAASwW,KAAKpT,YAAYsP,GAC1BA,EAAK+D,OAAS,WACT1M,GAAUA,EAAS4M,IAGrBN,GAAkBtM,GAAUA,EAAS4M,KAG1Crb,EAAOD,QAAUwC,G,6CC5bjB,IAAMiD,eAAiBtD,oBAAQ,GACzBqZ,MAAQrZ,oBAAQ,GAMtB,SAASsZ,oBAAoBC,EAAUra,EAAM0F,EAAQ4U,EAAOC,EAAQC,GACnExN,KAAKqN,SAAYA,GAAsB,OACvCrN,KAAKhN,KAAQA,GAAc,OACxBgN,KAAKsN,MAASA,GAAgB,KACjCtN,KAAKuN,OAAUA,GAAkB,IACjCvN,KAAKwN,YAAeA,GAA4B,GAC7CxN,KAAKtH,OAAUA,GAAkB,KACjCsH,KAAKyN,QAAU,CAAC,GAAM,UAAW,OAAU,WAC3B,QAAbzN,KAAKhN,KACJgN,KAAK0N,QAAUpX,SAASgD,cAAc,QAEzC0G,KAAK0N,QAAUpX,SAASgD,cAAc,YACtC0G,KAAK0N,QAAQnU,aAAa,aAAc,SAC3CyG,KAAK0N,QAAQnU,aAAa,QAAS,0BAIrC6T,oBAAoB3Z,UAAUka,SAAW,SAAS9N,GACjDG,KAAKF,KAAOD,EACZG,KAAK4N,mBAGNR,oBAAoB3Z,UAAUoa,UAAY,SAASpP,EAAO/F,GACzD,MAAa,MAAVA,EACK+F,EAAMqP,YAAY,GAGlBlT,KAAKC,UAAU4D,EAAMrD,YAAQ2S,EAAW,IAKjDX,oBAAoB3Z,UAAUua,UAAY,SAAS5U,KAAMV,QACxD,IACC,IAAIpE,KAAO8C,eAAe9C,KAC1B,GAAa,MAAVoE,OAAe,CACjB,IAAIuV,GAAKlO,KAAK3G,MACd,MAAoB,QAAjB4G,KAAKqN,UACPrN,KAAKlE,KAAOA,KACLA,MAEDmS,GAGP,IAAItP,KAAO/D,KAAKsT,MAAM9U,MACtB,MAAoB,QAAjB4G,KAAKqN,SACA/Y,KAAK8G,KAAKuD,MAGVrK,KAAK6Z,WAAWxP,MAI1B,MAAMsB,GAEL,OADAD,KAAKoO,MAAQ,yBAA2BnO,EAAEzL,WAAa,IAAM4E,KACtD4G,KAAKoO,QAKdhB,oBAAoB3Z,UAAU4a,gBAAkB,WAC/C,OAAOrO,KAAK0N,SAGbN,oBAAoB3Z,UAAU6a,UAAY,WACzC,MAAgB,QAAbtO,KAAKhN,MACPgN,KAAKF,KAAOE,KAAKgO,UAAUhO,KAAK0N,QAAQ5a,MAAOkN,KAAKtH,QAC7CsH,KAAKF,MAENE,KAAKF,MAGbsN,oBAAoB3Z,UAAUf,IAAM,WACnC,OAAOsN,KAAKsO,aAGblB,oBAAoB3Z,UAAU8a,SAAW,SAASC,GAC9C,IAAIC,EAAQnY,SAASgD,cAAc,OACtCmV,EAAMlV,aAAa,QAAS,oDAEzB,IAAImV,EAAOpY,SAASgD,cAAc,OAYlC,GAXAoV,EAAKnV,aAAa,QAAS,uCACxByG,KAAKwN,aACVxN,KAAK0N,QAAQnU,aAAa,cAAeyG,KAAKwN,aACzCxN,KAAKsN,OAAStN,KAAKuN,QACxBvN,KAAK0N,QAAQnU,aAAa,QAAS,UAAWyG,KAAKsN,MAAO,eAAgBtN,KAAKuN,OAAS,OAErFmB,EAAKhV,YAAYsG,KAAK2O,oBAKpB3O,KAAKF,KAAK,CACZ,IAAI8O,EAAS5O,KAAK6N,UAAU7N,KAAKF,KAAME,KAAKtH,QAE5B,QAAbsH,KAAKhN,KACPgN,KAAK0N,QAAQ5a,MAAQ8b,EAGrB5O,KAAK0N,QAAQhU,YAAYpD,SAASuD,eAAe+U,SAIrD5O,KAAK0N,QAAQ5a,MAAQ,GAGnB,GADA4b,EAAKhV,YAAYsG,KAAK0N,SACN,QAAb1N,KAAKhN,KAAe,CACtB,IAAI6b,EAAS7O,KAAK8O,kBAClBJ,EAAKhV,YAAYmV,GAGlB,OADAJ,EAAM/U,YAAYgV,GACXD,GAGXrB,oBAAoB3Z,UAAUsb,eAAiB,SAASC,GACvDhP,KAAK0N,QAAQ5a,MAAQ,eAAgBkc,EAAQ,KAC7ChP,KAAKsO,YACLtO,KAAKiP,OAAOjP,KAAKF,OAIlBsN,oBAAoB3Z,UAAUyb,YAAc,WACxC,IAAIC,EAAM7Y,SAASgD,cAAc,QACjC6V,EAAI5V,aAAa,QAAS,0BAC1B,IAAI,IAAI1H,EAAI,EAAGA,EAAEmO,KAAKoP,WAAWpa,OAAQnD,IAAI,CAC/C,IAAIwd,EAAM/Y,SAASgD,cAAc,QAC7B8D,EAAO9G,SAASgD,cAAc,KAClC8D,EAAK9E,MAAQ0H,KAAKoP,WAAWvd,GAAGmI,MAChCoD,EAAK7D,aAAa,QAASyG,KAAKoP,WAAWvd,GAAGuL,MAC9CiS,EAAI3V,YAAY0D,GAChBiS,EAAIjd,KAAO4N,KAAKoP,WAAWvd,GAAGmb,GAC9B,IAAIsC,EAAOtP,KACXqP,EAAI7O,iBAAiB,SAAS,WACxB8O,EAAKxT,MAAQwT,EAAKxT,KAAK/B,MAAQiG,KAAK5N,MACxCkd,EAAKP,eAAe/O,KAAK5N,SAG3Bid,EAAI7O,iBAAiB,aAAa,WAC5B8O,EAAKxT,MAAQwT,EAAKxT,KAAK/B,MAAQiG,KAAK5N,OACxC4N,KAAK1C,MAAMiS,OAAS,cAGtBJ,EAAIzV,YAAY2V,GAEd,OAAOF,GAGX/B,oBAAoB3Z,UAAUkb,iBAAmB,WAC7C,IAAIQ,EAAM7Y,SAASgD,cAAc,QAGjC,IAAIkW,KAFJL,EAAI5V,aAAa,QAAS,0BAEjByG,KAAKyN,QAAQ,CAClB,IAAIgC,EAAMnZ,SAASgD,cAAc,UACjCmW,EAAIlW,aAAa,QAASiW,GAC1BC,EAAIlW,aAAa,QAAS,2BACxB,MAALiW,GAAWC,EAAIhT,UAAUG,IAAI,oCAC1B6S,EAAI/V,YAAYpD,SAASuD,eAAemG,KAAKyN,QAAQ+B,KACrD,IAAIF,EAAOtP,KACXyP,EAAIjP,iBAAiB,SAAS,WACnC2M,MAAMtQ,YAAYmD,KAAM,oCACxB,IAAI0P,EAAOJ,EAAKtB,UAAUsB,EAAK5B,QAAQ5a,MAAOwc,EAAK5W,QACnD4W,EAAK5W,OAASsH,KAAKlN,MAChB4c,IAAMJ,EAAKxP,KAAO4P,GACrBJ,EAAK1B,qBAEAuB,EAAIzV,YAAY+V,GAEpB,OAAON,GAGX/B,oBAAoB3Z,UAAUqb,gBAAkB,WAAU,WAClDD,EAASvY,SAASgD,cAAc,UACpCuV,EAAOtV,aAAa,QAAS,gBAChCsV,EAAOtV,aAAa,OAAQ,UAC5B,IAAIY,EAAM,SAeP,MAdiB,QAAjB6F,KAAKqN,SACPlT,EAAM,eAEkB,QAAjB6F,KAAKqN,SACZlT,EAAM,cAEkB,QAAjB6F,KAAKqN,WACZlT,EAAM,cAEJ0U,EAAOnV,YAAYpD,SAASuD,eAAeM,IAC3C0U,EAAOrO,iBAAiB,SAAS,WACnC,EAAK8N,YACL,EAAKW,OAAO,EAAKnP,SAER+O,GAGXzB,oBAAoB3Z,UAAUwb,OAAS,WACtCU,MAAM,aAAe/U,KAAKC,UAAUmF,KAAKF,QAG1CsN,oBAAoB3Z,UAAUmc,iBAAmB,WAChD,IAAIlU,EAAKsE,KAAK0N,QAAQmC,YAClBnU,GACDA,EAAGe,UAAUS,SAAS,eACxB9F,eAAejD,YAAY2b,cAAcpU,IAG3C0R,oBAAoB3Z,UAAUsc,eAAiB,WAC9C,IAAIC,EAAa,GACjBA,EAAW1C,MAAQtN,KAAKsN,MACxB0C,EAAWzC,OAASvN,KAAKuN,OACzBvN,KAAK4P,mBACW,QAAb5P,KAAKhN,KACPma,MAAMpS,mBAAmB,KAAMiF,KAAK0N,QAAS,KAAM,cAC/CP,MAAMtR,cAAc,KAAMmE,KAAK0N,QAASsC,EAAY,eAG1D5C,oBAAoB3Z,UAAUma,gBAAkB,SAAS9N,GAIxD,GAHAA,EAAOA,GAAcE,KAAKF,KAC1B1I,eAAejD,YAAYyH,eAAeoE,KAAK0N,SAC/B,QAAb1N,KAAKhN,MAAgBgN,KAAK0N,QAAQ5a,MACjCgN,EAAJ,CACA,IAAI8O,EAAS5O,KAAK6N,UAAU7N,KAAKF,KAAME,KAAKtH,QAC5C,GAAgB,QAAbsH,KAAKhN,MAEP,GADAgN,KAAK0N,QAAQ5a,MAAQ8b,EAClB5O,KAAK0N,QAAQmC,YAAY,CAE3B,GADA7P,KAAK4P,mBACa,MAAf5P,KAAKtH,OAAgB,IAAI1F,EAAO,kBAC1BA,EAAO,sBAChBma,MAAMtR,cAAc,KACfmE,KAAK0N,QACL,CAACJ,MAAOtN,KAAKsN,MAAOC,OAAQvN,KAAKuN,QACjCva,SAINgN,KAAK0N,QAAQhU,YAAYpD,SAASuD,eAAe+U,IACjDzB,MAAMpS,mBAAmB,KAAMiF,KAAK0N,QAAS,KAAM1a,KAIrDpB,OAAOD,QAAUyb,qB,cCpPjB,SAAS6C,EAAkB/O,EAAKgP,EAAKC,GAEpC,IAAIlZ,EAAM,GAWV,OAVIkZ,EAAI5V,UACP4V,EAAMA,EAAI5V,UACFI,OAAM1D,GAAQ,GAAEmZ,EAAmBD,EAAIxV,SACrCwV,EAAIrD,OAAM7V,GAAQ,GAAEmZ,EAAmBD,EAAIxV,SAElDwV,EAAIxL,SAAQ1N,GAAQ,SAAQkZ,EAAIxL,UAChCwL,EAAI7V,SAAQrD,GAAQ,aAAYkZ,EAAI7V,UACpC6V,EAAIpW,OAAM9C,GAAQ,WAAUkZ,EAAIpW,QAChCmH,IAAKjK,GAAQ,UAASiK,KACtBgP,GAAOA,EAAIG,SAAQpZ,GAAQ,aAAYiZ,EAAIG,UACxCpZ,EAGR,SAASmZ,EAAmBnW,GAC3B,GAAmB,iBAARA,EAAkB,CAC5B,IAAIqW,EAAO,GACX,IAAK,MAAMld,KAAOb,OAAOoW,KAAK1O,GAC7BqW,GAAS,GAAEld,KAAO6G,EAAI7G,MAEvB,OAAOkd,EAER,OAAOrW,EA0DRrI,EAAOD,QAAU,CAChBse,oBACAM,mBA/CD,SAA4BrP,EAAKgP,EAAKC,GACrC,MAAQ,aAAYF,EAAkB/O,EAAKgP,EAAKC,MA+ChDK,uBA5CD,SAAgCtP,EAAKgP,EAAKC,GACzC,MAAQ,iBAAgBF,EAAkB/O,EAAKgP,EAAKC,MA4CpDM,aA3DD,SAAsBnW,EAAQoW,EAAIC,GACjC,MAAMR,EAAM,CACZA,OAAa,KAKb,OAJAA,EAAIjP,KAAOyP,GAAU,KAAOD,GAAM,IAClCP,EAAIpW,KAAO,SACXoW,EAAI7V,OAASA,EACb6V,EAAIrD,KAAQ,GAAEqD,EAAI7V,4BAA4B6V,EAAIjP,MAC3CiP,GAqDPS,qBA1CD,SAA8B1P,EAAKlP,GAKlC,MAJa,oCACAA,oBACAkP,0DAwCb2P,cA9BD,SAAuBtW,GACtB,MAAM4V,EAAM,GAGZ,GAFAA,EAAIxL,OAASpK,EAASoK,OACtBwL,EAAIpW,KAAOQ,EAASR,KAChBQ,EAASI,MAAiC,iBAAlBJ,EAASI,KAAmB,CACvD,IAAIV,EACJ,IACCA,EAAMM,EAASnB,OACd,MAAO6G,GACR,IACChG,EAAMM,EAASa,OACd,MAAOgT,GACRnU,EAAMM,EAAS/F,YAGjB2b,EAAIrD,KAAO7S,OACDM,EAASI,OAAMwV,EAAIrD,KAAOvS,EAASI,MAI9C,OAHAwV,EAAIjP,IAAM3G,EAAS2G,IACnBiP,EAAIjV,QAAUX,EAASW,QACvBiV,EAAIW,WAAavW,EAASuW,WACnBX,K,gBC9ER,IAAMY,EAAoBjd,EAAQ,IAC5BsD,EAAiBtD,EAAQ,GAE/B,SAASkd,EAAcC,GACtBjR,KAAKiR,OAASA,EACdjR,KAAKkR,aAAc,EAGpBF,EAAcvd,UAAU4E,QAAU,SAAS8Y,GAE1C,OADAnR,KAAKoR,OAASD,GAAQ/Z,EAAe9C,KAAKgC,WACnC0J,MAGRgR,EAAcvd,UAAU4d,aAAe,SAASC,GAI/C,OAHAtR,KAAKiG,UAAY,IAAI8K,EAClB/Q,KAAKoR,OAAOnL,WAAWjG,KAAKiG,UAAU5N,QAAQ2H,KAAKoR,OAAOnL,WAC1DqL,GAAMA,EAAKtR,KAAKiG,WACZjG,MAGRgR,EAAcvd,UAAU8d,aAAe,SAASrQ,EAAKkG,GACpD,IAAIlG,EAAK,OAAO,EAChB,IAAIoO,EAAOtP,KAIX,MAHyB,QAAtBkB,EAAIa,UAAU,EAAE,KAClBb,EAAMA,EAAIa,UAAU,IAEd/B,KAAKiR,OAAOO,YAAYtQ,EAAK,CAAC,oBAAqB,mBACzD7F,MAAK,SAASd,GAKd,OAJA+U,EAAKmC,eAAelX,GACjB+U,EAAK8B,OAAOF,eACd5B,EAAKoC,mBAAmBpC,EAAKhZ,SAAS8Q,KAEhC7M,MAITyW,EAAcvd,UAAUie,mBAAqB,SAAStK,GACrD,IAAIkI,EAAOtP,KACP2R,EAAOva,EAAejD,YAAYkV,UAAUjC,GAChD,OAAOpH,KAAKiR,OAAOW,eAAc,EAAOD,GACvCtW,MAAK,SAASd,GACd,OAAO+U,EAAKuC,iBAAiBtX,EAAU6M,OAIzC4J,EAAcvd,UAAUge,eAAiB,SAASK,EAAY1K,GACzDA,IACApH,KAAK1J,SAAU8Q,EAAMpH,KAAK1J,SAAS8Q,IAElC0K,GAAcA,EAAW9c,QAAU8c,EAAW,IAAMA,EAAW,GAAGC,SACpE3K,EAAM0K,EAAW,GAAGC,SAIpB3K,EACEpH,KAAK1J,SAIR0J,KAAK1J,SAASmb,eAAeK,GAH7B9R,KAAK1J,SAAW,IAAIc,EAAehD,YAAYgT,EAAK0K,GAOrDrS,QAAQC,IAAI,gEAIdsR,EAAcvd,UAAUoe,iBAAmB,SAASG,EAAa5K,GAC5DA,GACA4K,GAAeA,EAAYhd,QAAUgd,EAAY,IAAMA,EAAY,GAAGD,SACxE3K,EAAM4K,EAAY,GAAGD,QAGpB3K,GACEpH,KAAK1J,WACR0J,KAAK1J,SAAW,IAAIc,EAAehD,YAAYgT,IAE7C4K,IACFhS,KAAK1J,SAAS2b,gBAAgBD,GAC1BhS,KAAK1J,SAAS4b,SACjBlS,KAAK1J,SAAS6b,QAAS,EACvBnS,KAAK1J,SAAS8b,eAAe,SAK/B3S,QAAQC,IAAI,gBAAiB,oDAI/BsR,EAAcvd,UAAU4e,OAAS,WAUhC,OATIrS,KAAKY,UAAYZ,KAAK1J,WACtB0J,KAAKoR,OAAOxQ,WACdZ,KAAKY,SAAWZ,KAAKoR,OAAOxQ,YAG5BZ,KAAKsS,qBAAqBtS,KAAK1J,SAAU0J,KAAKoR,QAC9CpR,KAAKY,SAAWZ,KAAK1J,WAGpB0J,KAAKY,UAAYZ,KAAKY,SAASyR,OAE1BrS,KAAKY,SAASyR,OAAOrS,KAAK1J,UAEF,mBAAjB0J,KAAKY,SACXZ,KAAKY,SAASZ,KAAK1J,eAI3BmJ,QAAQC,IAAI,mBAOdsR,EAAcvd,UAAU6e,qBAAuB,SAASC,EAAKnB,GAC5D,IAAI9B,EAAOtP,KAoBXA,KAAK1J,SAASkc,OAAOpB,EAAOqB,OAnB5B,SAAiB3P,EAAO4P,GACvB,QAA2B,IAAjBA,EAAKL,SACdvP,EAAMuP,OAASK,EAAKL,aAEhB,CACJ,GAAGK,EAAK9R,WACP,IAAIA,EAAW0O,EAAKqD,aAAaD,EAAK9R,WAAYkC,EAAO4P,EAAKva,MAE5DyI,GAAYA,EAASyR,SACvBvP,EAAMuP,OAAS,SAASvP,GACvB,OAAOlC,EAASyR,OAAOvP,KAIvB4P,EAAKE,YACP9P,EAAM8P,QAAUF,EAAKE,WAEtBxB,EAAOyB,uBAAuB/P,EAAO4P,OAKvC1B,EAAcvd,UAAUkf,aAAe,SAASG,EAAUhQ,EAAO3K,GAChE,QAAG6H,KAAK+S,OACA/S,KAAK+S,MAAMJ,aAAaG,EAAUhQ,EAAO3K,EAAM6H,OAKxDpO,EAAOD,QAAUqf,G,qPCnJjB,IAAM5Z,EAAiBtD,EAAQ,GAC/B,SAASoM,IACRF,KAAKgT,UAAY,GACjBhT,KAAKiT,OAAS,GACdjT,KAAKkT,QAAU,GACflT,KAAKmT,UAAY,GACjBnT,KAAKoT,QAAU,GACfpT,KAAKoT,QAAQ,gBAAkB,CAC9BpZ,MAAO,eACP4J,IAAK,CAAC,8EAEP5D,KAAKoT,QAAL,MAAwB,CACvBpZ,MAAO,QACPqZ,GAAI,CAAC,8CACLzP,IAAK,CAAC,iDAEP5D,KAAKoT,QAAL,WAA6B,CAC5BpZ,MAAQ,cACRqZ,GAAI,CAAC,yEACJ,2EACA,2EACA,iFACA,yFACA,sFACA,mFACA,oFACE,6EACF,uFACA,uFACA,wFACA,oFACA,kFACA,qFACA,wFAKDzP,IAAK,CACJ,0EACA,oFACA,yEACA,iFACA,qFACA,+EAGF5D,KAAKoT,QAAL,OAAyB,CACxBpZ,MAAO,SACPqZ,GAAI,CAAC,gDAENrT,KAAKoT,QAAL,SAA2B,CAC1BpZ,MAAO,YACP4J,IAAK,CAAC,qEACNyP,GAAI,CAAC,kDACLC,SAAU,CAAC,WAEZtT,KAAKoT,QAAL,WAA6B,CAC5BpZ,MAAO,cACPqZ,GAAI,CAAC,iEACH,kGACFzP,IAAK,CAAC,oEACN0P,SAAU,CAAC,WAQZtT,KAAKoT,QAAL,MAAwB,CACvBpZ,MAAO,cACPqZ,GAAI,CAAC,4CAGNrT,KAAKoT,QAAL,GAAqB,CACpBpZ,MAAO,KACPqZ,GAAI,CAAC,+CACLC,SAAU,CAAC,WAEZtT,KAAKoT,QAAL,QAA0B,CACzBpZ,MAAO,WACPqZ,GAAI,CAAC,0EACLzP,IAAK,CAAC,4EACN0P,SAAU,CAAC,WAsBbpT,EAAsBzM,UAAU8f,iBAAmB,SAASpC,GAC3D,IAAI,IAAIxd,KAAKwd,EACZ,GAAInR,KAAKoT,QAAQzf,GACjB,IAAI,IAAIyO,KAAK+O,EAAKxd,GACjBqM,KAAKoT,QAAQzf,GAAGyO,GAAK+O,EAAKxd,GAAGyO,IAKhClC,EAAsBzM,UAAU+f,KAAO,SAASrC,EAAM9V,GAClD8V,GAAMnR,KAAKuT,iBAAiBpC,GAC/BnR,KAAKyT,qBACL,IAAIC,EAAS1T,KAAK2T,6BAA6BxC,GAC/C,GAAGuC,GAAUA,EAAO,GAAG1e,OACtB,GAAG0e,EAAO,GAAG1e,OAAO,CACnB,IAAIsa,EAAOtP,KAIXA,KAAK4T,YAAYF,EAAO,IAHZ,WACXpE,EAAKsE,YAAYF,EAAO,GAAIrY,WAK7B2E,KAAK4T,YAAYF,EAAO,GAAIrY,QAGtBA,GACPA,KAIF6E,EAAsBzM,UAAUkgB,6BAA+B,SAASxC,GACvE,GAAGA,EAAK,CACP,IAAI0C,EAAO,GACX,IAAI,IAAIC,KAAO3C,EACXA,EAAK2C,KAA8B,GAAtBD,EAAKvH,QAAQwH,KACL,UAApB,EAAO3C,EAAK2C,KAAoB3C,EAAK2C,GACvCD,EAAK7I,KAAK8I,GAEiB,UAApB,EAAO3C,EAAK2C,WACa,IAApB3C,EAAK2C,GAAKb,QAA0B9B,EAAK2C,GAAKb,SACzDY,EAAK7I,KAAK8I,SAOVD,EAAO7T,KAAK+T,oBAGjB,IADA,IAAIC,EAAc,GACVniB,EAAI,EAAGA,EAAEgiB,EAAK7e,OAAQnD,KACO,GAAjCmO,KAAKiT,OAAO3G,QAAQuH,EAAKhiB,MAAiD,GAApCmO,KAAKgT,UAAU1G,QAAQuH,EAAKhiB,KACpEmiB,EAAYhJ,KAAK6I,EAAKhiB,IAGxB,IAAIoiB,EAAgB,CAAC,GAAI,IACzB,IAAQpiB,EAAI,EAAGA,EAAEmiB,EAAYhf,OAAQnD,IACjCmO,KAAKoT,QAAQY,EAAYniB,MACxBmO,KAAKoT,QAAQY,EAAYniB,IAAIyhB,UAAYtT,KAAKoT,QAAQY,EAAYniB,IAAIyhB,SAASte,OACjFif,EAAc,GAAGjJ,KAAKgJ,EAAYniB,IAGlCoiB,EAAc,GAAGjJ,KAAKgJ,EAAYniB,KAIrC,OAAOoiB,GAGR/T,EAAsBzM,UAAUygB,oBAAsB,WACrD,OAAOlU,KAAKoT,SAGblT,EAAsBzM,UAAUggB,mBAAqB,WACpD,IAAI,IAAIU,KAAMnU,KAAKoT,QACfpT,KAAKvE,gBAAgB0Y,IACvBnU,KAAKgT,UAAUhI,KAAKmJ,IAKvBjU,EAAsBzM,UAAUgI,gBAAkB,SAAS2Y,EAAQC,GAClE,GAAkC,UAA/B,EAAOrU,KAAKoT,QAAQgB,IAAoB,CAC1C,IAAIE,EAAatU,KAAKoT,QAAQgB,GAC9B,GAAGE,EAAWhB,UAAYgB,EAAWhB,SAASte,OAC7C,IAAI,IAAInD,EAAG,EAAIA,EAAIyiB,EAAWhB,SAASte,OAAQnD,IAC9C,IAAImO,KAAKvE,gBAAgB6Y,EAAWhB,SAASzhB,GAAIwiB,GAChD,OAAO,IAIcC,EAAWC,SAAUD,EAAWC,QACxD,OAAOH,GACN,IAAK,SACJ,MAAoB,oBAAVI,OAKX,IAAK,WACJ,IACC,GAAoB,oBAAVA,QAAyBA,OAAO5f,WAAY4f,OAAOzf,GAAG0f,QAAU,OAAO,EAElF,MAAMxU,IACN,OAAO,EAGR,IAAK,QACJ,MAAmB,oBAATyU,MAIX,IAAK,aACJ,MAAwB,oBAAdC,WAIX,IAAK,aACJ,MAAwB,oBAAdC,YACH5U,KAAKoT,QAAQgB,GAErB,IAAK,eAEJ,OAAOpU,KAAK6U,mBAEb,IAAK,aACH,QAAoB,oBAAVL,SAAyBA,OAAO5f,WAAY4f,OAAOzf,GAAG+f,YAGlE,IAAK,UACH,QAAoB,oBAAVN,SAAyBA,OAAO5f,WAAY4f,OAAOzf,GAAGggB,UAGlE,IAAK,QACJ,MAAoB,oBAAVC,aAA+C,IAAfA,OAAOC,KAGlD,IAAK,aACJ,MAAgB,oBAANC,SAAsC,IAAVA,GAAGC,IAG1C,IAAK,KACJ,MAAgB,oBAANC,SAMZ3V,QAAQC,IAAI,IAAI2V,MAAMjB,EAAS,kCAEhC,OAAO,GAGRlU,EAAsBzM,UAAUohB,iBAAmB,WAClD,IAKcS,EAAS9hB,EALnB+hB,EAAOjf,SAASgD,cAAc,QAGlC,GAFAic,EAAKzY,UAAY,KACjByY,EAAKjY,MAAMC,QAAU,OAClBjH,SAASwW,KAAK,CAChBxW,SAASwW,KAAK0I,aAAaD,EAAMjf,SAASwW,KAAK5O,YAI/C,IAAI+U,GAAS,EAMb,MAJkC,wBALrBqC,EAIMC,EAJG/hB,EAIG,cAHhB6C,OAAOof,iBAAiBH,EAAS,MAAMI,iBAAiBliB,IAIpD0D,QAAQ,KAAM,MAC1B+b,GAAS,GAEV3c,SAASwW,KAAKrE,YAAY8M,GACnBtC,EAER,OAAO,GAGR/S,EAAsBzM,UAAUsgB,kBAAoB,WAEnD,MADe,CAAC,iBAIjB7T,EAAsBzM,UAAUmgB,YAAc,SAASR,EAAS/X,GAO/D,IANA,IAAIsa,EAASvC,EAAQpe,OACjB4gB,EAAQ,aACND,GAAU,GAAKta,GACnBA,KAGMxJ,EAAI,EAAGA,EAAIuhB,EAAQpe,OAAQnD,IAClCmO,KAAK6V,WAAWzC,EAAQvhB,GAAI+jB,IAI9B1V,EAAsBzM,UAAUoiB,WAAa,SAASzB,EAAQ/Y,GAC7D,IAAIya,EAAM9V,KAAKoT,QAAQgB,GACvB,GAAG0B,EAAIlS,IACN,IAAI,IAAI/R,EAAE,EAAGA,EAAEikB,EAAIlS,IAAI5O,OAAQnD,IAAI,CAClC,IAAIob,EAAQmH,EAAS,QAAUviB,EAC/BuF,EAAejD,YAAY4hB,eAAe9I,EAAO6I,EAAIlS,IAAI/R,IAG3D,IAAImkB,EAAWF,EAAIzC,GAAKyC,EAAIzC,GAAK,GAOjC,GANa,SAAVe,GAAqB0B,EAAI1iB,MAC3B4iB,EAAQ,IAAM,QAAUF,EAAI1iB,KAE1B0iB,EAAI1B,OAGM,cAAVA,EAAuB,CACzB,IAAI1Y,EAAKsa,EAAQ,GACbC,EAAM7B,EAAS,QAAU4B,EAAQhhB,OAAQ,GAC7CghB,EAAQE,OAAO,EAAG,GAClB,IAAI5G,EAAOtP,KAIX5I,EAAejD,YAAYgiB,kBAAkBF,EAAKva,GAHtC,WACX4T,EAAK8G,kBAAkBhC,EAAQ4B,EAAS3a,WAKzC2E,KAAKoW,kBAAkBhC,EAAQ4B,EAAS3a,IAI1C6E,EAAsBzM,UAAU2iB,kBAAoB,SAAShC,EAAQ4B,EAAS3a,GAC7E,IAAIsa,EAASK,EAAQhhB,OAAS,EAC1Bsa,EAAOtP,KACP4V,EAAQ,WACE,GAAVD,KACiC,GAAhCrG,EAAK2D,OAAO3G,QAAQ8H,IACtB9E,EAAK2D,OAAOjI,KAAKoJ,IAEkB,GAAjC9E,EAAK4D,QAAQ5G,QAAQ8H,IACvB9E,EAAK4D,QAAQgD,OAAO5G,EAAK4D,QAAQ5G,QAAQ8H,GAAS,GAEnD/Y,KAEDsa,KAEoB,GAAlBK,EAAQhhB,OACVgL,KAAKiT,OAAOjI,KAAKoJ,GAGjBpU,KAAKkT,QAAQlI,KAAKoJ,GAEnB,IAAI,IAAIviB,EAAI,EAAGA,EAAEmkB,EAAQhhB,OAAQnD,IAAI,CACpC,IAAIokB,EAAM7B,EAAS,OAASviB,EAC5BuF,EAAejD,YAAYgiB,kBAAkBF,EAAKD,EAAQnkB,GAAI+jB,KAIhE1V,EAAsBzM,UAAU4iB,YAAc,SAASzS,GACtD0S,OAAS,sBACT,IAAIC,EAASjgB,SAASsW,eAAe0J,QAClCC,GACFA,EAAO7N,WAAWD,YAAY8N,GAE5B3S,IACF4S,OAAS,OAAS5S,EAAM,OACxBxM,EAAejD,YAAY4hB,eAAeO,OAAQE,UAIpDtW,EAAsBzM,UAAUgjB,eAAiB,SAAS3C,GACzD,OAAyC,IAAjC9T,KAAKmT,UAAU7G,QAAQwH,IAAe9T,KAAK0W,sBAAsB5C,IAG1E5T,EAAsBzM,UAAUijB,sBAAwB,SAAS5C,GAChE,OAAgC,GAA7B9T,KAAKiT,OAAO3G,QAAQwH,MACY,GAAhC9T,KAAKgT,UAAU1G,QAAQwH,KACO,GAA9B9T,KAAKkT,QAAQ5G,QAAQwH,KAIzB5T,EAAsBzM,UAAU6M,SAAW,SAASwT,EAAKhf,GACxD,IAAmC,GAAhCkL,KAAKmT,UAAU7G,QAAQwH,GAAY,OAAO,EAC7C,GAAGhf,EAAIwe,SACN,IAAI,IAAIzhB,EAAI,EAAGA,EAAEiD,EAAIwe,SAASte,OAAQnD,IACrC,IAAImO,KAAK0W,sBAAsB5hB,EAAIwe,SAASzhB,IAAK,OAAO,EAG1D,OAAO,GAGRqO,EAAsBzM,UAAUkjB,aAAe,SAASC,EAAQ9hB,EAAKyG,GACpE,IAAI1E,EAAIP,SAASgD,cAAc,KAC3Bud,EAAKvgB,SAASgD,cAAc,QAChCzC,EAAE6C,YAAYmd,GACdA,EAAGtd,aAAa,QAAS,2BACzB,IAAIud,EAAOxgB,SAASgD,cAAc,SAClCwd,EAAK9J,GAAK,2BAA6B4J,EACvCE,EAAK/c,KAAO,YAC0B,GAAnCiG,KAAKgT,UAAU1G,QAAQsK,IACzBE,EAAKC,SAAU,EACfD,EAAKxW,UAAW,IAEuB,GAAhCN,KAAKiT,OAAO3G,QAAQsK,GAC3BE,EAAKC,SAAU,GAEyB,GAAjC/W,KAAKkT,QAAQ5G,QAAQsK,GAC5BE,EAAKC,SAAU,EAER/W,KAAKM,SAASsW,EAAQ9hB,KAC7BgiB,EAAKxW,UAAW,GAEjB,IAAI0W,EAAO1gB,SAASgD,cAAc,SAClC0d,EAAKzd,aAAa,QAAS,0CAC3Byd,EAAKzd,aAAa,MAAOud,EAAK9J,IAC9BgK,EAAKtd,YAAYpD,SAASuD,eAAe/E,EAAIkF,QAC7C6c,EAAGnd,YAAYsd,GACfH,EAAGnd,YAAYod,GACf,IAAIxH,EAAOtP,KAIX,OAHA8W,EAAKtW,iBAAiB,UAAU,WAC/B8O,EAAK2H,aAAaL,EAAQrb,MAEpB1E,GAGRqJ,EAAsBzM,UAAUwjB,aAAe,SAASL,EAAQrb,GAC/D,IAAmC,GAAhCyE,KAAKiT,OAAO3G,QAAQsK,GAAc,CAIpC5W,KAAK6V,WAAWe,GAHL,WACVrb,EAAG2b,iBAKJlX,KAAKmX,aAAaP,GAEnBxf,EAAejD,YAAYyH,eAAeL,EAAG6X,SAC7C7X,EAAG6b,eAGJlX,EAAsBzM,UAAU0jB,aAAe,SAASP,GACvD,IAAI5W,KAAKoT,QAAQwD,KAA2C,GAAhC5W,KAAKiT,OAAO3G,QAAQsK,GAE/C,OADAnX,QAAQC,IAAI,IAAI2V,MAAMuB,EAAS,kDACxB,EAER,IAAId,EAAM9V,KAAKoT,QAAQwD,GACnBS,EAAOvB,EAAIzC,GAAMyC,EAAIzC,GAAGre,OAAS,EAClC8gB,EAAI1B,QAAQiD,IACf,IAAI,IAAIxlB,EAAE,EAAGA,EAAGwlB,EAAKxlB,IAAI,CACxB,IAAIykB,EAASM,EAAS,OAAS/kB,GAC3B0kB,EAASjgB,SAASsW,eAAe0J,KAEpCC,EAAO7N,WAAWD,YAAY8N,GAGhCc,EAAOvB,EAAIlS,IAAMkS,EAAIlS,IAAI5O,OAAS,EAClC,IAAQnD,EAAE,EAAGA,EAAGwlB,EAAKxlB,IAAI,CACxB,IACI0kB,EADAD,EAASM,EAAS,QAAU/kB,GAC5B0kB,EAASjgB,SAASsW,eAAe0J,KAEpCC,EAAO7N,WAAWD,YAAY8N,GAGhCvW,KAAKiT,OAAOiD,OAAOlW,KAAKiT,OAAO3G,QAAQsK,GAAS,IAGjD1W,EAAsBzM,UAAU8a,SAAW,SAAShT,GACnD,IAAI+b,EAAKhhB,SAASgD,cAAc,QAChCge,EAAG/d,aAAa,QAAS,2BACzB,IAAIge,EAAMjhB,SAASgD,cAAc,QACjCie,EAAIhe,aAAa,QAAS,uEAC1Bge,EAAI7d,YAAYpD,SAASuD,eAAe,YACxCyd,EAAG5d,YAAY6d,GACf,IAAI1gB,EAAIP,SAASgD,cAAc,KAS/B,OARA0G,KAAKwX,YAAY3gB,EAAG0E,GACpBgc,EAAI7d,YAAY7C,GAChBA,EAAEyG,MAAMC,QAAU,OAClBga,EAAI/W,iBAAiB,SAAS,WACP,QAAnB3J,EAAEyG,MAAMC,QACV1G,EAAEyG,MAAMC,QAAU,QACd1G,EAAEyG,MAAMC,QAAU,UAEjB+Z,GAGRpX,EAAsBzM,UAAU+jB,YAAc,SAAS3gB,EAAG0E,GAEzD,IAAI,IAAIuY,KADRjd,EAAE0C,aAAa,QAAS,2BACTyG,KAAKoT,QACnBvc,EAAE6C,YAAYsG,KAAK2W,aAAa7C,EAAK9T,KAAKoT,QAAQU,GAAMvY,KAI1D3J,EAAOD,QAAQuO,G,cCreftO,EAAOD,QAAUY,OAAOklB,OAAO,CAC9BC,QAAS,UACTC,WAAY,aACZC,cAAe,gBACfC,gBAAiB,kBACjBC,YAAa,cACbC,YAAa,cACbC,aAAc,eACdC,gBAAiB,kBACjBC,gBAAiB,kBACjBC,gBAAiB,kBACjBC,gBAAiB,kBACjBC,YAAa,iB,cCSdzmB,EAAOD,QAAU,CAAE2mB,sBAtBnB,SAA+Bhe,GAC9B,OAA8B,IAA1Bie,MAAM9jB,QAAQ6F,GAA0B,GAErCA,EAAOke,IAAIC,GAAQA,EAAK,SAmBUC,iBAhB1C,SAA0BC,GACzB,GAAuB,iBAAZA,EAAsB,OAAOC,mBAAmBD,GAC3D,MAAME,EAAa,GACnB,IAAK,MAAMzlB,KAAOb,OAAOoW,KAAKgQ,GAC7B,GAA4B,iBAAjBA,EAAQvlB,GAClB,IAAK,MAAM0lB,KAAcvmB,OAAOoW,KAAKgQ,EAAQvlB,IAAO,CAClD,MAAM2lB,EAAeJ,EAAQvlB,GAAK0lB,GAClCD,EAAW7N,KAAM,GAAE4N,mBAAmBE,MAAeF,mBAAmBG,WAG1EF,EAAW7N,KAAM,GAAE4N,mBAAmBxlB,MAAQwlB,mBAAmBD,EAAQvlB,OAG3E,OAAOylB,EAAWtO,KAAK,Q,qPCnBxB,IAAMnT,EAAiBtD,EAAQ,GACzBklB,EAAcllB,EAAQ,IACtBmlB,EAAYnlB,EAAQ,IAEpBolB,GADkBplB,EAAQ,IACdA,EAAQ,KACpBqlB,EAAarlB,EAAQ,IACrBkd,EAAgBld,EAAQ,GAyC9B,SAASslB,IACRpZ,KAAKyS,MAAQ,GACbzS,KAAKjG,KAAO,WA8Jb,SAASsf,IACRrZ,KAAKyS,MAAQ,GACbzS,KAAKjG,KAAO,SA8Cb,SAASuf,IACRtZ,KAAKyS,MAAQ,GACbzS,KAAKjG,KAAO,UAiLb,SAASwf,IACRvZ,KAAKyS,MAAQ,GACbzS,KAAKjG,KAAO,QAyYb,SAASyf,EAAS5lB,GACjBoM,KAAK0S,KAAO,CAAE7P,MAAOjP,GAqbtB,SAAS6lB,EAAyBC,GAEjC,IADA,IAAIC,EAAQ,GACJ9nB,EAAI,EAAGA,EAAE6nB,EAAK1kB,OAAQnD,IAAI,CACjC,IAAI+nB,EAAmC,MAA3BF,EAAK7nB,GAAGkQ,UAAU,EAAG,GAAc2X,EAAK7nB,GAAK,KAAO6nB,EAAK7nB,GACrE8nB,EAAM3O,KAAK4O,GAEZ,OAAOD,EAGR,SAASE,EAA4BC,GACpC,MAA2B,MAAxBA,EAAK/X,UAAU,EAAG,GAAmB+X,EAAK/X,UAAU,GAChD+X,EAaR,SAASC,EAAiBtH,EAAOuH,EAAK5mB,EAAK6mB,EAAS3f,GAEnD,IADA,IAAI4f,EAAU,GACNroB,EAAI,EAAGA,EAAE4gB,EAAMzd,OAAQnD,IAC3B4gB,EAAM5gB,GAAGsoB,MAAMH,EAAK5mB,EAAK6mB,EAAS3f,IACpC4f,EAAQlP,KAAKyH,EAAM5gB,GAAG6gB,MAGxB,OAAOwH,EAgBR,SAASE,EAAcvX,GACtB2W,EAASxnB,KAAKgO,KAAK6C,GAiNpB,SAASwX,IACRra,KAAKyS,MAAQ,GACbzS,KAAKjG,KAAO,QA9+Cb3C,EAAe9C,KAAKgmB,MAAQ,WAAY,OAAO,IAAIf,GACnDniB,EAAe9C,KAAKimB,MAAQ,WAAY,OAAO,IAAIF,GAGnDjjB,EAAe9C,KAAKkmB,MAAQ,WAAY,OAAO,IAAIC,iBACnDrjB,EAAe9C,KAAKomB,QAAU,WAAY,OAAO,IAAIpB,GACrDliB,EAAe9C,KAAKqmB,OAAS,WAAY,OAAO,IAAItB,GACpDjiB,EAAe9C,KAAKgC,SAAW,WAAY,OAAO,IAAI8iB,GACtDhiB,EAAe9C,KAAK6Z,WAAa,SAASiD,GACzC,GAAGA,EAAOkJ,OACLxe,EAAO,IAAIyd,GACVqB,SAASxJ,EAAOkJ,MAAOlJ,EAAOqB,YAE/B,GAAGrB,EAAOsJ,QAAQ,EAClB5e,EAAO,IAAIwd,GACVsB,SAASxJ,EAAOsJ,QAAStJ,EAAOqB,YAEjC,GAAGrB,EAAOoJ,MAAM,EAChB1e,EAAO,IAAI2e,iBACVG,SAASxJ,EAAOoJ,MAAOpJ,EAAOqB,YAE/B,GAAGrB,EAAOuJ,OAAO,EACjB7e,EAAO,IAAIud,GACVuB,SAASxJ,EAAOuJ,OAAQvJ,EAAOqB,YAEhC,GAAGrB,EAAOtO,MAAM,CACpB,IAAIhH,KAAO,IAAIsd,GACVwB,SAASxJ,EAAOtO,MAAOsO,EAAOqB,OAEpC,OAAO3W,GAeRsd,EAAY3lB,UAAUqa,YAAc,WACnC,IAAI7W,EAAM,4BACP+I,KAAKY,aACP3J,GAAO,kBAAoB+I,KAAKY,WAAa,aAEd,IAAtBZ,KAAKkR,gBACdja,GAAO,oBAAsB+I,KAAKkR,cAAgB,OAEnD,IAAI,IAAIrf,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAASnD,IACpCoF,GAAO,QAAU+I,KAAKyS,MAAM5gB,GAAGic,YAAY,SAAW,KAEvD,OAAO7W,GAGRmiB,EAAY3lB,UAAU2H,KAAO,WAE5B,IADA,IAAIyf,EAAK,GACDhpB,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAAQnD,IACnCgpB,EAAG7P,KAAKhL,KAAKyS,MAAM5gB,GAAGuJ,QAEvB,IAAI0f,EAAO,GAQX,YAP6B,IAAnB9a,KAAKY,aACdka,EAAI,SAAe9a,KAAKY,iBAEO,IAAtBZ,KAAKkR,gBACd4J,EAAI,YAAkB9a,KAAKkR,eAEnB,CAAC,MAAS4J,EAAM,MAASD,IAInCzB,EAAY3lB,UAAUmnB,SAAW,SAASxJ,EAAQqB,GAEjD,IADA,IAAIoI,EAAK,GACDhpB,EAAI,EAAGA,EAAE4gB,EAAMzd,OAAQnD,IAAI,CAClC,IAAIkpB,EAAK,IAAI3jB,EAAe9C,KAAKoe,KACjCqI,EAAG3f,KAAKqX,EAAM5gB,IACdgpB,EAAG7P,KAAK+P,GAET/a,KAAKyS,MAAQoI,OACgB,IAAnBzJ,EAAOxQ,UAChBZ,KAAKY,SAASwQ,EAAOxQ,eAEU,IAAtBwQ,EAAOF,aAChBlR,KAAKkR,YAAYE,EAAOF,cAI1BkI,EAAY3lB,UAAUN,OAAS,SAAS8d,EAAQ+J,GAC/C,IAAIC,EAAK,IAAIjK,EAAcC,EAAQjR,MAKnC,OAJGA,KAAKkb,UAAWD,EAAGE,YAAYnb,KAAKkb,WAC/BF,GAAaA,EAAS,OAC7BC,EAAGE,YAAYH,EAAS,OAElBC,GAGR7B,EAAY3lB,UAAUmN,SAAW,SAASwa,GACzC,YAAkB,IAARA,EAA4Bpb,KAAKkb,WAC3Clb,KAAKkb,UAAYE,EACVpb,OAGRoZ,EAAY3lB,UAAU4nB,WAAa,WAElC,IADA,IAAIR,EAAK,GACDhpB,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAAQnD,IACnCgpB,EAAG7P,KAAKhL,KAAKyS,MAAM5gB,GAAGuJ,QAEvB,OAAOyf,GAGRzB,EAAY3lB,UAAUyd,YAAc,SAAS+J,GAC5C,YAAgB,IAANA,EAA0Bjb,KAAKsb,YACzCtb,KAAKsb,WAAaL,EACXjb,OAGRoZ,EAAY3lB,UAAU8nB,SAAW,SAAS5oB,GAEzC,OADAqN,KAAKwb,MAAM5a,SAASjO,GACbqN,MAGRoZ,EAAY3lB,UAAUgoB,WAAa,SAASnpB,EAAGqB,EAAGxB,GAIjD,OAHA6N,KAAKzM,SAASqN,SAAStO,GACvB0N,KAAKxM,WAAWoN,SAASjN,GACzBqM,KAAKrF,OAAOiG,SAASzO,GACd6N,MAGRoZ,EAAY3lB,UAAUF,OAAS,WAC9B,IAAImoB,EAAKtkB,EAAe9C,KAAKoe,OAG7B,OAFAgJ,EAAG7Y,MAAM,UACT7C,KAAKyS,MAAMzH,KAAK0Q,GACTA,GAGRtC,EAAY3lB,UAAUD,SAAW,WAChC,IAAIkoB,EAAKtkB,EAAe9C,KAAKoe,OAG7B,OAFAgJ,EAAG7Y,MAAM,YACT7C,KAAKyS,MAAMzH,KAAK0Q,GACTA,GAGRtC,EAAY3lB,UAAUkH,KAAO,WAC5B,IAAI+gB,EAAKtkB,EAAe9C,KAAKoe,OAG7B,OAFAgJ,EAAG7Y,MAAM,QACT7C,KAAKyS,MAAMzH,KAAK0Q,GACTA,GAGRtC,EAAY3lB,UAAU+nB,IAAM,WAC3B,IAAIE,EAAKtkB,EAAe9C,KAAKoe,OAG7B,OAFAgJ,EAAG7Y,MAAM,KACT7C,KAAKyS,MAAMzH,KAAK0Q,GACTA,GAIRtC,EAAY3lB,UAAUof,uBAAyB,SAAS/P,EAAO4P,QAC3B,IAAzB5P,EAAMI,kBAAgCJ,EAAMI,gBAAkB,SAC/C,IAAfwP,EAAK1f,SAAyB8P,EAAMI,gBAAgBlQ,KAAO0f,EAAK1f,aACjD,IAAf0f,EAAK5W,SAAuBgH,EAAMI,gBAAgBpH,KAAO4W,EAAK5W,aAGhC,IAA9B4W,EAAKiJ,wBAAsC7Y,EAAMI,gBAAgBkC,sBAAwBsN,EAAKiJ,4BAC3E,IAAnBjJ,EAAKzP,aACdH,EAAMI,gBAAgBD,SAAWyP,EAAKzP,iBAEZ,IAAjByP,EAAKpP,WAAyBR,EAAMI,gBAAgBI,OAASoP,EAAKpP,eACjD,IAAjBoP,EAAKvP,WAAyBL,EAAMI,gBAAgBC,OAASuP,EAAKvP,eAC/C,IAAnBuP,EAAKkJ,aAA2B9Y,EAAMI,gBAAgB0Y,SAAWlJ,EAAKkJ,iBAC7C,IAAzBlJ,EAAKmJ,mBAAiC/Y,EAAMI,gBAAgBK,gBAAkBmP,EAAKmJ,uBAC/D,IAApBnJ,EAAKoJ,cAA4BhZ,EAAMI,gBAAgB6Y,WAAarJ,EAAKoJ,kBAC9C,IAA3BpJ,EAAKsJ,qBAAmClZ,EAAMI,gBAAgB+Y,kBAAoBvJ,EAAKsJ,yBAClE,IAArBtJ,EAAKwJ,eACdpZ,EAAMI,gBAAgBgZ,WAAaxJ,EAAKwJ,kBACf,IAAfxJ,EAAKva,SACd2K,EAAMI,gBAAgB/K,KAAOua,EAAKva,UAyBrCkhB,EAAiB5lB,UAAUqa,YAAc,WAExC,IADA,IAAI7W,EAAM,0BACFpF,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAASnD,IACpCoF,GAAO,QAAU+I,KAAKyS,MAAM5gB,GAAGic,YAAY,UAAY,KAExD,OAAO7W,GAGRoiB,EAAiB5lB,UAAUmnB,SAAW,SAASxJ,EAAQqB,GAEtD,IADA,IAAIoI,EAAK,GACDhpB,EAAI,EAAGA,EAAE4gB,EAAMzd,OAAQnD,IAAI,CAClC,IAAIkpB,EAAK,IAAIvB,EACbuB,EAAG3f,KAAKqX,EAAM5gB,IACdgpB,EAAG7P,KAAK+P,GAET/a,KAAKyS,MAAQoI,GAIdxB,EAAiB5lB,UAAU2H,KAAO,WAEjC,IADA,IAAIyf,EAAK,GACDhpB,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAAQnD,IACnCgpB,EAAG7P,KAAKhL,KAAKyS,MAAM5gB,GAAGuJ,QAIvB,MADS,CAAC,OADC,GACe,MAASyf,IAIpCxB,EAAiB5lB,UAAUsmB,iBAAmB,SAASC,EAAK5mB,EAAK6mB,EAAS3f,GACzE,OAAOyf,EAAiB/Z,KAAKyS,MAAOuH,EAAK5mB,EAAK6mB,EAAS3f,IAGxD+e,EAAiB5lB,UAAUN,OAAS,SAAS8d,EAAQ+J,GACpD,IAAImB,EAAM,IAAIhD,EAAWlI,EAAQjR,MAKjC,OAJGA,KAAKkb,UAAWiB,EAAIhB,YAAYnb,KAAKkb,WAChCF,GAAaA,EAAS,QAC7BmB,EAAIhB,YAAYH,EAAS,QAEnBmB,GASR7C,EAAkB7lB,UAAUsmB,iBAAmB,SAASC,EAAK5mB,EAAK6mB,EAAS3f,GAC1E,OAAOyf,EAAiB/Z,KAAKyS,MAAOuH,EAAK5mB,EAAK6mB,EAAS3f,IAGxDgf,EAAkB7lB,UAAUN,OAAS,SAAS8d,EAAQ+J,GACrD,IAAImB,EAAM,IAAInD,EAAY/H,EAAQjR,MAKlC,OAJGA,KAAKkb,UAAWiB,EAAIhB,YAAYnb,KAAKkb,WAChCF,GAAaA,EAAS,SAC7BmB,EAAIhB,YAAYH,EAAS,SAEnBmB,GAGR7C,EAAkB7lB,UAAUqa,YAAc,WACzC,IAAI7W,EAAM,gCACiB,IAAjB+I,KAAKoc,WACdnlB,GAAO,eAAiB+I,KAAKoc,SAAW,YAEV,IAArBpc,KAAK+b,eACd9kB,GAAO,oBAAsB+I,KAAK+b,aAAe,aAEvB,IAAjB/b,KAAKqc,WACdplB,GAAO,gBAAkB4iB,EAA4B7Z,KAAKqc,UAAY,aAE5C,IAAjBrc,KAAKsc,WACdrlB,GAAO,gBAAkB4iB,EAA4B7Z,KAAKsc,UAAY,aAE5C,IAAjBtc,KAAKuc,WACdtlB,GAAO,gBAAkB4iB,EAA4B7Z,KAAKuc,UAAY,aAE9C,IAAfvc,KAAKwc,SACdvlB,GAAO,aAAe+I,KAAKwc,OAAS,YAEP,IAApBxc,KAAKyc,cACdxlB,GAAO,mBAAqB+I,KAAKyc,YAAc,QAEhD,IAAI,IAAI5qB,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAASnD,IACpCoF,GAAO,QAAU+I,KAAKyS,MAAM5gB,GAAGic,YAAY,WAAa,KAEzD,OAAO7W,GAGRqiB,EAAkB7lB,UAAU2H,KAAO,WAElC,IADA,IAAIyf,EAAK,GACDhpB,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAAQnD,IACnCgpB,EAAG7P,KAAKhL,KAAKyS,MAAM5gB,GAAGuJ,QAEvB,IAAI0f,EAAO,GAuBX,YAtB2B,IAAjB9a,KAAKoc,WACdtB,EAAI,OAAa9a,KAAKoc,eAEQ,IAArBpc,KAAK+b,eACdjB,EAAI,WAAiB9a,KAAK+b,mBAEA,IAAjB/b,KAAKqc,WACdvB,EAAI,OAAa9a,KAAKqc,eAEI,IAAjBrc,KAAKsc,WACdxB,EAAI,OAAa9a,KAAKsc,eAEI,IAAjBtc,KAAKuc,WACdzB,EAAI,OAAa9a,KAAKuc,eAEE,IAAfvc,KAAKwc,SACd1B,EAAI,KAAW9a,KAAKwc,aAES,IAApBxc,KAAKyc,cACd3B,EAAI,UAAgB9a,KAAKyc,aAEjB,CAAC,QAAW3B,EAAM,MAASD,IAIrCvB,EAAkB7lB,UAAUmnB,SAAW,SAASxJ,EAAQqB,GAEvD,IADA,IAAIoI,EAAK,GACDhpB,EAAI,EAAGA,EAAE4gB,EAAMzd,OAAQnD,IAAI,CAClC,IAAIkpB,EAAK,IAAIvB,EACbuB,EAAG3f,KAAKqX,EAAM5gB,IACdgpB,EAAG7P,KAAK+P,GAET/a,KAAKyS,MAAQoI,OACc,IAAjBzJ,EAAOgL,QAChBpc,KAAKoc,OAAOhL,EAAOgL,aAEW,IAArBhL,EAAO2K,YAChB/b,KAAK+b,WAAW3K,EAAO2K,iBAEG,IAAjB3K,EAAOiL,QAChBrc,KAAKqc,OAAOjL,EAAOiL,aAEO,IAAjBjL,EAAOkL,QAChBtc,KAAKsc,OAAOlL,EAAOkL,aAEO,IAAjBlL,EAAOmL,QAChBvc,KAAKuc,OAAOnL,EAAOmL,aAEK,IAAfnL,EAAOoL,MAChBxc,KAAKwc,KAAKpL,EAAOoL,WAEY,IAApBpL,EAAOqL,WAChBzc,KAAKyc,UAAUrL,EAAOqL,YAIxBnD,EAAkB7lB,UAAU2oB,OAAS,SAASjU,GAC7C,YAAe,IAALA,GACTnI,KAAK0c,SAAWvU,EACTnI,MAEDA,KAAK0c,UAGbpD,EAAkB7lB,UAAUsoB,WAAa,SAASpoB,GACjD,YAAe,IAALA,GACTqM,KAAKwN,YAAc7Z,EACZqM,MAEDA,KAAKwN,aAGb8L,EAAkB7lB,UAAUif,KAAO,SAASvK,GAC3C,IAAI4S,EAAK,IAAIvB,EAAS,OAEtB,OADAxZ,KAAKyS,MAAMzH,KAAK+P,GACTA,EAAG5S,EAAEA,IAGbmR,EAAkB7lB,UAAU4oB,OAAS,SAASlU,GAC7C,YAAe,IAALA,GACe,MAArBA,EAAEpG,UAAU,EAAG,KAAYoG,EAAI,KAAOA,GACzCnI,KAAK2c,eAAiBxU,EACfnI,MAEDA,KAAK2c,gBAGbrD,EAAkB7lB,UAAU6oB,OAAS,SAASnU,GAC7C,OAAGA,GACsB,MAArBA,EAAEpG,UAAU,EAAG,KAAYoG,EAAI,KAAOA,GACzCnI,KAAK4c,eAAiBzU,EACfnI,MAEDA,KAAK4c,gBAGbtD,EAAkB7lB,UAAU8oB,OAAS,SAASpU,GAC7C,OAAGA,GACsB,MAArBA,EAAEpG,UAAU,EAAG,KAAYoG,EAAI,KAAOA,GACzCnI,KAAK6c,eAAiB1U,EACfnI,MAEDA,KAAK6c,gBAGbvD,EAAkB7lB,UAAU+oB,KAAO,SAASrU,GAC3C,OAAGA,GACsB,MAArBA,EAAEpG,UAAU,EAAG,KAAYoG,EAAI,KAAOA,GACzCnI,KAAK8c,cAAgB3U,EACdnI,MAEDA,KAAK8c,eAGbxD,EAAkB7lB,UAAUgpB,UAAY,SAAStU,GAChD,OAAGA,GACFnI,KAAK+c,eAAiB5U,EACfnI,MAEDA,KAAK+c,gBAYbxD,EAAgB9lB,UAAUsmB,iBAAmB,SAASC,EAAK5mB,EAAK6mB,EAAS3f,GACxE,OAAOyf,EAAiB/Z,KAAKyS,MAAOuH,EAAK5mB,EAAK6mB,EAAS3f,IAGxDif,EAAgB9lB,UAAUN,OAAS,SAAS8d,EAAQ+J,EAAWgC,GAC9D,IAAIb,EAAM,IAAIlD,EAAUhI,EAAQjR,MAMhC,OALAmc,EAAI9K,aAAa2L,GACdhd,KAAKkb,UAAWiB,EAAIhB,YAAYnb,KAAKkb,WAChCF,GAAaA,EAAS,OAC7BmB,EAAIhB,YAAYH,EAAS,OAEnBmB,GAGR5C,EAAgB9lB,UAAU2H,KAAO,WAEhC,IADA,IAAIyf,EAAK,GACDhpB,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAAQnD,IACnCgpB,EAAG7P,KAAKhL,KAAKyS,MAAM5gB,GAAGuJ,QAEvB,IAAI0f,EAAO,GAiBX,YAhBiC,IAAvB9a,KAAKid,iBACdnC,EAAI,aAAmB9a,KAAKid,qBAEA,IAAnBjd,KAAKkd,aACdpC,EAAI,SAAe9a,KAAKkd,iBAEI,IAAnBld,KAAKY,aACdka,EAAI,SAAe9a,KAAKY,iBAEC,IAAhBZ,KAAKmd,UACdrC,EAAI,MAAY9a,KAAKmd,cAEG,IAAfnd,KAAKod,SACdtC,EAAI,KAAW9a,KAAKod,QAEZ,CAAC,MAAStC,EAAM,MAASD,IAInCtB,EAAgB9lB,UAAUmnB,SAAW,SAASxJ,EAAQqB,GAErD,IADA,IAAIoI,EAAK,GACDhpB,EAAI,EAAGA,EAAE4gB,EAAMzd,OAAQnD,IAAI,CAClC,IAAIkpB,EAAK,IAAIvB,EACbuB,EAAG3f,KAAKqX,EAAM5gB,IACdgpB,EAAG7P,KAAK+P,GAET/a,KAAKyS,MAAQoI,OACoB,IAAvBzJ,EAAO6L,cAChBjd,KAAKid,aAAa7L,EAAO6L,mBAEG,IAAnB7L,EAAO8L,UAChBld,KAAKkd,SAAS9L,EAAO8L,eAEO,IAAnB9L,EAAOxQ,UAChBZ,KAAKY,SAASwQ,EAAOxQ,eAEI,IAAhBwQ,EAAO+L,OAChBnd,KAAKmd,MAAM/L,EAAO+L,YAEM,IAAf/L,EAAOgM,MAChBpd,KAAKuc,OAAOnL,EAAOgM,OAIrB7D,EAAgB9lB,UAAUqa,YAAc,WACvC,IAAI7W,EAAM,8BACuB,IAAvB+I,KAAKid,iBACdhmB,GAAO,sBAAwB+I,KAAKid,eAAiB,aAEzB,IAAnBjd,KAAKkd,aACdjmB,GAAO,iBAAmB+I,KAAKkd,WAAa,YAEhB,IAAnBld,KAAKY,aACd3J,GAAO,kBAAoB+I,KAAKY,WAAa,aAEpB,IAAhBZ,KAAKmd,UACdlmB,GAAO,cAAgB+I,KAAKmd,QAAU,YAEd,IAAfnd,KAAKod,SACdnmB,GAAO,aAAe+I,KAAKod,OAAS,OAErC,IAAI,IAAIvrB,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAASnD,IACpCoF,GAAO,QAAU+I,KAAKyS,MAAM5gB,GAAGic,YAAY,SAAW,KAEvD,OAAO7W,GAGRsiB,EAAgB9lB,UAAUmN,SAAW,SAASwa,GAC7C,OAAIA,GACJpb,KAAKkb,UAAYE,EACVpb,MAFUA,KAAKkb,WAKvB3B,EAAgB9lB,UAAUwpB,aAAe,WAAgB,2BAAJvoB,EAAI,yBAAJA,EAAI,gBACxD,YAAiB,IAAPA,GAAoC,GAAdA,EAAIM,OAC5BgL,KAAKqd,OAEbrd,KAAKqd,MAAQ5D,EAAyB/kB,GAC/BsL,OAGRuZ,EAAgB9lB,UAAU0pB,MAAQ,SAASzoB,GAC1C,YAAiB,IAAPA,EACFsL,KAAKsd,YAEbtd,KAAKsd,WAAa5oB,EACXsL,OAGRuZ,EAAgB9lB,UAAUypB,SAAW,SAASxoB,EAAK6oB,GAClD,YAAiB,IAAP7oB,EACFsL,KAAKwd,eAEbxd,KAAKwd,cAAgB9oB,EACrBsL,KAAKyd,gBAAkBF,EAChBvd,OAGRuZ,EAAgB9lB,UAAU2pB,KAAO,SAAS1oB,GACzC,YAAiB,IAAPA,EACFsL,KAAK0d,iBAEb1d,KAAK0d,gBAAkBhpB,EAChBsL,OAGRuZ,EAAgB9lB,UAAUkqB,OAAS,WAAiB,IACnD,IAAI5C,EAAK,IAAIvB,EAAS,UAD6B,mBAALoE,EAAK,yBAALA,EAAK,gBAInD,OAFA7C,EAAG8C,aAAaD,GAChB5d,KAAKyS,MAAMzH,KAAK+P,GACTA,GAGRxB,EAAgB9lB,UAAUumB,IAAM,WAC/B,IAAIe,EAAK,IAAIvB,EAAS,OAEtB,OADAxZ,KAAKyS,MAAMzH,KAAK+P,GACTA,GAGRN,gBAAkB,WACjBza,KAAKyS,MAAQ,GACbzS,KAAKjG,KAAO,SAGb0gB,gBAAgBhnB,UAAUN,OAAS,SAAS8d,EAAQ+J,GACnD,IAAImB,EAAM,IAAIjD,EAAUjI,EAAQjR,MAKhC,OAJGA,KAAKkb,UAAWiB,EAAIhB,YAAYnb,KAAKkb,WAChCF,GAAaA,EAAS,OAC7BmB,EAAIhB,YAAYH,EAAS,OAEnBmB,GAGR1B,gBAAgBhnB,UAAUsmB,iBAAmB,SAASC,EAAK5mB,EAAK6mB,EAAS3f,GACxE,OAAOyf,EAAiB/Z,KAAKyS,MAAOuH,EAAK5mB,EAAK6mB,EAAS3f,IAGxDmgB,gBAAgBhnB,UAAUqqB,SAAW,SAAS3V,GAC7C,YAAe,IAALA,GACTnI,KAAK+d,cAAgB5V,EACdnI,MAEDA,KAAK+d,eAGbtD,gBAAgBhnB,UAAUwF,OAAS,SAASkP,GAC3C,OAAGA,GACsB,MAArBA,EAAEpG,UAAU,EAAG,KAAYoG,EAAI,KAAOA,GACzCnI,KAAKge,gBAAkB7V,EAChBnI,MAEDA,KAAKge,iBAGbvD,gBAAgBhnB,UAAUwqB,WAAa,SAAS9V,GAC/C,YAAe,IAALA,GACTnI,KAAKke,QAAU/V,EACRnI,MAGDA,KAAKke,SAGbzD,gBAAgBhnB,UAAU0qB,WAAa,SAAShW,GAC/C,YAAe,IAALA,GACTnI,KAAKoe,MAAQjW,EACNnI,MAEDA,KAAKoe,OAGb3D,gBAAgBhnB,UAAU4qB,UAAY,SAASlW,GAC9C,YAAe,IAALA,GACTnI,KAAKse,MAAQnW,EACNnI,MAEDA,KAAKse,OAGb7D,gBAAgBhnB,UAAU8qB,YAAc,SAASpW,GAChD,YAAe,IAALA,GACTnI,KAAKwe,QAAUrW,EACRnI,MAEDA,KAAKwe,SAGb/D,gBAAgBhnB,UAAUgrB,eAAiB,SAAStW,GACnD,YAAe,IAALA,GACTnI,KAAK0e,OAASvW,EACPnI,MAEDA,KAAK0e,QAGbjE,gBAAgBhnB,UAAU6Z,MAAQ,SAASnF,GAC1C,YAAe,IAALA,GACTnI,KAAK2e,OAASxW,EACPnI,MAEDA,KAAK2e,QAGblE,gBAAgBhnB,UAAU8Z,OAAS,SAASpF,GAC3C,YAAe,IAALA,GACTnI,KAAK4e,QAAUzW,EACRnI,MAEDA,KAAK4e,SAGbnE,gBAAgBhnB,UAAUorB,MAAQ,WAAkB,2BAANA,EAAM,yBAANA,EAAM,gBACnD,GAAGA,GAASA,EAAM7pB,OAAO,CAExB,IADA,IAAI8pB,EAAS,GACLjtB,EAAI,EAAGA,EAAEgtB,EAAM7pB,OAAQnD,IAC9BitB,EAAO9T,KAAKyO,EAAyBoF,EAAMhtB,KAG5C,OADAmO,KAAK+e,WAAaD,EACX9e,KAER,OAAOA,KAAK+e,YAGbtE,gBAAgBhnB,UAAUurB,KAAO,SAAS/lB,EAAQC,GACjD,IAAI6hB,EAAK,IAAIvB,EAAS,QAOtB,OANGvgB,GAAUC,EAAQ6hB,EAAG8C,aAAa,CAAC5kB,EAAQC,IACtCD,EAAQ8hB,EAAG8C,aAAa,CAAC5kB,IACzBC,GAAQ6hB,EAAG8C,aAAa,CAAC3kB,IAC9BD,IAAQ8hB,EAAG9hB,OAASA,GACpBC,IAAQ6hB,EAAG7hB,OAASA,GACvB8G,KAAKyS,MAAMzH,KAAK+P,GACTA,GAGRN,gBAAgBhnB,UAAU8U,KAAO,WAAiB,IACjD,IAAIwS,EAAK,IAAIvB,EAAS,QAD2B,mBAALoE,EAAK,yBAALA,EAAK,gBAIjD,OAFA7C,EAAG8C,aAAaD,GAChB5d,KAAKyS,MAAMzH,KAAK+P,GACTA,GAGRN,gBAAgBhnB,UAAUwrB,gBAAkB,WAC3C,IAAI7jB,EAAO,GA+BX,YA9B6B,IAAnB4E,KAAK8d,aACd1iB,EAAI,SAAe4E,KAAK8d,iBAEE,IAAjB9d,KAAK/G,WACdmC,EAAI,OAAa4E,KAAK/G,eAEQ,IAArB+G,KAAKie,eACd7iB,EAAI,WAAiB4E,KAAKie,mBAEI,IAArBje,KAAKme,eACd/iB,EAAI,WAAiB4E,KAAKme,mBAEG,IAApBne,KAAKqe,cACdjjB,EAAI,UAAgB4E,KAAKqe,kBAEM,IAAtBre,KAAKue,gBACdnjB,EAAI,YAAkB4E,KAAKue,oBAEO,IAAzBve,KAAKye,mBACdrjB,EAAI,eAAqB4E,KAAKye,uBAEL,IAAhBze,KAAKsN,UACdlS,EAAI,MAAY4E,KAAKsN,cAEK,IAAjBtN,KAAKuN,WACdnS,EAAI,OAAa4E,KAAKuN,eAEG,IAAhBvN,KAAK6e,UACdzjB,EAAI,MAAY4E,KAAK6e,SAEfzjB,GAGRqf,gBAAgBhnB,UAAUmnB,SAAW,SAASxJ,EAAQqB,GAErD,IADA,IAAIoI,EAAK,GACDhpB,EAAI,EAAGA,EAAE4gB,EAAMzd,OAAQnD,IAAI,CAClC,IAAIkpB,EAAK,IAAIvB,EACbuB,EAAG3f,KAAKqX,EAAM5gB,IACdgpB,EAAG7P,KAAK+P,GAET/a,KAAKyS,MAAQoI,OACgB,IAAnBzJ,EAAO0M,UAChB9d,KAAK8d,SAAS1M,EAAO0M,eAEK,IAAjB1M,EAAOnY,QAChB+G,KAAK/G,OAAOmY,EAAOnY,aAEW,IAArBmY,EAAO6M,YAChBje,KAAKie,WAAW7M,EAAO6M,iBAEO,IAArB7M,EAAO+M,YAChBne,KAAKme,WAAW/M,EAAO+M,iBAEM,IAApB/M,EAAOiN,WAChBre,KAAKqe,UAAUjN,EAAO8N,0BAES,IAAtB9N,EAAOmN,aAChBve,KAAKue,YAAYnN,EAAOmN,kBAEU,IAAzBnN,EAAOqN,gBAChBze,KAAKye,eAAerN,EAAOqN,qBAEF,IAAhBrN,EAAO9D,OAChBtN,KAAKsN,MAAM8D,EAAO9D,YAEQ,IAAjB8D,EAAO7D,QAChBvN,KAAKuN,OAAO6D,EAAO7D,aAEM,IAAhB6D,EAAOyN,OAChB7e,KAAK6e,MAAMzN,EAAOyN,QAKpBpE,gBAAgBhnB,UAAUqa,YAAc,WACvC,IAAI7W,EAAM,yBA4BV,QA3B6B,IAAnB+I,KAAK8d,aACd7mB,GAAO,kBAAoB+I,KAAK8d,WAAa,aAEnB,IAAjB9d,KAAK/G,WACdhC,GAAO,gBAAkB4iB,EAA4B7Z,KAAK/G,UAAY,aAExC,IAArB+G,KAAKie,eACdhnB,GAAO,oBAAsB+I,KAAKie,aAAe,aAEnB,IAArBje,KAAKme,eACdlnB,GAAO,oBAAsB+I,KAAKme,aAAe,aAEpB,IAApBne,KAAKqe,cACdpnB,GAAO,mBAAqB+I,KAAKqe,YAAc,aAEhB,IAAtBre,KAAKue,gBACdtnB,GAAO,qBAAuB+I,KAAKue,cAAgB,aAEjB,IAAzBve,KAAKye,mBACdxnB,GAAO,wBAA0B+I,KAAKye,iBAAmB,aAEhC,IAAhBze,KAAKsN,UACdrW,GAAO,eAAiB+I,KAAKsN,QAAU,aAEb,IAAjBtN,KAAKuN,WACdtW,GAAO,gBAAkB+I,KAAKuN,SAAW,aAEhB,IAAhBvN,KAAK6e,QAAuB,CAGrC,IAFA,IAAIC,EAAS9e,KAAK6e,QACdM,EAAQ,GACJttB,EAAI,EAAGA,EAAEitB,EAAO9pB,OAAQnD,IAC/BstB,EAAMnU,KAAK,KAAO8T,EAAOjtB,GAAG,GAAK,KAAOitB,EAAOjtB,GAAG,GAAK,MAExDoF,GAAO,eAAiBkoB,EAAM5U,KAAK,MAAQ,OAE5C,IAAQ1Y,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAASnD,IACpCoF,GAAO,QAAU+I,KAAKyS,MAAM5gB,GAAGic,YAAY,SAAW,KAEvD,OAAO7W,GAGRwjB,gBAAgBhnB,UAAU2H,KAAO,WAEhC,IADA,IAAIyf,EAAK,GACDhpB,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAAQnD,IACnCgpB,EAAG7P,KAAKhL,KAAKyS,MAAM5gB,GAAGuJ,QAGvB,MADS,CAAC,MAAU4E,KAAKif,kBAAmB,MAASpE,IAStDrB,EAAS/lB,UAAUqa,YAAc,SAAS/T,GAEzC,IAAI9C,EAAM+I,KAAK0S,KAAK7P,MAAQ,KAoE5B,IAAI,IAAIsF,KAnELnI,KAAK0S,KAAK0M,YACZnoB,GAAO+I,KAAK0S,KAAK0M,UAAU7U,KAAK,SAEhCtT,GAAO,UACoB,IAAlB+I,KAAKqf,YACdpoB,GAAO,YAAc+I,KAAKqf,UAAY,UAEd,IAAfrf,KAAKjG,SACd9C,GAAO,SAAW2D,KAAKC,UAsbzB,SAAuC6e,GAEtC,IADA,IAAIC,EAAQ,GACJ9nB,EAAI,EAAGA,EAAE6nB,EAAK1kB,OAAQnD,IAC7B8nB,EAAM3O,KAAK6O,EAA4BH,EAAK7nB,KAE7C,OAAO8nB,EA3b2B2F,CAA8Btf,KAAKjG,SAAW,UAEnD,IAAnBiG,KAAKS,aACdxJ,GAAO,aAAe+I,KAAKS,WAAa,UAEf,IAAhBT,KAAKhG,UACd/C,GAAO,UAAY+I,KAAKhG,QAAU,UAEV,IAAfgG,KAAKuf,SACdtoB,GAAO,UAAY+I,KAAKuf,OAAS,WAER,IAAhBvf,KAAKwf,UACdvoB,GAAO,WAAa+I,KAAKwf,QAAQjV,KAAK,KAAO,WAEnB,IAAjBvK,KAAKyf,WACdxoB,GAAO,YAAc+I,KAAKyf,SAAW,WAET,IAAnBzf,KAAK0f,aACdzoB,GAAO,cAAgB+I,KAAK0f,WAAa,WAEf,IAAjB1f,KAAK2f,WACd1oB,GAAO,cAAgB+I,KAAK2f,SAAW,WAEV,IAApB3f,KAAK4f,cACd3oB,GAAO,cAAgB+I,KAAK4f,YAAc,UAEP,IAA1B5f,KAAK6f,oBACd5oB,GAAO,oBAAsB+I,KAAK6f,kBAAoB,UAE9B,IAAf7f,KAAK5C,SACdnG,GAAO,SAAW2D,KAAKC,UAAUmF,KAAK5C,QAAU,UAExB,IAAf4C,KAAK5G,SACdnC,GAAO,SAAW2D,KAAKC,UAAUmF,KAAK5G,QAAU,UAEvB,IAAhB4G,KAAK8f,UACd7oB,GAAO,UAAY2D,KAAKC,UAAUmF,KAAK8f,SAAW,UAExB,IAAjB9f,KAAK+f,WACd9oB,GAAO,WAAa2D,KAAKC,UAAUmF,KAAK+f,UAAY,UAE5B,IAAf/f,KAAK7H,SACdlB,GAAO,SAAW2D,KAAKC,UAAUmF,KAAK7H,QAAU,UAEpB,IAAnB6H,KAAKY,aACd3J,GAAO,cAAgB+I,KAAKY,WAAa,WAEf,IAAjBZ,KAAKqS,WACdpb,GAAO,WAAa+I,KAAKqS,SAAW,UAEV,IAAjBrS,KAAKsD,WACdrM,GAAO,YAAc+I,KAAKsD,SAAW,WAEZ,IAAhBtD,KAAKggB,UACd/oB,GAAO,UAAY+I,KAAKggB,QAAU,UAET,IAAhBhgB,KAAKigB,UACdhpB,GAAO,UAAY+I,KAAKigB,QAAU,KAEtBjgB,KAAK0S,KAAKwN,YAAY,CAClCjpB,GAAO,OAASkR,EAAI,KACpB,IAAI,IAAItW,EAAI,EAAGA,EAAEmO,KAAK0S,KAAKwN,YAAY/X,GAAGnT,OAAQnD,IACP,mBAAhCmO,KAAK0S,KAAKwN,YAAY/X,GAAGtW,GAClCoF,GAAO,WAAa+I,KAAK0S,KAAKwN,YAAY/X,GAAGtW,GAAK,IAGlDoF,GAAO,OAAS2D,KAAKC,UAAUmF,KAAK0S,KAAKwN,YAAY/X,GAAGtW,IAAM,IAIjE,OAAOoF,GAORuiB,EAAS/lB,UAAU2H,KAAO,SAAS+kB,GAClC,OAAIA,GACJngB,KAAK0S,KAAOyN,EACLngB,MAFWA,KAAK0S,MAMxB8G,EAAS/lB,UAAU8rB,KAAO,SAASA,GAClC,YAAkB,IAARA,EACFvf,KAAK0S,KAAK6M,MAElBvf,KAAK0S,KAAK6M,KAAOA,EACVvf,OAGRwZ,EAAS/lB,UAAU+rB,MAAQ,SAASA,GACnC,YAAmB,IAATA,EACFxf,KAAK0S,KAAK8M,OAElBxf,KAAK0S,KAAK8M,MAAQA,EACXxf,OAGRwZ,EAAS/lB,UAAUgsB,OAAS,SAAStX,GACpC,YAAe,IAALA,EACFnI,KAAK0S,KAAK+M,QAElBzf,KAAK0S,KAAK+M,OAAStX,EACZnI,OAGRwZ,EAAS/lB,UAAUosB,gBAAkB,SAAS1X,GAC7C,YAAe,IAALA,EACFnI,KAAK0S,KAAKmN,iBAElB7f,KAAK0S,KAAKmN,gBAAkB1X,EACrBnI,OAGRwZ,EAAS/lB,UAAU2J,KAAO,SAAShC,GAClC,OAAGA,GACF4E,KAAK0S,KAAKtV,KAAOhC,EACV4E,MAEDA,KAAK0S,KAAKtV,MAGlBoc,EAAS/lB,UAAU2F,KAAO,SAASgC,GAClC,OAAGA,GACF4E,KAAK0S,KAAKtZ,KAAOgC,EACV4E,MAEDA,KAAK0S,KAAKtZ,MAGlBogB,EAAS/lB,UAAUssB,OAAS,SAAS3kB,GACpC,OAAGA,GACF4E,KAAK0S,KAAKqN,OAAS3kB,EACZ4E,MAEDA,KAAK0S,KAAKqN,QAGlBvG,EAAS/lB,UAAUqsB,MAAQ,SAAS1kB,GACnC,OAAGA,GACF4E,KAAK0S,KAAKoN,MAAQ1kB,EACX4E,MAEDA,KAAK0S,KAAKoN,OAGlBtG,EAAS/lB,UAAUisB,SAAW,SAASvtB,GACtC,YAAe,IAALA,GACT6N,KAAK0S,KAAKgN,SAAWvtB,EACd6N,MAEDA,KAAK0S,KAAKgN,UAGlBlG,EAAS/lB,UAAUmsB,UAAY,SAASztB,GACvC,YAAe,IAALA,GACT6N,KAAK0S,KAAKkN,UAAYztB,EACf6N,MAEDA,KAAK0S,KAAKkN,WAIlBpG,EAAS/lB,UAAUksB,OAAS,SAASS,GACpC,YAAe,IAALA,GACTpgB,KAAK0S,KAAKiN,OAASS,EACZpgB,MAEDA,KAAK0S,KAAKiN,QAOlBnG,EAAS/lB,UAAUmN,SAAW,SAASwa,GACtC,YAAkB,IAARA,EACFpb,KAAK0S,KAAK9R,UAElBZ,KAAK0S,KAAK9R,SAAWwa,EACdpb,OAGRwZ,EAAS/lB,UAAU6P,OAAS,SAAS+c,GACpC,YAAiB,IAAPA,EACFrgB,KAAK0S,KAAKpP,QAElBtD,KAAK0S,KAAKpP,OAAS+c,EACZrgB,OAIRwZ,EAAS/lB,UAAU4e,OAAS,SAASf,GACpC,YAAkB,IAARA,EACFtR,KAAK0S,KAAKL,QAElBrS,KAAK0S,KAAKL,OAASf,EACZtR,OAGRwZ,EAAS/lB,UAAUusB,MAAQ,SAASM,GACnC,OAAGA,GACFtgB,KAAK0S,KAAKsN,MAAQM,EACXtgB,MAEDA,KAAK0S,KAAKsN,OAGlBxG,EAAS/lB,UAAUwsB,MAAQ,SAASM,GACnC,OAAGA,GACFvgB,KAAK0S,KAAKuN,MAAQM,EACXvgB,MAEDA,KAAK0S,KAAKuN,OAQlBzG,EAAS/lB,UAAU0P,OAAS,SAASA,GACpC,YAAoB,IAAVA,EACFnD,KAAK0S,KAAKvP,QAElBnD,KAAK0S,KAAKvP,OAASA,EACZnD,OAGRwZ,EAAS/lB,UAAU0E,KAAO,SAASA,GAClC,YAAkB,IAARA,EACF6H,KAAK0S,KAAKva,MAElB6H,KAAK0S,KAAKva,KAAOA,EACV6H,OAMRwZ,EAAS/lB,UAAU4rB,QAAU,SAASpE,GACrC,YAAgB,IAANA,EACFjb,KAAK0S,KAAK2M,SAElBrf,KAAK0S,KAAK2M,QAAUpE,EACbjb,OAGRwZ,EAAS/lB,UAAUsG,KAAO,WAAiB,2BAALymB,EAAK,yBAALA,EAAK,gBAC1C,YAAkB,IAARA,GAAsC,GAAfA,EAAKxrB,OAC9BgL,KAAK0S,KAAK3Y,MAElBiG,KAAK0S,KAAK3Y,KAAOymB,EACVxgB,OAGRwZ,EAAS/lB,UAAUoqB,aAAe,SAASnE,GAK1C,OAJGA,GAAQA,EAAK1kB,SACfgL,KAAK0S,KAAK0M,UAAY3F,EAAyBC,GAC/C1Z,KAAKygB,iBAAmBzgB,KAAK0S,KAAK0M,UAAUpf,KAAK0S,KAAK0M,UAAUpqB,OAAS,IAEnEgL,MAGRwZ,EAAS/lB,UAAU0U,EAAI,SAASA,GAC/B,OAAGA,GACsB,MAArBA,EAAEpG,UAAU,EAAG,KAAYoG,EAAI,KAAOA,GACzCnI,KAAKygB,iBAAmBtY,EACjBnI,MAEDA,KAAKygB,kBAGbjH,EAAS/lB,UAAT,GAAwB,WACvB,GAAGuM,KAAKygB,iBAAiB,CACpBzgB,KAAK0S,KAAKwN,cAAalgB,KAAK0S,KAAKwN,YAAc,IAC/ClgB,KAAK0S,KAAKwN,YAAYlgB,KAAKygB,oBAAmBzgB,KAAK0S,KAAKwN,YAAYlgB,KAAKygB,kBAAoB,IAFzE,2BADUD,EACV,yBADUA,EACV,gBAGxBxgB,KAAK0S,KAAKwN,YAAYlgB,KAAKygB,kBAAkBzV,KAAKwV,GAEnD,OAAOxgB,MAGRwZ,EAAS/lB,UAAU+e,OAAS,SAASkO,GAMpC,OALG1gB,KAAKygB,mBACHzgB,KAAK0S,KAAKwN,cAAalgB,KAAK0S,KAAKwN,YAAc,IAC/ClgB,KAAK0S,KAAKwN,YAAYlgB,KAAKygB,oBAAmBzgB,KAAK0S,KAAKwN,YAAYlgB,KAAKygB,kBAAoB,IACjGzgB,KAAK0S,KAAKwN,YAAYlgB,KAAKygB,kBAAkBzV,KAAK0V,IAE5C1gB,MAGRwZ,EAAS/lB,UAAUuG,MAAQ,SAASlI,GACnC,OAAGA,GACFkO,KAAK0S,KAAK1Y,MAAQlI,EACXkO,MAEDA,KAAK0S,KAAK1Y,OAGlBwf,EAAS/lB,UAAU6E,MAAQ,SAASxG,GACnC,OAAGA,GACFkO,KAAK0S,KAAKpa,MAAQxG,EACXkO,MAEDA,KAAK0S,KAAKpa,OAOlBkhB,EAAS/lB,UAAUgN,SAAW,SAAS7M,GACtC,YAAe,IAALA,GACToM,KAAK0S,KAAKjS,SAAW7M,EACdoM,MAEDA,KAAK0S,KAAKjS,UAYlB+Y,EAAS/lB,UAAU0mB,MAAQ,SAASxf,EAAMvH,EAAK6mB,EAAS3f,GACvD,GAAG2f,GAAWja,KAAK0S,KAAK7P,OAASoX,EAAS,OAAO,EACjD,GAAG7mB,EAAI,CACN,GAAG4M,KAAK0S,KAAK0M,WAAapf,KAAK0S,KAAK0M,UAAUpqB,OAC7C,GAAiB,UAAd,EAAO5B,GAAgB,CACzB,IAA2C,GAAxC4M,KAAK0S,KAAK0M,UAAU9S,QAAQlZ,EAAI,IAAW,OAAO,EACrD,IAA2C,GAAxC4M,KAAK0S,KAAK0M,UAAU9S,QAAQlZ,EAAI,IAAW,OAAO,OAEjD,IAAwC,GAArC4M,KAAK0S,KAAK0M,UAAU9S,QAAQlZ,GAAY,OAAO,EAExD,GAAG4M,KAAK0S,MAAQ1S,KAAK0S,KAAK3Y,KACzB,GAAiB,UAAd,EAAO3G,IACT,IAAKuH,EAAKvH,GAAK,GAAG,WAA8D,GAAlD4M,KAAK0S,KAAK3Y,KAAKuS,QAAQ3R,EAAKvH,GAAK,GAAG,UACjE,OAAO,OAGJ,IAAKuH,EAAKvH,GAAK,WAA2D,GAA/C4M,KAAK0S,KAAK3Y,KAAKuS,QAAQ3R,EAAKvH,GAAK,UAChE,OAAO,EAGT,GAAG4M,KAAK0S,WAAoC,IAArB1S,KAAK0S,KAAK2M,QAChC,GAAiB,UAAd,EAAOjsB,IACT,GAAGuH,EAAKvH,EAAI,IAAI,WACf,IAAI4M,KAAK0S,KAAK2M,QAAS,OAAO,OAE1B,GAAGrf,KAAK0S,KAAK2M,QAAS,OAAO,OAGlC,GAAG1kB,EAAKvH,GAAK,WACZ,IAAI4M,KAAK0S,KAAK2M,QAAS,OAAO,OAE1B,GAAGrf,KAAK0S,KAAK2M,QAAS,OAAO,EAGpC,GAAiB,UAAd,EAAOjsB,GAAgB,CACzB,GAAG4M,KAAK0S,KAAKwN,aAAelgB,KAAK0S,KAAKwN,YAAY9sB,EAAI,IAAI,CACzD,IAAIuH,EAAM,OAAO,EACjB,IAAI,IAAI9I,EAAI,EAAGA,EAAEmO,KAAK0S,KAAKwN,YAAY9sB,EAAI,IAAI4B,OAAQnD,IACtD,IAAImO,KAAK2gB,KAAKhmB,EAAKvH,EAAI,IAAK4M,KAAK0S,KAAKwN,YAAY9sB,GAAK,IACtD,OAAO,EAIV,GAAG4M,KAAK0S,KAAKwN,aAAelgB,KAAK0S,KAAKwN,YAAY9sB,EAAI,IAAI,CACzD,IAAIuH,EAAM,OAAO,EACjB,IAAQ9I,EAAI,EAAGA,EAAEmO,KAAK0S,KAAKwN,YAAY9sB,EAAI,IAAI4B,OAAQnD,IACtD,IAAImO,KAAK2gB,KAAKhmB,EAAKvH,EAAI,IAAK4M,KAAK0S,KAAKwN,YAAY9sB,GAAK,IACtD,OAAO,QAKN,GAAG4M,KAAK0S,KAAKwN,aAAelgB,KAAK0S,KAAKwN,YAAY9sB,GAAK,CAC3D,IAAIuH,EAAM,OAAO,EACjB,IAAQ9I,EAAI,EAAGA,EAAEmO,KAAK0S,KAAKwN,YAAY9sB,GAAK4B,OAAQnD,IACnD,IAAImO,KAAK2gB,KAAKhmB,EAAKvH,GAAM4M,KAAK0S,KAAKwN,YAAY9sB,IAC9C,OAAO,EAIV,GAAc,QAAX6mB,EAAkB,CACpB,GAAGja,KAAK0S,KAAKzZ,QAAU+G,KAAK0S,KAAKzZ,QAAU7F,EAAI,GAAI,OAAO,EAC1D,GAAG4M,KAAK0S,KAAKxZ,QAAU8G,KAAK0S,KAAKxZ,QAAU9F,EAAI,GAAI,OAAO,QAI3D,IAAI,IAAIgP,KAAKpC,KAAK0S,KAAKwN,YAAY,CAClC,IAAIvlB,EAAM,OAAO,EACjB,IAAQ9I,EAAI,EAAGA,EAAEmO,KAAK0S,KAAKwN,YAAY9d,GAAGpN,OAAQnD,IACjD,IAAImO,KAAK2gB,KAAKhmB,EAAKyH,GAAIpC,KAAK0S,KAAKwN,YAAY9d,IAC5C,OAAO,EAKX,OAAG9H,QAAsC,IAArB0F,KAAK0S,KAAKpY,IAI/Bkf,EAAS/lB,UAAUktB,KAAO,SAAS7tB,EAAO8tB,GACzC,GAAwB,UAArB,EAAOA,IAA0BA,EAAW5rB,OAAO,CACrD,IAAI6rB,EAAc/tB,EAAM,UAAYA,EAAM,UAAYA,EACtD,OAA2C,GAAnC8tB,EAAWtU,QAAQuU,GAE5B,GAAwB,mBAAdD,EACT,OAAOA,EAAW9tB,IA4CpBlB,EAAOD,QAAQyF,EAAe9C,KAe9B8lB,EAAc3mB,UAAYlB,OAAOY,OAAOqmB,EAAS/lB,WACjD2mB,EAAc3mB,UAAUqtB,YAActH,EAKtCY,EAAc3mB,UAAUstB,QAAQ,SAASC,GACxC,OAAGA,GACFhhB,KAAK0S,KAAKqO,QAAQC,EACXhhB,MAEDA,KAAK0S,KAAKqO,QAAQC,GAG1B5G,EAAc3mB,UAAUwtB,aAAc,SAASC,GAC9C,OAAGA,GACFlhB,KAAK0S,KAAKuO,aAAaC,EAChBlhB,MAEDA,KAAK0S,KAAKuO,aAAaC,GAO/B9G,EAAc3mB,UAAUsP,YAAY,SAASA,GAC5C,OAAGA,GACF/C,KAAK0S,KAAK3P,YAAcA,EACjB/C,MAEDA,KAAK0S,KAAK3P,aAGlBqX,EAAc3mB,UAAU0tB,KAAK,SAAS3B,GACrC,OAAGA,GACFxf,KAAK0S,KAAKyO,KAAO3B,EACVxf,MAEDA,KAAK0S,KAAKyO,MAGlB/G,EAAc3mB,UAAU2tB,OAAO,SAAS5B,GACvC,OAAGA,GACFxf,KAAK0S,KAAK0O,OAAS5B,EACZxf,MAEDA,KAAK0S,KAAK0O,QAIlBhH,EAAc3mB,UAAU4tB,YAAY,SAAS9B,GAC5C,OAAGA,GACFvf,KAAK0S,KAAK2O,YAAc9B,EACjBvf,MAEDA,KAAK0S,KAAK2O,aAKlBjH,EAAc3mB,UAAU6tB,SAAS,SAASA,GACzC,OAAGA,GACFthB,KAAK0S,KAAK4O,SAAWA,EACdthB,MAEDA,KAAK0S,KAAK4O,UAIlBlH,EAAc3mB,UAAU8tB,IAAI,SAASC,GACpC,OAAGA,GACFxhB,KAAK0S,KAAK6O,IAAMC,EACTxhB,MAEDA,KAAK0S,KAAK6O,KAGlBnH,EAAc3mB,UAAUguB,YAAY,SAASC,GAC5C,OAAGA,GACF1hB,KAAK0S,KAAK+O,YAAcC,EACjB1hB,MAEDA,KAAK0S,KAAK+O,aAKlBrH,EAAc3mB,UAAUsG,KAAK,SAASA,GACrC,OAAGA,GACFiG,KAAK0S,KAAK3Y,KAAKA,EACRiG,MAEDA,KAAK0S,KAAK3Y,MAMlBqgB,EAAc3mB,UAAUse,OAAO,SAAS4P,GACvC,OAAGA,GACF3hB,KAAK0S,KAAKX,OAAO4P,EACV3hB,MAEDA,KAAK0S,KAAKX,QAIlBqI,EAAc3mB,UAAUmuB,gBAAgB,SAASC,GAChD,OAAGA,GACF7hB,KAAK0S,KAAKkP,gBAAgBC,EACnB7hB,MAGDA,KAAK0S,KAAKkP,iBAGlBxH,EAAc3mB,UAAUquB,SAAS,SAASA,GACzC,OAAGA,GACF9hB,KAAK0S,KAAKoP,SAASA,EACZ9hB,MAGDA,KAAK0S,KAAKoP,UAMlB1H,EAAc3mB,UAAUsuB,SAAS,SAASA,GACzC,OAAGA,GACF/hB,KAAK0S,KAAKqP,SAASA,EACZ/hB,MAGDA,KAAK0S,KAAKqP,UAGlB3H,EAAc3mB,UAAUuuB,UAAU,SAASA,GAC1C,OAAGA,GACFhiB,KAAK0S,KAAKsP,UAAUA,EACbhiB,MAEDA,KAAK0S,KAAKsP,WAGlB5H,EAAc3mB,UAAUqa,YAAc,SAAS/T,GAE9C,IAAI9C,EAAM+I,KAAK0S,KAAK7P,MAAQ,KAsD5B,OArDG7C,KAAK0S,KAAK0M,YACZnoB,GAAO+I,KAAK0S,KAAK0M,UAAU7U,KAAK,SAEjCtT,GAAO,UAE0B,IAAtB+I,KAAK+C,gBACf9L,GAAO,iBAAmB+I,KAAK+C,cAAgB,WAEpB,IAAlB/C,KAAK+gB,YACd9pB,GAAO,YAAc+I,KAAK+gB,UAAY,UAEN,IAAvB/gB,KAAKihB,iBACdhqB,GAAO,iBAAmB+I,KAAKihB,eAAiB,UAExB,IAAfjhB,KAAKmhB,SACdlqB,GAAO,UAAY+I,KAAKmhB,OAAS,WAEP,IAAjBnhB,KAAKohB,WACdnqB,GAAO,YAAc+I,KAAKohB,SAAW,WAEN,IAAtBphB,KAAKqhB,gBACdpqB,GAAO,gBAAkB+I,KAAKohB,SAAW,UAEb,IAAnBphB,KAAKshB,aACdrqB,GAAO,aAAe+I,KAAKshB,WAAa,UAEjB,IAAdthB,KAAKuhB,QACdtqB,GAAO,QAAU+I,KAAKuhB,MAAQ,UAEC,IAAtBvhB,KAAKyhB,gBACdxqB,GAAO,iBAAmB+I,KAAKyhB,cAAgB,WAEvB,IAAfzhB,KAAKjG,SACd9C,GAAO,UAAY+I,KAAKjG,OAAS,WAEP,IAAjBiG,KAAK+R,WACd9a,GAAO,WAAa+I,KAAK+R,SAAW,UAED,IAA1B/R,KAAK4hB,oBACd3qB,GAAO,oBAAsB+I,KAAK4hB,kBAAoB,UAE1B,IAAnB5hB,KAAK8hB,aACd7qB,GAAO,aAAe+I,KAAK8hB,WAAa,UAEZ,IAAnB9hB,KAAK+hB,aACd9qB,GAAO,cAAgB+I,KAAK+hB,WAAa,WAEZ,IAApB/hB,KAAKgiB,cACd/qB,GAAO,eAAiB+I,KAAKgiB,YAAc,WAElB,IAAhBhiB,KAAKhG,UACd/C,GAAO,WAAa+I,KAAKhG,QAAU,MAE7B/C,GA6BRojB,EAAgB5mB,UAAUwuB,MAAQ,WAAiB,IAClD,IAAIC,EAAW,IAAI9H,EAAc,SADiB,mBAALV,EAAK,yBAALA,EAAK,gBAIlD,OAFAwI,EAASrE,aAAanE,GACtB1Z,KAAKyS,MAAMzH,KAAKkX,GACTA,GAGR7H,EAAgB5mB,UAAU0uB,IAAM,WAAiB,IAChD,IAAID,EAAS,IAAI9H,EAAc,OADiB,mBAALV,EAAK,yBAALA,EAAK,gBAIhD,OAFAwI,EAASrE,aAAanE,GACtB1Z,KAAKyS,MAAMzH,KAAKkX,GACTA,GAGR7H,EAAgB5mB,UAAU2uB,KAAK,WAAiB,IAC/C,IAAIF,EAAS,IAAI9H,EAAc,QADgB,mBAALV,EAAK,yBAALA,EAAK,gBAI/C,OAFAwI,EAASrE,aAAanE,GACtB1Z,KAAKyS,MAAMzH,KAAKkX,GACTA,GAGR7H,EAAgB5mB,UAAU4uB,MAAM,WAAiB,IAChD,IAAIH,EAAS,IAAI9H,EAAc,SADiB,mBAALV,EAAK,yBAALA,EAAK,gBAIhD,OAFAwI,EAASrE,aAAanE,GACtB1Z,KAAKyS,MAAMzH,KAAKkX,GACTA,GAGR7H,EAAgB5mB,UAAU6uB,KAAK,WAAiB,IAC/C,IAAIJ,EAAS,IAAI9H,EAAc,QADgB,mBAALV,EAAK,yBAALA,EAAK,gBAI/C,OAFAwI,EAASrE,aAAanE,GACtB1Z,KAAKyS,MAAMzH,KAAKkX,GACTA,GAGR7H,EAAgB5mB,UAAU8uB,cAAc,WAAiB,IACxD,IAAIL,EAAS,IAAI9H,EAAc,iBADyB,mBAALV,EAAK,yBAALA,EAAK,gBAIxD,OAFAwI,EAASrE,aAAanE,GACtB1Z,KAAKyS,MAAMzH,KAAKkX,GACTA,GAGR7H,EAAgB5mB,UAAU+uB,OAAO,WAAiB,IACjD,IAAIN,EAAS,IAAI9H,EAAc,UADkB,mBAALV,EAAK,yBAALA,EAAK,gBAIjD,OAFAwI,EAASrE,aAAanE,GACtB1Z,KAAKyS,MAAMzH,KAAKkX,GACTA,GAIR7H,EAAgB5mB,UAAU6E,MAAM,SAASA,GACxC,OAAGA,GACF0H,KAAKyiB,OAAOnqB,EACL0H,MAEDA,KAAKyiB,QAGbpI,EAAgB5mB,UAAU8E,YAAY,SAASA,GAC9C,OAAGA,GACFyH,KAAK0iB,aAAanqB,EACXyH,MAEDA,KAAK0iB,cAIbrI,EAAgB5mB,UAAUkvB,OAAO,SAASA,GACzC,OAAGA,GACF3iB,KAAK4iB,QAAQD,EACN3iB,MAEDA,KAAK4iB,SAKbvI,EAAgB5mB,UAAUovB,OAAO,SAASC,GACzC,OAAGA,GACF9iB,KAAK+iB,QAAQD,EACN9iB,MAGDA,KAAK+iB,SAGb1I,EAAgB5mB,UAAU2H,KAAO,WAEhC,IADA,IAAI4nB,EAAW,GACPnxB,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAAQnD,IACnCmxB,EAAShY,KAAKhL,KAAKyS,MAAM5gB,GAAGuJ,QAK7B,IAAI0f,EAAO,GAcX,YAb2B,IAAjB9a,KAAK6iB,WACd/H,EAAI,OAAa9a,KAAK6iB,eAEG,IAAhB7iB,KAAK1H,UACdwiB,EAAI,MAAY9a,KAAK1H,cAEU,IAAtB0H,KAAKzH,gBACduiB,EAAI,YAAkB9a,KAAKzH,oBAED,IAAjByH,KAAK2iB,WACd7H,EAAI,OAAa9a,KAAK2iB,UAEd,CAAC,MAAS7H,EAAM,MAASkI,IAInC3I,EAAgB5mB,UAAUmnB,SAAW,SAASxJ,EAAQqB,GAErD,IADA,IAAIoI,EAAK,GACDhpB,EAAI,EAAGA,EAAE4gB,EAAMzd,OAAQnD,IAAI,CAClC,IAAIkpB,EAAK,IAAIvB,EACbuB,EAAG3f,KAAKqX,EAAM5gB,IACdgpB,EAAG7P,KAAK+P,GAET/a,KAAKyS,MAAQoI,OACc,IAAjBzJ,EAAOyR,QAChB7iB,KAAK6iB,OAAOzR,EAAOyR,aAEM,IAAhBzR,EAAO9Y,OAChB0H,KAAK1H,MAAM8Y,EAAO9Y,YAEa,IAAtB8Y,EAAO7Y,aAChByH,KAAKzH,YAAY6Y,EAAO7Y,kBAEE,IAAjB6Y,EAAOuR,QAChB3iB,KAAK2iB,OAAOvR,EAAOuR,SAIrBtI,EAAgB5mB,UAAUqa,YAAc,WACvC,IAAI7W,EAAM,8BACiB,IAAjB+I,KAAK6iB,WACd5rB,GAAO,eAAiB+I,KAAK6iB,SAAW,YAEf,IAAhB7iB,KAAK1H,UACdrB,GAAO,eAAiB+I,KAAK1H,QAAU,aAER,IAAtB0H,KAAKzH,gBACdtB,GAAO,qBAAuB+I,KAAKzH,cAAgB,aAEzB,IAAjByH,KAAK2iB,WACd1rB,GAAO,gBAAkB+I,KAAK2iB,SAAW,QAE1C,IAAI,IAAI9wB,EAAI,EAAGA,EAAEmO,KAAKyS,MAAMzd,OAASnD,IACpCoF,GAAO,QAAU+I,KAAKyS,MAAM5gB,GAAGic,YAAY,SAAW,KAEvD,OAAO7W,I,6CCnqDR,IAAMgsB,iBAAmBnvB,oBAAQ,IAC3BovB,iBAAmBpvB,oBAAQ,IAC3BqvB,kBAAoBrvB,oBAAQ,IAC5BsvB,kBAAoBtvB,oBAAQ,IAC5BuvB,iBAAmBvvB,oBAAQ,IAC3BwvB,iBAAmBxvB,oBAAQ,IAC3ByvB,qBAAuBzvB,oBAAQ,IAC/B0vB,qBAAuB1vB,oBAAQ,IAC/B2vB,eAAiB3vB,oBAAQ,IACzB4vB,eAAiB5vB,oBAAQ,IACzB6vB,iBAAmB7vB,oBAAQ,IAC3B8vB,iBAAmB9vB,oBAAQ,IAC3B+vB,gBAAkB/vB,oBAAQ,IAC1BgwB,gBAAkBhwB,oBAAQ,IAC1BiwB,eAAiBjwB,oBAAQ,IACzBkwB,iBAAmBlwB,oBAAQ,IAC3BmwB,gBAAkBnwB,oBAAQ,IAC1BowB,gBAAkBpwB,oBAAQ,IAC1BqwB,gBAAkBrwB,oBAAQ,IAC1BswB,gBAAkBtwB,oBAAQ,IAC1BuwB,iBAAmBvwB,oBAAQ,IAC3BwwB,eAAiBxwB,oBAAQ,IAG/B,SAASywB,wBAAwBC,EAAcpR,GAC9CoR,EAAaC,uBAAuB,oBAAqB,CAACzqB,MAAO,mBAAoB,CAAC,gBACtFwqB,EAAaE,uBAAuB,oBAAqB,CAAC1qB,MAAO,mBAAoB,CAAC,gBACtFwqB,EAAaC,uBAAuB,mBAAoB,CAACzqB,MAAO,iBAAkB,CAAC,UACnFwqB,EAAaE,uBAAuB,mBAAoB,CAAC1qB,MAAO,mBAAoB,CAAC,UACrFwqB,EAAaC,uBAAuB,uBAAwB,CAACzqB,MAAO,qBAAsB,CAAC,iBAAkB,yBAA0B,0BACvIwqB,EAAaE,uBAAuB,uBAAwB,CAAC1qB,MAAO,qBAAsB,CAAC,iBAAkB,yBAA0B,0BACvIwqB,EAAaC,uBAAuB,iBAAkB,CAACzqB,MAAO,eAAgB,CAAC,WAAY,WAAY,eAAgB,YACtH,iBAAkB,aAAc,WAAY,iBAAkB,gBAAiB,sBAChFwqB,EAAaE,uBAAuB,iBAAkB,CAAC1qB,MAAO,eAAgB,CAAC,WAAY,WAAY,gBAAiB,eAAgB,YACvI,iBAAkB,aAAc,WAAY,iBAAkB,gBAAiB,sBAChFwqB,EAAaC,uBAAuB,mBAAoB,CAACzqB,MAAO,mBAAoB,CAAC,aACrFwqB,EAAaE,uBAAuB,mBAAoB,CAAC1qB,MAAO,qBAAsB,CAAC,aACvFwqB,EAAaC,uBAAuB,kBAAmB,CAACzqB,MAAO,gBAAiB,CAAC,UAAW,aAAc,qBAC1GwqB,EAAaE,uBAAuB,kBAAmB,CAAC1qB,MAAO,gBAAiB,CAAC,qBACjFwqB,EAAaC,uBAAuB,kBAAmB,CAACzqB,MAAO,gBAAiB,CAAC,UAAW,aAAc,qBAC1GwqB,EAAaE,uBAAuB,kBAAmB,CAAC1qB,MAAO,gBAAiB,CAAC,qBACjFwqB,EAAaC,uBAAuB,iBAAkB,CAACzqB,MAAO,eAAgB,CAAC,UAAW,eAC1FwqB,EAAaC,uBAAuB,mBAAoB,CAACzqB,MAAO,sBAC9D,CAAC,cAAe,aAAc,YAAa,YAAa,cAAe,WACtE,yBAA0B,sBAAuB,sBAAuB,2BAC3EwqB,EAAaC,uBAAuB,kBAAmB,CAACzqB,MAAO,gBAAiB,CAAC,iBAAkB,gBAAiB,mBAAoB,qBACxIwqB,EAAaE,uBAAuB,kBAAmB,CAAC1qB,MAAO,gBAAiB,CAAC,iBAAkB,gBAAiB,mBAAoB,qBACxIwqB,EAAaG,gBAAkB,mBAC/BH,EAAaI,gBAAkB,mBAC/BC,WAAWL,EAAcpR,GACzBoR,EAAaM,eAAiB,SAAS/qB,EAAM5B,GAE5C,OADQ4sB,mBAAmBhrB,EAAM5B,IAKnC,SAAS4sB,mBAAmBhrB,KAAM1B,SACjC,IACC,IAAIkO,OAASxG,KAAK,OAAShG,KAAO,IAAMA,KAAO,IAAMa,KAAKC,UAAUxC,SAAW,KAEhF,MAAM4H,GACL,OAAO,EAER,OAAOsG,OAGR,SAASse,WAAWL,EAAcpR,GAC9BA,IAAwC,GAA7BA,EAAQ9G,QAAQ,WAC7BkY,EAAaE,uBAAuB,kBAAmB,CAAC1qB,MAAO,qBAAsB,CAAC,iBAAkB,yBAA0B,0BAClIwqB,EAAaC,uBAAuB,kBAAmB,CAACzqB,MAAO,qBAAsB,CAAC,iBAAkB,yBAA0B,2BAEhIoZ,IAAwC,GAA7BA,EAAQ9G,QAAQ,UAC7BkY,EAAaE,uBAAuB,mBAAoB,CAAC1qB,MAAO,6BAA8B,CAAC,aAE7FoZ,IAA0C,GAA/BA,EAAQ9G,QAAQ,YAC7BkY,EAAaQ,2BAA2B,iBAAkB,CAAChrB,MAAO,4BAA6B,YAIjGpI,OAAOD,QAAU,CAACozB,sCAAoBR,kD,gBC/EtC,IAAMpkB,EAAkBrM,EAAQ,GAEhC,SAASmvB,EAAiB5qB,GACzB2H,KAAKuf,QAASlnB,IAAWA,EAAQknB,OAAQlnB,EAAQknB,KACjDvf,KAAK4D,IAAQvL,GAAWA,EAAQuL,IAAO,0BAA4BvL,EAAQuL,IAAM,yBACjF5D,KAAK8B,iBAAiBzJ,IAAWA,EAAQyJ,gBAAgBzJ,EAAQyJ,cACjE9B,KAAK6B,iBAAiBxJ,IAAWA,EAAQwJ,gBAAgBxJ,EAAQwJ,cACjE7B,KAAKilB,cAAc5sB,IAAWA,EAAQ4sB,aAAa5sB,EAAQ4sB,WAG5DhC,EAAiBxvB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACxD,IAAIppB,EAAQgQ,EAAMpQ,MAClB,OAAOsN,KAAKqS,OAAOvf,IAGpBmwB,EAAiBxvB,UAAU0xB,YAAc,SAASjJ,GACjD,OAAOlc,KAAKqS,OAAO6J,EAAWppB,UAG/BmwB,EAAiBxvB,UAAU4e,OAAS,SAASvf,GAC5C,IAAI0P,EAAQlM,SAASgD,cAAc,QAanC,OAZAkJ,EAAMjJ,aAAa,QAASyG,KAAK4D,KACjCpB,EAAMjJ,aAAa,aAAczG,GAC9BkN,KAAKilB,YAA2B,MAAbjlB,KAAKjG,OAC1BjH,GAAS,KAAOkN,KAAKjG,KAAO,KAE1BiG,KAAK8B,eAAiB9B,KAAK6B,cAC7B1B,EAAgBilB,kBAAkB5iB,EAAO1P,EAAOkN,KAAK6B,cAAe7B,KAAK8B,gBAGzEhP,EAAQwD,SAASuD,eAAe/G,GAChC0P,EAAM9I,YAAY5G,IAEZ0P,GAGR5Q,EAAOD,QAAQ,CAACsxB,qB,6BClChBrxB,EAAOD,QAAU,SAAcoD,EAAIgC,GACjC,OAAO,WAEL,IADA,IAAIoB,EAAO,IAAIogB,MAAM7hB,UAAU1B,QACtBnD,EAAI,EAAGA,EAAIsG,EAAKnD,OAAQnD,IAC/BsG,EAAKtG,GAAK6E,UAAU7E,GAEtB,OAAOkD,EAAGswB,MAAMtuB,EAASoB,M,6BCN7B,IAAImtB,EAAQ,EAAQ,GAEpB,SAASC,EAAO7wB,GACd,OAAOkkB,mBAAmBlkB,GACxBwC,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KACjBA,QAAQ,OAAQ,KAChBA,QAAQ,QAAS,KACjBA,QAAQ,OAAQ,KAChBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KAUrBtF,EAAOD,QAAU,SAAkBuP,EAAKskB,EAAQC,GAE9C,IAAKD,EACH,OAAOtkB,EAGT,IAAIwkB,EACJ,GAAID,EACFC,EAAmBD,EAAiBD,QAC/B,GAAIF,EAAMtvB,kBAAkBwvB,GACjCE,EAAmBF,EAAOhxB,eACrB,CACL,IAAI8V,EAAQ,GAEZgb,EAAMzwB,QAAQ2wB,GAAQ,SAAmB9wB,EAAKtB,GACxCsB,UAIA4wB,EAAM7wB,QAAQC,GAChBtB,GAAY,KAEZsB,EAAM,CAACA,GAGT4wB,EAAMzwB,QAAQH,GAAK,SAAoByT,GACjCmd,EAAM3vB,OAAOwS,GACfA,EAAIA,EAAEwd,cACGL,EAAM3wB,SAASwT,KACxBA,EAAIvN,KAAKC,UAAUsN,IAErBmC,EAAMU,KAAKua,EAAOnyB,GAAO,IAAMmyB,EAAOpd,WAI1Cud,EAAmBpb,EAAMC,KAAK,KAGhC,GAAImb,EAAkB,CACpB,IAAIE,EAAgB1kB,EAAIoL,QAAQ,MACT,IAAnBsZ,IACF1kB,EAAMA,EAAI4I,MAAM,EAAG8b,IAGrB1kB,KAA8B,IAAtBA,EAAIoL,QAAQ,KAAc,IAAM,KAAOoZ,EAGjD,OAAOxkB,I,6BCnETtP,EAAOD,QAAU,SAAkBmB,GACjC,SAAUA,IAASA,EAAM+yB,c,6BCD3B,IAAIP,EAAQ,EAAQ,GAChBQ,EAAsB,EAAQ,IAE9BC,EAAuB,CACzB,eAAgB,qCAGlB,SAASC,EAAsB9qB,EAASpI,IACjCwyB,EAAM5vB,YAAYwF,IAAYoqB,EAAM5vB,YAAYwF,EAAQ,mBAC3DA,EAAQ,gBAAkBpI,GAiB9B,IAZMmzB,EAYFC,EAAW,CACbD,SAXuB,oBAAZE,SAAuE,qBAA5C5zB,OAAOkB,UAAUe,SAASxC,KAAKm0B,SAEnEF,EAAU,EAAQ,IACiB,oBAAnB1uB,iBAEhB0uB,EAAU,EAAQ,KAEbA,GAMPG,iBAAkB,CAAC,SAA0BzrB,EAAMO,GAGjD,OAFA4qB,EAAoB5qB,EAAS,UAC7B4qB,EAAoB5qB,EAAS,gBACzBoqB,EAAMpwB,WAAWyF,IACnB2qB,EAAMrwB,cAAc0F,IACpB2qB,EAAM/wB,SAASoG,IACf2qB,EAAMxvB,SAAS6E,IACf2qB,EAAM1vB,OAAO+E,IACb2qB,EAAMzvB,OAAO8E,GAENA,EAEL2qB,EAAMlwB,kBAAkBuF,GACnBA,EAAKpF,OAEV+vB,EAAMtvB,kBAAkB2E,IAC1BqrB,EAAsB9qB,EAAS,mDACxBP,EAAKnG,YAEV8wB,EAAM3wB,SAASgG,IACjBqrB,EAAsB9qB,EAAS,kCACxBN,KAAKC,UAAUF,IAEjBA,IAGT0rB,kBAAmB,CAAC,SAA2B1rB,GAE7C,GAAoB,iBAATA,EACT,IACEA,EAAOC,KAAKsT,MAAMvT,GAClB,MAAOsF,IAEX,OAAOtF,IAOT2rB,QAAS,EAETC,eAAgB,aAChBC,eAAgB,eAEhBC,kBAAmB,EAEnBC,eAAgB,SAAwB/hB,GACtC,OAAOA,GAAU,KAAOA,EAAS,MAIrCuhB,EAAShrB,QAAU,CACjByrB,OAAQ,CACN,OAAU,sCAIdrB,EAAMzwB,QAAQ,CAAC,SAAU,MAAO,SAAS,SAA6Bwb,GACpE6V,EAAShrB,QAAQmV,GAAU,MAG7BiV,EAAMzwB,QAAQ,CAAC,OAAQ,MAAO,UAAU,SAA+Bwb,GACrE6V,EAAShrB,QAAQmV,GAAUiV,EAAM/uB,MAAMwvB,MAGzCn0B,EAAOD,QAAUu0B,G,6BC/FjB,IAAIZ,EAAQ,EAAQ,GAChBsB,EAAS,EAAQ,IACjBC,EAAW,EAAQ,IACnBC,EAAe,EAAQ,IACvBC,EAAkB,EAAQ,IAC1BC,EAAc,EAAQ,IAE1Bp1B,EAAOD,QAAU,SAAoByf,GACnC,OAAO,IAAI6V,SAAQ,SAA4BC,EAASC,GACtD,IAAIC,EAAchW,EAAOzW,KACrB0sB,EAAiBjW,EAAOlW,QAExBoqB,EAAMpwB,WAAWkyB,WACZC,EAAe,gBAGxB,IAAIC,EAAU,IAAI/vB,eAGlB,GAAI6Z,EAAOmW,KAAM,CACf,IAAIC,EAAWpW,EAAOmW,KAAKC,UAAY,GACnCC,EAAWrW,EAAOmW,KAAKE,UAAY,GACvCJ,EAAeK,cAAgB,SAAWC,KAAKH,EAAW,IAAMC,GA0ElE,GAvEAH,EAAQ5vB,KAAK0Z,EAAOf,OAAOxG,cAAegd,EAASzV,EAAOlQ,IAAKkQ,EAAOoU,OAAQpU,EAAOqU,mBAAmB,GAGxG6B,EAAQhB,QAAUlV,EAAOkV,QAGzBgB,EAAQM,mBAAqB,WAC3B,GAAKN,GAAkC,IAAvBA,EAAQO,aAQD,IAAnBP,EAAQ3iB,QAAkB2iB,EAAQQ,aAAwD,IAAzCR,EAAQQ,YAAYxb,QAAQ,UAAjF,CAKA,IAAIyb,EAAkB,0BAA2BT,EAAUR,EAAaQ,EAAQU,yBAA2B,KAEvGztB,EAAW,CACbI,KAFkByW,EAAO6W,cAAwC,SAAxB7W,EAAO6W,aAAiDX,EAAQ/sB,SAA/B+sB,EAAQzvB,aAGlF8M,OAAQ2iB,EAAQ3iB,OAChBujB,WAAYZ,EAAQY,WACpBhtB,QAAS6sB,EACT3W,OAAQA,EACRkW,QAASA,GAGXV,EAAOM,EAASC,EAAQ5sB,GAGxB+sB,EAAU,OAIZA,EAAQa,QAAU,WACXb,IAILH,EAAOH,EAAY,kBAAmB5V,EAAQ,eAAgBkW,IAG9DA,EAAU,OAIZA,EAAQc,QAAU,WAGhBjB,EAAOH,EAAY,gBAAiB5V,EAAQ,KAAMkW,IAGlDA,EAAU,MAIZA,EAAQe,UAAY,WAClBlB,EAAOH,EAAY,cAAgB5V,EAAOkV,QAAU,cAAelV,EAAQ,eACzEkW,IAGFA,EAAU,MAMRhC,EAAMpvB,uBAAwB,CAChC,IAAIoyB,EAAU,EAAQ,IAGlBC,GAAanX,EAAOoX,iBAAmBzB,EAAgB3V,EAAOlQ,OAASkQ,EAAOmV,eAChF+B,EAAQG,KAAKrX,EAAOmV,qBACpBxY,EAEEwa,IACFlB,EAAejW,EAAOoV,gBAAkB+B,GAuB5C,GAlBI,qBAAsBjB,GACxBhC,EAAMzwB,QAAQwyB,GAAgB,SAA0B3yB,EAAKtB,QAChC,IAAhBg0B,GAAqD,iBAAtBh0B,EAAIs1B,qBAErCrB,EAAej0B,GAGtBk0B,EAAQqB,iBAAiBv1B,EAAKsB,MAMhC0c,EAAOoX,kBACTlB,EAAQkB,iBAAkB,GAIxBpX,EAAO6W,aACT,IACEX,EAAQW,aAAe7W,EAAO6W,aAC9B,MAAOhoB,GAGP,GAA4B,SAAxBmR,EAAO6W,aACT,MAAMhoB,EAM6B,mBAA9BmR,EAAOwX,oBAChBtB,EAAQ9mB,iBAAiB,WAAY4Q,EAAOwX,oBAIP,mBAA5BxX,EAAOyX,kBAAmCvB,EAAQwB,QAC3DxB,EAAQwB,OAAOtoB,iBAAiB,WAAY4Q,EAAOyX,kBAGjDzX,EAAO2X,aAET3X,EAAO2X,YAAYC,QAAQ3tB,MAAK,SAAoB4F,GAC7CqmB,IAILA,EAAQ2B,QACR9B,EAAOlmB,GAEPqmB,EAAU,cAIMvZ,IAAhBqZ,IACFA,EAAc,MAIhBE,EAAQ3vB,KAAKyvB,Q,6BCzKjB,IAAI8B,EAAe,EAAQ,IAY3Bt3B,EAAOD,QAAU,SAAqBw3B,EAAS/X,EAAQgY,EAAM9B,EAAS/sB,GACpE,IAAI6T,EAAQ,IAAIiH,MAAM8T,GACtB,OAAOD,EAAa9a,EAAOgD,EAAQgY,EAAM9B,EAAS/sB,K,6BCdpD,IAAI+qB,EAAQ,EAAQ,GAUpB1zB,EAAOD,QAAU,SAAqB03B,EAASC,GAE7CA,EAAUA,GAAW,GACrB,IAAIlY,EAAS,GAkCb,OAhCAkU,EAAMzwB,QAAQ,CAAC,MAAO,SAAU,SAAU,SAAS,SAA0B8M,QAC9C,IAAlB2nB,EAAQ3nB,KACjByP,EAAOzP,GAAQ2nB,EAAQ3nB,OAI3B2jB,EAAMzwB,QAAQ,CAAC,UAAW,OAAQ,UAAU,SAA6B8M,GACnE2jB,EAAM3wB,SAAS20B,EAAQ3nB,IACzByP,EAAOzP,GAAQ2jB,EAAM3uB,UAAU0yB,EAAQ1nB,GAAO2nB,EAAQ3nB,SACpB,IAAlB2nB,EAAQ3nB,GACxByP,EAAOzP,GAAQ2nB,EAAQ3nB,GACd2jB,EAAM3wB,SAAS00B,EAAQ1nB,IAChCyP,EAAOzP,GAAQ2jB,EAAM3uB,UAAU0yB,EAAQ1nB,SACL,IAAlB0nB,EAAQ1nB,KACxByP,EAAOzP,GAAQ0nB,EAAQ1nB,OAI3B2jB,EAAMzwB,QAAQ,CACZ,UAAW,mBAAoB,oBAAqB,mBACpD,UAAW,kBAAmB,UAAW,eAAgB,iBACzD,iBAAkB,mBAAoB,qBAAsB,mBAC5D,iBAAkB,eAAgB,YAAa,aAAc,cAC7D,eACC,SAA0B8M,QACE,IAAlB2nB,EAAQ3nB,GACjByP,EAAOzP,GAAQ2nB,EAAQ3nB,QACW,IAAlB0nB,EAAQ1nB,KACxByP,EAAOzP,GAAQ0nB,EAAQ1nB,OAIpByP,I,6BCzCT,SAASmY,EAAOJ,GACdnpB,KAAKmpB,QAAUA,EAGjBI,EAAO91B,UAAUe,SAAW,WAC1B,MAAO,UAAYwL,KAAKmpB,QAAU,KAAOnpB,KAAKmpB,QAAU,KAG1DI,EAAO91B,UAAUoyB,YAAa,EAE9Bj0B,EAAOD,QAAU43B,G,gBClBjB,MAAMpc,EAAQrZ,EAAQ,IAChB01B,EAAQ11B,EAAQ,GAChBI,EAAeJ,EAAQ,GAW7B,SAASC,EAAuB01B,EAAkBr2B,GACjD4M,KAAK0pB,WAAa,GAClB1pB,KAAKypB,iBAAmBA,EACpBzpB,KAAKypB,iBAAiB9Y,QAAUvd,GACnC4M,KAAK2pB,aAAa3pB,KAAKypB,iBAAiB9Y,OAAQvd,GAIlDW,EAAuBN,UAAUm2B,aAAe,SAAUC,GAEzD,OADKA,IAAWA,EAAY7pB,KAAKypB,iBAAiBI,gBAC9CA,IAAa7pB,KAAK0pB,WAAWG,KAAmB7pB,KAAK0pB,WAAWG,GAAWz2B,KAQhFW,EAAuBN,UAAUk2B,aAAe,SAAUG,EAAM12B,GAC5C,iBAARA,GAAoBA,EAAI4D,cACG,IAA1BgJ,KAAK0pB,WAAWI,KAC1B9pB,KAAK0pB,WAAWI,GAAQ,IAEzB9pB,KAAK0pB,WAAWI,GAAM12B,IAAMA,EAAI4D,SASlCjD,EAAuBN,UAAUs2B,cAAgB,SAAUD,EAAME,QAC3B,IAA1BhqB,KAAK0pB,WAAWI,KAC1B9pB,KAAK0pB,WAAWI,GAAQ,IAEzB,MAAMG,EAAmBD,EAAez3B,OAAOoW,KAAKqhB,GAAgB,GAEpE,IAAK,MAAME,KAAQD,EACf,GAAa,uBAATC,GAAiCF,EAAaE,GAAO,CACvD,MAAMC,GAA8C,IAAtC5R,MAAM9jB,QAAQu1B,EAAaE,IACrCF,EAAaE,GACb,CAACF,EAAaE,IAElB,IAAK,IAAIr4B,EAAI,EAAGA,EAAIs4B,EAAMn1B,OAAQnD,GAAK,EAAG,CACxC,IAAIgR,EAAQsnB,EAAMt4B,GAAG,4BACrB,MAAMu4B,EAAUD,EAAMt4B,GAAG,oBAEI,IAAzB0mB,MAAM9jB,QAAQoO,KAAkBA,EAAQ,CAACA,IAC7C,MAAMwnB,EAAald,EAAMmL,sBAAsB8R,GAE/C,IAAK,IAAIE,EAAI,EAAGA,EAAIznB,EAAM7N,OAAQs1B,GAAK,EAAG,CACxC,MAAMC,EAAO1nB,EAAMynB,QAC+B,IAAvCtqB,KAAK0pB,WAAWI,GAAMS,EAAK,UACpCvqB,KAAK0pB,WAAWI,GAAMS,EAAK,QAAUA,GAEvCvqB,KAAK0pB,WAAWI,GAAMS,EAAK,QAAQ,sBAAwBF,SAI/DrqB,KAAK0pB,WAAWI,GAAMI,GAAQF,EAAaE,IAKlDn2B,EAAuBN,UAAU+2B,gBAAkB,WAClD,YAAgE,IAAlDxqB,KAAK0pB,WAAW1pB,KAAKypB,iBAAiB9Y,SAGrD5c,EAAuBN,UAAUg3B,mBAAqB,SAAUnwB,EAAQowB,EAAM/Z,GAC7E,IAAK3Q,KAAKypB,iBAAiBkB,mBACqC,IAArD3qB,KAAKypB,iBAAiBmB,4BACtBtwB,IAAWkvB,EAAM9R,QAAW,OAAO,EAK9C,IAAImT,EAMJ,GATAla,EAASA,GAAU3Q,KAAKypB,iBAAiB9Y,OACzC+Z,EAAOA,GAAQ1qB,KAAKypB,iBAAiBiB,KAIjCpwB,IAAWkvB,EAAMrR,gBACpB0S,EAAM7qB,KAAK8qB,gBAAgBna,GACjB+Z,EAAMG,EAAM7qB,KAAK+qB,YAAYL,GACnCjrB,QAAQC,IAAI,UAAWiR,EAAQ+Z,GAChCG,EAAK,CACR,MAAMV,EAAQU,EAAI,sBAClB,GAAIV,IAAkD,IAAzCA,EAAM7d,QAAS,YAAWhS,KAAkB,OAAO,OAEhEmF,QAAQC,IAAI,gBAAiBM,KAAK0pB,WAAYpvB,EAAQqW,EAAQ+Z,GAG/D,OADA1qB,KAAKoO,MAAQla,EAAauc,aAAanW,EAAQowB,EAAM/Z,IAC9C,GAGR5c,EAAuBN,UAAUq3B,gBAAkB,SAAUE,GAC5D,MAAM9pB,EAAO8pB,GAAQhrB,KAAKypB,iBAAiB9Y,OACrCsa,EAAgBjrB,KAAK0pB,WAAWxoB,IAAQ,GACxCgqB,EAAQ34B,OAAOoW,KAAKsiB,GAE1B,IAAK,MAAME,KAAOD,EACjB,GAA2C,oBAAvClrB,KAAK0pB,WAAWxoB,GAAKiqB,GAAK,SAC7B,OAAOnrB,KAAK0pB,WAAWxoB,GAAKiqB,GAG9B,OAAO,GAGRp3B,EAAuBN,UAAUs3B,YAAc,SAAUL,EAAMM,GAC9D,MAAM9pB,EAAO8pB,GAAQhrB,KAAKypB,iBAAiB9Y,OAE3C,OADA+Z,EAAQA,GAAQ1qB,KAAKypB,iBAAiBiB,KACF,iBAAzB1qB,KAAK0pB,WAAWxoB,UAGe,IAA/BlB,KAAK0pB,WAAWxoB,GAAKwpB,GAAgC1qB,KAAK0pB,WAAWxoB,GAAKwpB,IAErFA,EAAO1qB,KAAKorB,eAAeV,QAEe,IAA/B1qB,KAAK0pB,WAAWxoB,GAAKwpB,GAAgC1qB,KAAK0pB,WAAWxoB,GAAKwpB,QAArF,KAKD32B,EAAuBN,UAAU43B,mBAAqB,SAAUL,GAC/D,MAAM9pB,EAAO8pB,GAAQhrB,KAAKypB,iBAAiB9Y,OACrC2a,EAAS,GACTL,EAAgBjrB,KAAK0pB,WAAWxoB,IAAQ,GAE9C,IAAK,MAAMiqB,KAAO54B,OAAOoW,KAAKsiB,GACc,sBAAvCjrB,KAAK0pB,WAAWxoB,GAAKiqB,GAAK,WAC7BG,EAAOH,GAAOnrB,KAAK0pB,WAAWxoB,GAAKiqB,IAGrC,OAAOG,GAMRv3B,EAAuBN,UAAU83B,SAAW,SAAUb,EAAMM,IAC3DN,EAAOA,GAAQ1qB,KAAKypB,iBAAiBiB,OAEzB1qB,KAAKypB,iBAAiBiB,MAAQ1qB,KAAKypB,iBAAiBiB,OAASA,IACxE1qB,KAAKypB,iBAAiBiB,MAAO,GAG9B,MAAMxpB,EAAM8pB,GAAQhrB,KAAKypB,iBAAiB9Y,OACpC6a,EAAUxrB,KAAKorB,eAAeV,GAChCc,GAAWxrB,KAAK0pB,WAAWxoB,IAAQlB,KAAK0pB,WAAWxoB,GAAKsqB,WACpDxrB,KAAK0pB,WAAWxoB,GAAKsqB,IAK9Bz3B,EAAuBN,UAAU23B,eAAiB,SAAUV,GAC3D,MAAQ,OAAMA,KAGf32B,EAAuBN,UAAUs3B,YAAc,SAAUL,EAAMM,GAC9D,MAAM9pB,EAAM8pB,GAAQhrB,KAAKypB,iBAAiB9Y,OAE1C,OADA+Z,EAAOA,GAAQ1qB,KAAKypB,iBAAiBiB,KACD,iBAAzB1qB,KAAK0pB,WAAWxoB,UAGe,IAA/BlB,KAAK0pB,WAAWxoB,GAAKwpB,GAAgC1qB,KAAK0pB,WAAWxoB,GAAKwpB,IAErFA,EAAO1qB,KAAKorB,eAAeV,QAEe,IAA/B1qB,KAAK0pB,WAAWxoB,GAAKwpB,GAAgC1qB,KAAK0pB,WAAWxoB,GAAKwpB,QAArF,KAKD94B,EAAOD,QAAUoC,G,gBCvLjB,MAAME,EAAWH,EAAQ,IAEzB,SAASE,EAAiBwxB,GACzB,MAAMiG,EAAYjG,GAAU,GAC5BxlB,KAAK2Q,QAAS,EACd3Q,KAAK0qB,MAAO,EACZ1qB,KAAK0rB,OAAQ,EACTD,EAAU9a,QAAQ3Q,KAAK2rB,UAAUF,EAAU9a,QAC3C8a,EAAU/a,IAAI1Q,KAAK4rB,MAAMH,EAAU/a,IACnC+a,EAAUlZ,KAAKvS,KAAK6rB,YAAYJ,EAAUlZ,KAM9CvS,KAAK8rB,eAAiBL,EAAUK,gBAAkB,YAElD9rB,KAAK+rB,YAAcN,EAAUM,cAAe,EAE5C/rB,KAAK4qB,2BAA6Ba,EAAUb,6BAA8B,EAG3E52B,EAAiBP,UAAUo2B,UAAY,WACtC,OAAO7pB,KAAK2Q,QAIb3c,EAAiBP,UAAUk3B,eAAiB,WAC3C,MAA+B,cAAxB3qB,KAAK8rB,gBAGb93B,EAAiBP,UAAUu4B,WAAa,WACvC,OAA4B,IAArBhsB,KAAK+rB,aAGb/3B,EAAiBP,UAAUw4B,UAAY,WACtC,MAAQ,GAAEjsB,KAAKksB,kBAEhBl4B,EAAiBP,UAAU04B,SAAW,WACrC,MAAQ,GAAEnsB,KAAKksB,gBAEhBl4B,EAAiBP,UAAU24B,SAAW,WACrC,MAAQ,GAAEpsB,KAAKksB,iBAEhBl4B,EAAiBP,UAAU44B,OAAS,WACnC,MAAQ,GAAErsB,KAAKksB,oBAAoBlsB,KAAK0rB,MAAQ1rB,KAAK0rB,MAAQ,MAG9D13B,EAAiBP,UAAUy4B,MAAQ,SAAUl6B,GAE5C,GAAIgO,KAAKssB,mBAAoB,CAC5B,MAAMC,EAAUvsB,KAAK2Q,OAAO5O,UAAU,EAAG/B,KAAK2Q,OAAOrO,YAAY,eAEjE,IAAKtQ,GAAiB,WAATA,EACZ,MAAQ,GAAEu6B,KAAWvsB,KAAK0qB,gBACzB,GAAa,aAAT14B,EACL,MAAQ,GAAEu6B,KAAWvsB,KAAK0qB,OAG5B,OAAO1qB,KAAK2Q,OAAS3Q,KAAK0qB,MAG3B12B,EAAiBP,UAAU64B,iBAAmB,WAC7C,SAAItsB,KAAK2Q,QAAU3Q,KAAK2Q,OAAOrO,YAAY,gBAAkBtC,KAAK2Q,OAAO3b,OAAS,KAUnFhB,EAAiBP,UAAUk4B,UAAY,SAAUa,EAAUvS,GAC1D,MAAMwS,EAAS,IAAIx4B,EAASgmB,GAC5B,QAAIwS,EAAOC,eAAeF,KACzBxsB,KAAK2Q,OAAS8b,EAAO9b,SACrB3Q,KAAK0qB,MAAO,EACZ1qB,KAAK0rB,OAAQ,GACN,IAKT13B,EAAiBP,UAAUm4B,MAAQ,SAAUY,EAAUvS,GACtD,MAAMwS,EAAS,IAAIx4B,EAASgmB,GAC5B,QAAIwS,EAAOE,UAAUH,KAChBC,EAAO9b,WAAU3Q,KAAK2Q,OAAS8b,EAAO9b,UAC1C3Q,KAAK0qB,KAAO+B,EAAO/B,OACnB1qB,KAAK0rB,OAAQ,GACN,IAOT13B,EAAiBP,UAAUm5B,aAAe,SAAUJ,EAAUvS,GAC7D,MAAMwS,EAAS,IAAIx4B,EAASgmB,GAC5B,QAAIwS,EAAOI,eAAeL,KACrBC,EAAO9b,WAAU3Q,KAAK2Q,OAAS8b,EAAO9b,UAC1C3Q,KAAK0qB,KAAO+B,EAAO/B,OACnB1qB,KAAK0rB,OAAQ,GACN,IAKT13B,EAAiBP,UAAUo4B,YAAc,SAAUW,EAAUvS,GAC5D,MAAMwS,EAAS,IAAIx4B,EAASgmB,GAC5B,QAAIwS,EAAOK,iBAAiBN,KACvBC,EAAO9b,WAAU3Q,KAAK2Q,OAAS8b,EAAO9b,UACtC8b,EAAO/B,SAAQ1qB,KAAK0qB,KAAO+B,EAAO/B,QAClC+B,EAAOf,UAAS1rB,KAAK0rB,MAAQe,EAAOf,UACjC,IAKT13B,EAAiBP,UAAUs5B,YAAc,SAAUP,EAAUvS,GAC5D,MAAMwS,EAAS,IAAIx4B,EAASgmB,GAC5B,QAAIwS,EAAOO,cAAcR,KACpBC,EAAO9b,WAAU3Q,KAAK2Q,OAAS8b,EAAO9b,UAC1C3Q,KAAK0qB,KAAO+B,EAAO/B,OACnB1qB,KAAK0rB,OAAQ,GACN,IAKT13B,EAAiBP,UAAUw5B,iBAAmB,SAAUT,EAAUvS,GACjE,MAAMwS,EAAS,IAAIx4B,EAASgmB,GAC5B,QAAIwS,EAAOS,mBAAmBV,KACzBC,EAAO9b,WAAU3Q,KAAK2Q,OAAS8b,EAAO9b,UAC1C3Q,KAAK0qB,KAAO+B,EAAO/B,OACnB1qB,KAAK0rB,OAAQ,GACN,IAKT95B,EAAOD,QAAUqC,G,cC5HjB,SAASC,EAASgmB,GACjBja,KAAKia,QAAUA,EACfja,KAAK5H,YAAa,EAClB4H,KAAK0Q,IAAK,EACV1Q,KAAKuS,KAAM,EAGZte,EAASR,UAAUkd,OAAS,WAC3B,OAAO3Q,KAAK5H,YAGbnE,EAASR,UAAUi3B,KAAO,WACzB,OAAO1qB,KAAK0Q,IAGbzc,EAASR,UAAUi4B,MAAQ,WAC1B,OAAO1rB,KAAKuS,KAGbte,EAASR,UAAU05B,WAAa,SAAUlT,GACzCja,KAAKia,QAAUA,GAGhBhmB,EAASR,UAAUi5B,eAAiB,SAAUz1B,GAa7C,OAZA+I,KAAK5H,YAAa,EAEd4H,KAAKyJ,SAASxS,GACjB+I,KAAK5H,WAAanB,EACR+I,KAAKia,SAAWja,KAAKotB,iBAAiBn2B,EAAK+I,KAAKia,WAC1Dja,KAAK5H,WAAa4H,KAAKqtB,eAAep2B,EAAK+I,KAAKia,UAG7Cja,KAAK5H,YAAc4H,KAAK5H,WAAWkK,YAAY,OAAStC,KAAK5H,WAAWpD,OAAS,IAEpFgL,KAAK5H,YAAc,KAEb4H,KAAK5H,YAGbnE,EAASR,UAAUk5B,UAAY,SAAU11B,GAKxC,GAJA+I,KAAK0Q,IAAK,EACN1Q,KAAKia,SAAWja,KAAKotB,iBAAiBn2B,EAAK+I,KAAKia,WACnDhjB,EAAM+I,KAAKqtB,eAAep2B,EAAK+I,KAAKia,UAEjCja,KAAKyJ,SAASxS,GAAM,CACnBA,EAAIqL,YAAY,OAASrL,EAAIjC,OAAS,IAEzCiC,EAAMA,EAAI8K,UAAU,EAAG9K,EAAIjC,OAAS,IAErC,MAAMkP,EAAQjN,EAAIqL,YAAY,KAExBunB,EAAY5yB,EAAI8K,UAAU,EAAGmC,GAInC,GAFAjN,EAAMA,EAAI8K,UAAUmC,EAAQ,IAEW,IAAnClE,KAAK0sB,eAAe7C,GAAsB,OAAO,EAMtD,OAHI7pB,KAAKstB,cAAcr2B,KACtB+I,KAAK0Q,GAAKzZ,GAEJ+I,KAAK0Q,IAGbzc,EAASR,UAAUq5B,iBAAmB,SAAU71B,GAM/C,GALA+I,KAAKuS,KAAM,EACPvS,KAAKia,SAAWja,KAAKotB,iBAAiBn2B,EAAK+I,KAAKia,WACnDhjB,EAAM+I,KAAKqtB,eAAep2B,EAAK+I,KAAKia,UAGjCja,KAAKyJ,SAASxS,GAAM,CACvB,IAAIi1B,EAAQj1B,EAMZ,IALuC,IAAnCA,EAAIqL,YAAY,gBAEnB4pB,EAAQj1B,EAAI8K,UAAU,EAAG9K,EAAIqL,YAAY,eACzCrL,EAAMA,EAAI8K,UAAU9K,EAAIqL,YAAY,cAAgB,MAEvB,IAA1BtC,KAAK2sB,UAAUT,GAAkB,OAAO,EAO7C,MAL4B,SAAxBj1B,EAAI8K,UAAU,EAAG,KAAe9K,EAAMA,EAAI8K,UAAU,IAEpD/B,KAAKstB,cAAcr2B,KACtB+I,KAAKuS,IAAMtb,GAEL+I,KAAKuS,KAGbte,EAASR,UAAUo5B,eAAiB,SAAU51B,GAO7C,OANI+I,KAAKia,SAAWja,KAAKotB,iBAAiBn2B,EAAK+I,KAAKia,WACnDhjB,EAAM+I,KAAKqtB,eAAep2B,EAAK+I,KAAKia,UAEjCja,KAAKyJ,SAASxS,KACjBA,EAAM+I,KAAKutB,kBAAkBt2B,EAAK,WAE5B+I,KAAK2sB,UAAU11B,IAGvBhD,EAASR,UAAUu5B,cAAgB,SAAU/1B,GAQ5C,OAPI+I,KAAKia,SAAWja,KAAKotB,iBAAiBn2B,EAAK+I,KAAKia,WACnDhjB,EAAM+I,KAAKqtB,eAAep2B,EAAK+I,KAAKia,UAEjCja,KAAKyJ,SAASxS,KACjBA,EAAM+I,KAAKutB,kBAAkBt2B,EAAK,QAClCA,EAAM+I,KAAKutB,kBAAkBt2B,EAAK,UAE5B+I,KAAK2sB,UAAU11B,IAGvBhD,EAASR,UAAU85B,kBAAoB,SAAUt2B,EAAKu2B,GAErD,OADgC,IAA5Bv2B,EAAIqV,QAAS,IAAGkhB,OAAev2B,EAAMA,EAAI8K,UAAU,EAAG9K,EAAIqV,QAAS,IAAGkhB,OACnEv2B,GAGRhD,EAASR,UAAUy5B,mBAAqB,SAAUj2B,GAOjD,OANI+I,KAAKia,SAAWja,KAAKotB,iBAAiBn2B,EAAK+I,KAAKia,WACnDhjB,EAAM+I,KAAKqtB,eAAep2B,EAAK+I,KAAKia,UAEjCja,KAAKyJ,SAASxS,KACjBA,EAAM+I,KAAKutB,kBAAkBt2B,EAAK,UAE5B+I,KAAK2sB,UAAU11B,IAIvBhD,EAASR,UAAUgW,SAAW,SAAUxS,GACvC,MAA4B,YAAxBA,EAAI8K,UAAU,EAAG,IAA4C,aAAxB9K,EAAI8K,UAAU,EAAG,IAI3D9N,EAASR,UAAU25B,iBAAmB,SAAUn2B,EAAKgjB,GACpD,GAAmB,iBAARhjB,GAAuC,iBAAZgjB,EAAsB,OAAO,EACnE,MAAM3P,EAAQrT,EAAIqK,MAAM,KACxB,OAAqB,IAAjBgJ,EAAMtV,WACNsV,EAAM,GAAGtV,OAAS,GAAKsV,EAAM,GAAGtV,OAAS,OACzCilB,GAAWA,EAAQ3P,EAAM,KAAOtK,KAAKstB,cAAchjB,EAAM,OAI9DrW,EAASR,UAAU65B,cAAgB,SAAUr2B,GAC5C,MAAmB,iBAARA,KACe,IAAtBA,EAAIqV,QAAQ,OAAqC,IAAtBrV,EAAIqV,QAAQ,OAAqC,IAAtBrV,EAAIqV,QAAQ,OAIvErY,EAASR,UAAU45B,eAAiB,SAAUp2B,EAAKgjB,GAClD,MAAM3P,EAAQrT,EAAIqK,MAAM,KACxB,OAAO2Y,EAAQ3P,EAAM,IAAMA,EAAM,IAGlC1Y,EAAOD,QAAUsC,G,6CCvKjB,MAAME,YAAcL,oBAAQ,GAkB5B,SAAS25B,aAAaC,GAClBA,GACF1tB,KAAK2tB,WAAWD,GAIlBD,aAAah6B,UAAUk6B,WAAa,SAASD,GAW5C,GAVA1tB,KAAK6C,QAAS6qB,EAAQ7qB,OAAQ6qB,EAAQ7qB,MACtC7C,KAAKhG,QAAS0zB,EAAQ1zB,OAAQ0zB,EAAQ1zB,MACtCgG,KAAK4tB,aAAcF,EAAQE,YAAaF,EAAQE,WAChD5tB,KAAK+D,UAAW2pB,EAAQ3pB,SAAU2pB,EAAQ3pB,QAC1C/D,KAAK8D,eAAgB4pB,EAAQ5pB,cAAe4pB,EAAQ5pB,aACpD9D,KAAKiF,QAASyoB,EAAQzoB,OAAQyoB,EAAQzoB,MACtCjF,KAAKxM,WAAYk6B,EAAQl6B,UAAWk6B,EAAQl6B,SAC5CwM,KAAKlN,QAAS46B,EAAQ56B,OAAQ46B,EAAQ56B,MACtCkN,KAAK6D,SAAU6pB,EAAQ7pB,QAAS,IAAI4pB,aAAaC,EAAQ7pB,QACzD7D,KAAK6tB,SAAW,GACZH,EAAQG,SACX,IAAK,IAAIh8B,EAAI,EAAGA,EAAI67B,EAAQG,SAAS74B,OAAQnD,IAC5CmO,KAAK6tB,SAAS7iB,KAAK,IAAIyiB,aAAaC,EAAQG,SAASh8B,KAGvDmO,KAAK8tB,WAAkC,IAAlBJ,EAAQI,OAAwBJ,EAAQI,MAC7D9tB,KAAKkE,QAASwpB,EAAQxpB,OAAQwpB,EAAQxpB,MACtClE,KAAK2E,SAAU+oB,EAAQ/oB,QAAS+oB,EAAQ/oB,QAGzC8oB,aAAah6B,UAAUs6B,WAAa,SAASjrB,GAC5C,IAAIkrB,EAAQhuB,KAAKiuB,gBAAgBnrB,GACjC,QAAIkrB,MACDhuB,KAAK6C,OAAU7C,KAAK6C,OAASmrB,GAAyB,KAAdhuB,KAAK6C,UAC7C7C,KAAKkuB,gBAAgBF,OACrBhuB,KAAK4tB,aAAe5tB,KAAKmuB,eAAeH,EAAOlrB,QAC/C9C,KAAKhG,QAAUgG,KAAKouB,WAAWJ,EAAOlrB,QACtC9C,KAAK+D,UAAY/D,KAAKquB,aAAaL,EAAOlrB,QAC1C9C,KAAK8D,eAAiB9D,KAAKsuB,kBAAkBN,EAAOlrB,QACpD9C,KAAKxM,WAAawM,KAAKuuB,cAAcP,EAAOlrB,SAC7B,IAAf9C,KAAK8tB,QAAoB9tB,KAAKwuB,WAAWR,EAAOlrB,QAChD9C,KAAKiF,QAAUjF,KAAKyuB,WAAWT,EAAOlrB,QACtC9C,KAAKlN,QAAUkN,KAAK0uB,WAAWV,EAAOlrB,QACtC9C,KAAK6D,SAAW7D,KAAK2uB,YAAYX,EAAOlrB,QACxC9C,KAAK6tB,UAAY7tB,KAAK6tB,SAAS74B,SAAWgL,KAAK4uB,cAAcZ,EAAOlrB,QACpE9C,KAAKkE,QAAUlE,KAAK6uB,WAAWb,EAAOlrB,OACtC9C,KAAK2E,SAAW3E,KAAK8uB,YAAYd,EAAOlrB,kBAI5C2qB,aAAah6B,UAAUy6B,gBAAkB,SAAUF,GAElD,QAAa,QAATA,IAAmBhuB,KAAK6tB,SAAS74B,WAExB,UAATg5B,IAAqBhuB,KAAKiF,QAO/BwoB,aAAah6B,UAAU46B,aAAe,SAAUtqB,EAASjB,GAC5B,iBAAjB9C,KAAK+D,SAAyB/D,KAAK+D,QAAQ/O,SAAQgL,KAAK+D,QAAU,CAAC/D,KAAK+D,UACnF,MAAMgrB,EAAQjsB,EAAMiB,UACpB,IAAK,IAAIlS,EAAI,EAAGA,EAAImO,KAAK+D,QAAQ/O,OAAQnD,IACxC,GAAImO,KAAKgvB,SAASjrB,EAAQlS,GAAIk9B,GAC7B,OAAO,EAGT,OAAO,GAIRtB,aAAah6B,UAAUm7B,cAAgB,SAAUZ,EAAOlrB,GACvD,IAAK,IAAIjR,EAAI,EAAGA,EAAImO,KAAK6tB,SAAS74B,OAAQnD,IAAK,CAC9C,IAAIo9B,GAAQ,EACZ,GAAa,UAATjB,EACH,IAAK,MAAMrsB,KAAQmB,EAAMosB,WACpBlvB,KAAK6tB,SAASh8B,GAAGk8B,WAAWjrB,EAAMosB,WAAWvtB,MAChDstB,GAAQ,QAIJ,GAAa,YAATjB,EACV,IAAK,IAAI1D,EAAI,EAAGA,GAAK1pB,SAASyb,OAAOrnB,OAAQs1B,IACxCtqB,KAAK6tB,SAASvD,GAAGyD,WAAWjrB,EAAMuZ,OAAOiO,MAC5C2E,GAAQ,GAKX,IAAKA,EAAO,OAAO,EAEpB,OAAO,GAGRxB,aAAah6B,UAAUq7B,YAAc,SAAUd,EAAOlrB,GAC1B,iBAAhB9C,KAAK2E,QAA6C,GAAtB3E,KAAK2E,OAAO3P,SAAagL,KAAK2E,OAAS,CAAC3E,KAAK2E,SACpF,IAAK,IAAI9S,EAAI,EAAGA,EAAImO,KAAK2E,OAAO3P,OAAQnD,IAAK,CAC5C,GAAsB,WAAlBmO,KAAK2E,OAAO9S,KAAoBiR,EAAMyC,YAAa,OAAO,EAC9D,GAAsB,OAAlBvF,KAAK2E,OAAO9S,KAAgBiR,EAAM9B,QAAS,OAAO,EACtD,GAAsB,aAAlBhB,KAAK2E,OAAO9S,IAAqBiR,EAAMyC,YAAa,OAAO,EAEhE,OAAO,GAGRkoB,aAAah6B,UAAU+6B,WAAa,SAAUR,EAAOlrB,GACpD,OAAO9C,KAAKmvB,YAAYnvB,KAAK8tB,MAAOhrB,EAAMgrB,UAG3CL,aAAah6B,UAAUk7B,YAAc,SAAUX,EAAOlrB,GACrD,OAAO9C,KAAK6D,OAAOkqB,WAAWjrB,EAAMe,SAGrC4pB,aAAah6B,UAAUo7B,WAAa,SAAUb,EAAOlrB,GACpD,MAAa,QAATkrB,GACIhuB,KAAKkE,OAASpB,EAAMoB,OAK7BupB,aAAah6B,UAAU86B,cAAgB,SAAUP,EAAOlrB,GAC1B,iBAAlB9C,KAAKxM,UAA0BwM,KAAKxM,SAASwB,SAAQgL,KAAKxM,SAAW,CAACwM,KAAKxM,WACtF,IAAK,IAAI3B,EAAI,EAAGA,EAAImO,KAAKxM,SAASwB,OAAQnD,IACzC,GAAImO,KAAKovB,iBAAiBtsB,EAAMtP,WAAYwM,KAAKxM,SAAS3B,IACzD,OAAO,EAGT,OAAO,GAIR47B,aAAah6B,UAAUi7B,WAAa,SAAUV,EAAOlrB,GAC1B,iBAAf9C,KAAKlN,OAAuBkN,KAAKlN,MAAMkC,SAAQgL,KAAKlN,MAAQ,CAACkN,KAAKlN,QAC7E,IAAK,IAAIjB,EAAI,EAAGA,EAAImO,KAAKlN,MAAMkC,OAAQnD,IACtC,GAAa,QAATm8B,GACH,GAAIhuB,KAAKqvB,YAAYvsB,EAAMhQ,QAASkN,KAAKlN,MAAMjB,IAC9C,OAAO,OAEF,GAAa,YAATm8B,GACV,IAAK,IAAI1D,EAAI,EAAGA,GAAKxnB,EAAMuZ,OAAOrnB,OAAQs1B,IACzC,GAA6C,QAAzCtqB,KAAKiuB,gBAAgBnrB,EAAMuZ,OAAOxqB,KACjCmO,KAAKqvB,YAAYvsB,EAAMuZ,OAAOxqB,GAAGa,MAAOsN,KAAKlN,MAAMjB,IACvD,OAAO,OAGH,GAAa,UAATm8B,EACV,IAAK,MAAMrsB,KAAQmB,EAAMosB,WACxB,GAAIlvB,KAAK0uB,WAAW1uB,KAAKiuB,gBAAgBnrB,EAAMosB,WAAWvtB,IAAQmB,EAAMosB,WAAWvtB,IAClF,OAAO,EAKX,OAAO,GAGR8rB,aAAah6B,UAAUg7B,WAAa,SAAUT,EAAOlrB,GAC1B,iBAAf9C,KAAKiF,OAAuBjF,KAAKiF,MAAMjQ,SAAQgL,KAAKiF,MAAQ,CAACjF,KAAKiF,QAC7E,IAAK,IAAIpT,EAAI,EAAGA,EAAImO,KAAKiF,MAAMjQ,OAAQnD,IACtC,GAAImO,KAAKsvB,cAAcxsB,EAAMmC,QAASjF,KAAKiF,MAAMpT,IAChD,OAAO,EAGT,OAAO,GAGR47B,aAAah6B,UAAU66B,kBAAoB,SAAUN,EAAOlrB,GAC1B,iBAAtB9C,KAAK8D,cAA8B9D,KAAK8D,aAAa9O,SAAQgL,KAAK8D,aAAe,CAAC9D,KAAK8D,eAClG,MAAMyrB,EAAOzsB,EAAMgB,eACnB,IAAK,IAAIjS,EAAI,EAAGA,EAAImO,KAAK8D,aAAa9O,OAAQnD,IAC7C,GAAImO,KAAKwvB,cAAcxvB,KAAK8D,aAAajS,GAAI09B,GAC5C,OAAO,EAGT,OAAO,GAGR9B,aAAah6B,UAAU06B,eAAiB,SAAUH,EAAOlrB,GACxD,MAAa,UAATkrB,EAA6C,UAAnBhuB,KAAK4tB,WACtB,QAATI,GACClrB,EAAMA,MACF9C,KAAK4tB,YAAc9qB,EAAMA,MAAM2sB,QAG3B,YAATzB,QAAJ,GAGDP,aAAah6B,UAAU26B,WAAa,SAAUJ,EAAOlrB,GACpD,MAA8B,mBAAnBA,EAAM+B,UAChBpF,QAAQC,IAAI,IAAI2V,MAAM,0EACf,GAEDrV,KAAK0vB,YAAY1vB,KAAKhG,MAAO8I,EAAM+B,aAG3C4oB,aAAah6B,UAAUu7B,SAAW,SAAU7lB,EAAKC,GAChD,OAAOjV,YAAYw7B,WAAWxmB,EAAKC,IAGpCqkB,aAAah6B,UAAU+7B,cAAgB,SAAUrmB,EAAKC,GACrD,OAAOpJ,KAAKgvB,SAAS7lB,EAAKC,IAE3BqkB,aAAah6B,UAAU27B,iBAAmB,SAAUjmB,EAAKC,GAExD,OADcpJ,KAAKgvB,SAAS7lB,EAAKC,IAGlCqkB,aAAah6B,UAAU67B,cAAgB,SAAUnmB,EAAKC,GACrD,OAAOpJ,KAAKgvB,SAAS7lB,EAAKC,IAE3BqkB,aAAah6B,UAAU47B,YAAc,SAAUO,EAAMC,GACpD,OAAOD,GAAQC,GAEhBpC,aAAah6B,UAAU07B,YAAc,SAAUS,KAAMC,MACpD,GAAoB,iBAATD,KACV,IACC,OAAO7vB,KAAK8vB,KAAOD,MAClB,MAAO3vB,GACR,OAAO,EAGT,OAAO2vB,OAASC,MAGjBpC,aAAah6B,UAAUi8B,YAAc,SAAUE,EAAMC,GAEpD,OADY,IAAIC,OAAOF,GACZjP,KAAKkP,IAGjBpC,aAAah6B,UAAUw6B,gBAAkB,SAAUnrB,GAClD,OAAIA,EAAMitB,aAAqB,WAC3BjtB,EAAMnO,WAAmB,SACzBmO,EAAMktB,SAAiB,OACvBltB,EAAMmtB,cAAsBntB,EAAMmtB,eACtCxwB,QAAQC,IAAI,IAAI2V,MAAO,gDAA+CvS,EAAMge,YAAY1uB,SACxFqN,QAAQC,IAAIkB,WACL,IAWR,MAAMsvB,oBAAsB,GA2C5B,SAASC,YAER,OADAnwB,KAAK0S,KAAO,CAAEgb,QAAS,IAChB1tB,KArCRkwB,oBAAoBE,UAAY,SAAS3d,EAAO3P,EAAOutB,GACtD,IAAIC,EAAgB,GACpB,GAAG7d,GAASA,EAAMzd,OACjB,IAAI,IAAInD,EAAI,EAAGA,EAAE4gB,EAAMzd,OAAQnD,IAAI,GACpB4gB,EAAM5gB,GAAG6gB,KAAKgb,SAAWwC,oBAAoBK,oBAAoB9d,EAAM5gB,GAAG6gB,KAAKgb,QAAS5qB,MAErGwtB,EAActlB,KAAKyH,EAAM5gB,IACtBw+B,GAA6B,mBAAXA,GACpBA,EAAQvtB,EAAO2P,EAAM5gB,KAKzB,OAAOy+B,GAMRJ,oBAAoBK,oBAAsB,SAAS7C,EAAS5qB,GAC3D,GAAqB,iBAAX4qB,GAAuBA,EAAQ14B,OAAO,CAC/C,IAAI,IAAInD,EAAI,EAAIA,EAAE67B,EAAQ14B,OAAQnD,IAAI,CAErC,IADS,IAAI47B,aAAaC,EAAQ77B,IAC3Bk8B,WAAWjrB,GAAQ,OAAO,EAElC,OAAO,EAIP,OADS,IAAI2qB,aAAaC,GAChBK,WAAWjrB,IAYvBqtB,UAAU18B,UAAU+8B,OAAS,SAASC,EAAKC,GAC1C,GAAGA,EAAqBD,EAAIlmB,KAAK,KAEjC,MADU,IAAMkmB,EAAIlmB,KAAK,OAAS,KAInC4lB,UAAU18B,UAAUk9B,eAAiB,SAASC,GAC7C,IAAIC,EAAa,GAEjB,IADA,IAAIC,EAAO,GACHj/B,EAAI,EAAGA,EAAE++B,EAAM57B,OAAQnD,IAAI,CAClC,GAAsB,iBAAZ++B,EAAM/+B,GACfi/B,GAAQ,IAAMF,EAAM/+B,GAAK,SAErB,GAAsB,iBAAZ++B,EAAM/+B,GAAe,CACnC,IAAIk/B,EAAMx+B,OAAOoW,KAAKioB,EAAM/+B,IAAI,GAEhC,IAAI,IAAI8P,KADRmvB,GAAQ,IAAOC,EAAM,IACLH,EAAM/+B,GAAGk/B,GACxBF,EAAWlvB,GAAQivB,EAAM/+B,GAAGk/B,GAAKpvB,GAGhC9P,EAAI++B,EAAM57B,OAAS,IACrB87B,GAAQ,MAGV,IAAI,IAAI1uB,EAAI,EAAGA,EAAI7P,OAAOoW,KAAKkoB,GAAY77B,OAAQoN,IAAI,CACtD,IAAIgI,EAAM7X,OAAOoW,KAAKkoB,GAAYzuB,GAC9B1N,EAAMm8B,EAAWzmB,GACrB0mB,GAAQ,KAAO1mB,EAAM,IACJ,mBAAP1V,EACTo8B,GAAQp8B,EAEa,iBAAPA,EACdo8B,GAAQ,IAAMp8B,EAAM,IAEC,iBAAPA,IACdo8B,GAAQl2B,KAAKC,UAAUnG,IAGzB,OAAOo8B,GAGRX,UAAU18B,UAAUqa,YAAc,SAAS/T,GAE1C,GAAmB,KAAhBiG,KAAK6C,QACP,IAAI5L,EAAM,aAGNA,EAAM+I,KAAK6C,QAAU,KAuB1B,QArB8B,IAApB7C,KAAKgxB,cACd/5B,GAAO,eAAiB+I,KAAKwwB,OAAOxwB,KAAKgxB,aAAe,UAE/B,IAAhBhxB,KAAKhG,UACd/C,GAAO,UAAY+I,KAAKwwB,OAAOxwB,KAAKhG,SAAW,UAEpB,IAAlBgG,KAAK+D,YACd9M,GAAO,YAAc+I,KAAKwwB,OAAOxwB,KAAK+D,WAAa,UAEnB,IAAvB/D,KAAK8D,iBACd7M,GAAO,iBAAmB+I,KAAKwwB,OAAOxwB,KAAK8D,gBAAkB,UAEjC,IAAnB9D,KAAKxM,aACdyD,GAAO,aAAe+I,KAAKwwB,OAAOxwB,KAAKxM,YAAc,UAE5B,IAAhBwM,KAAKiF,UACdhO,GAAO,UAAY+I,KAAKwwB,OAAOxwB,KAAKiF,SAAW,UAEtB,IAAhBjF,KAAKlN,UACdmE,GAAO,UAAY+I,KAAKwwB,OAAOxwB,KAAKlN,SAAW,UAEnB,IAAnBkN,KAAK6tB,YAA6B7tB,KAAK6tB,SAAS74B,OAAS,EAAE,CACpEiC,GAAO,eAEP,IADA,IAAIg6B,EAAOjxB,KAAK6tB,WACRh8B,EAAI,EAAGA,EAAGo/B,EAAKj8B,OAAQnD,IAC9BoF,GAAOg6B,EAAKnjB,cAAgB,KAE7B7W,GAAO,UAEmB,IAAjB+I,KAAK6D,WACd5M,GAAO,WAAa+I,KAAK6D,OAAOiK,cAAgB,UAEvB,IAAhB9N,KAAK8tB,WAGb72B,GADc,iBADP+I,KAAK8tB,QAEL,WAAa9tB,KAAK8tB,QAAU,KAG5B,UAAY9tB,KAAK8tB,QAAU,KAyDpC,YAtD0B,IAAhB9tB,KAAKkE,UACdjN,GAAO,UAAY+I,KAAKwwB,OAAOxwB,KAAKkE,SAAS,GAAQ,UAE3B,IAAjBlE,KAAK2E,WACd1N,GAAO,WAAa+I,KAAKwwB,OAAOxwB,KAAK2E,UAAY,UAErB,IAAnB3E,KAAKY,aACd3J,GAAO,cAAgB+I,KAAKY,WAAa,WAEf,IAAjBZ,KAAKqS,WACdpb,GAAO,WAAa+I,KAAKqS,OAAS,UAEP,IAAlBrS,KAAK4S,YACd3b,GAAO,YAAc+I,KAAK4S,UAAY,UAEd,IAAf5S,KAAKhN,SACdiE,GAAO,UAAY+I,KAAKhN,OAAS,WAEL,IAAnBgN,KAAK4b,aACd3kB,GAAO,aAAe+I,KAAK4b,WAAa,UAEd,IAAjB5b,KAAKmD,WACdlM,GAAO,WAAa+I,KAAKmD,SAAW,UAEZ,IAAfnD,KAAKlE,SACd7E,GAAO,UAAY+I,KAAKlE,OAAS,WAEM,IAA9BkE,KAAK2b,wBACd1kB,GAAO,wBAA0B+I,KAAK2b,sBAAwB,UAEpC,IAAjB3b,KAAKsD,WACdrM,GAAO,WAAa+I,KAAKsD,SAAW,UAEX,IAAhBtD,KAAK1C,UACdrG,GAAO,WAAc+I,KAAK1C,QAAU,WAEL,IAAtB0C,KAAKkxB,gBACdj6B,GAAO,iBAAoB+I,KAAKkxB,cAAgB,WAExB,IAAflxB,KAAK7H,SACdlB,GAAO,SAAW2D,KAAKC,UAAUmF,KAAK7H,QAAU,UAEnB,IAApB6H,KAAK8b,cACd7kB,GAAO,cAAgB+I,KAAK+b,aAAe,UAEb,IAArB/b,KAAKkc,eACdjlB,GAAO,gBAAmB+I,KAAKkc,aAAe,WAElB,IAAnBlc,KAAKiD,aACdhM,GAAO,aAAe+I,KAAK2wB,eAAe3wB,KAAKiD,YAAc,UAE3B,IAAzBjD,KAAK6b,mBACd5kB,GAAO,mBAAqB+I,KAAK2wB,eAAe3wB,KAAK6b,kBAAoB,KAEnE5kB,GAGRk5B,UAAU18B,UAAUoP,MAAQ,SAASA,GACpC,YAAmB,IAATA,EAA6B7C,KAAK0S,KAAKgb,QAAQ7qB,OACzD7C,KAAK0S,KAAKgb,QAAQ7qB,MAAQA,EACnB7C,OAGRmwB,UAAU18B,UAAUu9B,UAAY,YAAYG,GAC3C,YAAuB,IAAbA,GAAgD,GAApBA,EAAUn8B,OAAoBgL,KAAK0S,KAAKgb,QAAQyD,WACtFnxB,KAAK0S,KAAKgb,QAAQyD,UAAYA,EACvBnxB,OAGRmwB,UAAU18B,UAAUuG,MAAQ,YAAYA,GACvC,YAAmB,IAATA,GAAwC,GAAhBA,EAAMhF,OAAoBgL,KAAK0S,KAAKgb,QAAQ1zB,OAC9EgG,KAAK0S,KAAKgb,QAAQ1zB,MAAQA,EACnBgG,OAGRmwB,UAAU18B,UAAUsQ,QAAU,YAAYA,GACzC,YAAqB,IAAXA,GAA4C,GAAlBA,EAAQ/O,OAAoBgL,KAAK0S,KAAKgb,QAAQ3pB,SAClF/D,KAAK0S,KAAKgb,QAAQ3pB,QAAUA,EACrB/D,OAGRmwB,UAAU18B,UAAUqQ,aAAe,YAAYA,GAC9C,YAA0B,IAAhBA,GAAsD,GAAvBA,EAAa9O,OAAoBgL,KAAK0S,KAAKgb,QAAQ5pB,cAC5F9D,KAAK0S,KAAKgb,QAAQ5pB,aAAeA,EAC1B9D,OAGRmwB,UAAU18B,UAAUD,SAAW,YAAYA,GAC1C,YAAsB,IAAZA,GAA8C,GAAnBA,EAASwB,OAAoBgL,KAAK0S,KAAKgb,QAAQl6B,UACpFwM,KAAK0S,KAAKgb,QAAQl6B,SAAWA,EACtBwM,OAGRmwB,UAAU18B,UAAUq6B,MAAQ,SAASA,GACpC,YAAmB,IAATA,EAA6B9tB,KAAK0S,KAAKgb,QAAQI,OACzD9tB,KAAK0S,KAAKgb,QAAQI,MAAQA,EACnB9tB,OAGRmwB,UAAU18B,UAAUwR,MAAQ,YAAYA,GACvC,YAAmB,IAATA,GAAwC,GAAhBA,EAAMjQ,OAAoBgL,KAAK0S,KAAKgb,QAAQzoB,OAC9EjF,KAAK0S,KAAKgb,QAAQzoB,MAAQA,EACnBjF,OAGRmwB,UAAU18B,UAAUX,MAAQ,YAAYA,GACvC,YAAmB,IAATA,GAAwC,GAAhBA,EAAMkC,OAAoBgL,KAAK0S,KAAKgb,QAAQ56B,OAC9EkN,KAAK0S,KAAKgb,QAAQ56B,MAAQA,EACnBkN,OAGRmwB,UAAU18B,UAAUi6B,QAAU,WAC7B,OAAO1tB,KAAK0S,KAAKgb,SAGlByC,UAAU18B,UAAU2H,KAAO,SAASA,GACnC,OAAIA,GACJ4E,KAAK0S,KAAOtX,EACL4E,MAFUA,KAAK0S,MAKvByd,UAAU18B,UAAUoQ,OAAS,SAASA,GACrC,YAAoB,IAAVA,EAA8B7D,KAAK0S,KAAKgb,QAAQ7pB,QAC1D7D,KAAK0S,KAAKgb,QAAQ7pB,OAASA,EAAO6pB,UAC3B1tB,OAGRmwB,UAAU18B,UAAUo6B,SAAW,YAAYA,GAC1C,QAAsB,IAAZA,EAAyB,OAAO7tB,KAAK0S,KAAKgb,QAAQG,cACpB,IAA9B7tB,KAAK0S,KAAKgb,QAAQG,WAC3B7tB,KAAK0S,KAAKgb,QAAQG,SAAW,IAE9B,IAAK,IAAIh8B,EAAI,EAAGA,EAAIg8B,EAAS74B,OAAQnD,IACpCmO,KAAK0S,KAAKgb,QAAQG,SAAS7iB,KAAK6iB,EAASh8B,GAAG67B,WAE7C,OAAO1tB,MAGRmwB,UAAU18B,UAAUyQ,MAAQ,YAAYA,GACvC,YAAmB,IAATA,GAAwC,GAAhBA,EAAMlP,OAAoBgL,KAAK0S,KAAKgb,QAAQxpB,OAC9ElE,KAAK0S,KAAKgb,QAAQxpB,MAAQA,EACnBlE,OAGRmwB,UAAU18B,UAAUkR,OAAS,YAAYA,GACxC,YAAoB,IAAVA,GAA0C,GAAjBA,EAAO3P,OAAoBgL,KAAK0S,KAAKgb,QAAQ/oB,QAChF3E,KAAK0S,KAAKgb,QAAQ/oB,OAASA,EACpB3E,OAURmwB,UAAU18B,UAAU4e,OAAS,SAASf,GACrC,IAAIA,EAAM,OAAOtR,KAAK0S,KAAKL,OAC3B,IAAI+e,EAAKpxB,KAAK6b,iBACVrM,EAAIxP,KAAKiD,WACb,GAAGmuB,GAAMA,EAAGp8B,OAAO,CAClB,IAAI47B,EAAQ5wB,KAAKqxB,qBAAqBD,EAAI,SAAU9f,GACpDtR,KAAK6b,kBAAkB+U,QAEnB,GAAGphB,GAAKA,EAAExa,OAAO,CACjB47B,EAAQ5wB,KAAKqxB,qBAAqB7hB,EAAG,SAAU8B,GACnDtR,KAAKiD,YAAY2tB,QAGjB5wB,KAAK0S,KAAKL,OAASf,EAEpB,OAAOtR,MAGRmwB,UAAU18B,UAAU6J,MAAQ,SAASA,GACpC,QAAmB,IAATA,EAAsB,OAAO0C,KAAK0S,KAAKpV,MACjD,IAAI8zB,EAAKpxB,KAAK6b,iBACVrM,EAAIxP,KAAKiD,WACb,GAAGmuB,GAAMA,EAAGp8B,OAAO,CAClB,IAAI47B,EAAQ5wB,KAAKqxB,qBAAqBD,EAAI,QAAS9zB,GACnD0C,KAAK6b,kBAAkB+U,QAEnB,GAAGphB,GAAKA,EAAExa,OAAO,CACjB47B,EAAQ5wB,KAAKqxB,qBAAqB7hB,EAAG,QAASlS,GAClD0C,KAAKiD,YAAY2tB,QAGjB5wB,KAAK0S,KAAKpV,MAAQA,EAEnB,OAAO0C,MAMRmwB,UAAU18B,UAAU0P,OAAS,SAASlR,GACrC,QAAe,IAALA,EAAkB,OAAO+N,KAAK0S,KAAKvP,OAC7C,IAAIiuB,EAAKpxB,KAAK6b,iBACVrM,EAAIxP,KAAKiD,WACb,GAAGmuB,GAAMA,EAAGp8B,OAAO,CAClB,IAAI47B,EAAQ5wB,KAAKqxB,qBAAqBD,EAAI,SAAUn/B,GACpD+N,KAAK6b,kBAAkB+U,QAEnB,GAAGphB,GAAKA,EAAExa,OAAO,CACjB47B,EAAQ5wB,KAAKqxB,qBAAqB7hB,EAAG,SAAUvd,GACnD+N,KAAKiD,YAAY2tB,QAGjB5wB,KAAK0S,KAAKvP,OAASlR,EAEpB,OAAO+N,MAMRmwB,UAAU18B,UAAU0E,KAAO,SAASiD,GACnC,IAAIA,EAAM,OAAO4E,KAAK0S,KAAKva,KAC3B,IAAIi5B,EAAKpxB,KAAK6b,iBACVrM,EAAIxP,KAAKiD,WACb,GAAGmuB,GAAMA,EAAGp8B,OAAO,CAClB,IAAI47B,EAAQ5wB,KAAKqxB,qBAAqBD,EAAI,OAAQh2B,GAClD4E,KAAK6b,kBAAkB+U,QAEnB,GAAGphB,GAAKA,EAAExa,OAAO,CACjB47B,EAAQ5wB,KAAKqxB,qBAAqB7hB,EAAG,OAAQpU,GACjD4E,KAAKiD,YAAY2tB,QAGjB5wB,KAAK0S,KAAKva,KAAOiD,EAElB,OAAO4E,MAMRmwB,UAAU18B,UAAU49B,qBAAuB,SAAST,EAAOjvB,EAAMjN,GAEhE,IADA,IAAI48B,EAAS,GACLz/B,EAAI,EAAGA,EAAE++B,EAAM57B,OAAQnD,IAAI,CAClC,GAAsB,iBAAZ++B,EAAM/+B,IACX0/B,EAAQ,IACNX,EAAM/+B,IAAM,GAClB0/B,EAAMX,EAAM/+B,IAAI8P,GAAQjN,EACxB48B,EAAOtmB,KAAKumB,QAER,GAAsB,iBAAZX,EAAM/+B,GAAe,CACnC,IAAI2/B,EAAOj/B,OAAOoW,KAAKioB,EAAM/+B,IAAI,GAEhC,IAAI0/B,EADL,GAAGC,GACED,EAAQX,EAAM/+B,IACZ2/B,GAAM7vB,GAAQjN,EACpB48B,EAAOtmB,KAAKumB,IAIf,OAAOD,GAQRnB,UAAU18B,UAAUmN,SAAW,SAASwa,GACvC,OAAIA,GACJpb,KAAK0S,KAAK9R,SAAWwa,EACdpb,MAFUA,KAAK0S,KAAK9R,UAK5BuvB,UAAU18B,UAAUy9B,YAAc,SAASO,GAC1C,OAAIA,GACJzxB,KAAK0S,KAAKgf,aAAeD,EAClBzxB,MAFYA,KAAK0S,KAAKgf,cAQ9BvB,UAAU18B,UAAUmf,QAAU,SAAStB,GACtC,OAAIA,GACJtR,KAAK0S,KAAKE,QAAUtB,EACbtR,MAFUA,KAAK0S,KAAKE,SAQ5Bud,UAAU18B,UAAUT,KAAO,SAASf,GACnC,OAAIA,GACJ+N,KAAK0S,KAAK1f,KAAOf,EACV+N,MAFOA,KAAK0S,KAAK1f,MAQzBm9B,UAAU18B,UAAUmoB,SAAW,SAAS3pB,GACvC,OAAIA,GACJ+N,KAAK0S,KAAKkJ,SAAW3pB,EACd+N,MAFOA,KAAK0S,KAAKkJ,UASzBuU,UAAU18B,UAAUqI,KAAO,SAAS7J,GACnC,OAAIA,GACJ+N,KAAK0S,KAAK5W,KAAO7J,EACV+N,MAFOA,KAAK0S,KAAK5W,MAQzBq0B,UAAU18B,UAAUkoB,oBAAsB,SAAS1pB,GAClD,OAAIA,GACJ+N,KAAK0S,KAAKtN,sBAAwBnT,EAC3B+N,MAFOA,KAAK0S,KAAKtN,uBAKzB+qB,UAAU18B,UAAUwP,SAAW,YAAYhR,GAC1C,YAAe,IAALA,GAAgC,GAAZA,EAAE+C,OAAoBgL,KAAK0S,KAAKzP,UAC9DjD,KAAK0S,KAAKzP,SAAWhR,EACd+N,OAGRmwB,UAAU18B,UAAUooB,eAAiB,YAAY5pB,GAChD,YAAe,IAALA,GAAgC,GAAZA,EAAE+C,OAAoBgL,KAAK0S,KAAKnP,iBAC9DvD,KAAK0S,KAAKnP,gBAAkBtR,EACrB+N,OAGRmwB,UAAU18B,UAAU6P,OAAS,SAASrR,GACrC,OAAIA,GACJ+N,KAAK0S,KAAKpP,OAASrR,EACZ+N,MAFOA,KAAK0S,KAAKpP,QAKzB6sB,UAAU18B,UAAUqoB,UAAY,SAAS7pB,GACxC,OAAIA,GACJ+N,KAAK0S,KAAKqJ,WAAa9pB,EAChB+N,MAFOA,KAAK0S,KAAKqJ,YAKzBoU,UAAU18B,UAAUyoB,WAAa,SAASjqB,GACzC,OAAIA,GACJ+N,KAAK0S,KAAKwJ,WAAajqB,EAChB+N,MAFOA,KAAK0S,KAAKwJ,YAKzBtqB,OAAOD,QAAU,CAACu+B,wCAAqBzC,0BAAc0C,sB,gBCjvBrD,IAAM/4B,EAAiBtD,EAAQ,GAO/B,SAASklB,EAAY/H,EAAQ5Y,GAG5B,OAFA2H,KAAKiR,OAASA,EACdjR,KAAKS,UAAW,EACTT,KAAK3H,QAAQA,GAGrB2gB,EAAYvlB,UAAU4E,QAAU,SAAS+Y,GAExC,OADApR,KAAKoR,OAASA,GAAUha,EAAe9C,KAAKomB,UACrC1a,MAGRgZ,EAAYvlB,UAAUk+B,IAAM,SAAS3kB,GACpC,GAAGhN,KAAKS,UAAYuM,EAAG,CACtBhN,KAAKS,SAAWuM,EAChB,IAAI4kB,EAAK5xB,KAAKoR,OAAOgL,OAClBwV,GAAIA,EAAG5kB,KAIZgM,EAAYvlB,UAAU4e,OAAS,WAC9B,GAAGrS,KAAKY,SAAU,OAAOZ,KAAKY,SAASyR,OAAOrS,OAG/CgZ,EAAYvlB,UAAU0nB,YAAc,SAASC,GAE5C,OADApb,KAAKY,SAAWwa,EACTpb,MAMRgZ,EAAYvlB,UAAUo+B,UAAY,SAASr7B,GAC1CwJ,KAAKxJ,OAASA,EACdwJ,KAAK8xB,QAAU,GACf9xB,KAAKuP,OAAS,EACd,IAAM6P,EAAY5oB,EAAOu7B,kBAQzB,KAPI/xB,KAAKoR,OAAOiL,UAAY+C,EAAUpqB,QACrCgL,KAAKoR,OAAOiL,OAAO+C,EAAU,IAG3Bpf,KAAKoR,OAAOoL,QACdxc,KAAKxJ,OAAOgmB,KAAKxc,KAAKoR,OAAOoL,OAAQxc,KAAKoR,OAAOqL,aAE5CzC,IAAMha,KAAKxJ,OAAOw7B,QACpBhY,KAAOha,KAAKiyB,WAAWjY,MACzBha,KAAK8xB,QAAQ9mB,KAAKhL,KAAKkyB,YAAYlY,IAAKha,KAAKxJ,OAAO+Y,SAGtD,OAAOvP,MAGRgZ,EAAYvlB,UAAUw+B,WAAa,SAASjY,GAE3C,IADA,IAAMsW,EAAgBtwB,KAAKoR,OAAO2I,iBAAiBC,GAAK,EAAO,MAAO,UAC9DnoB,EAAI,EAAGA,EAAEy+B,EAAct7B,OAAQnD,IACtC,GAAGy+B,EAAcz+B,GAAGsR,OAAQ,OAAO,EAEpC,OAAO,GAGR6V,EAAYvlB,UAAUy+B,YAAc,SAASC,EAASC,GACrD,IAAIC,EAAS,CACZrlB,GAAIhN,KAAKsyB,SAASH,IAKnB,OAHAE,EAAOr4B,MAAQgG,KAAKuyB,oBAAoBJ,EAASC,GACjDC,EAAO/5B,MAAQ0H,KAAKwyB,oBAAoBL,EAASC,GACjDC,EAAO5xB,SAAWT,KAAKyyB,uBAAuBN,EAASC,GAChDC,GAGRrZ,EAAYvlB,UAAU6+B,SAAW,SAASH,GACzC,IAAIO,EAAOP,EAAQnyB,KAAKoR,OAAOiL,UAC/B,OAAGqW,EAAK,UAAkBA,EAAK,UACxBA,GAGR1Z,EAAYvlB,UAAU8+B,oBAAsB,SAASJ,EAASC,GAC7D,IAAIzuB,EAAK3D,KAAK2yB,mBAAmBR,EAAS,SAC1C,GAAGxuB,EAAI,OAAO3D,KAAK4yB,cAAcjvB,EAAIwuB,EAASC,GAC9C,GAAGpyB,KAAKoR,OAAOkL,UACX6V,EAAQnyB,KAAKoR,OAAOkL,UAAU,CAChC,IAAI1X,EAAMutB,EAAQnyB,KAAKoR,OAAOkL,UAE9B,GADG1X,EAAI,YAAWA,EAAMA,EAAI,WAClB,WAAPA,EAAkB,OAAOA,EAG9B,OAAOxN,EAAejD,YAAYwM,aAAaX,KAAKsyB,SAASH,KAG9DnZ,EAAYvlB,UAAU++B,oBAAsB,SAASL,EAASC,GAC7D,IAAIzuB,EAAK3D,KAAK2yB,mBAAmBR,EAAS,SAC1C,GAAGxuB,EAAI,OAAO3D,KAAK4yB,cAAcjvB,EAAIwuB,EAASC,GAC9C,GAAGpyB,KAAKoR,OAAOmL,UACX4V,EAAQnyB,KAAKoR,OAAOmL,UAAU,CAChC,IAAI3X,EAAMutB,EAAQnyB,KAAKoR,OAAOmL,UAE9B,GADG3X,EAAI,YAAWA,EAAMA,EAAI,WAClB,WAAPA,EAAkB,OAAOA,EAG9B,OAAO,GAGRoU,EAAYvlB,UAAUg/B,uBAAyB,SAASN,GACvD,IAAM7B,EAAgBtwB,KAAKoR,OAAO2I,iBAAiBC,KAAK,EAAO,MAAO,YACtE,SAAGsW,IAAiBA,EAAct7B,SAC1Bs7B,EAAcA,EAAct7B,OAAS,GAAGyL,UAKjDuY,EAAYvlB,UAAUk/B,mBAAqB,SAAS3Y,EAAKjgB,GAExD,IADA,IAAMu2B,EAAgBtwB,KAAKoR,OAAO2I,iBAAiBC,GAAK,EAAO,MAAOjgB,GAC9DlI,EAAI,EAAGA,EAAEy+B,EAAct7B,OAAQnD,IACtC,GAAGy+B,EAAcz+B,GAAGkI,GAAO,OAAOu2B,EAAcz+B,GAAGkI,GAEpD,OAAO,GAGRif,EAAYvlB,UAAUm/B,cAAgB,SAASlgB,EAAMsH,EAAKoY,GACzD,OAAG1f,GAAuB,mBAARA,EACVL,OAAO2H,GAEZtH,GAAuB,iBAARA,EACVA,OADR,GAKDsG,EAAYvlB,UAAUo/B,MAAQ,WAC7B,OAAO7yB,KAAKxJ,OAAOq8B,SAGpB7Z,EAAYvlB,UAAUq/B,MAAQ,WAE7B,OADA9yB,KAAKuP,OAAS,EACPvP,KAAK8xB,QAAQ9xB,KAAKuP,SAG1ByJ,EAAYvlB,UAAUs/B,KAAO,WAC5B,GAAG/yB,KAAKuP,OAAS,EAChB,OAAOvP,KAAK8xB,UAAU9xB,KAAKuP,SAI7ByJ,EAAYvlB,UAAUu+B,KAAO,WAC5B,OAAOhyB,KAAK8xB,QAAQ9xB,KAAKuP,WAI1B3d,EAAOD,QAAUqnB,G,gBCzJjB,IAAM5hB,EAAiBtD,EAAQ,GACzBid,EAAoBjd,EAAQ,IAElC,SAASmlB,EAAUhI,EAAQG,GAG1B,OAFApR,KAAKiR,OAASA,EACXG,GAAQpR,KAAK3H,QAAQ+Y,GACjBpR,KAuNR,SAASgzB,EAAUt+B,EAAKqF,GACvBiG,KAAKizB,UAAoB,WAAPv+B,EAAmB,GAAKA,EAC1CsL,KAAKkzB,SAAWn5B,EAtNjBkf,EAAUxlB,UAAUo+B,UAAY,SAASsB,GAExC,OADAnzB,KAAKxJ,OAAS28B,EACPnzB,MAGRiZ,EAAUxlB,UAAU0nB,YAAc,SAASC,GAE1C,OADApb,KAAKY,SAAWwa,EACTpb,MAGRiZ,EAAUxlB,UAAU4e,OAAS,SAAS+gB,GACrC,GAAGpzB,KAAKY,SAAU,OAAOZ,KAAKY,SAASyR,OAAOrS,KAAMozB,IAGrDna,EAAUxlB,UAAUo/B,MAAQ,WAC3B,OAAO7yB,KAAKxJ,OAAOq8B,SAGpB5Z,EAAUxlB,UAAUq/B,MAAQ,WAC3B,OAAO9yB,KAAKxJ,OAAOs8B,SAGpB7Z,EAAUxlB,UAAUs/B,KAAO,WAC1B,OAAO/yB,KAAKxJ,OAAOu8B,QAGpB9Z,EAAUxlB,UAAUu+B,KAAO,WAC1B,OAAOhyB,KAAKxJ,OAAOw7B,QAIpB/Y,EAAUxlB,UAAU4E,QAAU,SAAS+Y,GAEtC,OADApR,KAAKoR,OAASA,GAAUha,EAAe9C,KAAKgmB,QACrCta,MAGRiZ,EAAUxlB,UAAU4d,aAAe,SAASC,GAI3C,OAHAtR,KAAKiG,UAAY,IAAI8K,EAClB/Q,KAAKoR,OAAOnL,WAAWjG,KAAKiG,UAAU5N,QAAQ2H,KAAKoR,OAAOnL,WAC1DqL,GAAMA,EAAKtR,KAAKiG,WACZjG,MAGRiZ,EAAUxlB,UAAU4/B,eAAiB,WACpC,OAAQrzB,KAAKxJ,OAAOq8B,SAAW7yB,KAAKxJ,OAAOiI,MAAM60B,YAGlDra,EAAUxlB,UAAU8/B,cAAgB,WACnC,OAAOvzB,KAAKqzB,kBAAoBrzB,KAAKwzB,kBAGtCva,EAAUxlB,UAAU+/B,eAAiB,WACpC,OAAQxzB,KAAKxJ,OAAOiI,MAAMg1B,UAAY,GAGvCxa,EAAUxlB,UAAUigC,YAAc,WACjC,OAAO1zB,KAAKxJ,OAAOiI,MAAM60B,YAG1Bra,EAAUxlB,UAAUkgC,QAAU,SAAS7hC,GACtC,OAAOkO,KAAKxJ,OAAOiI,MAAMk1B,QAAQ7hC,IAIlCmnB,EAAUxlB,UAAUggC,QAAU,WAC7B,OAAOzzB,KAAKxJ,OAAOiI,MAAMg1B,WAG1Bxa,EAAUxlB,UAAUmgC,YAAc,SAAS9hC,GAC1C,OAAOkO,KAAK6zB,OAAO7zB,KAAKxJ,OAAOiI,MAAMm1B,YAAY9hC,KAGlDmnB,EAAUxlB,UAAUqgC,SAAW,WAC9B,OAAO9zB,KAAK6zB,OAAO7zB,KAAKxJ,OAAOiI,MAAMq1B,aAGtC7a,EAAUxlB,UAAUsgC,UAAY,WAC/B,OAAO/zB,KAAK6zB,OAAO7zB,KAAKxJ,OAAOiI,MAAMs1B,cAGtC9a,EAAUxlB,UAAUugC,aAAe,WAClC,OAAOh0B,KAAK6zB,OAAO7zB,KAAKxJ,OAAOiI,MAAMu1B,iBAGtC/a,EAAUxlB,UAAUwgC,mBAAqB,WACxC,GAAGj0B,KAAKk0B,iBACP,IAAItW,EAAO5d,KAAKm0B,sBAEZ,GAAGn0B,KAAKxJ,OAAOiI,MAAM21B,YACrBxW,EAAO5d,KAAKxJ,OAAOiI,MAAM41B,0BAGzBzW,EAAO5d,KAAKxJ,OAAOu7B,kBAExB,IAAIziB,EAAOtP,KACX,OAAQ4d,EAAOA,EAAKpL,QAAO,SAAA8hB,GAAG,OAAKhlB,EAAKnM,OAAOmxB,MAAQ,IAGxDrb,EAAUxlB,UAAU8gC,wBAA0B,SAASC,GACtD,IAAIC,EAAKz0B,KAAKoR,OAAO2I,kBAAiB,EAAOya,EAAO,SAAU,UAC9D,GAAGC,GAAMA,EAAGz/B,OAAO,CAClB,IAAIwE,EAAIi7B,EAAGA,EAAGz/B,OAAO,GAAGsO,OACxB,MAAe,iBAAL9J,EACFlD,SAASuD,eAAeL,GAEZ,mBAALA,EACPA,EAAEg7B,GAEEh7B,EAEc,IAAxBg7B,EAAMloB,QAAQ,QAAakoB,EAAQA,EAAMzyB,UAAU,IACtD,IAAIiV,GAAkC,GAA1Bwd,EAAMloB,QAAQ,QAAiBlV,EAAejD,YAAYwM,aAAa6zB,GAASA,EAE5F,OADAxd,EAAOA,EAAK9f,QAAQ,IAAK,KAClBZ,SAASuD,eAAemd,IAIhCiC,EAAUxlB,UAAU0P,OAAS,SAASmxB,GACrC,IAAMhE,EAAgBtwB,KAAKoR,OAAO2I,kBAAiB,EAAOua,EAAK,SAAU,UACzE,QAAGhE,EAAct7B,QACTs7B,EAAcA,EAAct7B,OAAO,GAAGmO,QAQ/C8V,EAAUxlB,UAAUogC,OAAS,SAASa,GAAO,WAC5C,OAAOA,EAAOC,QAAQ30B,KAAKiR,QAAQ5V,MAAK,SAACu5B,GACxC,IAAIC,EAAU,IAAIz9B,EAAe/C,WAAWugC,EAASF,GAGrD,OAFA,EAAK7C,UAAUgD,GACZ,EAAKC,QAAQ,EAAKA,OAAOD,GACrBA,MAIT5b,EAAUxlB,UAAUshC,gBAAkB,SAAS/a,EAAK5mB,EAAK6mB,EAAS3f,GACjE,IAAMg2B,EAAgBtwB,KAAKoR,OAAO2I,iBAAiBC,EAAK5mB,EAAK6mB,EAAS3f,GACtE,SAAGg2B,IAAiBA,EAAct7B,SAInCikB,EAAUxlB,UAAUuhC,gBAAkB,SAAShb,EAAK5mB,EAAK6mB,EAAS3f,GACjE,IAAMg2B,EAAgBtwB,KAAKoR,OAAO2I,iBAAiBC,EAAK5mB,EAAK6mB,EAAS3f,GACtE,GAAGg2B,GAAiBA,EAAct7B,OAEjC,OAAOs7B,EADEA,EAAct7B,OAAS,GACRsF,IAK1B2e,EAAUxlB,UAAUwhC,YAAc,SAASjb,GAE1C,OADSha,KAAKg1B,gBAAgBhb,GAAK,EAAO,MAAO,UAIlDf,EAAUxlB,UAAUyhC,aAAe,SAASlb,EAAKsa,GAEhD,OADSt0B,KAAKg1B,gBAAgBhb,EAAKsa,EAAK,SAAU,UAInDrb,EAAUxlB,UAAU0hC,YAAc,SAASnb,GAC1C,OAAOha,KAAKg1B,gBAAgBhb,GAAK,EAAO,MAAO,UAGhDf,EAAUxlB,UAAU2hC,aAAe,SAASpb,EAAK5mB,GAChD,OAAO4M,KAAKg1B,gBAAgBhb,EAAK5mB,EAAK,SAAU,UAGjD6lB,EAAUxlB,UAAU0gC,eAAiB,WACpC,OAAOn0B,KAAKoR,OAAO6L,gBAGpBhE,EAAUxlB,UAAUygC,eAAiBjb,EAAUxlB,UAAU0gC,eACzDlb,EAAUxlB,UAAU4hC,aAAepc,EAAUxlB,UAAUyhC,aACvDjc,EAAUxlB,UAAU6hC,YAAcrc,EAAUxlB,UAAUwhC,YACtDhc,EAAUxlB,UAAU8hC,aAAetc,EAAUxlB,UAAU2hC,aACvDnc,EAAUxlB,UAAU+hC,YAAcvc,EAAUxlB,UAAU0hC,YAEtDlc,EAAUxlB,UAAU0S,YAAc,SAAS/S,EAAK4mB,GAC/C,IAAIoB,EAAOpb,KAAKy1B,kBAAkBriC,EAAK4mB,GACvC,GAAGoB,EAAM,OAAOA,EAChB,IAAIxa,EAAWZ,KAAKg1B,gBAAgBhb,EAAK5mB,EAAK,SAAU,YACpD+E,EAAQ6H,KAAKg1B,gBAAgBhb,EAAK5mB,EAAK,SAAU,QACrD,IAAIwN,EAAS,CACZ,IAAIjO,EAAIqN,KAAK01B,uBAAuB1b,EAAI5mB,IACxCwN,EAAWjO,EAAEP,KACT+F,IAAMA,EAAOxF,EAAEwF,MAEpB,OAAGyI,EACKZ,KAAKiG,UAAU6e,eAAelkB,EAAUzI,QADhD,GAKD8gB,EAAUxlB,UAAU0xB,YAAc,SAASvkB,EAAUlM,EAAKtB,EAAK4mB,GAC9D,GAAGtlB,GAAOA,EAAI,SAAS,CACtBkM,EAAS7G,KAAOrF,EAAI,SACpB,IAAIihC,EAAK,IAAI3C,EAAUt+B,EAAI,UAAWA,EAAI,SAAUtB,EAAK4mB,QAErD,GAAGtlB,GAAOA,EAAI,aAAa,CAC/BkM,EAAS7G,KAAO,aACZ47B,EAAK,IAAI3C,EAAUt+B,EAAI,UAAWkM,EAAS7G,KAAM3G,EAAK4mB,QAEtD,GAAGtlB,GAAqB,iBAAPA,EAAgB,CACrCkM,EAAS7G,KAAO,KACZ47B,EAAK,IAAI3C,EAAUt+B,EAAK,KAAMtB,EAAK4mB,GAExC,OAAG2b,EAAW/0B,EAASukB,YAAYwQ,GAC5B,IAQR3C,EAAUv/B,UAAUX,MAAQ,SAAS8iC,GACpC,OAAGA,GACF51B,KAAKizB,UAAY2C,EACV51B,MAEDA,KAAKizB,WAIbha,EAAUxlB,UAAUiiC,uBAAyB,SAAShhC,GACrD,OAAGA,GAAOA,EAAI,SACNsL,KAAKiG,UAAUE,YAAYzR,EAAI,SAAUA,EAAI,WAE7CA,GAAOA,EAAI,aACXsL,KAAKiG,UAAUE,YAAY,aAAczR,EAAI,cAE7CA,GAAqB,iBAAPA,IACdsL,KAAKiG,UAAUE,YAAY,KAAMzR,IAK1CukB,EAAUxlB,UAAUgiC,kBAAoB,SAASriC,EAAK4mB,GAErD,OADWha,KAAKg1B,gBAAgBhb,EAAK5mB,EAAK,SAAU,WAIrDxB,EAAOD,QAAUsnB,G,mPCxPjB,SAASlI,EAAkB1Y,GAC1B2H,KAAK61B,sBAAwB,GAC7B71B,KAAK81B,sBAAwB,GAC7B91B,KAAK+1B,eAAiB,GACtB/1B,KAAKg2B,eAAiB,GACtBh2B,KAAK4kB,iBAAkB,EACvB5kB,KAAK2kB,iBAAkB,EACpBtsB,GAAS2H,KAAK3H,QAAQA,GAEzB2H,KAAKi2B,SAAW,CAAC,WAAY,QAAS,KAAM,YAAa,cAG1DllB,EAAkBtd,UAAU4E,QAAU,SAAUA,GAC/C2H,KAAK4kB,mBAAmBvsB,IAAWA,EAAQusB,kBAAkBvsB,EAAQusB,gBACrE5kB,KAAK2kB,mBAAmBtsB,IAAWA,EAAQssB,kBAAkBtsB,EAAQssB,gBACrE3kB,KAAKk2B,UAAU79B,IAAWA,EAAQ69B,SAAS79B,EAAQ69B,QAGpDnlB,EAAkBtd,UAAU0iC,uBAAyB,SAASjD,GAC7D,IAAIkD,EAAS,GAOb,OANGlD,QAA2D,IAAxClzB,KAAK61B,sBAAsB3C,KAChDkD,EAASA,EAAOC,OAAOr2B,KAAK61B,sBAAsB3C,KAEhDlzB,KAAK4kB,kBAA4D,GAAzCwR,EAAO9pB,QAAQtM,KAAK4kB,kBAC9CwR,EAAOprB,KAAKhL,KAAK4kB,iBAEXwR,GAGRrlB,EAAkBtd,UAAU6iC,uBAAyB,SAASpD,GAC7D,IAAIkD,EAAS,GACb,GAAGlD,QAA2D,IAAxClzB,KAAK81B,sBAAsB5C,GAAyB,CACzE,IAAIqD,EAAUv2B,KAAK81B,sBAAsB5C,GACzC,GAAGqD,EACF,IAAI,IAAI1kC,EAAI,EAAGA,EAAE0kC,EAAQvhC,OAAQnD,KACE,GAA/BukC,EAAO9pB,QAAQiqB,EAAQ1kC,KAAWukC,EAAOprB,KAAKurB,EAAQ1kC,IAU5D,YANkD,IAAxCmO,KAAK81B,sBAAsB5C,KACpCkD,EAASA,EAAOC,OAAOr2B,KAAK81B,sBAAsB5C,KAEhDlzB,KAAK2kB,kBAA4D,GAAzCyR,EAAO9pB,QAAQtM,KAAK2kB,kBAC9CyR,EAAOprB,KAAKhL,KAAK2kB,iBAEXyR,GAGRrlB,EAAkBtd,UAAU+iC,sBAAwB,SAAStD,GAC5D,IAAI1mB,EAAOxM,KAAKs2B,uBAAuBpD,GACvC,OAAGlzB,KAAKg2B,eAAe9C,IAAa1mB,EAAKxM,KAAKg2B,eAAe9C,IACrD1mB,EAAKxM,KAAKg2B,eAAe9C,IAG9B1mB,EACKA,EAAKja,OAAOoW,KAAK6D,GAAM,IAG3BxM,KAAK2kB,gBAAwB3kB,KAAK2kB,qBAArC,GAIF5T,EAAkBtd,UAAUgjC,sBAAwB,SAASvD,GAC5D,IAAI1mB,EAAOxM,KAAKm2B,uBAAuBjD,GACvC,OAAGlzB,KAAK+1B,eAAe7C,IAAa1mB,EAAKxM,KAAK+1B,eAAe7C,IACrD1mB,EAAKxM,KAAK+1B,eAAe7C,IAE9B1mB,EACKA,EAAKja,OAAOoW,KAAK6D,GAAM,IAG3BxM,KAAK4kB,gBAAwB5kB,KAAK4kB,qBAArC,GAKF7T,EAAkBtd,UAAUgxB,uBAAyB,SAASle,EAAQmwB,EAAQC,GAC7E,IAAI,IAAI9kC,EAAI,EAAGA,EAAI8kC,EAAM3hC,OAAQnD,SACkB,IAAxCmO,KAAK61B,sBAAsBc,EAAM9kC,MAC1CmO,KAAK61B,sBAAsBc,EAAM9kC,IAAM,IAEpCmO,KAAK61B,sBAAsBc,EAAM9kC,IAAI0U,KACxCvG,KAAK61B,sBAAsBc,EAAM9kC,IAAI0U,GAAUmwB,IAKlD3lB,EAAkBtd,UAAUixB,uBAAyB,SAASne,EAAQmwB,EAAQC,GAC7E,IAAI,IAAI9kC,EAAI,EAAGA,EAAI8kC,EAAM3hC,OAAQnD,SACkB,IAAxCmO,KAAK81B,sBAAsBa,EAAM9kC,MAC1CmO,KAAK81B,sBAAsBa,EAAM9kC,IAAM,IAEpCmO,KAAK81B,sBAAsBa,EAAM9kC,IAAI0U,KACxCvG,KAAK81B,sBAAsBa,EAAM9kC,IAAI0U,GAAUmwB,IAKlD3lB,EAAkBtd,UAAU0S,YAAc,SAASpM,EAAMjH,GACxD,IAAIH,EAAI,GACJwV,EAAInI,KAAKy2B,sBAAsB18B,GACnC,QAAGoO,IACa,UAAZ,EAAOA,IACTxV,EAAEP,KAAOG,OAAOoW,KAAKR,GAAG,GACrBA,EAAExV,EAAEP,MAAM4H,QACZrH,EAAEqH,MAAQmO,EAAExV,EAAEP,MAAM4H,OAElBmO,EAAExV,EAAEP,MAAM+F,OACZxF,EAAEwF,KAAOgQ,EAAExV,EAAEP,MAAM+F,OAIpBxF,EAAEP,KAAO+V,EAEHxV,IAKToe,EAAkBtd,UAAUmjC,UAAY,SAAS78B,EAAMjH,GACtD,IAAIH,EAAI,GACJwV,EAAInI,KAAKw2B,sBAAsBz8B,GACnC,QAAGoO,IACa,UAAZ,EAAOA,IACTxV,EAAEP,KAAOG,OAAOoW,KAAKR,GAAG,GACrBA,EAAExV,EAAEP,MAAM4H,QACZrH,EAAEqH,MAAQmO,EAAExV,EAAEP,MAAM4H,OAElBmO,EAAExV,EAAEP,MAAM+F,OACZxF,EAAEwF,KAAOgQ,EAAExV,EAAEP,MAAM+F,OAIpBxF,EAAEP,KAAO+V,EAEHxV,IAMTf,EAAOD,QAAQof,G,gBClJf,IAAM3Z,EAAiBtD,EAAQ,GAE/B,SAASolB,EAAUjI,EAAQ5Y,GAM1B,OALA2H,KAAKiR,OAASA,EACdjR,KAAK3H,QAAQA,GACb2H,KAAK62B,MAAQ,GACb72B,KAAK82B,SAAW,GAChB92B,KAAK6e,MAAQ,GACN7e,KAGRkZ,EAAUzlB,UAAUo+B,UAAY,SAASr7B,GACxCwJ,KAAKxJ,OAASA,EACdwJ,KAAK+2B,uBAAuBvgC,IAG7B0iB,EAAUzlB,UAAU0nB,YAAc,SAASC,GAE1C,OADApb,KAAKY,SAAWwa,EACTpb,MAGRkZ,EAAUzlB,UAAU4e,OAAS,WAC5B,GAAGrS,KAAKY,SAAU,OAAOZ,KAAKY,SAASyR,OAAOrS,OAG/CkZ,EAAUzlB,UAAU4E,QAAU,SAAS+Y,GAEtC,OADApR,KAAKoR,OAASA,GAAUha,EAAe9C,KAAKkmB,QACrCxa,MAGRkZ,EAAUzlB,UAAUujC,SAAW,WAC9B,GAAGh3B,KAAK6e,MAAO,OAAO7e,KAAK6e,MAC3B7e,KAAK6e,MAAQ,GAEb,IADA,IAAIoY,EAAWj3B,KAAKxJ,OAAO0gC,cACnBrlC,EAAI,EAAGA,EAAEolC,EAASjiC,OAAQnD,IAC9BmO,KAAKm3B,gBAAgBF,EAASplC,MAChCmO,KAAK6e,MAAQ7e,KAAK6e,MAAMwX,OAAOr2B,KAAKo3B,iBAAiBH,EAASplC,MAGhE,OAAOmO,KAAK6e,OAGb3F,EAAUzlB,UAAU4jC,SAAW,WAC9B,GAAGr3B,KAAK62B,MAAO,OAAO72B,KAAK62B,MAC3B72B,KAAK62B,MAAQ,GAIb,IAFA,IAAII,EAAWj3B,KAAKxJ,OAAO0gC,cACvBL,EAAQ,GACJhlC,EAAI,EAAGA,EAAEolC,EAASjiC,OAAQnD,IACjC,IAAI,IAAIuQ,KAAK60B,EAASplC,IACmB,GAArCmO,KAAKs3B,iBAAiBhrB,QAAQlK,KAA8C,GAAlCy0B,EAAMvqB,QAAQ2qB,EAASplC,GAAGuQ,MACtEy0B,EAAM7rB,KAAKisB,EAASplC,GAAGuQ,IACvBpC,KAAK62B,MAAM7rB,KAAKhL,KAAKu3B,mBAAmBN,EAASplC,GAAGuQ,GAAIA,EAAG60B,EAASplC,OAE7B,GAArCmO,KAAKw3B,iBAAiBlrB,QAAQlK,KAA8C,GAAlCy0B,EAAMvqB,QAAQ2qB,EAASplC,GAAGuQ,MACtEy0B,EAAM7rB,KAAKisB,EAASplC,GAAGuQ,IACvBpC,KAAK62B,MAAM7rB,KAAKhL,KAAKy3B,mBAAmBR,EAASplC,GAAGuQ,GAAIA,EAAG60B,EAASplC,MAIvE,OAAOmO,KAAK62B,OAGb3d,EAAUzlB,UAAU8jC,mBAAqB,SAASthB,EAAK7T,EAAG4X,GACzD,IAAIzR,EAAO,CAACxO,KAAM,OAAQiT,GAAIiJ,GAC9B,OAAOjW,KAAK03B,UAAUnvB,EAAMyR,IAG7Bd,EAAUzlB,UAAUgkC,mBAAqBve,EAAUzlB,UAAU8jC,mBAE7Dre,EAAUzlB,UAAUikC,UAAY,SAASnvB,GACxC,OAAOA,GAGR2Q,EAAUzlB,UAAUkkC,UAAY,SAAS3Y,GACxC,OAAOA,GAGR9F,EAAUzlB,UAAUmkC,gBAAkB,SAASC,EAAKz1B,EAAG4X,GAGtD,IAFA,IAAI9gB,GAAS,EACTD,GAAS,EACLpH,EAAI,EAAGA,EAAEmO,KAAKw3B,iBAAiBxiC,OAAQnD,IAC3CmoB,EAAIha,KAAKw3B,iBAAiB3lC,MAC5BqH,EAAS8gB,EAAIha,KAAKw3B,iBAAiB3lC,KAIrC,GAAGqH,EACF,IAAQrH,EAAI,EAAGA,EAAEmO,KAAKs3B,iBAAiBtiC,OAAQnD,IAC3CmoB,EAAIha,KAAKs3B,iBAAiBzlC,MAC5BoH,EAAS+gB,EAAIha,KAAKs3B,iBAAiBzlC,KAKtC,GAAGoH,GAAUC,EAAO,CACnB,IAAI8lB,EAAO,CAAEjlB,KAAM,OAAQiT,GAAI6qB,EAAK3+B,OAAQA,EAAQD,OAAQA,GAC5D,OAAO+G,KAAK23B,UAAU3Y,EAAMhF,KAI9Bd,EAAUzlB,UAAUsjC,uBAAyB,WAC5C,IAAIE,EAAWj3B,KAAKxJ,OAAO0gC,cAC3B,GAAGD,GAAYA,EAASjiC,OACvB,IAAI,IAAInD,EAAI,EAAGA,EAAEolC,EAASjiC,OAAQnD,IACjCmO,KAAK83B,mBAAmBb,EAASplC,KAKpCqnB,EAAUzlB,UAAUqkC,mBAAqB,SAAS9d,GAEjD,GAAGha,KAAKiyB,WAAWjY,GAAK,CAGvB,IAAI6c,EAAQ,GACRkB,EAAO,GACX,IAAI,IAAI31B,KAAK4X,EACQ,iBAAVA,EAAI5X,GACV4X,EAAI5X,IAAgB,WAAV4X,EAAI5X,IAAmBpC,KAAKg4B,YAAY51B,EAAG4X,IAAM6c,EAAM7rB,KAAK5I,GAEvC,iBAApB4X,EAAI5X,GAAG,WAAyBpC,KAAKi4B,mBAAmB71B,EAAG4X,IACzE+d,EAAK/sB,KAAK5I,GAGZ,GAAmB,GAAhBy0B,EAAM7hC,OAAa,OAEtB,IAAI,IAAInD,EAAI,EAAGA,EAAEkmC,EAAK/iC,OAAQnD,IAAI,CAEjC,IAAIqmC,EAAM9gC,EAAejD,YAAYgkC,UAAUp2B,UAAU,GACrD9I,EAAS+G,KAAKo4B,gBAAgBvB,EAAOkB,EAAKlmC,GAAImoB,GAC/C/gB,IACF+G,KAAKq4B,eAAeH,EAAKH,EAAKlmC,GAAImoB,GAClCha,KAAKs4B,eAAete,EAAI/gB,GAASi/B,EAAKj/B,EAAQ8+B,EAAKlmC,GAAImoB,IAGzDha,KAAKu4B,mBAAmB1B,EAAO7c,GAC/B,IAAQnoB,EAAI,EAAGA,EAAEglC,EAAM7hC,OAAQnD,IAAI,CAClC,IAAI2mC,EAAOxe,EAAI6c,EAAMhlC,IACrBmO,KAAKq4B,eAAeG,EAAM3B,EAAMhlC,GAAImoB,MAKvCd,EAAUzlB,UAAU6kC,eAAiB,SAASr/B,EAAQC,EAAQu/B,EAAIC,EAAI1e,GAGrE,IAFA,IAAIgF,EAAO,CAAEjlB,KAAM,OAAQb,OAAQA,EAAQD,OAAQA,EAAQG,KAAMs/B,GAC3DpI,EAAgBtwB,KAAKoR,OAAO2I,iBAAiBC,EAAK,CAACye,EAAIC,GAAK,QAC1D7mC,EAAI,EAAGA,EAAEy+B,EAAct7B,OAAQnD,IAAI,CAGxC,IA2BIuuB,EA7BN,GAAGkQ,EAAcz+B,GAAG0tB,KACnB,GAAmC,iBAAzB+Q,EAAcz+B,GAAG0tB,MAA6D,MAAzC+Q,EAAcz+B,GAAG0tB,KAAKxd,UAAU,EAAG,IAC7Eqe,EAAIpG,EAAIsW,EAAcz+B,GAAG0tB,QACrBa,EAAE,YAAWpB,EAAKO,KAAOa,EAAE,gBAGnCpB,EAAKO,KAAO+Q,EAAcz+B,GAAG0tB,KAM/B,GAHG+Q,EAAcz+B,GAAG2tB,QACnBR,EAAKQ,MAAQ8Q,EAAcz+B,GAAG2tB,OAE5B8Q,EAAcz+B,GAAG6tB,SACnB,GAAuC,iBAA7B4Q,EAAcz+B,GAAG6tB,UAAqE,MAA7C4Q,EAAcz+B,GAAG6tB,SAAS3d,UAAU,EAAG,IACrFqe,EAAIpG,EAAIsW,EAAcz+B,GAAG6tB,YACrBU,EAAE,YAAWpB,EAAKU,SAAWU,EAAE,gBAGvCpB,EAAKU,SAAW4Q,EAAcz+B,GAAG6tB,SASnC,GANG4Q,EAAcz+B,GAAGiuB,QACnBd,EAAKc,MAAQwQ,EAAcz+B,GAAGiuB,YAES,IAA9BwQ,EAAcz+B,GAAG+tB,YAC1BZ,EAAKY,UAAY0Q,EAAcz+B,GAAG+tB,WAEhC0Q,EAAcz+B,GAAG8tB,OACnB,GAAqC,iBAA3B2Q,EAAcz+B,GAAG8tB,QAAiE,MAA3C2Q,EAAcz+B,GAAG8tB,OAAO5d,UAAU,EAAG,IACjFqe,EAAIpG,EAAIsW,EAAcz+B,GAAG8tB,UACrBS,EAAE,YAAWpB,EAAKW,OAASS,EAAE,gBAGrCpB,EAAKW,OAAS2Q,EAAcz+B,GAAG8tB,OAIlC3f,KAAK6e,MAAM7T,KAAKgU,IAGjB9F,EAAUzlB,UAAU4kC,eAAiB,SAASH,EAAK91B,EAAG4X,GAGrD,IAFA,IAAIzR,EAAO,CAAExO,KAAM,OAAQiT,GAAIkrB,EAAKS,SAAUv2B,GACxCkuB,EAAgBtwB,KAAKoR,OAAO2I,iBAAiBC,EAAK5X,EAAG,QACnDvQ,EAAI,EAAGA,EAAEy+B,EAAct7B,OAAQnD,IAAI,CAGxC,IAqBI+mC,EAvBN,GAAGtI,EAAcz+B,GAAG0tB,KACnB,GAAmC,iBAAzB+Q,EAAcz+B,GAAG0tB,MAA6D,MAAzC+Q,EAAcz+B,GAAG0tB,KAAKxd,UAAU,EAAG,IAC7E62B,EAAM5e,EAAIsW,EAAcz+B,GAAG0tB,QACrBqZ,EAAI,YAAWrwB,EAAKswB,OAASD,EAAI,gBAG3CrwB,EAAKswB,OAASvI,EAAcz+B,GAAG0tB,KAMjC,GAHG+Q,EAAcz+B,GAAG2tB,QACnBjX,EAAKiX,MAAQ8Q,EAAcz+B,GAAG2tB,OAE5B8Q,EAAcz+B,GAAG4tB,OACnB,GAAqC,iBAA3B6Q,EAAcz+B,GAAG4tB,QAAiE,MAA3C6Q,EAAcz+B,GAAG4tB,OAAO1d,UAAU,EAAG,IACjF62B,EAAM5e,EAAIsW,EAAcz+B,GAAG4tB,UACrBmZ,EAAI,YAAWrwB,EAAKkX,OAASmZ,EAAI,gBAG3CrwB,EAAKkX,OAAS6Q,EAAcz+B,GAAG4tB,OAGjC,GAAG6Q,EAAcz+B,GAAGguB,gBACnB,GAA8C,iBAApCyQ,EAAcz+B,GAAGguB,iBAAmF,MAApDyQ,EAAcz+B,GAAGguB,gBAAgB9d,UAAU,EAAG,IACnG62B,EAAM5e,EAAIsW,EAAcz+B,GAAGguB,mBACrB+Y,EAAI,YAAWrwB,EAAKsX,gBAAkB+Y,EAAI,gBAGpDrwB,EAAKsX,gBAAiByQ,EAAcz+B,GAAGguB,gBAGtCyQ,EAAcz+B,GAAGuL,OACnBmL,EAAKnL,KAAOkzB,EAAcz+B,GAAGuL,MAE3BkzB,EAAcz+B,GAAGuH,OACnBmP,EAAKnP,KAAOk3B,EAAcz+B,GAAGuH,MAE3Bk3B,EAAcz+B,GAAGkuB,SACnBxX,EAAKwX,OAASuQ,EAAcz+B,GAAGkuB,QAG7BxX,EAAKnP,OACY,iBAAV4gB,EAAI5X,GAAgBmG,EAAKnP,KAAO4gB,EAAI5X,GACtC4X,EAAI5X,GAAG,YAAWmG,EAAKnP,KAAO4gB,EAAI5X,GAAG,YAE9CpC,KAAK62B,MAAM7rB,KAAKzC,IAGjB2Q,EAAUzlB,UAAU2kC,gBAAkB,SAASvB,EAAO1uB,EAAG6R,GACxD,IAAI/S,EAAKjH,KAAKoR,OAAOnY,SACrB,GAAGgO,GAAM+S,EAAI/S,GACZ,OAAOA,EAER,IAAI4X,EAAQ7e,KAAKoR,OAAOyN,QACxB,GAAGA,EAAM,CACR,IAAI,IAAIhtB,EAAI,EAAGA,EAAIgtB,EAAM7pB,OAAQnD,IAChC,GAAGgtB,EAAMhtB,GAAG,IAAMsW,EACjB,OAAO0W,EAAMhtB,GAAG,GAGlB,OAAO,EAER,OAAOglC,EAAM,IAGd3d,EAAUzlB,UAAU8kC,mBAAqB,SAAS1B,EAAO7c,GACxD,KAAG6c,EAAM7hC,OAAS,GAAlB,CACA,IAAIiS,EAAKjH,KAAKoR,OAAOnY,SACjB6/B,EAAK94B,KAAKoR,OAAOyN,QACrB,IAAI5X,GAAM6xB,GAAMA,EAAG9jC,OAClB,IAAI,IAAInD,EAAI,EAAGA,EAAGinC,EAAG9jC,OAAQnD,KACG,GAA5BglC,EAAMvqB,QAAQwsB,EAAGjnC,GAAG,MAAyC,GAA5BglC,EAAMvqB,QAAQwsB,EAAGjnC,GAAG,KACvDmO,KAAKs4B,eAAete,EAAI8e,EAAGjnC,GAAG,IAAKmoB,EAAI8e,EAAGjnC,GAAG,IAAKinC,EAAGjnC,GAAG,GAAIinC,EAAGjnC,GAAG,GAAImoB,OAKzE,KAAIpmB,EAAKqT,IAA4B,GAAtB4vB,EAAMvqB,QAAQrF,GAAaA,EAAK4vB,EAAM,GACrD,IAAQhlC,EAAI,EAAGA,EAAEglC,EAAM7hC,OAAQnD,IAC3BglC,EAAMhlC,IAAM+B,GACfoM,KAAKs4B,eAAete,EAAIpmB,GAAIomB,EAAI6c,EAAMhlC,IAAK+B,EAAGijC,EAAMhlC,GAAImoB,MAI1Dd,EAAUzlB,UAAUukC,YAAc,SAAS7vB,EAAG6R,GAE7C,IADA,IAAMsW,EAAgBtwB,KAAKoR,OAAO2I,iBAAiBC,EAAK7R,EAAG,OAAQ,UAC3DtW,EAAI,EAAGA,EAAEy+B,EAAct7B,OAAQnD,IACtC,GAAGy+B,EAAcz+B,GAAGsR,OAAQ,OAAO,EAEpC,OAAO,GAGR+V,EAAUzlB,UAAUwkC,mBAAqB,SAAS9vB,EAAG6R,GACpD,IAAIloB,EAAIkO,KAAKoR,OAAO0M,WACpB,QAAe,IAALhsB,IAAqBA,EAAG,OAAO,EAEzC,IADA,IAAMw+B,EAAgBtwB,KAAKoR,OAAO2I,iBAAiBC,EAAK7R,EAAG,OAAQ,UAC3DtW,EAAI,EAAGA,EAAEy+B,EAAct7B,OAAQnD,IACtC,GAAGy+B,EAAcz+B,GAAGsR,OAAQ,OAAO,EAEpC,OAAO,GAIR+V,EAAUzlB,UAAUw+B,WAAa,SAASjY,GAEzC,IADA,IAAMsW,EAAgBtwB,KAAKoR,OAAO2I,iBAAiBC,GAAK,EAAO,MAAO,UAC9DnoB,EAAI,EAAGA,EAAEy+B,EAAct7B,OAAQnD,IACtC,GAAGy+B,EAAcz+B,GAAGsR,OAAQ,OAAO,EAEpC,OAAO,GAKRvR,EAAOD,QAAUunB,G,cC5SjB,SAASC,EAAWlI,GACnBjR,KAAKiR,OAASA,EAGfkI,EAAW1lB,UAAU4E,QAAU,SAAS8Y,GAEvC,OADAnR,KAAK+4B,UAAY,GACV/4B,MAGRmZ,EAAW1lB,UAAUo+B,UAAY,SAASmH,GACzCh5B,KAAKxJ,OAASwiC,GAGf7f,EAAW1lB,UAAU0nB,YAAc,SAASC,GAE3C,OADApb,KAAKY,SAAWwa,EACTpb,MAGRmZ,EAAW1lB,UAAU4e,OAAS,WAC7B,GAAGrS,KAAKY,SAAU,OAAOZ,KAAKY,SAASyR,OAAOrS,OAG/CpO,EAAOD,QAAUwnB,G,6CC1BjB,IAAM/hB,eAAiBtD,oBAAQ,GACzBsZ,oBAAsBtZ,oBAAQ,GAC9BmlC,WAAanlC,oBAAQ,IACrBqZ,MAAQrZ,oBAAQ,GAChBqM,gBAAkBrM,oBAAQ,GAEhC,SAASolC,UAAUjoB,EAAQxS,EAAOjI,GACjCwJ,KAAKiR,OAASA,EACdjR,KAAKvB,MAAQA,EACbuB,KAAKxJ,OAASA,EACdwJ,KAAKm5B,MAAQ,GACbn5B,KAAKo5B,UAAY9iC,SAASgD,cAAc,QACrC0G,KAAKo5B,UAAU7/B,aAAa,QAAS,4BACxCyG,KAAKq5B,SAAW/iC,SAASgD,cAAc,OACvC0G,KAAKq5B,SAAS9/B,aAAa,QAAS,2BACpCyG,KAAKs5B,qBAGNJ,UAAUzlC,UAAU6lC,mBAAqB,WAAU,IAO9C76B,EAP8C,OAC9CnK,EAAO8C,eAAe9C,MACtBmK,EAAQnK,EAAKmK,QAAQO,iBACnB21B,QAAQ30B,KAAKiR,QAAQ5V,MAAK,SAACu5B,GAChC,IAAI2E,EAAQ,IAAIniC,eAAe/C,WAAWugC,EAASn2B,GACnD,EAAK+6B,iBAAmBD,MAErB96B,EAAQnK,EAAKmK,QAAQe,oBACnBm1B,QAAQ30B,KAAKiR,QAAQ5V,MAAK,SAACu5B,GAChC,IAAI6E,EAAQ,IAAIriC,eAAe/C,WAAWugC,EAASn2B,GACnD,EAAKi7B,oBAAsBD,MAI7BP,UAAUzlC,UAAU4E,QAAU,SAAS8Y,GAOnC,OANHnR,KAAK25B,WAAaxoB,QAAiC,IAAlBA,EAAKwoB,WAA2BxoB,EAAKwoB,UACtE35B,KAAK45B,WAAazoB,QAAiC,IAAlBA,EAAKyoB,WAA2BzoB,EAAKyoB,UACtE55B,KAAK65B,cAAc1oB,QAAkC,IAAnBA,EAAK0oB,aAA4B1oB,EAAK0oB,WACxE75B,KAAK85B,YAAY3oB,QAAgC,IAAjBA,EAAK2oB,WAA0B3oB,EAAK2oB,SACpE95B,KAAK+5B,SAAS5oB,QAA6B,IAAdA,EAAK4oB,QAAuB5oB,EAAK4oB,MAC9D/5B,KAAKg6B,kBAAoB,CAAEC,WAAY,OAAQC,WAAY,QACjDl6B,MAGXk5B,UAAUzlC,UAAU0mC,WAAa,SAASC,GACzC,IAAI3qB,EAAMnZ,SAASgD,cAAc,UAGjC,OAFAmW,EAAIlW,aAAa,QAAS,0BAC1BkW,EAAI/V,YAAYpD,SAASuD,eAAeugC,IACjC3qB,GAGRypB,UAAUzlC,UAAU4mC,cAAgB,SAAS5qB,GAG5C,IAFA,IACI6qB,EADM7qB,EAAIzS,cAAcA,cACXR,uBAAuB,4BAChC3K,EAAE,EAAGA,EAAEyoC,EAAOtlC,OAAQnD,IAC7BuF,eAAejD,YAAYyH,eAAe0+B,EAAOzoC,KAInDqnC,UAAUzlC,UAAU8mC,WAAa,SAAS97B,GACtCA,GACFuB,KAAKwC,MAAMmL,SAASlP,GACrBrH,eAAejD,YAAYyH,eAAeoE,KAAKw6B,gBAC/Cx6B,KAAKwC,MAAMoL,mBAGZsrB,UAAUzlC,UAAUgnC,UAAY,SAAShrB,GACxC,IAAIH,EAAOtP,KACXyP,EAAIjP,iBAAiB,SAAS,WAC7B,IAEI/B,EAFAnK,EAAO8C,eAAe9C,KAG1B,OAFAgb,EAAK+qB,cAAcr6B,MAEZA,KAAKlN,OACX,IAAK,2BACJ2L,EAAQnK,EAAKmK,QAAQM,kBACtB,MACA,IAAK,mBACJN,EAAQnK,EAAKmK,QAAQO,gBACtB,MACA,IAAK,wBACJP,EAAQnK,EAAKmK,QAAQU,mBACtB,MACA,IAAK,sBACJV,EAAQnK,EAAKmK,QAAQe,mBACtB,MACA,IAAK,gBACJf,EAAQnK,EAAKmK,QAAQQ,gBACtB,MACA,IAAK,2BACJ,IAAIy7B,EAAU,OAAS16B,KAAK26B,UAC5Bl8B,EAAQnK,EAAKmK,QAAQm8B,eAAeF,GACrC,MACA,IAAK,+BACAA,EAAU,OAAS16B,KAAK26B,UAC5Bl8B,EAAQnK,EAAKmK,QAAQo8B,kBAAkBH,GACxC,MACA,IAAK,oBAEL,IAAK,wBACJ,OACD,QACCj7B,QAAQC,IAAI,yBAGd4P,EAAKirB,WAAW97B,OAIlBy6B,UAAUzlC,UAAUqnC,aAAe,SAASC,GAC3C,IAAItrB,EAAMnZ,SAASgD,cAAc,UAKjC,OAJAmW,EAAIlW,aAAa,QAAS,yBAC1BkW,EAAIlW,aAAa,QAASwhC,GAC1BtrB,EAAI/V,YAAYpD,SAASuD,eAAekhC,IACxC/6B,KAAKy6B,UAAUhrB,GACRA,GAGRypB,UAAUzlC,UAAUunC,eAAiB,SAASD,EAAOrmC,GACpD,IAAI+a,EAAMnZ,SAASgD,cAAc,UAKjC,OAJAmW,EAAIlW,aAAa,QAAS,yBAC1BkW,EAAIlW,aAAa,QAASwhC,GAC1BtrB,EAAI/V,YAAYpD,SAASuD,eAAenF,IACxCsL,KAAKy6B,UAAUhrB,GACRA,GAIRypB,UAAUzlC,UAAUwnC,iBAAmB,SAAS9oC,GAC/C,IAAI+oC,EAAUl7B,KAAKm6B,WAAW,kBAC9BhoC,EAAEuH,YAAYwhC,GACd,IAAIzrB,EAAMzP,KAAK86B,aAAa,4BAC5B3oC,EAAEuH,YAAY+V,GACVA,EAAMzP,KAAK86B,aAAa,oBAC5B3oC,EAAEuH,YAAY+V,GACVA,EAAMzP,KAAK86B,aAAa,yBAC5B3oC,EAAEuH,YAAY+V,GACVA,EAAMzP,KAAK86B,aAAa,uBAC5B3oC,EAAEuH,YAAY+V,IAGfypB,UAAUzlC,UAAU0nC,oBAAsB,SAAS1rB,GAClD,IAAI2rB,GAAS,EACb,GAAG3rB,EAAIoe,SAAS74B,OACf,IAAI,IAAInD,EAAE,EAAGA,EAAE4d,EAAIoe,SAAS74B,OAAQnD,IAAI,CAEvC,IAAIwpC,EAAQ5rB,EAAIjT,uBAAuB,4BACvC,GAAG6+B,EAAMrmC,OACR,IAAI,IAAIs1B,EAAE,EAAGA,EAAE+Q,EAAMrmC,OAAQs1B,IAC5BlzB,eAAejD,YAAY2b,cAAcurB,EAAM/Q,IAC/C8Q,GAAS,EAKb,OAAOA,GAGRlC,UAAUzlC,UAAU6nC,oBAAsB,SAAS7rB,GAClD,IAAIH,EAAOtP,KACXyP,EAAIjP,iBAAiB,SAAS,WAE7B,IADiB8O,EAAK6rB,oBAAoBn7B,MAC3B,CACd,IAAIu7B,EAASjlC,SAASgD,cAAc,OAEpC,GADAiiC,EAAOhiC,aAAa,QAAS,4BAC1B+V,EAAKkqB,kBAAoBlqB,EAAKkqB,iBAAiBgC,cACjD,IAAI,IAAI3pC,EAAI,EAAGA,EAAEyd,EAAKkqB,iBAAiBvC,SAASjiC,OAAQnD,IAAI,CAC3D,IAAIuH,EAAOkW,EAAKkqB,iBAAiBvC,SAASplC,GAAG,WAAW,UACxD0pC,EAAO7hC,YAAY4V,EAAK0rB,eAAe,2BAA4B5hC,IAGrEqW,EAAI/V,YAAY6hC,QAKnBrC,UAAUzlC,UAAUgoC,wBAA0B,SAAShsB,GACtD,IAAIH,EAAOtP,KACXyP,EAAIjP,iBAAiB,SAAS,WAE7B,IADiB8O,EAAK6rB,oBAAoBn7B,MAC3B,CACd,IAAIu7B,EAASjlC,SAASgD,cAAc,OAEpC,GADAiiC,EAAOhiC,aAAa,QAAS,4BAC1B+V,EAAKoqB,qBAAuBpqB,EAAKoqB,oBAAoB8B,cACvD,IAAI,IAAI3pC,EAAI,EAAGA,EAAEyd,EAAKoqB,oBAAoBzC,SAASjiC,OAAQnD,IAAI,CAC9D,IAAIuH,EAAOkW,EAAKoqB,oBAAoBzC,SAASplC,GAAG,WAAW,UAC3D0pC,EAAO7hC,YAAY4V,EAAK0rB,eAAe,+BAAgC5hC,IAGzEqW,EAAI/V,YAAY6hC,QAKnBrC,UAAUzlC,UAAUioC,gBAAkB,SAASjsB,GAC9C,IAAI5d,EAAIyE,SAASgD,cAAc,KAC/BzH,EAAE0H,aAAa,QAAS,8CACxBkW,EAAI/V,YAAY7H,IAIjBqnC,UAAUzlC,UAAUkoC,eAAiB,SAASxpC,GAC7C,IAAI+oC,EAAUl7B,KAAKm6B,WAAW,gBAC9BhoC,EAAEuH,YAAYwhC,IAEVU,EAAKtlC,SAASgD,cAAc,QAC7BC,aAAa,QAAS,0BACzBpH,EAAEuH,YAAYkiC,GACd,IAKIA,EALAnsB,EAAMzP,KAAK86B,aAAa,qBAC5Bc,EAAGliC,YAAY+V,GACfzP,KAAK07B,gBAAgBjsB,GACrBzP,KAAKs7B,oBAAoB7rB,IAErBmsB,EAAKtlC,SAASgD,cAAc,QAC7BC,aAAa,QAAS,0BACzBpH,EAAEuH,YAAYkiC,GACVnsB,EAAMzP,KAAK86B,aAAa,yBAC5Bc,EAAGliC,YAAY+V,GACfzP,KAAKy7B,wBAAwBhsB,GAC7BzP,KAAK07B,gBAAgBjsB,GACjBA,EAAMzP,KAAK86B,aAAa,iBAC5B3oC,EAAEuH,YAAY+V,IAGfypB,UAAUzlC,UAAUooC,kBAAoB,SAASvlC,GAChD,IACImI,EADOrH,eAAe9C,KACTmK,QAAQq9B,mBAAmBxlC,GAC5C0J,KAAKu6B,WAAW97B,IAGjBy6B,UAAUzlC,UAAUsoC,sBAAwB,WAC3C,IAAIp4B,EAAKrN,SAASgD,cAAc,QAChCqK,EAAGpK,aAAa,QAAS,yBACzB,IAAIyiC,EAAM1lC,SAASgD,cAAc,SACjC0iC,EAAIziC,aAAa,QAAS,yBAC1ByiC,EAAIziC,aAAa,cAAe,eAChC,IAAI+F,EAAMhJ,SAASgD,cAAc,UACjCgG,EAAI/F,aAAa,QAAS,6CAC1B+F,EAAI5F,YAAYpD,SAASuD,eAAe,WACxC,IAAIyV,EAAOtP,KAMX,OALAV,EAAIkB,iBAAiB,SAAS,WAC7B8O,EAAKusB,kBAAkBG,EAAIlpC,UAE5B6Q,EAAGjK,YAAYsiC,GACfr4B,EAAGjK,YAAY4F,GACRqE,GAIRu1B,UAAUzlC,UAAUwoC,mBAAqB,SAAS9pC,GACjD,IAAI+oC,EAAUl7B,KAAKm6B,WAAW,oBAC9BhoC,EAAEuH,YAAYwhC,GACd,IAAIzrB,EAAMzP,KAAK86B,aAAa,sBAC5B3oC,EAAEuH,YAAY+V,GACdtd,EAAEuH,YAAYsG,KAAK+7B,0BAIpB7C,UAAUzlC,UAAUyoC,kBAAoB,WACvC,IAAI/pC,EAAImE,SAASgD,cAAc,OAK/B,OAJAnH,EAAEoH,aAAa,QAAS,yBACxByG,KAAKi7B,iBAAiB9oC,GACtB6N,KAAK27B,eAAexpC,GACpB6N,KAAKi8B,mBAAmB9pC,GACjBA,GAGR+mC,UAAUzlC,UAAU0oC,oBAAsB,WACzC,IAAItqC,EAAIyE,SAASgD,cAAc,QAC/BzH,EAAE0H,aAAa,QAAS,2CACxB1H,EAAE0H,aAAa,QAAS,gCACxB1H,EAAE0H,aAAa,SAAS,GACxByG,KAAKw6B,eAAiB3oC,EACtB,IAAIyd,EAAOtP,KAUX,OATAnO,EAAE2O,iBAAiB,SAAS,SAASP,GACpC,GAAGA,EAAE/G,SAAW8G,KAChB,GAAGA,KAAK6tB,SAAS74B,OAChBoC,eAAejD,YAAYyH,eAAeoE,UACvC,CACH,IAAI7N,EAAImd,EAAK4sB,oBACbl8B,KAAKtG,YAAYvH,OAGZN,GAGRqnC,UAAUzlC,UAAU8a,SAAW,WAAU,WAIxC,GAHGvO,KAAK+5B,OACP/5B,KAAKo5B,UAAU1/B,YAAYyT,MAAMhU,aAAa6G,KAAK+5B,QAEjD/5B,KAAK25B,UAAW,KAcTyC,EAAT,WACCC,EAAW/jC,MAAM,sBACjBgkC,EAAG/iC,aAAa,QAAS,0BACzB8iC,EAAW5/B,UAAUC,OAAO,gCAC5B,IAAI6/B,EAAQjtB,EAAK6sB,sBACdE,EAAWxsB,YACbP,EAAK8pB,UAAU5jB,aAAagnB,EAAOH,EAAWxsB,cAG9CP,EAAK8pB,UAAU1/B,YAAY8iC,GAC3BA,EAAM9iC,YAAY6iC,IAEnBjtB,EAAK9M,MAAMuN,kBAEH0sB,EAAT,WACCJ,EAAW/jC,MAAM,sBACRgkC,EAAG/iC,aAAa,QAAS,6CAClC8iC,EAAW5/B,UAAUG,IAAI,gCACzB0S,EAAK8pB,UAAU3wB,YAAY+zB,IA/BxBH,EAAa/lC,SAASgD,cAAc,QACxC+iC,EAAW9iC,aAAa,QAAS,qBACjCyG,KAAK08B,aAAeL,EACpBr8B,KAAKo5B,UAAU1/B,YAAY2iC,GAC3B,IAAIrpC,EAAQgN,KAAK45B,UAAY,OAAS,OACtC55B,KAAKwC,MAAQxC,KAAK28B,YAAY3pC,GAC9B,IAAIwpC,EAAQx8B,KAAKwC,MAAM+L,UAAS,GACpBjY,SAASgD,cAAc,QAC7BC,aAAa,QAAS,qBAC5B,IAAI+iC,EAAKhmC,SAASgD,cAAc,KAEhC+iC,EAAW3iC,YAAY4iC,GACvB,IAAIhtB,EAAOtP,KAqBXq8B,EAAW77B,iBAAiB,SAAS,WACjC,EAAKo8B,aAAcH,IACjBL,IACL,EAAKQ,cAAgB,EAAKA,gBAE3BR,IACqB,QAAlBp8B,KAAK25B,WAAqB8C,IAE9Bz8B,KAAK68B,UAAYvmC,SAASgD,cAAc,QACxC0G,KAAK68B,UAAUtjC,aAAa,QAAS,0BACb,GAArByG,KAAKm5B,MAAMnkC,QACbgL,KAAK88B,QAAQ1lC,eAAe9C,KAAKgmB,QAASta,KAAKg6B,mBAGhD,IAAI,IAAInoC,EAAI,EAAGA,EAAEmO,KAAKm5B,MAAMnkC,OAAQnD,IAAI,CACvC,IAAIkrC,EAAO/8B,KAAKm5B,MAAMtnC,GAAG0c,WACzB,GAAGwuB,EAAK,CACP,GAAG/8B,KAAK65B,WACS75B,KAAKm5B,MAAMnkC,OAI5BgL,KAAK68B,UAAUnjC,YAAYqjC,IAK7B,OAFA/8B,KAAKo5B,UAAU1/B,YAAYsG,KAAK68B,WAC7B78B,KAAK85B,UAAU95B,KAAKo5B,UAAU1/B,YAAYsG,KAAKg9B,qBAC3Ch9B,KAAKo5B,WAIbF,UAAUzlC,UAAUwpC,oBAAsB,SAASC,GAClD,IAAIhrC,EAAIoE,SAASgD,cAAc,OAC3B6jC,EAAiB7mC,SAASgD,cAAc,UAI5C,GAHA6jC,EAAe5jC,aAAa,QAAS,mCACrC4jC,EAAezjC,YAAYpD,SAASuD,eAAe,SACnD3H,EAAEwH,YAAYyjC,GACXD,EAAS,CACX,IAAIE,EAAkB9mC,SAASgD,cAAc,UAC7C8jC,EAAgB7jC,aAAa,QAAS,mCACtC6jC,EAAgB1jC,YAAYpD,SAASuD,eAAe,UACpD3H,EAAEwH,YAAY0jC,GAEf,IAAIC,EAAqB/mC,SAASgD,cAAc,UAIhD,OAHA+jC,EAAmB9jC,aAAa,QAAS,mCACzC8jC,EAAmB3jC,YAAYpD,SAASuD,eAAe,aACvD3H,EAAEwH,YAAY2jC,GACPnrC,GAGRgnC,UAAUzlC,UAAUkpC,YAAc,SAAS3pC,GACvC,IAAIwP,EAAQ,IAAI4K,oBAAoB,OAAQpa,EAAM,KAAM,KACrDgN,KAAKvB,OACP+D,EAAMmL,SAAS3N,KAAKvB,OAExB,IAAI6Q,EAAOtP,KAIX,OAHAwC,EAAMyM,OAAS,SAASnP,GACvBwP,EAAKguB,YAAYx9B,IAEX0C,GAGR02B,UAAUzlC,UAAU8pC,YAAc,SAASz9B,GAC1CE,KAAKvB,MAAQqB,EACVE,KAAKwC,OAAOxC,KAAKwC,MAAMmL,SAAS3N,KAAKvB,QAGzCy6B,UAAUzlC,UAAU+pC,aAAe,SAAShnC,GAC3CwJ,KAAKxJ,OAASA,EACdwJ,KAAKu9B,YAAY/mC,EAAOiI,OACxBuB,KAAKy9B,gBAGNvE,UAAUzlC,UAAUqpC,QAAU,SAAS1rB,EAAQ/Y,GAC9C,IAAIqlC,EAAM,IAAIzE,WAAWj5B,KAAKiR,OAAQjR,KAAMoR,GAAQ/Y,QAAQA,GAK5D,OAJG2H,KAAKxJ,QACPknC,EAAI7L,UAAU7xB,KAAKxJ,QAEpBwJ,KAAKm5B,MAAMnuB,KAAK0yB,GACTA,GAGRxE,UAAUzlC,UAAUkqC,MAAQ,WAC3B,YAA6B,IAAd39B,KAAKvB,OAGrBy6B,UAAUzlC,UAAUmqC,cAAgB,WAChC59B,KAAKq5B,SAASxL,SAAS74B,QAAQoC,eAAejD,YAAYyH,eAAeoE,KAAKq5B,WAGlFH,UAAUzlC,UAAUoqC,cAAgB,WAC/B,IAAIC,EAAKxnC,SAASgD,cAAc,OAC5BykC,EAAMznC,SAASgD,cAAc,OACjCykC,EAAIxkC,aAAa,QAAS,+BAC1BukC,EAAGpkC,YAAYqkC,GAEf,IAAIC,EAAO1nC,SAASgD,cAAc,OAClC0kC,EAAKzkC,aAAa,QAAS,0DAC3BwkC,EAAIrkC,YAAYskC,GAChB,IAAIC,EAAO3nC,SAASgD,cAAc,QAGrC,OAFG2kC,EAAK1kC,aAAa,QAAS,2BAC3BykC,EAAKtkC,YAAYukC,GACbH,GAGT5E,UAAUzlC,UAAUyqC,SAAW,SAASjkC,GACvC,IAAIkkC,EAAY7nC,SAASgD,cAAc,OACvC6kC,EAAU5kC,aAAa,QAAS,qBAChC4kC,EAAUzkC,YAAYpD,SAASuD,eAAeI,IAC9CkkC,EAAUzkC,YAAYsG,KAAK69B,iBAC3B79B,KAAKq5B,SAAS3/B,YAAYykC,GAC1Bn+B,KAAKo5B,UAAU5jB,aAAaxV,KAAKq5B,SAAUr5B,KAAK08B,eAGjDxD,UAAUzlC,UAAU2qC,UAAY,SAASn+B,GACxC,IAAIo+B,EAAK/nC,SAASgD,cAAc,OAChC+kC,EAAG9kC,aAAa,QAAS,2BACzB8kC,EAAG3kC,YAAYpD,SAASuD,eAAeoG,IACvCD,KAAKq5B,SAAS3/B,YAAY2kC,GACvBr+B,KAAKo5B,WACPp5B,KAAKo5B,UAAU5jB,aAAaxV,KAAKq5B,SAAUr5B,KAAK68B,YAGlD3D,UAAUzlC,UAAU6qC,eAAiB,WACpCC,IAAMjoC,SAASgD,cAAc,OAC7BilC,IAAIhlC,aAAa,QAAS,yBAC1BglC,IAAI7kC,YAAYpD,SAASuD,eAAe,wCACrCmG,KAAKo5B,WACPp5B,KAAKo5B,UAAU5jB,aAAa+oB,IAAKv+B,KAAK68B,YAGxC3D,UAAUzlC,UAAU6pC,YAAc,SAASx9B,GAAK,WAE/C,GADAE,KAAK49B,gBACa,iBAAR99B,EAAV,CAIGE,KAAKvB,MAAQqB,EAChBE,KAAKk+B,SAAS,wBACd,IAAI5uB,EAAOtP,KACRF,EAAK60B,QAAQ30B,KAAKiR,QAAQ5V,MAAK,SAACu5B,GAClC,IAAIjiC,EAAI,IAAIyE,eAAe/C,WAAWugC,EAAS90B,GAC/C,EAAKtJ,OAAS7D,EACd2c,EAAKsuB,gBACF,EAAKpnC,OAAOglC,cACd,EAAKiC,eACD,EAAKa,yBAZVt+B,KAAKo+B,UAAUt+B,IAgBjBo5B,UAAUzlC,UAAUgqC,aAAe,WAClC,IAAI,IAAI5rC,EAAI,EAAGA,EAAEmO,KAAKm5B,MAAMnkC,OAAQnD,IACnCmO,KAAKm5B,MAAMtnC,GAAG2rC,aAAax9B,KAAKxJ,SAKlC0iC,UAAUzlC,UAAUupC,kBAAoB,WACvC,IAAIwB,GAAKloC,SAASgD,cAAc,OAChCklC,GAAGjlC,aAAa,QAAS,8BACzB,IAAI+V,KAAOtP,KACP1L,KAAO8C,eAAe9C,KACtBmqC,QAAU,SAAVA,QAAmB/pC,KACtB4a,KAAKovB,SAAS5rC,MAAQ,GACtB,IAAIZ,EAAG6N,KAAK,QAAUrL,IAAM,MACxBiqC,GAAKrvB,KAAKwtB,QAAQ5qC,EAAGod,KAAK0qB,mBAC3B1qB,KAAK9Y,QACPmoC,GAAG9M,UAAUviB,KAAK9Y,QAEnB,IAAIumC,KAAO4B,GAAGpwB,WACXwuB,MACFztB,KAAKutB,UAAUnjC,YAAYqjC,OAGzB5rB,KAAO,CACV,CAAEre,MAAO,GAAIkH,MAAO,+BACpB,CAAElH,MAAO,QAASkH,MAAO,kBACzB,CAAElH,MAAO,SAAUkH,MAAO,mBAC1B,CAAElH,MAAO,QAASkH,MAAO,kBACzB,CAAElH,MAAO,UAAWkH,MAAO,sBAC3B,CAAElH,MAAO,MAAOkH,MAAO,iBAEpB0G,IAAMP,gBAAgBmG,oBAAoB,OAAQ6K,MAAM,EAAMstB,SAGlE,OAFAz+B,KAAK0+B,SAAWh+B,IAChB89B,GAAG9kC,YAAYgH,KACR89B,IA0JR5sC,OAAOD,QAAUunC,W,gBCppBMplC,EAAQ,GAE/B,SAASovB,EAAiB7qB,GACzB2H,KAAK4D,IAAQvL,GAAWA,EAAQuL,IAAO,0BAA4BvL,EAAQuL,IAAM,yBACjF5D,KAAK3H,QAAUA,EAGhB6qB,EAAiBzvB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACxD,IAAIppB,EAAQgQ,EAAMpQ,MAElB,GADYsN,KAAK3H,cAAsC,IAApB2H,KAAK3H,QAAQumC,IAAsB5+B,KAAK3H,QAAQumC,IAAM5+B,KAAK6+B,UAAU7+B,KAAKjG,KAAMjH,GAC5G,CACN,IAAI0P,EAAQlM,SAASgD,cAAc,YACnC0G,KAAK4D,KAAO,kCAER,CACJ,IAAI2b,EAASvf,KAAK3H,cAAuC,IAArB2H,KAAK3H,QAAQknB,KAAuBvf,KAAK3H,QAAQknB,KAAOvf,KAAK8+B,YAAY9+B,KAAKjG,KAAMjH,IACpH0P,EAAQlM,SAASgD,cAAc,UAC7BC,aAAa,OAAQ,QAC3BiJ,EAAMjJ,aAAa,OAAQgmB,GAE5B/c,EAAMjJ,aAAa,QAASyG,KAAK4D,KACjCpB,EAAMjJ,aAAa,aAAczG,GAEjC0P,EAAM1P,MAAQA,EAKd,OAHA0P,EAAMhC,iBAAiB,SAAS,WAC/BsC,EAAM6uB,IAAI3xB,KAAKlN,UAET0P,GAGR0gB,EAAiBzvB,UAAUorC,UAAY,SAASr0B,EAAI1X,GACnD,GAAGA,GAASA,EAAMkC,QAAUlC,EAAMkC,OAAS,IAAK,OAAO,EAEvD,OAAyB,GADb,CAAC,yBAA0B,wBAAyB,mBAAoB,WAAY,WAAY,kBACnGsX,QAAQ9B,IAIlB0Y,EAAiBzvB,UAAUqrC,YAAc,SAASt0B,EAAI1X,GACrD,GAAGA,GAASA,EAAMkC,QAAUlC,EAAMkC,OAAS,GAAI,OAAO,GAMtD,OAAwB,GALb,CAAC,UAAW,iBAAkB,cAKjCsX,QAAQ9B,GAAkB,IACR,GALb,CAAC,iBAAkB,iBAAkB,cAAe,YAAa,WAAY,WACzF,oBAAoB,iBAAkB,gBAAiB,eAAgB,wBAAyB,sBAChG,yBAA0B,sBAAuB,sBAAuB,yBAA0B,cAAc,mBAGvG8B,QAAQ9B,GAAkB,IACX,GAHb,CAAC,cAAe,YAAa,aAAc,WAAY,WAAY,YAAa,mBAAoB,gBAGvG8B,QAAQ9B,GAAkB,EAC5B,IAGR5Y,EAAOD,QAAQ,CAACuxB,qB,cCnDhB,SAASC,EAAkB9qB,GAC1B2H,KAAK4D,IAAM,0DAA6DvL,GAAWA,EAAQuL,IAAQvL,EAAQuL,IAAM,IAGlHuf,EAAkB1vB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACzD,OAAOlc,KAAKqS,OAAOvP,EAAMpQ,QAG1BywB,EAAkB1vB,UAAU0xB,YAAc,SAASjJ,GAClD,OAAOlc,KAAKqS,OAAO6J,EAAWppB,UAG/BqwB,EAAkB1vB,UAAU4e,OAAS,SAASvf,GAC7C,IAAI0P,EAAQlM,SAASgD,cAAc,QAEnC,GADAkJ,EAAMjJ,aAAa,QAASyG,KAAK4D,KAC9B9Q,EAAM,CACR,IAAIisC,EAASzoC,SAASuD,eAAe/G,GACrC0P,EAAM9I,YAAYqlC,GAEnB,OAAOv8B,GAIR5Q,EAAOD,QAAQ,CAACwxB,sB,cCvBhB,SAASC,EAAkB/qB,GAC1B2H,KAAK4D,IAAM,wDAA2DvL,GAAWA,EAAQuL,IAAQvL,EAAQuL,IAAM,IAGhHwf,EAAkB3vB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACzD,IAAIppB,EAAQgQ,EAAMpQ,MACd8P,EAAQlM,SAASgD,cAAc,SAanC,OAZAkJ,EAAMjJ,aAAa,OAAQ,YACxBzG,GACF0P,EAAMjJ,aAAa,UAAW,WAE/BiJ,EAAMhC,iBAAiB,UAAU,WAC7B1N,EACFgQ,EAAM6uB,IAAI,IAGV7uB,EAAM6uB,IAAI,WAGLnvB,GAGR5Q,EAAOD,QAAQ,CAACyxB,sB,gBCtBhB,IAAMhsB,EAAiBtD,EAAQ,GAE/B,SAASuvB,EAAiBhrB,IAE1BgrB,EAAiB5vB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACxD,IAAIppB,EAAQgQ,EAAMpQ,MAIlB,OAHGoQ,EAAMA,OAASA,EAAMA,MAAMk8B,WAC7Bh/B,KAAKg/B,SAAWl8B,EAAMA,MAAMk8B,UAEtBh/B,KAAKqS,OAAOvf,IAGpBuwB,EAAiB5vB,UAAU0xB,YAAc,SAASjJ,GACjD,OAAOlc,KAAKqS,OAAO6J,EAAWppB,UAG/BuwB,EAAiB5vB,UAAU4e,OAAS,SAASvf,GAC5C,IAAI0P,EAAQlM,SAASgD,cAAc,QACnCkJ,EAAMjJ,aAAa,QAAS,gDAC5BiJ,EAAMjJ,aAAa,aAAczG,GACjC,IAAI8R,GAAM,EACV,GAAG9R,GAASkN,KAAKg/B,SAChB,IAAI,IAAIntC,EAAI,EAAGA,EAAEmO,KAAKg/B,SAAShqC,OAAQnD,IAAI,CAC1C,IAAIotC,EAAMj/B,KAAKg/B,SAASntC,GACrBotC,EAAG,OAAUnsC,GACZmsC,EAAIjlC,OAASilC,EAAIjlC,MAAM,YACzB4K,EAAMq6B,EAAIjlC,MAAM,WAYpB,OANGlH,IAAU8R,IACZA,EAAMxN,EAAejD,YAAYwM,aAAa7N,IAE5C8R,GACFpC,EAAM9I,YAAYpD,SAASuD,eAAe+K,IAEpCpC,GAGR5Q,EAAOD,QAAQ,CAAC0xB,qB,gBCzChB,IAAMljB,EAAkBrM,EAAQ,GAEhC,SAASwvB,EAAiBjrB,IAE1BirB,EAAiB7vB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACxD,IAAIppB,EAAQgQ,EAAMpQ,MACH4D,SAASgD,cAAc,UAC7BC,aAAa,QAAS,0BAC/B,IAAI2lC,EAAWp8B,EAAMq8B,mBACrBD,EAASv4B,QAAQ,CAAE7T,MAAO,GAAIkH,MAAO,kBAKrC,OADUmG,EAAgBmG,oBAAoB,gBAAiB44B,EAAUpsC,GAH1D,SAAS4B,GACvBoO,EAAM6uB,IAAIj9B,OAMZ9C,EAAOD,QAAQ,CAAC2xB,qB,gBCjBOxvB,EAAQ,GAE/B,SAASyvB,EAAqBlrB,GAC7B2H,KAAKo/B,OAAS,GAGf7b,EAAqB9vB,UAAU4rC,WAAa,SAASvsC,GACpD,IACC,IAAI2X,IAAU3X,GAAQ8H,KAAKsT,MAAMpb,GAIjC,OAHG2X,GAAuB,kBAAbzK,KAAKjG,OACjB0Q,EAAS,CAACA,IAEJA,EAER,MAAMxK,GAEL,OADAD,KAAKoO,MAAQpO,KAAKjG,KAAO,UAAYjH,EAAQ,2BAA4BmN,EAAEzL,WACpE,KAKT+uB,EAAqB9vB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GAC5D,OAAOlc,KAAKqS,OAAOvP,EAAMpQ,QAG1B6wB,EAAqB9vB,UAAU0xB,YAAc,SAASjJ,GACrD,OAAOlc,KAAKqS,OAAO6J,EAAWppB,UAG/BywB,EAAqB9vB,UAAU4e,OAAS,SAASvf,GAChD,IAAI0P,EAAQlM,SAASgD,cAAc,QAEnC,GADAkJ,EAAMjJ,aAAa,QAAS,sDACzBzG,EAAM,CACR0P,EAAMjJ,aAAa,aAAczG,GACjC,IAAI2X,EAASzK,KAAKq/B,WAAWvsC,GAC7B,GAAG2X,EACF,IAAI,IAAI5Y,EAAI,EAAGA,EAAI4Y,EAAOzV,OAAQnD,IAAI,CACrC,IAAIytC,EAAQhpC,SAASgD,cAAc,QACnCgmC,EAAM/lC,aAAa,QAAS,WAC5B+lC,EAAM5lC,YAAYpD,SAASuD,eAAe,eAC1CylC,EAAM5lC,YAAYpD,SAASuD,eAAe4Q,EAAO5Y,GAAG,GAAK,QACzDytC,EAAM5lC,YAAYpD,SAASuD,eAAe,gBAC1CylC,EAAM5lC,YAAYpD,SAASuD,eAAe4Q,EAAO5Y,GAAG,GAAK,OACzD2Q,EAAM9I,YAAY4lC,QAInB98B,EAAMjJ,aAAa,QAASyG,KAAKoO,OAGnC,OAAO5L,GAGR5Q,EAAOD,QAAQ,CAAC4xB,yB,cCrDhB,SAASC,EAAqBnrB,GAC7B2H,KAAKo/B,OAAS,GAGf5b,EAAqB/vB,UAAU8rC,aAAe,SAASC,EAAKC,EAAMrjB,GACjE,IAAIsjB,EAASppC,SAASgD,cAAc,SACpComC,EAAOnmC,aAAa,OAAQ,QAC5BmmC,EAAO5sC,MAAQ0sC,EACf,IAAIG,EAAUrpC,SAASgD,cAAc,SAKrC,OAJAqmC,EAAQpmC,aAAa,OAAQ,QAC7BomC,EAAQ7sC,MAAQ2sC,EAChBC,EAAOl/B,iBAAiB,SAAU4b,GAClCujB,EAAQn/B,iBAAiB,SAAU4b,GAC5B,CAACsjB,EAAQC,IAGjBnc,EAAqB/vB,UAAUmsC,cAAgB,SAASJ,EAAKC,EAAMj1B,EAAItG,EAAOL,GAC7E,IAAIy7B,EAAQhpC,SAASgD,cAAc,QACnCgmC,EAAM/lC,aAAa,QAAS,qBAC5B,IAAIsmC,EAAWvpC,SAASgD,cAAc,QAGtC,GAFAumC,EAAStmC,aAAa,QAAS,yBAC/B+lC,EAAM5lC,YAAYmmC,GACf37B,EAAQ,GAAY,0BAANsG,GAAkCtG,EAAQ,EAAG,CAC7D,IAAI47B,EAASxpC,SAASgD,cAAc,UACpCwmC,EAAOvmC,aAAa,QAAS,qBAC7BumC,EAAOpmC,YAAYpD,SAASuD,eAAe,WAC3CimC,EAAOt/B,iBAAiB,SAAS,WAChCi/B,EAAK3sC,MAAQ,GACb0sC,EAAI1sC,MAAQ,GACZ+Q,EAAO4E,YAAY62B,MAEpBO,EAASnmC,YAAYomC,GAQtB,OANAR,EAAM5lC,YAAYpD,SAASuD,eAAe,eAC1CylC,EAAM5lC,YAAY8lC,GAClBF,EAAM5lC,YAAYpD,SAASuD,eAAe,QAC1CylC,EAAM5lC,YAAYpD,SAASuD,eAAe,kBAC1CylC,EAAM5lC,YAAY+lC,GAClBH,EAAM5lC,YAAYpD,SAASuD,eAAe,QACnCylC,GAIR9b,EAAqB/vB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GAC5D,IAAIppB,EAAQgQ,EAAMpQ,MACd8P,EAAQlM,SAASgD,cAAc,QACnCkJ,EAAMjJ,aAAa,QAAS,sDAC5BiJ,EAAMjJ,aAAa,aAAczG,GACjC,IACC,IAAI2X,IAAU3X,GAAQ8H,KAAKsT,MAAMpb,GAElC,MAAMmN,GACLD,KAAKoO,MAAQpO,KAAKjG,KAAO,2BAA4BkG,EAAEzL,WACnDiW,GAAS,EAEd,IAAI6E,EAAOtP,KACP+/B,EAAsB,WAEzB,IADA,IAAIvzB,EAAO,GACH3a,EAAI,EAAGA,EAAEyd,EAAK8vB,OAAOpqC,OAAQnD,IACpC,GAAGyd,EAAK8vB,OAAOvtC,GAAG,GAAGiB,OAASwc,EAAK8vB,OAAOvtC,GAAG,GAAGiB,MAAM,CACrD,IAAI4B,EAAM,IAAM4a,EAAK8vB,OAAOvtC,GAAG,GAAGiB,MAAQ,IAAMwc,EAAK8vB,OAAOvtC,GAAG,GAAGiB,MAAQ,IAC1E0Z,EAAKxB,KAAKtW,GAGZ,GAAkB,GAAf8X,EAAKxX,OACP8N,EAAM6uB,IAAI,SAEN,GAAgB,kBAAb3xB,KAAKjG,KACZ+I,EAAM6uB,IAAInlB,EAAK,QAEX,CACJ,IAAIwzB,EAAK,IACT,IAAQnuC,EAAI,EAAGA,EAAE2a,EAAKxX,OAAQnD,IAC7BmuC,GAAMxzB,EAAK3a,GACRA,EAAE,EAAI2a,EAAKxX,SAAQgrC,GAAM,KAE7BA,GAAM,IACNl9B,EAAM6uB,IAAIqO,KAGRv1B,IACa,kBAAbzK,KAAKjG,KAA0B0Q,EAAS,CAAC,GAAG,KAE9CA,EAAS,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,KACN,yBAAbzK,KAAKjG,MAAiC0Q,EAAOO,KAAK,CAAC,GAAG,OAG3C,kBAAbhL,KAAKjG,OACP0Q,EAAS,CAACA,IAEX,IAAI,IAAI5Y,EAAI,EAAGA,EAAI4Y,EAAOzV,OAAQnD,IACjCmO,KAAKo/B,OAAOp0B,KAAKhL,KAAKu/B,aAAa90B,EAAO5Y,GAAG,GAAI4Y,EAAO5Y,GAAG,GAAIkuC,IAEhE,IAAIE,EAAS3pC,SAASgD,cAAc,QACpC,IAAQzH,EAAI,EAAGA,EAAImO,KAAKo/B,OAAOpqC,OAAQnD,IAAI,CAC1C,IAAIytC,EAAQt/B,KAAK4/B,cAAc5/B,KAAKo/B,OAAOvtC,GAAG,GAAImO,KAAKo/B,OAAOvtC,GAAG,GAAImO,KAAKjG,KAAMlI,EAAGouC,GACnFA,EAAOvmC,YAAY4lC,GAEpB98B,EAAM9I,YAAYumC,GACd3wB,EAAOtP,KACX,GAAgB,kBAAbA,KAAKjG,KAAyB,CAChC,IAAImmC,EAAU5pC,SAASgD,cAAc,QACrC4mC,EAAQ3mC,aAAa,QAAS,2BAC9B,IAAI4mC,EAAS7pC,SAASgD,cAAc,UACpC6mC,EAAO5mC,aAAa,QAAS,2BAC7B4mC,EAAOzmC,YAAYpD,SAASuD,eAAe,QAC3CsmC,EAAO3/B,iBAAiB,SAAS,WAChC,IAAI4/B,EAAS9wB,EAAKiwB,aAAa,GAAI,GAAIQ,GACnCT,EAAQhwB,EAAKswB,cAAcQ,EAAO,GAAIA,EAAO,GAAIpgC,KAAKjG,KAAMuV,EAAK8vB,OAAOpqC,OAAQirC,GACpFA,EAAOvmC,YAAY4lC,GACnBhwB,EAAK8vB,OAAOp0B,KAAKo1B,MAElBF,EAAQxmC,YAAYymC,GACpB39B,EAAM9I,YAAYwmC,GAEnB,OAAO19B,GAGR5Q,EAAOD,QAAQ,CAAC6xB,yB,gBCtHhB,IAAM6c,EAAavsC,EAAQ,IACrBsD,EAAiBtD,EAAQ,GAE/B,SAAS2vB,EAAeprB,GACvB2H,KAAKgH,OAAO3O,IAAWA,EAAQ2O,MAAM3O,EAAQ2O,IAC7ChH,KAAK+G,OAAO1O,IAAWA,EAAQ0O,MAAM1O,EAAQ0O,IAC7C/G,KAAKsgC,YAAYjoC,IAAWA,EAAQioC,WAAWjoC,EAAQioC,SACvDtgC,KAAKugC,YAAc,IACnBvgC,KAAKwgC,YAAc,IACnBxgC,KAAKygC,mBAAqB,KAC1BzgC,KAAK0gC,OAAS,IAAIL,EAAWM,eAG9Bld,EAAehwB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACtD,OAAOlc,KAAKqS,OAAOvP,EAAMpQ,QAG1B+wB,EAAehwB,UAAU0xB,YAAc,SAASjJ,GAC/C,OAAOlc,KAAKqS,OAAO6J,EAAWppB,UAG/B2wB,EAAehwB,UAAU4e,OAAS,SAASvf,GAC1C,IAAI0P,EAAQlM,SAASgD,cAAc,QAGnC,GAFAkJ,EAAMjJ,aAAa,QAAS,gDAC5BiJ,EAAMjJ,aAAa,aAAczG,GAC9BA,EAAM,CACR,IAAI2X,EAASrT,EAAejD,YAAYysC,UAAU5gC,KAAKjG,KAAMjH,GACzD+tC,EAAW7gC,KAAK8gC,oBAAoBr2B,GACpCs2B,EAAW/gC,KAAKghC,oBAAoBv2B,GACrCs2B,GAAUv+B,EAAM9I,YAAYqnC,GAC5BA,GAAYF,GAAUr+B,EAAM9I,YAAYpD,SAASuD,eAAemG,KAAKygC,qBACrEI,GAAUr+B,EAAM9I,YAAYmnC,GAEhC,OAAOr+B,GAGRihB,EAAehwB,UAAUutC,oBAAsB,SAASv2B,EAAQD,GAC/D,IAAIy2B,IAAQx2B,EAAOc,MAAOjV,SAASgD,cAAc,QAC9C2nC,IACFA,EAAK1nC,aAAa,QAAS,sBAC3B0nC,EAAKvnC,YAAYpD,SAASuD,eAAe4Q,EAAOc,QAEjD,IAAI21B,OAAgC,IAAjBz2B,EAAOe,QAAwBlV,SAASgD,cAAc,QACzE,GAAG4nC,EAAK,CACPA,EAAK3nC,aAAa,QAAS,wBAC3B,IAAI4nC,GAAQ12B,EAAOe,OAAcf,EAAOe,QACxC01B,EAAKxnC,YAAYpD,SAASuD,eAAesnC,IAE1C,IAAIC,OAAgC,IAAjB32B,EAAOgB,QAAwBnV,SAASgD,cAAc,QACzE,GAAG8nC,EAAK,CACPA,EAAK7nC,aAAa,QAAS,wBAC3B,IAAI8nC,GAAQ52B,EAAOgB,OAAchB,EAAOgB,QACxC21B,EAAK1nC,YAAYpD,SAASuD,eAAewnC,IAE1C,IAAIp2B,IAAMR,EAAOY,UAAW/U,SAASgD,cAAc,QAKnD,GAJG2R,IACFm2B,EAAK7nC,aAAa,QAAS,0BAC3B6nC,EAAK1nC,YAAYpD,SAASuD,eAAe4Q,EAAOY,YAE9C41B,GAAQC,GAAQE,GAAQn2B,EAAG,CAC7B,IAAIq2B,EAAQhrC,SAASgD,cAAc,QAgBnC,OAfAgoC,EAAM/nC,aAAa,QAAS,iCAAiCiR,GAC1Dy2B,GAAMK,EAAM5nC,YAAYunC,GACxBC,IACCD,GAAMK,EAAM5nC,YAAYpD,SAASuD,eAAemG,KAAKwgC,cACxDc,EAAM5nC,YAAYwnC,IAEhBE,KACCF,GAAQD,IAAMK,EAAM5nC,YAAYpD,SAASuD,eAAemG,KAAKwgC,cAChEc,EAAM5nC,YAAY0nC,IAEhBn2B,IACFq2B,EAAM5nC,YAAYpD,SAASuD,eAAe,iBAC1CynC,EAAM5nC,YAAY0nC,GAClBE,EAAM5nC,YAAYpD,SAASuD,eAAe,OAEpCynC,EAER,OAAO,GAGR7d,EAAehwB,UAAUqtC,oBAAsB,SAASr2B,EAAQD,GAC/D,IAAI+2B,IAAQ92B,EAAOI,MAAOvU,SAASgD,cAAc,QAC9CioC,IACFA,EAAKhoC,aAAa,QAAS,sBAC3BgoC,EAAK7nC,YAAYpD,SAASuD,eAAe4Q,EAAOI,QAEjD,IAAIq2B,IAAQz2B,EAAOK,OAAQxU,SAASgD,cAAc,QAC/C4nC,IACFA,EAAK3nC,aAAa,QAAS,uBAC3B2nC,EAAKxnC,YAAYpD,SAASuD,eAAemG,KAAK0gC,OAAOc,aAAa/2B,EAAOK,UAE1E,IAAI22B,IAAQh3B,EAAOM,KAAMzU,SAASgD,cAAc,QAKhD,GAJGmoC,IACFA,EAAKloC,aAAa,QAAS,qBAC3BkoC,EAAK/nC,YAAYpD,SAASuD,eAAe4Q,EAAOM,OAE9Cw2B,GAAQL,GAAQO,EAAK,CACvB,IAAIH,EAAQhrC,SAASgD,cAAc,QAUnC,OATGmoC,GAAMH,EAAM5nC,YAAY+nC,GACxBP,IACCO,GAAMH,EAAM5nC,YAAYpD,SAASuD,eAAemG,KAAKugC,cACxDe,EAAM5nC,YAAYwnC,IAEhBK,KACCL,GAAQO,IAAMH,EAAM5nC,YAAYpD,SAASuD,eAAemG,KAAKugC,cAChEe,EAAM5nC,YAAY6nC,IAEZD,EAER,OAAO,GAGR1vC,EAAOD,QAAQ,CAAC8xB,mB,cCjHhB,SAASkd,IACR3gC,KAAK0hC,OAAS,CAAC,UAAW,YAAa,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YAG/Hf,EAAeltC,UAAU+tC,aAAe,SAASnqB,GAChD,OAAOrX,KAAK0hC,OAAOrqB,EAAI,IAGxBzlB,EAAOD,QAAQ,CAACgvC,mB,gBCRhB,IAAMN,EAAavsC,EAAQ,IACrBsD,EAAiBtD,EAAQ,GAE/B,SAAS4vB,EAAerrB,GACvB2H,KAAKgH,OAAO3O,IAAWA,EAAQ2O,MAAM3O,EAAQ2O,IAC7ChH,KAAK+G,OAAO1O,IAAWA,EAAQ0O,MAAM1O,EAAQ0O,IAC7C/G,KAAKsgC,YAAYjoC,IAAWA,EAAQioC,WAAWjoC,EAAQioC,SACvDtgC,KAAKugC,YAAc,IACnBvgC,KAAKwgC,YAAc,IACnBxgC,KAAKygC,mBAAqB,KAC1BzgC,KAAK0gC,OAAS,IAAIL,EAAWM,eAG9Bjd,EAAejwB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACtD,IAAIppB,EAAQgQ,EAAMpQ,MACd8P,EAAQlM,SAASgD,cAAc,QACnCkJ,EAAMjJ,aAAa,QAAS,gDAC5BiJ,EAAMjJ,aAAa,aAAczG,GAEhCkN,KAAKyK,OADH3X,EACYsE,EAAejD,YAAYysC,UAAU5gC,KAAKjG,KAAMjH,GAE5C,GACnB,IAAI+tC,EAAW7gC,KAAK8gC,oBAAoB9gC,KAAKyK,OAAQzK,KAAKjG,KAAM+I,GAC5Di+B,EAAW/gC,KAAKghC,oBAAoBhhC,KAAKyK,OAAQzK,KAAKjG,KAAM+I,GAIhE,OAHGi+B,GAAUv+B,EAAM9I,YAAYqnC,GAC5BA,GAAYF,GAAUr+B,EAAM9I,YAAYpD,SAASuD,eAAemG,KAAKygC,qBACrEI,GAAUr+B,EAAM9I,YAAYmnC,GACxBr+B,GAGRkhB,EAAejwB,UAAUk+B,IAAM,SAASgQ,EAAMjtC,EAAKoO,EAAO0H,GACzDxK,KAAKyK,OAAOk3B,GAAQjtC,EACpB,IAAIoT,EAAM1Q,EAAejD,YAAYytC,cAAc5hC,KAAKyK,OAAQD,GAC7D1C,GACFhF,EAAM6uB,IAAI7pB,IAIZ4b,EAAejwB,UAAUutC,oBAAsB,SAASv2B,EAAQD,EAAI1H,GACnE,IAAqE,GAAlE,CAAC,eAAgB,oBAAqB,YAAYwJ,QAAQ9B,GAC5D,OAAO,EAER,IAAI8E,EAAOtP,KACPihC,EAAO3qC,SAASgD,cAAc,SAClC2nC,EAAK1nC,aAAa,QAAS,qCAAqCiR,GAChEy2B,EAAK1nC,aAAa,OAAQ,GAC1B0nC,EAAK1nC,aAAa,cAAe,MACjC0nC,EAAKnuC,MAAS2X,EAAOc,KAAOd,EAAOc,KAAO,GAC1C01B,EAAKzgC,iBAAiB,SAAS,WAC9B8O,EAAKqiB,IAAI,OAAQ3xB,KAAKlN,MAAOgQ,EAAO0H,MAErC,IAAI02B,EAAO5qC,SAASgD,cAAc,SAClC4nC,EAAK3nC,aAAa,QAAS,yCAAyCiR,GACpE02B,EAAK3nC,aAAa,OAAQ,GAC1B2nC,EAAK3nC,aAAa,cAAe,MACjC2nC,EAAKpuC,MAAS2X,EAAOe,OAASf,EAAOe,OAAQ,GAC7C01B,EAAK1gC,iBAAiB,SAAS,WAC9B8O,EAAKqiB,IAAI,SAAU3xB,KAAKlN,MAAOgQ,EAAO0H,MAEvC,IAAI42B,EAAO9qC,SAASgD,cAAc,SAClC8nC,EAAK7nC,aAAa,QAAS,yCAAyCiR,GACpE42B,EAAK7nC,aAAa,OAAQ,GAC1B6nC,EAAK7nC,aAAa,cAAe,aACjC6nC,EAAKtuC,MAAS2X,EAAOgB,OAAShB,EAAOgB,OAAQ,GAC7C21B,EAAK5gC,iBAAiB,SAAS,WAC9B8O,EAAKqiB,IAAI,SAAU3xB,KAAKlN,MAAOgQ,EAAO0H,MAEvC,IAAIq3B,EAAOvrC,SAASgD,cAAc,QAMlC,OALAuoC,EAAKnoC,YAAYunC,GACjBY,EAAKnoC,YAAYpD,SAASuD,eAAemG,KAAKwgC,cAC9CqB,EAAKnoC,YAAYwnC,GACjBW,EAAKnoC,YAAYpD,SAASuD,eAAemG,KAAKwgC,cAC9CqB,EAAKnoC,YAAY0nC,GACVS,GAGRne,EAAejwB,UAAUqtC,oBAAsB,SAASr2B,EAAQD,EAAI1H,GACnE,IAAIwM,EAAOtP,KACX,IAAoG,GAAjG,CAAC,WAAY,eAAgB,YAAa,iBAAkB,qBAAqBsM,QAAQ9B,GAAU,CACrG,IAAI+2B,EAAOjrC,SAASgD,cAAc,SAClCioC,EAAKhoC,aAAa,QAAS,qCAAqCiR,GAChE+2B,EAAKhoC,aAAa,OAAQ,GAC1BgoC,EAAKhoC,aAAa,cAAe,QACjCgoC,EAAKzuC,MAAS2X,EAAOI,KAAOJ,EAAOI,KAAO,GAC1C02B,EAAK/gC,iBAAiB,SAAS,WAC9B8O,EAAKqiB,IAAI,OAAQ3xB,KAAKlN,MAAOgQ,EAAO0H,MAGtC,IAAsH,GAAnH,CAAC,WAAY,eAAgB,iBAAkB,oBAAqB,aAAc,iBAAiB8B,QAAQ9B,GAAU,CACvH,IAAI02B,EAAO5qC,SAASgD,cAAc,UAClC4nC,EAAK3nC,aAAa,QAAS,uCAAuCiR,GAClE,IAAI,IAAI3Y,EAAI,EAAGA,EAAEmO,KAAK0gC,OAAOgB,OAAO1sC,OAAQnD,IAAI,CAC/C,IAAIiwC,EAAQxrC,SAASgD,cAAc,UACnCwoC,EAAMhvC,MAAQjB,EAAE,EAChBiwC,EAAMpoC,YAAYpD,SAASuD,eAAemG,KAAK0gC,OAAOgB,OAAO7vC,KAC1D4Y,EAAOK,OAASL,EAAOK,OAASjZ,EAAE,IACpCiwC,EAAMrhC,UAAW,GAElBygC,EAAKxnC,YAAYooC,GAElBZ,EAAK1gC,iBAAiB,UAAU,WAC/B8O,EAAKqiB,IAAI,QAAS3xB,KAAKlN,MAAOgQ,EAAO0H,MAGvC,IAAkG,GAA/F,CAAC,WAAY,eAAgB,oBAAqB,WAAY,iBAAiB8B,QAAQ9B,GAAU,CACnG,IAAIi3B,EAAOnrC,SAASgD,cAAc,SAClCmoC,EAAKloC,aAAa,QAAS,mCAAmCiR,GAC9Di3B,EAAKloC,aAAa,OAAQ,GAC1BkoC,EAAKloC,aAAa,cAAe,MACjCkoC,EAAK3uC,MAAS2X,EAAOM,IAAMN,EAAOM,IAAM,GACxC02B,EAAKjhC,iBAAiB,SAAS,WAC9B8O,EAAKqiB,IAAI,MAAO3xB,KAAKlN,MAAOgQ,EAAO0H,MAGrC,GAAG+2B,GAAQL,GAAQO,EAAK,CACvB,IAAIH,EAAQhrC,SAASgD,cAAc,QAUnC,OATGmoC,GAAMH,EAAM5nC,YAAY+nC,GACxBP,IACCO,GAAMH,EAAM5nC,YAAYpD,SAASuD,eAAemG,KAAKugC,cACxDe,EAAM5nC,YAAYwnC,IAEhBK,KACCL,GAAQO,IAAMH,EAAM5nC,YAAYpD,SAASuD,eAAemG,KAAKugC,cAChEe,EAAM5nC,YAAY6nC,IAEZD,EAER,OAAO,GAGR1vC,EAAOD,QAAQ,CAAC+xB,mB,qPClIhB,IAAMvjB,EAAkBrM,EAAQ,GAC1BsD,EAAiBtD,EAAQ,GAE/B,SAAS6vB,EAAiBtrB,GACzB2H,KAAK+hC,SAAU,EAGhBpe,EAAiBlwB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GAExD,OAAOlc,KAAKqS,OAAOvP,EAAMpQ,QAG1BixB,EAAiBlwB,UAAU0xB,YAAc,SAASjJ,GAEjD,OAAOlc,KAAKqS,OAAO6J,EAAWppB,UAG/B6wB,EAAiBlwB,UAAU4e,OAAS,SAASvf,GAE5C,IAAIkvC,EAAS1rC,SAASgD,cAAc,QACpC0oC,EAAOzoC,aAAa,QAAS,0DAE7B,GAAGyG,KAAKgiC,OACP,OAAOhiC,KAAKgiC,OAEb,GAAGlvC,EAAM,CACR,IAAIqJ,EAAM6D,KAAKiiC,UAAUnvC,GACzBkvC,EAAOtoC,YAAYyC,GAEpB,OAAO6lC,GAGRre,EAAiBlwB,UAAUwuC,UAAY,SAASnvC,GAC/C,OAAOwD,SAASuD,eAAe/G,IAIhC6wB,EAAiBlwB,UAAUyuC,kBAAoB,SAASpvC,EAAOgQ,EAAOoZ,GACrE,IAAI3G,EAAOjf,SAASgD,cAAc,QAC9BgW,EAAOtP,KAYX,OAXAuV,EAAKhc,aAAa,QAAS,0BAC3Bgc,EAAK7b,YAAYwiB,EAAWimB,aAAarvC,KACtCsvC,WAAaxhC,SAASyhC,kBACxBD,WAAWE,gBAAgBxvC,GAAOuI,MAAK,SAASd,GAC/C,IAAIqK,EAAM0K,EAAKizB,eAAezvC,EAAOyH,EAAU2hB,GAC5CtX,IACFxN,EAAejD,YAAYyH,eAAe2Z,GAC1CA,EAAK7b,YAAYkL,OAIb2Q,GAGRoO,EAAiBlwB,UAAU8uC,eAAiB,SAASrhC,EAAK3G,EAAUo7B,GACnE,IAAI6M,EAAQlsC,SAASgD,cAAc,QACnC,GAAGiB,IAAakoC,GAAKtiC,EAAgBuiC,4BAA4B,gBAAiBnoC,IAAW,CAC5FioC,EAAM9oC,YAAYi8B,EAAGwM,aAAajhC,EAAKuhC,KACvC,IACIE,EAAMzhC,EAAM,UADPf,EAAgBuiC,4BAA4B,eAAgBnoC,GAEjE+hC,EAAKn8B,EAAgBuiC,4BAA4B,kBAAmBnoC,GAKxE,MAJgB,UAAb,EAAO+hC,IAAkBA,EAAG,YAC9BqG,GAAO,IAAMrG,EAAG,WAEjBkG,EAAMjpC,aAAa,QAASopC,GACrBH,EAER,OAAO,GAGR5wC,EAAOD,QAAQ,CAACgyB,qB,cCtEhB,SAASC,EAAiBvrB,IAC1BurB,EAAiBnwB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACxD,IAAIppB,EAAQgQ,EAAMpQ,MACd8P,EAAQlM,SAASgD,cAAc,SACnCkJ,EAAMjJ,aAAa,QAAS,0DAC5BiJ,EAAMjJ,aAAa,OAAQ,QAC3BiJ,EAAMjJ,aAAa,OAAQ,IAC3BiJ,EAAM1P,MAAQA,EASd,OAPA0P,EAAMhC,iBAAiB,UAAU,WAChC,IAAIU,EAAMlB,KAAKlN,OACS,GAArBoO,EAAIoL,QAAQ,OAAmC,GAArBpL,EAAIoL,QAAQ,OACxCpL,EAAM,OAASA,GAEhB4B,EAAM6uB,IAAIzwB,MAEJsB,GAGR5Q,EAAOD,QAAQ,CAACiyB,qB,gBCnBO9vB,EAAQ,GAE/B,SAAS+vB,EAAgBxrB,IAEzBwrB,EAAgBpwB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACvD,OAAOlc,KAAKqS,OAAOvP,EAAMpQ,QAG1BmxB,EAAgBpwB,UAAU0xB,YAAc,SAASjJ,GAChD,OAAOlc,KAAKqS,OAAO6J,EAAWppB,UAG/B+wB,EAAgBpwB,UAAU4e,OAAS,SAASvf,GAC3C,IAAI0P,EAAQlM,SAASgD,cAAc,QAGnC,GAFAkJ,EAAMjJ,aAAa,QAAS,uDAC5BiJ,EAAMjJ,aAAa,aAAczG,GAC9BA,EAAM,CACR,IAAI8vC,EAAMtsC,SAASgD,cAAc,KACjCspC,EAAIrpC,aAAa,MAAOzG,GACxB0P,EAAM9I,YAAYkpC,GAEnB,OAAOpgC,GAGR5Q,EAAOD,QAAQ,CAACkyB,oB,gBCxBO/vB,EAAQ,GAE/B,SAASgwB,EAAgBzrB,IACzByrB,EAAgBrwB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACvD,GAAgB,oBAAblc,KAAKjG,KAA2B,CAClC,IAAIyI,EAAQlM,SAASgD,cAAc,YAMnC,OALAkJ,EAAMjJ,aAAa,QAAS,0DAC5BiJ,EAAM1P,MAAQA,MACd0P,EAAMhC,iBAAiB,UAAU,WAChCsC,EAAM6uB,IAAI3xB,KAAKlN,UAET0P,EAER,OAAO,GAGR5Q,EAAOD,QAAQ,CAACmyB,oB,cChBhB,SAASC,EAAe1rB,GACvB2H,KAAK4D,IAAM,wDAA2DvL,GAAWA,EAAQuL,IAAQvL,EAAQuL,IAAM,IAGhHmgB,EAAetwB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACtD,OAAOlc,KAAKqS,OAAOvP,EAAMpQ,QAG1BqxB,EAAetwB,UAAU0xB,YAAc,SAASjJ,GAC/C,OAAOlc,KAAKqS,OAAO6J,EAAWppB,UAG/BixB,EAAetwB,UAAU4e,OAAS,SAASvf,GAC1C,IAAI0P,EAAQlM,SAASgD,cAAc,QAInC,GAHAkJ,EAAMjJ,aAAa,QAASyG,KAAK4D,KACjCpB,EAAMjJ,aAAa,OAAQ,IAC3BiJ,EAAMjJ,aAAa,aAAczG,GAC9BA,EAAM,CACR,IAAI+D,EAAIP,SAASgD,cAAc,KAC/BzC,EAAE0C,aAAa,OAAQzG,GACvB+D,EAAE6C,YAAYpD,SAASuD,eAAe/G,IACtC0P,EAAM9I,YAAY7C,GAEnB,OAAO2L,GAGR5Q,EAAOD,QAAQ,CAACoyB,mB,gBC1BhB,IAAM3sB,EAAiBtD,EAAQ,GAE/B,SAASkwB,EAAiB3rB,GACzB2H,KAAK6iC,QAAUxqC,IAAWA,EAAQwqC,QAASxqC,EAAQwqC,OAGpD7e,EAAiBvwB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACxD,OAAOlc,KAAKqS,OAAOvP,EAAMpQ,QAG1BsxB,EAAiBvwB,UAAU0xB,YAAc,SAASjJ,GACjD,OAAOlc,KAAKqS,OAAO6J,EAAWppB,UAG/BkxB,EAAiBvwB,UAAU4e,OAAS,SAASvf,GAC/B,IAAVA,IAAaA,EAAQ,KACxB,IAAI0P,EAAQlM,SAASgD,cAAc,QAKnC,OAJAkJ,EAAMjJ,aAAa,QAAS,gDAC5BiJ,EAAMjJ,aAAa,aAAczG,GACjCA,EAASkN,KAAK6iC,OAASzrC,EAAejD,YAAY2uC,iBAAiBhwC,GAASA,EAC5E0P,EAAM9I,YAAYpD,SAASuD,eAAe/G,IACnC0P,GAGR5Q,EAAOD,QAAQ,CAACqyB,qB,gBCxBhB,IAAM5sB,EAAiBtD,EAAQ,GAE/B,SAASmwB,EAAgB5rB,GACxB2H,KAAK6iC,QAAUxqC,IAAWA,EAAQwqC,QAASxqC,EAAQwqC,OACnD7iC,KAAK4D,IAAM,wDAA2DvL,GAAWA,EAAQuL,IAAQvL,EAAQuL,IAAM,IAC/G5D,KAAK+iC,aAAa1qC,IAAWA,EAAQ0qC,YAAY1qC,EAAQ0qC,UAG1D9e,EAAgBxwB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACvD,OAAOlc,KAAKqS,OAAOvP,EAAMpQ,QAG1BuxB,EAAgBxwB,UAAU0xB,YAAc,SAASjJ,GAChD,OAAOlc,KAAKqS,OAAO6J,EAAWppB,UAG/BmxB,EAAgBxwB,UAAU4e,OAAS,SAASvf,GAC3C,IAAI0Z,EAAOpV,EAAejD,YAAY6uC,gBAAgBlwC,EAAOkN,KAAK+iC,WAC9D5wC,EAAImE,SAASgD,cAAc,QAC/BnH,EAAEoH,aAAa,QAASyG,KAAK4D,KAC7B,IAAIq/B,EAAQ3sC,SAASgD,cAAc,QACnC2pC,EAAM1pC,aAAa,QAAS,6BAC5B,IAAI2pC,EAAQ5sC,SAASgD,cAAc,QACnC4pC,EAAM3pC,aAAa,QAAS,8BAC5B,IAAI4pC,EAAKnjC,KAAKojC,YAAchsC,EAAejD,YAAY2uC,iBAAiBt2B,EAAK,IAAMA,EAAK,GACpF62B,EAAQ/sC,SAASuD,eAAespC,GAGpC,GAFAF,EAAMvpC,YAAY2pC,GAClBlxC,EAAEuH,YAAYupC,GACI,GAAfz2B,EAAKxX,OAAY,CACnB7C,EAAEuH,YAcJ,WACC,IAAIvH,EAAImE,SAASgD,cAAc,QAI/B,OAHAnH,EAAEoH,aAAa,QAAS,4BACxBpH,EAAEoH,aAAa,QAAS,2DACxBpH,EAAEuH,YAAYpD,SAASuD,eAAe,UAC/B1H,EAnBQmxC,IACd,IAAIC,EAAMvjC,KAAKojC,UAAUxiC,UAAYxJ,EAAejD,YAAY2uC,iBAAiBt2B,EAAK,IAAMA,EAAK,GAC7Fg3B,EAASltC,SAASuD,eAAe0pC,GACrCL,EAAMxpC,YAAY8pC,GAClBrxC,EAAEuH,YAAYwpC,GAEf,OAAO/wC,GAGR8xB,EAAgBxwB,UAAU2vC,UAAY,WACrC,OAA8D,GAA3D,CAAC,iBAAkB,iBAAiB92B,QAAQtM,KAAKjG,OAC7CiG,KAAK6iC,QAWbjxC,EAAOD,QAAQ,CAACsyB,oB,gBCnDhB,IAAM7sB,EAAiBtD,EAAQ,GAE/B,SAASowB,EAAgB7rB,GACxB2H,KAAK6iC,QAAUxqC,IAAWA,EAAQwqC,QAASxqC,EAAQwqC,OACnD7iC,KAAK4D,IAAM,wDAA2DvL,GAAWA,EAAQuL,IAAQvL,EAAQuL,IAAM,IAC/G5D,KAAK+iC,aAAa1qC,IAAWA,EAAQ0qC,YAAY1qC,EAAQ0qC,UAoE1D,SAASO,IACR,IAAInxC,EAAImE,SAASgD,cAAc,QAI/B,OAHAnH,EAAEoH,aAAa,QAAS,4BACxBpH,EAAEoH,aAAa,QAAS,2DACxBpH,EAAEuH,YAAYpD,SAASuD,eAAe,UAC/B1H,EAtER+xB,EAAgBzwB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACvD,IAAIppB,EAAQgQ,EAAMpQ,MACd8Z,EAAOpV,EAAejD,YAAY6uC,gBAAgBlwC,EAAOkN,KAAK+iC,WAC9D5wC,EAAImE,SAASgD,cAAc,QAC/BnH,EAAEoH,aAAa,QAASyG,KAAK4D,KAC7B,IAAIq/B,EAAQ3sC,SAASgD,cAAc,QAC/B4pC,EAAQ5sC,SAASgD,cAAc,QAC/BmqC,EAASj3B,EAAKxX,OAAS,EAAIwX,EAAK,GAAK,GACrCk3B,EAASl3B,EAAKxX,OAAS,EAAIwX,EAAK,GAAK,GACrCm3B,EAAUrtC,SAASgD,cAAc,SACrCqqC,EAAQpqC,aAAa,OAAQ,QAC7BoqC,EAAQpqC,aAAa,OAAQ,IAC1BkqC,IACFE,EAAQ7wC,MAAQ2wC,GAEjB,IAAIG,EAAWttC,SAASgD,cAAc,SACtCsqC,EAASrqC,aAAa,OAAQ,QAC9BqqC,EAASrqC,aAAa,OAAQ,IAC3BmqC,IACF1jC,KAAK6jC,eAAgB,EACrBD,EAAS9wC,MAAQ4wC,GAElBT,EAAMvpC,YAAYiqC,GAClBxxC,EAAEuH,YAAYupC,GACXjjC,KAAK6jC,gBACPX,EAAMxpC,YAAY4pC,KAClBJ,EAAMxpC,YAAYkqC,IAEnBzxC,EAAEuH,YAAYwpC,GACd,IAAIY,EAAMxtC,SAASgD,cAAc,UACjCwqC,EAAIvqC,aAAa,QAAS,yBAC1B,IAAIY,EAAM6F,KAAK6jC,cAAgB,yBAA2B,4BAC1DC,EAAIpqC,YAAYpD,SAASuD,eAAeM,IACxChI,EAAEuH,YAAYoqC,GACd,IAAIx0B,EAAOtP,KACX8jC,EAAItjC,iBAAiB,SAAS,WAC1B8O,EAAKu0B,eACPv0B,EAAKu0B,eAAgB,EACrBD,EAAS9wC,MAAQ,GACjBsE,EAAejD,YAAYyH,eAAesnC,KAG1C5zB,EAAKu0B,eAAgB,EACrBD,EAAS9wC,MAAQ,GACjBowC,EAAMxpC,YAAY4pC,KAClBJ,EAAMxpC,YAAYkqC,IAEnB,IAAIzpC,EAAMmV,EAAKu0B,cAAgB,yBAA2B,4BAC1DC,EAAInJ,UAAYxgC,EAChB4pC,OAED,IAAIA,EAAgB,WAChBz0B,EAAKu0B,eAAiBD,EAAS9wC,MAC9B6wC,EAAQ7wC,MAAOgQ,EAAM6uB,IAAI,IAAMgS,EAAQ7wC,MAAQ,IAAM8wC,EAAS9wC,MAAQ,KACpEgQ,EAAM6uB,IAAIiS,EAAS9wC,OAGxBgQ,EAAM6uB,IAAIgS,EAAQ7wC,QAKpB,OAFA6wC,EAAQnjC,iBAAiB,SAAUujC,GACnCH,EAASpjC,iBAAiB,SAAUujC,GAC7B5xC,GAWRP,EAAOD,QAAQ,CAACuyB,oB,gBCjFhB,IAAM8f,EAAkBlwC,EAAQ,IACTA,EAAQ,GAC/B,SAASqwB,EAAgB9rB,IAEzB8rB,EAAgB1wB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACvD,IAAI+nB,EAAe3tC,SAASgD,cAAc,OAC1C2qC,EAAa1qC,aAAa,QAAS,2BACnC,IACI2qC,EAAU,IAAIF,EACdxrB,EAAM0rB,EAAQC,QAAQF,EAAcnxC,MAAOkN,KAAKjG,MAuBjD,MAtBS,kBAANyQ,GACFwK,OAAOC,KAAKmvB,MAAMC,YAAY7rB,EAAK,SAAS,SAAS4rB,GACpD,IAAIE,EAAWF,EAAMG,OACjBC,EAAM,IAAMF,EAAS9E,MAAQ,IAAM8E,EAASG,MAAQ,IACxD7jC,SAAS+wB,IAAI6S,GACVN,EAAQQ,eACR,IAAIlxB,EAAO,CACb8wB,SAAUA,EACV9rB,IAAKA,GAEFmsB,EAAS,IAAI3vB,OAAOC,KAAK2vB,OAAOpxB,GACpC0wB,EAAQW,QAAQ75B,KAAK25B,MAItB3vB,OAAOC,KAAKmvB,MAAMC,YAAY7rB,EAAK,SAAS,SAAS4rB,GACjD,IAAIU,EAAOZ,EAAQa,SAASC,UAC5BF,EAAK95B,KAAKo5B,EAAMG,QACd,IAAID,EAAWF,EAAMG,OACrBL,EAAQe,UAAUX,EAAU9rB,EAAK1V,EAAO,IAAMgiC,EAAKI,YAAallC,KAAKjG,SAGrEkqC,GAGXryC,EAAOD,QAAQ,CAACwyB,oB,cCnChB,SAAS6f,EAAgB3rC,GACxB2H,KAAKmlC,SAAU,EACfnlC,KAAK+kC,UAAW,EAChB/kC,KAAK6kC,QAAU,GACf7kC,KAAKwT,KAAKnb,GAGX2rC,EAAgBvwC,UAAU+f,KAAO,SAASpC,GACzCpR,KAAKjG,KAASqX,GAAUA,EAAOrX,KAAQqX,EAAOrX,KAAM,QACpDiG,KAAKsN,MAAU8D,GAAUA,EAAO9D,MAAS8D,EAAO9D,MAAQ,QACxDtN,KAAKuN,OAAW6D,GAAUA,EAAO7D,OAAW6D,EAAO7D,OAAS,QAC5DvN,KAAKolC,OAAWh0B,GAAUA,EAAOg0B,OAAUh0B,EAAOg0B,OAAS,aAC3DplC,KAAKqlC,QAAYj0B,GAAUA,EAAOi0B,QAAYj0B,EAAOi0B,QAAU,qBAC/DrlC,KAAKslC,KAASl0B,GAAUA,EAAOk0B,KAAQl0B,EAAOk0B,KAAO,EACrDtlC,KAAKohB,OAAWhQ,GAAUA,EAAOgQ,OAAUhQ,EAAOgQ,OAAS,CAAE5B,MAAO,UAAW+lB,QAAS,GAAK5lB,OAAQ,GACrG3f,KAAKmhB,KAAS/P,GAAUA,EAAO+P,KAAQ/P,EAAO+P,KAAO,CAAE3B,MAAO,UAAW+lB,QAAS,IAClFvlC,KAAKoiB,KAAShR,GAAUA,EAAOgR,KAAQhR,EAAOgR,KAAO,CAAE5C,MAAO,UAAW+lB,QAAS,GAAK5lB,OAAQ,IAGhGqkB,EAAgBvwC,UAAU+xC,QAAU,WAChCxlC,KAAKylC,SAGTzB,EAAgBvwC,UAAUiyC,wBAA0B,SAASP,GAI1D,IAHA,IAAIxqC,EAAO,IACPgrC,EAAWR,EAAQH,UACnBY,GAAY,EACPtb,EAAE,EAAGA,EAAEqb,EAAST,YAAa5a,IAAI,CACnCsb,IACCjrC,GAAc,KAElB,IAAIkrC,EAAKF,EAASG,MAAMxb,GACxB3vB,EAAOA,EAAO,IAAMkrC,EAAGrG,MAAQ,IAAMqG,EAAGpB,MAAQ,IAChDmB,GAAY,EAGhB,OADAjrC,GAAc,KAIjBqpC,EAAgBvwC,UAAUsyC,wBAA0B,SAASC,GAG1D,IAFA,IAAIC,EAAYrrC,KAAKsT,MAAM83B,GACvBE,EAAS,GACLr0C,EAAE,EAAEA,EAAEo0C,EAAUjxC,OAAOnD,IAAI,CAC/B,IAAIs0C,EAAU,GACdA,EAAQ3G,IAAMyG,EAAUp0C,GAAG,GAC3Bs0C,EAAQ1B,IAAMwB,EAAUp0C,GAAG,GAC3Bq0C,EAAOl7B,KAAKm7B,GAEhB,OAAOD,GAGVlC,EAAgBvwC,UAAU2yC,cAAgB,SAASC,EAAQ7tB,GAC1D,IAAI2sB,EAAU,IAAInwB,OAAOC,KAAKqxB,QAAQ,CAC/BC,MAAOF,EACPG,YAAaxmC,KAAKohB,OAAO5B,MACzBinB,cAAezmC,KAAKohB,OAAOmkB,QAC3BmB,aAAc1mC,KAAKohB,OAAOzB,OAC1BgnB,UAAW3mC,KAAKmhB,KAAK3B,MACrBonB,YAAa5mC,KAAKmhB,KAAKokB,UAG9B,OADGJ,EAAQ0B,OAAOruB,GACX2sB,GAGRnB,EAAgBvwC,UAAUqzC,eAAiB,SAAST,GACnD,IAAI7yB,EAAO,CACLgzB,YAAaxmC,KAAKoiB,KAAK5C,MACvBinB,cAAezmC,KAAKoiB,KAAKmjB,QACzBmB,aAAc1mC,KAAKoiB,KAAKzC,QAM9B,OAJG0mB,IACF7yB,EAAK+yB,MAAQF,GAEH,IAAIrxB,OAAOC,KAAK8xB,SAASvzB,IAIrCwwB,EAAgBvwC,UAAUixC,aAAe,WACxC,IAAK,IAAI7yC,EAAI,EAAGA,EAAImO,KAAK6kC,QAAQ7vC,OAAQnD,IACxCmO,KAAK6kC,QAAQhzC,GAAGg1C,OAAO,MAExB7mC,KAAK6kC,QAAQ7vC,OAAS,GAIvBgvC,EAAgBvwC,UAAUwxC,UAAY,SAASX,EAAU9rB,EAAK1V,EAAOxK,EAAOkS,GAC3E,IAAIgJ,EAAO,CACV8wB,SAAUA,EACV9rB,IAAKA,GAEHlgB,IACFkb,EAAKlb,MAAQA,GAEd,IAAIqsC,EAAS,IAAI3vB,OAAOC,KAAK2vB,OAAOpxB,GAChClE,EAAOtP,KAWX,GAV0B,GAAvBA,KAAK6kC,QAAQ7vC,QAAqB,yBAANwV,GAC1Bm6B,EAAON,YAAY,SAAS,WAC/B,IAAIgC,EAAS/2B,EAAK03B,uBACf13B,EAAK61B,QAAU71B,EAAK82B,cAAcC,EAAQ7tB,GACpClJ,EAAKo1B,eACLp1B,EAAKy1B,SAAS8B,OAAO,MACrB/jC,EAAM6uB,IAAIriB,EAAKo2B,wBAAwBp2B,EAAK61B,aAGvDnlC,KAAK6kC,QAAQ75B,KAAK25B,GACT,0BAANn6B,EAA+B,CACjC,IAAI24B,EAAInjC,KAAK0lC,wBAAwB1lC,KAAK+kC,UAC1CjiC,EAAM6uB,IAAIwR,GAEX,OAAOwB,GAGRX,EAAgBvwC,UAAUuzC,qBAAuB,WAChD,OAAOhnC,KAAK+kC,SAASC,WAGtBhB,EAAgBvwC,UAAUgyC,MAAQ,WAC9BzlC,KAAKmlC,UACPnlC,KAAKmlC,QAAQ0B,OAAO,MACpB7mC,KAAKmlC,SAAU,GAEbnlC,KAAK+kC,WACP/kC,KAAK0kC,eACL1kC,KAAK+kC,SAAS8B,OAAO,QAIvB7C,EAAgBvwC,UAAU0wC,QAAU,SAAS8C,EAAcn0C,EAAOiH,GAGjE,GAFAktC,EAAa3pC,MAAMgQ,MAAQtN,KAAKsN,MAChC25B,EAAa3pC,MAAMiQ,OAASvN,KAAKuN,OACb,oBAAVyH,OAET,OADArF,MAAM,gCACC,EAER,IAAI6I,EAAM,IAAIxD,OAAOC,KAAKE,IAAI8xB,EAAc,CACxC3B,KAAMtlC,KAAKslC,KACd4B,OAAQ,CAAC1H,IAAK2H,WAAWnnC,KAAKolC,QAASX,IAAK0C,WAAWnnC,KAAKqlC,YAE7D,GAAW,yBAARtrC,EAAgC,CAC/BiG,KAAK+kC,SAAW/kC,KAAK8mC,iBACxB9mC,KAAK+kC,SAAS8B,OAAOruB,GACrB,IAAI6tB,EAAUvzC,EAAQkN,KAAK+lC,wBAAwBjzC,GAAS,GACzDA,IACCkN,KAAKmlC,QAAUnlC,KAAKomC,cAAcC,EAAQ7tB,SAG1C,GAAW,0BAARze,EAAiC,CACpCssC,EAAUvzC,EAAQkN,KAAK+lC,wBAAwBjzC,GAAS,GACzDkN,KAAK+kC,SAAW/kC,KAAK8mC,iBACxB9mC,KAAK+kC,SAAS8B,OAAOruB,GAClB1lB,GACCkN,KAAK+kC,SAASqC,QAAQf,QAGtB,GAAW,kBAARtsC,GACJjH,EAAM,CACRkN,KAAK0kC,eACI,IAEIlxB,EAAO,CACV8wB,SAAU,CAAC9E,IAHF2H,WAAWr0C,EAAMiP,UAAU,EAAGjP,EAAMwZ,QAAQ,OAGhCm4B,IAFpB0C,WAAWr0C,EAAMiP,UAAUjP,EAAMwZ,QAAQ,KAAK,EAAGxZ,EAAMkC,OAAO,KAGlEwjB,IAAKA,GAEFmsB,EAAS,IAAI3vB,OAAOC,KAAK2vB,OAAOpxB,GACpCxT,KAAK6kC,QAAQ75B,KAAK25B,GAIvB,OADA3vB,OAAOC,KAAKmvB,MAAMiD,QAAQ7uB,EAAK,UACxBA,GAGX5mB,EAAOD,QAAQqyC,G,gBC3Kf,IAAMA,EAAkBlwC,EAAQ,IACTA,EAAQ,GAE/B,SAASswB,EAAgB/rB,IAEzB+rB,EAAgB3wB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACvD,OAAOlc,KAAKqS,OAAOvP,EAAMpQ,QAG1B0xB,EAAgB3wB,UAAU0xB,YAAc,SAASjJ,GAChD,OAAOlc,KAAKqS,OAAO6J,EAAWppB,UAG/BsxB,EAAgB3wB,UAAU4e,OAAS,SAASvf,GAC3C,IAAI0lB,EAAMliB,SAASgD,cAAc,OACjCkf,EAAIjf,aAAa,QAAS,2BAIvB,OAFW,IAAIyqC,GACVG,QAAQ3rB,EAAK1lB,EAAOkN,KAAKjG,MACvBye,GAGX5mB,EAAOD,QAAQ,CAACyyB,oB,gBCtBOtwB,EAAQ,GAE/B,SAASuwB,EAAiBhsB,IAE1BgsB,EAAiB5wB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACxD,IAAIppB,EAAQgQ,EAAMpQ,MACd8P,EAAQlM,SAASgD,cAAc,OACnCkJ,EAAMjJ,aAAa,QAAS,gBAC5B,IAAI+tC,EAAQhxC,SAASgD,cAAc,QAInC,GAHAguC,EAAM/tC,aAAa,QAAS,8BAC5B+tC,EAAM7tC,UAAU3G,EAChB0P,EAAM9I,YAAY4tC,GACC,oBAAT5yB,MAAqB,CAC9B,IAAI6yB,EAAQ,IAAI7yB,MAAM4yB,EAAO,CAAEE,MAAO,SACtCD,EAAME,GAAG,eAAe,WACvB3kC,EAAM6uB,IAAI4V,EAAMG,KAAKjuC,cAGvB,OAAO+I,GAGR5Q,EAAOD,QAAQ,CAAC0yB,qB,cCrBhB,SAASC,EAAejsB,IAExBisB,EAAe7wB,UAAUyxB,YAAc,SAASpiB,EAAOoZ,GACtD,IAAIppB,EAAQgQ,EAAMpQ,MACd0U,EAAMtE,EAAMmC,QAEZ0iC,GADQ7kC,EAAM6uB,IACRzV,EAAW0rB,aACjBC,EAAO,IAAIC,wBAAwBH,EAAKvgC,EAAKtU,GAMjD,OALA+0C,EAAKzrB,OAAS,SAAS1nB,GACtBoO,EAAM6uB,IAAIj9B,IAEXmzC,EAAK/rC,KAAO,QACA+rC,EAAKt5B,YAKlB3c,EAAOD,QAAQ,CAAC2yB,mB,qPCjBhB,IAAMltB,EAAiBtD,EAAQ,GAG/B,SAASi0C,IACR/nC,KAAKgiC,OAAS1rC,SAASgD,cAAc,OAGtCyuC,EAAYt0C,UAAU4E,QAAU,SAASA,GACxC,IAAI,IAAI+J,KAAK/J,EACZ2H,KAAKoC,GAAK/J,EAAQ+J,GAEnB,OAAOpC,MAIR+nC,EAAYt0C,UAAU4e,OAAS,SAAS21B,GACpCA,IAAWhoC,KAAKgoC,UAAYA,GAC/B5wC,EAAejD,YAAYyH,eAAeoE,KAAKgiC,QAC/C,IAAIiG,EAAOjoC,KAAKkoC,iBACZC,EAAMnoC,KAAKooC,cAGf,OAFGH,GAAMjoC,KAAKgiC,OAAOtoC,YAAYuuC,GACjCjoC,KAAKgiC,OAAOtoC,YAAYyuC,GACjBnoC,KAAKgiC,QAGb+F,EAAYt0C,UAAUy0C,eAAiB,SAAS1xC,GAC/C,IAAI6xC,EAAQ/xC,SAASgD,cAAc,QACnC,GAAG0G,KAAKgoC,UAAU52B,OAAO+L,QAAQ,CAChC,IAAImrB,EAAStoC,KAAKuoC,UAAU/xC,GACzB8xC,GAAQD,EAAM3uC,YAAY4uC,GAE9B,OAAOD,GAGRN,EAAYt0C,UAAU20C,YAAc,WACnC,IAAMI,EAAUxoC,KAAKgoC,UAAU/T,qBAC3BkU,EAAM7xC,SAASgD,cAAc,SACjC6uC,EAAI5uC,aAAa,QAAS,8CAC1B,IAAIkvC,EAAQzoC,KAAK0oC,eAAeF,GAChCL,EAAIzuC,YAAY+uC,GAChB,IAAIE,EAAQ3oC,KAAK4oC,aAAaJ,GAE9B,OADAL,EAAIzuC,YAAYivC,GACTR,GAGRJ,EAAYt0C,UAAUi1C,eAAiB,SAAS9qB,GAG/C,IAFA,IAAI6qB,EAAQnyC,SAASgD,cAAc,SAC/BuvC,EAAMvyC,SAASgD,cAAc,MACzBzH,EAAI,EAAGA,EAAE+rB,EAAK5oB,OAAQnD,IAAI,CACjC,IAAIi3C,EAAK9oC,KAAK+oC,gBAAgBnrB,EAAK/rB,IACnCg3C,EAAInvC,YAAYovC,GAGjB,OADAL,EAAM/uC,YAAYmvC,GACXJ,GAGRV,EAAYt0C,UAAUs1C,gBAAkB,SAASvU,GAChD,IAAIsU,EAAKxyC,SAASgD,cAAc,MAChCwvC,EAAGvvC,aAAa,QAAS,kCACzB,IAAIyd,EAAOhX,KAAKgoC,UAAUzT,wBAAwBC,GAElD,OADAsU,EAAGpvC,YAAYsd,GACR8xB,GAGRf,EAAYt0C,UAAUm1C,aAAe,SAAShrB,GAE7C,IADA,IAAI+qB,EAAQryC,SAASgD,cAAc,SAC7B0gB,IAAMha,KAAKgoC,UAAUhW,QAAO,CACjC,IAAIgX,EAAKhpC,KAAKipC,WAAWjvB,IAAK4D,GAC3BorB,GAAIL,EAAMjvC,YAAYsvC,GAE1B,OAAOL,GAGRZ,EAAYt0C,UAAUw1C,WAAa,SAASjvB,EAAK4D,GAEhD,IADA,IAAIorB,EAAK1yC,SAASgD,cAAc,MACxBzH,EAAI,EAAGA,EAAE+rB,EAAK5oB,OAAQnD,IAAI,CACjC,IAAIq3C,EAAKlpC,KAAKmpC,QAAQvrB,EAAK/rB,GAAImoB,GAC/BgvB,EAAGtvC,YAAYwvC,GAGhB,GAAGlpC,KAAKgoC,UAAU1S,YAAYtb,GAAK,CAClC,IAAIovB,EAAKppC,KAAKgoC,UAAU/S,YAAYjb,GACpCgvB,EAAGxoC,iBAAiB,SAAS,WAC5B4oC,EAAGpvB,MAEJgvB,EAAGxoC,iBAAiB,aAAa,WAChCR,KAAK1C,MAAMiS,OAAS,aAGtB,GAAGvP,KAAKgoC,UAAUxS,YAAYxb,GAAK,CAC9BovB,EAAKppC,KAAKgoC,UAAU7S,YAAYnb,GACpCgvB,EAAGxoC,iBAAiB,aAAa,WAChC4oC,EAAGpvB,MAGL,OAAOgvB,GAGRjB,EAAYt0C,UAAU01C,QAAU,SAAS/1C,EAAK4mB,GAC7C,IAAIkvB,EAAK5yC,SAASgD,cAAc,MAChC,GAAG0G,KAAKgoC,UAAU3S,aAAarb,EAAK5mB,GAAK,CACxC,IAAIg2C,EAAKppC,KAAKgoC,UAAU9S,aAAalb,EAAK5mB,GAC1C81C,EAAG1oC,iBAAiB,SAAS,WAC5B4oC,EAAGpvB,MAEJkvB,EAAG1oC,iBAAiB,aAAa,WAChCR,KAAK1C,MAAMiS,OAAS,aAGtB,GAAGvP,KAAKgoC,UAAUzS,aAAavb,EAAK5mB,GAAK,CACpCg2C,EAAKppC,KAAKgoC,UAAU5S,aAAapb,EAAK5mB,GAC1C41C,GAAGxoC,iBAAiB,aAAa,WAChC4oC,EAAGpvB,MAGL,IAAI9nB,EAAI8N,KAAKqpC,YAAYj2C,EAAK4mB,GAE9B,OADG9nB,GAAGg3C,EAAGxvC,YAAYxH,GACdg3C,GAGRnB,EAAYt0C,UAAU41C,YAAc,SAASj2C,EAAK4mB,GACjD,IAAIpZ,EAAWZ,KAAKgoC,UAAU7hC,YAAY/S,EAAK4mB,GAC/C,GAAGpZ,GAA+B,mBAAZA,EACrB,OAAOA,EAASoZ,EAAI5mB,GAAMA,EAAK4mB,GAE3B,GAAGpZ,GAA+B,UAAnB,EAAOA,GAC1B,OAAOZ,KAAKgoC,UAAU7iB,YAAYvkB,EAAUoZ,EAAI5mB,GAAMA,EAAK4mB,GAE5D,IAAItlB,EAAMslB,EAAI5mB,GAEd,OADGsB,GAAOA,EAAI,YAAWA,EAAMA,EAAI,WAC5B4B,SAASuD,eAAenF,IAGhCqzC,EAAYt0C,UAAU80C,UAAY,WACjC,GAAGvoC,KAAKgoC,UAAUxxC,OAAOiI,MAAM6qC,UAAU,CACxC,IAAIC,EAAOjzC,SAASgD,cAAc,OAGlC,GAFAiwC,EAAKhwC,aAAa,QAAS,mBACxByG,KAAKgoC,UAAU52B,OAAO8L,YAAYqsB,EAAK7vC,YAAYsG,KAAK0zB,eACxD1zB,KAAKgoC,UAAUzU,gBAAgB,CACjC,IAAIiW,EAAKxpC,KAAKgoC,UAAUxxC,OAAOiI,MAAMg1B,UAClC+V,EAAK,GACPD,EAAK7vC,YAAYsG,KAAKypC,YAEpBD,EAAK,GACPD,EAAK7vC,YAAYsG,KAAK0pC,QAAQF,IAE5BxpC,KAAKgoC,UAAU52B,OAAOgM,QAAQmsB,EAAK7vC,YAAYsG,KAAK2pC,cAAcH,IACrED,EAAK7vC,YAAYsG,KAAK4pC,QAAQ5pC,KAAKgoC,UAAUxxC,SAE9C,OAAO+yC,IAITxB,EAAYt0C,UAAUigC,YAAc,WACnC,IAAImW,EAAQvzC,SAASgD,cAAc,QAKnC,GAJAuwC,EAAMtwC,aAAa,QAAS,uBAC5BuwC,OAASxzC,SAASgD,cAAc,QAChCwwC,OAAOpwC,YAAYpD,SAASuD,eAAe,cAC3CgwC,EAAMnwC,YAAYowC,QACf9pC,KAAKgoC,UAAU52B,OAAOqM,gBAAgB,CACxC,IAAIkqB,EAAMrxC,SAASgD,cAAc,SACjCquC,EAAIpuC,aAAa,OAAQ,GACzB,IAAI+V,EAAOtP,KACX2nC,EAAI70C,MAAQkN,KAAKgoC,UAAUtU,cAC3BiU,EAAInnC,iBAAiB,QAAQ,WAC5B,IAAIupC,IAAQ/pC,KAAKlN,OAAQsY,SAASpL,KAAKlN,OACvCwc,EAAK04B,UAAUpU,YAAYmW,MAE5BF,EAAMnwC,YAAYiuC,QAGlBkC,EAAMnwC,YAAYpD,SAASuD,eAAemG,KAAKgoC,UAAUtU,gBAE1D,OAAOmW,GAGR9B,EAAYt0C,UAAUk2C,cAAgB,WACrC,IAAIhC,EAAMrxC,SAASgD,cAAc,SACjCquC,EAAIpuC,aAAa,OAAQ,GACzBouC,EAAI70C,MAAQkN,KAAKgoC,UAAUxxC,OAAOiI,MAAMg1B,UACxC,IAAInkB,EAAOtP,KAKX,OAJA2nC,EAAInnC,iBAAiB,QAAQ,WAC5B,IAAIupC,IAAQ/pC,KAAKlN,OAAQsY,SAASpL,KAAKlN,OACvCwc,EAAK04B,UAAUrU,QAAQoW,MAEjBpC,GAGRI,EAAYt0C,UAAUm2C,QAAU,SAASpzC,GACxC,IAAImxC,EAAMrxC,SAASgD,cAAc,UAC7BgW,EAAOtP,KAUX,OATA2nC,EAAIjuC,YAAYpD,SAASuD,eAAe,SACpCmG,KAAKgoC,UAAU3U,eAAe78B,GAIjCmxC,EAAInnC,iBAAiB,SAAS,WAC7B8O,EAAK04B,UAAUlU,cAJhB6T,EAAIpuC,aAAa,WAAY,YAOvBouC,GAGRI,EAAYt0C,UAAUi2C,QAAU,SAASlzC,GACxC,IAAImxC,EAAMrxC,SAASgD,cAAc,UACjCquC,EAAIjuC,YAAYpD,SAASuD,eAAe,aACxC,IAAIyV,EAAOtP,KASX,OARIA,KAAKgoC,UAAUxU,eAAeh9B,GAIjCmxC,EAAInnC,iBAAiB,SAAS,WAC7B8O,EAAK04B,UAAUhU,kBAJhB2T,EAAIpuC,aAAa,WAAY,YAOvBouC,GAGRI,EAAYt0C,UAAUg2C,SAAW,SAASjzC,GACzC,IAAImxC,EAAMrxC,SAASgD,cAAc,UACjCquC,EAAIjuC,YAAYpD,SAASuD,eAAe,UACxC,IAAIyV,EAAOtP,KASX,OARIA,KAAKgoC,UAAUxU,eAAeh9B,IAAWwJ,KAAKgoC,UAAUvU,WAAa,EACxEkU,EAAIpuC,aAAa,WAAY,YAG7BouC,EAAInnC,iBAAiB,SAAS,WAC7B8O,EAAK04B,UAAUjU,eAGV4T,GAGR/1C,EAAOD,QAAUo2C,G,gBCzOjB,IAAM3wC,EAAiBtD,EAAQ,GACzBk2C,EAAqBl2C,EAAQ,IAGnC,SAASm2C,IACRjqC,KAAKgiC,OAAS1rC,SAASgD,cAAc,OAGtC2wC,EAAYx2C,UAAUo+B,UAAY,SAASr7B,GAC1CwJ,KAAKxJ,OAASA,GAGfyzC,EAAYx2C,UAAU4e,OAAS,SAAS63B,GACvClqC,KAAKwa,MAAQ0vB,EACb9yC,EAAejD,YAAYyH,eAAeoE,KAAKgiC,QAE/C,IAAImG,EAAMnoC,KAAKmqC,YAAYnqC,KAAKxJ,QAGhC,OADAwJ,KAAKgiC,OAAOtoC,YAAYyuC,GACjBnoC,KAAKgiC,QAIbiI,EAAYx2C,UAAU02C,YAAc,WACnCnqC,KAAKoqC,KAAO,IAAIJ,EAAmBhqC,KAAKwa,MAAMpJ,QAC9C,IAAIi5B,EAAOrqC,KAAKoqC,KAAK77B,WACjB/U,EAAIwG,KAAKwa,MAAMpJ,OAAO7D,SAAWvN,KAAKwa,MAAMpJ,OAAO7D,SAAW,IAC9D6S,EAAIpgB,KAAKwa,MAAMpJ,OAAO9D,QAAUtN,KAAKwa,MAAMpJ,OAAO9D,QAAU,IAIhE,OAHA+8B,EAAK9wC,aAAa,QAAS,kCAAoC6mB,EAAI,eAAiB5mB,EAAI,OAASwG,KAAKwa,MAAMpJ,OAAO9D,QAAU,MAC7HtN,KAAKoqC,KAAKE,QAAQtqC,KAAKwa,OACvBxa,KAAKoqC,KAAKG,QAAQF,GACXA,GAGRz4C,EAAOD,QAAUs4C,G,gBClCjB,IAAM7yC,EAAiBtD,EAAQ,GAG/B,SAAS02C,IACRxqC,KAAKgiC,OAAS1rC,SAASgD,cAAc,OAGtCkxC,EAAa/2C,UAAU4E,QAAU,SAASA,GACzC,IAAI,IAAI+J,KAAK/J,EACZ2H,KAAKoC,GAAK/J,EAAQ+J,GAEnB,OAAOpC,MAIRwqC,EAAa/2C,UAAU4e,OAAS,SAASsI,GAOxC,OANGA,IAAQ3a,KAAK2a,OAASA,GACzBvjB,EAAejD,YAAYyH,eAAeoE,KAAKgiC,QAKxChiC,KAAKgiC,QAGbpwC,EAAOD,QAAU64C,G,cCzBjB,SAASC,KAETA,EAAch3C,UAAU4E,QAAU,SAASA,GAE1C,OADA2H,KAAK3H,QAAUA,EACR2H,MAGRyqC,EAAch3C,UAAU4e,OAAS,SAASqI,GAEzC,GADGA,IAAS1a,KAAK0a,QAAUA,GACY,GAApC1a,KAAK0a,QAAQtJ,OAAO2K,cAAyB/b,KAAK0a,QAAQmY,QAAU,EAAG,OAAO,EACjF,IAAI6X,EAAQp0C,SAASgD,cAAc,QACnCoxC,EAAMnxC,aAAa,QAAS,gBAC5B,IAAIoxC,EAAQr0C,SAASgD,cAAc,UACnCqxC,EAAMpxC,aAAa,QAAS,iBAC5B,IAAI+V,EAAOtP,KACX2qC,EAAMnqC,iBAAiB,UAAU,WAChC8O,EAAKoL,QAAQiX,IAAI3xB,KAAKlN,UAEvB,IAAIqe,EAAO,GAIX,IAHGnR,KAAK0a,QAAQtJ,OAAO2K,cACtB5K,EAAKnG,KAAKhL,KAAK4qC,kBAEVvY,OAASryB,KAAK0a,QAAQsX,QAAO,CAClC,IAAIzyB,EAAMS,KAAK6qC,uBAAuBxY,QACtClhB,EAAKnG,KAAKzL,GAEX,IAAI,IAAI1N,EAAI,EAAGA,EAAEsf,EAAKnc,OAAQnD,IAC7B84C,EAAMjxC,YAAYyX,EAAKtf,IAGxB,OADA64C,EAAMhxC,YAAYixC,GACXD,GAGRD,EAAch3C,UAAUm3C,eAAiB,WACxC,IAAIvY,EAAS,CAAErlB,GAAI,GAAIhT,MAAOgG,KAAK0a,QAAQtJ,OAAO2K,cAClD,OAAO/b,KAAK6qC,uBAAuBxY,IAGpCoY,EAAch3C,UAAUo3C,uBAAyB,SAASxY,GACzD,IAAI9yB,EAAMjJ,SAASgD,cAAc,UAajC,OAZAiG,EAAIhG,aAAa,QAAS,gCAC1BgG,EAAIzM,MAAQu/B,EAAOrlB,GAChBqlB,EAAO5xB,WAAUlB,EAAIkB,UAAW,GACT,iBAAhB4xB,EAAOr4B,MAChBuF,EAAI7F,YAAYpD,SAASuD,eAAew4B,EAAOr4B,QAExCq4B,EAAOr4B,OACduF,EAAI7F,YAAY24B,EAAOr4B,OAErBq4B,EAAO/5B,OACTiH,EAAIhG,aAAa,QAAS84B,EAAO/5B,OAE3BiH,GAGR3N,EAAOD,QAAU84C,G,6CCvDjB,IAAMrzC,eAAiBtD,oBAAQ,GACzBsZ,oBAAsBtZ,oBAAQ,GAC9BqZ,MAAQrZ,oBAAQ,GAChBqM,gBAAkBrM,oBAAQ,GAC1Bkd,cAAgBld,oBAAQ,GACxBg3C,UAAYh3C,oBAAQ,IACpBi3C,kBAAoBj3C,oBAAQ,IAGlC,SAASk3C,aAAa/5B,GACrBjR,KAAKiR,OAASA,EACdjR,KAAKo5B,UAAY9iC,SAASgD,cAAc,QACrC0G,KAAKo5B,UAAU7/B,aAAa,QAAS,0BAGzCyxC,aAAav3C,UAAU8d,aAAe,SAASma,EAAOta,GAOrD,OANApR,KAAK0rB,MAAQA,EACb1rB,KAAKirC,OAAQ,EACbjrC,KAAKlE,KAAOsV,EACZpR,KAAK8C,MAAQ,IAAIkO,cAAchR,KAAKiR,QAAQ5Y,QAAQ2H,KAAKlE,MACzDkE,KAAK8C,MAAMiQ,MAAQ/S,KACnBA,KAAK8C,MAAMuO,aAAay5B,UAAUvmB,yBAC3BvkB,KAAK8C,MAAMyO,aAAama,IAGhCsf,aAAav3C,UAAUy3C,UAAY,SAAS9jC,EAAKgK,GAAO,WAOvD,OANApR,KAAKirC,MAAQ7jC,EACbpH,KAAK0rB,OAAQ,EACb1rB,KAAKlE,KAAOsV,EACZpR,KAAK8C,MAAQ,IAAIkO,cAAchR,KAAKiR,QAAQ5Y,QAAQ2H,KAAKlE,MACzDkE,KAAK8C,MAAMiQ,MAAQ/S,KACnBA,KAAK8C,MAAMuO,aAAay5B,UAAUvmB,yBAC3BvkB,KAAK8C,MAAM4O,mBAAmBtK,GAAK/L,MAAK,kBAAM,EAAKyH,MAAMxM,SAAS8b,eAAe,UAKzF44B,aAAav3C,UAAU03C,eAAiB,SAASC,GAKhD,OAJAprC,KAAKqrC,YAAcD,EAChBprC,KAAKsrC,WACPtrC,KAAKsrC,UAAU5xC,YAAYsG,KAAKqrC,aAE1BrrC,MAGRgrC,aAAav3C,UAAU4E,QAAU,SAAS8Y,GAOtC,OANHnR,KAAK25B,aAAaxoB,QAAiC,IAAlBA,EAAKwoB,YAA2BxoB,EAAKwoB,UACtE35B,KAAKi6B,cAAc9oB,QAAkC,IAAnBA,EAAK8oB,aAA4B9oB,EAAK8oB,WACxEj6B,KAAKk6B,cAAc/oB,QAAkC,IAAnBA,EAAK+oB,aAA4B/oB,EAAK+oB,WACxEl6B,KAAK+5B,SAAS5oB,QAA6B,IAAdA,EAAK4oB,QAAuB5oB,EAAK4oB,MAC9D/5B,KAAKg6B,kBAAoB,CAAEC,YAAY,EAAOC,YAAY,GAC1Dl6B,KAAKurC,kBAAkBp6B,QAAoC,IAArBA,EAAKI,eAA8BJ,EAAKI,aACpEvR,MAGXgrC,aAAav3C,UAAU+3C,aAAe,WACrC,IAAIC,EAAOn1C,SAASgD,cAAc,OAQlC,OAPAmyC,EAAKlyC,aAAa,QAAS,2BACxByG,KAAKurC,gBACPE,EAAK/xC,YAAYsG,KAAKurC,gBAEpBvrC,KAAKqrC,aACPI,EAAK/xC,YAAYsG,KAAKqrC,aAEhBI,GAGRT,aAAav3C,UAAU8a,SAAW,WAAU,WACxCvO,KAAK+5B,OACP/5B,KAAKo5B,UAAU1/B,YAAYyT,MAAMhU,aAAa6G,KAAK+5B,QAEpD,IAAIsC,EAAa/lC,SAASgD,cAAc,QAGxC,GAFA+iC,EAAW9iC,aAAa,QAAS,qBACjCyG,KAAKo5B,UAAU1/B,YAAY2iC,GACxBr8B,KAAK25B,YAAc35B,KAAKurC,gBAAkBvrC,KAAKqrC,aAAa,KAQrDjP,EAAT,WACCsP,EAAMpzC,MAAM,sBACZgkC,EAAG/iC,aAAa,QAAS,0BACtB8iC,EAAWxsB,YAAaP,EAAK8pB,UAAU5jB,aAAagnB,EAAOH,EAAWxsB,aACpEP,EAAK8pB,UAAU1/B,YAAY8iC,IAExBC,EAAT,WACCiP,EAAMpzC,MAAM,sBACHgkC,EAAG/iC,aAAa,QAAS,oBAClC+V,EAAK8pB,UAAU3wB,YAAY+zB,IAhBxBA,EAAQx8B,KAAKwrC,eACbE,EAAQp1C,SAASgD,cAAc,QACnCoyC,EAAMnyC,aAAa,QAAS,wBAC5B,IAAI+iC,EAAKhmC,SAASgD,cAAc,KAChCoyC,EAAMhyC,YAAY4iC,GAClBD,EAAW3iC,YAAYgyC,GACvB,IAAIp8B,EAAOtP,KAYX0rC,EAAMlrC,iBAAiB,SAAS,WAC5B,EAAKo8B,aAAcH,IACjBL,IACL,EAAKQ,cAAgB,EAAKA,gBAE3BR,IACqB,QAAlBp8B,KAAK25B,WAAqB8C,IAC7Bz8B,KAAKsrC,UAAY9O,EAElB,GAAGx8B,KAAKi6B,WAAW,KAcT0R,EAAT,WACCnJ,EAAMlqC,MAAM,mCACZszC,EAAGryC,aAAa,QAAS,0BACtB8iC,EAAWxsB,YAAaP,EAAK8pB,UAAU5jB,aAAaq2B,EAAMxP,EAAWxsB,aACnEP,EAAK8pB,UAAU1/B,YAAYmyC,IAE5Bv8B,EAAK9M,MAAMkL,QAAQ5a,OAAWwc,EAAK9M,MAAMkL,QAAQjU,YACpD6V,EAAK9M,MAAMuN,kBAEJ+7B,EAAT,WACCtJ,EAAMlqC,MAAM,8BACHszC,EAAGryC,aAAa,QAAS,kBAClC+V,EAAK8pB,UAAU3wB,YAAYojC,IAzBtB7rC,KAAK+rC,cAAoC,QAAnB/rC,KAAKi6B,WACjC,IAAIjnC,EAAQgN,KAAKk6B,WAAa,OAAS,OACvCl6B,KAAKwC,MAAQxC,KAAK28B,YAAY3pC,GAC9B,IAAI64C,EAAO7rC,KAAKwC,MAAM+L,WACZi0B,EAAQlsC,SAASgD,cAAc,QACnCkpC,EAAMhiC,iBAAiB,aAAa,WAChCR,KAAK1C,MAAMiS,OAAS,aAE9BizB,EAAMjpC,aAAa,QAAS,sBAC5B,IAAIqyC,EAAKt1C,SAASgD,cAAc,KAChCkpC,EAAM9oC,YAAYkyC,GAClBvP,EAAW3iC,YAAY8oC,GACnBlzB,EAAOtP,KAeXwiC,EAAMhiC,iBAAiB,SAAS,WAC5B,EAAKurC,cAAeD,IAClBH,IACL,EAAKI,eAAiB,EAAKA,iBAEtBJ,IACgB,QAAnB3rC,KAAKi6B,YAAsB6R,IAQ/B,OANA9rC,KAAK68B,UAAYvmC,SAASgD,cAAc,QACxC0G,KAAK68B,UAAUtjC,aAAa,QAAS,6BAGrCyG,KAAKo5B,UAAU1/B,YAAYsG,KAAK68B,WAChC78B,KAAKgsC,eACEhsC,KAAKo5B,WAGb4R,aAAav3C,UAAUu4C,aAAe,WAErC,GADA50C,eAAejD,YAAYyH,eAAeoE,KAAK68B,WAC5C78B,KAAK8C,OAAS9C,KAAK8C,MAAMuP,OAAO,CAClC,IAAI45B,EAAMjsC,KAAK8C,MAAMuP,SAClB45B,GACFjsC,KAAK68B,UAAUnjC,YAAYuyC,KAK9BjB,aAAav3C,UAAUkf,aAAe,SAASG,SAAUhQ,MAAO3K,KAAM+zC,WACrE,IAAIC,QAAU,OAASr5B,SAAW,IAC/B3a,OAAMg0C,SAAWvxC,KAAKC,UAAU1C,OACnCg0C,SAAW,KACX,IACC,IAAIpxB,GAAKhb,KAAKosC,SAEd,OADApxB,GAAG/U,SAAWkmC,UACPnxB,GAER,MAAM9a,GAEL,OADAR,QAAQC,IAAI,kBAAoBoT,SAAW7S,EAAEzL,aACtC,IAKTw2C,aAAav3C,UAAUkpC,YAAc,SAAS3pC,GAC1C,IAAIwP,EAAQ,IAAI4K,oBAAoB,OAAQpa,GACzCgN,KAAKlE,MACP0G,EAAMmL,SAAS3N,KAAKlE,MAExB,IAAIwT,EAAOtP,KAIX,OAHAwC,EAAMyM,OAAS,SAASnP,GACvBwP,EAAK88B,WAAWtsC,IAEV0C,GAGRwoC,aAAav3C,UAAU24C,WAAa,SAASC,GAC5CrsC,KAAKlE,KAAOuwC,EACZrsC,KAAK8C,MAAMzK,QAAQ2H,KAAKlE,MACrBkE,KAAKwC,OAAOxC,KAAKwC,MAAMmL,SAAS3N,KAAKlE,MACxCkE,KAAK8C,MAAMwP,qBAAqBtS,KAAK8C,MAAMxM,SAAU0J,KAAK8C,MAAMsO,QAChEpR,KAAK8C,MAAMlC,SAAWZ,KAAK8C,MAAMxM,SACjC0J,KAAKgsC,gBAGNhB,aAAav3C,UAAU+pC,aAAe,SAAShnC,GAC9CwJ,KAAKxJ,OAASA,EACdwJ,KAAKu9B,YAAY/mC,EAAOiI,OACxBuB,KAAKy9B,gBAGNuN,aAAav3C,UAAUkqC,MAAQ,WAC9B,YAA4B,IAAb39B,KAAKlE,MAGrBkvC,aAAav3C,UAAUmqC,cAAgB,aACvCoN,aAAav3C,UAAU2qC,UAAY,aAEnC4M,aAAav3C,UAAU6pC,YAAc,SAASx9B,GAQ7C,OAPAE,KAAK49B,gBACL0O,IAAIv5B,MAAQ/S,KACZssC,IAAIj7B,aAAay5B,UAAUvmB,yBAC3B+nB,IAAI/6B,aAAavE,IAAI3R,MAAK,WACzB,IAAIc,EAAMmwC,IAAIj6B,SACXlW,GAAK6lC,OAAOtoC,YAAYyC,MAErB6lC,QASRpwC,OAAOD,QAAUq5C,c,qPChOjB,IAAM7qC,EAAkBrM,EAAQ,GAEhC,SAASi3C,KAGTA,EAAkBt3C,UAAU84C,SAAW,SAASzpC,GAC/C,OAAGA,EAAMitB,aAAqB,WAC3BjtB,EAAMnO,WAAmB,SACzBmO,EAAMktB,SAAiB,YAA1B,GAGD+a,EAAkBt3C,UAAU+4C,kBAAoB,SAAS1pC,EAAO9P,GAC/D,IAAI2iC,EAAK7yB,EAAMI,gBAAgBgZ,WAC/B,IAAIyZ,EAAG,CACN,GAAG7yB,EAAM2pC,WAAY,IAAI15C,EAAI,aACxB,GAAG+P,EAAM4pC,aAAkB35C,EAAI,gBAC/BA,EAAI+P,EAAMoC,UACf,GAAGlS,GAAgB,QAARA,EACV,IAAIL,EAAIqN,KAAKgG,SAASC,UAAU2wB,UAAU7jC,QAGtCJ,EAAIqN,KAAKgG,SAASC,UAAUE,YAAYpT,GAE7C4iC,EAAKhjC,EAAEP,KAER,GAAG0Q,EAAMI,gBAAgB/K,KACxB,IAAIA,EAAO2K,EAAMI,gBAAgB/K,UAGjBA,KAAbxF,IAAKA,EAAEwF,OAAaxF,EAAEwF,KAG1B,OAAO6H,KAAKgG,SAASC,UAAU6e,eAAe6Q,EAAIx9B,IAGnD4yC,EAAkBt3C,UAAU4e,OAAS,SAASvP,GAC7C,IAAID,EAAQ7C,KAAKusC,SAASzpC,GAC1B,GAAGA,EAAMI,gBAAgBK,gBACxB,IAAIP,EAAYhD,KAAK2sC,eAAe7pC,EAAMI,gBAAgBK,gBAAiBT,EAAMI,gBAAgB+Y,kBAAmBpZ,EAAOC,EAAOA,EAAMI,gBAAgBlQ,WAEhJgQ,GAAY,EACrB,GAAGF,EAAMI,gBAAgBD,SACxB,IAAIA,EAAWjD,KAAK2sC,eAAe7pC,EAAMI,gBAAgBD,SAAUH,EAAMI,gBAAgB+Y,kBAAmBpZ,EAAOC,EAAOA,EAAMI,gBAAgBlQ,WAExIiQ,GAAW,EACpB,IAAI2pC,EAAmB,UAAT/pC,GAA8B,YAATA,EAAuB,OAAS,OAC/DgpC,EAAO1rC,EAAgB0sC,YAAYhqC,EAAOC,EAAO8pC,EAAQ5pC,EAAWC,GACxE,QAAI4oC,IACD7rC,KAAKoD,UACPpD,KAAKoD,SAAS0pC,YAAYjB,GAE3B7rC,KAAKoD,SAAWyoC,EACT7rC,KAAKoD,WAGb2nC,EAAkBt3C,UAAUk5C,eAAiB,SAASI,EAAO/xB,EAAWnY,EAAOC,EAAO9P,GACrF,IAAIiQ,EAAW3M,SAASgD,cAAc,QACtC2J,EAAS1J,aAAa,QA0CvB,SAASyzC,EAAcD,GAEtB,IADA,IAAIn5C,EAAI,GACA/B,EAAI,EAAGA,EAAEk7C,EAAM/3C,OAAQnD,IACR,UAAnB,EAAOk7C,EAAMl7C,IACf+B,GAAKo5C,EAAcD,EAAMl7C,IAAM,IAG/B+B,GAAKm5C,EAAMl7C,GAAK,IAGlB,OAAO+B,EAAEmO,UAAU,EAAGnO,EAAEoB,OAAO,GApDAg4C,CAAcD,IAC7C,IAAI,IAAIl7C,EAAI,EAAGA,EAAEk7C,EAAM/3C,OAAQnD,IAAI,CAClC,GAAsB,UAAnB,EAAOk7C,EAAMl7C,IACfoR,EAASvJ,YAAYsG,KAAK2sC,eAAeI,EAAMl7C,GAAImpB,EAAWnY,EAAOC,SAGrE,GAAGkY,GAAaA,EAAU+xB,EAAMl7C,KAC3BsK,EAAM6e,EAAU+xB,EAAMl7C,IAAIiR,EAAOiqC,EAAMl7C,MACnCoR,EAASvJ,YAAYyC,QAG7B,GAAe,SAAZ4wC,EAAMl7C,IAA0B,QAATgR,EAAgB,CACzC,IAAI8yB,EAAK31B,KAAKwsC,kBAAkB1pC,EAAO9P,GACvC,GAAG2iC,EACF,IAAIx5B,EAAMw5B,EAAGzQ,YAAYpiB,EAAO9C,WAG5B7D,EAAM7F,SAASuD,eAAeiJ,EAAMpQ,OAEtCyJ,GAAK8G,EAASvJ,YAAYyC,QAEzB,GAAe,SAAZ4wC,EAAMl7C,GAAc,CAC3B,GAAY,UAATgR,EACF,IAAI2J,EAAO1J,EAAMmqC,wBAGbzgC,EAAO1J,EAAMoqC,eAEf,IAAI,IAAI5iB,EAAI,EAAGA,EAAE9d,EAAKxX,OAAQs1B,IAChCrnB,EAASvJ,YAAY8S,EAAK8d,QAGvB,EACAnuB,EAAMgE,EAAgBgtC,cAAcJ,EAAMl7C,GAAIgR,EAAOC,KACjDG,EAASvJ,YAAYyC,IAKjC,OAAO8G,GAkBRrR,EAAOD,QAAUo5C,G,gBC/GjB,IAAM5qC,EAAkBrM,EAAQ,GAC1BsD,EAAiBtD,EAAQ,GAE/B,SAASs5C,EAAiBxsC,GACzBZ,KAAKkvB,WAAa,GA8HnB,SAASme,KAxHTD,EAAiB35C,UAAU4e,OAAS,SAASzR,GAkB5C,OAjBAZ,KAAKY,SAAWA,EAChBZ,KAAKstC,aAAe,IAAID,EACrBrtC,KAAKutC,YASLvtC,KAAKstC,eACPttC,KAAKsD,OAAStD,KAAKstC,aAAa/+B,SAASvO,KAAKY,UAC3CZ,KAAKsD,QAAQtD,KAAKutC,YAAY7zC,YAAYsG,KAAKsD,SAEnDtD,KAAK8M,KAAO9M,KAAKwtC,mBACdxtC,KAAK8M,MAAM9M,KAAKutC,YAAY7zC,YAAYsG,KAAK8M,MACzC9M,KAAKutC,aAGbH,EAAiB35C,UAAUg6C,aAAe,WACzC,IAAI1qC,EAAc/C,KAAKY,SAAS8sC,wBAC5BhqC,EAAO,yBAA2BX,EACtC,GAAkB,QAAfA,EACF,IAAIY,EAAKrN,SAASgD,cAAc,YAG5BqK,EAAKrN,SAASgD,cAAc,QAEjC,IAAIsK,EAAM,yBAA2BF,GAAQ1D,KAAKY,SAASiD,OAAS,GAAK,wBAA0B,0BAA4B7D,KAAKY,SAAS5N,KAI7I,OAHA2Q,EAAGpK,aAAa,QAASqK,GACzBD,EAAGpK,aAAa,aAAcyG,KAAKY,SAASkD,gBAC5CH,EAAGpK,aAAa,UAAWyG,KAAKY,SAASmD,WAClCJ,GAGRypC,EAAiB35C,UAAU+5C,iBAAmB,WAC7C,IAGKnpC,EAAU/N,SAASgD,cAAc,OAMnC,IAAI,IAAIqI,KADR0C,EAAQ9K,aAAa,QAAS,8DACdyG,KAAKkvB,WACpBlvB,KAAKkvB,WAAWvtB,IAAO0C,EAAQ3K,YAAYsG,KAAKkvB,WAAWvtB,IAE/D,OAAO0C,GAGR+oC,EAAiB35C,UAAU05C,cAAgB,SAAS5oC,GACnD,GAAGvE,KAAK2tC,iBAAiBppC,GACxB,OAAOvE,KAAK4tC,cAAcrpC,GAASvE,KAAKY,SAAUZ,OAIpDotC,EAAiB35C,UAAUyjB,OAAS,WACnC9f,EAAejD,YAAYyH,eAAeoE,KAAKutC,aAC/CvtC,KAAKkvB,WAAa,GAClBlvB,KAAKY,SAASyR,OAAOrS,OAGtBotC,EAAiB35C,UAAUo6C,aAAe,WACzC,GAAG7tC,KAAKstC,cAAgBttC,KAAKsD,OAAQ,CACpC,IAAIwqC,EAAU9tC,KAAKstC,aAAa/+B,SAASvO,KAAKY,UAC9CZ,KAAKsD,OAAOwpC,YAAYgB,GACxB9tC,KAAKsD,OAASwqC,IAIhBV,EAAiB35C,UAAUs6C,WAAa,WACvC,GAAG/tC,KAAK8M,KAAK,CACZ,IAAIkhC,EAAQhuC,KAAKwtC,mBACjBxtC,KAAK8M,KAAKggC,YAAYkB,GACtBhuC,KAAK8M,KAAOkhC,IAOdZ,EAAiB35C,UAAUw6C,oBAAsB,SAAStsC,EAAMusC,GAC/DluC,KAAKkvB,WAAWvtB,GAAQusC,GAGzBd,EAAiB35C,UAAUgyC,MAAQ,WAClCruC,EAAejD,YAAYyH,eAAeoE,KAAKutC,aAC/CvtC,KAAKkvB,WAAa,IAMnBke,EAAiB35C,UAAUiJ,OAAS,WACnCsD,KAAKutC,YAAY7kC,WAAWD,YAAYzI,KAAKutC,cAG9CH,EAAiB35C,UAAU06C,KAAO,SAASC,EAAM56C,GAChD2M,EAAgBkuC,SAASD,EAAM56C,IAMhC45C,EAAiB35C,UAAU66C,kBAAoB,SAAS1tC,GACvD,IAAIuD,EAAM7N,SAASgD,cAAc,KACjC6K,EAAI5K,aAAa,QAAS,4BAC1B,IAAIgI,EAAKnK,EAAejD,YAAYqN,aAAaZ,EAASmD,WAEvD,GADIxC,IAAIA,EAAKX,EAASmD,WACnBxC,EAAG,CACR,IAAIE,EAAOF,EAAGD,MAAM,KACjBG,EAAKzM,OAAS,IAAGuM,EAAKE,EAAK,IAC9B0C,EAAI5K,aAAa,OAAQgI,GAE1B,OAAO4C,GAKRkpC,EAAuB55C,UAAU8a,SAAW,SAAS3N,GACpD,IA0BK2tC,EAgBAC,EA1CDzrC,EAAcnC,EAAS8sC,wBACvBhqC,EAAO,oDAAsDX,EACjE,GAAkB,QAAfA,EACF,IAAIqB,EAAS9N,SAASgD,cAAc,YAGhC8K,EAAS9N,SAASgD,cAAc,QAGrC,GADA8K,EAAO7K,aAAa,QAAS,0BAA4BmK,GACtD9C,EAAS6tC,YAAY,SAAS,CAChC,IAAIC,EAAW1uC,KAAK2uC,kBAAkB/tC,GACnC8tC,GAAUtqC,EAAO1K,YAAYg1C,GAE9B9tC,EAAS6tC,YAAY,YACnBF,EAASvuC,KAAK4uC,kBAAkBhuC,KACzBwD,EAAO1K,YAAY60C,IAE/B,GAAG3tC,EAAS6tC,YAAY,MAAM,CAC7B,IAAII,EAAQ7uC,KAAK8uC,eAAeluC,GAC7BiuC,GAAOzqC,EAAO1K,YAAYm1C,GAE9B,GAAGjuC,EAAS6tC,YAAY,QAAQ,CAC/B,IAAIM,EAAU/uC,KAAKgvC,iBAAiBpuC,GACjCmuC,GAAS3qC,EAAO1K,YAAYq1C,GAE7BnuC,EAAS6tC,YAAY,aACnBF,EAASvuC,KAAKivC,mBAAmBruC,KAC1BwD,EAAO1K,YAAY60C,IAE/B,GAAG3tC,EAAS6tC,YAAY,QAAQ,CAC/B,IAAIS,EAAUlvC,KAAKmvC,mBAAmBvuC,GACnCsuC,GAAS9qC,EAAO1K,YAAYw1C,GAEhC,GAAGtuC,EAAS6tC,YAAY,UAAU,CACjC,IAAIW,EAAUpvC,KAAK2F,qBAAqB/E,GACrCwuC,GAAShrC,EAAO1K,YAAY01C,GAE7BxuC,EAAS6tC,YAAY,cACnBD,EAAcxuC,KAAKqvC,qBAAqBzuC,KAC5BwD,EAAO1K,YAAY80C,IAEjC5tC,EAAS6tC,YAAY,cACnBD,EAAcxuC,KAAKsvC,oBAAoB1uC,KAC3BwD,EAAO1K,YAAY80C,IAEpC,OAAOpqC,GAGRipC,EAAuB55C,UAAU67C,oBAAsB,SAAS1uC,GAC/D,IAAI6D,EAAM7D,EAAS8D,aACnB,OAAOvE,EAAgBqE,cAAc,kBAAkB,EAAOC,EAAG,KAAOA,EAAIE,SAG7E0oC,EAAuB55C,UAAU47C,qBAAuB,SAASzuC,GAChE,IAAI4tC,EAAcl4C,SAASgD,cAAc,QAEzC,GADAk1C,EAAYj1C,aAAa,QAAS,4BAC/BqH,EAAS6tC,YAAY,OAAO,CAC9B,IAAIc,EAASvvC,KAAKwvC,kBAAkB5uC,GACjC2uC,GAAQf,EAAY90C,YAAY61C,GAEpC,GAAG3uC,EAAS6tC,YAAY,QAAQ,CAC/B,IAAI5tC,EAAWV,EAAgBsvC,mBAAmB,SAAU7uC,GACzDC,GAAU2tC,EAAY90C,YAAYmH,GAEtC,GAAGD,EAAS6tC,YAAY,UAAU,CACjC,IAAIluC,EAAWP,KAAK0vC,mBAAmB9uC,GACpCL,GAAUiuC,EAAY90C,YAAY6G,GAEtC,GAAGK,EAAS6tC,YAAY,SAAS,CAChC,IAAIkB,EAAW3vC,KAAK4vC,kBAAkBhvC,GACnC+uC,GAAUnB,EAAY90C,YAAYi2C,GAEtC,GAAG/uC,EAAS6tC,YAAY,SAAS,CAChC,IAAIoB,EAAW7vC,KAAK8vC,kBAAkBlvC,GACnCivC,GAAUrB,EAAY90C,YAAYm2C,GAEtC,GAAGjvC,EAAS6tC,YAAY,UAAU,CACjC,IAAIsB,EAAW/vC,KAAKgwC,mBAAmBpvC,GACpCmvC,GAAUvB,EAAY90C,YAAYq2C,GAEtC,GAAGnvC,EAAS6tC,YAAY,QAAQ,CAC/B,IAAIwB,EAAUjwC,KAAKkwC,iBAAiBtvC,GACjCqvC,GAASzB,EAAY90C,YAAYu2C,GAErC,GAAGrvC,EAAS6tC,YAAY,QAAQ,CAC/B,IAAIW,EAAUpvC,KAAKmwC,iBAAiBvvC,GACjCwuC,GAASZ,EAAY90C,YAAY01C,GAErC,OAAOZ,GAGRnB,EAAuB55C,UAAUk7C,kBAAoB,SAAS/tC,GAC7D,IAAI6F,EAAY7F,EAASwvC,qBAEzB,GAAG3pC,GAAaA,EAAUzR,OAAO,CAChC,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,yBAC/B,IAKImH,EAAMP,EAAgBmG,oBAAoB,eAAgBG,EAAW7F,EAASyvC,gBALnE,SAAS37C,GACpBA,GACFkM,EAAS0vC,SAAS57C,MAKpB,OADA0R,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAGRinC,EAAuB55C,UAAUm7C,kBAAoB,SAAShuC,GAC7D,IAAIgE,EAAMhE,EAASiE,WACnB,QAAGD,GACKzE,EAAgBqE,cAAc,gBAAgB,EAAOI,IAK9DyoC,EAAuB55C,UAAUq7C,eAAiB,SAASluC,GAC1D,IAAIlM,EAAMkM,EAASmD,UACfvB,GAAQ,EAYZ,MAXoB,QAAjB5B,EAAS5N,MAAkB4N,EAAS2vC,iBACnC3vC,EAASiuC,QAAOn6C,EAAMkM,EAASiuC,MAAM/7C,QACxC0P,EAAQlM,SAASgD,cAAc,UACzBC,aAAa,QAAS,4BAC5BiJ,EAAMguC,UAAY,EACR,MAAP97C,IAAaA,EAAM,IACtBkM,EAASiuC,MAAQrsC,GAGd5B,EAAS2vC,iBAA0B,MAAP77C,IAAaA,EAAM,gBAE5CyL,EAAgBqE,cAAc,YAAa,KAAM9P,EAAK,uDAAwD8N,IAGtH6qC,EAAuB55C,UAAUu7C,iBAAmB,SAASpuC,GAC5D,GAAoB,QAAjBA,EAAS5N,MAAkB4N,EAASiD,QAAUjD,EAASiD,OAAOkB,iBAAmBnE,EAASI,QAAQ,CACpG,IAAIiG,EAAKrG,EAASiD,OAAOqD,2BACzB,GAAGD,GAAMA,EAAGjS,OAAO,CAClB,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,kCAC/B,IAAI4N,EAAU7Q,SAASgD,cAAc,QACrC6N,EAAQ5N,aAAa,QAAS,kCAC9B4N,EAAQzN,YAAYpD,SAASuD,eAAe,SAC5CuM,EAAS1M,YAAYyN,GACrB,IAKIzG,EAAMP,EAAgBmG,oBAAoB,eAAgBW,EAAIrG,EAASkD,gBAL5D,SAASsD,GACpBA,GACFxG,EAASyG,YAAYD,MAKvB,OADAhB,EAAS1M,YAAYgH,GACd0F,GAGT,IAAI1K,EAAKkF,EAAS6vC,aAAa7vC,EAASkD,gBACpCc,EAAMhE,EAASkD,eACf4sC,EAAM,qDAMV,OALGh1C,IACFkJ,EAAMzE,EAAgBuiC,4BAA4B,QAAShnC,GAE3Dg1C,GADAA,EAAMvwC,EAAgBuiC,4BAA4B,UAAWhnC,IAChDkF,EAASkD,eAAiB,IAAM4sC,EAAM9vC,EAASkD,gBAEtD3D,EAAgBqE,cAAc,cAAe,OAAQI,EAAK8rC,IAGlErD,EAAuB55C,UAAUw7C,mBAAqB,SAASruC,GAC9D,IAAI6D,EAAM7D,EAAS8D,aACnB,OAAOvE,EAAgBqE,cAAc,UAAUC,EAAIE,QAAQ,EAAOF,EAAIE,OAAQF,EAAIE,SAGnF0oC,EAAuB55C,UAAU+7C,kBAAoB,SAAS5uC,GAC7D,IAAI2G,EAAW3G,EAAS+vC,uBACxB,GAAGppC,GAAYA,EAASvS,OAAO,CAC9B,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,gCAC/BgO,EAASZ,QAAQ,CAAE7T,MAAO,GAAIkH,MAAO,qBACrC,IAKIsG,GAAYM,EAASuE,kBAAkB,QAAiB,+BACxDzE,EAAMP,EAAgBmG,oBAAoB,eAAgBiB,EAAU,IANzD,SAAS3K,GACpBA,GACFgE,EAAS6G,eAAe7K,KAI4D0D,GAEtF,OADA8F,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAGRinC,EAAuB55C,UAAU07C,mBAAqB,SAASvuC,GAC9D,IAAI6F,EAAY7F,EAASgwC,wBAEzB,GAAGnqC,GAAaA,EAAUzR,OAAO,CAChC,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,iCAC/BkN,EAAUE,QAAQ,CAAE7T,MAAO,GAAIkH,MAAO,kBACtC,IAKI0G,EAAMP,EAAgBmG,oBAAoB,gBAAiBG,EAAW,IAL3D,SAAS7J,GACpBA,GACFgE,EAASiwC,aAAaj0C,MAKxB,OADAwJ,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAGRinC,EAAuB55C,UAAUi8C,mBAAqB,SAAS9uC,GAC9D,IACIN,GAAYM,EAASuE,kBAAkB,WAAoB,kCAC/D,OAAOhF,EAAgBY,iBAAiB,SAAU,SAAU,UAF7C,WAAWH,EAAQ,WAE8CN,IAGjF+sC,EAAuB55C,UAAUm8C,kBAAoB,SAAShvC,GAC7D,IACIN,GAAYM,EAASuE,kBAAkB,UAAmB,iCAC9D,OAAOhF,EAAgBY,iBAAiB,SAAU,QAAS,SAF5C,WAAWH,EAASyE,UAE2C/E,IAG/E+sC,EAAuB55C,UAAUq8C,kBAAoB,SAASlvC,GAC7D,IACIN,GAAYM,EAAS2E,aAAsB,mBAC/C,OAAOpF,EAAgBY,iBAAiB,SAAU,QAAS,SAF5C,WAAWH,EAAS0E,UAE2ChF,IAG/E+sC,EAAuB55C,UAAUkS,qBAAuB,SAAS/E,GAChE,IAAImF,EAAUnF,EAASsF,sBACvB,GAAGH,GAAWA,EAAQ/Q,OAAO,CAC5B,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,0BAC/B,IAKIkH,EAAWG,EAASyF,gBACpB3F,EAAMP,EAAgBmG,oBAAoB,gBAAiBP,EAAStF,GANzD,SAAS8F,GACpBA,GACF3F,EAAS4F,UAAUD,MAMrB,OADAH,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAGRinC,EAAuB55C,UAAU08C,iBAAmB,SAASvvC,GAE5D,OAAOT,EAAgBY,iBAAiB,SAAU,OAAQ,QAD3C,WAAWH,EAAS4E,WAIpC6nC,EAAuB55C,UAAUy8C,iBAAmB,SAAStvC,GAE5D,OAAOT,EAAgBY,iBAAiB,SAAU,OAAQ,QAD3C,WAAWH,EAAS6E,WAIpC4nC,EAAuB55C,UAAUu8C,mBAAqB,SAASpvC,GAC9D,IAAIL,EAAWjK,SAASgD,cAAc,QAEtC,GADAiH,EAAShH,aAAa,QAAS,0BAC5BqH,EAAS2vC,gBACX,IAAIjwC,GAAW,OAGXA,GAAYM,EAAS2E,aAAsB,aAIhD,OADAhF,EAAS7G,YAAYyG,EAAgBY,iBAAiB,SAAU,OAAQ,QADzD,WAAWH,EAAS8E,SACuDpF,IACnFC,GAGR3O,EAAOD,QAAQy7C,G,gBCpZf,IAAM0D,EAAah9C,EAAQ,IAErB0wB,EAAe1wB,EAAQ,KACvBQ,EAAMR,EAAQ,IACpBlC,EAAOD,QAAQ,CAACm/C,WAAWA,EACXtsB,aAAaA,EAChBlwB,KAAKA,I,gBCClB,IAAMy8C,EAAcj9C,EAAQ,IACtBk9C,EAAgBl9C,EAAQ,IACxBm9C,EAAqBn9C,EAAQ,IAC7Bo9C,EAAsBp9C,EAAQ,IAC9Bq9C,EAAuBr9C,EAAQ,KAC/Bs9C,EAAoBt9C,EAAQ,KAC5Bu9C,EAAoBv9C,EAAQ,KAC5BoM,EAAwBpM,EAAQ,GAChCqZ,EAAQrZ,EAAQ,GAChBsD,EAAiBtD,EAAQ,GAE/B,SAASg9C,EAAW3/B,GACnBnR,KAAKiR,OAAS,IAAI7Z,EAAevD,WACjCmM,KAAKsxC,SAAW,GAChBtxC,KAAKuxC,WAAWpgC,GAejB2/B,EAAWr9C,UAAU+9C,QAAU,SAASrgC,GACvC,IAAI7B,EAAOtP,KACXA,KAAKiR,OAAOwY,iBAAiB9Y,QAAS,EACtC,IAAIvd,KAAQ+d,IAAQA,EAAK/d,MAAO+d,EAAK/d,IAErC,OADA4M,KAAKk+B,SAAS,2BAA6B/sB,EAAKR,QACzC3Q,KAAKiR,OAAOugC,QAAQrgC,EAAKR,OAAQvd,GACvCiI,MAAM,SAASd,GAwBf,OAvBA+U,EAAKmiC,YACFtgC,GAAQA,EAAKT,IAAMpB,EAAKyb,YAAY5Z,EAAKT,KAC3CpB,EAAKoiC,YAAYvgC,EAAKT,IACnBS,EAAK7a,UAAYgZ,EAAKqiC,SAAS,gBACjCp3C,EAAW+U,EAAKsiC,aAAazgC,EAAK7a,UAE3B6a,EAAK0gC,QAAUviC,EAAKqiC,SAAS,cACpCp3C,EAAW+U,EAAKwiC,eAAe3gC,EAAK0gC,QAE7B1gC,EAAK1S,OAAS6Q,EAAKqiC,SAAS,eACnCriC,EAAKyiC,cAAc5gC,EAAK1S,OAEjB0S,EAAK6gC,UAAY1iC,EAAKqiC,SAAS,gBACtCriC,EAAK2iC,aAAa9gC,EAAK6gC,UAGvB1iC,EAAK4iC,kBAIN5iC,EAAK6iC,qBAEN7iC,EAAK4H,SACE3c,KAzBD,OA2BA,SAAS4V,GAGf,MAFAb,EAAKmiC,YACLniC,EAAK8uB,UAAUjuB,GACTA,MAgBR2gC,EAAWr9C,UAAU2+C,eAAiB,SAASC,GAC9C,IAAI/iC,EAAOtP,KACX,IAAIqyC,EAAOrlC,KAAOqlC,EAAO/5C,MAClB,OAAO2uB,QAAQE,OAAO,IAAI9R,MAAM/F,EAAKgjC,gBAAgB,iBAAkB,uCAE9E,IAAI5nB,EAAO2nB,EAAOrlC,GACdulC,EAAWvyC,KAAKiR,OAAOwY,iBAAiB9Y,OAC5CrB,EAAK4uB,SAAS,qBAAuBmU,EAAO/5C,MAAQ,YAAcoyB,GAClE,IAAI8nB,EAAQxyC,KAAKyyC,4BAA4BJ,GAC7C,OAAOryC,KAAKiR,OAAOmhC,eAAe1nB,EAAM8nB,GACvCn3C,MAAK,SAASd,GACd,GAAG83C,EAAOR,OAAO,CAChBviC,EAAK4uB,SAAS,iCAAmCmU,EAAOR,QACxD,IAAI1gC,EAAQkhC,EAAOj/C,IAAO,CAAC,oBAAqBi/C,EAAOj/C,KAAQ,GAE/D,OADA+d,EAAK,qBAAuB,kBACrB7B,EAAK2B,OAAOyhC,UAAUL,EAAOR,OAAQ1gC,GAC3C9V,MAAK,SAASd,GACd+U,EAAK4uB,SAAS,qCACd5uB,EAAK2B,OAAOwY,iBAAiB9Y,OAAS4hC,EACtCjjC,EAAK2B,OAAOwY,iBAAiBiB,KAAOA,EAEpC,OAAOpb,EAAK2B,OAAO0hC,cAAa,EAAOp4C,EAD3B,CAAC,oBAAsB,uBAGnCc,MAAK,SAASd,GAGd,OAFA+U,EAAKmiC,YACLniC,EAAK4H,SACE3c,KAMT,OAFC+U,EAAKmiC,YAECl3C,KAEPc,MAAK,SAASd,GACd,OAAO+U,EAAKsjC,gBACXv3C,MAAK,SAASd,GACd,KAAGs4C,KAAOvjC,EAAK2B,OAAOyY,WAAWqB,YAAYL,IAMtC,OAAOzD,QAAQE,OAAO,IAAI9R,MAAM/F,EAAKwjC,eAAe,iBAAkB,iDAAmDpoB,KAL/Hpb,EAAK2B,OAAOwY,iBAAiBiB,KAAOA,EACpCpb,EAAK4iC,iBACL5iC,EAAKyjC,YAAY,iCAAmCroB,EAAM,iBA/BtD,OAsCA,SAAStc,GACfkB,EAAKmiC,YACLniC,EAAK8uB,UAAUhwB,OAOjB0iC,EAAWr9C,UAAUu/C,eAAiB,SAAStoB,GAC9C,IAAIpb,EAAOtP,KACPizC,EAASjzC,KAAKiR,OAAOyY,WAAWqB,cAChCmoB,EAAOxoB,GAAc1qB,KAAK0Q,KAC1ByiC,EAAOF,GAAUA,EAAO,eAAiBA,EAAO,cAAc,UAAYA,EAAO,cAAc,UAAY,SAAWC,EAAM,IAAMA,EAEtI,OADAlzC,KAAKk+B,SAAS,qBAAuBiV,GAC9BnzC,KAAKiR,OAAO+hC,eAAetoB,GACjCrvB,MAAK,SAASd,GAOd,OANA+U,EAAKmiC,YACLniC,EAAK2B,OAAOwY,iBAAiBiB,MAAO,EACpCpb,EAAKic,SAASb,GACdpb,EAAK6iC,qBACL7iC,EAAKyjC,YAAY,iCAAmCI,EAAK,WACzD7jC,EAAKsjC,gBACEr4C,KARD,OAUA,SAAS6T,GACfkB,EAAKmiC,YACLniC,EAAK8uB,UAAUhwB,OAOjB0iC,EAAWr9C,UAAUg/C,4BAA8B,SAASW,GAC3D,IAAI7gC,EAAM,CACT,WAAa,CACZ1K,KAAM,wCACN7B,SAAU,0CAEX,QAAS,qBAeV,OAbGotC,EAAK96C,QACPia,EAAI,cAAgB,CACnB,YAAc,KACd,SAAU6gC,EAAK96C,QAGd86C,EAAK76C,cACPga,EAAI,gBAAkB,CACrB,YAAc,KACd,SAAU6gC,EAAK76C,cAGjBga,EAAI,yBAA2B,CAAE,QAAU,aAAc,SAAW,KAC7DA,GAGRu+B,EAAWr9C,UAAU6+C,gBAAkB,SAASe,EAAOp8C,GACtD,MAAO,oBAAsBo8C,EAAQ,KAAOp8C,GAG7C65C,EAAWr9C,UAAUq/C,eAAiB,SAASO,EAAOp8C,GACrD,MAAO,gBAAkBo8C,EAAQ,iDAAmDp8C,GAMrF65C,EAAWr9C,UAAU6/C,KAAO,SAASpyC,EAAK9N,GACzC,IAAI+E,EAAO,GAeX,OAdG+I,IAAqC,GAA9BA,EAAIoL,QAAQ,eACrBpL,EAAMA,EAAIa,UAAU,EAAGb,EAAIoL,QAAQ,eACnCnU,EAAK7B,SAAW4K,EAAIa,UAAUb,EAAIoL,QAAQ,cAAc,KAEjDpL,IAAkC,GAA3BA,EAAIoL,QAAQ,YAC1BpL,EAAMA,EAAIa,UAAU,EAAGb,EAAIoL,QAAQ,YACnCnU,EAAK05C,OAAS,IAEP3wC,IAAgC,GAAzBA,EAAIoL,QAAQ,WAC1BpL,EAAMA,EAAIa,UAAU,EAAGb,EAAIoL,QAAQ,WACnCnU,EAAKsG,MAAQyC,EAAIa,UAAUb,EAAIoL,QAAQ,UAAU,IAElDnU,EAAKwY,OAASzP,EACX9N,IAAK+E,EAAK/E,IAAMA,GACZ4M,KAAKwxC,QAAQr5C,IAMrB24C,EAAWr9C,UAAU8/C,sBAAwB,SAASryC,GACrD,OAAGA,IAAsC,GAA/BA,EAAIoB,YAAY,WAClBpB,EAAIa,UAAU,EAAGb,EAAIoB,YAAY,YAEtCpB,IAAwC,GAAjCA,EAAIoB,YAAY,aAClBpB,EAAIa,UAAU,EAAGb,EAAIoB,YAAY,cAEtCpB,IAAqC,GAA9BA,EAAIoB,YAAY,UAClBpB,EAAIa,UAAU,EAAGb,EAAIoB,YAAY,WAEtCpB,IAAoC,GAA7BA,EAAIoB,YAAY,SAClBpB,EAAIa,UAAU,EAAGb,EAAIoB,YAAY,UAElCpB,GAGR4vC,EAAWr9C,UAAUkd,OAAS,WAC7B,OAAO3Q,KAAKiR,OAAOwY,iBAAiB9Y,QAGrCmgC,EAAWr9C,UAAUid,GAAK,WACzB,OAAO1Q,KAAKiR,OAAOwY,iBAAiBiB,MAGrComB,EAAWr9C,UAAU+/C,YAAc,WAClCxzC,KAAKiR,OAAOwY,iBAAiB9Y,QAAS,GAGvCmgC,EAAWr9C,UAAUi+C,YAAc,SAAShnB,GAC3C1qB,KAAKiR,OAAOwY,iBAAiBiB,KAAOA,EACpCtzB,EAAejD,YAAYwT,cAA3B,IAAkD3H,KAAKiR,OAAOwY,iBAAiByC,QAAU,aACzF90B,EAAejD,YAAYwT,cAA3B,IAAkD3H,KAAKiR,OAAOwY,iBAAiByC,QAAU,YAG1F4kB,EAAWr9C,UAAUggD,QAAU,WAC9BzzC,KAAKiR,OAAOwY,iBAAiBiB,MAAO,GAGrComB,EAAWr9C,UAAU83B,SAAW,SAAS7a,EAAIxP,GAC5ClB,KAAKiR,OAAOyY,WAAW6B,SAAS7a,EAAIxP,IAGrC4vC,EAAWr9C,UAAUs3B,YAAc,SAASra,EAAIxP,GAC/C,OAAOlB,KAAKiR,OAAOyY,WAAWqB,YAAYra,EAAIxP,IAG/C4vC,EAAWr9C,UAAUm/C,cAAgB,WAEpC,OAAO5yC,KAAKiR,OAAOugC,WAGpBV,EAAWr9C,UAAU0+C,mBAAqB,WACzCnyC,KAAKuG,OAAS,IAAI6qC,EAAkBsC,qBAAqB1zC,MACzDA,KAAK2zC,kBAGN7C,EAAWr9C,UAAUmgD,oBAAsB,WAC1C5zC,KAAKuG,OAAS,IAAI8qC,EAAkBrxC,MACpCA,KAAK2zC,kBAIN7C,EAAWr9C,UAAUogD,gBAAkB,SAASn/C,GAC/CsL,KAAKuG,OAAS,IAAI8qC,EAAkBrxC,KAAMtL,GAC1CsL,KAAK2zC,kBAGN7C,EAAWr9C,UAAUy+C,eAAiB,WACrClyC,KAAKuG,OAAS,IAAIyqC,EAAc8C,iBAAiB9zC,MACjDA,KAAKuG,OAAO6W,KAAO,KACnBpd,KAAKkX,UAGN45B,EAAWr9C,UAAUsgD,iBAAmB,WACvC/zC,KAAKuG,OAAS,IAAIyqC,EAAcgD,kBAAkBh0C,MAClDA,KAAK2zC,kBAGN7C,EAAWr9C,UAAUq+C,eAAiB,SAASmC,GAC9Cj0C,KAAKuG,OAAS,IAAI4qC,EAAqBnxC,MACvCA,KAAK2zC,kBAGN7C,EAAWr9C,UAAUs+C,cAAgB,SAAStzC,GAC7CuB,KAAKuG,OAAS,IAAI2qC,EAAoBlxC,KAAMvB,EAAOuB,KAAK3H,SACxD2H,KAAK2zC,kBAGN7C,EAAWr9C,UAAUygD,iBAAmB,WACvCl0C,KAAKuG,OAAS,IAAIyqC,EAAc8C,iBAAiB9zC,MACjDA,KAAKuG,OAAO6W,KAAO,OACnBpd,KAAKkX,UAGN45B,EAAWr9C,UAAUm+C,aAAe,SAASqC,GAC5Cj0C,KAAKuG,OAAS,IAAI4tC,uBAAuBn0C,KAAM,OAAQA,KAAKo0C,uBAC5D,IAAMprB,EAAUhpB,KAAKuG,OAAOgL,aAAa0iC,GAEzC,OADAj0C,KAAK2zC,iBACE3qB,GAGR8nB,EAAWr9C,UAAU4gD,mBAAqB,SAASJ,GAClDj0C,KAAKuG,OAAS,IAAI4tC,uBAAuBn0C,KAAM,SAAUA,KAAKs0C,wBAC9D,IAAMtrB,EAAUhpB,KAAKuG,OAAOguC,mBAAmBN,GAE/C,OADAj0C,KAAK2zC,iBACE3qB,GAGR8nB,EAAWr9C,UAAUkgD,eAAiB,WAErC,GADAv8C,EAAejD,YAAYyH,eAAeoE,KAAKw0C,SAC5Cx0C,KAAKuG,QAAUvG,KAAKw0C,QAAQ,CAC9B,IAAIrR,EAAInjC,KAAKuG,OAAOgI,WACpBvO,KAAKw0C,QAAQ96C,YAAYypC,KAI3B2N,EAAWr9C,UAAUghD,kBAAoB,SAAS/pB,GACjD,MAAW,YAARA,KACA1qB,KAAKiR,OAAOyY,WAAWe,mBAAmB,kBAAmBC,IAMjEomB,EAAWr9C,UAAUihD,kBAAoB,SAAShqB,GACjD,IAAI1qB,KAAKy0C,kBAAkB/pB,GAAO,OAAO,EAEzC,IAAIttB,EAAO9G,SAASgD,cAAc,KAClC8D,EAAK7D,aAAa,QAAS,yCAK3B,IACqBmX,EADjBpB,EAAOtP,KAUX,OADA5C,EAAKoD,iBAAiB,SARDkQ,EAQgBga,EAP7B,WAEe,GADDiqB,QAAQ,yHAAD,OAA0HjkC,EAA1H,gBAE1BpB,EAAK0jC,eAAetiC,MAKhBtT,GAGR0zC,EAAWr9C,UAAUmhD,WAAa,SAASr6C,GAC1CyF,KAAK+yC,YAAYx4C,EAAU,YAG5Bu2C,EAAWr9C,UAAU2qC,UAAY,SAAS7jC,GACzCyF,KAAK+yC,YAAYx4C,EAAU,UAG5Bu2C,EAAWr9C,UAAUmqC,cAAgB,SAASrjC,GAC1CyF,KAAKq5B,UAAUjiC,EAAejD,YAAYyH,eAAeoE,KAAKq5B,WAGlEyX,EAAWr9C,UAAUohD,cAAgB,WACjC70C,KAAK80C,MAAM19C,EAAejD,YAAYyH,eAAeoE,KAAK80C,OAG9DhE,EAAWr9C,UAAUshD,cAAgB,SAAS54C,GAC7C6D,KAAKq5B,SAAWl9B,GAGjB20C,EAAWr9C,UAAUuhD,kBAAoB,SAAS74C,GACjD6D,KAAKi1C,QAAU94C,GAGhB20C,EAAWr9C,UAAUyhD,iBAAmB,SAAS/4C,GAChD6D,KAAKoiC,WAAajmC,GAGnB20C,EAAWr9C,UAAU0hD,eAAiB,SAASh5C,GAC9C6D,KAAKgyC,SAAW71C,GAGjB20C,EAAWr9C,UAAU2hD,cAAgB,SAASj5C,GAC7C6D,KAAKoT,QAAUjX,GAGhB20C,EAAWr9C,UAAU4hD,aAAe,SAASl5C,GAC5C6D,KAAKw0C,QAAUr4C,GAGhB20C,EAAWr9C,UAAU6hD,KAAO,SAASC,EAAOC,GACxCD,GAASA,EAAMhvC,QAAQvG,KAAKq1C,aAAaE,EAAMhvC,QAC/CgvC,GAASA,EAAMN,SAASj1C,KAAKg1C,kBAAkBO,EAAMN,SACrDM,GAASA,EAAMlc,UAAUr5B,KAAK+0C,cAAcQ,EAAMlc,UAClDkc,GAASA,EAAMnT,YAAYpiC,KAAKk1C,iBAAiBK,EAAMnT,YAEvDmT,GAASA,EAAMniC,SAASpT,KAAKo1C,cAAcG,EAAMniC,SACjDpT,KAAKoT,SACPpT,KAAKoX,cAEHpX,KAAKi1C,QAGR,IAAI3lC,EAAOtP,KAEX,GAAGw1C,GAAaA,EAAU7kC,QACzB,QAAiE,IAAvD3Q,KAAKiR,OAAOyY,WAAWA,WAAW8rB,EAAU7kC,QACrD,OAAO3Q,KAAKwxC,QAAQgE,GAAb,OACA,SAASpnC,GACfkB,EAAKukC,0BAKP7zC,KAAK6zC,mBAIP/C,EAAWr9C,UAAUyjB,OAAS,SAASjd,GACtC+F,KAAK49B,gBACL59B,KAAKy1C,iBACFz1C,KAAKgyC,UACP56C,EAAejD,YAAYyH,eAAeoE,KAAKgyC,UAG7ChyC,KAAKuG,QACPvG,KAAK2zC,iBAEH15C,GAAK+F,KAAK+yC,YAAY94C,IAI1B62C,EAAWr9C,UAAUiiD,sBAAwB,SAASC,GAClDv+C,EAAejD,YAAYyH,eAAeoE,KAAKoiC,YAC/ChrC,EAAejD,YAAYyH,eAAeoE,KAAKgyC,UAC/C7kC,EAAM7Q,uBAAuB,+BAC7Bq5C,EAAOl5C,UAAUG,IAAI,gCAGzBk0C,EAAWr9C,UAAUmiD,cAAgB,aAarC9E,EAAWr9C,UAAUgiD,eAAiB,WAClCz1C,KAAKoiC,aACPhrC,EAAejD,YAAYyH,eAAeoE,KAAKoiC,YAC/CpiC,KAAK61C,iBAIP/E,EAAWr9C,UAAUoiD,aAAe,WACnC71C,KAAKsxC,SAAW,GAChBtxC,KAAK81C,eACL,IAAI,IAAIjkD,EAAI,EAAGA,EAAEmO,KAAKsxC,SAASt8C,OAAQnD,IAAI,CAC1C,IAAIkkD,EAAW/1C,KAAKsxC,SAASz/C,GAC1BkkD,IAAaC,GAAKD,EAASxnC,aAC7BvO,KAAKoiC,WAAW1oC,YAAYs8C,MAK/BlF,EAAWr9C,UAAUwiD,aAAe,WACnC,GAAGj2C,KAAKgyC,UACJhyC,KAAKpC,YAAY,gBAAgB,CACnC,IAAIs4C,EAAM,IAAInF,EAAY/wC,MAC1Bm2C,GAAKD,EAAI3nC,WACTvO,KAAKgyC,SAASt4C,YAAYy8C,IAC1Bn2C,KAAKgyC,SAAS10C,MAAMC,QAAU,UAKjCuzC,EAAWr9C,UAAUqiD,aAAe,WAElC,IAKKM,EANHp2C,KAAKpC,YAAY,aACfw4C,EAAK,IAAIhF,EAAkBiF,yBAAyBr2C,QAEvDA,KAAKsxC,SAAStmC,KAAKorC,GAEjBp2C,KAAK0Q,MAAQ1Q,KAAKpC,YAAY,QAC5Bw4C,EAAK,IAAIpF,EAAcsF,qBAAqBt2C,QACzCA,KAAKsxC,SAAStmC,KAAKorC,KAK7BtF,EAAWr9C,UAAUmK,YAAc,SAASrB,GAC3C,OAAsC,GAAnCyD,KAAKu2C,cAAcjqC,QAAQ/P,OAC3ByD,KAAKw2C,iBAAiBj6C,MACtByD,KAAKiR,OAAOyY,WAAWe,mBAAmBluB,KAM9Cu0C,EAAWr9C,UAAUk+C,SAAW,SAASp1C,GACxC,OAAmC,GAAhCyD,KAAKy2C,WAAWnqC,QAAQ/P,OACxByD,KAAKw2C,iBAAiBj6C,MACtByD,KAAKiR,OAAOyY,WAAWe,mBAAmBluB,KAM9Cu0C,EAAWr9C,UAAUg+C,UAAY,SAASl3C,GACzCyF,KAAK49B,gBACF59B,KAAKuG,QAAqC,mBAApBvG,KAAKuG,OAAOmwC,MAAoB12C,KAAKuG,OAAOmwC,MAAK,IAG3E5F,EAAWr9C,UAAUoqC,cAAgB,SAAS8Y,GACzC,IAAI7Y,EAAKxnC,SAASgD,cAAc,OAC5BykC,EAAMznC,SAASgD,cAAc,OACjCykC,EAAIxkC,aAAa,QAAS,+BAC1BukC,EAAGpkC,YAAYqkC,GAEf,IAAIC,EAAO1nC,SAASgD,cAAc,OAClC0kC,EAAKzkC,aAAa,QAAS,0DAC3BwkC,EAAIrkC,YAAYskC,GAChB,IAAIC,EAAO3nC,SAASgD,cAAc,QAClC2kC,EAAK1kC,aAAa,QAAS,2BAC3BykC,EAAKtkC,YAAYukC,GAEjB0Y,EAAOj9C,YAAYokC,IAGxBgT,EAAWr9C,UAAUs/C,YAAc,SAAS94C,EAAKF,GAChD,GAAGiG,KAAKq5B,SAAS,CAChBjiC,EAAejD,YAAYyH,eAAeoE,KAAKq5B,UAC/C,IAAIgF,EAAK/nC,SAASgD,cAAc,OAC1B,OAAOS,GACH,IAAK,OACD,IAAIokC,EAAY7nC,SAASgD,cAAc,OACvC6kC,EAAU5kC,aAAa,QAAS,qBAChC4kC,EAAUzkC,YAAYpD,SAASuD,eAAeI,IAC9CokC,EAAG3kC,YAAYykC,GACfn+B,KAAK69B,cAAcQ,GACvB,MACA,IAAK,UACDA,EAAG9kC,aAAa,QAAS,6BACzB8kC,EAAG3kC,YAAYpD,SAASuD,eAAeI,IAC3C,MACA,IAAK,QACDokC,EAAG9kC,aAAa,QAAS,2BACzB8kC,EAAG3kC,YAAYpD,SAASuD,eAAeI,IAGrD+F,KAAKq5B,SAAS3/B,YAAY2kC,KAI5ByS,EAAWr9C,UAAUmjD,eAAiB,SAASC,EAAM98C,GACpD,IAAI+8C,EAAQ,IAAI7F,EAAmB4F,EAAM72C,MACzC,GAAGA,KAAKq5B,SAAS,CAChB,IAAI0d,EAAgB,UAARh9C,EAAmB,aAAe,eAC9C3C,EAAejD,YAAYyH,eAAeoE,KAAKq5B,UAC/Cr5B,KAAKq5B,SAAS3/B,YAAYo9C,EAAMvoC,SAASwoC,MAI3CjG,EAAWr9C,UAAUyqC,SAAW,SAASjkC,GACxC+F,KAAK+yC,YAAY94C,EAAK,QACnB+F,KAAKuG,QAAqC,mBAApBvG,KAAKuG,OAAOmwC,MAAoB12C,KAAKuG,OAAOmwC,KAAKz8C,IAG3E62C,EAAWr9C,UAAU+iD,iBAAmB,SAASj6C,GAEhD,OAA0B,GADb,CAAC,SAAU,KAAM,cAAe,gBAAiB,eAAgB,gBAAiB,mBACrF+P,QAAQ/P,IAInBu0C,EAAWr9C,UAAU89C,WAAa,SAASpgC,GAC1CnR,KAAKu2C,cAAgBplC,GAAQA,EAAKmgC,SAAWngC,EAAKmgC,SACjD,CAAC,SAAU,KAAM,gBAAiB,gBACjC,gBAAiB,cAAe,kBAChC,cAAe,eAAgB,gBAC/B,aAAc,eAEhBtxC,KAAKy2C,WAAatlC,GAAQA,EAAKgoB,MAAQhoB,EAAKgoB,MAAQn5B,KAAKu2C,cACtDplC,EAAK7a,WACP0J,KAAKg3C,iBAAmB7lC,EAAK7a,UAE3B6a,EAAK0gC,SACP7xC,KAAKi3C,eAAiB9lC,EAAK0gC,QAE5B7xC,KAAKk3C,MAAQ,IAAIh3C,EACjB,IAAIoP,EAAOtP,KACXA,KAAKk3C,MAAM1jC,KAAKrC,EAAKiC,SAAS,WAE7B,IADA,IAAIS,EAAO,CAAC,QAAS,QAAS,WACtBhiB,EAAI,EAAGA,EAAEgiB,EAAK7e,OAAQnD,IAC1Byd,EAAK4nC,MAAMz7C,gBAAgBoY,EAAKhiB,IAIpCyd,EAAK4H,YAEH/F,EAAKvN,KAAO5D,KAAKk3C,OACnBl3C,KAAKk3C,MAAM7gC,YAAYlF,EAAKvN,KAE7B5D,KAAK81C,gBAGNhF,EAAWr9C,UAAUgI,gBAAkB,SAAS9H,GAC/C,OAAOqM,KAAKk3C,MAAMz7C,gBAAgB9H,IAGnCm9C,EAAWr9C,UAAU2jB,YAAc,WAClC,IAAIpX,KAAKk3C,MAER,OADAz3C,QAAQC,IAAI,IAAI2V,MAAM,gDACf,EAERrV,KAAKoT,QAAQ1Z,YAAYsG,KAAKk3C,MAAM3oC,SAASvO,QAG9C8wC,EAAWr9C,UAAU2gD,oBAAsB,WAC1C,SAAGp0C,KAAKg3C,mBAAoBh3C,KAAKg3C,iBAAL,OACpBh3C,KAAKg3C,iBAAL,MAKTlG,EAAWr9C,UAAU6gD,qBAAuB,WAC3C,SAAGt0C,KAAKg3C,mBAAoBh3C,KAAKg3C,iBAAL,OACpBh3C,KAAKg3C,iBAAL,MAKTlG,EAAWr9C,UAAU0jD,qBAAuB,WAC3C,OAAOn3C,KAAKo3C,iBAGbxlD,EAAOD,QAAQm/C,G;;;;;;;;AC7oBf,IAAM5wC,EAAwBpM,EAAQ,GAChCqZ,EAAQrZ,EAAQ,GAChBsD,EAAiBtD,EAAQ,GAE3BujD,EAAe,CACfC,QAAS,CACL9F,QAAS,CACX+F,QAAS,cACHj9C,OAAS,UACT8C,KAAS,OACTo6C,iBAAiB,GAErBC,SAAU,CACNF,QAAS,eACTj9C,OAAS,SACT8C,KAAS,YAEby0C,OAAQ,CACJ0F,QAAS,aACTj9C,OAAS,SACT8C,KAAS,OAEb9G,SAAU,CACNihD,QAAS,eACTj9C,OAAS,WACT8C,KAAS,QAEbqB,MAAO,CACH84C,QAAS,YACTj9C,OAAS,QACT8C,KAAS,WAGjBs6C,OAAQ,CACJD,SAAU,CACNrF,eAAgB,CACZmF,QAAS,kBACTj9C,OAAS,SACT8C,KAAS,OACTo6C,iBAAiB,GAErBxE,eAAgB,CACZuE,QAAS,kBACTj9C,OAAS,SACT8C,KAAS,cAGjBy0C,OAAQ,CACJa,UAAW,CACP6E,QAAS,cACTj9C,OAAS,YACT8C,KAAS,MACTo6C,iBAAiB,GAErB7E,aAAc,CACV4E,QAAS,gBACTj9C,OAAS,eACT8C,KAAS,YAEbu6C,eAAgB,CACZJ,QAAS,mBACTj9C,OAAS,iBACT8C,KAAS,cAGjB9G,SAAU,CACNshD,aAAc,CAChBL,QAAS,gBACHj9C,OAAS,eACT8C,KAAS,MACTo6C,iBAAiB,GAErBK,eAAgB,CACZN,QAAS,kBACTj9C,OAAS,iBACT8C,KAAS,QAEb06C,eAAgB,CACZP,QAAS,kBACTj9C,OAAS,iBACT8C,KAAS,YAEb26C,eAAe,CACXR,QAAS,kBACTj9C,OAAS,iBACT8C,KAAS,cAGjBqB,MAAO,CACHu5C,OAAQ,CACJT,QAAS,SACTj9C,OAAS,SACT8C,KAAS,gBACTo6C,iBAAiB,GAErB3jB,OAAQ,CACJ0jB,QAAS,SACTj9C,OAAS,SACT8C,KAAS,eAMzB,SAAS2zC,EAAYx1C,GACjByE,KAAKzE,GAAKA,EACVyE,KAAKuG,OAAShL,EAAGi5C,QACjBx0C,KAAKiR,OAAS,IAAI7Z,EAAevD,WACjCmM,KAAKiR,OAAOgnC,WAAY,EACxBj4C,KAAKiR,OAAOinC,sBAAuB,EACnCl4C,KAAKm4C,KAAO,IAAIj4C,EAIpB6wC,EAAYt9C,UAAU8a,SAAW,WAC/B,IAAI6pC,EAAM9hD,SAASgD,cAAc,OAM/B,OALA8+C,EAAI7+C,aAAa,QAAS,0BACvByG,KAAKzE,KACLyE,KAAKq4C,UAAUD,EAAKp4C,KAAKuG,QACzBvG,KAAKs4C,kBAAkB,UAAWt4C,KAAKuG,SAEnC6xC,GAKXrH,EAAYt9C,UAAU8kD,mBAAqB,SAAS1hD,GAChDsW,EAAM7Q,uBAAuB,qBAC7BzF,EAAE4F,UAAUG,IAAI,sBAGpBm0C,EAAYt9C,UAAU+kD,YAAc,SAASl+C,EAAQmD,EAAK8I,GACtD4G,EAAM7Q,uBAAuB,qBAC7BmB,EAAIhB,UAAUG,IAAI,qBAClBoD,KAAKs4C,kBAAkBh+C,EAAQiM,IAInCwqC,EAAYt9C,UAAUglD,WAAa,SAASC,EAAWnyC,EAAQoyC,GAC3D,IAAI9hD,EAAIP,SAASgD,cAAc,KAC/BzC,EAAE0C,aAAa,QAAS,qGACrBm/C,EAAUlB,iBAAiB3gD,EAAE4F,UAAUG,IAAI,qBAC9C,IAAI0S,EAAOtP,KACXnJ,EAAE2J,iBAAiB,SAAS,WACxB8O,EAAKkpC,YAAYE,EAAUp+C,OAAQ0F,KAAMuG,MAE7C,IAAInJ,EAAO9G,SAASgD,cAAc,KAClC8D,EAAK7D,aAAa,QAAS,4BAA8Bm/C,EAAUt7C,MACnEvG,EAAE6C,YAAY0D,GACd,IAAIjD,EAAM7D,SAASuD,eAAe6+C,EAAUnB,SAC5C1gD,EAAE6C,YAAYS,GACdw+C,EAAGj/C,YAAY7C,IAInBk6C,EAAYt9C,UAAU4kD,UAAY,SAASO,EAAQryC,GAE/C,IAAI9I,EAAMnH,SAASgD,cAAc,OACjCs/C,EAAOl/C,YAAY+D,GAEnB,IAAIk7C,EAAKriD,SAASgD,cAAc,MAIhC,IAAK,IAAIlG,KAHTulD,EAAGp/C,aAAa,QAAS,eACzBkE,EAAI/D,YAAYi/C,GAEAtB,EAAaC,QACrBD,EAAaC,QAAQ5jD,eAAeN,IACpC4M,KAAKy4C,WAAWpB,EAAaC,QAAQlkD,GAAMmT,EAAQoyC,GAG3D,OAAOC,GAKX7H,EAAYt9C,UAAU6kD,kBAAoB,SAASx8C,EAAMyK,GAErDnP,EAAejD,YAAYyH,eAAe2K,GAE1C,IAAI3E,EAAOtL,SAASgD,cAAc,OAElCiN,EAAO7M,YAAYkI,IACfi3C,EAAOviD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,mBAC3BqI,EAAKlI,YAAYm/C,GACjB,IAAI7+B,EAAM1jB,SAASgD,cAAc,OACjC0gB,EAAIzgB,aAAa,QAAS,aAC1Bs/C,EAAKn/C,YAAYsgB,GACjB,IAAIlN,EAAOxW,SAASgD,cAAc,OAClCwT,EAAKvT,aAAa,QAAS,wBAC3BygB,EAAItgB,YAAYoT,GAChB,IAAIoD,EAAM5Z,SAASgD,cAAc,OACjC4W,EAAI3W,aAAa,QAAS,iFAC1BuT,EAAKpT,YAAYwW,GAEjB,IAAI2oC,EAAOviD,SAASgD,cAAc,OAElC,OAAOwC,GACH,IAAK,UACD,IAAIg9C,EAHD94C,KAGgB+4C,mBAAmBF,GACtC3oC,EAAIxW,YAAYo/C,GACpB,MACA,IAAK,SACGA,EAPD94C,KAOgBg5C,oBAAoBH,GACvC3oC,EAAIxW,YAAYo/C,GACpB,MACA,IAAK,SACGA,EAXD94C,KAWgBi5C,aAAaJ,GAChC3oC,EAAIxW,YAAYo/C,GACpB,MACA,IAAK,WACGA,EAfD94C,KAegBk5C,eAAeL,GAClC3oC,EAAIxW,YAAYo/C,GACpB,MACA,IAAK,QACGA,EAnBD94C,KAmBgBm5C,YAAYN,GAC/B3oC,EAAIxW,YAAYo/C,GAGxB,OAAOl3C,GAIXmvC,EAAYt9C,UAAU2lD,gBAAkB,SAASC,EAAY/+C,EAAQu+C,EAAM/rC,GAEvE,OADA1V,EAAejD,YAAYyH,eAAekR,GACnCusC,GACH,IAAK,WACD,IAAIl9C,EAAM6D,KAAKs5C,eAAeh/C,EAAQwS,GAC1C,MACA,IAAK,SAGL,IAAK,WACI3Q,EAAM6D,KAAKu5C,cAAcj/C,EAAQwS,GAC1C,MACA,IAAK,QACG3Q,EAAM6D,KAAKw5C,eAAel/C,EAAQwS,GAC1C,MACA,QACIrN,QAAQC,IAAI,sBAGpBm5C,EAAKn/C,YAAYyC,IAGrB40C,EAAYt9C,UAAUgmD,eAAiB,SAASJ,EAAYK,EAAehC,EAAQmB,EAAM/rC,GACrFK,EAAMxQ,mBAAmB+6C,GACzB13C,KAAKo5C,gBAAgBC,EAAYK,EAAcp/C,OAAQu+C,EAAM/rC,IAIjEikC,EAAYt9C,UAAUkmD,cAAgB,SAASN,EAAYK,EAAeb,EAAM/rC,EAAM6rC,GAElF,GAA2B,kBAAxBe,EAAcp/C,OAAjB,CACA,IAAIzD,EAAIP,SAASgD,cAAc,KAC/BzC,EAAE0C,aAAa,QAAS,wGACrBmgD,EAAclC,iBAAiB3gD,EAAE4F,UAAUG,IAAI,6BAClD,IAAI0S,EAAOtP,KACXnJ,EAAE2J,iBAAiB,SAAS,WACxB8O,EAAKmqC,eAAeJ,EAAYK,EAAe15C,KAAM64C,EAAM/rC,MAE/D,IAAI1P,EAAO9G,SAASgD,cAAc,KAClC8D,EAAK7D,aAAa,QAAS,4BAA8BmgD,EAAct8C,MACvEvG,EAAE6C,YAAY0D,GACd,IAAIjD,EAAM7D,SAASuD,eAAe6/C,EAAcnC,SAChD1gD,EAAE6C,YAAYS,GACdw+C,EAAGj/C,YAAY7C,KAInBk6C,EAAYt9C,UAAUslD,mBAAqB,SAASjsC,GAChD,IACIpS,EAAKpE,SAASgD,cAAc,MAChCwT,EAAKpT,YAAYgB,GAEjB,IAAI5D,EAAIkJ,KAAK45C,aAAa,WAC1B9sC,EAAKpT,YAAY5C,GAEjBgW,EAAKpT,YAAYyT,EAAMhU,aAAa,eAChCuB,EAAKpE,SAASgD,cAAc,MAKhC,OAJAwT,EAAKpT,YAAYgB,GAEjBsF,KAAK65C,QAAS,GAAI/sC,GAAM,EAAM,UAAW,oBAElCA,GAIXikC,EAAYt9C,UAAUulD,oBAAsB,SAASH,GACjD,IAAI/rC,EAAOxW,SAASgD,cAAc,OAE9Bq/C,EAAKriD,SAASgD,cAAc,MAGhC,IAAK,IAAIlG,KAFTulD,EAAGp/C,aAAa,QAAQ,0BAER89C,EAAaK,OAAOD,SAC5BJ,EAAaK,OAAOD,SAAS/jD,eAAeN,IAC5C4M,KAAK25C,cAAc,WAAYtC,EAAaK,OAAOD,SAASrkD,GAAMylD,EAAM/rC,EAAM6rC,GAEtFE,EAAKn/C,YAAYi/C,GAEjB,IAAIx8C,EAAM6D,KAAKs5C,eAAejC,EAAaK,OAAOD,SAASrF,eAAe93C,OAAQwS,GAElF,OADA+rC,EAAKn/C,YAAYyC,GACV08C,GAIX9H,EAAYt9C,UAAUwlD,aAAe,SAASJ,GAC1C,IAAI/rC,EAAOxW,SAASgD,cAAc,OAE9Bq/C,EAAKriD,SAASgD,cAAc,MAGhC,IAAK,IAAIlG,KAFTulD,EAAGp/C,aAAa,QAAQ,0BAER89C,EAAaK,OAAO7F,OAC5BwF,EAAaK,OAAO7F,OAAOn+C,eAAeN,IAC1C4M,KAAK25C,cAAc,SAAUtC,EAAaK,OAAO7F,OAAOz+C,GAAMylD,EAAM/rC,EAAM6rC,GAGlFE,EAAKn/C,YAAYi/C,GACjB,IAAIx8C,EAAM6D,KAAKu5C,cAAclC,EAAaK,OAAO7F,OAAOa,UAAUp4C,OAAQwS,GAE1E,OADA+rC,EAAKn/C,YAAYyC,GACV08C,GAIX9H,EAAYt9C,UAAUylD,eAAiB,SAASL,GAC5C,IAAI/rC,EAAOxW,SAASgD,cAAc,OAE9Bq/C,EAAKriD,SAASgD,cAAc,MAGhC,IAAK,IAAIlG,KAFTulD,EAAGp/C,aAAa,QAAQ,0BAER89C,EAAaK,OAAOphD,SAC5B+gD,EAAaK,OAAOphD,SAAS5C,eAAeN,IAC5C4M,KAAK25C,cAAc,WAAYtC,EAAaK,OAAOphD,SAASlD,GAAMylD,EAAM/rC,EAAM6rC,GAGtFE,EAAKn/C,YAAYi/C,GACjB,IAAIx8C,EAAM6D,KAAKu5C,cAAclC,EAAaK,OAAOphD,SAASshD,aAAat9C,OAAQwS,GAE/E,OADA+rC,EAAKn/C,YAAYyC,GACV08C,GAIX9H,EAAYt9C,UAAU0lD,YAAe,SAASN,GAC1C,IAAI/rC,EAAOxW,SAASgD,cAAc,OAE9Bq/C,EAAKriD,SAASgD,cAAc,MAGhC,IAAK,IAAIlG,KAFTulD,EAAGp/C,aAAa,QAAQ,0BAER89C,EAAaK,OAAOj5C,MAC5B44C,EAAaK,OAAOj5C,MAAM/K,eAAeN,IACzC4M,KAAK25C,cAAc,QAAStC,EAAaK,OAAOj5C,MAAMrL,GAAMylD,EAAM/rC,EAAM6rC,GAGhFE,EAAKn/C,YAAYi/C,GACjB,IAAIx8C,EAAM6D,KAAKw5C,eAAenC,EAAaK,OAAOj5C,MAAMu5C,OAAO19C,OAAQwS,GAEvE,OADA+rC,EAAKn/C,YAAYyC,GACV08C,GAKX9H,EAAYt9C,UAAU6lD,eAAiB,SAAStmD,EAAM8Z,GAClD,IACIpS,EAAKpE,SAASgD,cAAc,MAChCwT,EAAKpT,YAAYgB,GAEjB,IAAI5D,EAAIkJ,KAAK45C,aAAa5mD,GAC1B8Z,EAAKpT,YAAY5C,GAEjBgW,EAAKpT,YAAYyT,EAAMhU,aAAa,eAChCuB,EAAKpE,SAASgD,cAAc,MAKhC,OAJAwT,EAAKpT,YAAYgB,GAEN,UAAR1H,EAAkBgN,KAAK65C,QAAS,KAAM/sC,GAAM,EAAO9Z,EAAM,4BACvDgN,KAAK65C,QAAS,KAAM/sC,GAAM,EAAM9Z,EAAM,4BACpC8Z,GAIXikC,EAAYt9C,UAAUqmD,cAAgB,WAEpC,IAAIC,EAAOzjD,SAASgD,cAAc,QAClCygD,EAAKxgD,aAAa,QAAS,uCAEvBygD,EAAK1jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,0BACzBwgD,EAAKrgD,YAAYsgD,GACjB,IAAIC,EAAW3jD,SAASgD,cAAc,SACtC2gD,EAAS1gD,aAAa,QAAS,0BAC/B0gD,EAAS1gD,aAAa,MAAO,cAC7B0gD,EAASxgD,UAAY,OACrBugD,EAAGtgD,YAAYugD,IACXC,EAAK5jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,qBACzBygD,EAAGtgD,YAAYwgD,GACf,IAQIF,EARAG,EAAQ7jD,SAASgD,cAAc,SACnC6gD,EAAM5gD,aAAa,OAAQ,QAC3B4gD,EAAM5gD,aAAa,KAAM,cACzB4gD,EAAM5gD,aAAa,QAAS,uBAC5B4gD,EAAM5gD,aAAa,cAAe,oBAC/ByG,KAAKtL,MAAKylD,EAAMrnD,MAAQkN,KAAKtL,KAChCwlD,EAAGxgD,YAAYygD,IAEXH,EAAK1jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,0BACzBwgD,EAAKrgD,YAAYsgD,GACjB,IAKIE,EALAE,EAAW9jD,SAASgD,cAAc,SACtC8gD,EAAS7gD,aAAa,QAAS,0BAC/B6gD,EAAS7gD,aAAa,MAAO,cAC7B6gD,EAAS3gD,UAAY,OACrBugD,EAAGtgD,YAAY0gD,IACXF,EAAK5jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,qBACzBygD,EAAGtgD,YAAYwgD,GACf,IAAI9mD,EAAMkD,SAASgD,cAAc,SACjClG,EAAImG,aAAa,OAAQ,QACzBnG,EAAImG,aAAa,KAAM,cACvBnG,EAAImG,aAAa,QAAS,6BAC1BnG,EAAImG,aAAa,cAAe,aAC7ByG,KAAKtL,MAAKtB,EAAIN,MAAQkN,KAAKtL,KAC9BwlD,EAAGxgD,YAAYtG,GAEf,IAAIwG,EAAStD,SAASgD,cAAc,UACpCM,EAAOL,aAAa,QAAS,sCAC7BK,EAAOL,aAAa,OAAQ,UAC5BK,EAAOH,UAAY,WACnB,IAMI4gD,EAAO/jD,SAASgD,cAAc,OAClCygD,EAAKrgD,YAAYE,GACjBmgD,EAAKrgD,YAAY2gD,GACjB,IAAI/qC,EAAOtP,KAWX,OAVApG,EAAO4G,iBAAiB,SAAS,WAC/B,IAEIgC,EAbU,WACd,IAAIA,EAAQ,GAGZ,OAFAA,EAAMtB,IAAMi5C,EAAMrnD,MAClB0P,EAAMpP,IAAMA,EAAIN,MACT0P,EASK83C,GACZhrC,EAAK2B,OAAOugC,QAAQhvC,EAAMtB,IAAKsB,EAAMpP,KACpCiI,MAAK,SAASd,GACbnD,EAAejD,YAAYyH,eAAey+C,GAC1BltC,EAAMnS,eAAeT,EAAU,UAAW8/C,EAAM/qC,EAAK/T,UAGlEw+C,GAIThJ,EAAYt9C,UAAUulD,oBAAsB,SAASH,GACnD,IAAI/rC,EAAOxW,SAASgD,cAAc,OAE9Bq/C,EAAKriD,SAASgD,cAAc,MAGhC,IAAK,IAAIlG,KAFTulD,EAAGp/C,aAAa,QAAQ,0BAER89C,EAAaK,OAAOD,SAC5BJ,EAAaK,OAAOD,SAAS/jD,eAAeN,IAC5C4M,KAAK25C,cAAc,WAAYtC,EAAaK,OAAOD,SAASrkD,GAAMylD,EAAM/rC,EAAM6rC,GAGtFE,EAAKn/C,YAAYi/C,GAEjB,IAAIx8C,EAAM6D,KAAKs5C,eAAejC,EAAaK,OAAOD,SAASrF,eAAe93C,OAAQwS,GAElF,OADA+rC,EAAKn/C,YAAYyC,GACV08C,GAKT9H,EAAYt9C,UAAU8lD,cAAgB,SAASj/C,EAAQwS,GACnD,IACIpS,EAAKpE,SAASgD,cAAc,MAChCwT,EAAKpT,YAAYgB,GAEjB,IAAI5D,EAAIkJ,KAAK45C,aAAat/C,GAC1BwS,EAAKpT,YAAY5C,GAEjBgW,EAAKpT,YAAYyT,EAAMhU,aAAa,eAChCuB,EAAKpE,SAASgD,cAAc,MAGhC,OAFAwT,EAAKpT,YAAYgB,GAEVJ,GACH,IAAK,YACD0F,KAAK65C,QAAS,SAAU/sC,GAAM,EAAMxS,EAAQ,4BAChD,MACA,IAAK,iBACD0F,KAAK65C,QAAS,iBAAkB/sC,GAAM,EAAMxS,EAAQ,4BACxD,MACA,IAAK,eACD0F,KAAK65C,QAAS,SAAU/sC,GAAM,EAAOxS,EAAQ,4BACjD,MACA,IAAK,eAGL,IAAK,iBACD0F,KAAK65C,QAAQ,WAAY/sC,GAAM,EAAMxS,EAAQ,iDACjD,MACA,IAAK,iBAGL,IAAK,iBACD0F,KAAK65C,QAAQ,WAAY/sC,GAAM,EAAOxS,EAAQ,iDAClD,MACA,QACImF,QAAQC,IAAI,4BAIrB,OAAOoN,GAIVikC,EAAYt9C,UAAU+lD,eAAiB,SAASl/C,EAAQwS,GACpD,IAAIpS,EAAKpE,SAASgD,cAAc,MAChCwT,EAAKpT,YAAYgB,GAEjB,IAAI5D,EAAIkJ,KAAK45C,aAAat/C,GAC1BwS,EAAKpT,YAAY5C,GAEjBgW,EAAKpT,YAAYyT,EAAMhU,aAAa,eAChCuB,EAAKpE,SAASgD,cAAc,MAGhC,OAFAwT,EAAKpT,YAAYgB,GACjBsF,KAAK65C,QAAS,QAAS/sC,GAAM,EAAOxS,EAAQ,4BACrCwS,GAuFXikC,EAAYt9C,UAAUomD,QAAU,SAASU,EAAQztC,EAAMhR,EAAMxB,EAAQkgD,GAEjE,IAAIC,EAAUnkD,SAASgD,cAAc,QACrCmhD,EAAQlhD,aAAa,QAAS,uCAC1BygD,EAAK1jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,0BACzBkhD,EAAQ/gD,YAAYsgD,GACpB,IAAIU,EAAWpkD,SAASgD,cAAc,SACtCohD,EAASnhD,aAAa,QAAS,0BAC/BmhD,EAASnhD,aAAa,MAAO,cAC7BmhD,EAASjhD,UAAY,OACrBugD,EAAGtgD,YAAYghD,IACXR,EAAK5jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,qBACzBygD,EAAGtgD,YAAYwgD,GACf,IAAIS,EAASrkD,SAASgD,cAAc,SAOpC,OANAqhD,EAAOphD,aAAa,OAAQ,QAC5BohD,EAAOphD,aAAa,KAAM,cAC1BohD,EAAOphD,aAAa,QAAS,6BAC7BohD,EAAOphD,aAAa,cAAeihD,GACnCN,EAAGxgD,YAAYihD,GAERJ,GACH,IAAK,kBACGP,EAAK1jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,0BACzBkhD,EAAQ/gD,YAAYsgD,GACpB,IAAIY,EAActkD,SAASgD,cAAc,SACzCshD,EAAYrhD,aAAa,QAAS,0BAClCqhD,EAAYrhD,aAAa,MAAO,cAChCqhD,EAAYnhD,UAAY,WACxBugD,EAAGtgD,YAAYkhD,IACXV,EAAK5jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,qBACzBygD,EAAGtgD,YAAYwgD,GACf,IAAIW,EAAYvkD,SAASgD,cAAc,SACvCuhD,EAAUthD,aAAa,OAAQ,QAC/BshD,EAAUthD,aAAa,KAAM,cAC7BshD,EAAUthD,aAAa,QAAS,6BAChCshD,EAAUthD,aAAa,cAAe,+BACtC2gD,EAAGxgD,YAAYmhD,IA6BnBb,EAAK1jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,0BACzBkhD,EAAQ/gD,YAAYsgD,GACpB,IAAII,EAAW9jD,SAASgD,cAAc,SACtC8gD,EAAS7gD,aAAa,QAAS,0BAC/B6gD,EAAS7gD,aAAa,MAAO,cAC7B6gD,EAAS3gD,UAAY,OACrBugD,EAAGtgD,YAAY0gD,IACXF,EAAK5jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,qBACzBygD,EAAGtgD,YAAYwgD,GACf,IAAIY,EAASxkD,SAASgD,cAAc,SAMpC,GALAwhD,EAAOvhD,aAAa,OAAQ,QAC5BuhD,EAAOvhD,aAAa,KAAM,cAC1BuhD,EAAOvhD,aAAa,QAAS,6BAC7BuhD,EAAOvhD,aAAa,cAAe,OACnC2gD,EAAGxgD,YAAYohD,IACXh/C,EAAK,CAEL,IAAIk+C,KAAK1jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,0BACzBkhD,EAAQ/gD,YAAYsgD,GACpB,IAMIE,EANAa,EAAWzkD,SAASgD,cAAc,SACtCyhD,EAASxhD,aAAa,QAAS,0BAC/BwhD,EAASxhD,aAAa,MAAO,cAChB,SAAVghD,IAAmBQ,EAASthD,UAAY,UAC3CshD,EAASthD,UAAY,YACrBugD,EAAGtgD,YAAYqhD,IACXb,EAAK5jD,SAASgD,cAAc,QAC7BC,aAAa,QAAS,qBACzBygD,EAAGtgD,YAAYwgD,GACf,IAAIc,EAAS1kD,SAASgD,cAAc,YACpC4gD,EAAGxgD,YAAYshD,GACfA,EAAOzhD,aAAa,QAAS,mCAC7B4T,EAAMtR,cAAcmE,KAAKzE,GAAIy/C,EAAQ,UAAW,cAEpDluC,EAAKpT,YAAY+gD,GAEjB,IAAIze,EAAK,GACTA,EAAI96B,IAAMy5C,EACV3e,EAAI5oC,IAAM0nD,EACG,kBAAVP,IAA4Bve,EAAIif,OAASJ,GAExC/+C,IAAMkgC,EAAIzpB,IAAMyoC,GACpB,IAAIjB,EAAO/5C,KAAKk7C,iBAAiB5gD,EAAQ0hC,GACzClvB,EAAKpT,YAAYqgD,IAKrBhJ,EAAYt9C,UAAU0nD,WAAa,SAAS7gD,EAAQkI,GAElD,IAAIu3C,EAAOzjD,SAASgD,cAAc,QAClCygD,EAAKxgD,aAAa,QAAS,sCAE3B,IAAIK,EAAStD,SAASgD,cAAc,UACpCM,EAAOL,aAAa,QAAS,sCAC7BK,EAAOL,aAAa,OAAQ,UAC5BK,EAAOH,UAAY,WACnBsgD,EAAKrgD,YAAYE,GACjB,IAAIygD,EAAO/jD,SAASgD,cAAc,OAClCygD,EAAKrgD,YAAY2gD,GACjB,IAAI/qC,EAAOtP,KACX,OAAO1F,GACL,IAAK,YACHV,EAAO4G,iBAAiB,SAAS,WAC/B,IAAI2Q,EAAO,GACXA,EAAK,qBAAuB3O,EAAM44C,IAAItoD,MACtCqe,EAAK,qBAAuB,kBAC5B,IAAIkqC,EAAS74C,EAAMtB,IAAIpO,MAEvBwc,EAAK2B,OAAOyhC,UAAU2I,EAAQlqC,GAC7B9V,MAAK,SAASd,GACbnD,EAAejD,YAAYyH,eAAey+C,GAC1BltC,EAAMnS,eAAeT,EAAU,YAAa8/C,EAAM/qC,EAAK/T,UAG7E,MACA,IAAK,eACH3B,EAAO4G,iBAAiB,SAAS,WAC/B,IAAI86C,EAAat7C,KACjBmR,KAAO,GACPA,KAAK,qBAAuB3O,EAAM44C,IAAItoD,MACtCqe,KAAK,qBAAuB,kBAC5B,IAAIkqC,EAAS74C,EAAMtB,IAAIpO,MACvBwc,EAAK2B,OAAOwY,iBAAiBqC,gBAAiB,EAC9Cxc,EAAK2B,OAAO0hC,aAAa0I,EAAQ74C,EAAM+P,IAAIzf,MAAOqe,MACjD9V,MAAK,SAASd,GACb,IAAIghD,EAASjlD,SAASgD,cAAc,YACpCiiD,EAAOhiD,aAAa,YAAY,GAChCgiD,EAAO9hD,UAAYc,EACJ+gD,EAAW5yC,WACjBhP,YAAY6hD,GACrBpuC,EAAMtR,cAAcmE,KAAKzE,GAAIigD,MAAO,SAAU,gBAGpD,MACA,IAAK,eACH5hD,EAAO4G,iBAAiB,SAAS,WACjC,IAAIi7C,EAAQj5C,EAAM1P,MAEdqe,EAAO,CACXA,OAAc,UACd7B,EAAK2B,OAAOO,YAAYiqC,EAAOtqC,GAC9B9V,MAAK,SAASd,GACbnD,EAAejD,YAAYyH,eAAey+C,GAC1BltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAGtE,MACA,IAAK,iBACH3B,EAAO4G,iBAAiB,SAAS,WACjC,IAAIi7C,EAAQj5C,EAAM1P,MAGlBwc,EAAK2B,OAAO8mC,eAAe0D,EADhB,IAEVpgD,MAAK,SAASd,GACbnD,EAAejD,YAAYyH,eAAey+C,GAC1BltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAGtE,MACA,IAAK,iBACH3B,EAAO4G,iBAAiB,SAAS,WAC/B,IAAIi7C,EAAQj5C,EAAMk5C,aAAa5oD,MAC3B6lB,EAAUnW,EAAMm5C,WAAWC,WAE/BzqC,KAAO,GACP7B,EAAK2B,OAAO4mC,eAAe4D,EAAO9iC,EAASxH,MAC1C9V,MAAK,SAASd,GACbnD,EAAejD,YAAYyH,eAAey+C,GAC1BltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAGxE,MACA,IAAK,iBACH3B,EAAO4G,iBAAiB,SAAS,WAC/B,IAAIi7C,EAAQj5C,EAAMk5C,aAAa5oD,MAC3B6lB,EAAUnW,EAAMm5C,WAAWC,WAE/BzqC,KAAO,GACPA,KAAKxY,SAAW,UAChBwY,KAAKzY,OAAS,OACd4W,EAAK2B,OAAO6mC,eAAe2D,EAAO9iC,EAASxH,MAC1C9V,MAAK,SAASd,GACbnD,EAAejD,YAAYyH,eAAey+C,GAC1BltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAM1E,IAAIb,EAAKpE,SAASgD,cAAc,MAChCygD,EAAKrgD,YAAYgB,GACbA,EAAKpE,SAASgD,cAAc,MAGhC,OAFAygD,EAAKrgD,YAAYgB,GAEVq/C,GAKThJ,EAAYt9C,UAAUynD,iBAAmB,SAAS5gD,EAAQkI,GAEtD,IAAIu3C,EAAOzjD,SAASgD,cAAc,QAClCygD,EAAKxgD,aAAa,QAAS,sCAC3B,IAAIK,EAAStD,SAASgD,cAAc,UACpCM,EAAOL,aAAa,QAAS,sCAC7BK,EAAOL,aAAa,OAAQ,UAC5BK,EAAOH,UAAY,WACnBsgD,EAAKrgD,YAAYE,GACjB,IAAIygD,EAAO/jD,SAASgD,cAAc,OAClCygD,EAAKrgD,YAAY2gD,GACjB,IAAI/qC,EAAOtP,KACX,OAAO1F,GACH,IAAK,UACDV,EAAO4G,iBAAiB,SAAS,WAC7B8O,EAAK2B,OAAOugC,QAAQhvC,EAAMtB,IAAIpO,MAAO0P,EAAMpP,IAAIN,OAC9CuI,MAAK,SAASd,GACdnD,EAAejD,YAAYyH,eAAey+C,GACvBltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAG9E,MACA,IAAK,SACD3B,EAAO4G,iBAAiB,SAAS,SAASu5C,GACxCzqC,EAAK2B,OAAOmhC,eAAe5vC,EAAMtB,IAAIpO,MAAO8H,KAAKsT,MAAM1L,EAAM+P,IAAIzf,OAAQ0P,EAAMpP,IAAIN,OAClFuI,MAAK,SAASd,GACdnD,EAAejD,YAAYyH,eAAey+C,GACvBltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAG5E,MACA,IAAK,SACD3B,EAAO4G,iBAAiB,SAAS,WAE/B8O,EAAK2B,OAAO+hC,eAAexwC,EAAMtB,IAAIpO,MAAO0P,EAAMpP,IAAIN,OACrDuI,MAAK,SAASd,GACdnD,EAAejD,YAAYyH,eAAey+C,GACvBltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAG5E,MACA,IAAK,YACD3B,EAAO4G,iBAAiB,SAAS,WAC7B,IAAI2Q,EAAO,CACXA,oBAA4B,mBAC5BA,EAAK,qBAAuB3O,EAAMpP,IAAIN,MACtC,IAAIuoD,EAAS74C,EAAMtB,IAAIpO,MACvBwc,EAAK2B,OAAOyhC,UAAU2I,EAAQlqC,GAC7B9V,MAAK,SAASd,GACdnD,EAAejD,YAAYyH,eAAey+C,GACvBltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAG9E,MACA,IAAK,eACD3B,EAAO4G,iBAAiB,SAAS,WAC7B2Q,KAAO,GACPA,KAAK,qBAAuB,kBAC5BA,KAAK,qBAAuB3O,EAAMpP,IAAIN,MACxB0P,EAAM+P,IAAIzf,MAAxB,IACIuoD,EAAS74C,EAAMtB,IAAIpO,MACvBwc,EAAK2B,OAAOwY,iBAAiBqC,gBAAiB,EAC9Cxc,EAAK2B,OAAO0hC,aAAa0I,EAAQ74C,EAAM+P,IAAIzf,MAAOqe,MAEjD9V,MAAK,SAASd,GACdnD,EAAejD,YAAYyH,eAAey+C,GACvBltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAG9E,MACA,IAAK,iBACD3B,EAAO4G,iBAAiB,SAAS,SAASu5C,GACzBv3C,EAAMtB,IAAIpO,MACvBqe,KAAO,GACPA,KAAK6gC,UAAW,EAChB1iC,EAAK2B,OAAOW,cAAcpP,EAAMtB,IAAKtG,KAAKsT,MAAM1L,EAAMy4C,OAAOnoD,OAAQqe,MACpE9V,MAAK,SAASd,GACX,IAAIF,EAAWihD,WAAW5yC,WACVyE,EAAMnS,eAAeT,EAAUD,EAAQD,EAAUiV,EAAK/T,UAGlF,MACA,IAAK,eACH3B,EAAO4G,iBAAiB,SAAS,WAC7B,IAAIi7C,EAAQj5C,EAAMtB,IAAIpO,MAClBqe,EAAO,CACXA,oBAA4B,UAC5BA,EAAK,qBAAuB3O,EAAMpP,IAAIN,MACtCwc,EAAK2B,OAAOO,YAAYiqC,EAAOtqC,GAC9B9V,MAAK,SAASd,GACZnD,EAAejD,YAAYyH,eAAey+C,GACvBltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAG9E,MACA,IAAK,iBACH3B,EAAO4G,iBAAiB,SAAS,WAC7B,IAAIi7C,EAAQj5C,EAAMtB,IAAIpO,MAClBqe,EAAO,GACXA,EAAK/d,IAAMoP,EAAMpP,IAAIN,MACrBwc,EAAK2B,OAAO8mC,eAAe0D,EAAOtqC,GACjC9V,MAAK,SAASd,GACdnD,EAAejD,YAAYyH,eAAey+C,GACvBltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAG5E,MACA,IAAK,iBACH3B,EAAO4G,iBAAiB,SAAS,WAC7B,IAAIi7C,EAAQj5C,EAAMtB,IAAIpO,MAClB6lB,EAAUnW,EAAM+P,IAAIzf,MACxBqe,KAAO,GACPA,KAAK,qBAAuB,SAC5BA,KAAK,qBAAuB3O,EAAMpP,IAAIN,MACtCwc,EAAK2B,OAAO4mC,eAAe4D,EAAO7gD,KAAKsT,MAAMyK,GAAUxH,MACtD9V,MAAK,SAASd,GACbnD,EAAejD,YAAYyH,eAAey+C,GACvBltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAG7E,MACA,IAAK,iBACH3B,EAAO4G,iBAAiB,SAAS,WAC/B,IAAIi7C,EAAQj5C,EAAMtB,IAAIpO,MAClB6lB,EAAUnW,EAAM+P,IAAIzf,MAExBqe,KAAO,GACPA,KAAK,qBAAuB,SAC5BA,KAAK,qBAAuB3O,EAAMpP,IAAIN,MACtCwc,EAAK2B,OAAO6mC,eAAe2D,EAAO7gD,KAAKsT,MAAMyK,GAAUxH,MACtD9V,MAAK,SAASd,GACdnD,EAAejD,YAAYyH,eAAey+C,GACvBltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAG1E,MACA,IAAK,SACD3B,EAAO4G,iBAAiB,SAAS,WAC7B,IAAI2Q,EAAO,GACXA,EAAK/d,IAAMoP,EAAMpP,IAAIN,MACrB,IAAIyf,EAAM3X,KAAKsT,MAAM1L,EAAM+P,IAAIzf,OAC/Bwc,EAAK2B,OAAO+mC,OAAOx1C,EAAMtB,IAAIpO,MAAOyf,EAAKpB,GACxC9V,MAAK,SAASd,GACdnD,EAAejD,YAAYyH,eAAey+C,GACvBltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAG9E,MACA,IAAK,SACD3B,EAAO4G,iBAAiB,SAAS,WAC/B,IAAI2Q,EAAO,GACXA,EAAK/d,IAAMoP,EAAMpP,IAAIN,MACrB,IAAIyf,EAAM3X,KAAKsT,MAAM1L,EAAM+P,IAAIzf,OAC/Bwc,EAAK2B,OAAO4iB,OAAOrxB,EAAMtB,IAAIpO,MAAOyf,EAAKpB,GACxC9V,MAAK,SAASd,GACdnD,EAAejD,YAAYyH,eAAey+C,GACvBltC,EAAMnS,eAAeT,EAAUD,EAAQ+/C,EAAM/qC,EAAK/T,UAG5E,MACA,QACIkE,QAAQC,IAAI,8BAGpB,IAAIhF,EAAKpE,SAASgD,cAAc,MAChCygD,EAAKrgD,YAAYgB,GACbA,EAAKpE,SAASgD,cAAc,MAEhC,OADAygD,EAAKrgD,YAAYgB,GACVq/C,GAIXhJ,EAAYt9C,UAAUmmD,aAAe,SAASt/C,GAC1C,IAAI4V,EAAM5Z,SAASgD,cAAc,OAE7BuiD,EAAKvlD,SAASgD,cAAc,UAChCuiD,EAAGniD,YAAYpD,SAASuD,eAAe,gCACvCgiD,EAAGtiD,aAAa,QAAS,wBACzB+iC,GAAKhmC,SAASgD,cAAc,KAC5BgjC,GAAG/iC,aAAa,QAAS,8CACzBsiD,EAAGniD,YAAY4iC,IACfpsB,EAAIxW,YAAYmiD,GAChB,IAAInhD,EAAKpE,SAASgD,cAAc,MAChC4W,EAAIxW,YAAYgB,GAChB,IAAImc,EAAKvgB,SAASgD,cAAc,OAChCud,EAAGtd,aAAa,QAAS,wCACzB,IAAIuiD,EAAM3uC,EAAMrV,qBAAqBwC,GACjCH,EAAM7D,SAASuD,eAAeiiD,EAAI7jD,MAClC6C,EAAMxE,SAASgD,cAAc,OACjCwB,EAAIvB,aAAa,QAAS,8BAC1BuB,EAAIpB,YAAYS,GACZA,EAAO7D,SAASuD,eAAeiiD,EAAI5jD,OACvC4C,EAAIpB,YAAYS,GACZO,EAAKpE,SAASgD,cAAc,MAChCwB,EAAIpB,YAAYgB,GACZA,EAAKpE,SAASgD,cAAc,MAChCwB,EAAIpB,YAAYgB,GACZP,EAAM7D,SAASuD,eAAeiiD,EAAItlD,QACtCsE,EAAIpB,YAAYS,GAChB0c,EAAGnd,YAAYoB,GACfoV,EAAIxW,YAAYmd,GACZnc,EAAKpE,SAASgD,cAAc,MAKhC,OAJA4W,EAAIxW,YAAYgB,GAChBmhD,EAAGr7C,iBAAiB,SAAS,WACzB2M,EAAMhQ,eAAem/B,GAAIzlB,MAEtB3G,GAUXte,EAAOD,QAAQo/C,G,gBCviCf,MAAMvnB,EAAQ11B,EAAQ,GAChBioD,EAAkBjoD,EAAQ,IAC1BI,EAAeJ,EAAQ,GACvBC,EAAyBD,EAAQ,IACjCE,EAAmBF,EAAQ,IAC3BqZ,EAAQrZ,EAAQ;;;;;;AAWtB,SAASD,EAAW2xB,GAEnB,MAAMpyB,EAAMoyB,EAASA,EAAOpyB,SAAM2a,EAClC/N,KAAKi4C,WAAY,EACjBj4C,KAAKk4C,sBAAuB,EAC5Bl4C,KAAKypB,iBAAmB,IAAIz1B,EAAiBwxB,GAC7CxlB,KAAK0pB,WAAa,IAAI31B,EAAuBiM,KAAKypB,iBAAkBr2B,GAGrES,EAAW21B,MAAQA,EAiBnB31B,EAAWJ,UAAU+9C,QAAU,SAAU1nB,EAAM12B,GAC9C,GAAI02B,IAAS9pB,KAAKypB,iBAAiBkC,UAAU7B,GAC5C,OAAO7C,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqBkZ,EAAMN,EAAM9R,WAG7D,MAAMmS,EAAY7pB,KAAKypB,iBAAiBI,YACpCz2B,GACH4M,KAAK0pB,WAAWC,aAAaE,EAAWz2B,GAGzC4M,KAAKypB,iBAAiB9Y,QAAS,EAC/B,MAAMrB,EAAOtP,KACb,OAAOA,KAAKi8C,SAASpyB,EAAWL,EAAM9R,SAASrc,KAAMd,IACpD+U,EAAKma,iBAAiB9Y,OAASkZ,EAC/Bva,EAAKoa,WAAWK,cAAcF,EAAWtvB,GAClCA,KAyBT1G,EAAWJ,UAAU2+C,eAAiB,SAAU8J,EAAOzjD,EAASrF,GAC/D,GAAI8oD,IAAUl8C,KAAKypB,iBAAiBmC,MAAMswB,GACzC,OAAOj1B,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqBsrC,EAAO,qBAGxD,GACCzjD,GACKA,EAAQ,SACPuH,KAAKypB,iBAAiBmC,MAAMnzB,EAAQ,OAAQA,EAAQ,aAE1D,OAAOwuB,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqBnY,EAAQ,OAAQ,qBAGjEA,EAAUuH,KAAKm8C,8BAA8B1jD,EAASuH,KAAKypB,iBAAiByC,SAE5E,MAAM/a,EAAO,GACT/d,IACH+d,EAAK/d,IAAMA,GAEZ,MAAMmf,EAAMvS,KAAKo8C,qBAAqB3jD,EAAS0Y,GAC/C,OAAOnR,KAAKi8C,SAASj8C,KAAKypB,iBAAiByC,MAAM,UAAW1C,EAAMrR,gBAAiB5F,IAWpF1e,EAAWJ,UAAUu/C,eAAiB,SAAUkJ,EAAO9oD,GACtD,GAAI8oD,IAAUl8C,KAAKypB,iBAAiBmC,MAAMswB,GACzC,OAAOj1B,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqBsrC,EAAO,qBAGxD,MAAM/qC,EAAO,GAET/d,IACH+d,EAAK/d,IAAMA,GAGZ,MAAMkc,EAAOtP,KACb,OAAOA,KAAKi8C,SAAU,GAAEj8C,KAAKypB,iBAAiByC,UAAW1C,EAAMvR,gBAAiB9G,GAAM9V,KACpFd,IACA+U,EAAKoa,WAAW6B,WACThxB,KAeV1G,EAAWJ,UAAUi/C,UAAY,SAAU2I,EAAQlqC,GAClD,OAAIkqC,IAAWr7C,KAAKypB,iBAAiBmD,aAAayuB,GAC1Cp0B,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqByqC,EAAQ,gBAIlDr7C,KAAKi8C,SAASj8C,KAAKypB,iBAAiBwC,YAAazC,EAAM7R,WAAYxG,IAe3Etd,EAAWJ,UAAUk/C,aAAe,SAAU0I,EAAQ9oC,EAAKpB,GAC1D,OAAIkqC,IAAWr7C,KAAKypB,iBAAiBmD,aAAayuB,GAC1Cp0B,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqByqC,EAAQ,oBAGzD9oC,EAAMvS,KAAKo8C,qBAAqB7pC,EAAKpB,GAC9BnR,KAAKi8C,SAASj8C,KAAKypB,iBAAiBwC,YAAa,gBAAiB1Z,KAc1E1e,EAAWJ,UAAUokD,eAAiB,SAAUwE,EAAQ9pC,EAAKpB,GAC5D,OAAIkrC,IAAWr8C,KAAKypB,iBAAiBoC,YAAYwwB,GACzCp1B,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqByrC,EAAQ,qBAGxD9pC,GACKA,EAAI,SACHvS,KAAKypB,iBAAiBoC,YAAYtZ,EAAI,OAAQA,EAAI,aAEjD0U,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqB2B,EAAI,OAAQ,sBAG7DA,EAAMvS,KAAKo8C,qBACVp8C,KAAKm8C,8BAA8B5pC,EAAKvS,KAAKypB,iBAAiB4C,UAC9Dlb,GAEMnR,KAAKi8C,SAASj8C,KAAKypB,iBAAiB4C,SAAU,kBAAmB9Z,KAazE1e,EAAWJ,UAAU+d,YAAc,SAAU6qC,EAAQlrC,GACpD,OAAIkrC,GAAYr8C,KAAKypB,iBAAiBoC,YAAYwwB,IAAYr8C,KAAKypB,iBAAiBiC,MAK7E1rB,KAAKi8C,SAASj8C,KAAKypB,iBAAiB4C,SAAU,eAAgBlb,GAJ7D8V,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqByrC,EAAQ,mBAgB1DxoD,EAAWJ,UAAUqkD,eAAiB,SAAUuE,EAAQ9pC,EAAKpB,GAC5D,OAAIkrC,IAAWr8C,KAAKypB,iBAAiBoC,YAAYwwB,GACzCp1B,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqByrC,EAAQ,qBAGrD9pC,GAAOA,EAAI,SACRvS,KAAKypB,iBAAiBoC,YAAYtZ,EAAI,OAAQA,EAAI,aAEjD0U,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqB2B,EAAI,OAAQ,sBAG7DA,EAAMvS,KAAKo8C,qBACVp8C,KAAKm8C,8BAA8B5pC,EAAKvS,KAAKypB,iBAAiB4C,UAC9Dlb,GAEMnR,KAAKi8C,SAASj8C,KAAKypB,iBAAiB4C,SAAU,kBAAmB9Z,KAYzE1e,EAAWJ,UAAUskD,eAAiB,SAAUsE,EAAQlrC,GACvD,OAAIkrC,GAAYr8C,KAAKypB,iBAAiBoC,YAAYwwB,IAAYr8C,KAAKypB,iBAAiBiC,MAK7E1rB,KAAKi8C,SAASj8C,KAAKypB,iBAAiB4C,SAAU,kBAAmBlb,GAJhE8V,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqByrC,EAAQ,sBAc1DxoD,EAAWJ,UAAUukD,OAAS,SAAUsE,EAAMxjD,EAAMqY,GACnD,GAAImrC,IAASt8C,KAAKypB,iBAAiBsD,YAAYuvB,GAC9C,OAAOr1B,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqB0rC,EAAM,YAGvD,IAAIz8C,EAAI,CAAE,iBAAkBjF,KAAKC,UAAU/B,IAE3C,OADA+G,EAAIG,KAAKu8C,iBAAiB18C,EAAGsR,GACtBnR,KAAKi8C,SAASj8C,KAAKypB,iBAAiB0C,WAAY3C,EAAMzR,YAAalY,IAY3EhM,EAAWJ,UAAUogC,OAAS,SAAUyoB,EAAMxjD,EAAMqY,GACnD,OAAImrC,IAASt8C,KAAKypB,iBAAiBsD,YAAYuvB,GACvCr1B,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqB0rC,EAAM,aAGvDxjD,EAAOkH,KAAKu8C,iBAAiBzjD,EAAMqY,GAC5BnR,KAAKi8C,SAASj8C,KAAKypB,iBAAiB0C,WAAY,cAAerzB,KAYvEjF,EAAWJ,UAAUme,cAAgB,SAAU4qC,EAAOp1C,EAAK+J,GAC1D,OAAIqrC,IAAUx8C,KAAKypB,iBAAiBwD,iBAAiBuvB,GAC7Cv1B,QAAQE,OACd,IAAI60B,SAAS9nD,EAAa0c,qBAAqB4rC,EAAO,sBAGnDrrC,IAAMA,EAAO,IAClBA,EAAK,kBAAoB/J,EAClBpH,KAAKi8C,SAASj8C,KAAKypB,iBAAiB2C,WAAY,cAAejb,KAMvEtd,EAAWJ,UAAU8oD,iBAAmB,SAAUzjD,EAAMqY,GAIvD,OAHIA,GAAQA,EAAK/d,MAChB0F,EAAK1F,IAAM+d,EAAK/d,KAEV0F,GAGRjF,EAAWJ,UAAU2oD,qBAAuB,SAAU7pC,EAAKpB,GAC1D,MAAMsrC,EAAO,GAoBb,OAnBAA,EAAK,YAAclqC,EAAI,YACnBkqC,EAAK,aAAelqC,EAAI,SAC3BkqC,EAAK,YAAYC,EAAK,GAAEnqC,EAAI,WAEzBpB,GAAQA,EAAK,sBAAsD,oBAA9BA,EAAK,sBAC7CsrC,EAAK,mBAAqBlqC,EAC1BkqC,EAAK,mBAAqBz8C,KAAKypB,iBAAiBwC,mBACzCwwB,EAAK,mBAAmB,cAE/BA,EAAK,qBAAuBlqC,SACrBkqC,EAAK,qBAAqB,aAElCA,EAAK,SAAW,qBACZtrC,GAAQA,EAAK,uBAChBsrC,EAAK,qBAAuBtrC,EAAK,sBAE9BA,GAAQA,EAAK/d,MAChBqpD,EAAK,qBAAuBtrC,EAAK/d,KAE3BqpD,GAGR5oD,EAAWJ,UAAUkpD,gBAAkB,SAAUhkC,EAASzX,GAUzD,MATuB,iBAAZyX,IAAqBA,EAAU,IACtCA,EAAQvlB,KACXulB,EAAQ,qBAAuBA,EAAQvlB,WAChCulB,EAAQvlB,KACL4M,KAAK0pB,WAAWE,eAC1BjR,EAAQ,qBAAuB3Y,KAAK0pB,WAAWE,eACrC5pB,KAAK0pB,WAAWE,aAAa1oB,KACvCyX,EAAQ,qBAAuB3Y,KAAK0pB,WAAWE,aAAa1oB,IAEtDyX,GAGR9kB,EAAWJ,UAAU0oD,8BAAgC,SAAU5pC,EAAK2pC,GAEnE,OADA3pC,EAAI,OAAS2pC,EACN3pC,GAGR1e,EAAWJ,UAAUwoD,SAAW,SAAU/6C,EAAK5G,EAAQqe,GAItD,OAHI3Y,KAAKypB,iBAAiBuC,eACzBrT,EAAU3Y,KAAK28C,gBAAgBhkC,EAASzX,IAErClB,KAAKi4C,UACDj4C,KAAK48C,cAAc17C,EAAK5G,EAAQqe,GAEjCojC,EAAgB76C,EAAK5G,EAAQqe,IAIrC9kB,EAAWJ,UAAUmpD,cAAgB,SAAU17C,EAAK5G,EAAQqe,GAC3D,MAAMzI,EAAM,CAEX2sC,SAAU,SACVC,SAAU,UAEX,IAAIC,EAAO,GASX,OARI/8C,KAAKypB,iBAAiB6C,qBACzBpc,EAAI8sC,YAAc,WAEfrkC,GAAWA,EAAQ,uBACtBokC,EAAO,CAAEr1B,cAAgB,SAAQC,KAAM,IAAGhP,EAAQ,kCAC1CA,EAAQ,sBAGTre,GACR,KAAKkvB,EAAMvR,gBACX,KAAKuR,EAAMtR,gBACN3lB,OAAOoW,KAAKgQ,GAAS3jB,OAAS,IAAGkM,GAAQ,IAAGiM,EAAMuL,iBAAiBC,MACvEzI,EAAIG,OAAS,SACbH,EAAI+sC,MAAQ,WACZ,MACD,KAAKzzB,EAAMrR,gBACX,KAAKqR,EAAM5R,cACX,KAAK4R,EAAMpR,gBACX,KAAKoR,EAAM3R,gBACX,KAAK2R,EAAMnR,YACVnI,EAAIG,OAAS,OACbH,EAAI+sC,MAAQ,WACZF,EAAK,gBAAkB,mBACvB7sC,EAAIpD,KAAOlS,KAAKC,UAAU8d,GAC1B,MACD,KAAK6Q,EAAM7R,WACX,KAAK6R,EAAM9R,QACX,KAAK8R,EAAM1R,YACX,KAAK0R,EAAMzR,YACX,KAAKyR,EAAMxR,aACX,QACC9H,EAAIG,OAAS,MACT9d,OAAOoW,KAAKgQ,GAAS3jB,OAAS,IAAGkM,GAAQ,IAAGiM,EAAMuL,iBAAiBC,MAExE,MAAMrJ,EAAOtP,KAIb,OAHIzN,OAAOoW,KAAKo0C,GAAM/nD,OAAS,IAC9Bkb,EAAIhV,QAAU,IAAIgiD,QAAQH,IAEpBI,MAAMj8C,EAAKgP,GAAK7U,KAAMd,GACxB+U,EAAK4oC,qBAA6B39C,EAClCA,EAAS6iD,GACL7iD,EAASa,QAEjBkU,EAAKlB,MAAQkB,EAAKuB,cAActW,GACzB0sB,QAAQE,OAAO,IAAI9R,MAAM/F,EAAKiB,mBAAmBrP,EAAKgP,EAAKZ,EAAKlB,YAIzExc,EAAOD,QAAUkC,G,iBCvcjB,kBAAMwpD,EAAQvpD,EAAQ,IAChBqZ,EAAQrZ,EAAQ,IAChB01B,EAAQ11B,EAAQ,GAChBI,EAAeJ,EAAQ,GAQ7B,SAASwpD,EAAmBrmD,GAC3B,IACC,OAAO0wB,KAAK1wB,GACX,MAAOkZ,GAER,OAAOotC,EAAOC,KAAKvmD,GAAKzC,SAAS,WAiEnC5C,EAAOD,QA7DP,SAAyBuP,EAAK5G,EAAQqe,GAKrC,MAAMtgB,EAAU,CACfrF,KAAM,OACN6pD,SAAU,SACVC,SAAU,UASX,OALInkC,GAAWA,EAAQ,uBACtBtgB,EAAQ6C,QAAU,CAAEwsB,cAAgB,SAAQ41B,EAAoB,IAAG3kC,EAAQ,kCACnEA,EAAQ,sBAGTre,GACR,KAAKkvB,EAAMvR,gBACX,KAAKuR,EAAMtR,gBACV,GAAIS,EAAS,CACZ,MAAMvO,EAAM+C,EAAMuL,iBAAiBC,GAC/BvO,IAAKlJ,GAAQ,IAAGkJ,KAErB,OAAOizC,EAAMI,OAAOv8C,EAAK7I,GACvBgD,KAAKd,GAAYA,EAASI,MAC1B+iD,MAAOvtC,IACP,MAAM,IAAIkF,MAAMnhB,EAAaqc,mBAAmBrP,EAAK7I,EAAS8X,MAEjE,KAAKqZ,EAAMrR,gBACX,KAAKqR,EAAM5R,cACX,KAAK4R,EAAMpR,gBACX,KAAKoR,EAAM3R,gBACX,KAAK2R,EAAMnR,YAGV,OAFAhgB,EAAQ6C,QAAU7C,EAAQ6C,QAAU7C,EAAQ6C,QAAU,GACtD7C,EAAQ6C,QAAQ,gBAAkB,mBAC3BmiD,EAAMM,KAAKz8C,EAAKtG,KAAKC,UAAU8d,GAAUtgB,GAC9CgD,KAAKd,GAAYA,EAASI,MAC1B+iD,MAAOvtC,IACP,MAAMlQ,EAAI,IAAIoV,MAAMnhB,EAAaqc,mBAAmBrP,EAAK7I,EAAS8X,IAElE,MADIA,EAAI5V,UAAY4V,EAAI5V,SAASI,OAAMsF,EAAEtF,KAAOwV,EAAI5V,SAASI,MACvDsF,IAET,KAAKupB,EAAM7R,WACX,KAAK6R,EAAM9R,QACX,KAAK8R,EAAM1R,YACX,KAAK0R,EAAMzR,YACX,KAAKyR,EAAMxR,aACX,QACC,GAAIW,EAAS,CACZ,MAAMvO,EAAM+C,EAAMuL,iBAAiBC,GAC/BvO,IAAKlJ,GAAQ,IAAGkJ,KAErB,OAAOizC,EAAM3qD,IAAIwO,EAAK7I,GACpBgD,KAAMd,GAAYA,EAASI,MAC3B+iD,MAAOvtC,IACP,MAAM,IAAIkF,MAAMnhB,EAAaqc,mBAAmBrP,EAAK7I,EAAS8X,U,uDC5ElE;;;;;;;AAUA,IAAIytC,EAAS,EAAQ,IACjBC,EAAU,EAAQ,IAClBppD,EAAU,EAAQ,IAmDtB,SAASqpD,IACP,OAAOP,EAAOQ,oBACV,WACA,WAGN,SAASC,EAAcC,EAAMjpD,GAC3B,GAAI8oD,IAAe9oD,EACjB,MAAM,IAAIkpD,WAAW,8BAcvB,OAZIX,EAAOQ,qBAETE,EAAO,IAAIE,WAAWnpD,IACjBopD,UAAYb,EAAO9pD,WAGX,OAATwqD,IACFA,EAAO,IAAIV,EAAOvoD,IAEpBipD,EAAKjpD,OAASA,GAGTipD,EAaT,SAASV,EAAQc,EAAKC,EAAkBtpD,GACtC,KAAKuoD,EAAOQ,qBAAyB/9C,gBAAgBu9C,GACnD,OAAO,IAAIA,EAAOc,EAAKC,EAAkBtpD,GAI3C,GAAmB,iBAARqpD,EAAkB,CAC3B,GAAgC,iBAArBC,EACT,MAAM,IAAIjpC,MACR,qEAGJ,OAAOkpC,EAAYv+C,KAAMq+C,GAE3B,OAAOb,EAAKx9C,KAAMq+C,EAAKC,EAAkBtpD,GAW3C,SAASwoD,EAAMS,EAAMnrD,EAAOwrD,EAAkBtpD,GAC5C,GAAqB,iBAAVlC,EACT,MAAM,IAAI0rD,UAAU,yCAGtB,MAA2B,oBAAhBnpD,aAA+BvC,aAAiBuC,YA6H7D,SAA0B4oD,EAAMjY,EAAOyY,EAAYzpD,GAGjD,GAFAgxC,EAAM0Y,WAEFD,EAAa,GAAKzY,EAAM0Y,WAAaD,EACvC,MAAM,IAAIP,WAAW,6BAGvB,GAAIlY,EAAM0Y,WAAaD,GAAczpD,GAAU,GAC7C,MAAM,IAAIkpD,WAAW,6BAIrBlY,OADiBj4B,IAAf0wC,QAAuC1wC,IAAX/Y,EACtB,IAAImpD,WAAWnY,QACHj4B,IAAX/Y,EACD,IAAImpD,WAAWnY,EAAOyY,GAEtB,IAAIN,WAAWnY,EAAOyY,EAAYzpD,GAGxCuoD,EAAOQ,qBAETE,EAAOjY,GACFoY,UAAYb,EAAO9pD,UAGxBwqD,EAAOU,EAAcV,EAAMjY,GAE7B,OAAOiY,EAvJEW,CAAgBX,EAAMnrD,EAAOwrD,EAAkBtpD,GAGnC,iBAAVlC,EAwFb,SAAqBmrD,EAAMY,EAAQC,GACT,iBAAbA,GAAsC,KAAbA,IAClCA,EAAW,QAGb,IAAKvB,EAAOwB,WAAWD,GACrB,MAAM,IAAIN,UAAU,8CAGtB,IAAIxpD,EAAwC,EAA/B0pD,EAAWG,EAAQC,GAG5BE,GAFJf,EAAOD,EAAaC,EAAMjpD,IAERiqD,MAAMJ,EAAQC,GAE5BE,IAAWhqD,IAIbipD,EAAOA,EAAKn0C,MAAM,EAAGk1C,IAGvB,OAAOf,EA5GEiB,CAAWjB,EAAMnrD,EAAOwrD,GAsJnC,SAAqBL,EAAMnpD,GACzB,GAAIyoD,EAAOhpD,SAASO,GAAM,CACxB,IAAIqqD,EAA4B,EAAtBpoC,EAAQjiB,EAAIE,QAGtB,OAAoB,KAFpBipD,EAAOD,EAAaC,EAAMkB,IAEjBnqD,OACAipD,GAGTnpD,EAAIsqD,KAAKnB,EAAM,EAAG,EAAGkB,GACdlB,GAGT,GAAInpD,EAAK,CACP,GAA4B,oBAAhBO,aACRP,EAAIS,kBAAkBF,aAAgB,WAAYP,EACpD,MAA0B,iBAAfA,EAAIE,SA+8CLN,EA/8CkCI,EAAIE,SAg9CrCN,EA/8CFspD,EAAaC,EAAM,GAErBU,EAAcV,EAAMnpD,GAG7B,GAAiB,WAAbA,EAAIiF,MAAqBtF,EAAQK,EAAI6F,MACvC,OAAOgkD,EAAcV,EAAMnpD,EAAI6F,MAw8CrC,IAAgBjG,EAp8Cd,MAAM,IAAI8pD,UAAU,sFA9Kba,CAAWpB,EAAMnrD,GA4B1B,SAASwsD,EAAY//B,GACnB,GAAoB,iBAATA,EACT,MAAM,IAAIi/B,UAAU,oCACf,GAAIj/B,EAAO,EAChB,MAAM,IAAI2+B,WAAW,wCA4BzB,SAASK,EAAaN,EAAM1+B,GAG1B,GAFA+/B,EAAW//B,GACX0+B,EAAOD,EAAaC,EAAM1+B,EAAO,EAAI,EAAoB,EAAhBxI,EAAQwI,KAC5Cg+B,EAAOQ,oBACV,IAAK,IAAIlsD,EAAI,EAAGA,EAAI0tB,IAAQ1tB,EAC1BosD,EAAKpsD,GAAK,EAGd,OAAOosD,EAwCT,SAASU,EAAeV,EAAMjY,GAC5B,IAAIhxC,EAASgxC,EAAMhxC,OAAS,EAAI,EAA4B,EAAxB+hB,EAAQivB,EAAMhxC,QAClDipD,EAAOD,EAAaC,EAAMjpD,GAC1B,IAAK,IAAInD,EAAI,EAAGA,EAAImD,EAAQnD,GAAK,EAC/BosD,EAAKpsD,GAAgB,IAAXm0C,EAAMn0C,GAElB,OAAOosD,EA+DT,SAASlnC,EAAS/hB,GAGhB,GAAIA,GAAU8oD,IACZ,MAAM,IAAII,WAAW,0DACaJ,IAAatpD,SAAS,IAAM,UAEhE,OAAgB,EAATQ,EAsFT,SAAS0pD,EAAYG,EAAQC,GAC3B,GAAIvB,EAAOhpD,SAASsqD,GAClB,OAAOA,EAAO7pD,OAEhB,GAA2B,oBAAhBK,aAA6D,mBAAvBA,YAAYC,SACxDD,YAAYC,OAAOupD,IAAWA,aAAkBxpD,aACnD,OAAOwpD,EAAOH,WAEM,iBAAXG,IACTA,EAAS,GAAKA,GAGhB,IAAIM,EAAMN,EAAO7pD,OACjB,GAAY,IAARmqD,EAAW,OAAO,EAItB,IADA,IAAII,GAAc,IAEhB,OAAQT,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAOK,EACT,IAAK,OACL,IAAK,QACL,UAAKpxC,EACH,OAAOyxC,EAAYX,GAAQ7pD,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAANmqD,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAOM,EAAcZ,GAAQ7pD,OAC/B,QACE,GAAIuqD,EAAa,OAAOC,EAAYX,GAAQ7pD,OAC5C8pD,GAAY,GAAKA,GAAUp2B,cAC3B62B,GAAc,GAMtB,SAASG,EAAcZ,EAAUhgD,EAAO6gD,GACtC,IAAIJ,GAAc,EAclB,SALcxxC,IAAVjP,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQkB,KAAKhL,OACf,MAAO,GAOT,SAJY+Y,IAAR4xC,GAAqBA,EAAM3/C,KAAKhL,UAClC2qD,EAAM3/C,KAAKhL,QAGT2qD,GAAO,EACT,MAAO,GAOT,IAHAA,KAAS,KACT7gD,KAAW,GAGT,MAAO,GAKT,IAFKggD,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,OAAOc,EAAS5/C,KAAMlB,EAAO6gD,GAE/B,IAAK,OACL,IAAK,QACH,OAAOE,EAAU7/C,KAAMlB,EAAO6gD,GAEhC,IAAK,QACH,OAAOG,EAAW9/C,KAAMlB,EAAO6gD,GAEjC,IAAK,SACL,IAAK,SACH,OAAOI,EAAY//C,KAAMlB,EAAO6gD,GAElC,IAAK,SACH,OAAOK,EAAYhgD,KAAMlB,EAAO6gD,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOM,EAAajgD,KAAMlB,EAAO6gD,GAEnC,QACE,GAAIJ,EAAa,MAAM,IAAIf,UAAU,qBAAuBM,GAC5DA,GAAYA,EAAW,IAAIp2B,cAC3B62B,GAAc,GAStB,SAASW,EAAMppD,EAAGxD,EAAGrB,GACnB,IAAIJ,EAAIiF,EAAExD,GACVwD,EAAExD,GAAKwD,EAAE7E,GACT6E,EAAE7E,GAAKJ,EAmIT,SAASsuD,EAAsB5qD,EAAQb,EAAK+pD,EAAYK,EAAUsB,GAEhE,GAAsB,IAAlB7qD,EAAOP,OAAc,OAAQ,EAmBjC,GAhB0B,iBAAfypD,GACTK,EAAWL,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAEhBA,GAAcA,EACV4B,MAAM5B,KAERA,EAAa2B,EAAM,EAAK7qD,EAAOP,OAAS,GAItCypD,EAAa,IAAGA,EAAalpD,EAAOP,OAASypD,GAC7CA,GAAclpD,EAAOP,OAAQ,CAC/B,GAAIorD,EAAK,OAAQ,EACZ3B,EAAalpD,EAAOP,OAAS,OAC7B,GAAIypD,EAAa,EAAG,CACzB,IAAI2B,EACC,OAAQ,EADJ3B,EAAa,EAUxB,GALmB,iBAAR/pD,IACTA,EAAM6oD,EAAOC,KAAK9oD,EAAKoqD,IAIrBvB,EAAOhpD,SAASG,GAElB,OAAmB,IAAfA,EAAIM,QACE,EAEHsrD,EAAa/qD,EAAQb,EAAK+pD,EAAYK,EAAUsB,GAClD,GAAmB,iBAAR1rD,EAEhB,OADAA,GAAY,IACR6oD,EAAOQ,qBACiC,mBAAjCI,WAAW1qD,UAAU6Y,QAC1B8zC,EACKjC,WAAW1qD,UAAU6Y,QAAQta,KAAKuD,EAAQb,EAAK+pD,GAE/CN,WAAW1qD,UAAU6O,YAAYtQ,KAAKuD,EAAQb,EAAK+pD,GAGvD6B,EAAa/qD,EAAQ,CAAEb,GAAO+pD,EAAYK,EAAUsB,GAG7D,MAAM,IAAI5B,UAAU,wCAGtB,SAAS8B,EAAc7vB,EAAK/7B,EAAK+pD,EAAYK,EAAUsB,GACrD,IA0BIvuD,EA1BA0uD,EAAY,EACZC,EAAY/vB,EAAIz7B,OAChByrD,EAAY/rD,EAAIM,OAEpB,QAAiB+Y,IAAb+wC,IAEe,UADjBA,EAAW4B,OAAO5B,GAAUp2B,gBACY,UAAbo2B,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAIruB,EAAIz7B,OAAS,GAAKN,EAAIM,OAAS,EACjC,OAAQ,EAEVurD,EAAY,EACZC,GAAa,EACbC,GAAa,EACbhC,GAAc,EAIlB,SAASh2B,EAAMk4B,EAAK9uD,GAClB,OAAkB,IAAd0uD,EACKI,EAAI9uD,GAEJ8uD,EAAIC,aAAa/uD,EAAI0uD,GAKhC,GAAIH,EAAK,CACP,IAAIS,GAAc,EAClB,IAAKhvD,EAAI4sD,EAAY5sD,EAAI2uD,EAAW3uD,IAClC,GAAI42B,EAAKgI,EAAK5+B,KAAO42B,EAAK/zB,GAAqB,IAAhBmsD,EAAoB,EAAIhvD,EAAIgvD,IAEzD,IADoB,IAAhBA,IAAmBA,EAAahvD,GAChCA,EAAIgvD,EAAa,IAAMJ,EAAW,OAAOI,EAAaN,OAEtC,IAAhBM,IAAmBhvD,GAAKA,EAAIgvD,GAChCA,GAAc,OAKlB,IADIpC,EAAagC,EAAYD,IAAW/B,EAAa+B,EAAYC,GAC5D5uD,EAAI4sD,EAAY5sD,GAAK,EAAGA,IAAK,CAEhC,IADA,IAAIo9B,GAAQ,EACH3E,EAAI,EAAGA,EAAIm2B,EAAWn2B,IAC7B,GAAI7B,EAAKgI,EAAK5+B,EAAIy4B,KAAO7B,EAAK/zB,EAAK41B,GAAI,CACrC2E,GAAQ,EACR,MAGJ,GAAIA,EAAO,OAAOp9B,EAItB,OAAQ,EAeV,SAASivD,EAAUH,EAAK9B,EAAQkC,EAAQ/rD,GACtC+rD,EAASC,OAAOD,IAAW,EAC3B,IAAIE,EAAYN,EAAI3rD,OAAS+rD,EACxB/rD,GAGHA,EAASgsD,OAAOhsD,IACHisD,IACXjsD,EAASisD,GAJXjsD,EAASisD,EASX,IAAIC,EAASrC,EAAO7pD,OACpB,GAAIksD,EAAS,GAAM,EAAG,MAAM,IAAI1C,UAAU,sBAEtCxpD,EAASksD,EAAS,IACpBlsD,EAASksD,EAAS,GAEpB,IAAK,IAAIrvD,EAAI,EAAGA,EAAImD,IAAUnD,EAAG,CAC/B,IAAI4Y,EAASW,SAASyzC,EAAOsC,OAAW,EAAJtvD,EAAO,GAAI,IAC/C,GAAIwuD,MAAM51C,GAAS,OAAO5Y,EAC1B8uD,EAAII,EAASlvD,GAAK4Y,EAEpB,OAAO5Y,EAGT,SAASuvD,EAAWT,EAAK9B,EAAQkC,EAAQ/rD,GACvC,OAAOqsD,EAAW7B,EAAYX,EAAQ8B,EAAI3rD,OAAS+rD,GAASJ,EAAKI,EAAQ/rD,GAG3E,SAASssD,EAAYX,EAAK9B,EAAQkC,EAAQ/rD,GACxC,OAAOqsD,EAq6BT,SAAuBpqD,GAErB,IADA,IAAIsqD,EAAY,GACP1vD,EAAI,EAAGA,EAAIoF,EAAIjC,SAAUnD,EAEhC0vD,EAAUv2C,KAAyB,IAApB/T,EAAIqN,WAAWzS,IAEhC,OAAO0vD,EA36BWC,CAAa3C,GAAS8B,EAAKI,EAAQ/rD,GAGvD,SAASysD,EAAad,EAAK9B,EAAQkC,EAAQ/rD,GACzC,OAAOssD,EAAWX,EAAK9B,EAAQkC,EAAQ/rD,GAGzC,SAAS0sD,EAAaf,EAAK9B,EAAQkC,EAAQ/rD,GACzC,OAAOqsD,EAAW5B,EAAcZ,GAAS8B,EAAKI,EAAQ/rD,GAGxD,SAAS2sD,EAAWhB,EAAK9B,EAAQkC,EAAQ/rD,GACvC,OAAOqsD,EAk6BT,SAAyBpqD,EAAK2qD,GAG5B,IAFA,IAAI1vD,EAAG2vD,EAAIC,EACPP,EAAY,GACP1vD,EAAI,EAAGA,EAAIoF,EAAIjC,WACjB4sD,GAAS,GAAK,KADa/vD,EAGhCK,EAAI+E,EAAIqN,WAAWzS,GACnBgwD,EAAK3vD,GAAK,EACV4vD,EAAK5vD,EAAI,IACTqvD,EAAUv2C,KAAK82C,GACfP,EAAUv2C,KAAK62C,GAGjB,OAAON,EA/6BWQ,CAAelD,EAAQ8B,EAAI3rD,OAAS+rD,GAASJ,EAAKI,EAAQ/rD,GAkF9E,SAASgrD,EAAaW,EAAK7hD,EAAO6gD,GAChC,OAAc,IAAV7gD,GAAe6gD,IAAQgB,EAAI3rD,OACtB4oD,EAAOoE,cAAcrB,GAErB/C,EAAOoE,cAAcrB,EAAI72C,MAAMhL,EAAO6gD,IAIjD,SAASE,EAAWc,EAAK7hD,EAAO6gD,GAC9BA,EAAM/2C,KAAK7B,IAAI45C,EAAI3rD,OAAQ2qD,GAI3B,IAHA,IAAIxsB,EAAM,GAENthC,EAAIiN,EACDjN,EAAI8tD,GAAK,CACd,IAQMsC,EAAYC,EAAWC,EAAYC,EARrCC,EAAY1B,EAAI9uD,GAChBywD,EAAY,KACZC,EAAoBF,EAAY,IAAQ,EACvCA,EAAY,IAAQ,EACpBA,EAAY,IAAQ,EACrB,EAEJ,GAAIxwD,EAAI0wD,GAAoB5C,EAG1B,OAAQ4C,GACN,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EAEyB,MAAV,KADlBJ,EAAatB,EAAI9uD,EAAI,OAEnBuwD,GAA6B,GAAZC,IAAqB,EAAoB,GAAbJ,GACzB,MAClBK,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAatB,EAAI9uD,EAAI,GACrBqwD,EAAYvB,EAAI9uD,EAAI,GACQ,MAAV,IAAbowD,IAAsD,MAAV,IAAZC,KACnCE,GAA6B,GAAZC,IAAoB,IAAoB,GAAbJ,IAAsB,EAAmB,GAAZC,GACrD,OAAUE,EAAgB,OAAUA,EAAgB,SACtEE,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAatB,EAAI9uD,EAAI,GACrBqwD,EAAYvB,EAAI9uD,EAAI,GACpBswD,EAAaxB,EAAI9uD,EAAI,GACO,MAAV,IAAbowD,IAAsD,MAAV,IAAZC,IAAsD,MAAV,IAAbC,KAClEC,GAA6B,GAAZC,IAAoB,IAAqB,GAAbJ,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,GAClF,OAAUC,EAAgB,UAC5CE,EAAYF,GAMJ,OAAdE,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbnvB,EAAInoB,KAAKs3C,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBnvB,EAAInoB,KAAKs3C,GACTzwD,GAAK0wD,EAGP,OAQF,SAAgCC,GAC9B,IAAIrD,EAAMqD,EAAWxtD,OACrB,GAAImqD,GAAOsD,EACT,OAAO/B,OAAOgC,aAAar9B,MAAMq7B,OAAQ8B,GAI3C,IAAIrvB,EAAM,GACNthC,EAAI,EACR,KAAOA,EAAIstD,GACThsB,GAAOutB,OAAOgC,aAAar9B,MACzBq7B,OACA8B,EAAW14C,MAAMjY,EAAGA,GAAK4wD,IAG7B,OAAOtvB,EAvBAwvB,CAAsBxvB,GA98B/BxhC,EAAQ4rD,OAASA,EACjB5rD,EAAQixD,WAoTR,SAAqB5tD,IACdA,GAAUA,IACbA,EAAS,GAEX,OAAOuoD,EAAOsF,OAAO7tD,IAvTvBrD,EAAQmxD,kBAAoB,GA0B5BvF,EAAOQ,yBAAqDhwC,IAA/Bg1C,EAAOhF,oBAChCgF,EAAOhF,oBAQX,WACE,IACE,IAAIttB,EAAM,IAAI0tB,WAAW,GAEzB,OADA1tB,EAAI2tB,UAAY,CAACA,UAAWD,WAAW1qD,UAAWuvD,IAAK,WAAc,OAAO,KACvD,KAAdvyB,EAAIuyB,OACiB,mBAAjBvyB,EAAIwyB,UACuB,IAAlCxyB,EAAIwyB,SAAS,EAAG,GAAGvE,WACvB,MAAOz+C,GACP,OAAO,GAfPijD,GAKJvxD,EAAQmsD,WAAaA,IAkErBP,EAAO4F,SAAW,KAGlB5F,EAAO6F,SAAW,SAAU3yB,GAE1B,OADAA,EAAI2tB,UAAYb,EAAO9pD,UAChBg9B,GA2BT8sB,EAAOC,KAAO,SAAU1qD,EAAOwrD,EAAkBtpD,GAC/C,OAAOwoD,EAAK,KAAM1qD,EAAOwrD,EAAkBtpD,IAGzCuoD,EAAOQ,sBACTR,EAAO9pD,UAAU2qD,UAAYD,WAAW1qD,UACxC8pD,EAAOa,UAAYD,WACG,oBAAXvrD,QAA0BA,OAAOywD,SACxC9F,EAAO3qD,OAAOywD,WAAa9F,GAE7BhrD,OAAOC,eAAe+qD,EAAQ3qD,OAAOywD,QAAS,CAC5CvwD,MAAO,KACPwwD,cAAc,KAiCpB/F,EAAOsF,MAAQ,SAAUtjC,EAAM4B,EAAM29B,GACnC,OArBF,SAAgBb,EAAM1+B,EAAM4B,EAAM29B,GAEhC,OADAQ,EAAW//B,GACPA,GAAQ,EACHy+B,EAAaC,EAAM1+B,QAEfxR,IAAToT,EAIyB,iBAAb29B,EACVd,EAAaC,EAAM1+B,GAAM4B,KAAKA,EAAM29B,GACpCd,EAAaC,EAAM1+B,GAAM4B,KAAKA,GAE7B68B,EAAaC,EAAM1+B,GAQnBsjC,CAAM,KAAMtjC,EAAM4B,EAAM29B,IAiBjCvB,EAAOgB,YAAc,SAAUh/B,GAC7B,OAAOg/B,EAAY,KAAMh/B,IAK3Bg+B,EAAOgG,gBAAkB,SAAUhkC,GACjC,OAAOg/B,EAAY,KAAMh/B,IAiH3Bg+B,EAAOhpD,SAAW,SAAmBuC,GACnC,QAAe,MAALA,IAAaA,EAAE0sD,YAG3BjG,EAAO3qC,QAAU,SAAkB/b,EAAGC,GACpC,IAAKymD,EAAOhpD,SAASsC,KAAO0mD,EAAOhpD,SAASuC,GAC1C,MAAM,IAAI0nD,UAAU,6BAGtB,GAAI3nD,IAAMC,EAAG,OAAO,EAKpB,IAHA,IAAIqsC,EAAItsC,EAAE7B,OACNyuD,EAAI3sD,EAAE9B,OAEDnD,EAAI,EAAGstD,EAAMv2C,KAAK7B,IAAIo8B,EAAGsgB,GAAI5xD,EAAIstD,IAAOttD,EAC/C,GAAIgF,EAAEhF,KAAOiF,EAAEjF,GAAI,CACjBsxC,EAAItsC,EAAEhF,GACN4xD,EAAI3sD,EAAEjF,GACN,MAIJ,OAAIsxC,EAAIsgB,GAAW,EACfA,EAAItgB,EAAU,EACX,GAGToa,EAAOwB,WAAa,SAAqBD,GACvC,OAAQ4B,OAAO5B,GAAUp2B,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,IAIb60B,EAAOlnB,OAAS,SAAiB7V,EAAMxrB,GACrC,IAAKP,EAAQ+rB,GACX,MAAM,IAAIg+B,UAAU,+CAGtB,GAAoB,IAAhBh+B,EAAKxrB,OACP,OAAOuoD,EAAOsF,MAAM,GAGtB,IAAIhxD,EACJ,QAAekc,IAAX/Y,EAEF,IADAA,EAAS,EACJnD,EAAI,EAAGA,EAAI2uB,EAAKxrB,SAAUnD,EAC7BmD,GAAUwrB,EAAK3uB,GAAGmD,OAItB,IAAIO,EAASgoD,EAAOgB,YAAYvpD,GAC5B0uD,EAAM,EACV,IAAK7xD,EAAI,EAAGA,EAAI2uB,EAAKxrB,SAAUnD,EAAG,CAChC,IAAI8uD,EAAMngC,EAAK3uB,GACf,IAAK0rD,EAAOhpD,SAASosD,GACnB,MAAM,IAAInC,UAAU,+CAEtBmC,EAAIvB,KAAK7pD,EAAQmuD,GACjBA,GAAO/C,EAAI3rD,OAEb,OAAOO,GA8CTgoD,EAAOmB,WAAaA,EA0EpBnB,EAAO9pD,UAAU+vD,WAAY,EAQ7BjG,EAAO9pD,UAAUkwD,OAAS,WACxB,IAAIxE,EAAMn/C,KAAKhL,OACf,GAAImqD,EAAM,GAAM,EACd,MAAM,IAAIjB,WAAW,6CAEvB,IAAK,IAAIrsD,EAAI,EAAGA,EAAIstD,EAAKttD,GAAK,EAC5BquD,EAAKlgD,KAAMnO,EAAGA,EAAI,GAEpB,OAAOmO,MAGTu9C,EAAO9pD,UAAUmwD,OAAS,WACxB,IAAIzE,EAAMn/C,KAAKhL,OACf,GAAImqD,EAAM,GAAM,EACd,MAAM,IAAIjB,WAAW,6CAEvB,IAAK,IAAIrsD,EAAI,EAAGA,EAAIstD,EAAKttD,GAAK,EAC5BquD,EAAKlgD,KAAMnO,EAAGA,EAAI,GAClBquD,EAAKlgD,KAAMnO,EAAI,EAAGA,EAAI,GAExB,OAAOmO,MAGTu9C,EAAO9pD,UAAUowD,OAAS,WACxB,IAAI1E,EAAMn/C,KAAKhL,OACf,GAAImqD,EAAM,GAAM,EACd,MAAM,IAAIjB,WAAW,6CAEvB,IAAK,IAAIrsD,EAAI,EAAGA,EAAIstD,EAAKttD,GAAK,EAC5BquD,EAAKlgD,KAAMnO,EAAGA,EAAI,GAClBquD,EAAKlgD,KAAMnO,EAAI,EAAGA,EAAI,GACtBquD,EAAKlgD,KAAMnO,EAAI,EAAGA,EAAI,GACtBquD,EAAKlgD,KAAMnO,EAAI,EAAGA,EAAI,GAExB,OAAOmO,MAGTu9C,EAAO9pD,UAAUe,SAAW,WAC1B,IAAIQ,EAAuB,EAAdgL,KAAKhL,OAClB,OAAe,IAAXA,EAAqB,GACA,IAArB0B,UAAU1B,OAAqB6qD,EAAU7/C,KAAM,EAAGhL,GAC/C0qD,EAAar6B,MAAMrlB,KAAMtJ,YAGlC6mD,EAAO9pD,UAAUqwD,OAAS,SAAiBhtD,GACzC,IAAKymD,EAAOhpD,SAASuC,GAAI,MAAM,IAAI0nD,UAAU,6BAC7C,OAAIx+C,OAASlJ,GACsB,IAA5BymD,EAAO3qC,QAAQ5S,KAAMlJ,IAG9BymD,EAAO9pD,UAAUswD,QAAU,WACzB,IAAI9sD,EAAM,GACN+P,EAAMrV,EAAQmxD,kBAKlB,OAJI9iD,KAAKhL,OAAS,IAChBiC,EAAM+I,KAAKxL,SAAS,MAAO,EAAGwS,GAAKmT,MAAM,SAAS5P,KAAK,KACnDvK,KAAKhL,OAASgS,IAAK/P,GAAO,UAEzB,WAAaA,EAAM,KAG5BsmD,EAAO9pD,UAAUmf,QAAU,SAAkB1Z,EAAQ4F,EAAO6gD,EAAKqE,EAAWC,GAC1E,IAAK1G,EAAOhpD,SAAS2E,GACnB,MAAM,IAAIslD,UAAU,6BAgBtB,QAbczwC,IAAVjP,IACFA,EAAQ,QAEEiP,IAAR4xC,IACFA,EAAMzmD,EAASA,EAAOlE,OAAS,QAEf+Y,IAAdi2C,IACFA,EAAY,QAEEj2C,IAAZk2C,IACFA,EAAUjkD,KAAKhL,QAGb8J,EAAQ,GAAK6gD,EAAMzmD,EAAOlE,QAAUgvD,EAAY,GAAKC,EAAUjkD,KAAKhL,OACtE,MAAM,IAAIkpD,WAAW,sBAGvB,GAAI8F,GAAaC,GAAWnlD,GAAS6gD,EACnC,OAAO,EAET,GAAIqE,GAAaC,EACf,OAAQ,EAEV,GAAInlD,GAAS6gD,EACX,OAAO,EAQT,GAAI3/C,OAAS9G,EAAQ,OAAO,EAS5B,IAPA,IAAIiqC,GAJJ8gB,KAAa,IADbD,KAAe,GAMXP,GAPJ9D,KAAS,IADT7gD,KAAW,GASPqgD,EAAMv2C,KAAK7B,IAAIo8B,EAAGsgB,GAElBS,EAAWlkD,KAAK8J,MAAMk6C,EAAWC,GACjCE,EAAajrD,EAAO4Q,MAAMhL,EAAO6gD,GAE5B9tD,EAAI,EAAGA,EAAIstD,IAAOttD,EACzB,GAAIqyD,EAASryD,KAAOsyD,EAAWtyD,GAAI,CACjCsxC,EAAI+gB,EAASryD,GACb4xD,EAAIU,EAAWtyD,GACf,MAIJ,OAAIsxC,EAAIsgB,GAAW,EACfA,EAAItgB,EAAU,EACX,GA6HToa,EAAO9pD,UAAU2wD,SAAW,SAAmB1vD,EAAK+pD,EAAYK,GAC9D,OAAoD,IAA7C9+C,KAAKsM,QAAQ5X,EAAK+pD,EAAYK,IAGvCvB,EAAO9pD,UAAU6Y,QAAU,SAAkB5X,EAAK+pD,EAAYK,GAC5D,OAAOqB,EAAqBngD,KAAMtL,EAAK+pD,EAAYK,GAAU,IAG/DvB,EAAO9pD,UAAU6O,YAAc,SAAsB5N,EAAK+pD,EAAYK,GACpE,OAAOqB,EAAqBngD,KAAMtL,EAAK+pD,EAAYK,GAAU,IAkD/DvB,EAAO9pD,UAAUwrD,MAAQ,SAAgBJ,EAAQkC,EAAQ/rD,EAAQ8pD,GAE/D,QAAe/wC,IAAXgzC,EACFjC,EAAW,OACX9pD,EAASgL,KAAKhL,OACd+rD,EAAS,OAEJ,QAAehzC,IAAX/Y,GAA0C,iBAAX+rD,EACxCjC,EAAWiC,EACX/rD,EAASgL,KAAKhL,OACd+rD,EAAS,MAEJ,KAAIsD,SAAStD,GAWlB,MAAM,IAAI1rC,MACR,2EAXF0rC,GAAkB,EACdsD,SAASrvD,IACXA,GAAkB,OACD+Y,IAAb+wC,IAAwBA,EAAW,UAEvCA,EAAW9pD,EACXA,OAAS+Y,GASb,IAAIkzC,EAAYjhD,KAAKhL,OAAS+rD,EAG9B,SAFehzC,IAAX/Y,GAAwBA,EAASisD,KAAWjsD,EAASisD,GAEpDpC,EAAO7pD,OAAS,IAAMA,EAAS,GAAK+rD,EAAS,IAAOA,EAAS/gD,KAAKhL,OACrE,MAAM,IAAIkpD,WAAW,0CAGlBY,IAAUA,EAAW,QAG1B,IADA,IAAIS,GAAc,IAEhB,OAAQT,GACN,IAAK,MACH,OAAOgC,EAAS9gD,KAAM6+C,EAAQkC,EAAQ/rD,GAExC,IAAK,OACL,IAAK,QACH,OAAOosD,EAAUphD,KAAM6+C,EAAQkC,EAAQ/rD,GAEzC,IAAK,QACH,OAAOssD,EAAWthD,KAAM6+C,EAAQkC,EAAQ/rD,GAE1C,IAAK,SACL,IAAK,SACH,OAAOysD,EAAYzhD,KAAM6+C,EAAQkC,EAAQ/rD,GAE3C,IAAK,SAEH,OAAO0sD,EAAY1hD,KAAM6+C,EAAQkC,EAAQ/rD,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO2sD,EAAU3hD,KAAM6+C,EAAQkC,EAAQ/rD,GAEzC,QACE,GAAIuqD,EAAa,MAAM,IAAIf,UAAU,qBAAuBM,GAC5DA,GAAY,GAAKA,GAAUp2B,cAC3B62B,GAAc,IAKtBhC,EAAO9pD,UAAU6wD,OAAS,WACxB,MAAO,CACLvqD,KAAM,SACNY,KAAM4d,MAAM9kB,UAAUqW,MAAM9X,KAAKgO,KAAKukD,MAAQvkD,KAAM,KAwFxD,IAAIyiD,EAAuB,KAoB3B,SAAS3C,EAAYa,EAAK7hD,EAAO6gD,GAC/B,IAAI/zC,EAAM,GACV+zC,EAAM/2C,KAAK7B,IAAI45C,EAAI3rD,OAAQ2qD,GAE3B,IAAK,IAAI9tD,EAAIiN,EAAOjN,EAAI8tD,IAAO9tD,EAC7B+Z,GAAO80C,OAAOgC,aAAsB,IAAT/B,EAAI9uD,IAEjC,OAAO+Z,EAGT,SAASm0C,EAAaY,EAAK7hD,EAAO6gD,GAChC,IAAI/zC,EAAM,GACV+zC,EAAM/2C,KAAK7B,IAAI45C,EAAI3rD,OAAQ2qD,GAE3B,IAAK,IAAI9tD,EAAIiN,EAAOjN,EAAI8tD,IAAO9tD,EAC7B+Z,GAAO80C,OAAOgC,aAAa/B,EAAI9uD,IAEjC,OAAO+Z,EAGT,SAASg0C,EAAUe,EAAK7hD,EAAO6gD,GAC7B,IAAIR,EAAMwB,EAAI3rD,SAET8J,GAASA,EAAQ,KAAGA,EAAQ,KAC5B6gD,GAAOA,EAAM,GAAKA,EAAMR,KAAKQ,EAAMR,GAGxC,IADA,IAAIqF,EAAM,GACD3yD,EAAIiN,EAAOjN,EAAI8tD,IAAO9tD,EAC7B2yD,GAAOC,EAAM9D,EAAI9uD,IAEnB,OAAO2yD,EAGT,SAASvE,EAAcU,EAAK7hD,EAAO6gD,GAGjC,IAFA,IAAI+E,EAAQ/D,EAAI72C,MAAMhL,EAAO6gD,GACzBxsB,EAAM,GACDthC,EAAI,EAAGA,EAAI6yD,EAAM1vD,OAAQnD,GAAK,EACrCshC,GAAOutB,OAAOgC,aAAagC,EAAM7yD,GAAoB,IAAf6yD,EAAM7yD,EAAI,IAElD,OAAOshC,EA0CT,SAASwxB,EAAa5D,EAAQ32C,EAAKpV,GACjC,GAAK+rD,EAAS,GAAO,GAAKA,EAAS,EAAG,MAAM,IAAI7C,WAAW,sBAC3D,GAAI6C,EAAS32C,EAAMpV,EAAQ,MAAM,IAAIkpD,WAAW,yCA+JlD,SAAS0G,EAAUjE,EAAK7tD,EAAOiuD,EAAQ32C,EAAKpD,EAAKD,GAC/C,IAAKw2C,EAAOhpD,SAASosD,GAAM,MAAM,IAAInC,UAAU,+CAC/C,GAAI1rD,EAAQkU,GAAOlU,EAAQiU,EAAK,MAAM,IAAIm3C,WAAW,qCACrD,GAAI6C,EAAS32C,EAAMu2C,EAAI3rD,OAAQ,MAAM,IAAIkpD,WAAW,sBAkDtD,SAAS2G,EAAmBlE,EAAK7tD,EAAOiuD,EAAQ+D,GAC1ChyD,EAAQ,IAAGA,EAAQ,MAASA,EAAQ,GACxC,IAAK,IAAIjB,EAAI,EAAGy4B,EAAI1hB,KAAK7B,IAAI45C,EAAI3rD,OAAS+rD,EAAQ,GAAIlvD,EAAIy4B,IAAKz4B,EAC7D8uD,EAAII,EAASlvD,IAAMiB,EAAS,KAAS,GAAKgyD,EAAejzD,EAAI,EAAIA,MAClC,GAA5BizD,EAAejzD,EAAI,EAAIA,GA8B9B,SAASkzD,EAAmBpE,EAAK7tD,EAAOiuD,EAAQ+D,GAC1ChyD,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5C,IAAK,IAAIjB,EAAI,EAAGy4B,EAAI1hB,KAAK7B,IAAI45C,EAAI3rD,OAAS+rD,EAAQ,GAAIlvD,EAAIy4B,IAAKz4B,EAC7D8uD,EAAII,EAASlvD,GAAMiB,IAAuC,GAA5BgyD,EAAejzD,EAAI,EAAIA,GAAU,IAmJnE,SAASmzD,EAAcrE,EAAK7tD,EAAOiuD,EAAQ32C,EAAKpD,EAAKD,GACnD,GAAIg6C,EAAS32C,EAAMu2C,EAAI3rD,OAAQ,MAAM,IAAIkpD,WAAW,sBACpD,GAAI6C,EAAS,EAAG,MAAM,IAAI7C,WAAW,sBAGvC,SAAS+G,EAAYtE,EAAK7tD,EAAOiuD,EAAQ+D,EAAcI,GAKrD,OAJKA,GACHF,EAAarE,EAAK7tD,EAAOiuD,EAAQ,GAEnClD,EAAQoB,MAAM0B,EAAK7tD,EAAOiuD,EAAQ+D,EAAc,GAAI,GAC7C/D,EAAS,EAWlB,SAASoE,EAAaxE,EAAK7tD,EAAOiuD,EAAQ+D,EAAcI,GAKtD,OAJKA,GACHF,EAAarE,EAAK7tD,EAAOiuD,EAAQ,GAEnClD,EAAQoB,MAAM0B,EAAK7tD,EAAOiuD,EAAQ+D,EAAc,GAAI,GAC7C/D,EAAS,EA/clBxD,EAAO9pD,UAAUqW,MAAQ,SAAgBhL,EAAO6gD,GAC9C,IAoBIyF,EApBAjG,EAAMn/C,KAAKhL,OAqBf,IApBA8J,IAAUA,GAGE,GACVA,GAASqgD,GACG,IAAGrgD,EAAQ,GACdA,EAAQqgD,IACjBrgD,EAAQqgD,IANVQ,OAAc5xC,IAAR4xC,EAAoBR,IAAQQ,GASxB,GACRA,GAAOR,GACG,IAAGQ,EAAM,GACVA,EAAMR,IACfQ,EAAMR,GAGJQ,EAAM7gD,IAAO6gD,EAAM7gD,GAGnBy+C,EAAOQ,qBACTqH,EAASplD,KAAKijD,SAASnkD,EAAO6gD,IACvBvB,UAAYb,EAAO9pD,cACrB,CACL,IAAI4xD,EAAW1F,EAAM7gD,EACrBsmD,EAAS,IAAI7H,EAAO8H,OAAUt3C,GAC9B,IAAK,IAAIlc,EAAI,EAAGA,EAAIwzD,IAAYxzD,EAC9BuzD,EAAOvzD,GAAKmO,KAAKnO,EAAIiN,GAIzB,OAAOsmD,GAWT7H,EAAO9pD,UAAU6xD,WAAa,SAAqBvE,EAAQrC,EAAYwG,GACrEnE,GAAkB,EAClBrC,GAA0B,EACrBwG,GAAUP,EAAY5D,EAAQrC,EAAY1+C,KAAKhL,QAKpD,IAHA,IAAIN,EAAMsL,KAAK+gD,GACXwE,EAAM,EACN1zD,EAAI,IACCA,EAAI6sD,IAAe6G,GAAO,MACjC7wD,GAAOsL,KAAK+gD,EAASlvD,GAAK0zD,EAG5B,OAAO7wD,GAGT6oD,EAAO9pD,UAAU+xD,WAAa,SAAqBzE,EAAQrC,EAAYwG,GACrEnE,GAAkB,EAClBrC,GAA0B,EACrBwG,GACHP,EAAY5D,EAAQrC,EAAY1+C,KAAKhL,QAKvC,IAFA,IAAIN,EAAMsL,KAAK+gD,IAAWrC,GACtB6G,EAAM,EACH7G,EAAa,IAAM6G,GAAO,MAC/B7wD,GAAOsL,KAAK+gD,IAAWrC,GAAc6G,EAGvC,OAAO7wD,GAGT6oD,EAAO9pD,UAAUgyD,UAAY,SAAoB1E,EAAQmE,GAEvD,OADKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QACpCgL,KAAK+gD,IAGdxD,EAAO9pD,UAAUiyD,aAAe,SAAuB3E,EAAQmE,GAE7D,OADKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QACpCgL,KAAK+gD,GAAW/gD,KAAK+gD,EAAS,IAAM,GAG7CxD,EAAO9pD,UAAUmtD,aAAe,SAAuBG,EAAQmE,GAE7D,OADKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QACnCgL,KAAK+gD,IAAW,EAAK/gD,KAAK+gD,EAAS,IAG7CxD,EAAO9pD,UAAUkyD,aAAe,SAAuB5E,EAAQmE,GAG7D,OAFKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,SAElCgL,KAAK+gD,GACT/gD,KAAK+gD,EAAS,IAAM,EACpB/gD,KAAK+gD,EAAS,IAAM,IACD,SAAnB/gD,KAAK+gD,EAAS,IAGrBxD,EAAO9pD,UAAUmyD,aAAe,SAAuB7E,EAAQmE,GAG7D,OAFKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QAEpB,SAAfgL,KAAK+gD,IACT/gD,KAAK+gD,EAAS,IAAM,GACrB/gD,KAAK+gD,EAAS,IAAM,EACrB/gD,KAAK+gD,EAAS,KAGlBxD,EAAO9pD,UAAUoyD,UAAY,SAAoB9E,EAAQrC,EAAYwG,GACnEnE,GAAkB,EAClBrC,GAA0B,EACrBwG,GAAUP,EAAY5D,EAAQrC,EAAY1+C,KAAKhL,QAKpD,IAHA,IAAIN,EAAMsL,KAAK+gD,GACXwE,EAAM,EACN1zD,EAAI,IACCA,EAAI6sD,IAAe6G,GAAO,MACjC7wD,GAAOsL,KAAK+gD,EAASlvD,GAAK0zD,EAM5B,OAFI7wD,IAFJ6wD,GAAO,OAES7wD,GAAOkU,KAAKk9C,IAAI,EAAG,EAAIpH,IAEhChqD,GAGT6oD,EAAO9pD,UAAUsyD,UAAY,SAAoBhF,EAAQrC,EAAYwG,GACnEnE,GAAkB,EAClBrC,GAA0B,EACrBwG,GAAUP,EAAY5D,EAAQrC,EAAY1+C,KAAKhL,QAKpD,IAHA,IAAInD,EAAI6sD,EACJ6G,EAAM,EACN7wD,EAAMsL,KAAK+gD,IAAWlvD,GACnBA,EAAI,IAAM0zD,GAAO,MACtB7wD,GAAOsL,KAAK+gD,IAAWlvD,GAAK0zD,EAM9B,OAFI7wD,IAFJ6wD,GAAO,OAES7wD,GAAOkU,KAAKk9C,IAAI,EAAG,EAAIpH,IAEhChqD,GAGT6oD,EAAO9pD,UAAUuyD,SAAW,SAAmBjF,EAAQmE,GAErD,OADKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QACtB,IAAfgL,KAAK+gD,IAC0B,GAA5B,IAAO/gD,KAAK+gD,GAAU,GADK/gD,KAAK+gD,IAI3CxD,EAAO9pD,UAAUwyD,YAAc,SAAsBlF,EAAQmE,GACtDA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QAC3C,IAAIN,EAAMsL,KAAK+gD,GAAW/gD,KAAK+gD,EAAS,IAAM,EAC9C,OAAc,MAANrsD,EAAsB,WAANA,EAAmBA,GAG7C6oD,EAAO9pD,UAAUyyD,YAAc,SAAsBnF,EAAQmE,GACtDA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QAC3C,IAAIN,EAAMsL,KAAK+gD,EAAS,GAAM/gD,KAAK+gD,IAAW,EAC9C,OAAc,MAANrsD,EAAsB,WAANA,EAAmBA,GAG7C6oD,EAAO9pD,UAAU0yD,YAAc,SAAsBpF,EAAQmE,GAG3D,OAFKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QAEnCgL,KAAK+gD,GACV/gD,KAAK+gD,EAAS,IAAM,EACpB/gD,KAAK+gD,EAAS,IAAM,GACpB/gD,KAAK+gD,EAAS,IAAM,IAGzBxD,EAAO9pD,UAAU2yD,YAAc,SAAsBrF,EAAQmE,GAG3D,OAFKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QAEnCgL,KAAK+gD,IAAW,GACrB/gD,KAAK+gD,EAAS,IAAM,GACpB/gD,KAAK+gD,EAAS,IAAM,EACpB/gD,KAAK+gD,EAAS,IAGnBxD,EAAO9pD,UAAU4yD,YAAc,SAAsBtF,EAAQmE,GAE3D,OADKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QACpC6oD,EAAQp1B,KAAKzoB,KAAM+gD,GAAQ,EAAM,GAAI,IAG9CxD,EAAO9pD,UAAU6yD,YAAc,SAAsBvF,EAAQmE,GAE3D,OADKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QACpC6oD,EAAQp1B,KAAKzoB,KAAM+gD,GAAQ,EAAO,GAAI,IAG/CxD,EAAO9pD,UAAU8yD,aAAe,SAAuBxF,EAAQmE,GAE7D,OADKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QACpC6oD,EAAQp1B,KAAKzoB,KAAM+gD,GAAQ,EAAM,GAAI,IAG9CxD,EAAO9pD,UAAU+yD,aAAe,SAAuBzF,EAAQmE,GAE7D,OADKA,GAAUP,EAAY5D,EAAQ,EAAG/gD,KAAKhL,QACpC6oD,EAAQp1B,KAAKzoB,KAAM+gD,GAAQ,EAAO,GAAI,IAS/CxD,EAAO9pD,UAAUgzD,YAAc,SAAsB3zD,EAAOiuD,EAAQrC,EAAYwG,IAC9EpyD,GAASA,EACTiuD,GAAkB,EAClBrC,GAA0B,EACrBwG,IAEHN,EAAS5kD,KAAMlN,EAAOiuD,EAAQrC,EADf91C,KAAKk9C,IAAI,EAAG,EAAIpH,GAAc,EACO,GAGtD,IAAI6G,EAAM,EACN1zD,EAAI,EAER,IADAmO,KAAK+gD,GAAkB,IAARjuD,IACNjB,EAAI6sD,IAAe6G,GAAO,MACjCvlD,KAAK+gD,EAASlvD,GAAMiB,EAAQyyD,EAAO,IAGrC,OAAOxE,EAASrC,GAGlBnB,EAAO9pD,UAAUizD,YAAc,SAAsB5zD,EAAOiuD,EAAQrC,EAAYwG,IAC9EpyD,GAASA,EACTiuD,GAAkB,EAClBrC,GAA0B,EACrBwG,IAEHN,EAAS5kD,KAAMlN,EAAOiuD,EAAQrC,EADf91C,KAAKk9C,IAAI,EAAG,EAAIpH,GAAc,EACO,GAGtD,IAAI7sD,EAAI6sD,EAAa,EACjB6G,EAAM,EAEV,IADAvlD,KAAK+gD,EAASlvD,GAAa,IAARiB,IACVjB,GAAK,IAAM0zD,GAAO,MACzBvlD,KAAK+gD,EAASlvD,GAAMiB,EAAQyyD,EAAO,IAGrC,OAAOxE,EAASrC,GAGlBnB,EAAO9pD,UAAUkzD,WAAa,SAAqB7zD,EAAOiuD,EAAQmE,GAMhE,OALApyD,GAASA,EACTiuD,GAAkB,EACbmE,GAAUN,EAAS5kD,KAAMlN,EAAOiuD,EAAQ,EAAG,IAAM,GACjDxD,EAAOQ,sBAAqBjrD,EAAQ8V,KAAKg+C,MAAM9zD,IACpDkN,KAAK+gD,GAAmB,IAARjuD,EACTiuD,EAAS,GAWlBxD,EAAO9pD,UAAUozD,cAAgB,SAAwB/zD,EAAOiuD,EAAQmE,GAUtE,OATApyD,GAASA,EACTiuD,GAAkB,EACbmE,GAAUN,EAAS5kD,KAAMlN,EAAOiuD,EAAQ,EAAG,MAAQ,GACpDxD,EAAOQ,qBACT/9C,KAAK+gD,GAAmB,IAARjuD,EAChBkN,KAAK+gD,EAAS,GAAMjuD,IAAU,GAE9B+xD,EAAkB7kD,KAAMlN,EAAOiuD,GAAQ,GAElCA,EAAS,GAGlBxD,EAAO9pD,UAAUqzD,cAAgB,SAAwBh0D,EAAOiuD,EAAQmE,GAUtE,OATApyD,GAASA,EACTiuD,GAAkB,EACbmE,GAAUN,EAAS5kD,KAAMlN,EAAOiuD,EAAQ,EAAG,MAAQ,GACpDxD,EAAOQ,qBACT/9C,KAAK+gD,GAAWjuD,IAAU,EAC1BkN,KAAK+gD,EAAS,GAAc,IAARjuD,GAEpB+xD,EAAkB7kD,KAAMlN,EAAOiuD,GAAQ,GAElCA,EAAS,GAUlBxD,EAAO9pD,UAAUszD,cAAgB,SAAwBj0D,EAAOiuD,EAAQmE,GAYtE,OAXApyD,GAASA,EACTiuD,GAAkB,EACbmE,GAAUN,EAAS5kD,KAAMlN,EAAOiuD,EAAQ,EAAG,WAAY,GACxDxD,EAAOQ,qBACT/9C,KAAK+gD,EAAS,GAAMjuD,IAAU,GAC9BkN,KAAK+gD,EAAS,GAAMjuD,IAAU,GAC9BkN,KAAK+gD,EAAS,GAAMjuD,IAAU,EAC9BkN,KAAK+gD,GAAmB,IAARjuD,GAEhBiyD,EAAkB/kD,KAAMlN,EAAOiuD,GAAQ,GAElCA,EAAS,GAGlBxD,EAAO9pD,UAAUuzD,cAAgB,SAAwBl0D,EAAOiuD,EAAQmE,GAYtE,OAXApyD,GAASA,EACTiuD,GAAkB,EACbmE,GAAUN,EAAS5kD,KAAMlN,EAAOiuD,EAAQ,EAAG,WAAY,GACxDxD,EAAOQ,qBACT/9C,KAAK+gD,GAAWjuD,IAAU,GAC1BkN,KAAK+gD,EAAS,GAAMjuD,IAAU,GAC9BkN,KAAK+gD,EAAS,GAAMjuD,IAAU,EAC9BkN,KAAK+gD,EAAS,GAAc,IAARjuD,GAEpBiyD,EAAkB/kD,KAAMlN,EAAOiuD,GAAQ,GAElCA,EAAS,GAGlBxD,EAAO9pD,UAAUwzD,WAAa,SAAqBn0D,EAAOiuD,EAAQrC,EAAYwG,GAG5E,GAFApyD,GAASA,EACTiuD,GAAkB,GACbmE,EAAU,CACb,IAAItmD,EAAQgK,KAAKk9C,IAAI,EAAG,EAAIpH,EAAa,GAEzCkG,EAAS5kD,KAAMlN,EAAOiuD,EAAQrC,EAAY9/C,EAAQ,GAAIA,GAGxD,IAAI/M,EAAI,EACJ0zD,EAAM,EACNjmD,EAAM,EAEV,IADAU,KAAK+gD,GAAkB,IAARjuD,IACNjB,EAAI6sD,IAAe6G,GAAO,MAC7BzyD,EAAQ,GAAa,IAARwM,GAAsC,IAAzBU,KAAK+gD,EAASlvD,EAAI,KAC9CyN,EAAM,GAERU,KAAK+gD,EAASlvD,IAAOiB,EAAQyyD,GAAQ,GAAKjmD,EAAM,IAGlD,OAAOyhD,EAASrC,GAGlBnB,EAAO9pD,UAAUyzD,WAAa,SAAqBp0D,EAAOiuD,EAAQrC,EAAYwG,GAG5E,GAFApyD,GAASA,EACTiuD,GAAkB,GACbmE,EAAU,CACb,IAAItmD,EAAQgK,KAAKk9C,IAAI,EAAG,EAAIpH,EAAa,GAEzCkG,EAAS5kD,KAAMlN,EAAOiuD,EAAQrC,EAAY9/C,EAAQ,GAAIA,GAGxD,IAAI/M,EAAI6sD,EAAa,EACjB6G,EAAM,EACNjmD,EAAM,EAEV,IADAU,KAAK+gD,EAASlvD,GAAa,IAARiB,IACVjB,GAAK,IAAM0zD,GAAO,MACrBzyD,EAAQ,GAAa,IAARwM,GAAsC,IAAzBU,KAAK+gD,EAASlvD,EAAI,KAC9CyN,EAAM,GAERU,KAAK+gD,EAASlvD,IAAOiB,EAAQyyD,GAAQ,GAAKjmD,EAAM,IAGlD,OAAOyhD,EAASrC,GAGlBnB,EAAO9pD,UAAU0zD,UAAY,SAAoBr0D,EAAOiuD,EAAQmE,GAO9D,OANApyD,GAASA,EACTiuD,GAAkB,EACbmE,GAAUN,EAAS5kD,KAAMlN,EAAOiuD,EAAQ,EAAG,KAAO,KAClDxD,EAAOQ,sBAAqBjrD,EAAQ8V,KAAKg+C,MAAM9zD,IAChDA,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtCkN,KAAK+gD,GAAmB,IAARjuD,EACTiuD,EAAS,GAGlBxD,EAAO9pD,UAAU2zD,aAAe,SAAuBt0D,EAAOiuD,EAAQmE,GAUpE,OATApyD,GAASA,EACTiuD,GAAkB,EACbmE,GAAUN,EAAS5kD,KAAMlN,EAAOiuD,EAAQ,EAAG,OAAS,OACrDxD,EAAOQ,qBACT/9C,KAAK+gD,GAAmB,IAARjuD,EAChBkN,KAAK+gD,EAAS,GAAMjuD,IAAU,GAE9B+xD,EAAkB7kD,KAAMlN,EAAOiuD,GAAQ,GAElCA,EAAS,GAGlBxD,EAAO9pD,UAAU4zD,aAAe,SAAuBv0D,EAAOiuD,EAAQmE,GAUpE,OATApyD,GAASA,EACTiuD,GAAkB,EACbmE,GAAUN,EAAS5kD,KAAMlN,EAAOiuD,EAAQ,EAAG,OAAS,OACrDxD,EAAOQ,qBACT/9C,KAAK+gD,GAAWjuD,IAAU,EAC1BkN,KAAK+gD,EAAS,GAAc,IAARjuD,GAEpB+xD,EAAkB7kD,KAAMlN,EAAOiuD,GAAQ,GAElCA,EAAS,GAGlBxD,EAAO9pD,UAAU6zD,aAAe,SAAuBx0D,EAAOiuD,EAAQmE,GAYpE,OAXApyD,GAASA,EACTiuD,GAAkB,EACbmE,GAAUN,EAAS5kD,KAAMlN,EAAOiuD,EAAQ,EAAG,YAAa,YACzDxD,EAAOQ,qBACT/9C,KAAK+gD,GAAmB,IAARjuD,EAChBkN,KAAK+gD,EAAS,GAAMjuD,IAAU,EAC9BkN,KAAK+gD,EAAS,GAAMjuD,IAAU,GAC9BkN,KAAK+gD,EAAS,GAAMjuD,IAAU,IAE9BiyD,EAAkB/kD,KAAMlN,EAAOiuD,GAAQ,GAElCA,EAAS,GAGlBxD,EAAO9pD,UAAU8zD,aAAe,SAAuBz0D,EAAOiuD,EAAQmE,GAapE,OAZApyD,GAASA,EACTiuD,GAAkB,EACbmE,GAAUN,EAAS5kD,KAAMlN,EAAOiuD,EAAQ,EAAG,YAAa,YACzDjuD,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GACxCyqD,EAAOQ,qBACT/9C,KAAK+gD,GAAWjuD,IAAU,GAC1BkN,KAAK+gD,EAAS,GAAMjuD,IAAU,GAC9BkN,KAAK+gD,EAAS,GAAMjuD,IAAU,EAC9BkN,KAAK+gD,EAAS,GAAc,IAARjuD,GAEpBiyD,EAAkB/kD,KAAMlN,EAAOiuD,GAAQ,GAElCA,EAAS,GAgBlBxD,EAAO9pD,UAAU+zD,aAAe,SAAuB10D,EAAOiuD,EAAQmE,GACpE,OAAOD,EAAWjlD,KAAMlN,EAAOiuD,GAAQ,EAAMmE,IAG/C3H,EAAO9pD,UAAUg0D,aAAe,SAAuB30D,EAAOiuD,EAAQmE,GACpE,OAAOD,EAAWjlD,KAAMlN,EAAOiuD,GAAQ,EAAOmE,IAWhD3H,EAAO9pD,UAAUi0D,cAAgB,SAAwB50D,EAAOiuD,EAAQmE,GACtE,OAAOC,EAAYnlD,KAAMlN,EAAOiuD,GAAQ,EAAMmE,IAGhD3H,EAAO9pD,UAAUk0D,cAAgB,SAAwB70D,EAAOiuD,EAAQmE,GACtE,OAAOC,EAAYnlD,KAAMlN,EAAOiuD,GAAQ,EAAOmE,IAIjD3H,EAAO9pD,UAAU2rD,KAAO,SAAelmD,EAAQ0uD,EAAa9oD,EAAO6gD,GAQjE,GAPK7gD,IAAOA,EAAQ,GACf6gD,GAAe,IAARA,IAAWA,EAAM3/C,KAAKhL,QAC9B4yD,GAAe1uD,EAAOlE,SAAQ4yD,EAAc1uD,EAAOlE,QAClD4yD,IAAaA,EAAc,GAC5BjI,EAAM,GAAKA,EAAM7gD,IAAO6gD,EAAM7gD,GAG9B6gD,IAAQ7gD,EAAO,OAAO,EAC1B,GAAsB,IAAlB5F,EAAOlE,QAAgC,IAAhBgL,KAAKhL,OAAc,OAAO,EAGrD,GAAI4yD,EAAc,EAChB,MAAM,IAAI1J,WAAW,6BAEvB,GAAIp/C,EAAQ,GAAKA,GAASkB,KAAKhL,OAAQ,MAAM,IAAIkpD,WAAW,6BAC5D,GAAIyB,EAAM,EAAG,MAAM,IAAIzB,WAAW,2BAG9ByB,EAAM3/C,KAAKhL,SAAQ2qD,EAAM3/C,KAAKhL,QAC9BkE,EAAOlE,OAAS4yD,EAAcjI,EAAM7gD,IACtC6gD,EAAMzmD,EAAOlE,OAAS4yD,EAAc9oD,GAGtC,IACIjN,EADAstD,EAAMQ,EAAM7gD,EAGhB,GAAIkB,OAAS9G,GAAU4F,EAAQ8oD,GAAeA,EAAcjI,EAE1D,IAAK9tD,EAAIstD,EAAM,EAAGttD,GAAK,IAAKA,EAC1BqH,EAAOrH,EAAI+1D,GAAe5nD,KAAKnO,EAAIiN,QAEhC,GAAIqgD,EAAM,MAAS5B,EAAOQ,oBAE/B,IAAKlsD,EAAI,EAAGA,EAAIstD,IAAOttD,EACrBqH,EAAOrH,EAAI+1D,GAAe5nD,KAAKnO,EAAIiN,QAGrCq/C,WAAW1qD,UAAUk+B,IAAI3/B,KACvBkH,EACA8G,KAAKijD,SAASnkD,EAAOA,EAAQqgD,GAC7ByI,GAIJ,OAAOzI,GAOT5B,EAAO9pD,UAAU0tB,KAAO,SAAezsB,EAAKoK,EAAO6gD,EAAKb,GAEtD,GAAmB,iBAARpqD,EAAkB,CAS3B,GARqB,iBAAVoK,GACTggD,EAAWhgD,EACXA,EAAQ,EACR6gD,EAAM3/C,KAAKhL,QACa,iBAAR2qD,IAChBb,EAAWa,EACXA,EAAM3/C,KAAKhL,QAEM,IAAfN,EAAIM,OAAc,CACpB,IAAIo0B,EAAO10B,EAAI4P,WAAW,GACtB8kB,EAAO,MACT10B,EAAM00B,GAGV,QAAiBrb,IAAb+wC,GAA8C,iBAAbA,EACnC,MAAM,IAAIN,UAAU,6BAEtB,GAAwB,iBAAbM,IAA0BvB,EAAOwB,WAAWD,GACrD,MAAM,IAAIN,UAAU,qBAAuBM,OAErB,iBAARpqD,IAChBA,GAAY,KAId,GAAIoK,EAAQ,GAAKkB,KAAKhL,OAAS8J,GAASkB,KAAKhL,OAAS2qD,EACpD,MAAM,IAAIzB,WAAW,sBAGvB,GAAIyB,GAAO7gD,EACT,OAAOkB,KAQT,IAAInO,EACJ,GANAiN,KAAkB,EAClB6gD,OAAc5xC,IAAR4xC,EAAoB3/C,KAAKhL,OAAS2qD,IAAQ,EAE3CjrD,IAAKA,EAAM,GAGG,iBAARA,EACT,IAAK7C,EAAIiN,EAAOjN,EAAI8tD,IAAO9tD,EACzBmO,KAAKnO,GAAK6C,MAEP,CACL,IAAIgwD,EAAQnH,EAAOhpD,SAASG,GACxBA,EACA8qD,EAAY,IAAIjC,EAAO7oD,EAAKoqD,GAAUtqD,YACtC2qD,EAAMuF,EAAM1vD,OAChB,IAAKnD,EAAI,EAAGA,EAAI8tD,EAAM7gD,IAASjN,EAC7BmO,KAAKnO,EAAIiN,GAAS4lD,EAAM7yD,EAAIstD,GAIhC,OAAOn/C,MAMT,IAAI6nD,EAAoB,qBAmBxB,SAASpD,EAAOnxD,GACd,OAAIA,EAAI,GAAW,IAAMA,EAAEkB,SAAS,IAC7BlB,EAAEkB,SAAS,IAGpB,SAASgrD,EAAaX,EAAQ+C,GAE5B,IAAIU,EADJV,EAAQA,GAASkG,IAMjB,IAJA,IAAI9yD,EAAS6pD,EAAO7pD,OAChB+yD,EAAgB,KAChBrD,EAAQ,GAEH7yD,EAAI,EAAGA,EAAImD,IAAUnD,EAAG,CAI/B,IAHAywD,EAAYzD,EAAOv6C,WAAWzS,IAGd,OAAUywD,EAAY,MAAQ,CAE5C,IAAKyF,EAAe,CAElB,GAAIzF,EAAY,MAAQ,EAEjBV,GAAS,IAAM,GAAG8C,EAAM15C,KAAK,IAAM,IAAM,KAC9C,SACK,GAAInZ,EAAI,IAAMmD,EAAQ,EAEtB4sD,GAAS,IAAM,GAAG8C,EAAM15C,KAAK,IAAM,IAAM,KAC9C,SAIF+8C,EAAgBzF,EAEhB,SAIF,GAAIA,EAAY,MAAQ,EACjBV,GAAS,IAAM,GAAG8C,EAAM15C,KAAK,IAAM,IAAM,KAC9C+8C,EAAgBzF,EAChB,SAIFA,EAAkE,OAArDyF,EAAgB,OAAU,GAAKzF,EAAY,YAC/CyF,IAEJnG,GAAS,IAAM,GAAG8C,EAAM15C,KAAK,IAAM,IAAM,KAMhD,GAHA+8C,EAAgB,KAGZzF,EAAY,IAAM,CACpB,IAAKV,GAAS,GAAK,EAAG,MACtB8C,EAAM15C,KAAKs3C,QACN,GAAIA,EAAY,KAAO,CAC5B,IAAKV,GAAS,GAAK,EAAG,MACtB8C,EAAM15C,KACJs3C,GAAa,EAAM,IACP,GAAZA,EAAmB,UAEhB,GAAIA,EAAY,MAAS,CAC9B,IAAKV,GAAS,GAAK,EAAG,MACtB8C,EAAM15C,KACJs3C,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,SAEhB,MAAIA,EAAY,SASrB,MAAM,IAAIjtC,MAAM,sBARhB,IAAKusC,GAAS,GAAK,EAAG,MACtB8C,EAAM15C,KACJs3C,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,MAOzB,OAAOoC,EA4BT,SAASjF,EAAexoD,GACtB,OAAO2mD,EAAOoK,YAhIhB,SAAsB/wD,GAIpB,IAFAA,EAUF,SAAqBA,GACnB,OAAIA,EAAID,KAAaC,EAAID,OAClBC,EAAIC,QAAQ,aAAc,IAZ3B+wD,CAAWhxD,GAAKC,QAAQ2wD,EAAmB,KAEzC7yD,OAAS,EAAG,MAAO,GAE3B,KAAOiC,EAAIjC,OAAS,GAAM,GACxBiC,GAAY,IAEd,OAAOA,EAuHmBixD,CAAYjxD,IAGxC,SAASoqD,EAAY30C,EAAKy7C,EAAKpH,EAAQ/rD,GACrC,IAAK,IAAInD,EAAI,EAAGA,EAAImD,KACbnD,EAAIkvD,GAAUoH,EAAInzD,QAAYnD,GAAK6a,EAAI1X,UADhBnD,EAE5Bs2D,EAAIt2D,EAAIkvD,GAAUr0C,EAAI7a,GAExB,OAAOA,K,gCCvvDT,IAAIu2D,EAGJA,EAAI,WACH,OAAOpoD,KADJ,GAIJ,IAECooD,EAAIA,GAAK,IAAIC,SAAS,cAAb,GACR,MAAOpoD,GAEc,iBAAX5J,SAAqB+xD,EAAI/xD,QAOrCzE,EAAOD,QAAUy2D,G,6BCjBjBz2D,EAAQ+sD,WAuCR,SAAqB4J,GACnB,IAAIC,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAC3B,OAAuC,GAA9BE,EAAWC,GAAuB,EAAKA,GA1ClD/2D,EAAQq2D,YAiDR,SAAsBM,GACpB,IAAIK,EAcA92D,EAbA02D,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAEvB93B,EAAM,IAAIm4B,EAVhB,SAAsBN,EAAKG,EAAUC,GACnC,OAAuC,GAA9BD,EAAWC,GAAuB,EAAKA,EAS9BG,CAAYP,EAAKG,EAAUC,IAEzCI,EAAU,EAGV3J,EAAMuJ,EAAkB,EACxBD,EAAW,EACXA,EAGJ,IAAK52D,EAAI,EAAGA,EAAIstD,EAAKttD,GAAK,EACxB82D,EACGI,EAAUT,EAAIhkD,WAAWzS,KAAO,GAChCk3D,EAAUT,EAAIhkD,WAAWzS,EAAI,KAAO,GACpCk3D,EAAUT,EAAIhkD,WAAWzS,EAAI,KAAO,EACrCk3D,EAAUT,EAAIhkD,WAAWzS,EAAI,IAC/B4+B,EAAIq4B,KAAcH,GAAO,GAAM,IAC/Bl4B,EAAIq4B,KAAcH,GAAO,EAAK,IAC9Bl4B,EAAIq4B,KAAmB,IAANH,EAGK,IAApBD,IACFC,EACGI,EAAUT,EAAIhkD,WAAWzS,KAAO,EAChCk3D,EAAUT,EAAIhkD,WAAWzS,EAAI,KAAO,EACvC4+B,EAAIq4B,KAAmB,IAANH,GAGK,IAApBD,IACFC,EACGI,EAAUT,EAAIhkD,WAAWzS,KAAO,GAChCk3D,EAAUT,EAAIhkD,WAAWzS,EAAI,KAAO,EACpCk3D,EAAUT,EAAIhkD,WAAWzS,EAAI,KAAO,EACvC4+B,EAAIq4B,KAAcH,GAAO,EAAK,IAC9Bl4B,EAAIq4B,KAAmB,IAANH,GAGnB,OAAOl4B,GA3FT9+B,EAAQqwD,cAkHR,SAAwBgH,GAQtB,IAPA,IAAIL,EACAxJ,EAAM6J,EAAMh0D,OACZi0D,EAAa9J,EAAM,EACnB70C,EAAQ,GAIHzY,EAAI,EAAGq3D,EAAO/J,EAAM8J,EAAYp3D,EAAIq3D,EAAMr3D,GAH9B,MAInByY,EAAMU,KAAKm+C,EACTH,EAAOn3D,EAAIA,EALM,MAKgBq3D,EAAOA,EAAQr3D,EAL/B,QAUF,IAAfo3D,GACFN,EAAMK,EAAM7J,EAAM,GAClB70C,EAAMU,KACJo+C,EAAOT,GAAO,GACdS,EAAQT,GAAO,EAAK,IACpB,OAEsB,IAAfM,IACTN,GAAOK,EAAM7J,EAAM,IAAM,GAAK6J,EAAM7J,EAAM,GAC1C70C,EAAMU,KACJo+C,EAAOT,GAAO,IACdS,EAAQT,GAAO,EAAK,IACpBS,EAAQT,GAAO,EAAK,IACpB,MAIJ,OAAOr+C,EAAMC,KAAK,KA3IpB,IALA,IAAI6+C,EAAS,GACTL,EAAY,GACZH,EAA4B,oBAAfzK,WAA6BA,WAAa5lC,MAEvD6Q,EAAO,mEACFv3B,EAAI,EAAGstD,EAAM/1B,EAAKp0B,OAAQnD,EAAIstD,IAAOttD,EAC5Cu3D,EAAOv3D,GAAKu3B,EAAKv3B,GACjBk3D,EAAU3/B,EAAK9kB,WAAWzS,IAAMA,EAQlC,SAAS22D,EAASF,GAChB,IAAInJ,EAAMmJ,EAAItzD,OAEd,GAAImqD,EAAM,EAAI,EACZ,MAAM,IAAI9pC,MAAM,kDAKlB,IAAIozC,EAAWH,EAAIh8C,QAAQ,KAO3B,OANkB,IAAdm8C,IAAiBA,EAAWtJ,GAMzB,CAACsJ,EAJcA,IAAatJ,EAC/B,EACA,EAAKsJ,EAAW,GAsEtB,SAASU,EAAaH,EAAOlqD,EAAO6gD,GAGlC,IAFA,IAAIgJ,EARoBtxC,EASpB6uB,EAAS,GACJr0C,EAAIiN,EAAOjN,EAAI8tD,EAAK9tD,GAAK,EAChC82D,GACIK,EAAMn3D,IAAM,GAAM,WAClBm3D,EAAMn3D,EAAI,IAAM,EAAK,QACP,IAAfm3D,EAAMn3D,EAAI,IACbq0C,EAAOl7B,KAdFo+C,GADiB/xC,EAeMsxC,IAdT,GAAK,IACxBS,EAAO/xC,GAAO,GAAK,IACnB+xC,EAAO/xC,GAAO,EAAI,IAClB+xC,EAAa,GAAN/xC,IAaT,OAAO6uB,EAAO37B,KAAK,IAjGrBw+C,EAAU,IAAIzkD,WAAW,IAAM,GAC/BykD,EAAU,IAAIzkD,WAAW,IAAM,I,cCnB/B3S,EAAQ82B,KAAO,SAAUlzB,EAAQwrD,EAAQsI,EAAMC,EAAMC,GACnD,IAAItpD,EAAGhO,EACHu3D,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACT93D,EAAIw3D,EAAQE,EAAS,EAAK,EAC1Bp3D,EAAIk3D,GAAQ,EAAI,EAChBz1D,EAAI2B,EAAOwrD,EAASlvD,GAOxB,IALAA,GAAKM,EAEL8N,EAAIrM,GAAM,IAAO+1D,GAAU,EAC3B/1D,KAAQ+1D,EACRA,GAASH,EACFG,EAAQ,EAAG1pD,EAAS,IAAJA,EAAW1K,EAAOwrD,EAASlvD,GAAIA,GAAKM,EAAGw3D,GAAS,GAKvE,IAHA13D,EAAIgO,GAAM,IAAO0pD,GAAU,EAC3B1pD,KAAQ0pD,EACRA,GAASL,EACFK,EAAQ,EAAG13D,EAAS,IAAJA,EAAWsD,EAAOwrD,EAASlvD,GAAIA,GAAKM,EAAGw3D,GAAS,GAEvE,GAAU,IAAN1pD,EACFA,EAAI,EAAIypD,MACH,IAAIzpD,IAAMwpD,EACf,OAAOx3D,EAAI23D,IAAsB9B,KAAdl0D,GAAK,EAAI,GAE5B3B,GAAQ2W,KAAKk9C,IAAI,EAAGwD,GACpBrpD,GAAQypD,EAEV,OAAQ91D,GAAK,EAAI,GAAK3B,EAAI2W,KAAKk9C,IAAI,EAAG7lD,EAAIqpD,IAG5C33D,EAAQstD,MAAQ,SAAU1pD,EAAQzC,EAAOiuD,EAAQsI,EAAMC,EAAMC,GAC3D,IAAItpD,EAAGhO,EAAGC,EACNs3D,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBI,EAAe,KAATP,EAAc1gD,KAAKk9C,IAAI,GAAI,IAAMl9C,KAAKk9C,IAAI,GAAI,IAAM,EAC1Dj0D,EAAIw3D,EAAO,EAAKE,EAAS,EACzBp3D,EAAIk3D,EAAO,GAAK,EAChBz1D,EAAId,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQ8V,KAAKuC,IAAIrY,GAEbutD,MAAMvtD,IAAUA,IAAUg1D,KAC5B71D,EAAIouD,MAAMvtD,GAAS,EAAI,EACvBmN,EAAIwpD,IAEJxpD,EAAI2I,KAAKg+C,MAAMh+C,KAAKlJ,IAAI5M,GAAS8V,KAAKkhD,KAClCh3D,GAASZ,EAAI0W,KAAKk9C,IAAI,GAAI7lD,IAAM,IAClCA,IACA/N,GAAK,IAGLY,GADEmN,EAAIypD,GAAS,EACNG,EAAK33D,EAEL23D,EAAKjhD,KAAKk9C,IAAI,EAAG,EAAI4D,IAEpBx3D,GAAK,IACf+N,IACA/N,GAAK,GAGH+N,EAAIypD,GAASD,GACfx3D,EAAI,EACJgO,EAAIwpD,GACKxpD,EAAIypD,GAAS,GACtBz3D,GAAMa,EAAQZ,EAAK,GAAK0W,KAAKk9C,IAAI,EAAGwD,GACpCrpD,GAAQypD,IAERz3D,EAAIa,EAAQ8V,KAAKk9C,IAAI,EAAG4D,EAAQ,GAAK9gD,KAAKk9C,IAAI,EAAGwD,GACjDrpD,EAAI,IAIDqpD,GAAQ,EAAG/zD,EAAOwrD,EAASlvD,GAAS,IAAJI,EAAUJ,GAAKM,EAAGF,GAAK,IAAKq3D,GAAQ,GAI3E,IAFArpD,EAAKA,GAAKqpD,EAAQr3D,EAClBu3D,GAAQF,EACDE,EAAO,EAAGj0D,EAAOwrD,EAASlvD,GAAS,IAAJoO,EAAUpO,GAAKM,EAAG8N,GAAK,IAAKupD,GAAQ,GAE1Ej0D,EAAOwrD,EAASlvD,EAAIM,IAAU,IAAJyB,I,cClF5B,IAAIY,EAAW,GAAGA,SAElB5C,EAAOD,QAAU4mB,MAAM9jB,SAAW,SAAUg8B,GAC1C,MAA6B,kBAAtBj8B,EAASxC,KAAKy+B,K,gBCHvB7+B,EAAOD,QAAU,EAAQ,K,6BCEzB,IAAI2zB,EAAQ,EAAQ,GAChBjyB,EAAO,EAAQ,IACf02D,EAAQ,EAAQ,IAChBC,EAAc,EAAQ,IAS1B,SAASC,EAAeC,GACtB,IAAIjwC,EAAU,IAAI8vC,EAAMG,GACpBC,EAAW92D,EAAK02D,EAAMt2D,UAAU6zB,QAASrN,GAQ7C,OALAqL,EAAM1uB,OAAOuzD,EAAUJ,EAAMt2D,UAAWwmB,GAGxCqL,EAAM1uB,OAAOuzD,EAAUlwC,GAEhBkwC,EAIT,IAAI9M,EAAQ4M,EAtBG,EAAQ,KAyBvB5M,EAAM0M,MAAQA,EAGd1M,EAAMlqD,OAAS,SAAgBi3D,GAC7B,OAAOH,EAAeD,EAAY3M,EAAMn3B,SAAUkkC,KAIpD/M,EAAM9zB,OAAS,EAAQ,IACvB8zB,EAAMgN,YAAc,EAAQ,IAC5BhN,EAAMiN,SAAW,EAAQ,IAGzBjN,EAAM7hC,IAAM,SAAa+uC,GACvB,OAAOtjC,QAAQzL,IAAI+uC,IAErBlN,EAAMmN,OAAS,EAAQ,IAEvB54D,EAAOD,QAAU0rD,EAGjBzrD,EAAOD,QAAQ84D,QAAUpN,G;;;;;;;AC7CzBzrD,EAAOD,QAAU,SAAmBmD,GAClC,OAAc,MAAPA,GAAkC,MAAnBA,EAAIgsB,aACY,mBAA7BhsB,EAAIgsB,YAAYvsB,UAA2BO,EAAIgsB,YAAYvsB,SAASO,K,6BCP/E,IAAIwwB,EAAQ,EAAQ,GAChBuB,EAAW,EAAQ,IACnB6jC,EAAqB,EAAQ,IAC7BC,EAAkB,EAAQ,IAC1BX,EAAc,EAAQ,IAO1B,SAASD,EAAMK,GACbpqD,KAAKkmB,SAAWkkC,EAChBpqD,KAAK4qD,aAAe,CAClBtjC,QAAS,IAAIojC,EACbnwD,SAAU,IAAImwD,GASlBX,EAAMt2D,UAAU6zB,QAAU,SAAiBlW,GAGnB,iBAAXA,GACTA,EAAS1a,UAAU,IAAM,IAClBwK,IAAMxK,UAAU,GAEvB0a,EAASA,GAAU,IAGrBA,EAAS44C,EAAYhqD,KAAKkmB,SAAU9U,IAC7Bf,OAASe,EAAOf,OAASe,EAAOf,OAAOqY,cAAgB,MAG9D,IAAImiC,EAAQ,CAACF,OAAiB58C,GAC1Bib,EAAU/B,QAAQC,QAAQ9V,GAU9B,IARApR,KAAK4qD,aAAatjC,QAAQzyB,SAAQ,SAAoCi2D,GACpED,EAAMlkD,QAAQmkD,EAAYC,UAAWD,EAAYE,aAGnDhrD,KAAK4qD,aAAarwD,SAAS1F,SAAQ,SAAkCi2D,GACnED,EAAM7/C,KAAK8/C,EAAYC,UAAWD,EAAYE,aAGzCH,EAAM71D,QACXg0B,EAAUA,EAAQ3tB,KAAKwvD,EAAMI,QAASJ,EAAMI,SAG9C,OAAOjiC,GAGT+gC,EAAMt2D,UAAUy3D,OAAS,SAAgB95C,GAEvC,OADAA,EAAS44C,EAAYhqD,KAAKkmB,SAAU9U,GAC7ByV,EAASzV,EAAOlQ,IAAKkQ,EAAOoU,OAAQpU,EAAOqU,kBAAkBvuB,QAAQ,MAAO,KAIrFouB,EAAMzwB,QAAQ,CAAC,SAAU,MAAO,OAAQ,YAAY,SAA6Bwb,GAE/E05C,EAAMt2D,UAAU4c,GAAU,SAASnP,EAAKkQ,GACtC,OAAOpR,KAAKsnB,QAAQhC,EAAM/uB,MAAM6a,GAAU,GAAI,CAC5Cf,OAAQA,EACRnP,IAAKA,SAKXokB,EAAMzwB,QAAQ,CAAC,OAAQ,MAAO,UAAU,SAA+Bwb,GAErE05C,EAAMt2D,UAAU4c,GAAU,SAASnP,EAAKvG,EAAMyW,GAC5C,OAAOpR,KAAKsnB,QAAQhC,EAAM/uB,MAAM6a,GAAU,GAAI,CAC5Cf,OAAQA,EACRnP,IAAKA,EACLvG,KAAMA,SAKZ/I,EAAOD,QAAUo4D,G,6BCnFjB,IAAIzkC,EAAQ,EAAQ,GAEpB,SAASolC,IACP1qD,KAAKmrD,SAAW,GAWlBT,EAAmBj3D,UAAU23D,IAAM,SAAaL,EAAWC,GAKzD,OAJAhrD,KAAKmrD,SAASngD,KAAK,CACjB+/C,UAAWA,EACXC,SAAUA,IAELhrD,KAAKmrD,SAASn2D,OAAS,GAQhC01D,EAAmBj3D,UAAU43D,MAAQ,SAAer+C,GAC9ChN,KAAKmrD,SAASn+C,KAChBhN,KAAKmrD,SAASn+C,GAAM,OAYxB09C,EAAmBj3D,UAAUoB,QAAU,SAAiBE,GACtDuwB,EAAMzwB,QAAQmL,KAAKmrD,UAAU,SAAwB3xD,GACzC,OAANA,GACFzE,EAAGyE,OAKT5H,EAAOD,QAAU+4D,G,6BCjDjB,IAAIplC,EAAQ,EAAQ,GAChBgmC,EAAgB,EAAQ,IACxBhB,EAAW,EAAQ,IACnBpkC,EAAW,EAAQ,IACnBqlC,EAAgB,EAAQ,IACxBC,EAAc,EAAQ,IAK1B,SAASC,EAA6Br6C,GAChCA,EAAO2X,aACT3X,EAAO2X,YAAY2iC,mBAUvB95D,EAAOD,QAAU,SAAyByf,GAkCxC,OAjCAq6C,EAA6Br6C,GAGzBA,EAAOmb,UAAYg/B,EAAcn6C,EAAOlQ,OAC1CkQ,EAAOlQ,IAAMsqD,EAAYp6C,EAAOmb,QAASnb,EAAOlQ,MAIlDkQ,EAAOlW,QAAUkW,EAAOlW,SAAW,GAGnCkW,EAAOzW,KAAO2wD,EACZl6C,EAAOzW,KACPyW,EAAOlW,QACPkW,EAAOgV,kBAIThV,EAAOlW,QAAUoqB,EAAM/uB,MACrB6a,EAAOlW,QAAQyrB,QAAU,GACzBvV,EAAOlW,QAAQkW,EAAOf,SAAW,GACjCe,EAAOlW,SAAW,IAGpBoqB,EAAMzwB,QACJ,CAAC,SAAU,MAAO,OAAQ,OAAQ,MAAO,QAAS,WAClD,SAA2Bwb,UAClBe,EAAOlW,QAAQmV,OAIZe,EAAO6U,SAAWC,EAASD,SAE1B7U,GAAQ/V,MAAK,SAA6Bd,GAUvD,OATAkxD,EAA6Br6C,GAG7B7W,EAASI,KAAO2wD,EACd/wD,EAASI,KACTJ,EAASW,QACTkW,EAAOiV,mBAGF9rB,KACN,SAA4BoxD,GAc7B,OAbKrB,EAASqB,KACZF,EAA6Br6C,GAGzBu6C,GAAUA,EAAOpxD,WACnBoxD,EAAOpxD,SAASI,KAAO2wD,EACrBK,EAAOpxD,SAASI,KAChBgxD,EAAOpxD,SAASW,QAChBkW,EAAOiV,qBAKNY,QAAQE,OAAOwkC,Q,6BCjF1B,IAAIrmC,EAAQ,EAAQ,GAUpB1zB,EAAOD,QAAU,SAAuBgJ,EAAMO,EAAS0wD,GAMrD,OAJAtmC,EAAMzwB,QAAQ+2D,GAAK,SAAmB72D,GACpC4F,EAAO5F,EAAG4F,EAAMO,MAGXP,I,6BChBT,IAAI2qB,EAAQ,EAAQ,GAEpB1zB,EAAOD,QAAU,SAA6BuJ,EAAS2wD,GACrDvmC,EAAMzwB,QAAQqG,GAAS,SAAuBpI,EAAOV,GAC/CA,IAASy5D,GAAkBz5D,EAAKyX,gBAAkBgiD,EAAehiD,gBACnE3O,EAAQ2wD,GAAkB/4D,SACnBoI,EAAQ9I,S,6BCNrB,IAAI40B,EAAc,EAAQ,IAS1Bp1B,EAAOD,QAAU,SAAgBu1B,EAASC,EAAQ5sB,GAChD,IAAImsB,EAAiBnsB,EAAS6W,OAAOsV,gBAChCA,GAAkBA,EAAensB,EAASoK,QAC7CuiB,EAAQ3sB,GAER4sB,EAAOH,EACL,mCAAqCzsB,EAASoK,OAC9CpK,EAAS6W,OACT,KACA7W,EAAS+sB,QACT/sB,M,6BCTN3I,EAAOD,QAAU,SAAsByc,EAAOgD,EAAQgY,EAAM9B,EAAS/sB,GA4BnE,OA3BA6T,EAAMgD,OAASA,EACXgY,IACFhb,EAAMgb,KAAOA,GAGfhb,EAAMkZ,QAAUA,EAChBlZ,EAAM7T,SAAWA,EACjB6T,EAAM09C,cAAe,EAErB19C,EAAMk2C,OAAS,WACb,MAAO,CAELn7B,QAASnpB,KAAKmpB,QACd/2B,KAAM4N,KAAK5N,KAEXmG,YAAayH,KAAKzH,YAClBwzD,OAAQ/rD,KAAK+rD,OAEbC,SAAUhsD,KAAKgsD,SACfC,WAAYjsD,KAAKisD,WACjBC,aAAclsD,KAAKksD,aACnBC,MAAOnsD,KAAKmsD,MAEZ/6C,OAAQpR,KAAKoR,OACbgY,KAAMppB,KAAKopB,OAGRhb,I,6BCtCT,IAAIkX,EAAQ,EAAQ,GAIhB8mC,EAAoB,CACtB,MAAO,gBAAiB,iBAAkB,eAAgB,OAC1D,UAAW,OAAQ,OAAQ,oBAAqB,sBAChD,gBAAiB,WAAY,eAAgB,sBAC7C,UAAW,cAAe,cAgB5Bx6D,EAAOD,QAAU,SAAsBuJ,GACrC,IACI9H,EACAsB,EACA7C,EAHA4Y,EAAS,GAKb,OAAKvP,GAELoqB,EAAMzwB,QAAQqG,EAAQoG,MAAM,OAAO,SAAgB8gB,GAKjD,GAJAvwB,EAAIuwB,EAAK9V,QAAQ,KACjBlZ,EAAMkyB,EAAMtuB,KAAKorB,EAAK++B,OAAO,EAAGtvD,IAAI62B,cACpCh0B,EAAM4wB,EAAMtuB,KAAKorB,EAAK++B,OAAOtvD,EAAI,IAE7BuB,EAAK,CACP,GAAIqX,EAAOrX,IAAQg5D,EAAkB9/C,QAAQlZ,IAAQ,EACnD,OAGAqX,EAAOrX,GADG,eAARA,GACaqX,EAAOrX,GAAOqX,EAAOrX,GAAO,IAAIijC,OAAO,CAAC3hC,IAEzC+V,EAAOrX,GAAOqX,EAAOrX,GAAO,KAAOsB,EAAMA,MAKtD+V,GAnBgBA,I,6BC9BzB,IAAI6a,EAAQ,EAAQ,GAEpB1zB,EAAOD,QACL2zB,EAAMpvB,uBAIJ,WACE,IAEIm2D,EAFAC,EAAO,kBAAkB3rC,KAAKxqB,UAAUo2D,WACxCC,EAAiBl2D,SAASgD,cAAc,KAS5C,SAASmzD,EAAWvrD,GAClB,IAAIE,EAAOF,EAWX,OATIorD,IAEFE,EAAejzD,aAAa,OAAQ6H,GACpCA,EAAOorD,EAAeprD,MAGxBorD,EAAejzD,aAAa,OAAQ6H,GAG7B,CACLA,KAAMorD,EAAeprD,KACrBsrD,SAAUF,EAAeE,SAAWF,EAAeE,SAASx1D,QAAQ,KAAM,IAAM,GAChFy1D,KAAMH,EAAeG,KACrBC,OAAQJ,EAAeI,OAASJ,EAAeI,OAAO11D,QAAQ,MAAO,IAAM,GAC3E+M,KAAMuoD,EAAevoD,KAAOuoD,EAAevoD,KAAK/M,QAAQ,KAAM,IAAM,GACpE21D,SAAUL,EAAeK,SACzBC,KAAMN,EAAeM,KACrBC,SAAiD,MAAtCP,EAAeO,SAASnjD,OAAO,GACxC4iD,EAAeO,SACf,IAAMP,EAAeO,UAY3B,OARAV,EAAYI,EAAWp2D,OAAO8K,SAASC,MAQhC,SAAyB4rD,GAC9B,IAAIviD,EAAU6a,EAAM9vB,SAASw3D,GAAeP,EAAWO,GAAcA,EACrE,OAAQviD,EAAOiiD,WAAaL,EAAUK,UAClCjiD,EAAOkiD,OAASN,EAAUM,MAhDlC,GAsDS,WACL,OAAO,I,6BC9Df,IAAIrnC,EAAQ,EAAQ,GAEpB1zB,EAAOD,QACL2zB,EAAMpvB,uBAIK,CACL+oD,MAAO,SAAe7sD,EAAMU,EAAOm6D,EAASnoB,EAAM/yB,EAAQm7C,GACxD,IAAIC,EAAS,GACbA,EAAOniD,KAAK5Y,EAAO,IAAMwmB,mBAAmB9lB,IAExCwyB,EAAM7vB,SAASw3D,IACjBE,EAAOniD,KAAK,WAAa,IAAIlC,KAAKmkD,GAASG,eAGzC9nC,EAAM9vB,SAASsvC,IACjBqoB,EAAOniD,KAAK,QAAU85B,GAGpBxf,EAAM9vB,SAASuc,IACjBo7C,EAAOniD,KAAK,UAAY+G,IAGX,IAAXm7C,GACFC,EAAOniD,KAAK,UAGd1U,SAAS62D,OAASA,EAAO5iD,KAAK,OAGhCke,KAAM,SAAcr2B,GAClB,IAAI+nB,EAAQ7jB,SAAS62D,OAAOhzC,MAAM,IAAI2V,OAAO,aAAe19B,EAAO,cACnE,OAAQ+nB,EAAQkzC,mBAAmBlzC,EAAM,IAAM,MAGjDzd,OAAQ,SAAgBtK,GACtB4N,KAAKi/C,MAAM7sD,EAAM,GAAI0W,KAAKwkD,MAAQ,SAO/B,CACLrO,MAAO,aACPx2B,KAAM,WAAkB,OAAO,MAC/B/rB,OAAQ,e,6BCzChB9K,EAAOD,QAAU,SAAuBuP,GAItC,MAAO,gCAAgCyf,KAAKzf,K,6BCH9CtP,EAAOD,QAAU,SAAqB46B,EAASghC,GAC7C,OAAOA,EACHhhC,EAAQr1B,QAAQ,OAAQ,IAAM,IAAMq2D,EAAYr2D,QAAQ,OAAQ,IAChEq1B,I,6BCVN,IAAIhD,EAAS,EAAQ,IAQrB,SAAS8gC,EAAYmD,GACnB,GAAwB,mBAAbA,EACT,MAAM,IAAIhP,UAAU,gCAGtB,IAAIiP,EACJztD,KAAKgpB,QAAU,IAAI/B,SAAQ,SAAyBC,GAClDumC,EAAiBvmC,KAGnB,IAAIwmC,EAAQ1tD,KACZwtD,GAAS,SAAgBrkC,GACnBukC,EAAM/B,SAKV+B,EAAM/B,OAAS,IAAIpiC,EAAOJ,GAC1BskC,EAAeC,EAAM/B,YAOzBtB,EAAY52D,UAAUi4D,iBAAmB,WACvC,GAAI1rD,KAAK2rD,OACP,MAAM3rD,KAAK2rD,QAQftB,EAAYpxD,OAAS,WACnB,IAAIgI,EAIJ,MAAO,CACLysD,MAJU,IAAIrD,GAAY,SAAkBn4D,GAC5C+O,EAAS/O,KAIT+O,OAAQA,IAIZrP,EAAOD,QAAU04D,G,6BClCjBz4D,EAAOD,QAAU,SAAgB0O,GAC/B,OAAO,SAAcowB,GACnB,OAAOpwB,EAASglB,MAAM,KAAMoL,M,gBCXhC,MAAMt8B,EAAcL,EAAQ,GACtB25B,EAAe35B,EAAQ,IAE7B,SAASM,EAAYgT,EAAK0K,EAAYE,EAAanO,EAAQ8pD,GAE1D3tD,KAAK29B,QACL39B,KAAKoH,IAAMA,EAIP4K,GAAsC,iBAAhBA,GACzBhS,KAAKiS,gBAAgBD,GAElBF,GAAoC,iBAAfA,GACxB9R,KAAK4tD,eAAiB97C,EACtB9R,KAAKyR,eAAeK,IAEpB9R,KAAK4tD,gBAAiB,EAGvB5tD,KAAK6D,OAASA,EAEd7D,KAAK2tD,YAAcA,EAEnB3tD,KAAKmS,QAAS,EAkcf,SAAS07C,EAAcr6D,EAAUs6D,EAAQjqD,GACxC7D,KAAK+tD,UAAYv6D,EACjBwM,KAAK8tD,OAASA,EACd9tD,KAAK6D,OAASA,EACd7D,KAAKqc,OAAS,GAiPf,SAAS2xC,EAAUlrD,EAAOe,EAAQK,GACjClE,KAAKmQ,KAAM,EACXnQ,KAAK6D,OAASA,EAEd7D,KAAKkS,SAAUrO,GAASA,EAAOqO,OAC/BlS,KAAKkE,MAAQA,EACTpB,GACH9C,KAAKszC,KAAKxwC,GAkSZ,SAASmrD,EAAWnrD,EAAOe,GAC1B7D,KAAKmQ,KAAM,EACXnQ,KAAK6D,OAASA,EAEd7D,KAAKkS,SAAUrO,GAASA,EAAOqO,OAC3BpP,GACH9C,KAAKszC,KAAKxwC,GA2GZ,SAASorD,EAAYrnD,GACpB7G,KAAK+G,IAAM,EACX/G,KAAKgH,IAAM,EACPH,GAAa7G,KAAKmuD,gBAAgBtnD,GA9kCvCzS,EAAYX,UAAUwe,gBAAkB,SAAUD,GACjD,IAAK,IAAIsY,EAAI,EAAGA,EAAItY,EAAYhd,OAAQs1B,GAAK,EAAG,CAC3CtY,EAAYsY,GAAG,cAAatqB,KAAKouD,eAAiBp8C,EAAYsY,GAAG,aAErE,MAAM+jC,EAAK,IAAIJ,EAAWj8C,EAAYsY,IACtC,GAAI+jC,EAAGC,YACFtuD,KAAKgS,cAAahS,KAAKgS,YAAc,SACe,IAA9ChS,KAAKgS,YAAYA,EAAYsY,GAAG92B,YACzCwM,KAAKgS,YAAYA,EAAYsY,GAAG92B,UAAY,IAE7CwM,KAAKgS,YAAYA,EAAYsY,GAAG92B,UAAY66D,EACxCA,EAAG15D,YAAcqL,KAAKkvB,WAAWld,EAAYsY,GAAG92B,WACnD,IAAK,IAAI3B,EAAI,EAAGA,EAAImO,KAAKkvB,WAAWld,EAAYsY,GAAG92B,UAAU6oB,OAAOrnB,OAAQnD,GAAK,EAChFmO,KAAKkvB,WAAWld,EAAYsY,GAAG92B,UAAU6oB,OAAOxqB,GAAGogB,gBAAgBD,EAAYsY,GAAGxnB,OAKtF,OAAO9C,MAMR5L,EAAYX,UAAU86D,UAAY,WACjC,OAAQp6D,EAAYwpC,MAAM39B,KAAKgS,cAOhC5d,EAAYX,UAAUge,eAAiB,SAAU+8C,GAChD,GAAsB,iBAAXA,GAAwBA,EAAOx5D,OAA1C,CACKgL,KAAK4tD,iBAAgB5tD,KAAK4tD,eAAiBY,IAC3CxuD,KAAKkS,QAAUs8C,EAAO,GAAGC,cAAazuD,KAAKkS,OAASs8C,EAAO,GAAGC,aACnE,IAAK,IAAI58D,EAAI,EAAGA,EAAI28D,EAAOx5D,OAAQnD,GAAK,EAAG,CACtC28D,EAAO38D,GAAG,cAAamO,KAAKouD,eAAiBI,EAAO38D,GAAG,aAC3D,IAAIi8D,EAAS9tD,KAAK0uD,sBAAsBF,EAAO38D,GAAG2B,SAAUg7D,EAAO38D,IAC/Di8D,EAAO/oD,iBACV+oD,EAASA,EAAOa,oBAAoBH,EAAO38D,GAAGoT,SAE7CxF,QAAQC,IAAK,mBAAkB8uD,EAAO38D,GAAGoT,SAEhC6oD,EAAOc,YACjBd,EAASA,EAAOe,eAAeL,EAAO38D,KAEnCi8D,SACgD,IAAxC9tD,KAAKkvB,WAAWs/B,EAAO38D,GAAG2B,YACpCwM,KAAKkvB,WAAWs/B,EAAO38D,GAAG2B,UAAY,IAAIq6D,EAAcW,EAAO38D,GAAG2B,SAAUs6D,EAAQ9tD,OAErFA,KAAKkvB,WAAWs/B,EAAO38D,GAAG2B,UAAUs7D,SAASN,EAAO38D,KAGtD,OAAOmO,OAMR5L,EAAYX,UAAUs7D,WAAa,SAAUptD,EAAMkC,GAClD,GAAI7D,KAAK2tD,YAAa,OAAO3tD,KAAK2tD,YAClC,MAAMqB,EAAK,CAAEj1D,KAAM,iBAAkBvG,SAAUmO,GAC/CqtD,EAAG/pD,MAAQjF,KAAKoH,IAChB4nD,EAAGj9C,OAASlO,EAAOuD,IACnB4nD,EAAGP,YAAc5qD,EAAOqO,OACxB88C,EAAGlsD,MAAQ,GACX,IAAK,MAAMnB,KAAQpP,OAAOoW,KAAK3I,KAAKkvB,YACnC8/B,EAAGlsD,MAAQksD,EAAGlsD,MAAMuzB,OAAO24B,EAAGlsD,MAAO9C,KAAKkvB,WAAWvtB,GAAMstD,eAE5D,OAAOD,GAGR56D,EAAYX,UAAUw7D,YAAc,SAAUttD,EAAMkC,GACnD,IAAI2qD,EAAS,GACb,IAAK,MAAM7sD,KAAQpP,OAAOoW,KAAK3I,KAAKkvB,YACnCs/B,EAASA,EAAOn4B,OAAOm4B,EAAQxuD,KAAKkvB,WAAWvtB,GAAMstD,eAEtD,OAAOT,GAGRp6D,EAAYX,UAAUy7D,MAAQ,WAC7B,OAAOlvD,KAAKmS,QAMb/d,EAAYX,UAAUkqC,MAAQ,WAE7B39B,KAAKkvB,WAAa,GAClBlvB,KAAKmvD,aAAe,GACpBnvD,KAAKkS,QAAS,EACdlS,KAAKoH,KAAM,GAMZhT,EAAYX,UAAU6R,MAAQ,SAAU3D,GACvC,GAAIA,EAAM,CACT,MAAMytD,EAAQ,GACd,IAAK,IAAIv9D,EAAI,EAAGA,EAAImO,KAAK4tD,eAAe54D,OAAQnD,GAAK,EAChDmO,KAAK4tD,eAAe/7D,GAAG2B,WAAamO,GACvCytD,EAAMpkD,KAAKhL,KAAK4tD,eAAe/7D,IAG7BmO,KAAKkvB,WAAWvtB,KAAO3B,KAAKkvB,WAAWvtB,GAAQ,IACnD3B,KAAKyR,eAAe29C,QAEpBpvD,KAAKmvD,aAAe,GACpBnvD,KAAKkvB,WAAa,GAClBlvB,KAAKyR,eAAezR,KAAK4tD,iBAO3Bx5D,EAAYX,UAAUgyC,MAAQ,WAC7B,IAAK,MAAM9jC,KAAQpP,OAAOoW,KAAK3I,KAAKkvB,YACnClvB,KAAKkvB,WAAWvtB,GAAM8jC,QAEvB,OAAOzlC,MAMR5L,EAAYX,UAAU+e,OAAS,SAAUC,EAAO4d,EAASh4B,IACrCA,GAAWA,EAAQg3D,eAC3B5hC,EAAayC,oBAAoBE,UAAU3d,EAAOzS,KAAMqwB,GAElE,IAAK,MAAM1uB,KAAQpP,OAAOoW,KAAK3I,KAAKkvB,YACnClvB,KAAKkvB,WAAWvtB,GAAM6Q,OAAOC,EAAO4d,EAASh4B,GAG/C,OAAO2H,MAUR5L,EAAYX,UAAUi7D,sBAAwB,SAAU/sD,EAAMwoD,GAC7D,GAAInqD,KAAKgS,aAA2C,iBAArBhS,KAAKgS,aAA8D,iBAA3BhS,KAAKgS,YAAYrQ,GACvF,OAAO3B,KAAKgS,YAAYrQ,GAEzB,GAAIwoD,EAAU,CAEb,OADW,IAAI8D,EAAW9D,GAG3B,QAAInqD,KAAKkvB,WAAWvtB,IACZ,IAAIssD,EAAWjuD,KAAKkvB,WAAWvtB,GAAM0a,OAAO,KAQrDjoB,EAAYX,UAAU67D,cAAgB,SAAUv1D,GAC/C,GAAW,UAARA,IAAqBiG,KAAKgS,YAC5B,OAAOzf,OAAOoW,KAAK3I,KAAKkvB,YAEzB,GAAY,WAARn1B,EAAmB,CACtB,MAAMw1D,EAASh9D,OAAOoW,KAAK3I,KAAKkvB,YAC1B1T,EAAMjpB,OAAOoW,KAAK3I,KAAKgS,aACvBw9C,EAAU,GAChB,IAAK,IAAI39D,EAAI,EAAGA,EAAI2pB,EAAIxmB,OAAQnD,KACA,GAA3B09D,EAAOjjD,QAAQkP,EAAI3pB,MAAyC,GAA5B29D,EAAQljD,QAAQkP,EAAI3pB,KACvD29D,EAAQxkD,KAAKwQ,EAAI3pB,IAGnB,OAAO29D,EAER,OAAOj9D,OAAOoW,KAAK3I,KAAKgS,cAQzB5d,EAAYX,UAAU+T,uBAAyB,WAC9C,IAAIgoD,EAAUxvD,KAAKsvD,cAAc,WACjC,MAAMG,EAAW,GACjB,IAAK,IAAI59D,EAAI,EAAGA,EAAI29D,EAAQx6D,OAAQnD,IAAK,CACxC,MACM69D,EAAO,CAAE11D,MADAgG,KAAK0uD,sBAAsBc,EAAQ39D,IACrBgT,WAAY/R,MAAO08D,EAAQ39D,IACxD49D,EAASzkD,KAAK0kD,GAEf,OAAOD,GAMRr7D,EAAYX,UAAUiT,sBAAwB,WAC7C,IAAI0oD,EAAQpvD,KAAKsvD,cAAc,UAC/B,MAAMC,EAAS,GACf,IAAK,IAAI19D,EAAI,EAAGA,EAAIu9D,EAAMp6D,OAAQnD,IAAK,CACtC,MACM69D,EAAO,CAAE11D,MADAgG,KAAK0uD,sBAAsBU,EAAMv9D,IACnBgT,WAAY/R,MAAOs8D,EAAMv9D,IACtD09D,EAAOvkD,KAAK0kD,GAEb,OAAOH,GAMRn7D,EAAYX,UAAU2e,eAAiB,SAAUu9C,GAC5CA,IAAO3vD,KAAKkS,OAASy9C,GACzBA,EAASA,GAASx7D,EAAYgkC,UAC9B,MAAMjJ,EAAa,GACnB,GAAGlvB,KAAKgS,YACP,IAAK,MAAMrQ,KAAQpP,OAAOoW,KAAK3I,KAAKgS,aAAc,CACjD,MAAM49C,EAAK5vD,KAAK0uD,sBAAsB/sD,GACtCutB,EAAWvtB,GAAQ,IAAIksD,EAAclsD,EAAMiuD,EAAI5vD,MAC/CkvB,EAAWvtB,GAAMyQ,eAAeu9C,GAGlC3vD,KAAKkvB,WAAaA,EAClBlvB,KAAK4tD,eAAiB,GACtB,IAAK,MAAMjsD,KAAQpP,OAAOoW,KAAK3I,KAAKkvB,YACnClvB,KAAK4tD,eAAe5iD,KAAKhL,KAAKkvB,WAAWvtB,GAAMstD,eAEhD,OAAOjvD,MAMR5L,EAAYX,UAAU4R,MAAQ,SAAUsqD,GACvC,MAAMzgC,EAAa,GACb2gC,EAAS,IAAIz7D,EAAY4L,KAAKoH,KAAK,GAAO,EAAOpH,KAAK6D,QAC5DgsD,EAAO79C,YAAchS,KAAKgS,YAC1B69C,EAAO39C,OAASy9C,EAChB,IAAK,MAAMhuD,KAAQpP,OAAOoW,KAAK3I,KAAKkvB,YACnCA,EAAWvtB,GAAQ3B,KAAKkvB,WAAWvtB,GAAM0D,QAG1C,OADAwqD,EAAO3gC,WAAaA,EACb2gC,GASRz7D,EAAYX,UAAUq8D,SAAW,SAAUC,EAASpuD,GACnD,IAAIquD,EAAShwD,KAAKiwD,YAAYtuD,GAC9B,IAAK,IAAI9P,EAAI,EAAGA,EAAIm+D,EAAO3zC,OAAOrnB,OAAQg7D,IACzC,GAAIA,EAAO3zC,OAAOxqB,GAAG8C,YAAcq7D,EAAO3zC,OAAOxqB,GAAGkS,UAAYgsD,EAAS,OAAOC,EAAO3zC,OAAOxqB,GAE/F,IAAK8P,EACJ,IAAK,MAAMvO,KAAOb,OAAOoW,KAAK3I,KAAKkvB,YAClC,IAAK,IAAIr9B,EAAI,EAAGA,EAAImO,KAAKkvB,WAAW97B,GAAKipB,OAAOrnB,OAAQnD,GAAK,EAC5D,GAAImO,KAAKkvB,WAAW97B,GAAKipB,OAAOxqB,GAAGkS,YAAcgsD,EAAS,OAAO/vD,KAAKkvB,WAAW97B,GAAKipB,OAAOxqB,GAIhG,OAAO,GAGRuC,EAAYX,UAAUy8D,YAAc,SAAUvuD,EAAMyF,GACnD,MAAM0mD,EAAS9tD,KAAK0uD,sBAAsB/sD,GAE1C,GADc,IAAIksD,EAAclsD,EAAMmsD,EAAQ9tD,MACpCgwB,SAAU,CACR89B,EAAO1O,OACfztB,IAAI,IAER,GAAIm8B,EAAOn5D,WAAY,CACtB,IAAKm5D,EAAO/oD,gBAAiB,CACjB+oD,EAAOqC,YAAYh8D,EAAYgkC,WAE3C,GAAI/wB,EAAK,CACG0mD,EAAOsC,kBAAkBhpD,EAAKjT,EAAYgkC,WAEtD,MAAMk4B,EAAOvC,EAAOwC,kBACpB,GAAID,GAAQA,EAAKr7D,OAAQ,CACb84D,EAAOsC,kBAAkBC,EAAK,GAAIl8D,EAAYgkC,YAO3D,YAJqC,IAA1Bn4B,KAAKkvB,WAAWvtB,KAC1B3B,KAAKkvB,WAAWvtB,GAAQ,IAEzB3B,KAAKkvB,WAAWvtB,GAAMqJ,KAAKulD,IACpBA,IAGRn8D,EAAYX,UAAU+8D,iBAAmB,SAAU7uD,EAAM7O,GAExD,OADekN,KAAKkvB,WAAWvtB,GACjB8uD,SAAS39D,IAGxBsB,EAAYX,UAAUi9D,eAAiB,SAAU/uD,QACX,IAA1B3B,KAAKkvB,WAAWvtB,WAClB3B,KAAKkvB,WAAWvtB,IAI1BvN,EAAYX,UAAUk9D,oBAAsB,SAAUhvD,EAAM7O,EAAOoR,GAClE,MAAM8rD,EAAShwD,KAAKkvB,WAAWvtB,GAC/BquD,EAAOY,YAAY99D,EAAOoR,GACE,GAAxB8rD,EAAO3zC,OAAOrnB,QACjBgL,KAAK0wD,eAAe/uD,IAItBvN,EAAYX,UAAU2a,MAAQ,SAAUnU,GACvCwF,QAAQ2O,MAAMnU,IAIf7F,EAAYX,UAAUsQ,QAAU,WAC/B,OAAO/D,KAAKkS,QAGb9d,EAAYX,UAAUf,IAAM0B,EAAYX,UAAUsQ,QAElD3P,EAAYX,UAAUkB,SAAW,WAAc,OAAO,GACtDP,EAAYX,UAAUs8B,WAAa,WAAc,OAAO,GACxD37B,EAAYX,UAAUu8B,OAAS,WAAc,OAAO,GAGpD57B,EAAYX,UAAUqQ,aAAe,WACpC,OAAO9D,KAAKoH,KAGbhT,EAAYX,UAAUq6B,MAAQ,WAC7B,OAAI9tB,KAAK6D,OAAgB7D,KAAK6D,OAAOiqB,QAAU,EACxC,GAGR15B,EAAYX,UAAUw8D,YAAc,SAAUtuD,GAC7C,OAAO3B,KAAKkvB,WAAWvtB,IAGxBvN,EAAYX,UAAUq/B,MAAQ,SAAUnxB,GACvC,GAAI3B,KAAKkvB,YAAclvB,KAAKkvB,WAAWvtB,GACtC,OAAO3B,KAAKkvB,WAAWvtB,GAAMmxB,SAI/B1+B,EAAYX,UAAUD,SAAW,SAAUmO,GAC1C,QAAI3B,KAAK6D,QAAe7D,KAAK6D,OAAOrQ,YAIrCY,EAAYX,UAAUo9D,aAAe,WACpC,SAAI7wD,KAAK6D,SAAU7D,KAAK6D,OAAOA,SACvB7D,KAAK6D,OAAOA,QAKrBzP,EAAYX,UAAUi0C,KAAO,WAC5B,OAAI1nC,KAAK6D,QAIVzP,EAAYX,UAAUw5C,iBAAmB,WACxC,MAAMmiB,EAAQpvD,KAAK8wD,iBACbC,EAAS,GACf,IAAK,IAAIl/D,EAAI,EAAGA,EAAIu9D,EAAMp6D,OAAQnD,IACjC,GAAImO,KAAKkvB,WAAWkgC,EAAMv9D,IAAIwgB,OAAQ,CACrC,MAAM+I,EAAOpb,KAAKkvB,WAAWkgC,EAAMv9D,IAAIwgB,OAAOrS,KAAKkvB,WAAWkgC,EAAMv9D,KAChEupB,GAAM21C,EAAO/lD,KAAKoQ,GAGxB,OAAO21C,GAGR38D,EAAYX,UAAUq9D,eAAiB,WACtC,MAAME,EAAWz+D,OAAOoW,KAAK3I,KAAKkvB,YAClC,OAAIlvB,KAAK4S,QACDo+C,EAASx0C,KAAK,CAAC3lB,EAAGC,IAAMkJ,KAAK4S,QAAQ/b,EAAGC,EAAGkJ,OAE5CgxD,EAASx0C,KAAK,CAAC3lB,EAAGC,IAAMkJ,KAAKixD,gBAAgBp6D,EAAGC,EAAGkJ,QAM3D5L,EAAYX,UAAUw9D,gBAAkB,SAAUp6D,EAAGC,EAAGyb,GACvD,MAAS,cAAL1b,GAA2B,EACtB,cAALC,EAA0B,EACrB,gBAALD,GAA6B,EACxB,gBAALC,EAA4B,EAC5Byb,EAAI2c,WAAWr4B,GAAGm5B,UAAYzd,EAAI2c,WAAWp4B,GAAGnC,YAAoB,EACpE4d,EAAI2c,WAAWp4B,GAAGk5B,UAAYzd,EAAI2c,WAAWr4B,GAAGlC,WAAmB,EAChE,GAGRP,EAAYX,UAAU0R,kBAAoB,SAAS7K,GAClD,IAAI0F,KAAK6D,OAAQ,OAAO,EACxB,GAAG7D,KAAK6D,OAAOiqD,OAAOoD,iBAAiB,CACtC,IAAIC,EAAOnxD,KAAK6D,OAAOiqD,OAAOjnD,YAC1BuqD,EAAapxD,KAAK6D,OAAOwY,OAAOrnB,OACpC,IAAa,OAAVsF,GAA6B,SAAVA,IAClB62D,EAAKnqD,KAAOoqD,GAAcD,EAAKnqD,IACjC,OAAO,EAGT,GAAa,UAAV1M,GAAuB62D,EAAKpqD,KAAOqqD,GAAcD,EAAKpqD,IACxD,OAAO,EAGT,OAAO,GAGR3S,EAAYX,UAAU8R,UAAY,WACjC,IAAI1T,EAAI,EACR,IAAI,IAAI8P,KAAQ3B,KAAKkvB,WAAW,CAC/B,GAAGlvB,KAAK4tD,eAAe/7D,IAAM8P,EAAM,OAAO,EAC1C,GAAG3B,KAAKkvB,WAAWvtB,GAAM4D,YAAa,OAAO,EAC7C1T,IAED,OAAGA,GAAKmO,KAAK4tD,eAAe54D,QAI7BZ,EAAYX,UAAUuN,MAAQ,WAC7B,MAA0C,MAAlChB,KAAK+D,UAAUhC,UAAU,EAAG,IAGrC3N,EAAYX,UAAUiR,WAAa,WAClC,IAAIkH,EAAM,CAAEjH,OAAQ,MAIpB,IAAI,IAAIhD,KAHL3B,KAAKuF,cAAaqG,EAAIjH,OAAS,WAC/B3E,KAAKgB,UAAS4K,EAAIjH,OAAS,OAC9BiH,EAAIylD,UAAY,EACArxD,KAAKkvB,WACpBtjB,EAAIylD,YAGL,OADAzlD,EAAI6zB,KAAO7zB,EAAIylD,UAAY,cACpBzlD,GAURiiD,EAAcp6D,UAAUq7D,SAAW,SAAUhsD,GAC5C,GAAG9C,KAAK8tD,OAAO99B,SAAS,CACvB,IAAIugC,EAAK,IAAIvC,EAAUlrD,EAAO9C,KAAMA,KAAKqc,OAAOrnB,QAChDgL,KAAKqc,OAAOrR,KAAKulD,OACX,CACN,MAAMe,EAAM,IAAIl9D,EAAY4L,KAAKiF,QAAS6oD,OAAOhrD,MAAOA,EAAMA,MAAO9C,KAAM8C,GAC3E9C,KAAKqc,OAAOrR,KAAKsmD,KAInBzD,EAAcp6D,UAAU2e,eAAiB,SAAUu9C,GAClD,GAAI3vD,KAAKgwB,UAAahwB,KAAKrL,aAAeqL,KAAK+E,gBAAkB,CAChE,IAAIsX,EAAS,GACb,GAAIrc,KAAK8tD,OAAOoD,kBAAoBlxD,KAAK8tD,OAAOjnD,YAAYE,IAC3D,IAAK,IAAIlV,EAAI,EAAGA,EAAImO,KAAK8tD,OAAOjnD,YAAYE,IAAKlV,GAAK,EAAG,CACxD,IAAI0/D,KAASvxD,KAAKmwD,YAAYR,IACvB9rD,OAAS7D,KAChBqc,EAAOrR,KAAKumD,QAITA,EAASvxD,KAAKmwD,YAAYR,IACvB9rD,OAAS7D,KAChBqc,EAAOrR,KAAKumD,GAEbvxD,KAAKqc,OAASA,OAEV,GAAIrc,KAAK+E,gBAAiB,CAC9B,MAAMsrD,EAAOrwD,KAAK8tD,OAAOwC,kBACzB,GAAID,GAAQA,EAAKr7D,OAAQ,CACxB,MAAM2oC,EAAQ39B,KAAK8tD,OAAOsC,kBAAkBC,EAAK,GAAIl8D,EAAYgkC,WACjEwF,EAAM95B,OAAS7D,KACfA,KAAKqc,OAAS,CAACshB,MAKlBkwB,EAAcp6D,UAAUu8B,OAAS,WAChC,OAAOhwB,KAAK8tD,OAAO99B,UAGpB69B,EAAcp6D,UAAUkB,SAAW,WAClC,OAAOqL,KAAK8tD,OAAOn5D,YAGpBk5D,EAAcp6D,UAAUs8B,WAAa,WACpC,OAAO,GAGR89B,EAAcp6D,UAAUD,SAAW,WAClC,OAAOwM,KAAK+tD,WAGbF,EAAcp6D,UAAU+9D,QAAU,WAChC,MAAMC,EAAW,GACjB,IAAK,IAAI5/D,EAAI,EAAGA,EAAImO,KAAKqc,OAAOrnB,OAAQnD,IAAK,CAC5C,MAAM6C,EAAMsL,KAAKqc,OAAOxqB,GAAG2/D,UACf,KAAR98D,IAAsB,IAARA,QAAgC,IAARA,GAAqB+8D,EAASzmD,KAAKtW,GAE/E,OAAO+8D,GAGR5D,EAAcp6D,UAAUsQ,QAAU,WACjC,QAAQ/D,KAAK6D,QAAS7D,KAAK6D,OAAOE,WAEnC8pD,EAAcp6D,UAAUqQ,aAAe,WACtC,QAAQ9D,KAAK6D,QAAS7D,KAAK6D,OAAOC,gBAEnC+pD,EAAcp6D,UAAUq6B,MAAQ,WAC/B,QAAQ9tB,KAAK6D,QAAS7D,KAAK6D,OAAOiqB,SAEnC+/B,EAAcp6D,UAAUi+D,QAAU,WACjC,QAAQ1xD,KAAK6D,QAAS7D,KAAK6D,OAAO8tD,gBAEnC9D,EAAcp6D,UAAUwR,MAAQ,WAC/B,OAAQjF,KAAK8tD,OAAS9tD,KAAK8tD,OAAO7oD,MAAQ,IAE3C4oD,EAAcp6D,UAAUoR,SAAW,WAClC,OACC7E,KAAK8tD,OAAS9tD,KAAK8tD,OAAOjpD,WAAa,IAEzCgpD,EAAcp6D,UAAUqR,WAAa,WACpC,QAAQ9E,KAAK8tD,QAAS9tD,KAAK8tD,OAAOhpD,cAEnC+oD,EAAcp6D,UAAUm+D,0BAA4B,WACnD,QAAQ5xD,KAAK8tD,QAAS9tD,KAAK8tD,OAAOoD,kBAEnCrD,EAAcp6D,UAAUqT,eAAiB,WACxC,QAAQ9G,KAAK8tD,QAAS9tD,KAAK8tD,OAAOjnD,aAEnCgnD,EAAcp6D,UAAUsR,cAAgB,WACvC,QAAQ/E,KAAK8tD,QAAS9tD,KAAK8tD,OAAO/oD,iBAGnC8oD,EAAcp6D,UAAUo+D,oBAAsB,SAAU/+D,EAAOoR,GAC9DlE,KAAK6D,OAAO8sD,oBAAoB3wD,KAAKxM,WAAYV,EAAOoR,IAGzD2pD,EAAcp6D,UAAUf,IAAM,WAE7B,IADA,IAAIo/D,EAAO,GACHjgE,EAAI,EAAGA,EAAEmO,KAAKqc,OAAOrnB,OAAQnD,IACpC,GAAGmO,KAAKqc,OAAOxqB,GAAI,CAClB,IAAIsxC,EAAInjC,KAAKqc,OAAOxqB,GAAGa,MACpBywC,GAAG2uB,EAAK9mD,KAAKm4B,GAGlB,OAAO2uB,GAGRjE,EAAcp6D,UAAUgyC,MAAQ,WAC/B,IAAI,IAAI5zC,EAAI,EAAIA,EAAEmO,KAAKqc,OAAOrnB,OAAQnD,IACrCmO,KAAKqc,OAAOxqB,GAAG4zC,SAIjBooB,EAAcp6D,UAAU4R,MAAQ,WAC/B,MAAM0sD,EAAU,GACVlC,EAAS,IAAIhC,EAAc7tD,KAAK+tD,UAAW/tD,KAAK8tD,OAAQ9tD,KAAK6D,QACnE,IAAI,IAAIhS,EAAI,EAAIA,EAAEmO,KAAKqc,OAAOrnB,OAAQnD,IACrCkgE,EAAQ/mD,KAAKhL,KAAKqc,OAAOxqB,GAAGwT,SAG7B,OADAwqD,EAAOxzC,OAAS01C,EACTlC,GAIRhC,EAAcp6D,UAAUw7D,YAAc,WAErC,IADA,IAAI+C,EAAK,GACDngE,EAAI,EAAGA,EAAEmO,KAAKqc,OAAOrnB,OAAQnD,IACjCmO,KAAKqc,OAAOxqB,KACXmO,KAAKgwB,SACPgiC,EAAGhnD,KAAKhL,KAAKqc,OAAOxqB,GAAGk9D,cAGvBiD,EAAKA,EAAG37B,OAAOr2B,KAAKqc,OAAOxqB,GAAGo9D,gBAIjC,OAAO+C,GAGRnE,EAAcp6D,UAAU08D,YAAc,WACrC,GAAInwD,KAAK8tD,OAAO99B,SAAU,CACzB,MAAMugC,EAAKvwD,KAAK8tD,OAAO1O,OAEvB,OADAmR,EAAG5+B,IAAI,IACA4+B,EAEH,GAAIvwD,KAAK8tD,OAAOn5D,WAAY,CAChC,IAAKqL,KAAK8tD,OAAO/oD,gBAAiB,CAEjC,OADW/E,KAAK8tD,OAAOqC,YAAYh8D,EAAYgkC,WAGhD,MAAMk4B,EAAOrwD,KAAK8tD,OAAOwC,kBACzB,GAAID,GAAQA,EAAKr7D,OAAQ,CAExB,OADWgL,KAAK8tD,OAAOsC,kBAAkBC,EAAK,GAAIl8D,EAAYgkC,cAMjE01B,EAAcp6D,UAAU+e,OAAS,SAAUC,EAAO4d,EAASh4B,IACvCA,GAAWA,EAAQg3D,eAC3B5hC,EAAayC,oBAAoBE,UAAU3d,EAAOzS,KAAMqwB,GAElE,IAFD,IAEUx+B,EAAI,EAAGA,EAAEmO,KAAKqc,OAAOrnB,OAAQnD,IACrCmO,KAAKqc,OAAOxqB,GAAG2gB,OAAOC,EAAO4d,EAASh4B,GAGxC,OAAO2H,MAOR6tD,EAAcp6D,UAAUq/B,MAAQ,WAC/B,GAAI9yB,KAAKqc,QAAUrc,KAAKqc,OAAO,GAC9B,OAAOrc,KAAKqc,OAAO,GAAG3pB,OAIxBm7D,EAAcp6D,UAAUy5C,aAAe,WAGtC,IAFA,IAAI+kB,EAAajyD,KAAKkyD,aAClB1lD,EAAO,GACH3a,EAAI,EAAGA,EAAEogE,EAAWj9D,OAAQnD,IACnC,GAAGogE,EAAWpgE,IAAMogE,EAAWpgE,GAAGwgB,OAAO,CACxC,IAAI+I,EAAO62C,EAAWpgE,GAAGwgB,OAAO4/C,EAAWpgE,IACxCupB,GAAM5O,EAAKxB,KAAKoQ,GAGrB,OAAO5O,GAGRqhD,EAAcp6D,UAAUy+D,WAAa,WACpC,OAAIlyD,KAAK4S,QACD5S,KAAKqc,OAAOG,KAAK,CAAC3lB,EAAGC,IAAMkJ,KAAK4S,QAAQ/b,EAAGC,EAAGkJ,OAE/CA,KAAKqc,QAGbwxC,EAAcp6D,UAAU0R,kBAAoB,SAAS7K,GACpD,GAAG0F,KAAK8tD,OAAOoD,iBAAiB,CAC/B,IAAIC,EAAOnxD,KAAK8tD,OAAOjnD,YACnBuqD,EAAapxD,KAAKqc,OAAOrnB,OAC7B,IAAa,OAAVsF,GAA6B,SAAVA,IAClB62D,EAAKnqD,KAAOoqD,GAAcD,EAAKnqD,IACjC,OAAO,EAGT,GAAa,UAAV1M,GAAuB62D,EAAKpqD,IAC9B,OAAO,EAGT,OAAO,GAGR8mD,EAAcp6D,UAAU8R,UAAY,WACnC,OAAO,GAgCRyoD,EAAUv6D,UAAU6/C,KAAO,SAAUxwC,GACpC,GAAqB,iBAAVA,EAEV,YADA9C,KAAKoO,MAAM,2BAIZpO,KAAKjG,KAAO+I,EAAM/I,KAClBiG,KAAK+tD,UAAYjrD,EAAMtP,SACvBwM,KAAKiF,MAAQnC,EAAMmC,MACnBjF,KAAKmyD,WAAarvD,EAAMqvD,WACxBnyD,KAAK+R,OAASjP,EAAMiP,OACpB/R,KAAKyuD,YAAc3rD,EAAM2rD,YACzBzuD,KAAK8C,MAAQA,EAAMA,MACnB9C,KAAKhG,MAAQ8I,EAAM9I,MACnBgG,KAAKoyD,QAAUtvD,EAAMsvD,QACrB,MAAM,YAAEvrD,GAAgB/D,EACxB9C,KAAK6G,aAAc,EACfA,GAAsC,iBAAhBA,IACzB7G,KAAK6G,YAAc,IAAIqnD,EAAYrnD,KAIrCmnD,EAAUv6D,UAAU+e,OAAS,SAAUC,EAAO4d,GAE7C,OADA5C,EAAayC,oBAAoBE,UAAU3d,EAAOzS,KAAMqwB,GACjDrwB,MAGRguD,EAAUv6D,UAAUgqD,OAAS,WAC5Bz9C,KAAK6D,OAAOguD,oBAAoB7xD,KAAKtN,MAAOsN,KAAKkE,QAGlD8pD,EAAUv6D,UAAUiS,KAAO,WACtB1F,KAAK6D,QACR7D,KAAK6D,OAAO6B,QAIdsoD,EAAUv6D,UAAU6R,MAAQ,WAC3BtF,KAAK2xB,IAAI3xB,KAAKqyD,gBAIfrE,EAAUv6D,UAAU4R,MAAQ,WAC3B,MAAMqqD,EAAO1vD,KAAK6D,OAAO2sD,iBAAiBxwD,KAAKtN,OACzC4/D,EAAQtyD,KAAKo/C,KAAKsQ,GACxB4C,EAAMC,SACND,EAAMt/D,KAAO,OACbs/D,EAAMpuD,MAAQlE,KAAK6D,OAAOwY,OAAOrnB,OACjCgL,KAAK6D,OAAOwY,OAAOrR,KAAKsnD,IAIzBtE,EAAUv6D,UAAUq6B,MAAQ,WAAc,QAAQ9tB,KAAK6D,QAAS7D,KAAK6D,OAAOiqB,SAC5EkgC,EAAUv6D,UAAUD,SAAW,WAAc,QAAQwM,KAAK6D,QAAS7D,KAAK6D,OAAOrQ,YAC/Ew6D,EAAUv6D,UAAUsQ,QAAU,WAAc,QAAQ/D,KAAK6D,QAAS7D,KAAK6D,OAAOE,WAC9EiqD,EAAUv6D,UAAUqQ,aAAe,WAAc,QAAQ9D,KAAK6D,QAAS7D,KAAK6D,OAAOC,gBACnFkqD,EAAUv6D,UAAUwR,MAAQ,WAAc,QAAQjF,KAAK8C,OAAQ9C,KAAK8C,MAAMmC,OAE1E+oD,EAAUv6D,UAAU++D,YAAc,SAAUC,GAE3C,OAA4B,IADb,CAAC,mBAAoB,iBAAkB,gBAC3CnmD,QAAQmmD,IAKpBzE,EAAUv6D,UAAUs7D,WAAa,WAC/B,MAAMC,EAAK,CAAEj1D,KAAMiG,KAAKjG,KAAMvG,SAAUwM,KAAKxM,YAQ7C,OAPIwM,KAAKiF,QAAO+pD,EAAG/pD,MAAQjF,KAAKiF,OAC5BjF,KAAKmyD,aAAYnD,EAAGmD,WAAanyD,KAAKmyD,YACtCnyD,KAAK+R,SAAQi9C,EAAGj9C,OAAS/R,KAAK+R,QAC9B/R,KAAKyuD,cAAaO,EAAGP,YAAczuD,KAAKyuD,aACxCzuD,KAAK8C,QAAOksD,EAAGlsD,MAAQ9C,KAAK8C,OAC5B9C,KAAKhG,QAAOg1D,EAAGh1D,MAAQgG,KAAKhG,OAC5BgG,KAAKoyD,UAASpD,EAAGoD,QAAUpyD,KAAKoyD,SAC7BpD,GAGThB,EAAUv6D,UAAUy9D,eAAiB,WACnC,QAAIlxD,KAAK6G,aACD7G,KAAK6G,YAAY6rD,sBAK3B1E,EAAUv6D,UAAU2rD,KAAO,SAAUuQ,GACpC,MAAMvQ,EAAO,IAAI4O,EAAUhuD,KAAMA,KAAK6D,QAEtC,OADI8rD,IAAOvQ,EAAKqP,YAAckB,GACvBvQ,GAGR4O,EAAUv6D,UAAUoR,SAAW,WAC9B,IAAID,EAAM,GACV,MAAqB,cAAlB5E,KAAK+tD,UAAkC,OACrB,gBAAlB/tD,KAAK+tD,UAAoC,eACxC/tD,KAAKhG,OAA+B,iBAAfgG,KAAKhG,QAAoB4K,EAAM5E,KAAKhG,MAAM,WAC/DgG,KAAKhG,OAA+B,iBAAfgG,KAAKhG,QAAoB4K,EAAM5E,KAAKhG,QAExD4K,GAAO5E,KAAKxM,aAAYoR,EAAMzQ,EAAYwM,aAAaX,KAAKxM,aAC5DoR,IAAKA,EAAMzQ,EAAYwM,aAAaX,KAAKoH,MACvCxC,IAGRopD,EAAUv6D,UAAUyR,QAAU,WAC7B,OAAIlF,KAAKiF,MAAcjF,KAAKiF,SACxBjF,KAAKmyD,aAAcnyD,KAAKmyD,WAAWp4D,OAAaiG,KAAKmyD,WAAWp4D,MAIrE3F,EAAYX,UAAUoR,SAAWmpD,EAAUv6D,UAAUoR,SAErDmpD,EAAUv6D,UAAUqR,WAAa,WAChC,IAAIstD,EAAU,GAGd,OAFIpyD,KAAKoyD,SAAmC,iBAAjBpyD,KAAKoyD,UAAsBA,EAAUpyD,KAAKoyD,QAAQ,WACzEpyD,KAAKoyD,SAAmC,iBAAjBpyD,KAAKoyD,UAAsBA,EAAUpyD,KAAKoyD,SAC9DA,GAGRh+D,EAAYX,UAAUqR,WAAakpD,EAAUv6D,UAAUqR,WAGvDkpD,EAAUv6D,UAAU2a,MAAQ,SAAUnU,GAErC,OADIA,IAAK+F,KAAKmQ,IAAMlW,GACb+F,KAAKmQ,KAGb69C,EAAUv6D,UAAU66D,QAAU,WAC7B,OAAMtuD,KAAKjG,MAAQiG,KAAKwyD,YAAYxyD,KAAKjG,MAInCiG,KAAK+tD,UAIL/tD,KAAK+R,OAIL/R,KAAKiF,QAIPjF,KAAK2yD,sBAAwB3yD,KAAK8C,OAA+B,iBAAf9C,KAAK8C,UAC1D9C,KAAKoO,MAAM,yBACJ,IALPpO,KAAKoO,MAAM,wBACJ,IALPpO,KAAKoO,MAAM,yBACJ,IALPpO,KAAKoO,MAAM,2BACJ,IALPpO,KAAKoO,MAAO,iCAAgCpO,KAAKjG,SAC1C,IAqBTi0D,EAAUv6D,UAAUk/D,iBAAmB,WACtC,MAAqB,mBAAd3yD,KAAKjG,MAGbi0D,EAAUv6D,UAAUm/D,mBAAqB,WACxC,MAAqB,qBAAd5yD,KAAKjG,MAGbi0D,EAAUv6D,UAAUm7D,QAAU,WAC7B,MAAkB,QAAd5uD,KAAKjG,MAAgC,OAAdiG,KAAKjG,MAA+B,QAAdiG,KAAKjG,MAMvDi0D,EAAUv6D,UAAUo/D,cAAgB,WACnC,MAAqB,gBAAd7yD,KAAKjG,MAGbi0D,EAAUv6D,UAAUg8B,MAAQ,WAC3B,OAAIzvB,KAAK0sC,aAAqB,WAC1B1sC,KAAK4yD,qBAA6B,OAClC5yD,KAAKysC,WAAmB,QACxBzsC,KAAKrL,WAAmB,SACxBqL,KAAK4uD,UAAkB,QACvB5uD,KAAK+E,gBAAwB,oBAAjC,GAKDipD,EAAUv6D,UAAUsR,cAAgB,WACnC,OAAQ/E,KAAK8C,OAA6B,iBAApB9C,KAAK8C,MAAM/I,MAGlCi0D,EAAUv6D,UAAU+B,SAAW,WAC9B,OAAIwK,KAAKiF,QAAU9Q,EAAY2+D,UAAU,MAAO,WAMjD9E,EAAUv6D,UAAU0rC,iBAAmB,WACtC,MAAMhuB,EAAO,GACb,IAAK,IAAItf,EAAI,EAAGA,EAAImO,KAAK8C,MAAMk8B,SAAShqC,OAAQnD,GAAK,EAAG,CACvD,MAAMkhE,EAAS,GACX/yD,KAAK8C,MAAMk8B,SAASntC,GAAGmI,MAC1B+4D,EAAO/4D,MAAQgG,KAAK8C,MAAMk8B,SAASntC,GAAGmI,MAAM,UAE5C+4D,EAAO/4D,MAAQ7F,EAAYwM,aAAaX,KAAK8C,MAAMk8B,SAASntC,GAAGkH,OAEhEg6D,EAAOjgE,MAAQkN,KAAK8C,MAAMk8B,SAASntC,GAAGkH,MACtCoY,EAAKnG,KAAK+nD,GAEX,OAAO5hD,GAGR68C,EAAUv6D,UAAUu/D,KAAO,WAC1B,MAAO,MAGRhF,EAAUv6D,UAAUg5C,SAAW,WAC9B,OAAQzsC,KAAK8C,OAA6B,UAApB9C,KAAK8C,MAAM/I,MAGlCi0D,EAAUv6D,UAAUi5C,WAAa,WAChC,OAAQ1sC,KAAK8C,OAA6B,aAApB9C,KAAK8C,MAAM/I,MAGlCi0D,EAAUv6D,UAAUu8B,OAAS,WAC5B,OAAQhwB,KAAK0sC,cAAgB1sC,KAAKysC,YAAczsC,KAAK4yD,sBAGtD5E,EAAUv6D,UAAUkB,SAAW,WAC9B,OAAQqL,KAAK2yD,oBAAsB3yD,KAAK8C,SAAW9C,KAAKysC,YAAczsC,KAAK0sC,eAG5EshB,EAAUv6D,UAAUs8B,WAAa,WAChC,OAAO,GAGRi+B,EAAUv6D,UAAUw/D,iBAAmB,WACtC,GAAIjzD,KAAK0sC,aAAc,MAAO,WAC9B,GAAI1sC,KAAKysC,WAAY,MAAO,SAE5B,OADWt4C,EAAYqN,aAAaxB,KAAKkF,YAC3BlF,KAAKkF,WAGpB8oD,EAAUv6D,UAAUf,IAAM,WACzB,OAAIsN,KAAKkzD,SACDlzD,KAAKkzD,SAETlzD,KAAK4yD,sBAAwB5yD,KAAKmyD,iBAAmD,IAA9BnyD,KAAKmyD,WAAW,UACnEnyD,KAAKmyD,WAAW,UAEpBnyD,KAAKysC,YAAczsC,KAAK0sC,aACpB1sC,KAAK8C,MAAM2rD,YAEZ,IAGRT,EAAUv6D,UAAUk+B,IAAM,SAAU7+B,EAAOqgE,GACtCA,IAAYrgE,EAAQqgE,EAAWrgE,EAAOkN,OAC1CA,KAAKkzD,SAAWpgE,GACZkN,KAAKysC,YAAczsC,KAAK0sC,gBAC3B1sC,KAAK8C,MAAM2rD,YAAc37D,GAEtBkN,KAAK4yD,sBAAwB5yD,KAAKmyD,aACrCnyD,KAAKmyD,WAAW,UAAYr/D,IAI9Bk7D,EAAUv6D,UAAUgyC,MAAQ,YACvBzlC,KAAK0sC,cAAgB1sC,KAAKysC,YAAczsC,KAAK4yD,uBAChD5yD,KAAK2xB,IAAI,KAIXq8B,EAAUv6D,UAAU0R,kBAAoB,SAAS7K,GAChD,GAAG0F,KAAK6D,OAAOiqD,OAAOoD,iBAAiB,CACtC,IAAIC,EAAOnxD,KAAK6D,OAAOiqD,OAAOjnD,YAC1BuqD,EAAapxD,KAAK6D,OAAOwY,OAAOrnB,OACpC,IAAa,OAAVsF,GAA6B,SAAVA,IAClB62D,EAAKnqD,KAAOoqD,GAAcD,EAAKnqD,IACjC,OAAO,EAGT,GAAa,UAAV1M,GAAuB62D,EAAKpqD,KAAOqqD,GAAcD,EAAKpqD,IACxD,OAAO,EAGT,OAAO,GAiBRknD,EAAWx6D,UAAYu6D,EAAUv6D,UAEjCw6D,EAAWx6D,UAAU2/D,oBAAsB,SAAUr2D,EAAKs+B,GAEzDr7B,KAAKjG,KAAO,iBACZiG,KAAK+tD,UAAYhxD,EAAIvJ,SACrBwM,KAAKiF,MAAQlI,EAAIkI,MACjBjF,KAAKmyD,WAAa92B,EAAMnpB,OACxBlS,KAAK+R,OAAShV,EAAIqK,IAClBpH,KAAKyuD,YAAc1xD,EAAImV,OACvBlS,KAAKhG,MAAQ+C,EAAI8H,WACjB7E,KAAKoyD,QAAUr1D,EAAI+H,aACnB9E,KAAK6G,YAAc9J,EAAI8J,aAGxBonD,EAAWx6D,UAAU28D,kBAAoB,SAAUhpD,EAAKuoD,GACvD,MAAMtB,EAAKruD,KAAKqzD,qBAAqBjsD,GAC/BksD,EAAW,IAAIl/D,EAAYgT,GAIjC,OAHIuoD,IAAO2D,EAASphD,OAASy9C,GAC7B2D,EAASrhD,gBAAgBo8C,GACViF,EAASlhD,kBAIzB67C,EAAWx6D,UAAU4/D,qBAAuB,SAAUE,GACrD,IAAI3nB,EAAK,GACT,IAAK,IAAI/5C,EAAI,EAAGA,EAAImO,KAAK8C,MAAM0wD,SAASx+D,OAAQnD,GAAK,EACpD,IAAK,IAAIy4B,EAAI,EAAGA,EAAItqB,KAAK8C,MAAM0wD,SAAS3hE,GAAGmD,OAAQs1B,GAAK,EACnDipC,IAAWvzD,KAAK8C,MAAM0wD,SAAS3hE,GAAGy4B,GAAGvY,SACxC65B,EAAKA,EAAGvV,OAAOr2B,KAAK8C,MAAM0wD,SAAS3hE,GAAGy4B,KAIzC,OAAOshB,GAGRqiB,EAAWx6D,UAAU08D,YAAc,SAAUR,GAC5C,GAAI3vD,KAAKrL,WAAY,CACpB,MAAM2+D,EAAW,IAAIl/D,EAAY4L,KAAKiF,OAItC,OAHI0qD,IAAO2D,EAASphD,OAASy9C,GAC7B2D,EAASrhD,gBAAgBjS,KAAK8C,OACfwwD,EAASlhD,iBAGzB,GAAIpS,KAAKgwB,SAAU,CAClB,MAAMyjC,EAAYzzD,KAAKo/C,OAEvB,OADAqU,EAAU9hC,IAAI,IACP8hC,IAKTxF,EAAWx6D,UAAUigE,eAAiB,SAAU/D,EAAOgE,GACtD,OAAOA,GAGR1F,EAAWx6D,UAAU4R,MAAQ,SAAUsqD,EAAOgE,GAC7C,GAAI3zD,KAAKrL,WACR8K,QAAQC,IAAI,iCACN,GAAIM,KAAKgwB,SACf,OAAOhwB,KAAK0zD,eAAe/D,EAAOgE,IAKpC1F,EAAWx6D,UAAU68D,gBAAkB,WACtC,MAAMx+B,EAAU,GAChB,GAAI9xB,KAAK8C,MAAM0wD,SACd,IAAK,IAAI3hE,EAAI,EAAGA,EAAImO,KAAK8C,MAAM0wD,SAASx+D,OAAQnD,GAAK,EACpD,IAAK,IAAIy4B,EAAI,EAAGA,EAAItqB,KAAK8C,MAAM0wD,SAAS3hE,GAAGmD,OAAQs1B,GAAK,EAAG,CAC1D,MAAMspC,EAAS5zD,KAAK8C,MAAM0wD,SAAS3hE,GAAGy4B,GAAGvY,OACrC6hD,IAAuC,IAA7B9hC,EAAQxlB,QAAQsnD,IAC7B9hC,EAAQ9mB,KAAK4oD,GAKjB,OAAO9hC,GAGRm8B,EAAWx6D,UAAUk7D,oBAAsB,SAAU4E,GACpD,IAAK,IAAI1hE,EAAI,EAAGA,EAAImO,KAAK8C,MAAM0wD,SAASx+D,OAAQnD,GAAK,EAAG,CACvD,MAAMgiE,EAAU7zD,KAAK8C,MAAM0wD,SAAS3hE,GACpC,GAAIgiE,EAAQ7+D,QACX,IAAK,IAAIs1B,EAAI,EAAGA,EAAIupC,EAAQ7+D,OAAQs1B,GAAK,EACxC,GAAIupC,EAAQvpC,IAAOipC,IAAWM,EAAQvpC,GAAGvY,OAAS,CAEjD,OADW,IAAIk8C,EAAW4F,SAItB,GAAIA,EAAQ5uD,OAASsuD,IAAWM,EAAQ5uD,MAAO,CAErD,OADW,IAAIgpD,EAAW4F,IAI5B,OAAO,GAGR5F,EAAWx6D,UAAUo7D,eAAiB,SAAU4E,GAC/C,OAAOA,GAURvF,EAAYz6D,UAAUi/D,mBAAqB,WAC1C,OAAiB,IAAb1yD,KAAK+G,KAA0B,IAAb/G,KAAKgH,KAI5BknD,EAAYz6D,UAAU06D,gBAAkB,SAAUtnD,GACjD,QAAuC,IAA5BA,EAAYitD,YACtB9zD,KAAKgH,IAAMH,EAAYitD,YACvB9zD,KAAK+G,IAAMF,EAAYitD,iBACjB,QAA0C,IAA/BjtD,EAAYktD,eAC7B/zD,KAAKgH,IAAMH,EAAYktD,oBACjB,QAA0C,IAA/BltD,EAAYmtD,eAC7Bh0D,KAAK+G,IAAMF,EAAYmtD,oBACjB,QAAgC,IAArBntD,EAAY9M,MAA6C,QAArB8M,EAAY9M,MAAkD,iBAAzB8M,EAAY2sD,SACtG,IAAK,IAAI3hE,EAAI,EAAGA,EAAIgV,EAAY2sD,SAASx+D,OAAQnD,GAAK,EAAG,CACxD,MAAMoiE,EAAQ,IAAI/F,EAAYrnD,EAAY2sD,SAAS3hE,IAClC,IAAbmO,KAAKgH,KAAaitD,EAAMjtD,IAAM,EAAGhH,KAAKgH,IAAMitD,EAAMjtD,IAC7ChH,KAAKgH,IAAM,GAAKitD,EAAMjtD,IAAM,GAAKitD,EAAMjtD,IAAMhH,KAAKgH,MAAKhH,KAAKgH,IAAMitD,EAAMjtD,KAChE,IAAbhH,KAAK+G,KAAaktD,EAAMltD,IAAM,EAAG/G,KAAK+G,IAAMktD,EAAMltD,IAC7C/G,KAAK+G,IAAM,GAAKktD,EAAMltD,IAAM,GAAKktD,EAAMltD,IAAM/G,KAAK+G,MAAK/G,KAAK+G,IAAMktD,EAAMltD,OAKpFnV,EAAOD,QAAUyC,G,gBCppCjB,MAAMD,EAAcL,EAAQ,GAE5B,SAASO,EAAWugC,EAASn2B,EAAO2S,GASnC,GARApR,KAAKi3B,SAAWrC,EAAQqC,SACK,aAA1Bx4B,EAAMqiB,YAAY1uB,KACpB4N,KAAKvB,MAAQA,EAGbuB,KAAKvB,MAAQA,EAAMA,MAEpBuB,KAAKuP,OAAS,GACR6B,IAAUA,EAAO8iD,YAAc,CACpC,MAAMj6C,KAAW7I,IAAUA,EAAO6I,UAAU7I,EAAO6I,QACnDja,KAAKm0D,SAASl6C,IAIhB5lB,EAAWZ,UAAU0gE,SAAW,SAAUl6C,GACzCA,EAAWA,GAAWja,KAAKvB,MAAM21D,aACjC,IAAK,IAAIviE,EAAI,EAAGA,EAAImO,KAAKi3B,SAASjiC,OAAQnD,IACzC,IAAK,MAAM8P,KAAQpP,OAAOoW,KAAK3I,KAAKi3B,SAASplC,IAAK,CACjD,MAAMwiE,EAAQlgE,EAAYmgE,QAAQ3yD,EAAMsY,GAClCs6C,EAA2C,iBAA3Bv0D,KAAKi3B,SAASplC,GAAG8P,GACpCxN,EAAYmgE,QAAQt0D,KAAKi3B,SAASplC,GAAG8P,GAAOsY,GAC5Cja,KAAKi3B,SAASplC,GAAG8P,UAEZ3B,KAAKi3B,SAASplC,GAAG8P,GACzB3B,KAAKi3B,SAASplC,GAAGwiE,GAASE,EAG5B,OAAOv0D,MAGR3L,EAAWZ,UAAUq/B,MAAQ,WAE5B,OADA9yB,KAAKuP,OAAS,EACPvP,KAAKi3B,SAAS,IAGtB5iC,EAAWZ,UAAU+gE,KAAO,WAE3B,OADAx0D,KAAKuP,OAASvP,KAAKi3B,SAASjiC,OAAO,EAC5BgL,KAAKi3B,SAASj3B,KAAKi3B,SAASjiC,OAAO,IAG3CX,EAAWZ,UAAUu+B,KAAO,WAC3B,MAAMmB,EAAMnzB,KAAKi3B,SAASj3B,KAAKuP,QAE/B,OADAvP,KAAKuP,SACE4jB,GAGR9+B,EAAWZ,UAAUs/B,KAAO,WAC3B,GAAI/yB,KAAKuP,OAAS,EAEjB,OADAvP,KAAKuP,SACEvP,KAAKi3B,SAASj3B,KAAKuP,SAI5Blb,EAAWZ,UAAUghE,cAAgB,SAAS59D,EAAGC,EAAG49D,GACnD,OAAI79D,GAAMC,QACe,IAAfD,EAAE,gBAAkD,IAAfC,EAAE,YAChDD,EAAIA,EAAE,UACNC,EAAIA,EAAE,WAEHD,EAAIC,EACC49D,GAA8B,OAAfA,EAAuB,GAAK,EAEhD59D,EAAID,EACC69D,GAA8B,OAAfA,GAAwB,EAAI,OADpD,GARoB,GAarBrgE,EAAWZ,UAAU+oB,KAAO,SAASppB,EAAKshE,GACzC10D,KAAKi3B,SAASza,KAAK,CAAC3lB,EAAGC,IACfkJ,KAAKy0D,cAAc59D,EAAEzD,GAAM0D,EAAE1D,GAAMshE,KAK5CrgE,EAAWZ,UAAUs+B,gBAAkB,WACtC,GAAI/xB,KAAKi3B,UAAYj3B,KAAKi3B,SAAS,GAClC,OAAO1kC,OAAOoW,KAAK3I,KAAKi3B,SAAS,KAInC5iC,EAAWZ,UAAUo/B,MAAQ,WAC5B,OAAO7yB,KAAKi3B,SAASjiC,QAGtBX,EAAWZ,UAAU+nC,YAAc,SAAUhlC,GAC5C,OAAQwJ,KAAKi3B,UAAYj3B,KAAK6yB,SAG/Bx+B,EAAWZ,UAAUyjC,YAAc,WAClC,OAAOl3B,KAAKi3B,UAGbrlC,EAAOD,QAAU0C,G,6CCzFjB,MAAMF,YAAcL,oBAAQ,GACtB6gE,QAAU7gE,oBAAQ,IAElBQ,KAAO,GA+Fb,SAASsgE,UAAUn2D,GAUlB,OATAuB,KAAKvB,MAASA,GAAgB,GAC9BuB,KAAKuP,OAASvP,KAAKvB,MACnBuB,KAAK60D,aAAc,EACnB70D,KAAK80D,iBAAkB,EAEvB90D,KAAK+0D,6BAA+B,CAAC,SAAU,OAAQ,QAAS,OAAQ,MAAO,SAC/E/0D,KAAKg1D,MAAQh1D,KAAKi1D,wBAElBj1D,KAAKk1D,eAAgB,EACdl1D,KAoyCR,SAASm1D,QAAQ7hE,GAChB,IAAI8hE,EAAS,GACb,IAAI,IAAIvjE,EAAI,EAAGA,EAAEyB,EAAGzB,IACnBujE,GAAU,IAEX,OAAOA,EAkDR,SAASC,cAAct7D,EAAMwV,EAAQ3b,GAEpCoM,KAAKjG,KAAOA,EACZiG,KAAKuP,OAASA,EACdvP,KAAK+D,QAAWnQ,IAAQ,EACxBoM,KAAKooD,GAAI,EAn8CV9zD,KAAKghE,KAAO,SAASC,EAAOC,GAAS,OAAO,IAAIZ,WAAYU,KAAKC,EAAOC,IACxElhE,KAAKiL,IAAM,SAASd,GAAQ,OAAO,IAAIm2D,WAAYr1D,IAAId,IACvDnK,KAAKkpD,KAAO,SAAStB,EAAOz9C,GAAQ,OAAO,IAAIm2D,WAAYpX,KAAKtB,EAAOz9C,IACvEnK,KAAKmhE,KAAO,SAASvZ,EAAOz9C,GAAQ,OAAO,IAAIm2D,WAAYa,KAAKvZ,EAAOz9C,IACvEnK,KAAKsK,MAAQ,SAASA,EAAOH,GAAQ,OAAO,IAAIm2D,WAAYh2D,MAAMA,EAAOH,IACzEnK,KAAKwK,MAAQ,SAASA,EAAOL,GAAQ,OAAO,IAAIm2D,WAAY91D,MAAMA,EAAOL,IACzEnK,KAAK0jD,OAAS,YAAYx3B,GAAO,OAAO,IAAIo0C,WAAY5c,UAAUx3B,IAClElsB,KAAKohE,GAAK,YAAYC,GAAU,OAAO,IAAIf,WAAYc,MAAMC,IAC7DrhE,KAAK8K,IAAM,YAAYu2D,GAAU,OAAO,IAAIf,WAAYx1D,OAAOu2D,IAC/DrhE,KAAKshE,IAAM,SAASn3D,GAAQ,OAAO,IAAIm2D,WAAYgB,IAAIn3D,IACvDnK,KAAKuhE,OAAS,SAASh/D,EAAGC,EAAG5E,GAAI,OAAO,IAAI0iE,WAAYiB,OAAOh/D,EAAGC,EAAG5E,IACrEoC,KAAK+K,KAAO,SAASxI,EAAGC,EAAG5E,EAAGC,GAAI,OAAO,IAAIyiE,WAAYv1D,KAAKxI,EAAGC,EAAG5E,EAAGC,IACvEmC,KAAKgL,IAAM,SAASzI,EAAGC,GAAI,OAAO,IAAI89D,WAAYt1D,IAAIzI,EAAGC,IACzDxC,KAAKwhE,IAAM,SAASj/D,EAAGC,GAAI,OAAO,IAAI89D,WAAYkB,IAAIj/D,EAAGC,IACzDxC,KAAKyhE,GAAK,SAASl/D,EAAGC,GAAI,OAAO,IAAI89D,WAAYmB,GAAGl/D,EAAGC,IACvDxC,KAAK0C,KAAO,SAASH,EAAGC,GAAI,OAAO,IAAI89D,WAAY59D,KAAKH,EAAGC,IAC3DxC,KAAKmpD,OAAS,SAASuY,GAAc,OAAO,IAAIpB,WAAYnX,OAAOuY,IACnE1hE,KAAK2hE,cAAgB,SAAUC,EAAGC,EAAGC,GAAK,OAAO,IAAIxB,WAAYqB,cAAeC,EAAGC,EAAGC,IACtF9hE,KAAK+hE,YAAc,SAAUH,EAAGC,EAAGC,EAAGE,GAAK,OAAO,IAAI1B,WAAYyB,YAAaH,EAAGC,EAAGC,EAAGE,IACxFhiE,KAAKiiE,WAAa,SAAUL,EAAGC,EAAGC,GAAK,OAAO,IAAIxB,WAAY2B,WAAYL,EAAGC,EAAGC,IAChF9hE,KAAKkiE,SAAW,SAAUN,EAAGC,EAAGC,EAAGE,GAAM,OAAO,IAAI1B,WAAY4B,SAAUN,EAAGC,EAAGC,EAAGE,IACnFhiE,KAAK5B,IAAM,SAASgnB,EAAMkE,EAAM1kB,GAAS,OAAO,IAAI07D,WAAYliE,IAAIgnB,EAAMkE,EAAM1kB,IAChF5E,KAAKmiE,GAAK,SAASj+C,EAAKk+C,GAAO,OAAO,IAAI9B,WAAY6B,GAAGj+C,EAAKk+C,IAC9DpiE,KAAKqiE,OAAS,SAASz1D,GAAM,OAAO,IAAI0zD,WAAY+B,OAAOz1D,IAC3D5M,KAAKgD,KAAO,SAAS4J,GAAM,OAAO,IAAI0zD,WAAYt9D,KAAK4J,IACvD5M,KAAKksB,KAAO,YAAY9G,GAAO,OAAO,IAAIk7C,WAAYp0C,QAAQ9G,IAC9DplB,KAAKsiE,SAAW,SAASC,EAAUC,EAAYC,EAAY7wB,GAAS,OAAO,IAAI0uB,WAAYgC,SAASC,EAAUC,EAAYC,EAAY7wB,IACtI5xC,KAAKu/B,OAAS,SAASmjC,GAAI,OAAO,IAAIpC,WAAY/gC,OAAOmjC,IAGzD1iE,KAAK+hC,OAAS,SAAS7V,EAAMrY,GAAI,OAAO,IAAIysD,WAAYv+B,OAAO7V,EAAMrY,IACrE7T,KAAK2iE,MAAQ,SAASC,EAAGplE,GAAI,OAAO,IAAI8iE,WAAYqC,MAAMC,EAAGplE,IAC7DwC,KAAK6iE,IAAM,SAAS30D,EAAO20D,EAAKhY,EAAKjZ,GAAS,OAAO,IAAI0uB,WAAYuC,IAAI30D,EAAO20D,EAAKhY,EAAKjZ,IAC1F5xC,KAAKiW,KAAO,YAAYiW,GAAO,OAAO,IAAIo0C,WAAYrqD,QAAQiW,IAC9DlsB,KAAK8iE,OAAS,SAAS9uD,EAAQouD,EAAM38D,GAAO,OAAO,IAAI66D,WAAYwC,OAAO9uD,EAAQouD,EAAM38D,IACxFzF,KAAK+iE,MAAQ,SAAS/uD,EAAQouD,EAAM38D,EAAMmsC,GAAS,OAAO,IAAI0uB,WAAYyC,MAAM/uD,EAAQouD,EAAM38D,EAAMmsC,IACpG5xC,KAAKgjE,SAAW,SAASC,EAAMx9D,EAAMy9D,GAAO,OAAO,IAAI5C,WAAY0C,SAASC,EAAMx9D,EAAMy9D,IACxFljE,KAAKmjE,GAAK,SAAS/pC,EAAS/M,EAAMzG,GAAU,OAAO,IAAI06C,WAAY6C,GAAG/pC,EAAS/M,EAAMzG,IAErF5lB,KAAKojE,KAAO,SAASC,EAAIC,GAAK,OAAO,IAAIhD,WAAY8C,KAAKC,EAAIC,IAC9DtjE,KAAKujE,QAAU,SAASF,EAAIC,GAAK,OAAO,IAAIhD,WAAYiD,QAAQF,EAAIC,IAIpEtjE,KAAKyL,KAAO,SAAS+3D,EAAO3vD,GAAI,OAAO,IAAIysD,WAAY70D,KAAK+3D,EAAO3vD,IACnE7T,KAAKyjE,KAAO,YAAY5/D,GAAO,OAAO,IAAIy8D,WAAYmD,QAAQ5/D,IAC9D7D,KAAK0jE,MAAQ,YAAY7/D,GAAO,OAAO,IAAIy8D,WAAYoD,SAAS7/D,IAChE7D,KAAK2jE,MAAQ,YAAY9/D,GAAO,OAAO,IAAIy8D,WAAYqD,SAAS9/D,IAChE7D,KAAK4jE,OAAS,YAAY//D,GAAO,OAAO,IAAIy8D,WAAYsD,UAAU//D,IAClE7D,KAAK4hD,IAAM,SAASr/C,EAAGC,GAAI,OAAO,IAAI89D,WAAY1e,IAAIr/C,EAAGC,IACzDxC,KAAK6jE,IAAM,YAAYhgE,GAAO,OAAO,IAAIy8D,WAAYuD,OAAOhgE,IAC5D7D,KAAK89D,QAAU,SAAS/T,GAAM,OAAO,IAAIuW,WAAYxC,QAAQ/T,IAC7D/pD,KAAKU,OAAS,SAASojE,EAAMjlC,GAAM,OAAO,IAAIyhC,WAAY5/D,OAAOojE,EAAMjlC,IAMvE7+B,KAAK+jE,KAAO,SAAS/B,EAAGJ,EAAGC,EAAGC,GAAI,OAAO,IAAIxB,WAAYyD,KAAK/B,EAAGJ,EAAGC,EAAGC,IACvE9hE,KAAKgT,SAAW,SAASgxD,EAAS99C,GAAQ,OAAO,IAAIo6C,WAAYttD,SAASgxD,EAAS99C,IACnFlmB,KAAK47D,YAAc,SAASqI,EAAQx+D,EAAMygB,GAAQ,OAAO,IAAIo6C,WAAY1E,YAAYqI,EAAQx+D,EAAMygB,IACnGlmB,KAAKkkE,YAAc,SAASF,EAAS99C,GAAQ,OAAO,IAAIo6C,WAAY4D,YAAYF,EAAS99C,IACzFlmB,KAAKmkE,eAAiB,SAASF,EAAQx+D,EAAMygB,GAAQ,OAAO,IAAIo6C,WAAY6D,eAAeF,EAAQx+D,EAAMygB,IACzGlmB,KAAKiU,KAAO,SAASmwD,EAAQ3+D,GAAO,OAAO,IAAI66D,WAAYrsD,KAAKmwD,EAAQ3+D,IAQxEzF,KAAKmK,MAAQ,WAAY,OAAO,IAAIm2D,WAEpCtgE,KAAK8G,KAAO,SAASA,GAAO,OAAO,IAAIw5D,WAAYx5D,KAAKA,IAExD9G,KAAKoe,KAAO,WAAY,OAAO,IAAIiiD,QAAQxkC,WAE3C77B,KAAKqkE,cAAgB,SAAS5lE,GAC7B,GAAGA,EAAE,CACJ,IAAIkW,EAAOlW,EAAEuO,MAAM,KACnB,GAAc,OAAX2H,EAAK,IAA0B,OAAXA,EAAK,GAAa,OAAO,EAEjD,OAAO,GAuBR2rD,UAAUnhE,UAAUf,IAAM,SAASkmE,EAAMC,EAAM3/D,GAC9C,GAAG0/D,EAAKx9D,KAAK,CACZ,IAAIod,EAAMogD,EAAKx9D,OACflC,EAAS2/D,OAGLrgD,EAAMxY,KAAK84D,eAAeF,EAAMC,GAUrC,OARG3/D,GACCA,EAAOkC,OAAMlC,EAASA,EAAOkC,QAChC4E,KAAKuP,OAAL,IAAqB,CAACiJ,EAAKtf,KAG3B8G,KAAKuP,OAAL,IAAqB,CAACiJ,EAAK,IAC3BxY,KAAKuP,OAASvP,KAAKuP,OAAL,IAAmB,IAE3BvP,MAGR40D,UAAUnhE,UAAUqlE,eAAiB,SAASp/C,EAAMkE,GACnD,IAAIm7C,EAAU,GACd,GAAGr/C,GAAuB,iBAARA,GAAoBA,EAAK1kB,OAC1C,IAAI,IAAInD,EAAI,EAAGA,EAAE6nB,EAAK1kB,OAAQnD,IAAI,CACjC,IAAIsW,EAAIuR,EAAK7nB,GACb,GAAG+rB,GAAuB,iBAARA,GAAoBA,EAAK5oB,OAAO,CACjD,IAAI9C,EAAI0rB,EAAK/rB,GACE,iBAALK,IACTA,EAAI,CAAC,SAAUA,IAEhB6mE,EAAQ/tD,KAAK,CAACyrD,GAAI,CAACvkE,EAAGiW,UAGtBA,EAAEsuD,GAAKsC,EAAQ/tD,KAAK7C,GAAK4wD,EAAQ/tD,KAAK,CAACyrD,GAAI,CAACtuD,KAI/C,OAAO4wD,GAGRnE,UAAUnhE,UAAU6jE,SAAW,SAAS0B,EAAIj/D,EAAMk/D,GAEjD,OADAj5D,KAAKuP,OAAL,SAA0B,CAACypD,EAAIj/D,EAAMk/D,GAC9Bj5D,MAGR40D,UAAUnhE,UAAUuB,OAAS,SAASgkE,EAAIC,GAEzC,OADAj5D,KAAKuP,OAAL,OAAwB,CAACypD,EAAIC,GACtBj5D,MAGR40D,UAAUnhE,UAAUgkE,GAAK,SAAS9jE,EAAGC,EAAG3B,GAEvC,OADA+N,KAAKuP,OAAL,GAAoB,CAAC5b,EAAGC,EAAG3B,GACpB+N,MAGR40D,UAAUnhE,UAAUkjE,OAAS,SAASv7D,GAErC,OADA4E,KAAKuP,OAAL,OAAwB,CAACnU,GAClB4E,MAGR40D,UAAUnhE,UAAU6D,KAAO,SAAS8D,GAEnC,OADA4E,KAAKuP,OAAL,KAAsB,CAACnU,GAChB4E,MAKR40D,UAAUnhE,UAAUmjE,SAAW,SAASC,EAAUC,EAAYC,EAAY7wB,GACzE,IAAI/tC,EAAO,GAWX,GAVA6H,KAAKuP,OAAL,SAA0BpX,EACvB0+D,EAASz7D,MACXjD,EAAK6S,KAAK6rD,EAASz7D,QAEjBy7D,EAAQ,KACV1+D,EAAK6S,KAAK6rD,GAGV1+D,EAAK6S,KAAK,CAAC,KAAQ6rD,IAEI,iBAAdC,GAA0Bv+C,MAAM9jB,QAAQqiE,GAAY,CAC7DoC,GAAK,GACL,IAAI,IAAIrnE,EAAI,EAAGA,EAAEilE,EAAW9hE,OAAQnD,IACnCqnE,GAAGluD,KAAsC,MAAjC8rD,EAAWjlE,GAAGkQ,UAAU,EAAG,GAAa,KAAO+0D,EAAWjlE,GAAKilE,EAAWjlE,IAEnFilE,EAAa,CAAC,KAAQoC,QAEM,iBAAdpC,GACmB,MAA9BA,EAAW/0D,UAAU,EAAG,KAAY+0D,EAAa,KAAOA,GAG5D,GADA3+D,EAAK6S,KAAK8rD,GACP5wB,EACF6wB,EAAaA,EAAW37D,KAAO27D,EAAW37D,OAAS27D,EACnD5+D,EAAK6S,KAAK+rD,OAEN,CACJ7wB,EAAS6wB,EACT,IAAIoC,EAAK,GACTn5D,KAAKuP,OAAS4pD,EACdhhE,EAAK6S,KAAKmuD,GAIX,MAF6B,MAA1BjzB,EAAOnkC,UAAU,EAAG,KAAYmkC,EAAS,KAAOA,GACnD/tC,EAAK6S,KAAKk7B,GACHlmC,MAGR40D,UAAUnhE,UAAU4jE,MAAQ,SAAS/uD,EAAQouD,EAAM38D,EAAM/G,GAexD,OAdAgN,KAAKuP,OAAL,MAAuB,CAACjH,GACrBouD,EAAKt7D,KACP4E,KAAKuP,OAAL,MAAqBvE,KAAK0rD,EAAKt7D,QAExBs7D,EAAKl2C,KACZxgB,KAAKuP,OAAL,MAAqBvE,KAAK0rD,GAG1B12D,KAAKuP,OAAL,MAAqBvE,KAAK,CAAC,KAAQ0rD,IAEjC1jE,GACFgN,KAAKuP,OAAL,MAAqBvE,KAAKhY,GAE3BgN,KAAKuP,OAAL,MAAqBvE,KAAKjR,GACnBiG,MAIR40D,UAAUnhE,UAAU2jE,OAAS,SAAS9uD,EAAQouD,EAAM38D,GAYnD,OAXAiG,KAAKuP,OAAL,OAAwB,CAACjH,GACtBouD,EAAKt7D,KACP4E,KAAKuP,OAAL,OAAsBvE,KAAK0rD,EAAKt7D,QAEzBs7D,EAAKl2C,KACZxgB,KAAKuP,OAAL,OAAsBvE,KAAK0rD,GAG3B12D,KAAKuP,OAAL,OAAsBvE,KAAK,CAAC,KAAQ0rD,IAErC12D,KAAKuP,OAAL,OAAsBvE,KAAKjR,GACpBiG,MAIR40D,UAAUnhE,UAAU4iC,OAAS,SAAS7V,EAAMrY,GAC3C,GAAkB,iBAARqY,EAGT,IAFA,IAAI44C,EAAQ54C,EAAKlf,MAAM,gBAEfzP,EAAI,EAAGA,EAAEunE,EAAMpkE,OAAQnD,IACkB,KAA7CunE,EAAMvnE,EAAE,GAAGkQ,UAAUq3D,EAAMvnE,EAAE,GAAGmD,OAAO,IAAyC,KAA5BokE,EAAMvnE,GAAGkQ,UAAU,EAAG,KAC5Eq3D,EAAMvnE,EAAE,GAAKunE,EAAMvnE,EAAE,GAAGkQ,UAAU,EAAGq3D,EAAMvnE,EAAE,GAAGmD,OAAO,GACvDokE,EAAMvnE,GAAKunE,EAAMvnE,GAAGkQ,UAAU,SAI5B,GAAGye,EAAKA,KACR44C,EAAQ54C,EAAKA,UAEb,GAAkB,iBAARA,EACV44C,EAAQ54C,EAEb,IAAIroB,EAAO,GACX,IAAQtG,EAAI,EAAGA,EAAEunE,EAAMpkE,OAAQnD,IAC9B,GAAIunE,EAAMvnE,GACV,GAAsB,iBAAZunE,EAAMvnE,GACf,GAA+B,MAA5BunE,EAAMvnE,GAAGkQ,UAAU,EAAG,GACxB5J,EAAK6S,KAAKouD,EAAMvnE,QAEZ,CACJ,IAAI+jC,EAAS,CAAC,SAAUwjC,EAAMvnE,GAAI,QAAS,cAC3CsG,EAAK6S,KAAK4qB,QAGJwjC,EAAMvnE,IACbsG,EAAK6S,KAAKouD,EAAMvnE,IAKlB,OAFsB,GAAnBsW,EAAEmE,QAAQ,OAAYnE,EAAI,KAAOA,GACpCnI,KAAKuP,OAAL,OAAwB,CAAC,CAAC,KAAQpX,GAAOgQ,GAClCnI,MAGR40D,UAAUnhE,UAAUwjE,MAAQ,SAASC,EAAGplE,GAEvC,OADAkO,KAAKuP,OAAL,MAAuB,CAAC2nD,EAAGplE,GACpBkO,MAGR40D,UAAUnhE,UAAU0jE,IAAM,SAAS30D,EAAO20D,EAAKhY,EAAKjZ,GAEnD,OADAlmC,KAAKuP,OAAL,IAAqB,CAAC/M,EAAO20D,EAAKhY,EAAKjZ,GAChClmC,MAGR40D,UAAUnhE,UAAU8W,KAAO,YAAYiW,GAEtC,OADAxgB,KAAKuP,OAAL,KAAsBiR,EACfxgB,MAGR40D,UAAUnhE,UAAUikE,KAAO,SAASC,EAAIC,GAEvC,OADA53D,KAAKuP,OAAL,KAAsB,CAACooD,EAAIC,GACpB53D,MAGR40D,UAAUnhE,UAAUokE,QAAU,SAASF,EAAIC,GAE1C,OADA53D,KAAKuP,OAAL,QAAyB,CAACooD,EAAIC,GACvB53D,MAIR40D,UAAUnhE,UAAU+sB,KAAQ,YAAY9G,GAEvC,OADA1Z,KAAKuP,OAAL,KAAsBmK,EACf1Z,MAOR40D,UAAUnhE,UAAU2H,KAAO,SAASA,GACnC,OAAGA,GACF4E,KAAKvB,MAAQrD,EACN4E,MAEDA,KAAKvB,OAObm2D,UAAUnhE,UAAU6hE,KAAO,SAASC,EAAOC,GAC1C,GAAmB,kBAATD,EAERv1D,KAAKuP,OAAL,KADEgmD,EACoB,CAAC,CAAC,KAAQ,IAAK,IAGf,CAAC,CAAC,MAAS,IAAK,QAGnC,CACJ,IAAI11D,EAAK01D,EAAMn6D,KAAOm6D,EAAMn6D,OAASm6D,EACrCv1D,KAAKuP,OAAL,KAAsB,CAAC1P,EAAG,IAE3B,GAAG21D,EAAO,CACT,IAAI6D,EAAO7D,EAAOp6D,KAAOo6D,EAAOp6D,OAASo6D,EACzCx1D,KAAKuP,OAAL,KAAoB,GAAK8pD,EAG1B,OADAr5D,KAAKuP,OAASvP,KAAKuP,OAAL,KAAoB,GAC3BvP,MAGR40D,UAAUnhE,UAAU8L,IAAM,SAASd,GAClC,GAAGA,EAAM,CACR,IAAIoB,EAA2B,mBAAdpB,EAAMrD,KAAsBqD,EAAMrD,OAASqD,EAC5DuB,KAAKuP,OAAL,IAAqB,CAAC1P,QAGtBG,KAAKuP,OAAL,IAAqB,CAAC,IACtBvP,KAAKuP,OAASvP,KAAKuP,OAAL,IAAmB,GAElC,OAAOvP,MAGR40D,UAAUnhE,UAAU+pD,KAAO,SAAStB,EAAOz9C,GAK1C,OAJAuB,KAAKs5D,cAAc,OAAQpd,GACxBz9C,IACFuB,KAAKuP,OAAS9Q,EAAMrD,QAEd4E,MAGR40D,UAAUnhE,UAAUgiE,KAAO,SAASvZ,EAAOz9C,GAK1C,OAJAuB,KAAKs5D,cAAc,OAAQpd,GACxBz9C,IACFuB,KAAKuP,OAAS9Q,EAAMrD,QAEd4E,MAIR40D,UAAUnhE,UAAUmL,MAAQ,SAASA,EAAOH,GAK3C,OAJAuB,KAAKs5D,cAAc,QAAS16D,GACzBH,IACFuB,KAAKuP,OAAS9Q,EAAMrD,QAEd4E,MAGR40D,UAAUnhE,UAAUqL,MAAQ,SAASA,EAAOL,GAK3C,OAJAuB,KAAKs5D,cAAc,QAASx6D,GACzBL,IACFuB,KAAKuP,OAAS9Q,EAAMrD,QAEd4E,MAGR40D,UAAUnhE,UAAUukD,OAAS,YAAax3B,GACzCxgB,KAAKuP,OAAOyoC,OAASx3B,EACrB,MAAMtc,EAAQsc,EAAKxrB,OAOnB,MAN6C,iBAAlCgL,KAAKuP,OAAOyoC,OAAO9zC,EAAQ,GACrClE,KAAKuP,OAAOyoC,OAAO9zC,EAAQ,GAAKlE,KAAKuP,OAAOyoC,OAAO9zC,EAAQ,GAAG9I,QAE9D4E,KAAKuP,OAAOyoC,OAAO9zC,GAAS,GAC5BlE,KAAKuP,OAASvP,KAAKuP,OAAOyoC,OAAO9zC,IAE3BlE,MAGR40D,UAAUnhE,UAAU2L,IAAM,YAAau2D,GACtC31D,KAAKuP,OAAOnQ,IAAM,GAClB,IAAK,IAAIvN,EAAI,EAAGA,EAAI8jE,EAAQ3gE,OAAQnD,IAC/B8jE,EAAQ9jE,GAAGijE,kBAAiB90D,KAAK80D,iBAAkB,GACvD90D,KAAKuP,OAAOnQ,IAAI4L,KAAK2qD,EAAQ9jE,GAAGuJ,QAEjC,OAAO4E,MAGR40D,UAAUnhE,UAAUiiE,GAAK,YAAaC,GACrC31D,KAAKuP,OAAOmmD,GAAK,GACjB,IAAK,IAAI7jE,EAAI,EAAGA,EAAI8jE,EAAQ3gE,OAAQnD,IAC/B8jE,EAAQ9jE,GAAGijE,kBAAiB90D,KAAK80D,iBAAkB,GACvD90D,KAAKuP,OAAOmmD,GAAG1qD,KAAK2qD,EAAQ9jE,GAAGuJ,QAEhC,OAAO4E,MAGR40D,UAAUnhE,UAAUmiE,IAAM,SAAUn3D,GAQnC,OAPIA,GACCA,EAAMq2D,kBAAiB90D,KAAK80D,iBAAkB,GAClD90D,KAAKuP,OAAOqmD,IAAM,CAACn3D,EAAMrD,UAEzB4E,KAAKuP,OAAOqmD,IAAM,CAAC,IACnB51D,KAAKuP,OAASvP,KAAKuP,OAAOqmD,IAAI,IAExB51D,MAGR40D,UAAUnhE,UAAUoiE,OAAS,SAASh/D,EAAGC,EAAG5E,GAE3C,OADA8N,KAAKuP,OAAL,OAAwB,CAACvP,KAAKu5D,aAAa1iE,GAAGmJ,KAAKw5D,eAAe1iE,GAAGkJ,KAAKy5D,YAAYvnE,IAC/E8N,KAAKw0D,KAAK,SAAUx0D,KAAKu5D,aAAa1iE,KAG9C+9D,UAAUnhE,UAAU4L,KAAO,SAASxI,EAAGC,EAAG5E,EAAGk2D,GAE5C,OADApoD,KAAKuP,OAAL,KAAsB,CAACvP,KAAKu5D,aAAa1iE,GAAGmJ,KAAKw5D,eAAe1iE,GAAGkJ,KAAKy5D,YAAYvnE,GAAG8N,KAAK05D,WAAWtR,IAChGpoD,KAAKw0D,KAAK,OAAQx0D,KAAKu5D,aAAa1iE,KAG5C+9D,UAAUnhE,UAAUsiE,GAAK,SAASl/D,EAAGC,GAEpC,OADAkJ,KAAKuP,OAAL,GAAoB,CAACvP,KAAKy5D,YAAY5iE,GAAGmJ,KAAKy5D,YAAY3iE,IACnDkJ,KAAKw0D,QAGbI,UAAUnhE,UAAU6L,IAAM,SAASzI,EAAGC,GACrC,OAAIA,GAAKkJ,KAAKk1D,eACbl1D,KAAKk1D,cAAc51D,IAAIU,KAAK25D,WAAW9iE,IAChCmJ,OAERA,KAAKuP,OAAL,IAAqB,CAACvP,KAAK25D,WAAW9iE,GAAGmJ,KAAK25D,WAAW7iE,IAClDkJ,KAAKw0D,KAAK,MAAO39D,KAGzB+9D,UAAUnhE,UAAU2+D,QAAU,SAAS19D,GACnCA,GAAOA,EAAI0G,KACb4E,KAAKuP,OAAL,QAAyB,CAAC7a,EAAI0G,QAET,iBAAP1G,EACdsL,KAAKuP,OAAL,QAAyB,CAAC,CAAC,SAAU7a,EAAK,YAAa,OAElC,iBAAPA,EACXA,EAAIM,OAAQgL,KAAKuP,OAAL,QAAyB7a,EACnCsL,KAAKuP,OAAL,QAAyB,CAAC7a,GAG/BsL,KAAKuP,OAAL,QAAyB,GAE1B,IAAIqqD,EAAa55D,KAAKuP,OAAL,QAAuBva,OAGxC,OAFAgL,KAAKuP,OAAL,QAAuBqqD,GAAc,GACrC55D,KAAKuP,OAASvP,KAAKuP,OAAL,QAAuBqqD,GAC9B55D,MAIR40D,UAAUnhE,UAAUomE,SAAW,SAASx3D,GACvC,OAAGA,EACKrC,KAAKX,KAAKgD,EAAS,UAAW,eAAgB,cAE9CrC,KAAKk1D,eACZl1D,KAAKk1D,cAAc2E,WAEb75D,OAGR40D,UAAUnhE,UAAUqiE,IAAM,SAASj/D,EAAGC,GACrC,OAAIA,GAAKkJ,KAAKk1D,eACbl1D,KAAKk1D,cAAcY,IAAI91D,KAAK25D,WAAW9iE,IAChCmJ,MAELlJ,GACFkJ,KAAKuP,OAAL,IAAqB,CAACvP,KAAK25D,WAAW9iE,GAAGmJ,KAAK25D,WAAW7iE,IAClDkJ,KAAKw0D,KAAK,MAAO39D,SAFzB,GAMD+9D,UAAUnhE,UAAUuD,KAAO,SAASH,EAAGC,GAEtC,OADAkJ,KAAKuP,OAAL,KAAsB,CAAC1Y,EAAGC,GACnBkJ,KAAKw0D,KAAK,OAAQ19D,IAG1B89D,UAAUnhE,UAAUsM,KAAO,SAAS+3D,EAAO3vD,GAG1C,OAFA2vD,EAAQA,EAAM18D,KAAO08D,EAAM18D,OAAS08D,EACpC93D,KAAKuP,OAAL,KAAsB,CAACuoD,EAAO3vD,GACvBnI,KAAKw0D,KAAK,OAAQrsD,IAG1BysD,UAAUnhE,UAAUskE,KAAO,YAAa5/D,GACvC6H,KAAKuP,OAAOwoD,KAAO,GACnB,IAAI,IAAIlmE,EAAI,EAAGA,EAAIsG,EAAKnD,OAAQnD,IAC/BmO,KAAKuP,OAAOwoD,KAAK/sD,KAAK7S,EAAKtG,GAAGuJ,KAAOjD,EAAKtG,GAAGuJ,OAASjD,EAAKtG,IAE5D,OAAOmO,KAAKw0D,QAGbI,UAAUnhE,UAAUukE,MAAQ,YAAa7/D,GACxC6H,KAAKuP,OAAOyoD,MAAQ,GACpB,IAAI,IAAInmE,EAAI,EAAGA,EAAIsG,EAAKnD,OAAQnD,IAC/BmO,KAAKuP,OAAOyoD,MAAMhtD,KAAK7S,EAAKtG,GAAGuJ,KAAOjD,EAAKtG,GAAGuJ,OAASjD,EAAKtG,IAE7D,OAAOmO,KAAKw0D,QAGbI,UAAUnhE,UAAUwkE,MAAQ,YAAa9/D,GACxC6H,KAAKuP,OAAO0oD,MAAQ,GACpB,IAAI,IAAIpmE,EAAI,EAAGA,EAAIsG,EAAKnD,OAAQnD,IAC/BmO,KAAKuP,OAAO0oD,MAAMjtD,KAAK7S,EAAKtG,GAAGuJ,KAAOjD,EAAKtG,GAAGuJ,OAASjD,EAAKtG,IAE7D,OAAOmO,KAAKw0D,QAGbI,UAAUnhE,UAAUykE,OAAS,YAAa//D,GACzC6H,KAAKuP,OAAO2oD,OAAS,GACrB,IAAI,IAAIrmE,EAAI,EAAGA,EAAIsG,EAAKnD,OAAQnD,IAC/BmO,KAAKuP,OAAO2oD,OAAOltD,KAAK7S,EAAKtG,GAAGuJ,KAAOjD,EAAKtG,GAAGuJ,OAASjD,EAAKtG,IAE9D,OAAOmO,KAAKw0D,QAGbI,UAAUnhE,UAAU0kE,IAAM,YAAahgE,GACtC6H,KAAKuP,OAAO4oD,IAAM,GAClB,IAAI,IAAItmE,EAAI,EAAGA,EAAIsG,EAAKnD,OAAQnD,IAC/BmO,KAAKuP,OAAO4oD,IAAIntD,KAAK7S,EAAKtG,GAAGuJ,KAAOjD,EAAKtG,GAAGuJ,OAASjD,EAAKtG,IAE3D,OAAOmO,KAAKw0D,QAGbI,UAAUnhE,UAAUyiD,IAAM,SAAUr/C,EAAGC,GAItC,OAHAD,EAAKA,EAAEuE,KAAOvE,EAAEuE,OAASvE,EACzBC,EAAKA,EAAEsE,KAAOtE,EAAEsE,OAAStE,EACzBkJ,KAAKuP,OAAO2mC,IAAM,CAACr/C,EAAGC,GACfkJ,KAAKw0D,QAGbI,UAAUnhE,UAAUgqD,OAAS,SAAUuY,GAEtC,OADAh2D,KAAKuP,OAAOkuC,OAAS,CAACuY,GACfh2D,KAAK85D,cAGblF,UAAUnhE,UAAUwiE,cAAgB,SAAU8D,EAASC,EAAWC,GAEjE,OADAj6D,KAAKuP,OAAL,cAA+B,CAACvP,KAAKu5D,aAAaQ,GAAS/5D,KAAKw5D,eAAeQ,GAAWh6D,KAAKy5D,YAAYQ,IACpGj6D,KAAK85D,WAAW,gBAAiB95D,KAAKu5D,aAAaQ,KAG3DnF,UAAUnhE,UAAU8iE,WAAa,SAAUwD,EAASC,EAAWC,GAE9D,OADAj6D,KAAKuP,OAAL,WAA2B,CAACvP,KAAKu5D,aAAaQ,GAAS/5D,KAAKw5D,eAAeQ,GAAWh6D,KAAKy5D,YAAYQ,IAChGj6D,KAAK85D,WAAW,aAAc95D,KAAKu5D,aAAaQ,KAGxDnF,UAAUnhE,UAAU4iE,YAAc,SAAU0D,EAASC,EAAWC,EAAmBC,GAElF,OADAl6D,KAAKuP,OAAL,YAA4B,CAACvP,KAAKu5D,aAAaQ,GAAS/5D,KAAKw5D,eAAeQ,GAAWh6D,KAAKy5D,YAAYQ,GAAmBj6D,KAAK05D,WAAWQ,IACpIl6D,KAAK85D,WAAW,cAAe95D,KAAKu5D,aAAaQ,KAGzDnF,UAAUnhE,UAAU+iE,SAAW,SAAUuD,EAASC,EAAWC,EAAmBC,GAE/E,OADAl6D,KAAKuP,OAAL,SAA0B,CAACvP,KAAKu5D,aAAaQ,GAAS/5D,KAAKw5D,eAAeQ,GAAWh6D,KAAKy5D,YAAYQ,GAAmBj6D,KAAK05D,WAAWQ,IAClIl6D,KAAK85D,WAAW,WAAY95D,KAAKu5D,aAAaQ,KAGtDnF,UAAUnhE,UAAUogC,OAAS,SAAS/6B,GAErC,OADAkH,KAAKuP,OAAL,OAAwB,CAAEzW,EAAKsC,QACxB4E,KAAK85D,cAMblF,UAAUnhE,UAAU6T,SAAW,SAASpV,EAAGsoB,GAM1C,OALGtoB,IACFsoB,EAASA,EAAQxa,KAAK05D,WAAWl/C,GAAS,YAC1CtoB,GAAwB,GAAnBA,EAAEoa,QAAQ,KAAc,OAASpa,EAAIA,EAC1C8N,KAAKw2D,SAAStkE,EAAG,WAAY,YAAasoB,IAEpCxa,MAGR40D,UAAUnhE,UAAUy8D,YAAc,SAASv8D,EAAGZ,EAAGq1D,GAEhD,GADAr1D,EAAKA,GAAQ,aACVY,EAAE,CACJ,IAAI6mB,EAAS4tC,EAAIpoD,KAAK05D,WAAWtR,GAAK,YACtCz0D,GAAwB,GAAnBA,EAAE2Y,QAAQ,KAAe,OAAS3Y,EAAIA,EAC3CZ,GAAwB,GAAnBA,EAAEuZ,QAAQ,KAActM,KAAKm6D,UAAUpnE,GAAKA,EACxCiN,KAAKuP,OACXjb,KAAKqkE,cAAc5lE,GACrBiN,KAAKZ,IACJ9K,KAAKkiE,SAAS7iE,EAAG,WAAY,uBAAwB6mB,GACrDlmB,KAAKkiE,SAAS7iE,EAAG,aAAcZ,EAAGynB,IAInCxa,KAAKZ,IACJ9K,KAAKkiE,SAAS7iE,EAAG,WAAY,qBAAsB6mB,GACnDlmB,KAAKkiE,SAAS7iE,EAAG,aAAcZ,EAAGynB,IAIrC,OAAOxa,KAAK85D,WAAW,WAAY95D,KAAK25D,WAAWhmE,KAGpDihE,UAAUnhE,UAAU+kE,YAAc,SAAStmE,EAAGsoB,GAC7C,OAAGtoB,GACFsoB,EAASA,EAAQxa,KAAK05D,WAAWl/C,GAAS,YAC1CtoB,GAAwB,GAAnBA,EAAEoa,QAAQ,KAAe,OAASpa,EAAIA,EACpC8N,KAAKZ,IACX9K,KAAK+hE,YAAYnkE,EAAG,QAAS,QAASsoB,GACtClmB,KAAKiL,MAAM82D,YAAY,QAAS,QAASnkE,EAAGsoB,KAGvCxa,MAGR40D,UAAUnhE,UAAUglE,eAAiB,SAAS9kE,EAAG6mB,GAChD,OAAG7mB,GACF6mB,EAASA,EAAQxa,KAAK05D,WAAWl/C,GAAS,YAC1C7mB,GAAwB,GAAnBA,EAAE2Y,QAAQ,KAAc,OAAS3Y,EAAIA,EACnCqM,KAAKZ,IACX9K,KAAK+hE,YAAY1iE,EAAG,QAAS,QAAS6mB,GACtClmB,KAAK+hE,YAAY,QAAS,QAAS1iE,EAAG6mB,KAGjCxa,MAMR40D,UAAUnhE,UAAUgjE,GAAK,SAAS5/D,EAAGC,GACpC,GAAID,GAAMC,EAAV,CACIkJ,KAAKo6D,UACRp6D,KAAKo6D,SAAU,EACfp6D,KAAKvB,MAAQ,IAEd3H,GAAwB,GAAnBA,EAAEwV,QAAQ,KAAa,KAAOxV,EAAIA,EACvC,IAAIpC,EAAmB,iBAALmC,EAAgBA,EAAI,CAAE,SAAWA,GAEnD,OADAmJ,KAAKvB,MAAMuM,KAAK,CAACyrD,GAAI,CAAC/hE,EAAKoC,KACpBkJ,OAOR40D,UAAUnhE,UAAU8U,KAAO,SAASA,EAAMxO,GAGzC,OAFAA,EAAQA,GAAc,SACtBiG,KAAKk1D,cAAgB,IAAIG,cAAct7D,EAAMiG,KAAKuP,OAAQhH,GACnDvI,MAGR40D,UAAUnhE,UAAUuT,IAAM,SAAS/U,GAElC,OADG+N,KAAKk1D,eAAel1D,KAAKk1D,cAAcmF,KAAKpoE,EAAG,OAC3C+N,MAGR40D,UAAUnhE,UAAUqgE,YAAc,SAAS7hE,GAE1C,OADG+N,KAAKk1D,eAAel1D,KAAKk1D,cAAcmF,KAAKpoE,EAAG,eAC3C+N,MAGR40D,UAAUnhE,UAAUsT,IAAM,SAAS9U,GAElC,OADG+N,KAAKk1D,eAAel1D,KAAKk1D,cAAcmF,KAAKpoE,EAAG,OAC3C+N,MAGR40D,UAAUnhE,UAAU+mB,MAAQ,SAAS4tC,GACpCA,EAAIpoD,KAAK05D,WAAWtR,GACpB,IAAIr1D,EAAkB,UAAbiN,KAAKjG,MAAoB,OAOlC,MANgB,cAAbiG,KAAKjG,OAAsBhH,EAAI,YAClB,iBAAbiN,KAAKjG,OAAyBhH,EAAI,eACjCiN,KAAKk1D,gBACRl1D,KAAKk1D,cAAgB,IAAIG,cAActiE,EAAGiN,KAAKuP,SAEhDvP,KAAKk1D,cAAc16C,MAAM4tC,GAClBpoD,MAGR40D,UAAUnhE,UAAUse,OAAS,SAAS5f,GAGrC,OAFAA,EAAI6N,KAAK25D,WAAWxnE,GACjB6N,KAAKk1D,eAAel1D,KAAKk1D,cAAcoF,MAAM,cAAcnoE,GACvD6N,MAGR40D,UAAUnhE,UAAUuG,MAAQ,SAASlI,EAAGkhE,GAEvC,OADGhzD,KAAKk1D,eAAel1D,KAAKk1D,cAAcl7D,MAAMlI,EAAGkhE,GAC5ChzD,MAGR40D,UAAUnhE,UAAU8E,YAAc,SAASrG,EAAG8gE,GAE7C,OADGhzD,KAAKk1D,eAAel1D,KAAKk1D,cAAc38D,YAAYrG,EAAG8gE,GAClDhzD,MAGR40D,UAAUnhE,UAAUoQ,OAAS,YAAYlQ,GACxC,GAAGqM,KAAKk1D,cACP,IAAI,IAAIrjE,EAAI,EAAIA,EAAE8B,EAAEqB,OAAQnD,IAAI,CAC/B,IAAI23C,EAAKxpC,KAAK25D,WAAWhmE,EAAE9B,IAC3BmO,KAAKk1D,cAAcoF,MAAM,kBAAmB9wB,GAG9C,OAAOxpC,MAGR40D,UAAUnhE,UAAU8mE,OAAS,YAAY5mE,GACxC,OAAOqM,KAAK6D,OAAO,eAGpB+wD,UAAUnhE,UAAU+mE,aAAe,YAAY7mE,GAC9C,OAAOqM,KAAK6D,OAAO,eAGpB+wD,UAAUnhE,UAAUD,SAAW,SAASG,EAAEe,GAKzC,OAJGsL,KAAKk1D,gBACPvhE,EAAIqM,KAAKw5D,eAAe7lE,GACxBqM,KAAKk1D,cAAcoF,MAAM3mE,EAAGe,IAEtBsL,MAGR40D,UAAUnhE,UAAU4kE,KAAO,SAASoC,EAAUC,EAAMC,EAAMC,GAKzD,OAJAF,EAAQA,EAAO16D,KAAKu5D,aAAamB,GAAQ,YACzCC,EAAQA,EAAO36D,KAAKw5D,eAAemB,GAAQ,cAC3CC,EAAOA,EAAO56D,KAAKy5D,YAAYmB,GAAO,YACtCH,IAAYA,GAAWz6D,KAAK05D,WAAWe,IAE/Bz6D,KAAKX,KAAKq7D,EAAMC,EAAMC,EAAKH,GAG3Bz6D,KAAK61D,OAAO6E,EAAMC,EAAMC,IAKjChG,UAAUnhE,UAAUwL,cAAgB,SAASw7D,GAC5C,OAAGA,GACFA,EAAWz6D,KAAK05D,WAAWe,GACpBz6D,KAAKX,KAAK,YAAa,cAAe,WAAYo7D,IAGlDz6D,KAAK61D,OAAO,YAAa,cAAe,aAIjDjB,UAAUnhE,UAAUyL,gBAAkB,WACrC,OAAOc,KAAKZ,IACX9K,KAAKuhE,OAAO,YAAa,WAAY,UACrCvhE,KAAKgL,IAAI,SAAU,kBAIrBs1D,UAAUnhE,UAAU0L,iBAAmB,WACtC,OAAOa,KAAKZ,IACX9K,KAAKuhE,OAAO,OAAQ,WAAY,WAChCvhE,KAAKgL,IAAI,UAAW,gBACpBhL,KAAKiL,MAAMs2D,OAAO,OAAQ,aAAc,WACxCvhE,KAAKiL,MAAMs2D,OAAO,OAAQ,eAAgB,aAC1CvhE,KAAKiL,MAAMF,KAAK,UAAW,aAAc,SAAU,aACnD/K,KAAKiL,MAAMF,KAAK,UAAW,eAAgB,iBAAkB,eAI/Du1D,UAAUnhE,UAAUonE,wBAA0B,WAC7C,OAAO76D,KAAKZ,IACX9K,KAAKgL,IAAI,UAAW,gBACpBhL,KAAKshE,MAAMiE,SAAS,WACpBvlE,KAAKiL,MAAMF,KAAK,UAAW,aAAc,UAAW,aACpD/K,KAAKiL,MAAMF,KAAK,UAAW,eAAgB,YAAa,eAI1Du1D,UAAUnhE,UAAU+L,iBAAmB,WACtC,OAAOQ,KAAKZ,IACX9K,KAAKohE,GACJphE,KAAK+K,KAAK,aAAc,WAAY,uBAAwB,aAC5D/K,KAAK+K,KAAK,aAAc,WAAY,qBAAsB,cAE3D/K,KAAKiL,MAAMF,KAAK,aAAc,aAAc,UAAW,aACvD/K,KAAKiL,MAAMF,KAAK,aAAc,WAAY,SAAU,aACpD/K,KAAKiL,MAAMF,KAAK,aAAc,aAAc,UAAW,aACvD/K,KAAKiL,MAAMF,KAAK,aAAc,eAAgB,YAAa,aAC3D/K,KAAKiL,MAAMF,KAAK,aAAc,cAAe,WAAY,eAI3Du1D,UAAUnhE,UAAUsL,gBAAkB,WACrC,OAAOiB,KAAKZ,IACX9K,KAAK+K,KAAK,YAAa,WAAY,SAAU,aAC7C/K,KAAKiL,MAAMF,KAAK,YAAa,UAAW,aAAc,aACtD/K,KAAKiL,MAAMF,KAAK,YAAa,aAAc,UAAW,aACtD/K,KAAKiL,MAAMF,KAAK,YAAa,eAAgB,YAAa,aAC1D/K,KAAKiL,MAAMF,KAAK,YAAa,kBAAmB,WAAY,aAC5D/K,KAAKiL,MAAMF,KAAK,YAAa,cAAe,WAAY,aACxD/K,KAAKiL,MAAMF,KAAK,YAAa,aAAc,UAAW,eAIxDu1D,UAAUnhE,UAAUuL,cAAgB,WACnC,OAAOgB,KAAKZ,IACX9K,KAAK+K,KAAK,YAAa,WAAY,YAAa,aAChD/K,KAAKiL,MAAMF,KAAK,YAAa,aAAc,UAAW,aACtD/K,KAAKiL,MAAMF,KAAK,YAAa,eAAgB,YAAa,aAC1D/K,KAAKiL,MAAMF,KAAK,YAAa,UAAW,aAAc,eAIxDu1D,UAAUnhE,UAAUmnC,eAAiB,SAAS24B,GAC7C,OAAOvzD,KAAKZ,IACX9K,KAAKuhE,OAAO,YAAa,WAAYtC,GACrCj/D,KAAKiL,MAAMs2D,OAAO,YAAa,aAAc,aAI/CjB,UAAUnhE,UAAUonC,kBAAoB,SAAS04B,GAChD,OAAOvzD,KAAKZ,IACX9K,KAAKuhE,OAAO,YAAatC,EAAQ,WACjCj/D,KAAKiL,MAAMs2D,OAAO,YAAa,aAAc,aAI/CjB,UAAUnhE,UAAUqoC,mBAAqB,SAAS9uB,GACjD,OAAOhN,KAAKZ,IACX9K,KAAKuhE,OAAO7oD,EAAI,aAAc,oBAC9B1Y,KAAKiL,MAAMF,KAAK,aAAc,aAAc,mBAAoB,aAChE/K,KAAKiL,MAAMF,KAAK,aAAc,WAAY,kBAAmB,eAI/Du1D,UAAUnhE,UAAUqnE,uBAAyB,SAAS9tD,GACrD,OAAOhN,KAAKZ,IACX9K,KAAKohE,GACJphE,KAAKuhE,OAAO7oD,EAAI,aAAc,WAC9B1Y,KAAKuhE,OAAO,UAAW,aAAc7oD,IAEtC1Y,KAAKwhE,IAAI,UAAW,aACpBxhE,KAAKgL,IAAI,YAAa,gBACtBhL,KAAKiL,MAAMs2D,OAAO,UAAW,aAAc,WAC3CvhE,KAAKiL,MAAMF,KAAK,YAAa,aAAc,gBAAiB,eAI9Du1D,UAAUnhE,UAAU6uC,gBAAkB,SAASphC,GAC9C,OAAOlB,KAAKZ,IACX9K,KAAKuhE,OAAO30D,EAAK,WAAY,kBAC7B5M,KAAKiL,MAAMs2D,OAAO30D,EAAK,aAAc,mBACrC5M,KAAKiL,MAAMs2D,OAAO30D,EAAK,eAAgB,qBACvC5M,KAAKiL,MAAMF,KAAK,iBAAkB,aAAc,eAAgB,eAIlEu1D,UAAUnhE,UAAUsnE,iBAAmB,WACtC,OAAO/6D,KAAKZ,IACR9K,KAAKuhE,OAAO,WAAY,SAAU,YAClCvhE,KAAKwhE,IAAI,WAAY,kBACrBxhE,KAAKgL,IAAI,iBAAkB,gBAC3BhL,KAAKwhE,IAAI,WAAY,kBACrBxhE,KAAKgL,IAAI,iBAAkB,gBAC3BhL,KAAKiL,MAAMs2D,OAAO,WAAY,aAAc,kBAC5CvhE,KAAKiL,MAAMs2D,OAAO,WAAY,eAAgB,oBAC9CvhE,KAAKiL,MAAMF,KAAK,iBAAkB,aAAc,gBAAiB,aACjE/K,KAAKiL,MAAMF,KAAK,iBAAkB,eAAgB,wBAAyB,aAC3E/K,KAAKiL,MAAMs2D,OAAO,WAAY,aAAc,kBAC5CvhE,KAAKiL,MAAMs2D,OAAO,WAAY,eAAgB,oBAC9CvhE,KAAKiL,MAAMF,KAAK,iBAAkB,aAAc,gBAAiB,aACjE/K,KAAKiL,MAAMF,KAAK,iBAAkB,eAAgB,wBAAyB,aAC3E/K,KAAKiL,MAAMF,KAAK,SAAU,aAAc,cAAe,aACvD/K,KAAKiL,MAAMF,KAAK,SAAU,eAAgB,sBAAuB,eAStEu1D,UAAUnhE,UAAUunE,eAAiB,SAAS/pD,IACpC,IAAI2jD,WAAYv1D,KAAK,MAAO,MAAO,MAAO,aAChDs1B,QAAQ1jB,GAAQ5V,KAAO7E,IACzB,GAAGA,EAAOygC,UAAYzgC,EAAOygC,SAASjiC,OAAS,EAC9C,IAAI,IAAInD,EAAI,EAAGA,EAAE2E,EAAOygC,SAASjiC,OAAQnD,IACxC,IAAI,IAAIuQ,KAAK5L,EAAOygC,SAASplC,GAAG,CAC/B,IAAIsW,EAAI3R,EAAOygC,SAASplC,GAAGuQ,GAC3B,GAAe,iBAAL+F,EAAc,CACvB,IAAI8yD,EAAM9yD,EAAE7G,MAAM,KACD,GAAd25D,EAAIjmE,QAAeimE,EAAI,IAAgB,KAAVA,EAAI,KACnCj7D,KAAKg1D,MAAMiG,EAAI,IAAM9yD,QAa5BysD,UAAUnhE,UAAUynE,cAAgB,SAASlG,GAC5Ch1D,KAAKg1D,MAAQA,GAGdJ,UAAUnhE,UAAU0nE,cAAgB,SAASnG,GAC5C,OAAOh1D,KAAKg1D,OAGbJ,UAAUnhE,UAAU6/B,SAAW,WAC9B,OAAOtzB,KAAKo7D,kBAAkB,UAG/BxG,UAAUnhE,UAAU4nE,SAAW,SAASvpE,GACvC,OAAOkO,KAAKs7D,kBAAkB,QAASxpE,IAGxC8iE,UAAUnhE,UAAU61C,QAAU,SAASzpC,GACtCA,EAAKA,GAAQG,KAAKvB,MAClB,IAAK,MAAMkD,KAAQpP,OAAOoW,KAAK9I,GAAI,CAClC,GAAW,SAAR8B,EAAiB,OAAO,EACtB,IAAwD,IAArD3B,KAAK+0D,6BAA6BzoD,QAAQ3K,GACjD,OAAO3B,KAAKspC,QAAQzpC,EAAE8B,GAAM9B,EAAE8B,GAAM3M,OAAO,IAG7C,OAAO,GAGR4/D,UAAUnhE,UAAUggC,QAAU,WAC7B,GAAGzzB,KAAKspC,UAAU,CACjB,IAAIiyB,EAAQv7D,KAAKszB,WACjB,GAAGtzB,KAAKw7D,WAAW,CAClB,IAAI5nE,EAAIoM,KAAKy7D,WACb,OAAQrwD,SAASxX,EAAI2nE,GAAS,EAE1B,OAAO,EAER,OAAO,GAGb3G,UAAUnhE,UAAUkgC,QAAU,SAAS+nC,GACtC,IAAIC,EAAU37D,KAAKszB,YAAcooC,EAAU,GAO3C,OANG17D,KAAKw7D,WACPx7D,KAAK47D,SAASD,GAGd37D,KAAK67D,SAASF,GAER37D,MAGR40D,UAAUnhE,UAAUqgC,SAAW,WAC9B,OAAO9zB,KAAK2zB,QAAQ3zB,KAAKyzB,UAAY,IAGtCmhC,UAAUnhE,UAAUsgC,UAAY,WAC/B,OAAO/zB,KAAK2zB,QAAQ,IAGrBihC,UAAUnhE,UAAUugC,aAAe,WAClC,MAAM8nC,EAAQ97D,KAAKyzB,UAAY,EAE/B,OADGqoC,EAAQ,GAAG97D,KAAK2zB,QAAQmoC,GACpB97D,MAGR40D,UAAUnhE,UAAUmgC,YAAc,SAASrU,GAQ1C,OAPAvf,KAAKs7D,kBAAkB,QAAS/7C,GAC7Bvf,KAAKw7D,WACPx7D,KAAK47D,SAAS,GAGd57D,KAAK67D,SAAS,GAER77D,MAGR40D,UAAUnhE,UAAU2gC,UAAY,WAC/B,QAAQp0B,KAAKo7D,kBAAkB,WAGhCxG,UAAUnhE,UAAU4gC,mBAAqB,SAASx0B,GACjDA,EAAKA,GAAQG,KAAKvB,MAClB,IAAK,MAAMkD,KAAQpP,OAAOoW,KAAK9I,GAAI,CAClC,GAAW,UAAR8B,EAEF,OADW9B,EAAE8B,GAAMmI,MAAM,EAAGjK,EAAE8B,GAAM3M,OAAS,GAGzC,IAAwD,IAArDgL,KAAK+0D,6BAA6BzoD,QAAQ3K,GAAa,CAC9D,IAAIjN,EAAMsL,KAAKq0B,mBAAmBx0B,EAAE8B,GAAM9B,EAAE8B,GAAM3M,OAAO,IACzD,QAAiB,IAAPN,EACT,OAAOA,KAMXkgE,UAAUnhE,UAAU+nE,SAAW,WAC9B,YAAkD,IAAnCx7D,KAAKo7D,kBAAkB,UAGvCxG,UAAUnhE,UAAUgoE,SAAW,WAC9B,OAAOz7D,KAAKo7D,kBAAkB,UAG/BxG,UAAUnhE,UAAUmoE,SAAW,SAAS98D,GACvC,OAAOkB,KAAKs7D,kBAAkB,QAASx8D,IAGxC81D,UAAUnhE,UAAUooE,SAAW,SAASjoE,GACvC,GAAGoM,KAAKw7D,WAAYx7D,KAAK47D,SAAShoE,OAC7B,CACJ,IAAImoE,EAAK,CAAC,MAAS,CAACnoE,EAAGoM,KAAKvB,QAC5BuB,KAAKvB,MAAQs9D,EAEd,OAAO/7D,MAOR40D,UAAUnhE,UAAUkhC,QAAU,SAAS1jB,GACtC,GAAIjR,KAAKvB,MAAM,YAKVrD,EAAO4E,KAAK5E,WALU,CAC1B4E,KAAKvB,MAAM,YAAcuB,KAAKg8D,eAAe/qD,EAAOwY,iBAAiByC,SACrE,IAAI9wB,EAAO4E,KAAK5E,OAKjB,OAAG4E,KAAK80D,gBACA7jD,EAAO+mC,QAAO,EAAO58C,IAgB9Bw5D,UAAUnhE,UAAU6lE,cAAgB,SAASh/D,EAAQxH,GACpDkN,KAAKuP,OAAOjV,GAAU,CAACxH,GACvBkN,KAAKuP,OAAOjV,GAAQ,GAAK,GACzB0F,KAAKuP,OAASvP,KAAKuP,OAAOjV,GAAQ,IAGnCs6D,UAAUnhE,UAAUwhE,sBAAwB,WAC3C,IAAID,EAAQ,CACZA,KAAa,WACbA,MAAc,aACdA,MAAc,YACdA,iBAAyB,uBACzBA,eAAuB,qBACvBA,OAAe,aACfA,SAAiB,eACjBA,aAAqB,mBACrBA,YAAoB,kBACpBA,eAAuB,qBACvBA,UAAkB,gBAClBA,SAAiB,eACjBA,QAAgB,eAChBA,MAAc,aACdA,OAAe,cACfA,WAAmB,kBACnBA,OAAe,aACfA,QAAgB,cAChBA,QAAgB,cAChBA,MAAc,YACdA,KAAa,WACbA,SAAiB,eACjBA,KAAa,WACbA,WAAmB,iBACnBA,KAAa,yBACbA,QAAgB,yBAChB,OAAOA,GAGRJ,UAAUnhE,UAAUuoE,eAAiB,SAASC,GAC7C,IAAIC,EAAM,GACV,IAAI,IAAIjzD,KAAQ9U,YAAYwT,cAC3Bu0D,EAAIjzD,GAAQ9U,YAAYwT,cAAcsB,GAKvC,OAHAizD,EAAIC,IAAMF,EAAS,WACnBC,EAAI3pD,IAAM0pD,EAAS,aACnBC,EAAIxrD,GAAKurD,EAAS,IACXC,GASRtH,UAAUnhE,UAAU+gE,KAAO,SAASxiE,EAAM+R,GAGzC,OAFA/D,KAAK60D,aAAc,EAChB7iE,IAAMgO,KAAKk1D,cAAgB,IAAIG,cAAcrjE,EAAMgO,KAAKuP,OAAQvP,KAAKu5D,aAAax1D,KAC9E/D,MAGR40D,UAAUnhE,UAAUqmE,WAAa,SAAS9nE,EAAMo8C,GAG/C,OAFApuC,KAAK80D,iBAAkB,EACb90D,KAAKw0D,KAAKxiE,EAAMo8C,IAO3BwmB,UAAUnhE,UAAU2nE,kBAAoB,SAASgB,EAAUv8D,GAC1DA,EAAKA,GAAQG,KAAKvB,MAClB,IAAK,MAAMkD,KAAQpP,OAAOoW,KAAK9I,GAAI,CAClC,GAAG8B,GAAQy6D,EAAU,OAAOv8D,EAAE8B,GAAM,GAC/B,IAAwD,IAArD3B,KAAK+0D,6BAA6BzoD,QAAQ3K,GAAa,CAC9D,IAAIjN,EAAMsL,KAAKo7D,kBAAkBgB,EAAUv8D,EAAE8B,GAAM9B,EAAE8B,GAAM3M,OAAO,IAClE,QAAiB,IAAPN,EACT,OAAOA,KASXkgE,UAAUnhE,UAAU6nE,kBAAoB,SAASc,EAAU1nE,EAAKmL,GAC/DA,EAAKA,GAAQG,KAAKvB,MAClB,IAAK,MAAMkD,KAAQpP,OAAOoW,KAAK9I,GAC3B8B,GAAQy6D,EACVv8D,EAAE8B,GAAM,GAAKjN,GAE+C,IAArDsL,KAAK+0D,6BAA6BzoD,QAAQ3K,IACjD3B,KAAKs7D,kBAAkBc,EAAU1nE,EAAKmL,EAAE8B,GAAM9B,EAAE8B,GAAM3M,OAAO,IAG/D,OAAOgL,MAMR40D,UAAUnhE,UAAU2gE,WAAa,SAASv0D,GACzCA,EAAKA,GAAQG,KAAKvB,MAClB,IAAK,MAAMkD,KAAQpP,OAAOoW,KAAK9I,GAAI,CAClC,GAAW,YAAR8B,EAAoB,OAAO9B,EAAE8B,GAChC,IAAwD,IAArD3B,KAAK+0D,6BAA6BzoD,QAAQ3K,GAAa,CACzD,IAAIo6D,EAAKl8D,EAAE8B,GAAM,GACbiqC,EAAK5rC,KAAKo0D,WAAW2H,GACzB,GAAGnwB,EAAI,OAAOA,KASjBgpB,UAAUnhE,UAAUwmB,QAAU,SAAS/nB,GACtC8N,KAAKuP,OAAO,YAAcrd,GAO3B0iE,UAAUnhE,UAAUqa,YAAc,SAASuuD,EAAQC,EAAcz8D,EAAG08D,GAC/Dv8D,KAAKq8D,SAAQr8D,KAAKq8D,OAASA,GAC/Bx8D,EAAKA,GAAQG,KAAKvB,MAClB,IAAIxH,EAAM,GACV,MAAMulE,EAAsB,CAAC,MAAO,OAAQ,QAC5C,IAAI,IAAIC,KAAY58D,EAEnB,GAAe,YAAZ48D,EAAH,CAQAxlE,GAAO+I,KAAK08D,eAAeD,EAAUF,EAAQF,EAASr8D,KAAKq8D,QAC3D,IAAI3nE,EAAMmL,EAAE48D,GACTz8D,KAAK28D,UAAUF,EAAU/nE,EAAIA,EAAIM,OAAO,KAE1CiC,GAAO+I,KAAK48D,iBAAiBH,EAAW/nE,EAAIoV,MAAM,EAAGpV,EAAIM,OAAO,GAAIqnE,EAAQC,IAC9B,IAA3CE,EAAoBlwD,QAAQmwD,KAE9BxlE,GAAO,KAAOk+D,QAAQkH,EAAOr8D,KAAKq8D,SAGnCplE,GAAO+I,KAAK8N,YAAYuuD,EAAQC,EAAc5nE,EAAIA,EAAIM,OAAO,IAAI,IAIjEiC,GAAO+I,KAAK48D,iBAAiBH,EAAW/nE,EAAK2nE,EAAQC,QArBrD,GAAIA,EAAa,CAChB,IAAIpqE,EAAI8N,KAAKo0D,aACVliE,IAAG+E,GAAO,aAAe2D,KAAKC,UAAU3I,GAAK,MA0BnD,MAHkC,KAA/B+E,EAAI8K,UAAU9K,EAAIjC,OAAO,KAC3BiC,EAAMA,EAAI8K,UAAU,EAAG9K,EAAIjC,OAAO,IAE5BiC,GAMR29D,UAAUnhE,UAAUipE,eAAiB,SAASD,EAAUF,EAAQM,GAC/D,MAAgB,SAAbJ,GAAoC,UAAbA,EAClBA,EAELF,EACK,IAAME,GAENI,EAAS,KAAO1H,QAAQ0H,GAAU,IAAM,QAAUJ,GAM3D7H,UAAUnhE,UAAUkpE,UAAY,SAASF,EAAUK,GAElD,SAAGA,GAA6B,iBAAXA,QAAmD,IAArBA,EAAQ,gBAAwD,IAApBA,EAAQ,eAAuD,IAApBA,EAAO,QAAyE,GAD3L,CAAC,MAAO,MAC6JxwD,QAAQmwD,KAS7M7H,UAAUnhE,UAAUmpE,iBAAmB,SAASH,EAAUtkE,EAAMkkE,EAAQC,GACvErlE,IAAM,IAEN,GAAG+I,KAAK+8D,YAAYN,EAAUtkE,GAC7B,OAAO6H,KAAKg9D,YAAY7kE,EAAMkkE,GAG9B,IAAI,IAAIxqE,EAAI,EAAGA,EAAEsG,EAAKnD,OAAQnD,IAAI,CACjC,GAAGmO,KAAKi9D,cAAcR,EAAUtkE,EAAKtG,GAAIA,GACxCoF,KAAO+I,KAAK8N,YAAYuuD,EAASr8D,KAAKq8D,OAAQC,EAAcnkE,EAAKtG,IAAI,QAEjE,GAAe,OAAZ4qE,GAA0B,GAAL5qE,EAAO,CACnCoF,KAAO,KAAOk+D,QAAQkH,EAAOr8D,KAAKq8D,QAAU,OAC5C,IAAI,IAAI/xC,EAAI,EAAGA,EAAInyB,EAAK,GAAGnD,OAAQs1B,IAAI,CACtC,IAAI4yC,EAAQ/kE,EAAK,GAAGmyB,GAAGmsC,GAAKt+D,EAAK,GAAGmyB,GAAGmsC,GAAKt+D,EAAK,GAAGmyB,GAChD6yC,EAAMD,EAAK,GACXE,EAAMF,EAAK,GACE,iBAAPC,GAAmBA,EAAI,YAChCA,EAAMA,EAAI,WAGVA,EADgB,iBAAPA,EACHviE,KAAKC,UAAUsiE,GAGf,IAAMA,EAAM,IAEnBlmE,KAAO,OAASkmE,EACbC,IAAKnmE,KAAO,MAAQmmE,EAAM,KAC7BnmE,KAAO,IACPA,KAAO,KAAOk+D,QAAQkH,SAIvBplE,KAAO+I,KAAKq9D,gBAAgBZ,EAAUtkE,EAAKtG,GAAIA,EAAGsG,GAEhDtG,EAAIsG,EAAKnD,OAAQ,IAAGiC,KAAQ,KAOjC,OAJ4C,GApCjB,CAAC,MAAO,MAoCbqV,QAAQmwD,KAC7BxlE,KAAO,KAAOk+D,QAAQkH,EAAOr8D,KAAKq8D,SAEnCplE,KAAO,IACAA,KASR29D,UAAUnhE,UAAU4pE,gBAAkB,SAASZ,EAAU/nE,EAAKwP,EAAOo5D,GAGpE,GAAe,OAAZb,EACF/nE,EAAgB,GAATwP,EAAalE,KAAKu9D,QAAQ7oE,EAAK,WAAasL,KAAKu9D,QAAQ7oE,EAAK,cAEjE,GAAe,OAAZ+nE,EACP/nE,EAAMsL,KAAKu9D,QAAQ7oE,EAAK,cAEpB,IAAoC,GAAjC,CAAC,UAAU4X,QAAQmwD,GACA,MAAvB/nE,EAAIqN,UAAU,EAAG,KAAYrN,EAAMA,EAAIqN,UAAU,SAEhD,IAAsG,GAAnG,CAAC,OAAQ,WAAY,cAAe,aAAc,gBAAiB,UAAUuK,QAAQmwD,GAC5F,OAAOv4D,GACN,KAAK,EAAGxP,EAAMsL,KAAKu9D,QAAQ7oE,EAAK,WAAY,MAC5C,KAAK,EAAGA,EAAMsL,KAAKu9D,QAAQ7oE,EAAK,aAAc,MAC9C,KAAK,EAAGA,EAAMsL,KAAKu9D,QAAQ7oE,EAAK,UAAW,MAC3C,KAAK,EAAGA,EAAMsL,KAAKu9D,QAAQ7oE,EAAK,SAGlC,GAAiB,iBAAPA,EAAgB,CACzB,GAAe,UAAZ+nE,GAAiC,GAATv4D,EAAW,CACrC,IAAIs5D,EAAO,GACX,GAAG9oE,EAAI8rB,KACN,IAAI,IAAI3uB,EAAI,EAAIA,EAAE6C,EAAI8rB,KAAKxrB,OAAQnD,IAC/B6C,EAAI8rB,KAAK3uB,GAAG,UAAW2rE,GAAQ9oE,EAAI8rB,KAAK3uB,GAAG,UACzC2rE,GAAQ9oE,EAAI8rB,KAAK3uB,GAGxB,IAAI4rE,EAAO,IAAMD,EAAO,SAGpBC,EAAOz9D,KAAK09D,sBAAsBjB,EAAU/nE,EAAKwP,GAEtD,OAAOu5D,EAKR,MAAiB,iBAAP/oE,EACF,IAAMA,EAAM,IAEbA,GAKRkgE,UAAUnhE,UAAUiqE,sBAAwB,SAASjB,EAAU/nE,EAAKwP,GACnE,GAAGxP,EAAI,YAAcA,EAAI,cAAiBA,EAAI,UAA4B,cAAhBA,EAAI,UAA4B,MAAO,IAAMA,EAAI,UAAY,IACvH,GAAGA,EAAI,WAAcA,EAAI,UAA4B,eAAhBA,EAAI,SAA4B,OAAOA,EAAI,UAChF,GAAGA,EAAG,KAAU,CAEf,IADA,IAAIipE,EAAO,IACH9rE,EAAI,EAAIA,EAAE6C,EAAG,KAASM,OAAQnD,IACT,iBAAlB6C,EAAG,KAAS7C,GACrB8rE,GAAQ39D,KAAK09D,sBAAsB,OAAQhpE,EAAG,KAAS7C,GAAIA,GAG3D8rE,GAAQ,IAAMjpE,EAAG,KAAS7C,GAAK,IAE7BA,EAAI6C,EAAG,KAASM,OAAO,IACzB2oE,GAAQ,KAIV,OADAA,GAAQ,IAGT,OAAO/iE,KAAKC,UAAUnG,IAGvBkgE,UAAUnhE,UAAUwpE,cAAgB,SAASR,EAAUpe,EAAKn6C,GAE3D,OAA2C,IADlB,CAAC,MAAO,KAAM,OAAQ,MAAO,MAAO,MAAO,QAAS,MAAO,SAAU,OAAQ,YAClFoI,QAAQmwD,IACxBpe,GAAqB,iBAAPA,EAGH,YAAZoe,GAAmC,GAATv4D,GAO9B0wD,UAAUnhE,UAAU8pE,QAAU,SAAS3pE,EAAG+tC,GACzC,GAAe,iBAAL/tC,EAAe,OAAOA,EAChC,IAAsB,GAAnBA,EAAE0Y,QAAQ,KAAY,OAAO1Y,EAChC,GAAuB,QAApBA,EAAEmO,UAAU,EAAE,GAAc,OAAOnO,EACtC,IAAIgqE,EAAOhqE,EAAE0N,MAAM,KAAK,GACxB,OAAGtB,KAAKg1D,OAASh1D,KAAKg1D,MAAM4I,IAAS59D,KAAKg1D,MAAM4I,IAAShqE,EACjDgqE,EAEJj8B,EACO,WAARA,GAAyC,OAAnB/tC,EAAE0N,MAAM,KAAK,GAAqBs8D,EAChD,SAARj8B,GAAuC,OAAnB/tC,EAAE0N,MAAM,KAAK,GAAqBs8D,EAC9C,aAARj8B,GAA2C,OAAnB/tC,EAAE0N,MAAM,KAAK,GAAqBs8D,EAClD,QAARj8B,GAAsC,OAAnB/tC,EAAE0N,MAAM,KAAK,GAAqBs8D,EAC7C,SAARj8B,GAAuC,MAAnB/tC,EAAE0N,MAAM,KAAK,GAAoBs8D,EACjDhqE,EANUA,GASlBghE,UAAUnhE,UAAUspE,YAAc,SAASN,EAAUtkE,EAAMkkE,EAAQC,GAClE,GAAe,QAAZG,EAAoB,OAAO,GAG/B7H,UAAUnhE,UAAUupE,YAAc,SAASP,EAAUtkE,EAAMkkE,EAAQC,GAClE,GAAe,QAAZG,EAAoB,OAAO,GAW/B7H,UAAUnhE,UAAUoqE,UAAY,SAASxB,EAAQtD,GAChD,MAAO,MAAQ5D,QAAQkH,GAAU,QAAUtD,EAAQxuD,KAAK,MAAO4qD,QAAQkH,GAAU,SAAW,KAAOlH,QAAQkH,EAASr8D,KAAKq8D,QAAU,KAGpIzH,UAAUnhE,UAAU8lE,aAAe,SAAS3lE,GAC3C,MAAe,iBAALA,EAAsBA,GACV,GAAnBA,EAAE0Y,QAAQ,KAAmB1Y,EAC7BoM,KAAKg1D,OAASh1D,KAAKg1D,MAAMphE,GAAWoM,KAAKg1D,MAAMphE,GAC3C,OAASA,GAGjBghE,UAAUnhE,UAAU+lE,eAAiB,SAAS7lE,GAC7C,OAAsB,GAAnBA,EAAE2Y,QAAQ,KAAmB3Y,EAC7BqM,KAAKg1D,OAASh1D,KAAKg1D,MAAMrhE,GAAWqM,KAAKg1D,MAAMrhE,GAC3C,OAASA,GAEjBihE,UAAUnhE,UAAU0mE,UAAY,SAASpnE,GACxC,OAAsB,GAAnBA,EAAEuZ,QAAQ,KAAmBvZ,EAC7BiN,KAAKg1D,OAASh1D,KAAKg1D,MAAMjiE,GAAWiN,KAAKg1D,MAAMjiE,GAC3C,OAASA,GAGjB6hE,UAAUnhE,UAAUgmE,YAAc,SAASnnE,GAC1C,MAAe,iBAALA,IAAoC,GAAnBA,EAAEga,QAAQ,KAAmBha,EACrD0N,KAAKg1D,OAASh1D,KAAKg1D,MAAM1iE,GAAW0N,KAAKg1D,MAAM1iE,GAC3C,CAAE,SAAUA,EAAG,YAAa,OAGpCsiE,UAAUnhE,UAAUimE,WAAa,SAAStR,GACzC,OAAsB,GAAnBA,EAAE97C,QAAQ,KAAmB87C,EAC7BpoD,KAAKg1D,OAASh1D,KAAKg1D,MAAM5M,GAAWpoD,KAAKg1D,MAAM5M,GAC3C,MAAQA,GAGhBwM,UAAUnhE,UAAUkmE,WAAa,SAASznE,GACzC,OAAsB,GAAnBA,EAAEoa,QAAQ,KAAmBpa,EAC7B8N,KAAKg1D,OAASh1D,KAAKg1D,MAAM9iE,GAAW8N,KAAKg1D,MAAM9iE,GAC3C,OAASA,GAkBjBmjE,cAAc5hE,UAAUuG,MAAQ,SAASlI,EAAGkhE,GAE3C,GADAA,EAAQA,GAAc,KACE,MAArBlhE,EAAEiQ,UAAU,EAAG,GACjB,IAAI5P,EAAI,CAAC,MAASL,EAAG,YAAakhE,QAG9B7gE,EAAI,CAAC,SAAUL,EAAG,YAAakhE,GAGpC,OADQhzD,KAAKs6D,MAAM,aAAcnoE,IAIlCkjE,cAAc5hE,UAAU8E,YAAc,SAASrG,EAAG8gE,GAEjD,GADAA,EAAQA,GAAc,KACE,MAArB9gE,EAAE6P,UAAU,EAAG,GACjB,IAAI5P,EAAI,CAAC,MAASD,EAAG,YAAa8gE,QAG9B7gE,EAAI,CAAC,SAAUD,EAAG,YAAa8gE,GAEpC,OAAOhzD,KAAKs6D,MAAM,eAAgBnoE,IAGnCkjE,cAAc5hE,UAAU6mE,MAAQ,SAAS3mE,EAAGrB,EAAG81D,GAC9C,GAAGpoD,KAAKjG,KACP,IAAI+jE,MAAsB,OAAb99D,KAAKjG,MAA8B,OAAbiG,KAAKjG,KAAgB,SAAWiG,KAAKjG,UAEpE,IAAI+jE,MAAQ,SACjB,IAAIC,MAAQD,MAAQ,KAAO99D,KAAK+D,QAAU,OAASpQ,EAAI,MAUvD,GARCoqE,OADc,iBAALzrE,EACA,IAAMA,EAAI,IAEA,iBAALA,EACLsI,KAAKC,UAAUvI,GAGfA,EAE4B,QAAnCwrE,MAAM/7D,UAAU+7D,MAAM9oE,OAAO,IAAgBgL,KAAKooD,EAAE,CACtD,IAAIA,EAAKA,IAASpoD,KAAKooD,EAAIpoD,KAAKooD,EAAI,aACpC2V,OAAS,MAAQ3V,EAAI,IAEtB2V,OAAS,IACT,IACC,IAAIC,KAAOj+D,KAAK,mBAAqBg+D,OACrC,OAAO/9D,KAAKi+D,SAASD,MAEtB,MAAM/9D,GAEL,OADAR,QAAQ2O,MAAMnO,GACPD,OAITq1D,cAAc5hE,UAAUyqE,KAAO,SAAStqE,EAAGD,GAC1C,GAAGqM,KAAKuP,OAAL,IACF,IAAI,IAAI1d,EAAI,EAAGA,EAAEmO,KAAKuP,OAAL,IAAmBva,OAAQnD,IAAI,CAC/C,IAAIssE,EAASn+D,KAAKuP,OAAL,IAAmB1d,GAEhC,GAAGssE,EADC/qE,EAAMb,OAAOoW,KAAKw1D,GAAQ,IACf,IAAMvqE,GAAKuqE,EAAO/qE,GAAK,IAAMO,GAAKwqE,EAAO/qE,GAAK,GAAI,OAAO+qE,EAAO/qE,GAAK,QAGjF,GAAGb,OAAOoW,KAAK3I,KAAKuP,QAAS,CACjC,IAAInc,EAAOb,OAAOoW,KAAK3I,KAAKuP,QAAQ,GACpC,GAAGvP,KAAKuP,OAAOnc,GAAK,IAAMQ,GAAKoM,KAAKuP,OAAOnc,GAAK,IAAMO,GAAKqM,KAAKuP,OAAOnc,GAAK,GAAK,OAAO4M,KAAKuP,OAAOnc,GAAK,GAE1G,OAAO,GAGRiiE,cAAc5hE,UAAUwqE,SAAW,SAASD,GAC3C,GAAGh+D,KAAKuP,OAAOvP,KAAKjG,MAAM,CACzB,IAAIi4B,EAAO,GACXA,EAAKhyB,KAAKjG,MAAQiG,KAAKuP,OAAOvP,KAAKjG,MACnCiG,KAAKuP,OAAL,IAAqB,CAACyiB,UACfhyB,KAAKuP,OAAOvP,KAAKjG,MAEzB,GAAGiG,KAAKuP,OAAL,IACFvP,KAAKuP,OAAL,IAAmBvE,KAAKgzD,EAAK5iE,YAEzB,CACJ,IAAIkvB,EAAI0zC,EAAK5iE,OACVkvB,EAAEtqB,KAAKjG,MAAOiG,KAAKuP,OAAOvP,KAAKjG,MAAQuwB,EAAEtqB,KAAKjG,MAEhD4V,MAAM/U,KAAKC,UAAUyvB,IAGvB,OAAOtqB,MAGRq1D,cAAc5hE,UAAU4mE,KAAO,SAAS/mE,EAAGyE,GAC1C,IAAIqmE,EAAKp+D,KAAK+D,QAId,OAHA/D,KAAK+D,SAAW,IAAMhM,EACtBiI,KAAKs6D,MAAM,WAAY,mBACvBt6D,KAAKs6D,MAAM,iBAAkB8D,GACtBrmE,GACN,IAAK,MAAOiI,KAAKs6D,MAAM,qBAAsB,CAAC,SAAUhnE,EAAG,QAAS,2BACnE,MACD,IAAK,MAAO0M,KAAKs6D,MAAM,qBAAsB,CAAC,SAAUhnE,EAAG,QAAS,2BACnE,MACD,QAAS0M,KAAKs6D,MAAM,kBAAmB,CAAC,SAAUhnE,EAAG,QAAS,2BAE/D,IAAI+qE,EAAKr+D,KAAKk+D,KAAKE,EAAI,eACvB,GAAGC,EAAG,CACGr+D,KAAK+D,QACb/D,KAAK+D,QAAUs6D,EACfr+D,KAAKs6D,MAAM,kBAAmBt6D,KAAK+D,SAIpC,OADA/D,KAAK+D,QAAUq6D,EACRp+D,MAGRq1D,cAAc5hE,UAAUqiE,IAAM,SAASj/D,GACtC,IAAImnE,EAAO,IAAIpJ,UAAUkB,IAAI91D,KAAK+D,QAASlN,GAC3CmJ,KAAKs+D,GAAGL,SAASD,IAGlB3I,cAAc5hE,UAAU+mB,MAAQ,SAAS4tC,GACxCpoD,KAAKooD,EAAIA,GAGViN,cAAc5hE,UAAU6L,IAAM,SAAS1L,GACtC,IAAIoqE,EAAO,IAAIpJ,UAAUt1D,IAAIU,KAAK+D,QAASnQ,GAC3C,OAAOoM,KAAKi+D,SAASD,IAGtB3I,cAAc5hE,UAAUomE,SAAW,WAClC,OAAO75D,KAAKs6D,MAAM,UAAW,iBAG9B1oE,OAAOD,QAAU2C,M,cCtlDjB,SAAS6C,EAAWiC,EAAMV,EAAQ0Y,GAChCpR,KAAKu+D,QAAUnlE,EACf4G,KAAKhN,KAAO0F,EACT8lE,EAAcptD,KAASpR,KAAKy+D,SAAWrtD,EAAOqtD,UAC9Cz+D,KAAK0+D,YAAYhmE,KAASsH,KAAKhN,KAAO,cAG3C,SAASwrE,EAAcngB,GACrB,IAAK,IAAI5lC,KAAQ4lC,EACf,OAAO,EAET,OAAO,EAmCTlnD,EAAW1D,UAAUwI,iBAAmB,SAAS+T,GAO7C,IAAIkmB,EAASthB,WAAW+pD,aAAa3+D,KAAKu+D,QAAS,CAC/CvrE,KAAsBgN,KAAKhN,KAC3B4rE,gBAAsB,EACtBC,aAAsB,EACtBC,iBAAsB,EACtBC,cAAsB,EACtBC,aAAsB,EACtBC,gBAAsB,EACtBC,kBAAsB,EACtBC,mBAAsB,EACtBC,cAAsB,CAACC,aAAa,GACpCC,UAAsB,CAAC,SAAU,OACV,IAAO,eACP,SAAU,SAAS5jE,GAAKA,EAAG6jE,SAAS7jE,EAAG8jE,eAC9DC,SAAsB,EACtBC,YAAsB,EACtBC,QAAsB,CAAC,yBAA0B,2BASrD,OAPAzpC,EAAOqpC,SAAS3qD,WAAWgrD,IAAI,GAAI,IAC9BpB,EAAcxuD,GAEdhQ,KAAK6/D,kBAAkB3pC,EAAQlmB,GADhCkmB,EAAO4pC,QAAQ9vD,EAAW1C,MAAO0C,EAAWzC,QAEhD2oB,EAAO6pC,iBAAiB,QACrB//D,KAAKy+D,SAAUvoC,EAAO8pC,UAAU,QAAS,eACvC9pC,EAAO8pC,UAAU,QAAS,OACxB9pC,GAOX/+B,EAAW1D,UAAUosE,kBAAoB,SAAS3pC,EAAQlmB,GACxD,OAAOA,GACL,IAAK,QACHkmB,EAAO4pC,QAAQ,MAAO,OACxB,MACA,IAAK,SACH5pC,EAAO4pC,QAAQ,OAAQ,QACzB,MACA,IAAK,WACJ5pC,EAAO4pC,QAAQ,MAAO,OACvB,MACA,IAAK,UACD5pC,EAAO4pC,QAAQ,MAAO,OAC1B,MACA,IAAK,WACD5pC,EAAO4pC,QAAQ,OAAQ,QAC3B,MACA,IAAK,kBACD5pC,EAAO4pC,QAAQ,OAAQ,SAM/B3oE,EAAW1D,UAAUyI,eAAiB,SAASg6B,GAC7CA,EAAOxwB,OACPu6D,YAAW,WACP/pC,EAAOupC,YACT,GAEFvpC,EAAOuR,GAAG,UAAU,WAClBvR,EAAOxwB,WAUXvO,EAAW1D,UAAU4I,YAAc,WAEjC,GADAuY,WAAWsrD,QAAQlgE,KAAKu+D,QAAQ5jC,UAAW36B,KAAKhN,KAAMgN,KAAKu+D,SACxDv+D,KAAKy+D,SACJ,IAAIj3B,EAAQ,wBACPA,EAAQ,WAEjB,OADAxnC,KAAKu+D,QAAQhlE,aAAa,QAAS,8BAAgCiuC,EAAQ,gDACpExnC,KAAKu+D,SAGdpnE,EAAW1D,UAAUirE,YAAc,SAAShmE,GAC1C,GAAa,UAAVA,EAAoB,OAAO,GAGhC9G,EAAOD,QAAQwF,G,gBCvIf,IAAMgW,EAAMrZ,EAAQ,GACdsD,EAAiBtD,EAAQ,GAEzBolC,GADWplC,EAAQ,IACPA,EAAQ,KAEpBk3C,GADgBl3C,EAAQ,GACTA,EAAQ,KAO7B,SAASwiD,EAAqB/6C,GAC5ByE,KAAKzE,GAAKA,EAqGZ,SAASu4C,EAAiBv4C,GACzByE,KAAKzE,GAAKA,EACVyE,KAAKo5B,UAAY9iC,SAASgD,cAAc,QACxC0G,KAAKo5B,UAAU7/B,aAAa,QAAS,sBACrCyG,KAAKmgE,MAAQ,CAAC,QA2nBf,SAASnsB,EAAkBz4C,GAC1ByE,KAAKzE,GAAKA,EA9tBX+6C,EAAqB7iD,UAAU8a,SAAW,WACzC,IAAIe,EAAOtP,KACPogE,EAAM9pE,SAASgD,cAAc,OAEjC,GADA8mE,EAAI7mE,aAAa,QAAS,0BACvByG,KAAKzE,IAAMyE,KAAKzE,GAAGmV,KAAK,CAChBpa,SAASgD,cAAc,OAC7BC,aAAa,QAAS,yCAC1B,IAAI8mE,EAAQrgE,KAAKzE,GAAG0V,OAAOyY,WAAWqB,cAClCu1C,EAAMD,GAASA,EAAM,eAAiBA,EAAM,cAAc,UAAYA,EAAM,cAAc,UAAYrgE,KAAKzE,GAAGmV,KAE9GjT,EAAMnH,SAASgD,cAAc,OACjCmE,EAAIlE,aAAa,QAAS,SAC1B6mE,EAAI1mE,YAAY+D,GAChB,IAAIk7C,EAAKriD,SAASgD,cAAc,MAChCq/C,EAAGp/C,aAAa,QAAQ,eACxBkE,EAAI/D,YAAYi/C,GAEhB,IAAI9hD,EAAIP,SAASgD,cAAc,KACzBzC,EAAE0C,aAAa,QAAS,8HACxB1C,EAAE6C,YAAYpD,SAASuD,eAAeymE,IAC5C3nB,EAAGj/C,YAAY7C,GACf,IAAIlD,EAAIqM,KAAKzE,GAAG6hB,KAAOpd,KAAKzE,GAAG6hB,KAAO,KAWtC,GAVGpd,KAAKzE,GAAGqC,YAAY,QACd,MAALjK,GAAWkD,EAAE4F,UAAUG,IAAI,qBAC9B0S,EAAK/T,GAAG6hB,KAAO,KACfvmB,EAAE2J,iBAAiB,SAAS,WAC3B8O,EAAK/T,GAAG22C,iBACR5iC,EAAK/T,GAAG6hB,KAAO,KACf9N,EAAK/T,GAAGk6C,qBAIPz1C,KAAKzE,GAAGqC,YAAY,gBAAgB,CACtC,IAAI6a,EAAOzY,KAAKugE,eAAe,YAAa,eACpC,QAAL5sE,GAAa8kB,EAAKhc,UAAUG,IAAI,qBAChC6b,EAAKjY,iBAAiB,SAAS,WACjC8O,EAAK/T,GAAG24C,mBACR5kC,EAAK/T,GAAG6hB,KAAO,OACf9N,EAAK/T,GAAGk6C,oBAEHkD,EAAGj/C,YAAY+e,GAEtB,GAAGzY,KAAKzE,GAAGqC,YAAY,oBAClB6a,EAAOzY,KAAKugE,eAAe,kBAAmB,iBAC1C//D,iBAAiB,SAAS,WACjC2M,EAAM3P,oBAAoBwC,KAAMsP,GAChCA,EAAK/T,GAAGy3C,oBAEH2F,EAAGj/C,YAAY+e,GAEtB,GAAGzY,KAAKzE,GAAGqC,YAAY,eAAe,CACjC6a,EAAOzY,KAAKugE,eAAe,QAAS,aAChC,SAAL5sE,GAAc8kB,EAAKhc,UAAUG,IAAI,qBACjC6b,EAAKjY,iBAAiB,SAAS,WACjC2M,EAAM3P,oBAAoBwC,KAAMsP,GAChCA,EAAK/T,GAAG6hB,KAAO,QACf9N,EAAK/T,GAAGw2C,gBACRziC,EAAK/T,GAAGk6C,oBAEHkD,EAAGj/C,YAAY+e,GAEtB,GAAGzY,KAAKzE,GAAGqC,YAAY,cAAc,CAChC6a,EAAOzY,KAAKugE,eAAe,SAAU,UACjC,UAAL5sE,GAAe8kB,EAAKhc,UAAUG,IAAI,qBAC/B6b,EAAKjY,iBAAiB,SAAS,WACpC2M,EAAM3P,oBAAoBwC,KAAMsP,GAChCA,EAAK/T,GAAG6hB,KAAO,SACf9N,EAAK/T,GAAGu2C,iBACRxiC,EAAK/T,GAAGk6C,oBAEHkD,EAAGj/C,YAAY+e,IAGvB,OAAO2nD,GAIR9pB,EAAqB7iD,UAAU8sE,eAAiB,SAASnnE,EAAMkjC,EAAI14B,GAC/D,IACI/M,EAAIP,SAASgD,cAAc,KAClCzC,EAAE0C,aAAa,QAAS,qGACrB,IAAI6D,EAAO9G,SAASgD,cAAc,KAClC8D,EAAK7D,aAAa,QAAS,yBAA2B+iC,GACtDzlC,EAAE6C,YAAY0D,GACd,IAAIjD,EAAM7D,SAASuD,eAAeT,GAElC,OADAvC,EAAE6C,YAAYS,GACPtD,GAeXi9C,EAAiBrgD,UAAU8a,SAAW,WAAU,WAC/CnX,EAAejD,YAAYyH,eAAeoE,KAAKo5B,WAC/C,IACI9kC,EAAO8C,EAAe9C,KACtB4nD,EAAQl8C,KAAKzE,GAAG0V,OAAOwY,iBAAiByC,QACxCrsB,EAAIvL,EAAKkpD,KAAKtB,GAAOt9C,MAHb,IAG0BO,mBAYtC,OAXAU,EAAE80B,QAAQ30B,KAAKzE,GAAG0V,QAAQ5V,MAAM,SAAC7E,GAChC,IAAI6R,EAAO,IAAIjR,EAAe/C,WAAWmC,EAAQqJ,GAC7C2gE,EAAKlsE,EAAKkpD,KAAKtB,GAAO2e,0BAC1B2F,EAAG7rC,QAAQ,EAAKp5B,GAAG0V,QAAQ5V,MAAM,SAAColE,GACjC,IAAIC,EAAa,IAAItpE,EAAe/C,WAAWosE,EAASD,GACpDG,EAAO,EAAKC,aAAav4D,EAAMq4D,GAChCC,GAAM,EAAKvnC,UAAU1/B,YAAYinE,SANtC,OAQS,SAAC1gE,GACT,EAAK1E,GAAG6iC,UAAUn+B,MAEZD,KAAKo5B,WAGb0a,EAAiBrgD,UAAUotE,2BAA6B,SAAS/nE,GAChE,IAAIwhB,EAAQxhB,EAAKwhB,QAIjB,OAHAA,EAAMqD,OAAO,SAASra,OAAO,YAC7BgX,EAAMqD,OAAO,WAAWra,OAAO,eAC/BgX,EAAMqD,OAAO,gBAAgBra,OAAO,oBAC7BgX,GAGRw5B,EAAiBrgD,UAAUqtE,4BAA8B,SAAShoE,GACjE,IAAI0hB,EAAQ1hB,EAAK0hB,QAEjB,OADAA,EAAMjN,OAAO,KAAKD,MAAM,MACjBkN,GAGRs5B,EAAiBrgD,UAAUmtE,aAAe,SAASv4D,EAAMq4D,GACvD,MAAgB,QAAb1gE,KAAKod,KACApd,KAAK+gE,gBAAgB14D,EAAMq4D,GAG3B1gE,KAAKghE,WAAW34D,EAAMq4D,IAIhC5sB,EAAiBrgD,UAAUutE,WAAa,SAAS34D,EAAMq4D,GAStD,GARG1gE,KAAK8M,KACP1V,EAAejD,YAAYyH,eAAeoE,KAAK8M,OAG/C9M,KAAK8M,KAAOxW,SAASgD,cAAc,OACnC0G,KAAK8M,KAAKvT,aAAa,QAAS,8CAG9B8O,EAAKwqB,QAAU,EAAE,CACnB7yB,KAAK8M,KAAKpT,YAAYsG,KAAKihE,aAAa,SAAU,SAClDjhE,KAAK8M,KAAKpT,YAAYsG,KAAKihE,aAAa,SAAU,UAClDjhE,KAAK8M,KAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,UACjD,IAAIC,EAAOlhE,KAAKmhE,0BACZ/vD,EAASha,EAAe9C,KAAKgC,WACjC8a,EAAOmK,SAAS,qBAChBnK,EAAO7d,SAAS0P,SAAS,KAAM,OAAQ,UAAW,OAAQ,SAC1DmO,EAAO5d,WAAWyP,SAAS,QAAS,SACpCmO,EAAOzW,OAAOsI,SAAS,SAEvB,IAAI41C,EAAOviD,SAASgD,cAAc,QAClC0G,KAAK8M,KAAKpT,YAAYm/C,GACtB,IAAIuoB,EAAOphE,KAAKzE,GAAGmV,KACnB1Q,KAAKzE,GAAGm2C,YAAY,YACpB1xC,KAAKqhE,eAAe,OAASD,EAAMvoB,EAAMznC,GACzCpR,KAAKzE,GAAGm2C,YAAY0vB,QAEhB,GAAGV,EAAW7tC,QAAU,EAAG,CAC/B,IAAIyuC,EAAWthE,KAAKuhE,qBAAqBb,EACxC,CAAC/mC,WAAW,EAAOC,WAAW,GAC9B,CAACK,YAAY,EAAOC,YAAY,IAC9BwmC,EAAW7tC,SAAW,GACxB7yB,KAAK8M,KAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,WACjDjhE,KAAK8M,KAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,UAC9CP,EAAW7tC,QAAU,GACvB7yB,KAAK8M,KAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,OAAQK,MAI1DthE,KAAK8M,KAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,WACjDjhE,KAAK8M,KAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,OAAQK,IACzDthE,KAAK8M,KAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,gBAIlDjhE,KAAK8M,KAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,WACjDjhE,KAAK8M,KAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,UAGlD,OADGC,GAAMlhE,KAAK8M,KAAKpT,YAAYwnE,GACxBlhE,KAAK8M,MAIbgnC,EAAiBrgD,UAAUstE,gBAAkB,SAAS14D,EAAMq4D,GAAW,WAClEpsE,EAAO8C,EAAe9C,KACtBgb,EAAOtP,KACX,GAAGA,KAAK8M,KAAK,CACZ1V,EAAejD,YAAYyH,eAAeoE,KAAK8M,MAC/C,IAAIA,EAAO9M,KAAK8M,SAEZ,EACAA,EAAOxW,SAASgD,cAAc,QAC7BC,aAAa,QAAS,6CAG5B,IAAIioE,EAAelrE,SAASgD,cAAc,OAC1CkoE,EAAajoE,aAAa,QAAS,yBACnCuT,EAAKpT,YAAY8nE,GACjB,IAAIjsD,EAAOjf,SAASgD,cAAc,QAGlC,GAFAic,EAAKhc,aAAa,QAAS,yBAC3BioE,EAAa9nE,YAAY6b,GACtBmrD,EAAW7tC,QAAU,EAAE,CACzB,IAGIyuC,EAAWthE,KAAKuhE,qBAAqBb,EAC/B,CAAC/mC,WAAW,EAAOC,WAAW,GAC9B,CAACK,YAAY,EAAOC,YAAY,IALjC,SAAS9yB,GACdA,GAAKkI,EAAKmyD,uBAAuBr6D,MAMlCiB,EAAKwqB,QAAU,GAAGtd,EAAK7b,YAAY4nE,QAGtCthE,KAAKzE,GAAG6iC,UAAU,kIAEnB,GAAG/1B,EAAKwqB,QAAU,EAAE,CACnB,IAAI6uC,EAAkB1hE,KAAK2hE,yBAC3BpsD,EAAKqsD,QAAQF,GACb,IAAIG,EAAK,IAAI3oC,EAAUl5B,KAAKzE,GAAG0V,OAAQ5I,EAAK5J,MAAO4J,GAC/ChQ,QAAQ,CAACshC,UAAW,OAAQC,WAAW,IACvCtf,EAAQta,KAAK6gE,2BAA2BvsE,GAExC+D,EAAW,CAAE4hC,WAAY,OAAQC,WAAY,OAAQn0B,QAAS,CAD1D/F,KAAK8gE,4BAA4BxsE,KAEzCutE,EAAG/kC,QAAQxiB,EAAOjiB,GAClByU,EAAKpT,YAAYmoE,EAAGtzD,YAChBja,EAAO8C,EAAe9C,KAA1B,IACI4nD,EAAQl8C,KAAKzE,GAAG0V,OAAOwY,iBAAiByC,QACxCrsB,EAAIvL,EAAKkpD,KAAKtB,GAAOt9C,MAAM,KAAKO,mBACpCU,EAAE80B,QAAQ30B,KAAKzE,GAAG0V,QAAQ5V,MAAM,SAAC7E,GAChC,IAAI4xD,EAAI,IAAIhxD,EAAe/C,WAAWmC,EAAQqJ,GAC1CiiE,EAAM,IAAI5oC,EAAU,EAAK39B,GAAG0V,OAAQm3C,EAAE3pD,MAAO2pD,GAAG/vD,QAAQ,CAACshC,UAAW,OAAQC,WAAW,IACvFmoC,EAAK,EAAKjB,4BAA4BxsE,GACtC+D,EAAW,CAAE4hC,WAAY,OAAQC,WAAY,OAAQn0B,QAAS,CAACuU,IACnExN,EAAKpT,YAAYyT,EAAMhU,aAAa,0CACpC2oE,EAAIhlC,QAAQilC,EAAI1pE,GAChByU,EAAKpT,YAAYooE,EAAIvzD,YACrB,EAAK6qB,UAAU1/B,YAAYoT,MAR5B,OASS,SAAC7M,GACT,EAAK1E,GAAG6iC,UAAUn+B,WAIM,GAAtBygE,EAAW7tC,SACb/lB,EAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,WAC5Cn0D,EAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,UAC5Cn0D,EAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,OAAQK,MAGpDx0D,EAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,WAC5Cn0D,EAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,OAAQK,IACpDx0D,EAAKpT,YAAYsG,KAAKihE,aAAa,QAAS,WAI9C,OADAjhE,KAAK8M,KAAOA,EACLA,GAIRgnC,EAAiBrgD,UAAU0tE,wBAA0B,WAEpD,GAAmB,YAAhBnhE,KAAKzE,GAAGmV,KAAX,CACA,IAAIve,EAAImE,SAASgD,cAAc,QAC/BnH,EAAEoH,aAAa,QAAS,sBACxBnC,EAAejD,YAAYyH,eAAeoE,KAAKo5B,WAC5C,IAAI4oC,EAAM1rE,SAASgD,cAAc,UACjC0oE,EAAIzoE,aAAa,QAAS,2DAC1ByoE,EAAIzoE,aAAa,OAAQ,UAC5ByoE,EAAItoE,YAAYpD,SAASuD,eAAe,oBACxC,IAAIooE,EAAK3rE,SAASgD,cAAc,KAChC2oE,EAAG1oE,aAAa,QAAS,qCACzByoE,EAAItoE,YAAYuoE,GAChB,IAAI5B,EAAQrgE,KAAKzE,GAAGwvB,cACpB,GAAGs1C,EACQA,EAAM,eAAiBA,EAAM,cAAc,UAAYA,EAAM,cAAc,UAAYrgE,KAAKzE,GAAGmV,UAC5F1Q,KAAKzE,GAAGmV,KACnB,IACCwxD,EAAQliE,KAAKzE,GAAGmV,KAChBovB,EAAS9/B,KAAKzE,GAAGm5C,kBAAkBwtB,GAIvC,OAHGpiC,GACF3tC,EAAEuH,YAAYomC,GAER3tC,IAGR2hD,EAAiBrgD,UAAU0uE,2BAA6B,WACvD,IAAInqB,EAAS1hD,SAASkG,uBAAuB,gBAC7C,IAAI3K,EAAE,EAAGA,EAAEmmD,EAAOhjD,OAAQnD,IACzB,GAAqB,UAAlBmmD,EAAOnmD,GAAGkI,KAAiB,CAC7Bi+C,EAAOnmD,GAAG4K,UAAUG,IAAI,2BACxB,IAAI0S,EAAOtP,KACXg4C,EAAOnmD,GAAG2O,iBAAiB,UAAU,WACpC8O,EAAK+kC,mBAAmBr0C,KAAKlN,YAMjCghD,EAAiBrgD,UAAU8tE,qBAAuB,SAASb,EAAY0B,EAAOC,EAAOjmD,EAAQkmD,GAC5F,IAAIhuE,EAAO8C,EAAe9C,KAC1BguE,EAAWA,GAAoB,wBAC/BF,EAAUA,GAAiB,CAAEnoC,WAAY,OAAQC,WAAY,QAC7D,IAAI2nC,EAAK,IAAI3oC,EAAUl5B,KAAKzE,GAAG0V,OAAQyvD,EAAWjiE,MAAOiiE,GAAYroE,QAAQ+pE,GACzE1nD,EAAUpmB,EAAKomB,UAAU2B,OAAO,SAASC,OAAO,SAASC,OAAO,WAAWR,WAAWumD,GAEtFhzD,EAAOtP,KAOX,OANA0a,EAAQ0B,OAAUA,GAAkB,SAAShV,GACzCA,GAAKkI,EAAKmyD,uBAAuBr6D,IAErCi7D,EAAUA,GAAiB,CAAEpoC,WAAY,OAAQC,WAAY,QAC7D2nC,EAAG/kC,QAAQpiB,EAAS2nD,GACLR,EAAGtzD,YAInBulC,EAAiBrgD,UAAUwtE,aAAe,SAASsB,EAAOxoE,EAAM2gB,GAC/D,IAAI8nD,EAAOlsE,SAASgD,cAAc,OAClCkpE,EAAKjpE,aAAa,QAAS,8CAC3B,IAAI+V,EAAOtP,KACPyiE,EAAO,GACX,GAAW,UAAR1oE,EACF0oE,EAAKnqE,MAAkB,SAATiqE,EAAoB,2BAA6B,oBAC/DE,EAAKrpE,KAAiB,SAATmpE,EAAoB,sEAAwE,qGACzGE,EAAK7+D,IAAM,8CAEP,GAAW,QAAR7J,EACP0oE,EAAK7+D,IAAM,0CACX6+D,EAAKnqE,MAAQ,mBACbmqE,EAAKrpE,KAAiB,SAATmpE,EAAoB,kGAAoG,0GAEjI,GAAW,SAARxoE,EACP0oE,EAAK7+D,IAAM,mBACX6+D,EAAKnqE,MAAQ,iBACbmqE,EAAKrpE,KAAO,2DAER,GAAW,SAARW,EACP0oE,EAAK7+D,IAAM,qBACX6+D,EAAKnqE,MAAQ,cACbmqE,EAAK7+D,IAAM,4CACX6+D,EAAKnqE,MAAQ,cACbmqE,EAAKrpE,KAAiB,SAATmpE,EAAoB,uGAAyG,iFAEtI,GAAW,QAARxoE,EAAe,CACtB0oE,EAAK7+D,IAAM,8CACX,IAAIy8D,EAAQrgE,KAAKzE,GAAGwvB,cACpB,GAAGs1C,EACF,IAAIC,EAAMD,EAAM,eAAiBA,EAAM,cAAc,UAAYA,EAAM,cAAc,UAAYrgE,KAAKzE,GAAGmV,UACjG4vD,EAAKtgE,KAAKzE,GAAGmV,KACtB+xD,EAAKnqE,MAAQgoE,EACbmC,EAAKrpE,KAAO,6HAEb,IAAIsyC,EAASp1C,SAASgD,cAAc,QAChCgjC,EAAKhmC,SAASgD,cAAc,KAChCgjC,EAAG/iC,aAAa,QAASkpE,EAAK7+D,KAC9B8nC,EAAMhyC,YAAY4iC,GAClBkmC,EAAK9oE,YAAYgyC,GACjB,IAAIg3B,EAAOpsE,SAASgD,cAAc,QAClCopE,EAAKhpE,YAAYpD,SAASgD,cAAc,UAAUI,YAAYpD,SAASuD,eAAe4oE,EAAKnqE,SAC3FoqE,EAAKjmE,UAAUG,IAAI,0BACnB4lE,EAAK9oE,YAAYgpE,GACjB,IAAI51D,EAAOxW,SAASgD,cAAc,KA8BlC,GA7BAwT,EAAKvT,aAAa,QAAS,yBAC3BuT,EAAKpT,YAAYpD,SAASuD,eAAe4oE,EAAKrpE,OAC9CopE,EAAK9oE,YAAYoT,GACN,UAAR/S,GACFyoE,EAAKhiE,iBAAiB,SAAS,WAC9B8O,EAAK/T,GAAG6hB,KAAO,SACf9N,EAAK/T,GAAGu2C,iBACRxiC,EAAK/T,GAAGk6C,oBAGC,SAAR17C,GACFyoE,EAAKhiE,iBAAiB,SAAS,WAC9B8O,EAAK/T,GAAG6hB,KAAO,OACf9N,EAAK/T,GAAG24C,mBACR5kC,EAAK/T,GAAGk6C,oBAGC,SAAR17C,GACFyoE,EAAKhiE,iBAAiB,SAAS,WAC9B8O,EAAK/T,GAAG6hB,KAAO,QACf9N,EAAK/T,GAAGw2C,gBACRziC,EAAK/T,GAAGk6C,oBAGC,SAAR17C,GAA2B,UAARA,GAA4B,SAARA,GACzCyoE,EAAKhiE,iBAAiB,aAAa,WACzBR,KAAK1C,MAAMiS,OAAS,aAGpB,QAARxV,EAAe,CACjB,IAAI4J,EAAKrN,SAASgD,cAAc,QAChCqK,EAAGpK,aAAa,QAAS,4BACzBoK,EAAGjK,YAAYghB,GACf8nD,EAAK9oE,YAAYiK,GAElB,OAAO6+D,GAGR1uB,EAAiBrgD,UAAUguE,uBAAyB,SAASr6D,GAAI,WAChEpH,KAAKzE,GAAG6hB,KAAO,OACfpd,KAAKzE,GAAGk6C,iBACR,IAAInhD,EAAO8C,EAAe9C,KACtB4nD,EAAQl8C,KAAKzE,GAAG0V,OAAOwY,iBAAiByC,QAExCqkC,EAAK,IAAIvlB,EAAahrC,KAAKzE,GAAG0V,QAAQ5Y,QAAQ,CACjDshC,UAAW,OACXC,WAAW,EACXroB,aAAcvR,KAAK2hE,2BAEhBnB,EAAKlsE,EAAKkpD,KAAKtB,GAAO2e,0BAC1B2F,EAAG7rC,QAAQ30B,KAAKzE,GAAG0V,QAAQ5V,MAAM,SAAColE,GACjC,IAAIC,EAAa,IAAItpE,EAAe/C,WAAWosE,EAASD,GACpDc,EAAW,EAAKC,qBAAqBb,EAAY,CAAC/mC,UAAW,OAAQC,WAAW,GAAS,CAAEK,WAAY,OAAQC,WAAY,SAC/Hq2B,EAAGplB,eAAem2B,MAEnB,IAAIlwD,EAAS9c,EAAKgC,WAAW4a,aAAY,GACzCE,EAAOmK,SAAS,qBAChBnK,EAAO7d,SAAS0P,SAAS,KAAM,OAAQ,UAAW,SAAU,QAAS,OAAQ,OAAQ,QAAS,SAAU,OAAQ,MAAO,SAASjQ,KAAK,QACrIoe,EAAO5d,WAAWyP,SAAS,QAAS,SAASjQ,KAAK,QAClDoe,EAAOzW,OAAOsI,SAAS,SAASjQ,KAAK,QAErCu9D,EAAGrlB,UAAU9jC,EAAKgK,GAAQ/V,MAAK,WAC9B,EAAK8kE,MAAMn1D,KAAK,OAAS5D,GACzBhQ,EAAejD,YAAYyH,eAAe,EAAKw9B,WAC/C,IAAI37B,EAAM,EAAKklE,mBACf,EAAKvpC,UAAU1/B,YAAY+D,GAC3B,EAAK27B,UAAU1/B,YAAY62D,EAAGhiD,gBAIhCulC,EAAiBrgD,UAAUkvE,iBAAmB,WAAU,WACnD/uE,EAAI0C,SAASgD,cAAc,QAC/B1F,EAAE2F,aAAa,QAAS,kDACxB,IAAI1H,EAAIyE,SAASgD,cAAc,QAC/BzH,EAAE0H,aAAa,QAAS,wBACxB3F,EAAE8F,YAAY7H,GACd,IAAI8B,EAAKqM,KAAKmgE,MAAMngE,KAAKmgE,MAAMnrE,OAAO,GAiBtC,OAhBApB,EAAE8F,YAAYpD,SAASuD,eAAe,YAAclG,IACpDC,EAAE4M,iBAAiB,SAAS,WAC3B,IAAIoiE,EAAK,EAAKzC,MAAM0C,MAEZ,SADRlvE,EAAK,EAAKwsE,MAAM,EAAKA,MAAMnrE,OAAO,IAGjC,EAAKuZ,YAGLq0D,EAAK,EAAKzC,MAAM0C,MAChB,EAAK3uB,iBAAiB0uB,OAGxBhvE,EAAE4M,iBAAiB,aAAa,WAC/BR,KAAK1C,MAAMiS,OAAS,aAEd3b,GAGRkgD,EAAiBrgD,UAAU4tE,eAAiB,SAAS31C,EAAOo3C,EAAW1xD,GAAO,WACzEm/C,EAAK,IAAIvlB,EAAahrC,KAAKzE,GAAG0V,QAAQ5Y,QAAQ+Y,GAClD,OAAOm/C,EAAGh/C,aAAama,EAAOta,GAAQ/V,MAAK,WAC1CynE,EAAUppE,YAAY62D,EAAGhiD,eADnB,OAGA,SAACtO,GAAD,OAAO,EAAK1E,GAAG6iC,UAAUn+B,OAGjC6zC,EAAiBrgD,UAAUygD,iBAAmB,SAASxoB,GAAM,WAC5D1rB,KAAKzE,GAAG6hB,KAAO,OACfpd,KAAKzE,GAAGk6C,iBACR,IAAI32C,EAAQ4sB,EAAM3pB,UAAU,EAAG,GACnB,QAATjD,GAA4B,QAATA,IAAiB4sB,EAAQ,OAASA,GACxD,IAAIp3B,EAAO8C,EAAe9C,KACtB4nD,EAAQl8C,KAAKzE,GAAG0V,OAAOwY,iBAAiByC,QACxCqkC,EAAK,IAAIvlB,EAAahrC,KAAKzE,GAAG0V,QAAQ5Y,QAAQ,CACjDshC,UAAW,OACXC,WAAW,EACXroB,aAAcvR,KAAK2hE,2BAEhBnB,EAAKlsE,EAAKkpD,KAAKtB,GAAO2e,0BAC1B2F,EAAG7rC,QAAQ30B,KAAKzE,GAAG0V,QAAQ5V,MAAM,SAAColE,GACjC,IAAIC,EAAa,IAAItpE,EAAe/C,WAAWosE,EAASD,GACpDc,EAAW,EAAKC,qBAAqBb,EAAY,CAAC/mC,UAAW,OAAQC,WAAW,GAAS,CAAEK,WAAY,OAAQC,WAAY,SAC/Hq2B,EAAGplB,eAAem2B,MAInB,IAAIlwD,EAAS9c,EAAKgC,WAAW4a,aAAY,GACzCE,EAAOmK,SAAS,qBAChBnK,EAAO7d,SAAS0P,SAAS,KAAM,OAAQ,UAAW,SAAU,QAAS,OAAQ,OAAQ,QAAS,SAAU,OAAQ,MAAO,SACvHmO,EAAO5d,WAAWyP,SAAS,SAC3BmO,EAAOzW,OAAOsI,SAAS,SAEvBjD,KAAKmgE,MAAMn1D,KAAK0gB,GAChBt0B,EAAejD,YAAYyH,eAAeoE,KAAKo5B,WAC/Cp5B,KAAKqhE,eAAe31C,EAAO1rB,KAAKo5B,UAAWhoB,IAG5C0iC,EAAiBrgD,UAAUkuE,uBAAyB,WACnD,IAAIoB,EAAMzsE,SAASgD,cAAc,QACjCypE,EAAIxpE,aAAa,QAAS,8FAC1B,IAAIqL,EAAMtO,SAASgD,cAAc,QACjCsL,EAAIrL,aAAa,QAAS,6FAC1B,IAAIypE,EAAO1sE,SAASgD,cAAc,SAClC0pE,EAAKzpE,aAAa,QAAS,6EAC3BypE,EAAKzpE,aAAa,cAAe,iCACjC,IAAI0pE,EAAO3sE,SAASgD,cAAc,UAClC2pE,EAAK1pE,aAAa,QAAS,iEAC3B0pE,EAAK1pE,aAAa,QAAS,6BAC3B,IAAI2pE,EAAK5sE,SAASgD,cAAc,KAChC4pE,EAAG3pE,aAAa,QAAS,oBACzB0pE,EAAKvpE,YAAYwpE,GACjBD,EAAKvpE,YAAYpD,SAASuD,eAAe,WACzC,IAAIhI,EAAIyE,SAASgD,cAAc,KAC/BzH,EAAE0H,aAAa,QAAS,qBACxB0pE,EAAKvpE,YAAY7H,GACjB,IAAIyd,EAAOtP,KAeX,OAdAijE,EAAKziE,iBAAiB,SAAS,WAC3BwiE,EAAKlwE,OACPwc,EAAK4kC,iBAAiB8uB,EAAKlwE,UAG7BkwE,EAAKxiE,iBAAiB,SAAS,SAAS4jC,GACvCA,EAAM++B,iBACgB,KAAlB/+B,EAAMg/B,SAAkBJ,EAAKlwE,OAChCwc,EAAK4kC,iBAAiB8uB,EAAKlwE,UAG7BiwE,EAAIrpE,YAAYkL,GAChBm+D,EAAIrpE,YAAYspE,GAChBD,EAAIrpE,YAAYupE,GACTF,GAGRjvB,EAAiBrgD,UAAU4vE,uBAAyB,SAAStH,GAC5D,IAAIzsD,EAAOtP,KAkCX,MA1BW,CAEVsjE,SATc,SAAStpD,GACvB1K,EAAK/T,GAAGq2C,aAAa53B,EAAI,UASzB,OAAQ,CACP7W,QAAQ,GAET,UAAW,CAACA,QAAQ,GACpB,iBAAkB,CAACA,QAAQ,GAC3B,UAAW,CACVG,OAAQ,WACR1C,SAAU,SAASsb,GAClB,OAAOA,EAAWqnD,cAAcrnD,EAAWppB,QAC1C,CAAE0wE,GAAItnD,EAAWiW,QAAQ,YAG5B,SAAU,CACTvxB,SAAU,SAASsb,GAClB,OAAOA,EAAWqnD,cAAcrnD,EAAWppB,QACzC,CAAE2wE,MAAOvnD,EAAWiW,QAAQ,WAAYuxC,YAAaxnD,EAAWiW,QAAQ,sBAI5E,YAAa,CAAE7uB,OAAQ,cAAe1C,SAAU,mBAAoBzI,KAAM,CAAC0J,cAAe,GAAIC,cAAe,KAC7G,aAAiB,CAAC,UAAW,SAAU,eAMzCgyC,EAAiBrgD,UAAUkwE,eAAiB,SAAS7nE,GACpD,IAAI3J,EAAImE,SAASgD,cAAc,OAC3BhB,EAAQwD,EAAK8N,OAAO,GAAGC,cAAgB/N,EAAKgO,MAAM,GAEtD,GADA3X,EAAEuH,YAAYyT,EAAMhU,aAAab,EAAQ,UAC9B,SAARwD,EACF,IAAI8nE,EAAe,gFACXA,EAAe,0FAExB,OADAzxE,EAAEuH,YAAYpD,SAASuD,eAAe+pE,IAC/BzxE,GAGR2hD,EAAiBrgD,UAAUowE,cAAgB,SAAS1xE,GAAE,WAiBjD4pE,GAhBI3kE,EAAe9C,KACnBsK,MAAM,IACNE,MAAM,GACNK,mBAaK,IAAI2kE,mBAAmB9jE,KAAKzE,GAAG0V,SACpC3c,EAAO8C,EAAe9C,KACtBmK,EAAQnK,EAAKkpD,KAAKx9C,KAAKzE,GAAG0V,OAAOwY,iBAAiByC,SAASttB,MAAM,IAAIE,MAAM,GAAGK,mBAyFlF,OAvFAV,EAAMk2B,QAAQ30B,KAAKzE,GAAG0V,QAAQ5V,MAAK,SAACu5B,GACnC,IAAImvC,EAAO,IAAI3sE,EAAe/C,WAAWugC,EAASn2B,GAC9CulE,EAAKjI,EAAGnnB,WAAWmvB,EAAMzvE,EAAKgmB,SAAS,GAC3CnoB,EAAEuH,YAAY,EAAKiqE,eAAe,UAClCxxE,EAAEuH,YAAYsqE,GAIdD,EAAKjxC,QACL,IAAImxC,EAAK3vE,EAAKkmB,QACdypD,EAAGhrE,OAAO,aAEVgrE,EAAGjlD,KAAK,YAAa,YAAY5hB,KADpB,CAAEoiB,MAAO,CAAC,IAAI,IAAI,IAAKG,OAAQ,IAAKukD,QAAS,IAAU3kD,KAAK,IAEzE,IAAI25C,EAAK6C,EAAGnnB,WAAWmvB,EAAME,GAAI,GACjC9xE,EAAEuH,YAAY,EAAKiqE,eAAe,UAClCxxE,EAAEuH,YAAYw/D,GACd6K,EAAKjxC,WAuEC3gC,GAoCR6hD,EAAkBvgD,UAAU8a,SAAW,SAAS9N,GAC/C,IAAIsiE,EAAMzsE,SAASgD,cAAc,OACjCypE,EAAIxpE,aAAa,QAAS,uBAC1B,IAAI4qE,EAAM7tE,SAASgD,cAAc,MACjC6qE,EAAI5qE,aAAa,QAAS,kDAC1B4qE,EAAIzqE,YAAYyT,EAAMhU,aAAa,oBACnC4pE,EAAIrpE,YAAYyqE,GAChB,IAAIC,EAAM9tE,SAASgD,cAAc,OACjC8qE,EAAI7qE,aAAa,QAAS,yBAC1BwpE,EAAIrpE,YAAY0qE,GAChB,IAAIC,EAAM/tE,SAASgD,cAAc,OACjC+qE,EAAI9qE,aAAa,QAAS,4BAC1B6qE,EAAI1qE,YAAY2qE,IACZC,EAAMhuE,SAASgD,cAAc,QAC7BC,aAAa,QAAS,oGACtB8nC,EAAO/qC,SAASgD,cAAc,SAC7BC,aAAa,QAAS,gEAC3B8nC,EAAK3nC,YAAYpD,SAASuD,eAAe,OACzCyqE,EAAI5qE,YAAY2nC,GAChB,IAAIkjC,EAAOjuE,SAASgD,cAAc,SAClCirE,EAAKhrE,aAAa,OAAQ,QAC1BgrE,EAAKhrE,aAAa,QAAS,2CAC3BgrE,EAAKhrE,aAAa,cAAe,kDACjC+qE,EAAI5qE,YAAY6qE,GAChBH,EAAI1qE,YAAY4qE,IACZA,EAAMhuE,SAASgD,cAAc,QAC7BC,aAAa,QAAS,oGACtB8nC,EAAO/qC,SAASgD,cAAc,SAC7BC,aAAa,QAAS,mEAC3B8nC,EAAK3nC,YAAYpD,SAASuD,eAAe,UACzC,IAAI2qE,EAAQluE,SAASgD,cAAc,SACnCkrE,EAAMjrE,aAAa,OAAQ,QAC3BirE,EAAMjrE,aAAa,cAAe,kCAClCirE,EAAMjrE,aAAa,QAAS,2CAC5B+qE,EAAI5qE,YAAY2nC,GAChBijC,EAAI5qE,YAAY8qE,GAChBJ,EAAI1qE,YAAY4qE,IACZA,EAAMhuE,SAASgD,cAAc,QAC7BC,aAAa,QAAS,oGACtB8nC,EAAO/qC,SAASgD,cAAc,SAC7BC,aAAa,QAAS,mEAC3B8nC,EAAK3nC,YAAYpD,SAASuD,eAAe,gBACzCyqE,EAAI5qE,YAAY2nC,GAChB,IAAIojC,EAASnuE,SAASgD,cAAc,YACpCmrE,EAAOlrE,aAAa,QAAS,gEAC7BkrE,EAAOlrE,aAAa,cAAe,wDACnC+qE,EAAI5qE,YAAY+qE,GAChBL,EAAI1qE,YAAY4qE,IACZA,EAAMhuE,SAASgD,cAAc,QAC7BC,aAAa,QAAS,oGACtB8nC,EAAO/qC,SAASgD,cAAc,SAC7BC,aAAa,QAAS,oEAC3B8nC,EAAK3nC,YAAYpD,SAASuD,eAAe,kBACzCyqE,EAAI5qE,YAAY2nC,GAChB,IAAIqjC,EAAQpuE,SAASgD,cAAc,SACnCorE,EAAMnrE,aAAa,cAAe,mBAClCmrE,EAAMnrE,aAAa,OAAQ,QAC3BmrE,EAAMnrE,aAAa,QAAS,6DAC5B+qE,EAAI5qE,YAAYgrE,GAChBN,EAAI1qE,YAAY4qE,IAEZA,EAAMhuE,SAASgD,cAAc,QAC7BC,aAAa,QAAS,oGACtB8nC,EAAO/qC,SAASgD,cAAc,SAC7BC,aAAa,QAAS,oEAC3B8nC,EAAK3nC,YAAYpD,SAASuD,eAAe,QACzCyqE,EAAI5qE,YAAY2nC,GAChB,IAOIijC,EAEAjjC,EATAsjC,EAAMruE,SAASgD,cAAc,SACjCqrE,EAAIprE,aAAa,cAAe,kBAChCorE,EAAIprE,aAAa,OAAQ,QACzBorE,EAAIprE,aAAa,QAAS,6DAC1B+qE,EAAI5qE,YAAYirE,GAChBP,EAAI1qE,YAAY4qE,IAEZA,EAAMhuE,SAASgD,cAAc,QAC7BC,aAAa,QAAS,oGACtB8nC,EAAO/qC,SAASgD,cAAc,SAC7BC,aAAa,QAAS,kEAC3B8nC,EAAK3nC,YAAYpD,SAASuD,eAAe,gBACzCyqE,EAAI5qE,YAAY2nC,GAChB,IAAIujC,EAAQtuE,SAASgD,cAAc,SACnCsrE,EAAMrrE,aAAa,OAAQ,QAC3BqrE,EAAMrrE,aAAa,cAAe,mBAClCqrE,EAAMrrE,aAAa,QAAS,6DAC5B+qE,EAAI5qE,YAAYkrE,GAEhB,IAAIC,EAAWvuE,SAASgD,cAAc,OACtCurE,EAAStrE,aAAa,QAAS,4BAC/B,IAAIurE,EAAUxuE,SAASgD,cAAc,UACrCwrE,EAAQvrE,aAAa,QAAS,2FAC9BurE,EAAQprE,YAAYpD,SAASuD,eAAe,WAC5C,IAAIkrE,EAAUzuE,SAASgD,cAAc,UACrCyrE,EAAQxrE,aAAa,QAAS,2FAC9BwrE,EAAQrrE,YAAYpD,SAASuD,eAAe,WAC5C,IAWIyV,EAAOtP,KAYX,OAXA+kE,EAAQvkE,iBAAiB,SAAS,WACjC,IAAIgC,EAZW,WACf,IAAIA,EAAQ,GAOZ,OANAA,EAAMwK,GAAKu3D,EAAKzxE,MAChB0P,EAAMlK,MAAQksE,EAAM1xE,MACpB0P,EAAMjK,YAAcksE,EAAO3xE,MAC3B0P,EAAMqvC,OAAS6yB,EAAM5xE,MACrB0P,EAAMpP,IAAMuxE,EAAI7xE,MAChB0P,EAAM7H,KAAOiqE,EAAM9xE,MACZ0P,EAIK83C,GACZhrC,EAAK/T,GAAG62C,eAAe5vC,MAExBsiE,EAAQtkE,iBAAiB,SAAS,WACjC8O,EAAK/T,GAAG42C,wBAET0yB,EAASnrE,YAAYorE,GACrBD,EAASnrE,YAAYqrE,GACrBX,EAAI1qE,YAAYmrE,GAET9B,GAGRnxE,EAAOD,QAAQ,CAACmiD,iBAAiBA,EACpBwC,qBAAqBA,EACrBtC,kBAAkBA,I,6CCn3B/B,IAAM58C,eAAiBtD,oBAAQ,GAE/B,SAASkxE,cAAc/zD,GACtBjR,KAAKiR,OAASA,EAGf+zD,cAAcvxE,UAAU4E,QAAU,SAASA,GAE1C,OADA2H,KAAK3H,QAAUA,EACR2H,MAGRglE,cAAcvxE,UAAUka,SAAW,SAASlP,GAE3C,OADAuB,KAAKvB,MAAQA,EACNuB,MAGRglE,cAAcvxE,UAAU0nB,YAAc,SAASC,GAE9C,OADApb,KAAKY,SAAWwa,EACTpb,MAGRglE,cAAcvxE,UAAU4e,OAAS,WAChC,GAAGrS,KAAKY,SAIP,OAHGZ,KAAKvB,OACPuB,KAAKY,SAAS+wB,IAAI3xB,KAAKvB,OAEjBuB,KAAKY,SAASyR,OAAOrS,OAK9BglE,cAAcvxE,UAAUua,UAAY,SAAS5U,KAAMV,QAClD,IACC,IAAIpE,KAAO8C,eAAe9C,KAC1B,GAAa,QAAVoE,OAAiB,CACnB,IAAIiG,KAAO/D,KAAKsT,MAAM9U,MACtB,OAAO9E,KAAK8G,KAAKuD,MAGjB,IAAIsP,GAAKlO,KAAK,QAAU3G,MACxB,OAAO6U,GAGT,MAAMhO,GACLD,KAAKoO,MAAM,yBAA2BnO,EAAEzL,cAI1CwwE,cAAcvxE,UAAU6pC,YAAc,SAASx9B,KAI/CklE,cAAcvxE,UAAU2a,MAAQ,SAASnU,GACxCwF,QAAQC,IAAIzF,IAGb+qE,cAAcvxE,UAAUoa,UAAY,SAASpP,EAAO/F,GACnD,MAAa,QAAVA,EACKkC,KAAKC,UAAU4D,EAAMrD,OAAQ,EAAG,GAGhCqD,EAAMqP,YAAY,IAI3Blc,OAAOD,QAAUqzE,e,gBCjEjB,IAAM53D,EAAsBtZ,EAAQ,GAC9BsD,EAAiBtD,EAAQ,GACzBg3C,EAAYh3C,EAAQ,IACpBi0C,EAAcj0C,EAAQ,IACtBm2C,EAAcn2C,EAAQ,IACtB02C,EAAe12C,EAAQ,IACvB22C,EAAgB32C,EAAQ,IAQ9B,SAASmlC,EAAWhoB,EAAQg0D,EAAW7zD,GACnCpR,KAAKiR,OAASA,EACdjR,KAAKklE,GAAKD,EACVjlE,KAAKoR,OAASA,EACjBpR,KAAKo5B,UAAY9iC,SAASgD,cAAc,QACrC0G,KAAKo5B,UAAU7/B,aAAa,QAAS,wBAGzC0/B,EAAWxlC,UAAU4E,QAAU,SAAS8Y,GAgBpC,OAfHnR,KAAKi6B,cAAc9oB,QAAkC,IAAnBA,EAAK8oB,aAA4B9oB,EAAK8oB,WACrEj6B,KAAKk6B,cAAc/oB,QAAkC,IAAnBA,EAAK+oB,aAA4B/oB,EAAK+oB,WACxEl6B,KAAKmlE,gBAAkBh0D,QAAsC,IAAvBA,EAAKg0D,gBAAgCh0D,EAAKg0D,eAChFnlE,KAAK+5B,SAAS5oB,QAA6B,IAAdA,EAAK4oB,QAAuB5oB,EAAK4oB,MAC9D/5B,KAAKgb,UAAc7J,GAAQA,EAAK6J,UAAY7J,EAAK6J,UAAY,CAC/DV,MAAO,IAAIytB,EACXvtB,MAAO,IAAIyvB,EACXtvB,OAAQ,IAAI6vB,EACZ9vB,QAAS,IAAI+vB,GAERzqC,KAAKoR,SACJpR,KAAK+F,QAAU,CAAC/F,KAAKoR,SAEzBpR,KAAK+F,QAAYoL,QAA+B,IAAhBA,EAAKpL,QAAyB/F,KAAK+F,QAAQswB,OAAOllB,EAAKpL,SAAW/F,KAAK+F,QACvG/F,KAAKqG,cAAgB,EACdrG,MAGXi5B,EAAWxlC,UAAU8a,SAAW,WAAU,WACtC,GAAGvO,KAAK+5B,MAAM,CACV,IAAIkoC,EAA2B,iBAAdjiE,KAAK+5B,MAAoBzjC,SAASuD,eAAemG,KAAK+5B,OAAS/5B,KAAK+5B,MAC3F/5B,KAAKo5B,UAAU1/B,YAAYuoE,GAEzB,IAAI5lC,EAAa/lC,SAASgD,cAAc,QAS3C,GARG+iC,EAAW9iC,aAAa,QAAS,qBACjCyG,KAAKo5B,UAAU1/B,YAAY2iC,GAC9Br8B,KAAK68B,UAAYvmC,SAASgD,cAAc,QACxC0G,KAAK68B,UAAUtjC,aAAa,QAAS,wBAClCyG,KAAKxJ,QACPwJ,KAAK68B,UAAUnjC,YAAYsG,KAAKolE,gBAEjCplE,KAAKo5B,UAAU1/B,YAAYsG,KAAK68B,WAC7B78B,KAAKi6B,WAAW,KAcTmC,EAAT,WACCC,EAAW/jC,MAAM,mCACjBgkC,EAAG/iC,aAAa,QAAS,0BACb8iC,EAAWxsB,aACVP,EAAK8pB,UAAU5jB,aAAagnB,EAAOH,EAAWxsB,aAC3CP,EAAK9M,MAAMkL,QAAQ5a,OACjCwc,EAAK9M,MAAMuN,mBAGAT,EAAK8pB,UAAU1/B,YAAY8iC,GACxBltB,EAAK9M,MAAMkL,QAAQ5a,OACjCwc,EAAK9M,MAAMuN,mBAGL0sB,EAAT,WACCJ,EAAW/jC,MAAM,8BACRgkC,EAAG/iC,aAAa,QAAS,mDAAqD+V,EAAK+1D,0BAC5F/1D,EAAK8pB,UAAU3wB,YAAY+zB,IA9BtBx8B,KAAK48B,aAAmC,QAAnB58B,KAAKi6B,WAChC,IAAIjnC,EAAQgN,KAAKk6B,WAAa,OAAS,OACvCl6B,KAAKwC,MAAQxC,KAAK28B,YAAY3pC,GAC9B,IAAIwpC,EAAQx8B,KAAKwC,MAAM+L,WACbm9B,EAAQp1C,SAASgD,cAAc,QACnCoyC,EAAMlrC,iBAAiB,aAAa,WAChCR,KAAK1C,MAAMiS,OAAS,aAE9Bm8B,EAAMnyC,aAAa,QAAS,sBAC5B,IAAI+iC,EAAKhmC,SAASgD,cAAc,KAChCoyC,EAAMhyC,YAAY4iC,GAClBD,EAAW3iC,YAAYgyC,GACvB,IAAIp8B,EAAOtP,KAoBX0rC,EAAMlrC,iBAAiB,SAAS,WAC5B,EAAKo8B,aAAcH,IACjBL,IACL,EAAKQ,cAAgB,EAAKA,gBAErBR,IACgB,QAAnBp8B,KAAKi6B,YAAsBwC,IAM/B,OAJMz8B,KAAKmlE,iBACJG,QAAUtlE,KAAKulE,mBAAmB/oC,GAC/B8oC,SAASjpC,EAAWulC,QAAQ0D,UAE/BtlE,KAAKo5B,WAGbH,EAAWxlC,UAAU4xE,uBAAyB,WAC1C,OAAGrlE,KAAKmlE,gBAAkBnlE,KAAK+F,QAAQ/Q,OAAS,EACrC,iBAERgL,KAAK+F,QAAQ/F,KAAKqG,eAAejJ,KACzB4C,KAAK+F,QAAQ/F,KAAKqG,eAAejJ,KAElC4C,KAAKwlE,qBAAqBxlE,KAAK+F,QAAQ/F,KAAKqG,gBAC3CjJ,MAIf67B,EAAWxlC,UAAU8xE,mBAAqB,SAAS5hE,EAAI64B,GACnD,IAAIrtB,EAAM7Y,SAASgD,cAAc,QAEjC,GADA6V,EAAI5V,aAAa,QAAS,yBACvByG,KAAK+F,QAAQ/Q,OAAS,EACrB,IAAI,IAAInD,EAAI,EAAGA,EAAEmO,KAAK+F,QAAQ/Q,OAAQnD,IAAI,CACtC,IAAIwd,EAAMrP,KAAKylE,iBAAiBzlE,KAAK+F,QAAQlU,GAAIA,EAAGsd,GACpDA,EAAIzV,YAAY2V,GAGxB,OAAOF,GAGX8pB,EAAWxlC,UAAUiyE,iBAAmB,SAASn/D,EAAQrC,GACrDlE,KAAKqG,cAAgBnC,EACrBlE,KAAKoR,OAAS7K,EACdvG,KAAKwC,MAAMmL,SAASpH,GACpBvG,KAAKwC,MAAMyM,OAAOjP,KAAKwC,MAAM1C,OAIjCm5B,EAAWxlC,UAAU+xE,qBAAuB,SAASj/D,GAOjD,MANiB,CACb+T,MAAO,CAACtgB,MAAO,QAASoD,KAAM,eACpCod,MAAO,CAACxgB,MAAO,QAASoD,KAAM,sBAC9Bsd,QAAS,CAAC1gB,MAAO,iBAAkBoD,KAAM,qBACzCud,OAAQ,CAAC3gB,MAAO,gBAAiBoD,KAAM,eAEnBmJ,EAAOxM,OAI7Bk/B,EAAWxlC,UAAUgyE,iBAAmB,SAASl/D,EAAQrC,EAAOk1B,GAAU,WAClE/pB,EAAM/Y,SAASgD,cAAc,QAC7B8D,EAAO9G,SAASgD,cAAc,KAC9B4iE,EAAMl8D,KAAKwlE,qBAAqBj/D,GACpCnJ,EAAK9E,MAASiO,EAAOvM,MAASuM,EAAOvM,MAAQkiE,EAAIliE,MACjD,IAAIsiC,EAAM/1B,EAAOnJ,KAAOmJ,EAAOnJ,KAAO8+D,EAAI9+D,KAuB1C,OAtBAA,EAAK7D,aAAa,QAAS+iC,GAC3Bl/B,EAAKX,UAAUG,IAAI,6BAEnByS,EAAI3V,YAAY0D,GACb4C,KAAKqG,eAAiBnC,GACrBmL,EAAI9V,aAAa,QAAS,0DAC1B6D,EAAKX,UAAUG,IAAI,4BAGnByS,EAAI9V,aAAa,QAAS,qCAC1B8V,EAAI7O,iBAAiB,aAAa,WAC9BR,KAAK1C,MAAMiS,OAAS,cAG5BF,EAAI7O,iBAAiB,SAAS,WAC1B,EAAKklE,iBAAiBn/D,EAAQrC,GAC9B9M,EAAejD,YAAYyH,eAAew9B,GAC1C,IAAI,IAAIvnC,EAAI,EAAGA,EAAE,EAAKkU,QAAQ/Q,OAAQnD,IAAI,CACtC,IAAIwd,EAAM,EAAKo2D,iBAAiB,EAAK1/D,QAAQlU,GAAIA,EAAGunC,GACpDA,EAAU1/B,YAAY2V,OAGvBA,GAGX4pB,EAAWxlC,UAAUkpC,YAAc,SAAS3pC,GACxC,IAAIwP,EAAQ,IAAI4K,EAAoB,OAAQpa,GACzCgN,KAAKoR,QACP5O,EAAMmL,SAAS3N,KAAKoR,QAExB,IAAI9B,EAAOtP,KAIX,OAHAwC,EAAMyM,OAAS,SAASmC,GACvB9B,EAAK88B,WAAWh7B,IAEV5O,GAGRy2B,EAAWxlC,UAAUo+B,UAAY,SAAS8zC,GACzC3lE,KAAKxJ,OAASmvE,GAGf1sC,EAAWxlC,UAAU+pC,aAAe,SAASmoC,GAC5C3lE,KAAKxJ,OAASmvE,EACdvuE,EAAejD,YAAYyH,eAAeoE,KAAK68B,WAC/C78B,KAAK68B,UAAUnjC,YAAYsG,KAAKolE,iBAGjCnsC,EAAWxlC,UAAU24C,WAAa,SAASh7B,GAC1CpR,KAAKoR,OAASA,EACdha,EAAejD,YAAYyH,eAAeoE,KAAK68B,WAC5C78B,KAAKxJ,QACPwJ,KAAK68B,UAAUnjC,YAAYsG,KAAKolE,iBAIlCnsC,EAAWxlC,UAAU2xE,aAAe,WACnC,IAAI7vD,EAAOjf,SAASgD,cAAc,QAClCic,EAAKhc,aAAa,QAAS,0BACxB,IAAIgN,EAASvG,KAAKoR,OAAOje,OAAO6M,KAAKiR,OAAQjR,KAAKgb,UAAW8vB,EAAUvmB,yBACnEjV,EAAOtP,KAOd,OANGuG,EAAOuuB,OAAS,SAASniC,GACrB2c,EAAK41D,GAAG1nC,aAAa7qC,IAE5BqN,KAAKxJ,OAAOs8B,QACZvsB,EAAOsrB,UAAU7xB,KAAKxJ,QACtB+e,EAAK7b,YAAY6M,EAAO8L,UACjBkD,GAGR3jB,EAAOD,QAAUsnC,G,cC7NjB,SAAS+Q,EAAmB54B,GAC3BpR,KAAK4lE,IACL5lE,KAAK6lE,MA0sBN,SAAsB7wE,GAClB,IAAI8wE,EAAQ,gEAAgExkE,MAAM,IAC5EtM,IACFA,EAAS4T,KAAKg+C,MAAMh+C,KAAKC,SAAWi9D,EAAM9wE,SAG9C,IADA,IAAIiC,EAAM,GACDpF,EAAI,EAAGA,EAAImD,EAAQnD,IACxBoF,GAAO6uE,EAAMl9D,KAAKg+C,MAAMh+C,KAAKC,SAAWi9D,EAAM9wE,SAElD,OAAOiC,EAntBG8uE,CAAa,GAC1B/lE,KAAKgmE,YAAcl9D,KAAKwkD,MAAQ,IAEhCttD,KAAKimE,cACLjmE,KAAKkmE,cAELlmE,KAAKo5B,WAAY,EAEjBp5B,KAAKmmE,YAAc,GACnBnmE,KAAKomE,WAAa,GAElBpmE,KAAK62B,MACL72B,KAAKqmE,MAELrmE,KAAKsmE,YACLtmE,KAAKumE,iBAAiBn1D,GAMvB44B,EAAmBv2C,UAAU6/C,KAAO,SAAS7tC,GAC5CzF,KAAKwmE,OAAOxmE,KAAKymE,OACjBzmE,KAAK0mE,cACL1mE,KAAK2mE,cACFlhE,GACFzF,KAAK4mE,iBAAiB,SAOxB58B,EAAmBv2C,UAAU62C,QAAU,SAASu8B,EAAKphE,GAEjDzF,KAAKxJ,QACPwJ,KAAKylC,QAENzlC,KAAKxJ,OAASqwE,EAEb7mE,KAAKszC,KAAK7tC,IAIZukC,EAAmBv2C,UAAUizE,YAAc,WAC1C1mE,KAAK62B,MAAQriB,OAAO5d,QAAO,EAAM,GAAIoJ,KAAKxJ,OAAO6gC,YACjD,IAAI,IAAIxlC,EAAI,EAAIA,EAAEmO,KAAK62B,MAAM7hC,OAAQnD,IACpCmO,KAAKmmE,YAAYnmE,KAAK62B,MAAMhlC,GAAGmb,IAAMhN,KAAK62B,MAAMhlC,GAEjDmO,KAAKqmE,MAAQrmE,KAAKxJ,OAAOwgC,YAQ1BgT,EAAmBv2C,UAAUqzE,WAAa,SAASD,EAAKphE,GACvDzF,KAAK+mE,uBAAuBF,GAC5B7mE,KAAKxJ,OAASqwE,EACd7mE,KAAKgnE,OAAOvhE,EAAM,SAAUzF,KAAKqe,YAGlC2rB,EAAmBv2C,UAAUszE,uBAAyB,SAASF,GAC9D,IAAI9xE,EAAK8xE,EAAII,eACVlyE,IACFiL,KAAKsmE,YAAcvxE,EACnBiL,KAAKomE,WAAWp7D,KAAKjW,KAOvBi1C,EAAmBv2C,UAAUyzE,UAAY,SAASL,EAAKphE,GACtDzF,KAAKmnE,WAAWC,OAChBpnE,KAAKgnE,OAAOvhE,EAAM,UAAU,IAG7BukC,EAAmBv2C,UAAU4zE,KAAO,WAChCrnE,KAAKmnE,YAAYnnE,KAAK4mE,iBAAiB,SAG3C58B,EAAmBv2C,UAAU6zE,UAAY,WACxCtnE,KAAKmnE,WAAWC,QAMjBp9B,EAAmBv2C,UAAUuzE,OAAS,SAASvhE,EAAMzS,EAAMu0E,GAC1D,IAAI,IAAI11E,EAAI,EAAIA,EAAEmO,KAAK62B,MAAM7hC,OAAQnD,IACpCmO,KAAKmmE,YAAYnmE,KAAK62B,MAAMhlC,GAAGmb,IAAMhN,KAAK62B,MAAMhlC,GAEjD,IAAI21E,EAAShzD,OAAO5d,QAAO,EAAM,GAAIoJ,KAAKxJ,OAAOixE,sBACjDznE,KAAK62B,MAAQ,GACb,IAAI6wC,EAAQ1nE,KAAKmmE,YAAYnmE,KAAKsmE,aAClC,IAAQz0E,EAAI,EAAIA,EAAE21E,EAAOxyE,OAAQnD,IAAI,CACpC,IAAI81E,EAAQH,EAAO31E,GAChBmO,KAAKmmE,YAAYwB,EAAM36D,IACtB26D,EAAM36D,IAAMhN,KAAKsmE,aACnBtmE,KAAKmmE,YAAYwB,EAAM36D,IAAI46D,GAAK5nE,KAAKmmE,YAAYwB,EAAM36D,IAAIm2B,EAC3DnjC,KAAKmmE,YAAYwB,EAAM36D,IAAI66D,GAAK7nE,KAAKmmE,YAAYwB,EAAM36D,IAAIy2C,GAEnD8jB,EAIDvnE,KAAKmmE,YAAYwB,EAAM36D,IAAIm2B,IAClCnjC,KAAKmmE,YAAYwB,EAAM36D,IAAI46D,GAAK5nE,KAAKmmE,YAAYwB,EAAM36D,IAAIm2B,EAC3DnjC,KAAKmmE,YAAYwB,EAAM36D,IAAI66D,GAAK7nE,KAAKmmE,YAAYwB,EAAM36D,IAAIy2C,IAL3DzjD,KAAKmmE,YAAYwB,EAAM36D,IAAI46D,GAAK,KAChC5nE,KAAKmmE,YAAYwB,EAAM36D,IAAI66D,GAAK,OAQ9B7nE,KAAKue,aAAempD,EAAMvkC,IAC5BwkC,EAAMxkC,EAAIukC,EAAMvkC,EAChBwkC,EAAMlkB,EAAIikB,EAAMjkB,GAEjBzjD,KAAKmmE,YAAYwB,EAAM36D,IAAM26D,GAE9B3nE,KAAK62B,MAAM7rB,KAAKhL,KAAKmmE,YAAYwB,EAAM36D,KAExChN,KAAKqmE,MAAQrmE,KAAKxJ,OAAOsxE,WACzB9nE,KAAK2mE,cACFlhE,GAEFzF,KAAK4mE,iBAAiB5zE,IAIxBg3C,EAAmBv2C,UAAUgyC,MAAQ,WACpCzlC,KAAK62B,MAAQ,GACb72B,KAAKmmE,YAAc,GACnBnmE,KAAKqmE,MAAQ,GACbrmE,KAAK2mE,cACLnyD,OAAOxU,KAAKymE,OAAO9oC,QACnB39B,KAAK+nE,aAAe,GAMrB/9B,EAAmBv2C,UAAU82C,QAAU,SAASxN,GAC3C/8B,KAAKsN,QAAOtN,KAAKsN,MAAQtN,KAAKgoE,YAC9BhoE,KAAKuN,SAAQvN,KAAKuN,OAASvN,KAAKioE,aACpCjoE,KAAKymE,MAAQ1pC,EACV/8B,KAAKxJ,QACPwJ,KAAKszC,MAAK,IAOZtJ,EAAmBv2C,UAAU8a,SAAW,WACvC,IAAIwuB,EAAOzmC,SAASgD,cAAc,OAKlC,OAJAyjC,EAAKxjC,aAAa,QAAS,uBAC3BwjC,EAAKxjC,aAAa,KAAMyG,KAAK6lE,OAC7B9oC,EAAKxjC,aAAa,QAAS,QAC3ByG,KAAKo5B,UAAY2D,EACVA,GAMRiN,EAAmBv2C,UAAUu0E,SAAW,WACvC,GAAGhoE,KAAKo5B,WAAap5B,KAAKo5B,UAAU8uC,YACnCloE,KAAKsN,MAAQtN,KAAKo5B,UAAU8uC,iBAExB,GAAGloE,KAAKo5B,UAAU1wB,YAAc1I,KAAKo5B,UAAU1wB,WAAWw/D,YAC9DloE,KAAKsN,MAAQtN,KAAKo5B,UAAU1wB,WAAWw/D,gBAEnC,CACJ,IAAI9nD,EAAI5L,OAAOxU,KAAKo5B,WAAW9rB,QACvB,GAAL8S,IACFA,EAAI5L,OAAOxU,KAAKo5B,UAAU1wB,YAAY4E,SAE/B,GAAL8S,IACFA,EAAI,KAELpgB,KAAKsN,MAAQ8S,EAEd,OAAOpgB,KAAKsN,OAGb08B,EAAmBv2C,UAAUw0E,UAAY,WACxC,GAAGjoE,KAAKo5B,WAAap5B,KAAKo5B,UAAU+uC,aACnCnoE,KAAKuN,OAASvN,KAAKo5B,UAAU+uC,kBAEzB,GAAGnoE,KAAKo5B,UAAU1wB,YAAc1I,KAAKo5B,UAAU1wB,WAAWy/D,aAC9DnoE,KAAKuN,OAASvN,KAAKo5B,UAAU1wB,WAAWy/D,iBAEpC,CACJ,IAAI/nD,EAAI5L,OAAOxU,KAAKo5B,WAAW7rB,SACvB,GAAL6S,IACFA,EAAI5L,OAAOxU,KAAKo5B,UAAU1wB,YAAY6E,UAE/B,GAAL6S,IACFA,EAAI,KAELpgB,KAAKuN,OAAS6S,EAEf,OAAOpgB,KAAKuN,QAIby8B,EAAmBv2C,UAAU+yE,OAAS,SAAS4B,GAC9C,IAAI94D,EAAOtP,KAGXA,KAAK4lE,IAAMxwD,GAAG4iC,OAAOowB,GAAMC,OAAO,OAChCC,KAAK,QAAStoE,KAAKsN,OACnBg7D,KAAK,SAAUtoE,KAAKuN,QAOtBvN,KAAKmnE,WAAc/xD,GAAGmzD,kBAEjBnqD,MAAM,OAAQhJ,GAAGozD,YAAY9oD,UAPhB,SAAS1W,GAC1B,OAAOsG,EAAKm5D,gBAAgBz/D,MAM2BgE,IAAG,SAAShE,GAAQ,OAAOA,EAAKgE,OAEnFoR,MAAM,SAAUhJ,GAAGszD,gBAAgBC,UAAS,SAASpgE,GAAO,OAAO+G,EAAKs5D,UAAUrgE,OAElF6V,MAAM,YAAahJ,GAAGyzD,eAAehwC,QAAO,SAAStwB,GACrD,OAAQ+G,EAAKw5D,mBAAmBvgE,OAEnC6V,MAAM,SAAUhJ,GAAG2zD,YAAY/oE,KAAKsN,MAAQ,EAAGtN,KAAKuN,OAAS,IAG/DvN,KAAKgpE,UAAY5zD,GAAG6zD,OAClBxhC,GAAG,SAAS,SAASl/B,GACrBA,EAAKq/D,GAAKr/D,EAAK46B,EACf56B,EAAKs/D,GAAKt/D,EAAKk7C,KAEfhc,GAAG,QAAQ,SAASl/B,GACpB+G,EAAK63D,WAAW+B,UAChB3gE,EAAKq/D,GAAKxyD,GAAGgvB,MAAMjB,EACnB56B,EAAKs/D,GAAKzyD,GAAGgvB,MAAMqf,KAEnBhc,GAAG,OAAO,SAASl/B,GACnBA,EAAKq/D,GAAK,KACVr/D,EAAKq/D,GAAK,KACVt4D,EAAK63D,WAAWC,UAGlBpnE,KAAK4lE,IAAIyC,OAAO,QACZC,KAAK,QAAStoE,KAAKsN,OACnBg7D,KAAK,SAAUtoE,KAAKuN,QACpBjQ,MAAM,OAAQ,QACdA,MAAM,iBAAkB,OACxBtL,KAAKojB,GAAGkwB,OAAOmC,GAAG,QAAQ,WAAWn4B,EAAK65D,aAG9CnpE,KAAKopE,WAAappE,KAAK4lE,IAAIyC,OAAO,KAAKgB,QAAQ,SAAS,GACxDrpE,KAAKspE,WAAatpE,KAAK4lE,IAAIyC,OAAO,KAAKgB,QAAQ,SAAS,IAGzDr/B,EAAmBv2C,UAAU01E,OAAS,WACrCnpE,KAAKupE,kBAAoBn0D,GAAGgvB,MAAMolC,UAC/BxpE,KAAKkmE,eACPlmE,KAAKkmE,cAAcoC,KAAK,YAAalzD,GAAGgvB,MAAMolC,WACzCxpE,KAAKimE,eACPjmE,KAAKimE,cAAcqC,KAAK,YAAalzD,GAAGgvB,MAAMolC,YAMnDx/B,EAAmBv2C,UAAUkzE,YAAc,SAAS9vC,EAAOwvC,GAC1D,IAAI/2D,EAAOtP,KAEPypE,EAAsB,SAASC,GAClCp6D,EAAKq6D,aAAaD,IAMnB7yC,OAAyB,IAATA,EAAuBA,EAAQ72B,KAAK62B,MACpDwvC,OAAyB,IAATA,EAAuBA,EAAQrmE,KAAKqmE,MACpDrmE,KAAKkmE,cAAiBlmE,KAAKspE,WAAWM,UAAU,KAAKjvE,KAAKk8B,GAC1D72B,KAAKkmE,cAAc2D,OAAOntE,SAGvB,IAAIotE,EAAa9pE,KAAKkmE,cAAc6D,QAAQ1B,OAAO,KAGtDyB,EAAWzB,OAAO,UAChB/qE,MAAM,UAAW,KACjBgrE,KAAK,KAAK,SAAS//D,GAAM,OAAO+G,EAAK06D,UAAUzhE,MAC/C+/D,KAAK,MAAO,SAAS//D,GAAO,OAAOA,EAAK46B,KACxCmlC,KAAK,MAAO,SAAS//D,GAAO,OAAOA,EAAKk7C,KACxC6kB,KAAK,QAAQ,SAAS//D,GAAO,OAAO+G,EAAK26D,SAAS1hE,GAAQ,SAAW,UACrEvW,KAAKsd,EAAK05D,WACVvhC,GAAG,aAAa,SAASt1C,GAAIijB,GAAG4iC,OAAOh4C,MAAM1C,MAAM,SAAU,cAC7DmqC,GAAG,YAAY,SAASt1C,GAAIijB,GAAG4iC,OAAOh4C,MAAM1C,MAAM,SAAU,cAC5DmqC,GAAG,QAASgiC,GAEXK,EAAWzB,OAAO,QACnBC,KAAK,KAAM,SAAS//D,GAAO,OAAOA,EAAK46B,KACvCmlC,KAAK,KAAM,SAAS//D,GAAO,OAAOA,EAAKk7C,KACvCrqD,MAAK,SAASmP,GAAQ,OAAO+G,EAAK46D,mBAAmB3hE,MACrDvW,KAAKsd,EAAK05D,WACVvhC,GAAG,aAAa,SAASt1C,GAAIijB,GAAG4iC,OAAOh4C,MAAM1C,MAAM,SAAU,cAC7DmqC,GAAG,YAAY,SAASt1C,GAAIijB,GAAG4iC,OAAOh4C,MAAM1C,MAAM,SAAU,cAC5DmqC,GAAG,QAASgiC,GAGdzpE,KAAKkmE,cAAgB4D,EAAWvzE,MAAMyJ,KAAKkmE,eAE3ClmE,KAAKmqE,oBAGLnqE,KAAKimE,cAAiBjmE,KAAKopE,WAAWQ,UAAU,QAAQjvE,KAAK0rE,GAG7DrmE,KAAKimE,cAAc4D,OAAOntE,SAE1B,IAAI0tE,EAAapqE,KAAKimE,cAAc8D,QAAQ1B,OAAO,QAGnDroE,KAAKimE,cAAgBmE,EAAW7zE,MAAMyJ,KAAKimE,eAE3CjmE,KAAKqqE,oBAGFrqE,KAAKupE,oBACJvpE,KAAKkmE,eACPlmE,KAAKkmE,cAAcoC,KAAK,YAAatoE,KAAKupE,mBACrCvpE,KAAKimE,eACPjmE,KAAKimE,cAAcqC,KAAK,YAAatoE,KAAKupE,qBAIhDv/B,EAAmBv2C,UAAUmzE,iBAAmB,SAAS5zE,GACxD,IAAIsc,EAAOtP,KAEP2V,EAAS,WACZrG,EAAK42D,cAAc0D,UAAU,UAC3BtB,KAAK,MAAO,SAAS//D,GAAO,OAAOA,EAAK46B,KACxCmlC,KAAK,MAAO,SAAS//D,GAAO,OAAOA,EAAKk7C,KAC1Cn0C,EAAK42D,cAAc0D,UAAU,QAC3BtB,KAAK,KAAM,SAAS//D,GAAO,OAAOA,EAAK46B,KACvCmlC,KAAK,KAAM,SAAS//D,GAAO,OAAOA,EAAKk7C,KACzCn0C,EAAK22D,cACHqC,KAAK,MAAM,SAASt/D,GAAO,OAAOA,EAAK/P,OAAOkqC,KAC9CmlC,KAAK,MAAM,SAASt/D,GAAO,OAAOA,EAAK/P,OAAOwqD,KAC9C6kB,KAAK,MAAM,SAASt/D,GAAO,OAAOA,EAAK9P,OAAOiqC,KAC9CmlC,KAAK,MAAM,SAASt/D,GAAO,OAAOA,EAAK9P,OAAOuqD,MAE9CzjD,KAAKme,WACPne,KAAKmnE,WAAWtwC,MAAM72B,KAAK62B,OAAO4Q,GAAG,OAAQ9xB,GAAQyI,MAAM,QAAQioD,MAAMrmE,KAAKqmE,OAG9ErmE,KAAKmnE,WAAWtwC,MAAM72B,KAAK62B,OAAO4Q,GAAG,MAAO9xB,GAAQyI,MAAM,QAAQioD,MAAMrmE,KAAKqmE,OAE3ErmE,KAAK62B,MAAM7hC,SACF,QAARhC,GAA0B,QAARA,EACpBgN,KAAKmnE,WAAW+B,UAED,UAARl2E,EACPgN,KAAKmnE,WAAW+B,UAGhBlpE,KAAKmnE,WAAWmD,MAAM,GAAGpB,YAK5Bl/B,EAAmBv2C,UAAU02E,kBAAoB,WAChD,IAAI76D,EAAOtP,KACRA,KAAKkmE,eACPlmE,KAAKkmE,cAAcqE,MAAK,SAAShiE,GAChC,IAAI6/C,EAAIhzC,GAAG4iC,OAAOh4C,MACdU,EAAM0nD,EAAEpQ,OAAO,UACnBt3C,EAAIs3C,OAAO,SAASt7C,SACpBgE,EAAIpD,MAAM,OAAQgS,EAAKk7D,cAAcjiE,IACrC7H,EAAI4nE,KAAK,IAAKh5D,EAAK06D,UAAUzhE,IAC7B7H,EAAI2oE,QAAQ,eAAe,SAAS9gE,GAAQ,OAA4C,GAArC+G,EAAK82D,WAAW95D,QAAQ/D,EAAKyE,OAChFtM,EAAI2nE,OAAO,SACTgB,QAAQ,wBAAwB,GAChCjwE,KAAKkW,EAAKm7D,YAAYliE,IACxB,IAAIpO,EAAMiuD,EAAEpQ,OAAO,QACnB79C,EAAI69C,OAAO,SAASt7C,SACpBvC,EAAImuE,KAAK,cAAe,UACtBA,KAAK,QAASh5D,EAAKm7D,YAAYliE,IAC/B+/D,KAAK,oBAAqB,WAC1BhrE,MAAM,cAAe,IAAMgS,EAAK4O,QAAU,KAC1C5gB,MAAM,cAAegS,EAAKo7D,kBAAkBniE,IAC5CjL,MAAM,YAAagS,EAAKq7D,gBAAgBpiE,IACxCjL,MAAM,OAAQgS,EAAKs7D,kBAAkBriE,IACrCnP,KAAKkW,EAAK46D,mBAAmB3hE,IAC7B8/D,OAAO,SACNgB,QAAQ,wBAAwB,GAChCjwE,KAAKkW,EAAKm7D,YAAYliE,QAK5ByhC,EAAmBv2C,UAAU42E,kBAAoB,WAChD,IAAI/6D,EAAOtP,KACRA,KAAKimE,eACPjmE,KAAKimE,cAAcsE,MAAK,SAASvhE,GAChC,IAAItI,EAAM0U,GAAG4iC,OAAOh4C,MACpBU,EAAIs3C,OAAO,SAASt7C,SACpBgE,EAAI4nE,KAAK,eAAgBh5D,EAAKu7D,aAAa7hE,IAC3CtI,EAAI4nE,KAAK,aAAch5D,EAAKw7D,aAAa9hE,IACzCtI,EAAIpD,MAAM,SAAUgS,EAAKy7D,cAAc/hE,IACvCtI,EAAI2nE,OAAO,SACTgB,QAAQ,wBAAwB,GAChCjwE,KAAKkW,EAAK07D,YAAYhiE,QAK3BghC,EAAmBv2C,UAAUq3E,aAAe,SAAS9rD,GACpD,GAAGA,EAAK,CACP,IAAIohC,EAAMpgD,KAAKirE,iBAAiBjsD,GAE3BsV,EAAMt0B,KAAK+qE,cAAc/rD,GAgB5B,OAdDhf,KAAK4lE,IAAIyC,OAAO,YAAYuB,UAAU,UACpCjvE,KAAK,MAFHuwE,IAGFnB,QAAQ1B,OAAO,cACfC,KAAK,KAAM5nB,QACX4nB,KAAK,UAAW,cAChBA,KAAK,OAAQ,IACbA,KAAK,OAAQ,GACbA,KAAK,cAAetoE,KAAKmrE,cAAcnsD,IACvCspD,KAAK,eAAgBtoE,KAAKorE,eAAepsD,IACzCspD,KAAK,SAAU,QACfA,KAAK,cAAe,kBACpBD,OAAO,YACNC,KAAK,IAAKloB,GACV9iD,MAAM,OAAQg3B,GACT,kBAGV,MAAO,IAIR0V,EAAmBv2C,UAAUk2E,aAAe,SAAS0B,GAEjDrrE,KAAKsmE,aAAe+E,EAAcr+D,IAAMhN,KAAKsrE,iBAC/CtrE,KAAKsrE,iBAAkB,EACvBtrE,KAAKmqE,sBAGLnqE,KAAKsrE,iBAAkB,EACvBtrE,KAAKsmE,YAAc+E,EAAcr+D,GACjChN,KAAKmqE,oBAEFnqE,KAAKiqE,SAASoB,KAMnBrhC,EAAmBv2C,UAAU83E,kBAAoB,SAASpoC,EAAGsgB,EAAGskB,GAC/D,MAAO,SAAUA,EAAe,eAAiB5kC,EAAI,IAAMsgB,EAAI,KAGhEzZ,EAAmBv2C,UAAU+3E,MAAQ,SAASC,GAE1CC,cAAgB1rE,KAAKsN,MAAQm+D,EAC7BE,eAAiB3rE,KAAKuN,OAASk+D,EAE/B,IAAIG,EAAW5rE,KAAKuN,OAASo+D,eAEzBE,EAAW7rE,KAAKsN,MAAQo+D,cAExBp8D,EAAOtP,KACRA,KAAKkmE,eACPlmE,KAAKkmE,cAAc4F,aACfC,SAAS,KAAKzD,KAAK,aAAa,SAAS//D,GAAO,OAAO+G,EAAKi8D,kBAAkBM,EAASD,EAASH,MAClGzrE,KAAKimE,eACJjmE,KAAKimE,cAAc6F,aAClBC,SAAS,KAAKzD,KAAK,aAAa,SAAS//D,GAAO,OAAO+G,EAAKi8D,kBAAkBM,EAASD,EAASH,MACxGzrE,KAAK+nE,aAAe0D,EACpBzrE,KAAK4lE,IAAIgE,UAAU,UAAUtB,KAAK,cAAetoE,KAAKmrE,iBACnD7C,KAAK,eAAgBtoE,KAAKorE,mBAI9BphC,EAAmBv2C,UAAUu4E,WAAa,WAIZ,IAAtBhsE,KAAK62B,MAAM7hC,SAIfi3E,MAAQ72D,GAAGrO,IAAI/G,KAAK62B,MAAMre,KAAI,SAASrmB,GAAI,OAAOA,EAAEgxC,MACpD+oC,MAAQ92D,GAAGrO,IAAI/G,KAAK62B,MAAMre,KAAI,SAASrmB,GAAI,OAAOA,EAAEsxD,MACpD0oB,MAAQ/2D,GAAGpO,IAAIhH,KAAK62B,MAAMre,KAAI,SAASrmB,GAAI,OAAOA,EAAEgxC,MACpDipC,MAAQh3D,GAAGpO,IAAIhH,KAAK62B,MAAMre,KAAI,SAASrmB,GAAI,OAAOA,EAAEsxD,MAGpD4oB,UAAYF,MAAQF,MACpBK,WAAaF,MAAQF,MAErBG,WAAwB,KACxBC,YAA0B,KAE1BC,YAAcvsE,KAAKsN,MAAQ++D,UAC3BG,aAAexsE,KAAKuN,OAAS++D,WAI7Bb,UAAY7iE,KAAK7B,IAAIwlE,YAAaC,cAC/Bf,UAAY,GACdzrE,KAAKwrE,MAAMC,aAKhBzhC,EAAmBv2C,UAAUg5E,SAAW,SAAS/C,GAChD1pE,KAAK0sE,YAAa,EAElB1sE,KAAK2sE,IAAO3sE,KAAKsN,MAAM,EAAEo8D,EAAWvmC,EACpCnjC,KAAK4sE,IAAO5sE,KAAKuN,OAAO,EAAEm8D,EAAWjmB,EAErCzjD,KAAKkmE,cAAcoC,KAAK,YAAa,aAActoE,KAAK2sE,IAAM,IAAM3sE,KAAK4sE,IAAO,KAChF5sE,KAAKimE,cAAcqC,KAAK,YAAa,aAActoE,KAAK2sE,IAAM,IAAM3sE,KAAK4sE,IAAO,KAChF5sE,KAAK6sE,cAAcvE,KAAK,YAAa,aAActoE,KAAK2sE,IAAM,IAAM3sE,KAAK4sE,IAAO,MAIjF5iC,EAAmBv2C,UAAU8yE,iBAAmB,SAASn1D,GAGxDpR,KAAKke,QAAW9M,GAAWA,EAAO6M,aAAgB7M,EAAO6M,aAAe,sBACxEje,KAAKye,gBAAkBrN,QAA4C,IAA3BA,EAAOqN,kBAAkCrN,EAAOqN,iBACxFze,KAAKme,YAAc/M,QAAwC,IAAvBA,EAAO+M,cAA8B/M,EAAO+M,aAChFne,KAAKqe,aAAajN,QAAuC,IAAtBA,EAAOiN,cAA6BjN,EAAOiN,YAC9Ere,KAAKue,eAAenN,QAAyC,IAAxBA,EAAOmN,gBAA+BnN,EAAOmN,cAClFve,KAAKsN,SAAS8D,IAAUA,EAAO9D,UAAU8D,EAAO9D,QAChDtN,KAAKuN,UAAU6D,IAAUA,EAAO7D,WAAW6D,EAAO7D,SAClDvN,KAAKkmB,SAAW,CACflH,KAAM,CACLjlB,KAAM,OACN2lB,SAAWtO,GAAUA,EAAO4N,MAAQ5N,EAAO4N,KAAKU,SAAWtO,EAAO4N,KAAKU,SAAW,GAClFI,MAAQ1O,GAAUA,EAAO4N,MAAQ5N,EAAO4N,KAAKc,MAAQ1O,EAAO4N,KAAKc,MAAQ,CAAExS,MAAO,GAAIC,OAAQ,IAC9FqS,YAAYxO,GAAUA,EAAO4N,MAAQ5N,EAAO4N,KAAKY,YAAYxO,EAAO4N,KAAKY,UACzEJ,MAAQpO,GAAUA,EAAO4N,MAAQ5N,EAAO4N,KAAKQ,MAAQpO,EAAO4N,KAAKQ,MAAQ,CAAC,IAAI,IAAI,KAClFG,OAASvO,GAAUA,EAAO4N,MAAQ5N,EAAO4N,KAAKW,OAASvO,EAAO4N,KAAKW,OAAS,GAC5EJ,KAAOnO,GAAUA,EAAO4N,MAAQ5N,EAAO4N,KAAKO,KAAOnO,EAAO4N,KAAKO,KAAO,GAEvEhX,KAAM,CACLxO,KAAM,OACN8+B,OAASznB,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKswB,OAASznB,EAAO7I,KAAKswB,OAAS,GAC5EpZ,OAASrO,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKkX,OAASrO,EAAO7I,KAAKkX,QAAU,GAC7EI,gBAAkBzO,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKsX,gBAAkBzO,EAAO7I,KAAKsX,gBAAkB,GACvGL,MAAQpO,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKiX,MAAQpO,EAAO7I,KAAKiX,MAAQ,CAAC,EAAE,IAAI,KAChFpiB,KAAM,CACLuiB,OAASvO,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKnL,MAAQgU,EAAO7I,KAAKnL,KAAKuiB,OAASvO,EAAO7I,KAAKnL,KAAKuiB,OAAS,IAC1GH,MAAQpO,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKnL,MAAQgU,EAAO7I,KAAKnL,KAAKoiB,MAAQpO,EAAO7I,KAAKnL,KAAKoiB,MAAQ,CAAC,EAAE,EAAE,KAC5G0kD,QAAU9yD,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKnL,MAAQgU,EAAO7I,KAAKnL,KAAK8mE,QAAU9yD,EAAO7I,KAAKnL,KAAK8mE,QAAU,IAC7G3kD,KAAOnO,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKnL,MAAQgU,EAAO7I,KAAKnL,KAAKmiB,KAAOnO,EAAO7I,KAAKnL,KAAKmiB,KAAO,GACpGutD,QAAU17D,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKnL,MAAQgU,EAAO7I,KAAKnL,KAAK0vE,QAAU17D,EAAO7I,KAAKnL,KAAK0vE,QAAU,yBAE9G1zE,KAAM,CACLomB,MAAQpO,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKnP,MAAQgY,EAAO7I,KAAKnP,KAAKomB,MAAQpO,EAAO7I,KAAKnP,KAAKomB,MAAQ,CAAC,EAAE,EAAE,GAC5GD,KAAOnO,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKnL,MAAQgU,EAAO7I,KAAKnP,KAAKmmB,KAAOnO,EAAO7I,KAAKnP,KAAKmmB,KAAO,IAErGQ,OAAQ,CACPP,MAAQpO,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKwX,QAAU3O,EAAO7I,KAAKwX,OAAOP,MAAQpO,EAAO7I,KAAKwX,OAAOP,MAAQ,CAAC,EAAE,EAAE,GAClHD,KAAOnO,GAAUA,EAAO7I,MAAQ6I,EAAO7I,KAAKwX,QAAU3O,EAAO7I,KAAKwX,OAAOR,KAAOnO,EAAO7I,KAAKwX,OAAOR,KAAO,OAS9GyqB,EAAmBv2C,UAAUs5E,cAAgB,SAASxkE,GACrD,IAAIykE,EAAQzkE,GAAQA,EAAKgX,KAAOhX,EAAKgX,KAAO,EAI5C,OAHGhX,EAAKyE,IAAMhN,KAAKsmE,aAAetmE,KAAKsrE,kBACtC0B,GAAc,GAERA,GAGRhjC,EAAmBv2C,UAAUu2E,UAAY,SAASzhE,GACjD,IAAIswB,EAAUtwB,GAAQA,EAAKswB,OAAStwB,EAAKswB,OAAS74B,KAAKkmB,SAAS3d,KAAKswB,OACjElmC,EAAKqN,KAAK+nE,aAAen/D,KAAK7B,IAAI/G,KAAK+nE,aAAelvC,EAAQA,GAAUA,EAE5E,OADAlmC,GAAQqN,KAAK+sE,cAAcxkE,IAI5ByhC,EAAmBv2C,UAAUq1E,mBAAqB,SAASvgE,GAC1D,IAAI0kE,EAAU1kE,GAAQA,EAAKsX,gBAAkBtX,EAAKsX,gBAAkB7f,KAAKkmB,SAAS3d,KAAKsX,gBAEvF,OADS7f,KAAK+nE,aAAen/D,KAAK7B,IAAI/G,KAAK+nE,aAAekF,EAAQA,GAAUA,GACjEjtE,KAAK+sE,cAAcxkE,IAG/ByhC,EAAmBv2C,UAAUm1E,UAAY,SAASrgE,GACjD,IAAIkX,EAAUlX,GAAQA,EAAKkX,OAASlX,EAAKkX,OAASzf,KAAKkmB,SAAS3d,KAAKkX,OACrE,GAAGA,EAAS,EACX,IAAItX,EAAKnI,KAAK+nE,aAAen/D,KAAK5B,IAAIhH,KAAK+nE,aAAetoD,EAAQA,GAAUA,OAGxEtX,EAAKnI,KAAK+nE,aAAen/D,KAAK7B,IAAI/G,KAAK+nE,aAAetoD,EAAQA,GAAUA,EAE7E,OAAOtX,EAAInI,KAAK+sE,cAAcxkE,IAG/ByhC,EAAmBv2C,UAAUg1E,gBAAkB,SAASz/D,GACvD,IAAIkkE,EAAgBlkE,GAAQA,EAAK0W,SAAW1W,EAAK0W,SAAW1f,KAAKkmB,SAASlH,KAAKU,SAE/E,OADS1f,KAAK+nE,aAAen/D,KAAK7B,IAAI/G,KAAK+nE,aAAemF,EAAcA,GAAgBA,GAIzFljC,EAAmBv2C,UAAUk3E,gBAAkB,SAASpiE,GACvD,OAAGA,GAAQA,EAAKnL,MAAQmL,EAAKnL,KAAKmiB,KAC1BhX,EAAKnL,KAAKmiB,KAAO,KAEjBvf,KAAK+sE,cAAcxkE,GAAQ,MAGpCyhC,EAAmBv2C,UAAU+2E,cAAgB,SAASjiE,GACrD,IAAI+rB,EAAO/rB,GAAQA,EAAKiX,MAAQjX,EAAKiX,MAAQxf,KAAKkmB,SAAS3d,KAAKiX,MAChE,OAAGxf,KAAKiqE,SAAS1hE,GACT,QAAQ+rB,EAAI/pB,KAAK,KAAK,SAGtB,OAAO+pB,EAAI/pB,KAAK,KAAK,KAI9By/B,EAAmBv2C,UAAU05E,YAAc,SAAS5kE,GAEnD,OADWA,GAAQA,EAAKnL,MAAQmL,EAAKnL,KAAK0vE,QAAUvkE,EAAKnL,KAAK0vE,QAAU9sE,KAAKkmB,SAAS3d,KAAKnL,KAAK0vE,SAIjG9iC,EAAmBv2C,UAAUy2E,mBAAoB,SAAS3hE,GACzD,OAAQA,GAAQA,EAAKnL,MAAQmL,EAAKnL,KAAK8mE,QAAU37D,EAAKnL,KAAK8mE,QAAUlkE,KAAKkmB,SAAS3d,KAAKnL,KAAK8mE,SAG9Fl6B,EAAmBv2C,UAAUi3E,kBAAoB,SAASniE,GACzD,OAAQA,GAAQA,EAAKnL,MAAQmL,EAAKnL,KAAKuiB,OAASpX,EAAKnL,KAAKuiB,OAAS3f,KAAKkmB,SAAS3d,KAAKnL,KAAKuiB,QAG5FqqB,EAAmBv2C,UAAUm3E,kBAAoB,SAASriE,GACzD,IAAI+rB,EAAO/rB,GAAQA,EAAKnL,MAAQmL,EAAKnL,KAAKoiB,MAAQjX,EAAKnL,KAAKoiB,MAAQxf,KAAKkmB,SAAS3d,KAAKnL,KAAKoiB,MAC5F,OAAGxf,KAAKiqE,SAAS1hE,GACT,QAAQ+rB,EAAI/pB,KAAK,KAAK,SAGtB,OAAO+pB,EAAI/pB,KAAK,KAAK,KAI9By/B,EAAmBv2C,UAAUs3E,cAAgB,SAAS/rD,GACrD,IAAIsV,EAAOtV,GAAQA,EAAKQ,MAAQR,EAAKQ,MAAQxf,KAAKkmB,SAASlH,KAAKQ,MAC5DG,EAAUX,GAAQA,EAAKW,OAASX,EAAKW,OAAS3f,KAAKkmB,SAASlH,KAAKW,OAErE,MAAO,QADE2U,EAAI+B,OAAO,CAAC1W,IACHpV,KAAK,KAAK,KAG7By/B,EAAmBv2C,UAAUw3E,iBAAmB,SAASjsD,GACxD,OAAGA,GAAQA,EAAKY,UACR,oBAED,oBAIRoqB,EAAmBv2C,UAAUo3E,aAAe,SAAS7hE,GAEpD,OADSA,GAAQA,EAAKuW,KAAOvW,EAAKuW,KAAOvf,KAAKkmB,SAASlH,KAAKO,MAK7DyqB,EAAmBv2C,UAAUg3E,YAAc,SAASliE,GACnD,OAAGA,GAAQA,EAAKnP,KAAamP,EAAKnP,KAC3BmP,EAAKyE,IAGbg9B,EAAmBv2C,UAAUu3E,YAAc,SAAShsD,GACnD,OAAGA,GAAQA,EAAK5lB,KAAa4lB,EAAK5lB,KAC/B4lB,GAAQA,EAAKhS,GAAWgS,EAAKhS,GACzB,IAGRg9B,EAAmBv2C,UAAU03E,cAAgB,SAASnsD,GACrD,IAAIoB,EAAKpB,GAAQA,EAAKc,OAASd,EAAKc,MAAMxS,MAAQ0R,EAAKc,MAAMxS,MAAQtN,KAAKkmB,SAASlH,KAAKc,MAAMxS,MAC9F,OAAQtN,KAAK+nE,aAAen/D,KAAK7B,IAAI/G,KAAK+nE,aAAe3nD,EAAGA,GAAKA,GAGlE4pB,EAAmBv2C,UAAU23E,eAAiB,SAASpsD,GACtD,IAAIoB,EAAKpB,GAAQA,EAAKc,OAASd,EAAKc,MAAMvS,OAASyR,EAAKc,MAAMvS,OAASvN,KAAKkmB,SAASlH,KAAKc,MAAMvS,OAChG,OAAQvN,KAAK+nE,aAAen/D,KAAK7B,IAAI/G,KAAK+nE,aAAe3nD,EAAGA,GAAKA,GAGlE4pB,EAAmBv2C,UAAU25E,gBAAkB,SAAS7kE,EAAMS,GAC7D,OAAOA,EAAK9P,OAAO8T,KAAOzE,EAAKyE,IAAMhE,EAAK/P,OAAO+T,KAAOzE,EAAKyE,IAG9Dg9B,EAAmBv2C,UAAUw2E,SAAW,SAAS1hE,GAChD,OAAGvI,KAAKxJ,QAAUwJ,KAAKxJ,OAAO62E,OAASrtE,KAAKxJ,OAAO62E,MAAMC,WACL,GAAhDttE,KAAKxJ,OAAO62E,MAAMC,SAAShhE,QAAQ/D,EAAKyE,KAC1CzE,EAAKxO,KAAO,QACL,GAGFwO,EAAKxO,MAAqB,UAAbwO,EAAKxO,MAe1BnI,EAAOD,QAAUq4C,G,cCxtBjB,SAASiH,EAAmB4F,EAAMt7C,GACjCyE,KAAKzE,GAAKA,EACVyE,KAAK62C,KAAO,GAEZ,IADA,IAAIC,EAAQ,GACJjlD,EAAI,EAAGA,EAAEglD,EAAK7hD,OAAQnD,IAAI,CACjC,IAAI,IAAIy4B,EAAI,EAAGA,EAAEwsB,EAAM9hD,OAAQs1B,IAC3B1vB,KAAKC,UAAUg8C,EAAKhlD,IAAO+I,KAAKC,UAAUi8C,EAAMxsB,IAEpDwsB,EAAM9rC,KAAK6rC,EAAKhlD,IAEjB,IAAQA,EAAI,EAAGA,EAAEilD,EAAM9hD,OAAQnD,IAC9BmO,KAAK62C,KAAK7rC,KAAK,IAAIuiE,EAAkBz2B,EAAMjlD,GAAImO,KAAKzE,KAsBtD,SAASgyE,EAAkBnlE,EAAK7M,GAC/ByE,KAAKzE,GAAKA,EACVyE,KAAKoI,IAAMA,EApBZ6oC,EAAmBx9C,UAAU8a,SAAW,SAASi/D,GAChD,IAAIzwC,EAAOzmC,SAASgD,cAAc,OAClCyjC,EAAKxjC,aAAa,QAAS,6CAC3B,IAAIk0E,EAAan3E,SAASgD,cAAc,OACxCm0E,EAAWl0E,aAAa,QAAS,+BACjCwjC,EAAKrjC,YAAY+zE,GACjB,IAAIxzE,EAAM+F,KAAK62C,KAAK7hD,QAAUgL,KAAK62C,KAAK7hD,OAAS,EAAI,uBAAyB,uBAC3Ew4E,IAAavzE,GAAO,IAAMuzE,GAC7BC,EAAW/zE,YAAYpD,SAASuD,eAAeI,IAC/C,IAAI,IAAIpI,EAAI,EAAGA,EAAEmO,KAAK62C,KAAK7hD,OAAQnD,IAClCkrC,EAAKrjC,YAAYsG,KAAK62C,KAAKhlD,GAAG0c,YAE/B,OAAOwuB,GAWRwwC,EAAkB95E,UAAU8a,SAAW,WACtC,IAAIwuB,EAAOzmC,SAASgD,cAAc,OAElC,GADAyjC,EAAKxjC,aAAa,QAAS,sBACxByG,KAAKoI,IAAI,SAAS,CACpB,IAAInO,EAAM+F,KAAKoI,IAAI,gBAAkB,CAAC,SAAU,IAChD20B,EAAKrjC,YAAYsG,KAAK0tE,iBAAiB1tE,KAAKoI,IAAI,SAAUnO,IAE3D,IAAI,IAAI0H,KAAQ3B,KAAKoI,IACT,eAARzG,GAAiC,SAARA,GAC3Bo7B,EAAKrjC,YAAYsG,KAAK0tE,iBAAiB/rE,EAAM3B,KAAKoI,IAAIzG,KAGxD,OAAOo7B,GAGRwwC,EAAkB95E,UAAUi6E,iBAAmB,SAAS/rE,EAAMjN,GAC7D,IAAI60C,EAAOjzC,SAASgD,cAAc,OAClCiwC,EAAKhwC,aAAa,QAAS,+BAC3B,IAAIo0E,EAAOr3E,SAASgD,cAAc,QAClCq0E,EAAKp0E,aAAa,QAAS,oDAC3Bo0E,EAAKj0E,YAAYpD,SAASuD,eAAe8H,IACzC,IAAIo7B,EAAOzmC,SAASgD,cAAc,QAKlC,OAJAyjC,EAAKxjC,aAAa,QAAS,qCAC3BwjC,EAAKrjC,YAAYpD,SAASuD,eAAenF,EAAI,YAC7C60C,EAAK7vC,YAAYi0E,GACjBpkC,EAAK7vC,YAAYqjC,GACVwM,GAGR33C,EAAOD,QAAQs/C,G,gBClEf,IAAM75C,EAAiBtD,EAAQ,GACzBolC,EAAYplC,EAAQ,IACpB85E,EAAa95E,EAAQ,IACrBk3C,EAAel3C,EAAQ,IAE7B,SAASo9C,EAAoB31C,EAAIlD,GAChC2H,KAAKzE,GAAKA,EACVyE,KAAK3H,QAAUA,EACf2H,KAAK6tE,MAAQ,GACb7tE,KAAK8tE,UAAW,EAChB9tE,KAAK+tE,eAAgB,EACrB/tE,KAAKguE,KAAO,GACZhuE,KAAKo5B,UAAY9iC,SAASgD,cAAc,OACxC0G,KAAKo5B,UAAU7/B,aAAa,QAAS,uBAGtC23C,EAAoBz9C,UAAUw6E,eAAiB,WAM9C,MALW,CACVt0C,WAAW,EACXC,WAAW,EACXC,YAAY,IAKdqX,EAAoBz9C,UAAUy6E,qBAAuB,WAOpD,MANW,CACVj0C,WAAY,OACZC,YAAY,EACZL,YAAY,EACZ9zB,QAAS,CAAC,IAAI3O,EAAe9C,KAAKkmB,SAKpC02B,EAAoBz9C,UAAU06E,gBAAkB,WAC/C,IAAIC,EAAQ,IAAIl1C,EAAUl5B,KAAKzE,GAAG0V,QAAQ5Y,QAAQ2H,KAAKiuE,kBAEvD,OADAG,EAAMtxC,QAAQ,IAAI1lC,EAAe9C,KAAKgmB,MAASta,KAAKkuE,wBAC7CE,GAIRl9B,EAAoBz9C,UAAU46E,aAAe,WAC5C,IAAID,EAAQpuE,KAAKmuE,kBAEjB,OADAnuE,KAAK6tE,MAAM7iE,KAAKojE,GACTA,GAGRl9B,EAAoBz9C,UAAU66E,cAAgB,SAASzuE,GACtD,IAAIuuE,EAAQ,IAAIR,EAAW5tE,KAAKzE,GAAG0V,OAAQpR,GAE3C,OADAG,KAAK6tE,MAAM7iE,KAAKojE,GACTA,GAGRl9B,EAAoBz9C,UAAU86E,iBAAmB,WAChD,IAAIH,EAAQ,IAAIR,EAAW5tE,KAAKzE,GAAG0V,QACnCjR,KAAKwuE,cAAcJ,IAGpBl9B,EAAoBz9C,UAAUg7E,gBAAkB,WAC/C,IAAIL,EAAQ,IAAIl1C,EAAUl5B,KAAKzE,GAAG0V,QAAQ5Y,QAAQ,CAACshC,WAAW,EAAMC,WAAW,IAC/E55B,KAAKwuE,cAAcJ,IAGpBl9B,EAAoBz9C,UAAUi7E,sBAAwB,WACrD1uE,KAAK8tE,SAAW,IAAI9iC,EAAahrC,KAAKzE,GAAG0V,QAAQ5Y,QAAQ,CAACshC,WAAW,EAAMC,WAAW,IACtF55B,KAAK+tE,cAAgB,YAGtB78B,EAAoBz9C,UAAUk7E,mBAAqB,WAClD,IAAIP,EAAQ,IAAIpjC,EAAahrC,KAAKzE,GAAG0V,QAAQ5Y,QAAQ,CAACshC,WAAW,EAAMC,WAAW,IAClF55B,KAAKwuE,cAAcJ,IAGpBl9B,EAAoBz9C,UAAU+6E,cAAgB,SAASJ,GAC1CpuE,KAAK6tE,MAAM7tE,KAAK6tE,MAAM74E,OAAO,GAMxCgL,KAAK6tE,MAAM7iE,KAAKojE,GAEjB,IAAIQ,EAAOR,EAAM7/D,WACbsgE,EAAO7uE,KAAK8uE,gBAChBF,EAAKhN,QAAQiN,GACb7uE,KAAK+uE,QAAQr1E,YAAYk1E,IAG1B19B,EAAoBz9C,UAAU8a,SAAW,SAAS1O,GAAE,WACnDzI,EAAejD,YAAYyH,eAAeoE,KAAKo5B,WAC3Cp5B,KAAK+uE,UAAS/uE,KAAK+uE,QAAU/uE,KAAKgvE,eACtChvE,KAAKo5B,UAAU1/B,YAAYsG,KAAK+uE,SAChC/uE,KAAKivE,WAAajvE,KAAKkoC,iBAEvB,IAAIgnC,EAAgB54E,SAASgD,cAAc,UAK3C,OAJC41E,EAAc31E,aAAa,QAAS,mCACpC21E,EAAcx1E,YAAYpD,SAASuD,eAAe,kBAClDq1E,EAAc1uE,iBAAiB,SAAS,kBAAM,EAAKiuE,qBACpDzuE,KAAKo5B,UAAU1/B,YAAYw1E,GACpBlvE,KAAKo5B,WAGb8X,EAAoBz9C,UAAUu7E,YAAc,SAASnvE,GACpDG,KAAKmvE,SAAW74E,SAASgD,cAAc,OACvC0G,KAAKmvE,SAAS51E,aAAa,QAAS,wBACpC,IAAI,IAAI1H,EAAI,EAAGA,EAAEmO,KAAK6tE,MAAM74E,OAAQnD,IAAI,CACvC,IAAIisC,EAAK99B,KAAK6tE,MAAMh8E,GAAG0c,WACnBsgE,EAAO7uE,KAAK8uE,gBAChBhxC,EAAG8jC,QAAQiN,GACX7uE,KAAKmvE,SAASz1E,YAAYokC,GAEvB99B,KAAK8tE,WACR9tE,KAAK8tE,SAAW9tE,KAAKmuE,mBAEtB,IAAIiB,EAAMpvE,KAAK8tE,SAASv/D,WACpB8gE,EAAQrvE,KAAKsvE,mBAKjB,OAJAtvE,KAAK8tE,SAASyB,UAAYF,EAC1BrvE,KAAK8tE,SAASiB,QAAUK,EACxBA,EAAIxN,QAAQyN,GACZrvE,KAAKmvE,SAASz1E,YAAY01E,GACnBpvE,KAAKmvE,UAGbj+B,EAAoBz9C,UAAU+7E,WAAa,SAAS/jC,EAAMvnC,GACzD9M,EAAejD,YAAYyH,eAAe6vC,EAAKsjC,SAC/CtjC,EAAKsjC,QAAQr1E,YAAY+xC,EAAK8jC,WAC3BvvE,KAAK6tE,MAAMh8E,IACbmO,KAAK6tE,MAAM33D,OAAOrkB,EAAG,IAIvBq/C,EAAoBz9C,UAAUg8E,SAAW,SAAShkC,KAQlDyF,EAAoBz9C,UAAUi8E,SAAW,SAASjkC,KAMlDyF,EAAoBz9C,UAAUq7E,cAAgB,WAG7C,OAFUx4E,SAASgD,cAAc,QAKlC43C,EAAoBz9C,UAAU67E,iBAAmB,WAGhD,OAFUh5E,SAASgD,cAAc,QAKlC43C,EAAoBz9C,UAAUy0C,eAAiB,SAASgnB,GAAM,WACzDh9D,EAAIoE,SAASgD,cAAc,OAE/B,GADApH,EAAEqH,aAAa,QAAS,gCACZ,OAAT21D,EAAe,CACjB,IAAIggB,EAAgB54E,SAASgD,cAAc,UAC3C41E,EAAc31E,aAAa,QAAS,mCACpC21E,EAAcx1E,YAAYpD,SAASuD,eAAe,eAElD3H,EAAEwH,YAAYw1E,GACd,IAAIS,EAAkBr5E,SAASgD,cAAc,UAC7Cq2E,EAAgBp2E,aAAa,QAAS,mCACtCo2E,EAAgBj2E,YAAYpD,SAASuD,eAAe,WAEpD3H,EAAEwH,YAAYi2E,GACd,IAAIC,EAAet5E,SAASgD,cAAc,UAC1Cs2E,EAAar2E,aAAa,QAAS,mCACnCq2E,EAAal2E,YAAYpD,SAASuD,eAAe,mBACjD+1E,EAAapvE,iBAAiB,SAAS,kBAAM,EAAKkuE,2BAClDx8E,EAAEwH,YAAYk2E,OAEV,CACJ,IAAIzyC,EAAiB7mC,SAASgD,cAAc,UAC5C6jC,EAAe5jC,aAAa,QAAS,mCACrC4jC,EAAezjC,YAAYpD,SAASuD,eAAe,SACnD3H,EAAEwH,YAAYyjC,GACd,IAAIC,EAAkB9mC,SAASgD,cAAc,UAC7C8jC,EAAgB7jC,aAAa,QAAS,mCACtC6jC,EAAgB1jC,YAAYpD,SAASuD,eAAe,UACpD3H,EAAEwH,YAAY0jC,GACd,IAAIC,EAAqB/mC,SAASgD,cAAc,UAChD+jC,EAAmB9jC,aAAa,QAAS,mCACzC8jC,EAAmB3jC,YAAYpD,SAASuD,eAAe,aACvD3H,EAAEwH,YAAY2jC,GAEf,OAAOnrC,GAIRN,EAAOD,QAAQu/C,G,6CCrMf,IAAM95C,eAAiBtD,oBAAQ,GACzBsZ,oBAAsBtZ,oBAAQ,GAC9BqZ,MAAQrZ,oBAAQ,GAEtB,SAAS85E,WAAW38D,EAAQpE,GAC3B7M,KAAKiR,OAASA,EACdjR,KAAK6M,OAAUA,GAAkB,GACjC7M,KAAKo5B,UAAY9iC,SAASgD,cAAc,OACrC0G,KAAKo5B,UAAU7/B,aAAa,QAAS,6BAGzCq0E,WAAWn6E,UAAUkqC,MAAQ,WAC5B,MAAsB,IAAf39B,KAAK6M,QAIb+gE,WAAWn6E,UAAUkpC,YAAc,SAASphC,GAC3C,IAAIiH,EAAQ,IAAI4K,oBAAoB,OAAQ,QACzCpN,KAAK6M,QACPrK,EAAMmL,SAAS3N,KAAK6M,QAErB,IAAIyC,EAAOtP,KAIX,OAHAwC,EAAMyM,OAAS,SAASnP,GACvBwP,EAAKugE,cAAc/vE,EAAMvE,IAEnBiH,GAIRorE,WAAWn6E,UAAUo8E,cAAgB,SAAShjE,OAAQtR,IAC/CA,IAAIA,GAAGqiC,gBACV59B,KAAK6M,OAASA,OACjB,IAAIoE,OAASjR,KAAKiR,OACd3c,KAAO8C,eAAe9C,KAC1B,IACC,IAAI6+B,IAAMpzB,KAAK8M,QACZsmB,KACFnzB,KAAKw9B,aAAarK,KAMpB,MAAMlzB,GACF1E,IAAIA,GAAG6iC,UAAUn+B,GACpBR,QAAQ2O,MAAMnO,KAIhB2tE,WAAWn6E,UAAUq8E,cAAgB,WACjC,IAAI71E,EAAM3D,SAASuD,eAAe,sBAClCmG,KAAKw9B,aAAavjC,IAGtB2zE,WAAWn6E,UAAU+pC,aAAe,SAASrK,GACzC/7B,eAAejD,YAAYyH,eAAeoE,KAAK68B,WAC/C78B,KAAK68B,UAAUnjC,YAAYy5B,IAI/By6C,WAAWn6E,UAAU8a,SAAW,SAAShT,GAYxC,OAXAyE,KAAKo5B,UAAU1/B,YAAYyT,MAAMhU,aAAa,iBAC9C6G,KAAKwC,MAAQxC,KAAK28B,YAAYphC,GAC9ByE,KAAKo5B,UAAU1/B,YAAYsG,KAAKwC,MAAM+L,YACtCvO,KAAK68B,UAAYvmC,SAASgD,cAAc,OACxC0G,KAAK68B,UAAUtjC,aAAa,QAAS,2BAGlCyG,KAAKxJ,QACDwJ,KAAK68B,UAAUnjC,YAAYsG,KAAKxJ,QAEvCwJ,KAAKo5B,UAAU1/B,YAAYsG,KAAK68B,WACzB78B,KAAKo5B,WAIbxnC,OAAOD,QAAUi8E,Y,qPCxEjB,IAAM9J,EAAqBhwE,EAAQ,KAC7BqZ,EAAMrZ,EAAQ,GACdsD,EAAiBtD,EAAQ,GAE/B,SAASq9C,EAAqB51C,GAC7ByE,KAAKzE,GAAKA,EACVyE,KAAKhN,KAAO,OACZgN,KAAKtH,OAAS,SACdsH,KAAK+vE,uBAAwB,EAC7B/vE,KAAKgwE,IAAM,IAAIlM,EAAmB9jE,KAAKzE,GAAG0V,QAC1C,IAAI3c,EAAO8C,EAAe9C,KAC1B0L,KAAKlH,KAAOxE,EAGb68C,EAAqB19C,UAAUw8E,cAAgB,WAC9C,IAAI31D,EAAQta,KAAKlH,KAAKwhB,QAEtB,OADAA,EAAMqD,OAAO,WAAWra,OAAO,eACxBgX,GAGR62B,EAAqB19C,UAAUy8E,aAAe,WAC7C,IAAI11D,EAAQxa,KAAKlH,KAAK0hB,QACtBA,EAAMvhB,OAAO,aAIb,OAFAuhB,EAAMwE,KAAK,YAAa,YAAY5hB,KADvB,CAAEoiB,MAAO,CAAC,IAAI,IAAI,IAAKG,OAAQ,IAAKukD,QAAS,IAAU3kD,KAAK,IAEzE/E,EAAMlN,MAAM,MACLkN,GAGR22B,EAAqB19C,UAAU08E,WAAa,WAC3CnwE,KAAKhN,KAAO,OACZgN,KAAKowE,cAGNj/B,EAAqB19C,UAAU48E,gBAAkB,WAChDrwE,KAAKlE,KAAKpC,YAAYyT,EAAMhU,aAAa,YACzC6G,KAAKswE,iBAAiBtwE,KAAKlH,KAAKwhB,SAChCta,KAAKswE,iBAAiBtwE,KAAKlH,KAAK0hB,SAChCxa,KAAKlE,KAAKpC,YAAYyT,EAAMhU,aAAa,eACzC6G,KAAKuwE,oBAAoBvwE,KAAKlH,KAAKwhB,SACnCta,KAAKuwE,oBAAoBvwE,KAAKlH,KAAK0hB,UAGpC22B,EAAqB19C,UAAU88E,oBAAsB,SAASn/D,GAC7DpR,KAAKwwE,OAAO19C,QACZ,IAAIx/B,EAAI0M,KAAKgwE,IAAIp7B,WAAW50C,KAAKwwE,OAAQp/D,GAAQ,GACjDpR,KAAKlE,KAAKpC,YAAYpG,IAGvB69C,EAAqB19C,UAAU68E,iBAAmB,SAASl/D,GAC1DpR,KAAKywE,SAAS39C,QACd,IAAIx/B,EAAI0M,KAAKgwE,IAAIp7B,WAAW50C,KAAKywE,SAAUr/D,GAAQ,GACnDpR,KAAKlE,KAAKpC,YAAYpG,IAGvB69C,EAAqB19C,UAAUi9E,iBAAmB,WAAU,WACvDjyE,EAAQuB,KAAKlH,KAAK0kD,KAAKx9C,KAAKzE,GAAG0V,OAAOwY,iBAAiByC,SACpDttB,MAAM,IACNE,MAAM,GACNU,mBACA8P,EAAOtP,KACXvB,EAAMk2B,QAAQ30B,KAAKzE,GAAG0V,QAAQ5V,MAAK,SAACu5B,GACtC,IAAImvC,EAAO,IAAI3sE,EAAe/C,WAAWugC,EAASn2B,GAClD6Q,EAAKkhE,OAASzM,EACd,EAAKjoE,KAAKpC,YAAYyT,EAAMhU,aAAa,qCACzC,IAAImhB,EAAQhL,EAAK2gE,gBACbz1D,EAAQlL,EAAM4gE,eAClB5gE,EAAKihE,oBAAoBj2D,GACzBhL,EAAKihE,oBAAoB/1D,OAI3B22B,EAAqB19C,UAAUk9E,cAAgB,WAC9C,IAAIlyE,EAAQuB,KAAKlH,KAAK0kD,KAAKx9C,KAAKzE,GAAG0V,OAAOwY,iBAAiByC,SACpDttB,MAAM,IACNE,MAAM,GACNE,gBACAsQ,EAAOtP,KACXvB,EAAMk2B,QAAQ30B,KAAKzE,GAAG0V,QAAQ5V,MAAK,SAACu5B,GACtC,IAAImvC,EAAO,IAAI3sE,EAAe/C,WAAWugC,EAASn2B,GAClD6Q,EAAKmhE,SAAW1M,EAChBz0D,EAAKxT,KAAKpC,YAAYyT,EAAMhU,aAAa,kCACzC,IAAImhB,EAAQhL,EAAK2gE,gBACbz1D,EAAQlL,EAAM4gE,eAClB5gE,EAAKghE,iBAAiBh2D,GACtBhL,EAAKghE,iBAAiB91D,OAIxB22B,EAAqB19C,UAAUm9E,iBAAmB,SAAS/5E,EAAGiF,GAG7D,OAFA1E,EAAejD,YAAYyH,eAAeoE,KAAKlE,MAC/CqR,EAAMxQ,mBAAmB9F,GAClBiF,GACN,IAAK,QACJkE,KAAKqwE,kBACN,MACA,IAAK,MACJrwE,KAAKmwE,aACN,MACA,QACC1wE,QAAQC,IAAI,8CAKfyxC,EAAqB19C,UAAUo9E,QAAU,SAAS/0E,GACjD,IAAIjF,EAAIP,SAASgD,cAAc,KAC5BzC,EAAE0C,aAAa,QAAS,wGAExB,IAAI+V,EAAOtP,KAId,GAHGnJ,EAAE2J,iBAAiB,SAAS,WACxB8O,EAAKshE,iBAAiB5wE,KAAMlE,MAExB,OAARA,EACF,IAAI/I,EAAI+I,EAAK+N,mBACL9W,EAAI+I,EAAK8N,OAAO,GAAGC,cAAgB/N,EAAKgO,MAAM,GAEpD,OADHjT,EAAE6C,YAAYpD,SAASuD,eAAe9G,EAAI,UAChC8D,GAGXs6C,EAAqB19C,UAAUq9E,eAAiB,WAC/C,IAAIn4B,EAAKriD,SAASgD,cAAc,MAC7Bq/C,EAAGp/C,aAAa,QAAS,0BAC5B,IAAIw3E,EAAQ/wE,KAAK6wE,QAAQ,SACzBE,EAAMt0E,UAAUG,IAAI,6BACpB+7C,EAAGj/C,YAAYq3E,GACfp4B,EAAGj/C,YAAYsG,KAAK6wE,QAAQ,QAC5B7wE,KAAKgxE,WAAWt3E,YAAYi/C,GAC5B34C,KAAK2wE,gBACL3wE,KAAK0wE,oBAMNv/B,EAAqB19C,UAAU8a,SAAW,WAazC,OAZAvO,KAAKgiC,OAAS1rC,SAASgD,cAAc,OACrC0G,KAAKgxE,WAAa16E,SAASgD,cAAc,OACzC0G,KAAKgxE,WAAWz3E,aAAa,QAAS,4BACtCyG,KAAKlE,KAAOxF,SAASgD,cAAc,OACnC0G,KAAKlE,KAAKvC,aAAa,QAAS,wBAChCyG,KAAK8wE,iBACL9wE,KAAKixE,QAAU36E,SAASgD,cAAc,OACtC0G,KAAKixE,QAAQ13E,aAAa,QAAS,0BAEnCyG,KAAKgiC,OAAOtoC,YAAYsG,KAAKgxE,YAC7BhxE,KAAKgxE,WAAWt3E,YAAYsG,KAAKlE,MACjCkE,KAAKgiC,OAAOtoC,YAAYsG,KAAKixE,SACtBjxE,KAAKgiC,QAGbmP,EAAqB19C,UAAU28E,WAAa,SAASn2E,EAAKi3E,GACzD,IAAI5hE,EAAOtP,KACXA,KAAKzE,GAAG2iC,SAAS,4BACjBl+B,KAAKzE,GAAG0V,OAAOyhC,WAAU,EAAO,CAAC,oBAAqB,YAAc1yC,KAAKtH,SACxE2C,MAAK,SAASd,GACd+U,EAAK/T,GAAGk2C,YACRniC,EAAKuiC,OAASt3C,EACd+U,EAAK6hE,YAAYl3E,EAAKi3E,MAJvB,OAMO,SAAS9iE,GACfkB,EAAK/T,GAAGk2C,YACRniC,EAAK/T,GAAG6iC,UAAUhwB,OAIpB+iC,EAAqB19C,UAAU29E,gBAAkB,WAChDh6E,EAAejD,YAAYyH,eAAeoE,KAAKlE,MAC/B,QAAbkE,KAAKhN,KACPgN,KAAKlE,KAAKpC,YAAYsG,KAAKqxE,wBAEP,UAAbrxE,KAAKhN,KACZgN,KAAKlE,KAAKpC,YAAYsG,KAAKsxE,gCAEP,eAAbtxE,KAAKhN,MACTgN,KAAKzE,GAAGqC,YAAY,eACtBoC,KAAKlE,KAAKpC,YAAYsG,KAAKuxE,uBAEzBvxE,KAAKzE,GAAGqC,YAAY,gBACtBoC,KAAKlE,KAAKpC,YAAYsG,KAAKwxE,yBAGR,QAAbxxE,KAAKhN,OACTgN,KAAKzE,GAAGqC,YAAY,kBACtBoC,KAAKlE,KAAKpC,YAAYsG,KAAKyxE,uBAEzBzxE,KAAKzE,GAAGqC,YAAY,kBACtBoC,KAAKlE,KAAKpC,YAAYsG,KAAK0xE,mBAEzB1xE,KAAKzE,GAAGqC,YAAY,oBACtBoC,KAAKlE,KAAKpC,YAAYsG,KAAK2xE,sBAEzB3xE,KAAKzE,GAAGqC,YAAY,gBACtBoC,KAAKlE,KAAKpC,YAAYsG,KAAKwxE,0BA6B9BrgC,EAAqB19C,UAAU09E,YAAc,SAASl3E,EAAKi3E,GACvDlxE,KAAKlE,OACPkE,KAAKoxE,kBACLpxE,KAAK4xE,gBAAgB33E,EAAKi3E,KAM5B//B,EAAqB19C,UAAUm+E,gBAAkB,SAAS33E,EAAKi3E,GAC9D95E,EAAejD,YAAYyH,eAAeoE,KAAKixE,SAC/B,QAAbjxE,KAAKhN,KACPgN,KAAKlE,KAAKpC,YAAYsG,KAAK6xE,oBAEP,QAAb7xE,KAAKhN,KACZgN,KAAKlE,KAAKpC,YAAYsG,KAAK8xE,oBAEP,UAAb9xE,KAAKhN,MACZgN,KAAKlE,KAAKpC,YAAYsG,KAAK+xE,sBAEzB93E,GACF+F,KAAKzE,GAAGw3C,YAAY94C,EAAKi3E,IAI3B//B,EAAqB19C,UAAU49E,qBAAuB,WACrD,IAAIW,EAAM17E,SAASgD,cAAc,QAIjC,OAHA04E,EAAIz4E,aAAa,QAAS,gCAC1By4E,EAAIt4E,YAAYsG,KAAKiyE,mBACrBD,EAAIt4E,YAAYsG,KAAKkyE,iBACdF,GAGR7gC,EAAqB19C,UAAU69E,6BAA+B,WAC7D,IAAIU,EAAM17E,SAASgD,cAAc,QAIjC,OAHA04E,EAAIz4E,aAAa,QAAS,kCAC1By4E,EAAIt4E,YAAYsG,KAAKiyE,iBAAgB,IACrCD,EAAIt4E,YAAYsG,KAAKmyE,uBACdH,GAGR7gC,EAAqB19C,UAAU89E,oBAAsB,WACpD,IAAIjiE,EAAOtP,KAMX,OAAOA,KAAKoyE,gBAAgB,cAAe,cALhC,WACV9iE,EAAK/T,GAAGqiC,gBACRtuB,EAAKtc,KAAO,OACZsc,EAAK6hE,kBAKPhgC,EAAqB19C,UAAU4+E,uBAAyB,WACvD,IAAI/iE,EAAOtP,KAMX,OAAOA,KAAKoyE,gBAAgB,UAAW,WAL5B,WACV9iE,EAAK/T,GAAGqiC,gBACRtuB,EAAKtc,KAAO,UACZsc,EAAK6hE,kBAKPhgC,EAAqB19C,UAAUw+E,gBAAkB,SAASK,GACzD,IAAIhjE,EAAOtP,KAWX,OAAOA,KAAKoyE,gBAAgB,SAAU,iBAV3B,WACV9iE,EAAK/T,GAAGqiC,gBACRtuB,EAAKtc,KAAO,OACTs/E,EACFhjE,EAAK/T,GAAG2b,SAGR5H,EAAK6hE,kBAMRhgC,EAAqB19C,UAAU0+E,oBAAsB,WACpD,IAAI7iE,EAAOtP,KAOX,OAAOA,KAAKoyE,gBAAgB,SAAU,iBAN3B,WACV9iE,EAAK/T,GAAGqiC,gBACmB,mBAAjBtuB,EAAKijE,UACdjjE,EAAKijE,eAMRphC,EAAqB19C,UAAUy+E,cAAgB,WAC9C,IAAI5iE,EAAOtP,KAcX,OAAOA,KAAKoyE,gBAAgB,OAAQ,iBAbzB,WACV9iE,EAAK/T,GAAGqiC,gBACR,IAAIxkC,EAAOkW,EAAKkjE,gBAAgB1/E,MACN,UAAvB,EAAOwc,EAAKuiC,UACdz4C,EAAOwB,KAAKsT,MAAM9U,IAEnB,IAAI+X,EAAO,GAKX,OAJAA,EAAK,qBAAwB,YAAc7B,EAAK5W,OAC3CtB,EAAejD,YAAYwpC,MAAMruB,EAAKmjE,sBAEtCthE,EAAI,SAAe7B,EAAK/T,GAAG0V,OAAOwY,iBAAiByC,QAAU,UADjE/a,EAAI,SAAe7B,EAAK/T,GAAG0V,OAAOwY,iBAAiByC,QAAU,IAAM5c,EAAKmjE,qBAAqB3/E,MAEvFwc,EAAKqjC,aAAav5C,EAAM+X,OAKjCggC,EAAqB19C,UAAUg+E,oBAAsB,WACpD,IAAIniE,EAAOtP,KAKX,OAAOA,KAAKoyE,gBAAgB,OAAQ,iBAJzB,WACV9iE,EAAKtc,KAAO,OACZsc,EAAK6hE,kBAKPhgC,EAAqB19C,UAAUk+E,mBAAqB,WACnD,IAAIriE,EAAOtP,KAMX,OAAOA,KAAKoyE,gBAAgB,cAAe,mBALhC,WACV9iE,EAAK/T,GAAGqiC,gBACRtuB,EAAKtc,KAAO,OACZsc,EAAK6hE,kBAKPhgC,EAAqB19C,UAAUi+E,gBAAkB,WAChD,IAAIpiE,EAAOtP,KAMX,OAAOA,KAAKoyE,gBAAgB,oBAAqB,iBALtC,WACV9iE,EAAK/T,GAAGqiC,gBACRtuB,EAAKtc,KAAO,SACZsc,EAAK6hE,kBAKPhgC,EAAqB19C,UAAU2+E,gBAAkB,SAASp4E,EAAOM,EAAQgX,GACxE,IAAI/R,EAAMjJ,SAASgD,cAAc,UAIjC,OAHAiG,EAAI7F,YAAYpD,SAASuD,eAAeG,IACxCuF,EAAIhG,aAAa,QAAS,wDAA0De,GACpFiF,EAAIiB,iBAAiB,QAAS8Q,GACvB/R,GAMR4xC,EAAqB19C,UAAUk/C,aAAgB,SAASv5C,EAAM+X,GAC7DnR,KAAKzE,GAAG2iC,SAAS,4BACjB,IAAI5uB,EAAOtP,KACX,OAAOA,KAAKzE,GAAG0V,OAAO0hC,cAAa,EAAOv5C,EAAM+X,GAC/C9V,MAAK,SAASd,GACd,GAAGA,EAAS,oBAAqD,oBAA/BA,EAAS,mBAC1C+U,EAAK/T,GAAG2iC,SAAS,6BACjB5uB,EAAKtc,KAAO,OACZsc,EAAK8gE,WAAW,+BAChB9gE,EAAK/T,GAAG2b,aAEJ,KAAG3c,EAAS,oBAAqD,oBAA/BA,EAAS,mBAK/C,MAAM,IAAI8a,MAAM,kDAJhB/F,EAAK/T,GAAGk2C,YACRniC,EAAK/T,GAAGq7C,eAAer8C,EAAS,sBAAuB,cAVlD,OAgBA,SAAS6T,GACfkB,EAAK/T,GAAGk2C,YACLrjC,EAAMzT,MAAQyT,EAAMzT,KAAK,sBAC3B2U,EAAK/T,GAAGq7C,eAAexoC,EAAMzT,KAAK,sBAAuB,UAGzD2U,EAAK/T,GAAG6iC,UAAUhwB,OASrB+iC,EAAqB19C,UAAU6/C,KAAQ,SAASpyC,EAAK9N,EAAKJ,GACzD,IAAIsc,EAAOtP,KACXhN,EAAQA,GAAc,UACtBgN,KAAKzE,GAAG2iC,SAAS,uBAAyBh9B,GAC1C,IAAIwxE,EAAU1yE,KAAKzE,GAAG0V,OAAOwY,iBAAiBwC,YAC9C,OAAOjsB,KAAKzE,GAAG0V,OAAOyhC,UAAUxxC,EAAK,CAAC,oBAAqB9N,EAAK,oBAAsB,YAAc4M,KAAKtH,SACxG2C,MAAK,SAASd,GACd,IAAIo4E,EAAqB,UAAR3/E,EAAoBsc,EAAKsjE,aAAar4E,GAAYA,EAChE+U,EAAKygE,uBAEPzgE,EAAK/T,GAAGq5C,WAAW,2CACnBtlC,EAAK/T,GAAG0V,OAAOwY,iBAAiBmD,aAAa8lD,GAC7CpjE,EAAKujE,gBAAgBF,KAGrBrjE,EAAK/T,GAAG2iC,SAAS,mBACjB5uB,EAAK/T,GAAG0V,OAAOwY,iBAAiBmD,aAAa8lD,GAC7CpjE,EAAKqjC,aAAaggC,EAAW,CAAC,oBAAqB,YAAcrjE,EAAK5W,SAAS2C,MAAK,SAASd,GAK5F,OAJA+U,EAAKtc,KAAO,OACZsc,EAAK/T,GAAGk2C,YACRniC,EAAK/T,GAAG2b,SACR5H,EAAK/T,GAAGq5C,WAAW,yCAA2C1zC,GACvD3G,SAjBH,OAoBE,SAAS6T,GACjBkB,EAAK/T,GAAGk2C,YACRniC,EAAK/T,GAAG6iC,UAAUhwB,OAIpB+iC,EAAqB19C,UAAUm/E,aAAe,SAASE,GACtD,IAAIC,EAAU/yE,KAAK6xC,OACnB,GAAkB,UAAf7xC,KAAKtH,OACPq6E,EAAU/yE,KAAK6xC,OAASihC,OAEpB,GAAkB,UAAf9yE,KAAKtH,OACZ,IAAI,IAAI7G,KAAKihF,EACZC,EAAQlhF,GAAKihF,EAAGjhF,GAGlB,OAAOkhF,GAMR5hC,EAAqB19C,UAAUo/E,gBAAkB,SAASF,GACzD3yE,KAAK6xC,OAAS8gC,EACd3yE,KAAK+vE,uBAAwB,EAC7B/vE,KAAKhN,KAAO,OACZgN,KAAKmxE,YAAY,uBAGlBhgC,EAAqB19C,UAAUu/E,sBAAwB,SAASC,GAC/D,IAAIj5E,EAAQ1D,SAASgD,cAAc,SAChCU,EAAMT,aAAa,QAAS,0BAC/BS,EAAMT,aAAa,MAAO,cACvBS,EAAMN,YAAYpD,SAASuD,eAAe,iBAC7C,IAAIoc,EAAM3f,SAASgD,cAAc,SAKjC,OAJA2c,EAAI1c,aAAa,QAAS,kDAC1B0c,EAAI1c,aAAa,cAAe,qBAChC05E,EAAGv5E,YAAYM,GACfi5E,EAAGv5E,YAAYuc,GACRA,GAGRk7B,EAAqB19C,UAAUq+E,iBAAmB,WACjD,IAAImB,EAAK38E,SAASgD,cAAc,OAEhC,GADA25E,EAAG15E,aAAa,QAAS,kDACtByG,KAAKzE,GAAGqC,YAAY,mBAAoB,IAAIqY,EAAMjW,KAAKgzE,sBAAsBC,GAChF,IAAIC,EAAQ58E,SAASgD,cAAc,YAcnC,OAbA45E,EAAM35E,aAAa,QAAS,iDAC5B25E,EAAM35E,aAAa,QAAS,QAC5B25E,EAAM35E,aAAa,QAAS,wCACF,iBAAhByG,KAAK6xC,OACdqhC,EAAMz5E,UAAYuG,KAAK6xC,OAEQ,UAAxB,EAAQ7xC,KAAK6xC,UACpBqhC,EAAMz5E,UAAYmB,KAAKC,UAAUmF,KAAK6xC,OAAQ,EAAG,IAE/C7xC,KAAKzE,GAAGqC,YAAY,qBAAoBoC,KAAKyyE,qBAAuBx8D,GACvEjW,KAAKwyE,gBAAkBU,EACvBD,EAAGv5E,YAAYw5E,GACf/lE,EAAMtR,cAAcmE,KAAKzE,GAAI23E,EAAO,SAAU,UACvCD,GAGR9hC,EAAqB19C,UAAUo+E,iBAAmB,WACjD,IACIoB,EAAK38E,SAASgD,cAAc,OAChC25E,EAAG15E,aAAa,QAAS,kDACzB,IAAI25E,EAAQ58E,SAASgD,cAAc,OAEnC,GADA45E,EAAM35E,aAAa,QAAS,4CACF,iBAAhByG,KAAK6xC,OAAoB,CAClC,IAAI13C,EAAM6F,KAAK6xC,OAAO36C,QAAQ,KAAM,SAC5BA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,UACtBg8E,EAAMz5E,UAAYU,MAEa,UAAxB,EAAQ6F,KAAK6xC,UACpBqhC,EAAMz5E,UAAYmB,KAAKC,UAAUmF,KAAK6xC,OAAQ,EAAG,IAIlD,OAFS1kC,EAAMpS,mBAAmBiF,KAAKzE,GAAI23E,EAAOD,EAAI,WAC9CA,EAAGv5E,YAAYw5E,GAChBD,GAGR9hC,EAAqB19C,UAAUs+E,mBAAqB,WACnD,IAAIhP,EAAMzsE,SAASgD,cAAc,OACjCypE,EAAIxpE,aAAa,QAAS,0EAGtB+qE,EAAMhuE,SAASgD,cAAc,QAC7BC,aAAa,QAAS,mGAC1B,IAAI8nC,EAAO/qC,SAASgD,cAAc,QAClC+nC,EAAK9nC,aAAa,QAAS,wEAC3B8nC,EAAK3nC,YAAYpD,SAASuD,eAAe,QACzCyqE,EAAI5qE,YAAY2nC,GAChB,IAAIsZ,EAAUrkD,SAASgD,cAAc,SACrCqhD,EAAOphD,aAAa,OAAQ,QAC5BohD,EAAOphD,aAAa,QAAS,kFAC7BohD,EAAOphD,aAAa,cAAe,kCACnC+qE,EAAI5qE,YAAYihD,GAChBooB,EAAIrpE,YAAY4qE,IAEZA,EAAMhuE,SAASgD,cAAc,QAC7BC,aAAa,QAAS,oGACtB45E,EAAO78E,SAASgD,cAAc,SAC7BC,aAAa,QAAS,oGAC3B45E,EAAKz5E,YAAYpD,SAASuD,eAAe,gBACzCyqE,EAAI5qE,YAAYy5E,GAChB,IAAIC,EAAQ98E,SAASgD,cAAc,UACnC85E,EAAM75E,aAAa,QAAS,wBAE5B,IAAI85E,EAAY/8E,SAASgD,cAAc,UACvC+5E,EAAUvgF,MAAQ,UAClBugF,EAAU35E,YAAYpD,SAASuD,eAAe,iBAC9Cu5E,EAAM15E,YAAY25E,GAClB,IASI/O,EAEA6O,EAXA9K,EAAS/xE,SAASgD,cAAc,UACpC+uE,EAAOv1E,MAAQ,SACfu1E,EAAO3uE,YAAYpD,SAASuD,eAAe,gBAC3Cu5E,EAAM15E,YAAY2uE,GAClB+K,EAAM75E,aAAa,QAAS,6CAC5B+qE,EAAI5qE,YAAYy5E,GAChB7O,EAAI5qE,YAAY05E,GAChBrQ,EAAIrpE,YAAY4qE,IAEZA,EAAMhuE,SAASgD,cAAc,QAC7BC,aAAa,QAAS,oGACtB45E,EAAO78E,SAASgD,cAAc,SAC7BC,aAAa,QAAS,qEAC3B45E,EAAKz5E,YAAYpD,SAASuD,eAAe,QACzC,IAAIzG,EAAMkD,SAASgD,cAAc,SACjClG,EAAImG,aAAa,OAAQ,QACzBnG,EAAImG,aAAa,QAAS,4DAC1B+qE,EAAI5qE,YAAYy5E,GAChB7O,EAAI5qE,YAAYtG,GAChB2vE,EAAIrpE,YAAY4qE,GAChB,IAAIh1D,EAAOtP,KAMX,OALAA,KAAKuyE,SAAW,WACZ53B,EAAO7nD,OACTwc,EAAKgkC,KAAKqH,EAAO7nD,MAAOM,EAAIN,MAAOsgF,EAAMtgF,QAGpCiwE,GAGRnxE,EAAOD,QAAQw/C,G,6CC/jBf,IAAM/5C,eAAiBtD,oBAAQ,GACzB0lB,SAAW1lB,oBAAQ,IACnBmlB,UAAYnlB,oBAAQ,IACpBklB,YAAcllB,oBAAQ,IAEtBolB,UAAYplB,oBAAQ,IACpBqlB,WAAarlB,oBAAQ,IACrBkd,cAAgBld,oBAAQ,GACxBg3C,UAAYh3C,oBAAQ,IACpBi0C,YAAcj0C,oBAAQ,IACtBm2C,YAAcn2C,oBAAQ,IACtB02C,aAAe12C,oBAAQ,IAEvB22C,cAAgB32C,oBAAQ,IACxBw/E,eAAiBx/E,oBAAQ,KACzBy/E,cAAgBz/E,oBAAQ,KACxBi3C,kBAAoBj3C,oBAAQ,IAC5Bs5C,iBAAmBt5C,oBAAQ,IAC3B0/E,mBAAqB1/E,oBAAQ,KAC7B2/E,eAAiB3/E,oBAAQ,KACzBsZ,oBAAsBtZ,oBAAQ,GAC9BqZ,MAAQrZ,oBAAQ,GAUtB,SAASgwE,mBAAmB7yD,GAC3BjR,KAAKiR,OAASA,EAGf6yD,mBAAmBrwE,UAAUigF,aAAe,SAAStiE,KAGrD0yD,mBAAmBrwE,UAAUmjC,UAAY,SAAStpB,EAAOC,EAAQC,GAClDpW,eAAe9C,KAA1B,IAECoZ,EADM,IAAIN,oBAAoB,GAAIE,EAAOC,EAAQC,EAAaxN,KAAKhN,MACrDub,WACdyB,EAAa,GAIjB,OAHAA,EAAW1C,MAAQA,EACnB0C,EAAWzC,OAASA,EACpBJ,MAAMtR,cAAcmE,KAAKzE,GAAImS,EAAQimE,YAAa3jE,EAAY,cACvDtC,GAGRo2D,mBAAmBrwE,UAAUmgF,iBAAmB,SAASp9E,EAAQ4a,EAAQmE,GACrE,IAAIs+D,EAAW7zE,KAAK42B,UAAU,IAAK,IACfh8B,KAAKC,UAAUuW,OAAQrD,EAAW,IAClDuB,EAAOtP,KAaX,OAZA6zE,EAASC,aAAatzE,iBAAiB,SAAS,WAC5C,IAEL,IAAIuzE,EAAO5mE,MAAMvN,iBAAiBi0E,EAASF,YAAY7gF,OACvDsE,eAAejD,YAAYyH,eAAe2Z,GAC1CA,EAAK7b,YAAY4V,EAAKslC,WAAWp+C,EAAQu9E,IAEpC,MAAM9zE,GAEXR,QAAQC,IAAI,2BAA6BO,OAGjC4zE,GAGX/P,mBAAmBrwE,UAAUugF,aAAe,SAASx9E,EAAQ4a,EAAQmE,EAAM0+D,GAC1E,IAAIJ,EAAW7zE,KAAK4zE,iBAAiBp9E,EAAQ4a,EAAQmE,GACrD0+D,EAAKv6E,YAAYm6E,EAAS13E,MAG3B2nE,mBAAmBrwE,UAAUwmC,WAAa,SAASzjC,EAAQ4a,EAAQmE,EAAM0+D,GACxE,IAAIC,EAAO59E,SAASgD,cAAc,UAE/B46E,EAAK36E,aAAa,QAAS,0CAC3B26E,EAAKx6E,YAAYpD,SAASuD,eAAe,WAGzC,IAAIyV,EAAOtP,KAKX,OAJAk0E,EAAK1zE,iBAAiB,SAAS,WACjCpJ,eAAejD,YAAYyH,eAAeq4E,GACpC3kE,EAAK0kE,aAAax9E,EAAQ4a,EAAQmE,EAAM0+D,MAErCC,GAGXpQ,mBAAmBrwE,UAAUmhD,WAAa,SAASp+C,EAAQ4a,EAAQ+iE,GAClE,IAAI5+D,EAAOjf,SAASgD,cAAc,QAClCic,EAAKhc,aAAa,QAAS,0BAC3B/C,EAAOs8B,QACP,IAAI9X,EAAY,CACfV,MAAO,IAAIytB,YACXvtB,MAAO,IAAIyvB,YACXtvB,OAAQ,IAAI6vB,aACZ9vB,QAAS,IAAI+vB,eAEVlkC,EAAS6K,EAAOje,OAAO6M,KAAKiR,OAAQ+J,EAAW8vB,UAAUvmB,yBAC7Dhe,EAAOsrB,UAAUr7B,GACjB+e,EAAK7b,YAAY6M,EAAO8L,UACxB,IAAI4hE,EAAO39E,SAASgD,cAAc,OAGlC,OAFAic,EAAK7b,YAAYu6E,GACdE,GAAU5+D,EAAK7b,YAAYsG,KAAKi6B,WAAWzjC,EAAQ4a,EAAQmE,EAAM0+D,IAC7D1+D,GAGRuuD,mBAAmBrwE,UAAU2gF,eAAiB,SAAS31E,EAAO2S,GAC7D,IAAImE,EAAOjf,SAASgD,cAAc,QAClCic,EAAKhc,aAAa,QAAS,oBAC3B,IAAIyhB,EAAY,CACdV,MAAO,IAAIytB,YACXvtB,MAAO,IAAIyvB,YAEX5X,OAAQ,IAAIoY,eAEVlkC,EAAS6K,EAAOje,OAAO6M,KAAKiR,OAAQ+J,EAAW8vB,UAAUvmB,yBAU7D,OATG9lB,EACFuB,KAAKq0E,YAAY51E,EAAO8H,GAAQ,WAAYgP,EAAK7b,YAAY6M,EAAO8L,aAGjErS,KAAKs0E,cACP/tE,EAAOsrB,UAAU7xB,KAAKs0E,aACtB/+D,EAAK7b,YAAY6M,EAAO8L,WAGnBkD,GAGRuuD,mBAAmBrwE,UAAU4gF,YAAc,SAAS51E,EAAO8H,EAAQlL,GAClE,IAAIiU,EAAOtP,KACX,OAAOvB,EAAMk2B,QAAQ30B,KAAKiR,QAAQ5V,MAAK,SAACu5B,GACvCtlB,EAAKglE,YAAc,IAAIl9E,eAAe/C,WAAWugC,EAASn2B,GAC1D8H,EAAOsrB,UAAUviB,EAAKglE,aACtB70E,QAAQC,IAAI,mBAAoB4P,EAAKglE,iBAIvCxQ,mBAAmBrwE,UAAU6mB,MAAQ,SAAS7b,EAAO2S,GACpD,IAAImE,EAAOjf,SAASgD,cAAc,QAClCic,EAAKhc,aAAa,QAAS,kBAC3B,IAAI4iB,EAAM,IAAIlD,UAAUjZ,KAAKiR,QAAQ5Y,QAAQ+Y,GAQ7C,OAPA+K,EAAI9K,aAAay5B,UAAUvmB,yBAC3BpI,EAAIhB,YAAY,IAAI4sB,aACpBtpC,EAAMk2B,QAAQ30B,KAAKiR,QAAQ5V,MAAK,SAACu5B,GAChC,IAAIp+B,EAAS,IAAIY,eAAe/C,WAAWugC,EAASn2B,GACpD0d,EAAI0V,UAAUr7B,GACd+e,EAAK7b,YAAYyiB,EAAI9J,aAEfkD,GAGRuuD,mBAAmBrwE,UAAUknB,OAAS,SAASlc,EAAO2S,GACrD,IAAImE,EAAOjf,SAASgD,cAAc,QAClCic,EAAKhc,aAAa,QAAS,mBAC3B,IAAI4iB,EAAM,IAAIhD,WAAWnZ,KAAKiR,QAAQ5Y,QAAQ+Y,GAE9C,OADA+K,EAAI9K,aAAay5B,UAAUvmB,yBACpB9lB,EAAMk2B,QAAQ30B,KAAKiR,QAAQ5V,MAAK,SAACu5B,GAC1B,IAAIvgC,WAAWugC,EAASn2B,GACrC8W,EAAK7b,YAAYyiB,EAAI9J,cAKvByxD,mBAAmBrwE,UAAUqF,KAAO,SAAS2F,EAAO2S,GACnD,IAAImE,EAAOjf,SAASgD,cAAc,QAClCic,EAAKhc,aAAa,QAAS,iBAC3B,IAAI4iB,EAAM,IAAIo4D,gBAAgBv0E,KAAKiR,QAAQ5Y,QAAQ+Y,GAKnD,OAJAmE,EAAK7b,YAAYyiB,EAAI9J,UAClB5T,GACF0d,EAAIxO,SAASlP,GAAO,GAEd8W,GAGRuuD,mBAAmBrwE,UAAU+gF,WAAa,aAI1C1Q,mBAAmBrwE,UAAUghF,iBAAmB,SAAS57B,GACxD,IAAI67B,EAAOp+E,SAASgD,cAAc,UAClCo7E,EAAKh7E,YAAYpD,SAASuD,eAAe,qBAEzC66E,EAAKl0E,iBAAiB,SAAS,eAK/Bq4C,EAAKn/C,YAAYg7E,IAGlB5Q,mBAAmBrwE,UAAUkhF,gBAAkB,SAAS97B,GACvD,IAAIq7B,EAAO59E,SAASgD,cAAc,UAClC46E,EAAKx6E,YAAYpD,SAASuD,eAAe,SACzC,IAAIyV,EAAOtP,KACXk0E,EAAK1zE,iBAAiB,SAAS,WAC9Bq4C,EAAKn/C,YAAY4V,EAAKklE,cACtBllE,EAAKmlE,iBAAiB57B,MAEvBA,EAAKn/C,YAAYw6E,IAGlBpQ,mBAAmBrwE,UAAUwxE,UAAY,SAASxmE,EAAO2S,GACxD,IAAImE,EAAOjf,SAASgD,cAAc,QAClCic,EAAKhc,aAAa,QAAS,sBAC3B,IAAI2rE,EAAK,IAAIhsC,UAAUl5B,KAAKiR,OAAQxS,GACpCymE,EAAG7sE,QAAQ+Y,GACXpR,KAAKsrC,UAAY45B,EACjB,IAAI0P,EAAM,IAAIL,gBAAgBv0E,KAAKiR,QAAQ5Y,QAAQ+Y,GAwDnD,OAvDApR,KAAK60E,YAAcD,EAuDZr/D,GAIRuuD,mBAAmBrwE,UAAUinB,QAAU,SAASjc,EAAO2S,GACtD,IAAImE,EAAOjf,SAASgD,cAAc,QAClCic,EAAKhc,aAAa,QAAS,oBAC3B,IAAI4iB,EAAM,IAAI24D,WAAW90E,KAAKiR,QAAQ5Y,QAAQ+Y,GAC9C,OAAO3S,EAAMk2B,QAAQ30B,KAAKiR,QAAQ5V,MAAK,SAACu5B,GACvC,IAAIp+B,EAAS,IAAInC,WAAWugC,EAASn2B,GACrC8W,EAAK7b,YAAYyiB,EAAI9J,OAAO7b,QAK9BstE,mBAAmBrwE,UAAU+mB,MAAQ,SAAS/b,EAAO2S,GACpD,IAAImE,EAAOjf,SAASgD,cAAc,QAClCic,EAAKhc,aAAa,QAAS,wCAC3B,IAAI4iB,EAAM,IAAIjD,UAAUlZ,KAAKiR,QAAQ5Y,QAAQ+Y,GAC7C,OAAO3S,EAAMk2B,QAAQ30B,KAAKiR,QAAQ5V,MAAK,SAACu5B,GACvC,IAAIp+B,EAAS,IAAInC,WAAWugC,EAASn2B,GACrC8W,EAAK7b,YAAYyiB,EAAI9J,OAAO7b,QAK9BstE,mBAAmBrwE,UAAU6C,SAAW,SAAS0W,EAAIoE,GACpD,IAAI4wB,EAAS1rC,SAASgD,cAAc,QACpC0oC,EAAOzoC,aAAa,QAAS,8CAG7B,IAAI+yC,EAAM,IAAIt7B,cAAchR,KAAKiR,QAAQ5Y,QAAQ+Y,GAOjD,OANAk7B,EAAIv5B,MAAQ/S,KACZssC,EAAIj7B,aAAay5B,UAAUvmB,yBAC3B+nB,EAAI/6B,aAAavE,GAAI3R,MAAK,WACzB,IAAIc,EAAMmwC,EAAIj6B,SACXlW,GAAK6lC,EAAOtoC,YAAYyC,MAErB6lC,GAGR8hC,mBAAmBrwE,UAAUkf,aAAe,SAASG,SAAUhQ,MAAO3K,KAAM+zC,WAC3E,IAAIC,QAAU,OAASr5B,SAAW,IAC/B3a,OAAMg0C,SAAWvxC,KAAKC,UAAU1C,OACnCg0C,SAAW,KACX,IACC,IAAIpxB,GAAKhb,KAAKosC,SAEd,OADApxB,GAAG/U,SAAWkmC,UACPnxB,GAER,MAAM9a,GAEL,OADAR,QAAQC,IAAI,kBAAoBoT,SAAW7S,EAAEzL,aACtC,IAIT5C,OAAOD,QAAUmyE,oB,cChUjB,SAASwP,KAETA,EAAe7/E,UAAU4e,OAAS,SAASvP,GAC1C,IAAIlP,EAAI0C,SAASgD,cAAc,OAC/B,IAAI,IAAI3F,KAAKmP,EAAMosB,WAAW,CAC7B,IAAI9yB,EAAK4D,KAAK+0E,eAAejyE,EAAMosB,WAAWv7B,IAC3CyI,GAAIxI,EAAE8F,YAAY0C,GAEtB,OAAOxI,GAGR0/E,EAAe7/E,UAAUshF,eAAiB,SAASjyE,GAClD,IAAIlP,EAAI0C,SAASgD,cAAc,OAC/B1F,EAAE8F,YAAYpD,SAASuD,eAAeiJ,EAAM+B,WAAa,OACzD,IAAI,IAAIhT,EAAI,EAAIA,EAAIiR,EAAMuZ,OAAOrnB,OAAQnD,IAAI,CAC5C,GAAGiR,EAAMuZ,OAAOxqB,GAAGm+B,SAClB,IAAI5zB,EAAK4D,KAAKmlB,YAAYriB,EAAMuZ,OAAOxqB,SAGnCuK,EAAK4D,KAAKqS,OAAOvP,EAAMuZ,OAAOxqB,IAEhCuK,GAAIxI,EAAE8F,YAAY0C,GAEtB,OAAOxI,GAGR0/E,EAAe7/E,UAAU0xB,YAAc,SAASriB,GAC/C,IAAIlP,EAAI0C,SAASgD,cAAc,QAE/B,OADA1F,EAAE8F,YAAYpD,SAASuD,eAAeiJ,EAAMpQ,MAAQ,MAC7CkB,GAGRhC,EAAOD,QAAU2hF,G,cChCjB,SAASC,KAETA,EAAc9/E,UAAU4e,OAAS,SAASvP,GACzC,IAAI/P,EAAIiN,KAAKooC,YAAYtlC,GACrB6lC,EAAQryC,SAASgD,cAAc,SACnC,IAAI,IAAI3F,KAAKmP,EAAMosB,WAETlvB,KAAK+0E,eAAepsC,EAAO7lC,EAAMosB,WAAWv7B,IAItD,OADAZ,EAAE2G,YAAYivC,GACP51C,GAGRwgF,EAAc9/E,UAAU20C,YAAc,SAAStlC,GAE9C,IAAIqlC,EAAM7xC,SAASgD,cAAc,SACjC6uC,EAAI5uC,aAAa,QAAS,wBAC1B,IAAIkvC,EAAQnyC,SAASgD,cAAc,SAC/BuvC,EAAMvyC,SAASgD,cAAc,MAC7BwvC,EAAKxyC,SAASgD,cAAc,MAOhC,OANAwvC,EAAGvvC,aAAa,QAAS,kCACzBuvC,EAAGvvC,aAAa,UAAW,GAC3BuvC,EAAGpvC,YAAYpD,SAASuD,eAAeiJ,EAAMiB,UAAY,KAAOjB,EAAMgB,iBACtE+kC,EAAInvC,YAAYovC,GAChBL,EAAM/uC,YAAYmvC,GAClBV,EAAIzuC,YAAY+uC,GACTN,GAGRorC,EAAc9/E,UAAUshF,eAAiB,SAASpsC,EAAO7lC,GACxD,IAAI,IAAIjR,EAAI,EAAIA,EAAIiR,EAAMuZ,OAAOrnB,OAAQnD,IAAI,CAC5C,IAAIg3C,EAAMvyC,SAASgD,cAAc,MAC7B4vC,EAAK5yC,SAASgD,cAAc,MAChC4vC,EAAGxvC,YAAYpD,SAASuD,eAAeiJ,EAAM+B,aAC7C,IAAImwE,EAAM1+E,SAASgD,cAAc,MAC9BwJ,EAAMuZ,OAAOxqB,GAAGm+B,SAClBglD,EAAIt7E,YAAYsG,KAAKmlB,YAAYriB,EAAMuZ,OAAOxqB,KAG9CmjF,EAAIt7E,YAAYsG,KAAKqS,OAAOvP,EAAMuZ,OAAOxqB,KAE1Cg3C,EAAInvC,YAAYwvC,GAChBL,EAAInvC,YAAYs7E,GAChBrsC,EAAMjvC,YAAYmvC,KAIpB0qC,EAAc9/E,UAAU0xB,YAAc,SAASriB,GAC9C,OAAOxM,SAASuD,eAAeiJ,EAAMpQ,QAGtCd,EAAOD,QAAU4hF,G,gBCpDjB,IAAMpzE,EAAkBrM,EAAQ,GAC1BsD,EAAiBtD,EAAQ,GAI/B,SAAS0/E,EAAmB5yE,GAC3BZ,KAAKqc,OAAS,GAwIf,SAAS44D,KAjITzB,EAAmB//E,UAAU4e,OAAS,SAASzR,GAO9C,GANAZ,KAAKY,SAAWA,EAChBZ,KAAKstC,aAAe,IAAI2nC,EAKrBj1E,KAAKk1E,QAAQ,CACf,IAAIC,EAAWn1E,KAAKo1E,iBAGpBp1E,KAAKk1E,QAAQpoC,YAAYqoC,GACzBn1E,KAAKk1E,QAAUC,OAMfn1E,KAAKk1E,QAAUl1E,KAAKo1E,iBAUrB,OAPAp1E,KAAKk1E,QAAQx7E,YAAYsG,KAAKq1E,oBAAoBr1E,KAAKY,WACpDZ,KAAKstC,eACPttC,KAAKsD,OAAStD,KAAKstC,aAAa/+B,SAASvO,KAAKY,UAC3CZ,KAAKsD,QAAQtD,KAAKk1E,QAAQx7E,YAAYsG,KAAKsD,SAE/CtD,KAAK8M,KAAO9M,KAAKs1E,qBACdt1E,KAAK8M,MAAM9M,KAAKk1E,QAAQx7E,YAAYsG,KAAK8M,MACrC9M,KAAKk1E,SAGb1B,EAAmB//E,UAAU2hF,eAAiB,WAC7C,IAAIryE,EAAc/C,KAAKY,SAAS8sC,wBAC5BhqC,EAAO,4DAA8DX,EACzE,GAAkB,SAAfA,EACF,IAAIY,EAAKrN,SAASgD,cAAc,aAG5BqK,EAAKrN,SAASgD,cAAc,OAMjC,OAFAqK,EAAGpK,aAAa,QAAS,wEAA0EyG,KAAKY,SAAS5N,KAAO,IAAM0Q,GAC9HC,EAAGpK,aAAa,gBAAiByG,KAAKY,SAASpN,YACxCmQ,GAGR6vE,EAAmB//E,UAAU6hF,mBAAqB,WACjD,IAAIvyE,EAAc/C,KAAKY,SAAS8sC,wBAC5BhqC,EAAO,4BAA8BX,EACzC,GAAkB,QAAfA,EACF,IAAIsB,EAAU/N,SAASgD,cAAc,YAGjC+K,EAAU/N,SAASgD,cAAc,QAEnC+K,EAAQ9K,aAAa,QAAS,4BAA8BmK,EAAO,mCACtE,IAAI,IAAI7R,EAAG,EAAGA,EAAEmO,KAAKqc,OAAOrnB,OAAQnD,IACnCwS,EAAQ3K,YAAYsG,KAAKqc,OAAOxqB,IAEjC,OAAOwS,GAGRmvE,EAAmB//E,UAAU8hF,iBAAmB,SAASC,GACxDx1E,KAAKqc,OAAOrR,KAAKwqE,IAGlBhC,EAAmB//E,UAAUgyC,MAAQ,WACpCruC,EAAejD,YAAYyH,eAAeoE,KAAKk1E,SAC/Cl1E,KAAKqc,OAAS,IAOfm3D,EAAmB//E,UAAUiJ,OAAS,WACrCsD,KAAKk1E,QAAQxsE,WAAWD,YAAYzI,KAAKk1E,UAM1C1B,EAAmB//E,UAAUyjB,OAAS,WACrC,IAAIi+D,EAAWn1E,KAAKo1E,iBACpBp1E,KAAKk1E,QAAQpoC,YAAYqoC,GACzBn1E,KAAKk1E,QAAUC,EACfn1E,KAAKqc,OAAS,GACdrc,KAAKY,SAASyR,OAAOrS,OAGtBwzE,EAAmB//E,UAAUo6C,aAAe,WAC3C,GAAG7tC,KAAKstC,cAAgBttC,KAAKsD,OAAQ,CACpC,IAAIwqC,EAAU9tC,KAAKstC,aAAa/+B,SAASvO,KAAKY,UAC9CZ,KAAKsD,OAAOwpC,YAAYgB,GACxB9tC,KAAKsD,OAASwqC,IAIhB0lC,EAAmB//E,UAAUs6C,WAAa,WACzC,GAAG/tC,KAAK8M,KAAK,CACZ,IAAIkhC,EAAQhuC,KAAKs1E,qBACjBt1E,KAAK8M,KAAKggC,YAAYkB,GACtBhuC,KAAK8M,KAAOkhC,IAOdwlC,EAAmB//E,UAAU4hF,oBAAsB,SAASz0E,GAC3D,IAAIuD,EAAM7N,SAASgD,cAAc,KACjC6K,EAAI5K,aAAa,QAAS,8BAC1B,IAAI60C,EAAOh3C,EAAejD,YAAYqN,aAAaZ,EAASmD,WACxDqqC,IAAOA,EAAOxtC,EAASmD,YACvBtC,EAAO2sC,EAAM9sC,MAAM,MACftM,OAAS,IAAGo5C,EAAO3sC,EAAK,IAChC,IAEIA,EAFAE,EAAOvK,EAAejD,YAAYqN,aAAaZ,EAASpN,YAK5D,OAJImO,IAAOA,EAAOf,EAASpN,aACvBiO,EAAOE,EAAKL,MAAM,MACdtM,OAAS,IAAG2M,EAAOF,EAAK,IAChC0C,EAAI5K,aAAa,OAAQ60C,EAAO,IAAMzsC,GAC/BwC,GAGRqvE,EAAmB//E,UAAU06C,KAAO,SAASC,EAAM56C,EAAU0Q,GAC5D/D,EAAgBkuC,SAASD,EAAM56C,EAAU0Q,IAK1C+wE,EAAyBxhF,UAAU8a,SAAW,SAAS3N,GACtD,IAAImC,EAAcnC,EAAS8sC,wBACvBhqC,EAAO,4BAA8BX,EACzC,GAAkB,QAAfA,EACF,IAAIqB,EAAS9N,SAASgD,cAAc,YAGhC8K,EAAS9N,SAASgD,cAAc,QAErC8K,EAAO7K,aAAa,QAAS,0CAA4CmK,GACzE,IAAI+xE,EAAUn/E,SAASgD,cAAc,QAErC,GADAm8E,EAAQl8E,aAAa,QAAS,oCAC3BqH,EAAS6tC,YAAY,WAAW,CAClC,IAAIinC,EAAc11E,KAAK21E,uBAAuBF,EAAS70E,GAC7BZ,KAAK01E,YAAb,QAAf3yE,EAA0C2yE,EACrB,KAEzB,GAAG90E,EAAS6tC,YAAY,SAAS,CAChC,IAAIF,EAASvuC,KAAK41E,oBAAoBh1E,GACtC,GAAGA,EAAS6tC,YAAY,WACnBonC,EAAU71E,KAAK81E,qBAAqBl1E,KAC5B2tC,EAAOqzB,QAAQiU,GAEzBtnC,GAAQknC,EAAQ/7E,YAAY60C,QAE3B,GAAG3tC,EAAS6tC,YAAY,UAAU,CACtC,IAAIonC,KAAU71E,KAAK81E,qBAAqBl1E,KAC5B60E,EAAQ/7E,YAAYm8E,GAE9Bj1E,EAAS6tC,YAAY,cACnBF,EAASvuC,KAAK+1E,sBAAsBn1E,KAC7B60E,EAAQ/7E,YAAY60C,IAGhC,IAAIynC,EAAU1/E,SAASgD,cAAc,QAGrC,GAFA08E,EAAQz8E,aAAa,QAAS,+DAA+DqH,EAASyvC,gBAEnGzvC,EAAS6tC,YAAY,SAAS,CAChC,IAAIC,EAAW1uC,KAAKi2E,oBAAoBr1E,GACrC8tC,GAAUsnC,EAAQt8E,YAAYg1C,GAGlC,GAAG9tC,EAAS6tC,YAAY,QAAQ,CAC/B,IAAIS,EAAUlvC,KAAKk2E,gBAAgBt1E,GAChCsuC,GAAS8mC,EAAQt8E,YAAYw1C,GAGjC,GAAGtuC,EAAS6tC,YAAY,MAAM,CAC7B,IAAII,EAAQ7uC,KAAKm2E,iBAAiBv1E,GAC/BiuC,GAAOmnC,EAAQt8E,YAAYm1C,GAG/B,GAAGjuC,EAAS6tC,YAAY,QAAQ,CAC/B,IAAIM,EAAU/uC,KAAKo2E,oBAAoBx1E,GACpCmuC,GAASinC,EAAQt8E,YAAYq1C,GAMjC,GAAGnuC,EAAS6tC,YAAY,gBAAkB7tC,EAASgxD,4BAA4B,CAC9E,IAAIxiB,EAAUpvC,KAAKq2E,0BAA0Bz1E,GAC1CwuC,GAAS4mC,EAAQt8E,YAAY01C,GAI9BxuC,EAAS6tC,YAAY,cACnBF,EAASvuC,KAAKs2E,sBAAsB11E,KAC7Bo1E,EAAQt8E,YAAY60C,IAQhC,OAFAknC,EAAQ/7E,YAAYs8E,GACpB5xE,EAAO1K,YAAY+7E,GACZrxE,GAGR6wE,EAAyBxhF,UAAUwiF,oBAAsB,SAASr1E,GACjE,IAAI6F,EAAY7F,EAASwvC,qBAEzB,GAAG3pC,GAAaA,EAAUzR,OAAO,CAChC,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,2BAC/B,IAKImH,EAAMP,EAAgBmG,oBAAoB,iBAAkBG,EAAW7F,EAASyvC,gBALrE,SAAS37C,GACpBA,GACFkM,EAAS0vC,SAAS57C,MAKpB,OADA0R,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAGR6uE,EAAyBxhF,UAAU0iF,iBAAmB,SAASv1E,GAC9D,OAAOT,EAAgBqE,cAAc,cAAe,WAAY5D,EAASpN,WAAY,mDAAqDoN,EAASpN,aAGpJyhF,EAAyBxhF,UAAU2iF,oBAAsB,SAASx1E,GACjE,OAAOT,EAAgBqE,cAAc,gBAAiB,OAAQ5D,EAASqE,QAAS,qDAGjFgwE,EAAyBxhF,UAAUsiF,sBAAwB,SAASn1E,GACnE,IAAI6D,EAAM7D,EAAS8D,aACnB,OAAOvE,EAAgBqE,cAAc,oBAAoB,EAAOC,EAAG,KAAOA,EAAIE,SAG/EswE,EAAyBxhF,UAAUqiF,qBAAuB,SAASl1E,GAClE,IAAI6D,EAAM7D,EAAS8D,aACnB,OAAOvE,EAAgBqE,cAAc,UAAUC,EAAIE,QAAQ,EAAOF,EAAIE,OAAQF,EAAIE,SAGnFswE,EAAyBxhF,UAAUmiF,oBAAsB,SAASh1E,GACjE,IAAIgE,EAAMhE,EAASiE,WACnB,OAAO1E,EAAgBqE,cAAc,kBAAkB,EAAOI,IAG/DqwE,EAAyBxhF,UAAU6iF,sBAAwB,SAAS11E,GACnE,IAAIgE,EAAMhE,EAASkE,aACnB,OAAO3E,EAAgBqE,cAAc,oBAAoB,EAAOI,IAGjEqwE,EAAyBxhF,UAAU4iF,0BAA4B,SAASz1E,GACvE,IAAIiG,EAAcjG,EAASkG,iBAC3B,GAAGD,EAAYE,KAAOF,EAAYG,IACjC,GAAGH,EAAYE,KAAOF,EAAYG,IACjC,IAAIpC,EAAMiC,EAAYE,IAClBxE,EAAO,gBAAkBsE,EAAYE,QAErC,CACAnC,EAAMiC,EAAYE,IAAM,IAAMF,EAAYG,IAC1CzE,EAAO,wBAA0BsE,EAAYE,IACjDxE,GAAQ,0BAA4BsE,EAAYG,SAG7C,GAAGH,EAAYE,IACfnC,EAAM,KAAKiC,EAAYE,IAAI,GAC3BxE,EAAO,wBAA0BsE,EAAYE,QAE7C,KAAGF,EAAYG,IAKnB,OAAO,EAJHpC,EAAM,KAAKiC,EAAYG,IAAI,GAC3BzE,EAAO,wBAA0BsE,EAAYG,IAKlD,OAAO7G,EAAgBqE,cAAc,uBAAwB,cAAeI,EAAKrC,IAGlF0yE,EAAyBxhF,UAAU8iF,oBAAsB,SAASC,EAAa51E,GAC9E,GAAGA,EAAS6tC,YAAY,QAAQ,CAC/B,IAAI5tC,EAAWV,EAAgBsvC,mBAAmB,WAAY7uC,GAC1DC,GAAU21E,EAAY98E,YAAYmH,GAEvC,GAAGD,EAAS6tC,YAAY,UAAU,CACjC,IAAIluC,EAAWP,KAAKy2E,qBAAqB71E,GACrCL,GAAUi2E,EAAY98E,YAAY6G,GAGtC,IAoBI6uC,EAIAG,EAzBF3uC,EAAS6tC,YAAY,SAAW7tC,EAASmE,mBACvCwqC,EAASvvC,KAAK02E,eAAe91E,KACtB41E,EAAY98E,YAAY61C,IAEpC,GAAG3uC,EAAS6tC,YAAY,SAAS,CAChC,IAAIoB,EAAW7vC,KAAK22E,oBAAoB/1E,GACrCivC,GAAU2mC,EAAY98E,YAAYm2C,GAEtC,GAAGjvC,EAAS6tC,YAAY,UAAU,CACjC,IAAIsB,EAAW/vC,KAAK42E,qBAAqBh2E,GACtCmvC,GAAUymC,EAAY98E,YAAYq2C,GAEtC,GAAGnvC,EAAS6tC,YAAY,QAAQ,CAC/B,IAAIwB,EAAUjwC,KAAK62E,mBAAmBj2E,GACnCqvC,GAASumC,EAAY98E,YAAYu2C,GAElCrvC,EAAS6tC,YAAY,WACnBW,EAAUpvC,KAAK82E,mBAAmBl2E,KAC1B41E,EAAY98E,YAAY01C,IAElCxuC,EAAS6tC,YAAY,aACnBW,EAAUpvC,KAAK2F,qBAAqB/E,KAC5B41E,EAAY98E,YAAY01C,IAElCxuC,EAAS6tC,YAAY,QAAU7tC,EAASmE,mBACtCwqC,EAASvvC,KAAK02E,eAAe91E,KACtB41E,EAAY98E,YAAY61C,KAIrC0lC,EAAyBxhF,UAAUsjF,sBAAwB,SAASvoC,EAAa5tC,GAChF,IAAIlC,EAAWpI,SAASgD,cAAc,OACtCk1C,EAAY90C,YAAYgF,GACNkC,EAAS8sC,wBAoBtB1tC,KAAKu2E,oBAAoB/nC,EAAa5tC,IAG5Cq0E,EAAyBxhF,UAAUkiF,uBAAyB,SAASF,EAAS70E,GAC7E,IAAI4tC,EAAcl4C,SAASgD,cAAc,QACzCk1C,EAAYj1C,aAAa,QAAS,8BAGlC,IAAIm8E,EAAc11E,KAAK+2E,sBAAsBvoC,EAAa5tC,GAE1D,OADA60E,EAAQ/7E,YAAY80C,GACbknC,GAGRT,EAAyBxhF,UAAUijF,eAAiB,SAAS91E,GAC5D,IAAGA,EAASmE,gBAgBP,CACA1E,EAAW,WAAWO,EAAShE,IAAI,SAAvC,IACI0D,GAAYM,EAASuE,kBAAkB,QAAiB,+BAC5D,OAAOhF,EAAgBY,iBAAiB,WAAY,MAAO,MAAOV,EAAUC,GAlB5E,IAAI2G,EAAKrG,EAASsG,2BAClB,GAAGD,GAAMA,EAAGjS,OAAO,CAClB,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,+BAC/B0N,EAAGN,QAAQ,CAAE7T,MAAO,GAAIkH,MAAO,aAC/B,IAAIqG,EAAW,SAAS+G,GACpBA,GACFxG,EAAS0G,SAASF,IAGhB1G,EAAMP,EAAgBmG,oBAAoB,eAAgBW,EAAI,GAAI5G,GAEtE,OADA+F,EAAS1M,YAAYgH,GACd0F,EAQT,OAAO,GAGR6uE,EAAyBxhF,UAAUyiF,gBAAkB,SAASt1E,GAC7D,IAAI6F,EAAY7F,EAASo2E,oBAEzB,GAAGvwE,GAAaA,EAAUzR,OAAO,CAChC,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,gCAC/BkN,EAAUE,QAAQ,CAAE7T,MAAO,GAAIkH,MAAO,eACtC,IAGI0G,EAAMP,EAAgBmG,oBAAoB,cAAeG,EAAW,IAHzD,SAAS/R,GACvBkM,EAASq2E,UAAUviF,MAIpB,OADA0R,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAGR6uE,EAAyBxhF,UAAUgjF,qBAAuB,SAAS71E,GAClE,IACIN,GAAYM,EAASuE,kBAAkB,WAAoB,kCAC/D,OAAOhF,EAAgBY,iBAAiB,WAAY,SAAU,UAF/C,WAAWH,EAAQ,WAEgDN,IAGnF20E,EAAyBxhF,UAAUqjF,mBAAqB,SAASl2E,GAEhE,OAAOT,EAAgBY,iBAAiB,WAAY,OAAQ,QAD7C,WAAWH,EAAS4E,WAIpCyvE,EAAyBxhF,UAAUkjF,oBAAsB,SAAS/1E,GACjE,IACIN,GAAYM,EAAS2E,aAAsB,mBAC/C,OAAOpF,EAAgBY,iBAAiB,WAAY,QAAS,SAF9C,WAAWH,EAAS0E,UAE6ChF,IAGjF20E,EAAyBxhF,UAAUojF,mBAAqB,SAASj2E,GAEhE,OAAOT,EAAgBY,iBAAiB,WAAY,OAAQ,QAD7C,WAAWH,EAAS6E,WAIpCwvE,EAAyBxhF,UAAUmjF,qBAAuB,SAASh2E,GAClE,IAAIL,EAAWjK,SAASgD,cAAc,QACtCiH,EAAShH,aAAa,QAAS,4BAC/B,IAAI+G,GAAYM,EAAS2E,aAAsB,YAG/C,OADAhF,EAAS7G,YAAYyG,EAAgBY,iBAAiB,WAAY,OAAQ,QAD3D,WAAWH,EAAS8E,SACyDpF,IACrFC,GAGR00E,EAAyBxhF,UAAUkS,qBAAuB,SAAS/E,GAClE,IAAImF,EAAUnF,EAASsF,sBACvB,GAAGH,GAAWA,EAAQ/Q,OAAO,CAC5B,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,4BAC/B,IAKIkH,EAAWG,EAASyF,gBACpB3F,EAAMP,EAAgBmG,oBAAoB,mBAAoBP,EAAStF,GAN5D,SAAS8F,GACpBA,GACF3F,EAAS4F,UAAUD,MAMrB,OADAH,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAGR6uE,EAAyBxhF,UAAUwuC,UAAY,SAASrhC,EAAUsD,GACjE,IAAIxC,EAASd,EAASmD,UAAY,KAAOnD,EAASpN,WAAa,IAAM0Q,EACrE7N,OAAO8K,UAAY,GAAG9K,OAAO8K,UAAUjK,QAAQ,kBAAkB,IAAM,IAAMwK,GAM9E9P,EAAOD,QAAQ6hF,G,gBCndf,IAAMrzE,EAAkBrM,EAAQ,GAE1BsD,GADmBtD,EAAQ,IACVA,EAAQ,IAE/B,SAAS2/E,KAsKT,SAASyD,KAnKTzD,EAAehgF,UAAU4e,OAAS,SAASzR,GAE1C,GADAZ,KAAKstC,aAAe,IAAI4pC,EACrBl3E,KAAKm3E,OAAO,CACd,IAAIC,EAAUp3E,KAAKq3E,cACnBr3E,KAAKm3E,OAAOrqC,YAAYsqC,GACxBp3E,KAAKm3E,OAASC,OAGdp3E,KAAKm3E,OAASn3E,KAAKq3E,cAepB,OAbAr3E,KAAKm3E,OAAOz9E,YAAYsG,KAAKs3E,iBAAiBt3E,KAAKY,WACnDZ,KAAK8M,KAAO9M,KAAKu3E,kBACdv3E,KAAK8M,MAAM9M,KAAKm3E,OAAOz9E,YAAYsG,KAAK8M,MACxC9M,KAAKstC,eACPttC,KAAKsD,OAAStD,KAAKstC,aAAa/+B,SAASvO,KAAKY,UACpB,QAAvBZ,KAAKY,SAAS42E,MACbx3E,KAAKsD,QAAUtD,KAAK01E,aACtB11E,KAAK01E,YAAYh8E,YAAYsG,KAAKsD,QAI5BtD,KAAKsD,QAAQtD,KAAKm3E,OAAOz9E,YAAYsG,KAAKsD,SAE5CtD,KAAKm3E,QAGb1D,EAAehgF,UAAU4jF,YAAc,WACtC,GAAmC,QAAhCr3E,KAAKY,SAASyvC,eAChB,IAAI1sC,EAAKrN,SAASgD,cAAc,YAG5BqK,EAAKrN,SAASgD,cAAc,QAMjC,OAJAqK,EAAGpK,aAAa,QAAS,0CAA4CyG,KAAKY,SAASyvC,eAAiB,mBAAqBrwC,KAAKY,SAAS5N,MAC9G,QAAtBgN,KAAKY,SAAS5N,MAChB2Q,EAAGpK,aAAa,aAAcyG,KAAKY,SAAS9N,SAEtC6Q,GAGR8vE,EAAehgF,UAAU8jF,gBAAkB,WAC1C,GAAmC,QAAhCv3E,KAAKY,SAASyvC,eAChB,IAAIhsC,EAAU/N,SAASgD,cAAc,YAGjC+K,EAAU/N,SAASgD,cAAc,QAItC,GAFG+K,EAAQ9K,aAAa,QAAS,mEAAmEyG,KAAKY,SAASyvC,eAAiB,iCAEhIrwC,KAAKY,SAAS6tC,YAAY,QACtB,IACC1R,EADiB/8B,KAAKY,SAAS62E,qBACZC,OAAO13E,KAAKY,SAAUZ,UAEzC,KAAGA,KAAKY,SAAS6tC,YAAY,WAIjC,OAAO,EAHN1R,EAAO/8B,KAAK23E,gBAwBjB,OAnBM56C,GAAM14B,EAAQ3K,YAAYqjC,GAmBzB14B,GAMRovE,EAAehgF,UAAUiJ,OAAS,WACjCsD,KAAKm3E,OAAOzuE,WAAWD,YAAYzI,KAAKm3E,SAGzC1D,EAAehgF,UAAUo6C,aAAe,WACvC,GAAG7tC,KAAKstC,cAAgBttC,KAAKsD,OAAQ,CACpC,IAAIwqC,EAAU9tC,KAAKstC,aAAa/+B,SAASvO,KAAKY,UAC9CZ,KAAKsD,OAAOwpC,YAAYgB,GACxB9tC,KAAKsD,OAASwqC,IAIhB2lC,EAAehgF,UAAUs6C,WAAa,WACrC,GAAG/tC,KAAK8M,KAAK,CACZ,IAAIkhC,EAAQhuC,KAAKu3E,kBACjBv3E,KAAK8M,KAAKggC,YAAYkB,GACtBhuC,KAAK8M,KAAOkhC,IAOdylC,EAAehgF,UAAU6jF,iBAAmB,SAAS12E,GACpD,IAAIuD,EAAM7N,SAASgD,cAAc,KACjC6K,EAAI5K,aAAa,QAAS,2BAC1B,IAAI60C,EAAOh3C,EAAejD,YAAYqN,aAAaZ,EAASmD,WACxDqqC,IAAOA,EAAOxtC,EAASmD,YACvBtC,EAAO2sC,EAAM9sC,MAAM,MACftM,OAAS,IAAGo5C,EAAO3sC,EAAK,IAChC,IAEIA,EAFAE,EAAOvK,EAAejD,YAAYqN,aAAaZ,EAASpN,YAK5D,OAJImO,IAAOA,EAAOf,EAASpN,aACvBiO,EAAOE,EAAKL,MAAM,MACdtM,OAAS,IAAG2M,EAAOF,EAAK,IAChC0C,EAAI5K,aAAa,OAAQ60C,EAAO,IAAMzsC,EAAO,IAAMf,EAASsD,OACrDC,GAGRsvE,EAAehgF,UAAUkkF,cAAgB,WACxC,IAAIlzE,EAAMzE,KAAKY,SAAS8D,aACxB,OAAOkzE,mBAAmBzjF,YAAYqQ,cAAc,iBAAiB,EAAOC,EAAG,KAAOA,EAAG,OAG1FgvE,EAAehgF,UAAUokF,iBAAmB,SAAS7uE,GACpD,IAAIsG,EAAOtP,KAKX,OAJW,SAASC,GACnBA,EAAEkjE,iBACF7zD,EAAK1O,SAAS0yC,KAAKtqC,KAKrByqE,EAAehgF,UAAU0uC,aAAe,SAASn5B,EAAMhP,GACtD,IAAI+nC,EAAU/hC,KAAK63E,iBAAiB7uE,GAChCnS,EAAIP,SAASgD,cAAc,KAI/B,GAHAzC,EAAEypB,QAAUyhB,EACZlrC,EAAEuK,KAAK4H,EACPnS,EAAE2J,iBAAiB,QAASuhC,GACzB/nC,EACFnD,EAAE6C,YAAYpD,SAASuD,eAAeG,QAElC,CACJ,IAAIuH,EAAKnK,EAAejD,YAAYqN,aAAawH,GAC9CzH,GACF1K,EAAE0C,aAAa,QAASyP,GACxBnS,EAAE6C,YAAYpD,SAASuD,eAAe0H,KAGtC1K,EAAE6C,YAAYpD,SAASuD,eAAemP,IAGxC,OAAOnS,GAGR48E,EAAehgF,UAAUgyC,MAAQ,WAChCruC,EAAejD,YAAYyH,eAAeoE,KAAKm3E,SAMhDD,EAAqBzjF,UAAU8a,SAAW,SAAS3N,GAClD,GAA8B,QAA3BA,EAASyvC,eACX,IAAIjsC,EAAS9N,SAASgD,cAAc,YAGhC8K,EAAS9N,SAASgD,cAAc,QAGrC,GADA8K,EAAO7K,aAAa,QAAS,+CAAiDqH,EAASyvC,gBACpFzvC,EAAS6tC,YAAY,SAAS,CAChC,IAAIC,EAAW1uC,KAAK83E,iBAAiBl3E,GAClC8tC,GAAUtqC,EAAO1K,YAAYg1C,GAEjC,GAAG9tC,EAAS6tC,YAAY,UAAU,CACjC,IAAIW,EAAUpvC,KAAK2F,qBAAqB/E,GACrCwuC,GAAShrC,EAAO1K,YAAY01C,GAEhC,GAAGxuC,EAAS6tC,YAAY,QAAQ,CAC/B,IAAIM,EAAU/uC,KAAK+3E,gBAAgBn3E,GAChCmuC,GAAS3qC,EAAO1K,YAAYq1C,GAEhC,GAAGnuC,EAAS6tC,YAAY,UAAU,CACjC,IAAIF,EAASvuC,KAAKg4E,kBAAkBp3E,GACjC2tC,GAAQnqC,EAAO1K,YAAY60C,GAE/B,GAAG3tC,EAAS6tC,YAAY,WAAW,CAClC,IAAID,EAAcxuC,KAAKi4E,oBAAoBr3E,GACxC4tC,GAAapqC,EAAO1K,YAAY80C,GAEpC,OAAOpqC,GAGR8yE,EAAqBzjF,UAAUqkF,iBAAmB,SAASl3E,GAC1D,IAAI6F,EAAY7F,EAASwvC,qBAEzB,GAAG3pC,GAAaA,EAAUzR,OAAO,CAChC,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,wBAC/B,IAKImH,EAAMP,EAAgBmG,oBAAoB,cAAeG,EAAW7F,EAASyvC,gBALlE,SAAS37C,GACpBA,GACFkM,EAAS0vC,SAAS57C,MAKpB,OADA0R,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAIR8wE,EAAqBzjF,UAAUskF,gBAAkB,SAASn3E,GACzD,OAAOT,EAAgBqE,cAAc,aAAc,OAAQ5D,EAAS7G,OAAQ,2DAG7Em9E,EAAqBzjF,UAAUukF,kBAAoB,SAASp3E,GAC3D,IAAI6D,EAAM7D,EAAS8D,aACnB,OAAOvE,EAAgBqE,cAAc,UAAUC,EAAIE,QAAQ,EAAOF,EAAIE,OAAQF,EAAIE,SAInFuyE,EAAqBzjF,UAAUwkF,oBAAsB,SAASr3E,GAC7D,IAAI4tC,EAAcl4C,SAASgD,cAAc,QAEzC,GADAk1C,EAAYj1C,aAAa,QAAS,2BAC/BqH,EAAS6tC,YAAY,QAAQ,CAC/B,IAAI5tC,EAAWV,EAAgBsvC,mBAAmB,QAAS7uC,GACxDC,GAAU2tC,EAAY90C,YAAYmH,GAEtC,GAAGD,EAAS6tC,YAAY,UAAU,CACjC,IAAIluC,EAAWP,KAAKk4E,kBAAkBt3E,GACnCL,GAAUiuC,EAAY90C,YAAY6G,GAEtC,GAAGK,EAAS6tC,YAAY,SAAS,CAChC,IAAIkB,EAAW3vC,KAAKm4E,iBAAiBv3E,GAClC+uC,GAAUnB,EAAY90C,YAAYi2C,GAEtC,GAAG/uC,EAAS6tC,YAAY,SAAS,CAChC,IAAIoB,EAAW7vC,KAAKo4E,iBAAiBx3E,GAClCivC,GAAUrB,EAAY90C,YAAYm2C,GAEtC,GAAGjvC,EAAS6tC,YAAY,UAAU,CACjC,IAAIsB,EAAW/vC,KAAKq4E,kBAAkBz3E,GACnCmvC,GAAUvB,EAAY90C,YAAYq2C,GAEtC,GAAGnvC,EAAS6tC,YAAY,QAAQ,CAC/B,IAAIwB,EAAUjwC,KAAKs4E,gBAAgB13E,GAChCqvC,GAASzB,EAAY90C,YAAYu2C,GAErC,GAAGrvC,EAAS6tC,YAAY,QAAQ,CAC/B,IAAIW,EAAUpvC,KAAKu4E,gBAAgB33E,GAChCwuC,GAASZ,EAAY90C,YAAY01C,GAErC,OAAOZ,GAGR0oC,EAAqBzjF,UAAUykF,kBAAoB,SAASt3E,GAC3D,IACIN,GAAYM,EAASuE,kBAAkB,WAAoB,kCAC/D,OAAOhF,EAAgBY,iBAAiB,QAAS,SAAU,UAF5C,WAAWH,EAAQ,WAE6CN,IAGhF42E,EAAqBzjF,UAAU2kF,iBAAmB,SAASx3E,GAC1D,IACIN,GAAYM,EAAS2E,aAAsB,mBAC/C,OAAOpF,EAAgBY,iBAAiB,QAAS,QAAS,SAF3C,WAAWH,EAAS0E,UAE0ChF,IAG9E42E,EAAqBzjF,UAAU6kF,gBAAkB,SAAS13E,GAEzD,OAAOT,EAAgBY,iBAAiB,QAAS,OAAQ,QAD1C,WAAWH,EAAS6E,WAIpCyxE,EAAqBzjF,UAAU8kF,gBAAkB,SAAS33E,GAEzD,OAAOT,EAAgBY,iBAAiB,QAAS,OAAQ,QAD1C,WAAWH,EAAS4E,WAIpC0xE,EAAqBzjF,UAAU0kF,iBAAmB,SAASv3E,GAC1D,IACIN,GAAYM,EAASuE,kBAAkB,UAAmB,iCAC9D,OAAOhF,EAAgBY,iBAAiB,QAAS,QAAS,SAF3C,WAAWH,EAASyE,UAE0C/E,IAG9E42E,EAAqBzjF,UAAU4kF,kBAAoB,SAASz3E,GAC3D,IAAIL,EAAWjK,SAASgD,cAAc,QACtCiH,EAAShH,aAAa,QAAS,yBAC/B,IACI+G,GAAYM,EAAS2E,aAAsB,8BAE/C,OADAhF,EAAS7G,YAAYyG,EAAgBY,iBAAiB,QAAS,OAAQ,QAFxD,WAAWH,EAAS8E,SAEsDpF,IAClFC,GAGR22E,EAAqBzjF,UAAUkS,qBAAuB,SAAS/E,GAC9D,IAAImF,EAAUnF,EAASsF,sBACvB,GAAGH,GAAWA,EAAQ/Q,OAAO,CAC5B,IAAIoR,EAAW9P,SAASgD,cAAc,QACtC8M,EAAS7M,aAAa,QAAS,yBAC/B,IAKIkH,EAAWG,EAASyF,gBACpB3F,EAAMP,EAAgBmG,oBAAoB,cAAeP,EAAStF,GANvD,SAAS8F,GACpBA,GACF3F,EAAS4F,UAAUD,MAMrB,OADAH,EAAS1M,YAAYgH,GACd0F,EAER,OAAO,GAGRxU,EAAOD,QAAQ8hF,G,gBC9Td,IAAM+E,EAAa1kF,EAAQ,KACrBqZ,EAAOrZ,EAAQ,GACfqM,EAAkBrM,EAAQ,GAETA,EAAQ,GAE/B,SAASuiD,EAAyB96C,GACjCyE,KAAKzE,GAAKA,EA4GZ,SAASm4C,EAAqBn4C,GAC7ByE,KAAKzE,GAAKA,EACVyE,KAAK2Q,OAAS3Q,KAAKzE,GAAGoV,SACtB3Q,KAAK6B,cAAgB,IACrB7B,KAAK8B,cAAgB,GA7GtBu0C,EAAyB5iD,UAAU8a,SAAW,WAC7C,IAAIkqE,EAAMniF,SAASgD,cAAc,OACjCm/E,EAAIl/E,aAAa,QAAS,8BAC1B,IAAI+V,EAAOtP,KACX,GAAGA,KAAKzE,IAAMyE,KAAKzE,GAAGoV,SAAS,CACpBra,SAASgD,cAAc,OAC7BC,aAAa,QAAS,8BACpB,IAAIkE,EAAMnH,SAASgD,cAAc,OACjCmE,EAAIlE,aAAa,QAAS,SAC1B,IAAIo/C,EAAKriD,SAASgD,cAAc,MAMhC,GALAq/C,EAAGp/C,aAAa,QAAS,eACzBkE,EAAI/D,YAAYi/C,GAChB8/B,EAAI/+E,YAAY+D,GAGbuC,KAAKzE,GAAGqC,YAAY,iBAAiB,EAChC/G,EAAIP,SAASgD,cAAc,MAC7BC,aAAa,QAAS,qGACpB+V,EAAOtP,KACXnJ,EAAE2J,iBAAiB,SAAS,WACxB2M,EAAM3P,oBAAoBwC,KAAMsP,GAChCA,EAAK/T,GAAGs4C,sBAERz2C,EAAO9G,SAASgD,cAAc,MAC7BC,aAAa,QAAS,iCAC3B1C,EAAE6C,YAAY0D,GACd,IAAIjD,EAAM7D,SAASuD,eAAe,iBAClChD,EAAE6C,YAAYS,GACdw+C,EAAGj/C,YAAY7C,GAGnB,GAAGmJ,KAAKzE,GAAGqC,YAAY,MAAM,EACrB/G,EAAIP,SAASgD,cAAc,MAC7BC,aAAa,QAAS,qGACpB+V,EAAOtP,KACXnJ,EAAE2J,iBAAiB,SAAS,WACxB2M,EAAM3P,oBAAoBwC,KAAMsP,GAC7BA,EAAK/T,GAAGmV,OACPpB,EAAK/T,GAAGk4C,UACvBnkC,EAAK/T,GAAGk6C,kBAEGnmC,EAAK/T,GAAG42C,yBAER/0C,EAAO9G,SAASgD,cAAc,MAC7BC,aAAa,QAAS,iCAC3B1C,EAAE6C,YAAY0D,GACVjD,EAAM7D,SAASuD,eAAe,QAClChD,EAAE6C,YAAYS,GACdw+C,EAAGj/C,YAAY7C,GAEzB,GAAGmJ,KAAKzE,GAAGqC,YAAY,mBAAmB,EAC5B/G,EAAIP,SAASgD,cAAc,MAC7BC,aAAa,QAAS,qGACpB+V,EAAOtP,KACXnJ,EAAE2J,iBAAiB,SAAS,WACzB2M,EAAM3P,oBAAoBwC,KAAMsP,GAC5BA,EAAK/T,GAAGmV,OACPpB,EAAK/T,GAAGk4C,UACvBnkC,EAAK/T,GAAGk6C,kBAEGnmC,EAAK/T,GAAGw4C,uBAER32C,EAAO9G,SAASgD,cAAc,MAC7BC,aAAa,QAAS,iCAC3B1C,EAAE6C,YAAY0D,GACVjD,EAAM7D,SAASuD,eAAe,mBAClChD,EAAE6C,YAAYS,GACdw+C,EAAGj/C,YAAY7C,GAEnB,GAAGmJ,KAAKzE,GAAGqC,YAAY,eAAe,CAClC,IAAI/G,KAAIP,SAASgD,cAAc,MAC7BC,aAAa,QAAS,qGACxB,IASI6D,EATAkS,EAAOtP,KACXnJ,EAAE2J,iBAAiB,SAAS,WACzB2M,EAAM3P,oBAAoBwC,KAAMsP,GAC5BA,EAAK/T,GAAGmV,OACPpB,EAAK/T,GAAGk4C,UACvBnkC,EAAK/T,GAAGk6C,kBAEGnmC,EAAK/T,GAAGq4C,0BAERx2C,EAAO9G,SAASgD,cAAc,MAC7BC,aAAa,QAAS,sCAC3B1C,EAAE6C,YAAY0D,GACVjD,EAAM7D,SAASuD,eAAe,eAClChD,EAAE6C,YAAYS,GACdw+C,EAAGj/C,YAAY7C,IAG1B,OAAO4hF,GAGRpiC,EAAyB5iD,UAAUilF,kBAAoB,WACtD,IAAIC,EAAO34E,KAAKzE,GAAG0V,OAAOyY,WAAWoB,kBACjClmB,EAAO+zE,GAAQA,EAAK,eAAiBA,EAAK,cAAc,UAAYA,EAAK,cAAc,UAAY34E,KAAKzE,GAAGoV,SAC3GioE,EAAQD,GAAQA,EAAK,iBAAmBA,EAAK,gBAAgB,UAAYA,EAAK,gBAAgB,UAAY,GAC9GC,GAAQ,gBAAiB54E,KAAKzE,GAAGoV,SACjC,IAAIjc,EAAM4B,SAASgD,cAAc,QAKjC,OAJA5E,EAAI6E,aAAa,QAAS,yBAC1B7E,EAAI6E,aAAa,QAASq/E,GAC1BlkF,EAAIgF,YAAYpD,SAASuD,eAAe+K,IACrClQ,EAAO4B,SAASgD,cAAc,QAWlCo6C,EAAqBjgD,UAAU8a,SAAW,SAAS9N,GAClD,IAAI6O,EAAOtP,KACP89B,EAAKxnC,SAASgD,cAAc,QAEhC,GADAwkC,EAAGvkC,aAAa,QAAS,6BACtByG,KAAKzE,GAAGoV,SAAS,CACnB,IAAIoyD,EAAMzsE,SAASgD,cAAc,QAKjC,GAJAypE,EAAIxpE,aAAa,QAAS,wBACvByG,KAAKzE,GAAGo2C,SAAS,UAGjB3xC,KAAKzE,GAAGo2C,SAAS,iBAAiB,CACpC,IAAIknC,EAAQviF,SAASgD,cAAc,UACnCu/E,EAAMt/E,aAAa,QAAS,sEAC5Bs/E,EAAMn/E,YAAYpD,SAASuD,eAAe,eAC1Cg/E,EAAMr4E,iBAAiB,SAAS,WAG/B8O,EAAK/T,GAAGs4C,qBAIV,GAAG7zC,KAAKzE,GAAGo2C,SAAS,mBAAmB,CACtC,IAAImnC,EAAQxiF,SAASgD,cAAc,UACnCw/E,EAAMv/E,aAAa,QAAS,kEAC5Bu/E,EAAMp/E,YAAYpD,SAASuD,eAAe,wBAC1Ci/E,EAAMt4E,iBAAiB,SAAS,WAC5B8O,EAAK/T,GAAGmV,KAGXpB,EAAK/T,GAAGqiC,gBACRtuB,EAAK/T,GAAGw4C,sBAIP/zC,KAAKzE,GAAGo2C,SAAS,OAEnBoxB,EAAIrpE,YAAYsG,KAAK+4E,gBAEtBj7C,EAAGpkC,YAAYqpE,QAGfzzD,EAAK/T,GAAGs4C,kBAIT,OAAO/V,GAGR4V,EAAqBjgD,UAAUulF,oBAAsB,WACpD,IAAIjW,EAAMzsE,SAASgD,cAAc,QACjCypE,EAAIxpE,aAAa,QAAS,kDAC1B,IAAI0/E,EAAM3iF,SAASgD,cAAc,QACjC2/E,EAAI1/E,aAAa,QAAS,uCAC1B0/E,EAAIv/E,YAAYpD,SAASuD,eAAe,2BACxC,IAAIq/E,EAAM5iF,SAASgD,cAAc,QAKjC,OAJA4/E,EAAI3/E,aAAa,QAAS,uCAC1B2/E,EAAIx/E,YAAYpD,SAASuD,eAAemG,KAAKzE,GAAGoV,WAChDoyD,EAAIrpE,YAAYu/E,GAChBlW,EAAIrpE,YAAYw/E,GACTnW,GAGRrvB,EAAqBjgD,UAAU0lF,kBAAoB,SAASC,EAAU1uD,EAAMtxB,GAC3E,IAAIkW,EAAOtP,KACP4B,EAAOtL,SAASgD,cAAc,KAQlC,OANAsI,EAAKrI,aAAa,QAAS,0BAC3B4G,EAAgBilB,kBAAkBxjB,EAAMxI,EAAM4G,KAAK6B,cAAe7B,KAAK8B,eACvEs3E,EAAU54E,iBAAiB,SAAS,WACnC8O,EAAK/T,GAAGm2C,YAAYhnB,GACpBpb,EAAK/T,GAAG22C,oBAEFtwC,GAGR8xC,EAAqBjgD,UAAU4lF,cAAgB,WAClC,IAAIvV,mBAAmB9jE,KAAKzE,GAAG0V,QAC9BjR,KAAKzE,GAAG0V,OAAOyY,WAAW2B,sBAKxCqoB,EAAqBjgD,UAAUslF,aAAe,WAC7C,IACIO,EAAMhjF,SAASgD,cAAc,OACjCggF,EAAI5/E,YAAYyT,EAAMhU,aAAa,wBACnC,IAAI4pE,EAAMzsE,SAASgD,cAAc,SACjCypE,EAAIxpE,aAAa,QAAS,8EAC1B,IAAIkvC,EAAQnyC,SAASgD,cAAc,SAC/BuvC,EAAMvyC,SAASgD,cAAc,MAC7BigF,EAAMjjF,SAASgD,cAAc,MACjCigF,EAAI7/E,YAAYpD,SAASuD,eAAe,OACxC0/E,EAAIhgF,aAAa,QAAS,iDAC1B,IAAIigF,EAAMljF,SAASgD,cAAc,MACjCkgF,EAAI9/E,YAAYpD,SAASuD,eAAe,UACxC2/E,EAAIjgF,aAAa,QAAS,oDAC1B,IAAIkgF,EAAMnjF,SAASgD,cAAc,MACjCmgF,EAAI//E,YAAYpD,SAASuD,eAAe,gBACxC4/E,EAAIlgF,aAAa,QAAS,0DAC1B,IAAImgF,EAAMpjF,SAASgD,cAAc,MACjCogF,EAAIngF,aAAa,QAAS,mDAC1BmgF,EAAIhgF,YAAYpD,SAASuD,eAAe,SACxC,IAAI8/E,EAAMrjF,SAASgD,cAAc,MACjCqgF,EAAIpgF,aAAa,QAAS,sDAC1BogF,EAAIjgF,YAAYpD,SAASuD,eAAe,YACxC,IAAI+/E,EAAMtjF,SAASgD,cAAc,MACjCsgF,EAAIlgF,YAAYpD,SAASuD,eAAe,WACxC+/E,EAAIrgF,aAAa,QAAS,qDAC1BsvC,EAAInvC,YAAY6/E,GAChB1wC,EAAInvC,YAAY8/E,GAChB3wC,EAAInvC,YAAY+/E,GAGhB5wC,EAAInvC,YAAYkgF,GAChBnxC,EAAM/uC,YAAYmvC,GAClBk6B,EAAIrpE,YAAY+uC,GAChB,IAAIE,EAAQryC,SAASgD,cAAc,SAC/BgyB,EAAStrB,KAAKzE,GAAG0V,OAAOyY,WAAW2B,qBACvC,IAAI,IAAIwuD,KAAUvuD,EAAO,CACxB,IAAI+0C,EAAQ/0C,EAAOuuD,GACbnvD,EAAOmvD,EAAOv4E,MAAM,KAAK,GAC3B0nC,EAAK1yC,SAASgD,cAAc,MAC5BwgF,EAAMxjF,SAASgD,cAAc,MACjCwgF,EAAIpgF,YAAYsG,KAAKm5E,kBAAkBW,EAAIpvD,EAAMA,IACjDovD,EAAIvgF,aAAa,QAAS,sCAC1B,IAAIy7E,EAAM1+E,SAASgD,cAAc,MACjC07E,EAAIz7E,aAAa,QAAS,yCAC1B,IAAIY,EAAOkmE,GAASA,EAAM,eAAiBA,EAAM,cAAc,UAAYA,EAAM,cAAc,UAAY,GAC3G2U,EAAIt7E,YAAYsG,KAAKm5E,kBAAkBnE,EAAItqD,EAAMvwB,IACjD,IAAI4/E,EAAMzjF,SAASgD,cAAc,MACjCygF,EAAIxgF,aAAa,QAAS,+CACtBY,EAAOkmE,GAASA,EAAM,iBAAmBA,EAAM,gBAAgB,UAAYA,EAAM,gBAAgB,UAAY,GACjH0Z,EAAIrgF,YAAYsG,KAAKm5E,kBAAkBY,EAAIrvD,EAAMvwB,IACjD,IAAI6/E,EAAM1jF,SAASgD,cAAc,MACjC0gF,EAAIzgF,aAAa,QAAS,wCACtBY,EAAOkmE,GAASA,EAAM,kBAAoBA,EAAM,iBAAiB,UAAYA,EAAM,iBAAiB,UAAY,GACpH2Z,EAAItgF,YAAYsG,KAAKm5E,kBAAkBa,EAAItvD,EAAMvwB,IACjD,IAAI8/E,EAAM3jF,SAASgD,cAAc,MACjC2gF,EAAI1gF,aAAa,QAAS,2CACtBY,EAAOkmE,GAASA,EAAM,0BAA4BA,EAAM,yBAAyB,UAAYA,EAAM,yBAAyB,UAAY,GAC5I4Z,EAAIvgF,YAAYsG,KAAKm5E,kBAAkBc,EAAIvvD,EAAMvwB,IACjD,IAAI+/E,EAAM5jF,SAASgD,cAAc,MACjC4gF,EAAI3gF,aAAa,QAAS,aAC1B,IAAIumC,EAAS9/B,KAAKzE,GAAGm5C,kBAAkBhqB,GACpCoV,GAAQo6C,EAAIxgF,YAAYomC,GAE3BkJ,EAAGtvC,YAAYogF,GACf9wC,EAAGtvC,YAAYs7E,GACfhsC,EAAGtvC,YAAYqgF,GAGf/wC,EAAGtvC,YAAYwgF,GACfvxC,EAAMjvC,YAAYsvC,GAKnB,GAHA+5B,EAAIrpE,YAAYivC,GAChB2wC,EAAI5/E,YAAYqpE,GAEb/iE,KAAKzE,GAAGE,gBAAgB,cACX,IAAI+8E,EAAW2B,cAAcn6E,KAAKzE,IACpC+5C,KAAKytB,GAEnB,OAAOuW,GAIR1nF,EAAOD,QAAU,CAAC+hD,uBAAqB2C,6B,gBCrSvC,IAAMj/C,EAAiBtD,EAAQ,GAEzBqZ,GADkBrZ,EAAQ,GACnBA,EAAQ,IAGrB,SAASqmF,EAAc5+E,GACnByE,KAAKzE,GAAKA,EA6Cd,SAASi9E,EAAW4B,EAAYC,GAC7Br6E,KAAKs6E,SAAWF,EAChBp6E,KAAKu6E,OAASH,EAAWG,OACzBv6E,KAAKzE,GAAK6+E,EAAW7+E,GACrByE,KAAKq6E,MAAQA,EACbr6E,KAAKw6E,eAAiBJ,EAAW17E,SA/CpCy7E,EAAc1mF,UAAUgnF,mBAAqB,SAAStyC,GAClD,IAAIsqB,EAAKzyD,KACLsa,EAAQ9F,OAAO2zB,GAAKuyC,UAAU,CAC7BC,WAAY,EACZ97E,WAAY,GACZ+7E,WAAY,CAAC,GAAI,GAAI,GAAI,GAAI,KAC7BtyC,QAAY,EACZ0P,QAAY,EACZ6iC,aAAc,SAASn8E,GACCA,EAASo8E,UAAU5qE,MACxB6qE,EAAE,MAAMxQ,MAAK,WACbvqE,KAAKzG,aAAa,QAASwhF,EAAE/6E,MAAMg7E,YAEtDC,WAAW,CAAC,CAACC,QAAQ,OAAOp+E,UAAU,aACtCq+E,WAAY,SAASnhE,GACF,IAAIkvB,EAAK6xC,EAAE/gE,GAAKohE,KAAK,aACrBlyC,EAAGo/B,KAAK,QAASp/B,EAAG8xC,WAkB5C,OAdAxmE,OAAO2zB,EAAK,SAASV,GAAG,QAAS,MAAM,WACnC,GAAsC,GAAnCntB,EAAM+gE,KAAKr7E,MAAMkE,QAAQyZ,OAMvB80C,EAAGl3D,GAAG22C,qBANX,CACI,IAAIopC,EAAShhE,EAAMN,IAAIxF,OAAOxU,MAAMu7E,QAAQ,OAAO5gF,OAC/C6gF,EAAOruE,EAAMrP,qBAAqBw9E,EAAO,IAC7C7oB,EAAGl3D,GAAGy3C,eAAewoC,OAM7BrzC,EAAI5uC,aAAa,QAAe,qCAChC4uC,EAAI5uC,aAAa,cAAe,KAChC4uC,EAAI5uC,aAAa,cAAe,KAChC4uC,EAAI5uC,aAAa,SAAe,KACzB4uC,GAGXgyC,EAAc1mF,UAAU6hD,KAAO,SAASmmC,GACpC,OAAOz7E,KAAKy6E,mBAAmBgB,IAiBnCjD,EAAW/kF,UAAUioF,aAAe,SAAS57E,EAAM67E,EAAU9+C,GACzD,IAAIvtB,EAAOtP,KAEX,OAAOF,EAAK60B,QAAQ30B,KAAKzE,GAAG0V,QAC3B5V,MAAK,SAAS7E,GAED,IAAIY,EAAe/C,WAAWmC,EAAQsJ,GAElD,OADWwP,EAAKgrE,SAASsB,iCAAiCplF,EAAOygC,SAAU0kD,GAC3DhhF,QALX,OAOA,SAASwV,GACd1Q,QAAQ2O,MAAM+B,GACdb,EAAK/T,GAAG6iC,UAAUjuB,OA+CxBqoE,EAAW/kF,UAAUooF,6BAA+B,SAASF,GACtD37E,KAAKq6E,OAAOltE,EAAM7R,qBAAqB0E,KAAKzE,GAAIogF,EAASG,UAC5D,IAAIh8E,EAAOqN,EAAM3O,0BAA0B,KAAMm9E,GASjD,OAPG37E,KAAKq6E,QAC2B,QAA5BsB,EAASI,UAAUjpF,MAClB6oF,EAASG,SAAShpF,MAAQ8H,KAAKC,UAAUiF,EAAKgO,mBAAeC,EAAW,GACvE4tE,EAASG,SAAShpF,MAAQ8H,KAAKC,UAAUiF,OAAMiO,EAAW,GAC/DZ,EAAMtR,cAAcmE,KAAKzE,GAAIogF,EAASG,SAAU,QAAS,eAGtDh8E,GAOX04E,EAAW/kF,UAAUuoF,oBAAsB,SAASvpB,EAAIwpB,GACpD,IAAIN,EAAW,GASf,OARAA,EAAS98E,WAAco9E,EAAoBC,gBAC3CP,EAAS78E,MAAcm9E,EAAoBE,eAC3CR,EAASrmC,KAAc2mC,EAAoBG,MAC3CT,EAASG,SAAcrpB,EAAGqpB,SAC1BH,EAASI,UAActpB,EAAGspB,UACvB/7E,KAAKq6E,MAAOsB,EAASl9E,MAAQg0D,EAAGh0D,MAC9Bk9E,EAASl9E,MAAQ,4BACtBk9E,EAASU,YAAc5pB,EAAG4pB,YACnBV,GAQXnD,EAAW/kF,UAAU6oF,MAAQ,SAASn0C,EAAKzpC,EAAUm+B,GAEjDzlC,EAAejD,YAAYyH,eAAeoE,KAAKu8E,OAC/Cv8E,KAAKu8E,MAAQjmF,SAASgD,cAAc,OACpC0G,KAAKu8E,MAAM7iF,YAAYyuC,GACvBtL,EAAUnjC,YAAYsG,KAAKu8E,OAE3Bv8E,KAAK87E,SAAWp9E,EAASo9E,SACzB97E,KAAKvB,MAAQC,EAASD,MACtBuB,KAAKq8E,YAAc39E,EAAS29E,YAC5Br8E,KAAK+7E,UAAYr9E,EAASq9E,WAI9BvD,EAAW/kF,UAAU+oF,qBAAuB,SAASb,GACjD37E,KAAKw6E,eAAe37E,WAAa88E,EAAS98E,WAC1CmB,KAAKw6E,eAAe17E,MAAa68E,EAAS78E,OAG9C05E,EAAW/kF,UAAUgpF,mBAAqB,SAASC,EAAUC,EAAW9/C,GACpE,IAAI8+C,EAAW37E,KAAKg8E,oBAAoBh8E,KAAM28E,GAC9C38E,KAAKw8E,qBAAqBb,GAE1B,IAAI77E,EAAOE,KAAK67E,6BAA6BF,GAC7C,OAAO37E,KAAK07E,aAAa57E,EAAM67E,EAAU9+C,IAK7C27C,EAAW/kF,UAAUmpF,kBAAoB,SAASnB,EAAU5+C,GACxD,IAAI41B,EAAKzyD,KACLmoC,EAAMszC,EAAStzC,IACnBnoC,KAAKs8E,MAAMn0C,EAAKnoC,KAAKs6E,SAAS57E,SAAUm+B,GAExC,IAAIviB,EAAQ9F,OAAO2zB,GAAKuyC,UAAU,CAC7BC,WAAc,EACd97E,WAAc4zD,EAAG6nB,SAAS57E,SAASG,WACnCg+E,YAAc,EACdC,YAAc,EACdlC,WAAc,CAAC,GAAI,GAAI,GAAI,KAC3Bz+E,IAAc,UACdqsC,QAAcizC,EAASjlF,OAAOgyC,QAC9BF,QAAc,EACd0P,QAAc,EACd+kC,WAAc,EACdC,KAAc,SAAUriF,EAAM0F,EAAU3B,GACrB,GAAGnM,OAAO0qF,QAAQxB,EAASjlF,OAAOmE,MAAM3F,OAAS,EAAE,CAE/C,IAAIm+B,EAAMsoD,EAASjlF,OAAOmE,KAC1B8gF,EAASjlF,OAAOmE,KAAO,GACvB0F,EAAS8yB,QAGTs/B,EAAGgqB,mBAAmBz8E,KAAMtB,EAAUm+B,GACjCxhC,MAAK,SAAS7E,GACd6J,EAAS7J,OAIrCy+C,QAAc,CAAC,CAAEr+C,OAAQ,OAAQwC,KAAM,qBACxB,CAAExC,OAAQ,QAASwC,KAAM,oBACxC6hF,WAAc,CAAC,CAAEC,QAAQ,OACRp+E,UAAU,aAC3Bq+E,WAAc,SAASnhE,GACJ,IAAIkvB,EAAK6xC,EAAE/gE,GAAKohE,KAAK,aACrBlyC,EAAGo/B,KAAK,QAASp/B,EAAG8xC,SACvCkC,SAAc,IAuBnB,OAnBA1oE,OAAO2zB,EAAK,SAASV,GAAG,QAAS,MAAM,WAChCntB,EAAM+gE,KAAKr7E,MAAMrF,MACqB,QAAlCqF,KAAK26B,UAAU54B,UAAU,EAAG,IACxB0wD,EAAG6nB,SAAS9jF,OAAO+E,KAC3Bk3D,EAAG6nB,SAAS9jF,OAAO+E,GAAGq2C,aAAa5xC,KAAK26B,WACxC83B,EAAG6nB,SAAS9jF,OAAO+E,GAAG2b,SACtBu7C,EAAG6nB,SAAS6C,qBAAqB1qB,EAAGl3D,QAO3C4sC,EAAI5uC,aAAa,QAAe,oBAChC4uC,EAAI5uC,aAAa,QAAe,uBAChC4uC,EAAI5uC,aAAa,cAAe,KAChC4uC,EAAI5uC,aAAa,cAAe,KAChC4uC,EAAI5uC,aAAa,SAAe,KAEzB4uC,GAMXqwC,EAAW/kF,UAAU6hD,KAAO,SAASmmC,EAAU5+C,GAC3C,OAAO78B,KAAK48E,kBAAkBnB,EAAU5+C,IAG5CjrC,EAAOD,QAAQ,CAAC6mF,aAAY2B,kB,gBClQ5B,IAAMhtE,EAAQrZ,EAAQ,GAEtB,SAASu9C,EAAkB91C,EAAI7G,GAC9BsL,KAAKzE,GAAKA,EACVyE,KAAKtL,IAAMA,EACXsL,KAAKo9E,WAAY,EACjBp9E,KAAKq9E,WAAY,EAGlBhsC,EAAkB59C,UAAU6pF,YAAc,WACzC,OAAOhnF,SAASuD,eAAe,YAGhCw3C,EAAkB59C,UAAU8pF,gBAAkB,SAASC,EAAInqC,EAAOoqC,EAAMnb,GACvE,IAAIgC,EAAMhuE,SAASgD,cAAc,OACjCgrE,EAAI/qE,aAAa,QAAS,oHAAoH85C,GAC9I,IAAIzuC,EAAMtO,SAASgD,cAAc,QAOjC,OANAsL,EAAIrL,aAAa,QAAS,uFAAuF85C,GACjHzuC,EAAIlL,YAAYpD,SAASuD,eAAe4jF,IACxCD,EAAGjkF,aAAa,OAAQ,QACxBikF,EAAGjkF,aAAa,cAAe+oE,GAC/BgC,EAAI5qE,YAAYkL,GAChB0/D,EAAI5qE,YAAY8jF,GACTlZ,GAGRjzB,EAAkB59C,UAAU8a,SAAW,WACtC,IAAIw0D,EAAMzsE,SAASgD,cAAc,OACjCypE,EAAIxpE,aAAa,QAAS,qCAC1BwpE,EAAIrpE,YAAYyT,EAAMhU,aAAa,+BACnC,IAAIirE,EAAM9tE,SAASgD,cAAc,OACjC8qE,EAAI7qE,aAAa,QAAS,4CAC1BwpE,EAAIrpE,YAAY0qE,GAChBpkE,KAAKo9E,UAAY9mF,SAASgD,cAAc,SACxC0G,KAAKo9E,UAAU7jF,aAAa,QAAS,uFAClCyG,KAAKtL,MACPsL,KAAKo9E,UAAUtqF,MAAQkN,KAAKtL,KAE7B,IAAI2vE,EAAM/tE,SAASgD,cAAc,OACjC+qE,EAAI9qE,aAAa,QAAS,4BAC1B6qE,EAAI1qE,YAAY2qE,GAChBD,EAAI1qE,YAAYsG,KAAKu9E,gBAAgBv9E,KAAKo9E,UAAW,UAAW,MAAO,oBACvEp9E,KAAKq9E,UAAY/mF,SAASgD,cAAc,SACxC0G,KAAKq9E,UAAU9jF,aAAa,QAAS,0DACrC6qE,EAAI1qE,YAAYsG,KAAKu9E,gBAAgBv9E,KAAKq9E,UAAW,UAAW,MAAO,mBACvE,IAAIK,EAAWpnF,SAASgD,cAAc,OACtCokF,EAASnkF,aAAa,QAAS,4BAC/B,IAAIwrE,EAAUzuE,SAASgD,cAAc,UACrCyrE,EAAQxrE,aAAa,QAAS,mFAC9BwrE,EAAQrrE,YAAYpD,SAASuD,eAAe,YAC5C,IAAIyV,EAAOtP,KAQX,OAPA+kE,EAAQvkE,iBAAiB,SAAS,WAC9B8O,EAAK8tE,UAAUtqF,OACjBwc,EAAK/T,GAAG+3C,KAAKhkC,EAAK8tE,UAAUtqF,MAAOwc,EAAK+tE,UAAUvqF,UAGpD4qF,EAAShkF,YAAYqrE,GACrBX,EAAI1qE,YAAYgkF,GACT3a,GAIRnxE,EAAOD,QAAQ0/C,G,8RC9Df,IAAMssC,aAAc7pF,oBAAQ,IACtBmvB,iBAAmBnvB,oBAAQ,IAC3BovB,iBAAmBpvB,oBAAQ,IAC3BqvB,kBAAoBrvB,oBAAQ,IAC5BsvB,kBAAoBtvB,oBAAQ,IAC5BuvB,iBAAmBvvB,oBAAQ,IAC3BwvB,iBAAmBxvB,oBAAQ,IAC3ByvB,qBAAuBzvB,oBAAQ,IAC/B0vB,qBAAuB1vB,oBAAQ,IAC/B2vB,eAAiB3vB,oBAAQ,IACzB4vB,eAAiB5vB,oBAAQ,IACzB6vB,iBAAmB7vB,oBAAQ,IAC3B8vB,iBAAmB9vB,oBAAQ,IAC3B+vB,gBAAkB/vB,oBAAQ,IAC1BgwB,gBAAkBhwB,oBAAQ,IAC1BiwB,eAAiBjwB,oBAAQ,IACzBkwB,iBAAmBlwB,oBAAQ,IAC3BmwB,gBAAkBnwB,oBAAQ,IAC1BowB,gBAAkBpwB,oBAAQ,IAE1BqwB,gBAAkBrwB,oBAAQ,IAC1BswB,gBAAkBtwB,oBAAQ,IAC1BuwB,iBAAmBvwB,oBAAQ,IAC3BwwB,eAAiBxwB,oBAAQ,IACzBsD,eAAiBtD,oBAAQ,GAE3B0wB,aAAe,CAClBqR,sBAAuB,GACvBC,sBAAuB,GACvBK,uBAAwB,SAASp8B,EAAMo3B,GACtC,IAAIiF,EAAS,CAAC,oBAOd,OANGjF,QAA6D,IAAzCnxB,KAAK61B,sBAAsB1E,KACjDiF,EAASA,EAAOC,OAAOr2B,KAAK61B,sBAAsB1E,UAEL,IAApCnxB,KAAK61B,sBAAsB97B,KACpCq8B,EAASA,EAAOC,OAAOr2B,KAAK61B,sBAAsB97B,KAE5Cq8B,GAERE,uBAAwB,SAASv8B,EAAMo3B,GACtC,IAAIiF,EAAS,CAAC,oBACd,GAAGjF,QAA6D,IAAzCnxB,KAAK81B,sBAAsB3E,GAA0B,CAC3E,IAAIoF,EAAUv2B,KAAK81B,sBAAsB3E,GACzC,GAAGoF,EACF,IAAI,IAAI1kC,EAAI,EAAGA,EAAE0kC,EAAQvhC,OAAQnD,KACE,GAA/BukC,EAAO9pB,QAAQiqB,EAAQ1kC,KAAWukC,EAAOprB,KAAKurB,EAAQ1kC,IAO5D,YAH8C,IAApCmO,KAAK81B,sBAAsB/7B,KACpCq8B,EAASA,EAAOC,OAAOr2B,KAAK81B,sBAAsB/7B,KAE5Cq8B,GAERwnD,UAAW,mBAAS7jF,KAAM1B,QAAS66B,UAClC,IAAI2qD,GAAK79E,KAAKgb,UAAUjhB,MACxB1B,QAAWA,SAAmB,GAC9B,IACC,IAAIkO,OAASxG,KAAK,OAAShG,KAAO,IAAMA,KAAO,IAAMa,KAAKC,UAAUxC,SAAW,KAE/E,OADG66B,WAAU3sB,OAAOxM,KAAOm5B,UACpB3sB,OAER,MAAMtG,GACL0P,MAAM,oBAAsB1P,EAAEzL,cAGhCspF,wBAAyB,SAAS/jF,EAAMo3B,GAIvC,IAHA,IAAIprB,EAAU,GACVg4E,EAAW,GACX5sE,EAAOnR,KAAKm2B,uBAAuBp8B,EAAMo3B,GACrCt/B,EAAI,EAAGA,EAAEsf,EAAKnc,OAAQnD,KACI,GAA9BksF,EAASzxE,QAAQ6E,EAAKtf,KACxBksF,EAAS/yE,KAAKmG,EAAKtf,IAGrB,IAAQA,EAAI,EAAGA,EAAEksF,EAAS/oF,OAAQnD,IACjC,GAAGmO,KAAKgb,UAAU+iE,EAASlsF,IAAI,CAC9B,IAAI4wE,EAAOziE,KAAKgb,UAAU+iE,EAASlsF,IACnCkU,EAAQiF,KAAK,CAAClY,MAAOirF,EAASlsF,GAAImI,MAAOyoE,EAAKzoE,QAGhD,OAAO+L,GAERi4E,wBAAyB,SAASjkF,EAAMo3B,GAIvC,IAHA,IAAIprB,EAAU,GACVg4E,EAAW,GACX5sE,EAAOnR,KAAKs2B,uBAAuBv8B,EAAMo3B,GACrCt/B,EAAI,EAAGA,EAAEsf,EAAKnc,OAAQnD,KACI,GAA9BksF,EAASzxE,QAAQ6E,EAAKtf,KACxBksF,EAAS/yE,KAAKmG,EAAKtf,IAGrB,IAAQA,EAAI,EAAGA,EAAEksF,EAAS/oF,OAAQnD,IACjC,GAAGmO,KAAKgb,UAAU+iE,EAASlsF,IAAI,CAC9B,IAAI4wE,EAAOziE,KAAKgb,UAAU+iE,EAASlsF,IACnCkU,EAAQiF,KAAK,CAAClY,MAAOirF,EAASlsF,GAAImI,MAAOyoE,EAAKzoE,QAGhD,OAAO+L,GAER0wB,sBAAuB,SAAS18B,EAAMo3B,GACrC,IAAI3kB,EAAOxM,KAAKm2B,uBAAuBp8B,EAAMo3B,GAC7C,OAAO3kB,EAAKA,EAAKxX,OAAO,IAEzBwhC,sBAAuB,SAASz8B,EAAMo3B,GACrC,IAAI3kB,EAAOxM,KAAKs2B,uBAAuBv8B,EAAMo3B,GAC7C,OAAO3kB,EAAKA,EAAKxX,OAAO,IAEzByvB,uBAAwB,SAASle,EAAQvM,EAAO28B,GAC/C,IAAI,IAAI9kC,EAAI,EAAGA,EAAI8kC,EAAM3hC,OAAQnD,SACkB,IAAxCmO,KAAK61B,sBAAsBc,EAAM9kC,MAC1CmO,KAAK61B,sBAAsBc,EAAM9kC,IAAM,KAEoB,GAAzDmO,KAAK61B,sBAAsBc,EAAM9kC,IAAIya,QAAQ/F,KAC/CvG,KAAK61B,sBAAsBc,EAAM9kC,IAAImZ,KAAKzE,GAC1CvG,KAAKgb,UAAUzU,GAAU,CAACvM,MAAOA,KAIpC0qB,uBAAwB,SAASne,EAAQvM,EAAO28B,GAC/C,IAAI,IAAI9kC,EAAI,EAAGA,EAAI8kC,EAAM3hC,OAAQnD,SACkB,IAAxCmO,KAAK81B,sBAAsBa,EAAM9kC,MAC1CmO,KAAK81B,sBAAsBa,EAAM9kC,IAAM,KAEoB,GAAzDmO,KAAK81B,sBAAsBa,EAAM9kC,IAAIya,QAAQ/F,KAC/CvG,KAAK81B,sBAAsBa,EAAM9kC,IAAImZ,KAAKzE,GAC1CvG,KAAKgb,UAAUzU,GAAU,CAACvM,MAAOA,KAIpCgrB,2BAA4B,SAASze,EAAQvM,EAAOm3B,GACnDnxB,KAAKgb,UAAUzU,GAAU,CAACvM,MAAOA,QACkB,IAAzCgG,KAAK81B,sBAAsB3E,KAA2BnxB,KAAK81B,sBAAsB3E,GAAa,KAC3C,GAA1DnxB,KAAK81B,sBAAsB3E,GAAW7kB,QAAQ/F,IAChDvG,KAAK81B,sBAAsB3E,GAAWnmB,KAAKzE,IAG7C03E,2BAA4B,SAAS13E,EAAQvM,EAAOm3B,GACnDnxB,KAAKgb,UAAUzU,GAAU,CAACvM,MAAOA,QACkB,IAAzCgG,KAAK61B,sBAAsB1E,KAA2BnxB,KAAK61B,sBAAsB1E,GAAa,KAC3C,GAA1DnxB,KAAK61B,sBAAsB1E,GAAW7kB,QAAQ/F,IAChDvG,KAAK61B,sBAAsB1E,GAAWnmB,KAAKzE,IAG7CyU,UAAW,CACViI,iBAAkB,CAAEjpB,MAAO,iBAC3BkpB,iBAAkB,CAAElpB,MAAO,kBAI7BwqB,UAAyB,SAASpQ,GACpB,SAAVA,IACFpU,KAAK0kB,uBAAuB,kBAAmB,oBAAqB,CAAC,iBAAkB,yBAA0B,0BACjH1kB,KAAKykB,uBAAuB,kBAAmB,oBAAqB,CAAC,iBAAkB,yBAA0B,2BAErG,SAAVrQ,GACFpU,KAAK0kB,uBAAuB,mBAAoB,4BAA6B,CAAC,aAElE,WAAVtQ,GACFoQ,aAAaQ,2BAA2B,iBAAkB,2BAA4B,YAE1E,cAAV5Q,GACFoQ,aAAaQ,2BAA2B,iBAAkB,2BAA4B,aAIxFR,iBAAgC,SAASnsB,EAASuI,GACjD,IAAIs9E,EAAmBl+E,KAAKm+E,eAAe9lF,EAASuI,GAqBpD,GApBGs9E,GAAoBA,EAAiBlrF,KACvC4N,EAAS5N,KAAOkrF,EAAiBlrF,KAG9B4N,EAASiD,QAAUjD,EAASiD,OAAO7Q,KAAM4N,EAAS5N,KAAO4N,EAASiD,OAAO7Q,KACvE4N,EAAS5N,KAAO,OAEnBkrF,GAAoBA,EAAiBpiF,KACvC8E,EAAS9E,KAAOoiF,EAAiBpiF,KAG9B8E,EAASiD,QAAUjD,EAASiD,OAAO/H,KAAM8E,EAAS9E,KAAO8E,EAASiD,OAAO/H,KACvE8E,EAAS9E,KAAO,OAEnBoiF,GAAoBA,EAAiBE,OACvCx9E,EAASw9E,OAASF,EAAiBE,OAGnCx9E,EAASw9E,OAASx9E,EAASy9E,mBAEzBH,GAAoBA,EAAiB1G,OAA2D,UAAlD,QAAO52E,EAASw9E,OAAOF,EAAiB1G,QACxF52E,EAAS42E,MAAQ0G,EAAiB1G,UAE9B,CACJ,IAAI8G,EAAW19E,EAAS29E,kBACe,UAApC,QAAO39E,EAASw9E,OAAOE,IACzB19E,EAAS42E,MAAQ8G,EAGjB19E,EAAS42E,MAAQpkF,IAAIwN,EAASw9E,QAmChC,OAhCGF,GAAoBA,EAAiBM,sBACvC59E,EAAS49E,sBAAwBN,EAAiBM,sBAE3C59E,EAASiD,OAAQjD,EAAS49E,sBAAwB36E,OAAO26E,sBAC5D59E,EAAS49E,uBAAwB,EACnCN,GAAwD,UAApC,QAAOA,EAAiBj7E,UAC9CrC,EAASqC,SAAWi7E,EAAiBj7E,SAGrCrC,EAASqC,SAAWrC,EAASw9E,OAAOx9E,EAAS42E,OAAOv0E,SAGlDi7E,GAAwD,UAApC,QAAOA,EAAiB5sC,UAC9C1wC,EAAS0wC,SAAW4sC,EAAiB5sC,SAGrC1wC,EAAS0wC,SAAW1wC,EAASw9E,OAAOx9E,EAAS42E,OAAOlmC,SAGlD4sC,QAA0D,IAA/BA,EAAiBO,aAC9C79E,EAAS69E,WAAaP,EAAiBO,WACpCP,EAAiBQ,gBACnB99E,EAAS89E,cAAgBR,EAAiBQ,gBAEzCR,QAAsD,IAA3BA,EAAiB56E,SAE9C1C,EAAS+9E,cAAgB,IAAIhB,aAAatwC,wBAExC6wC,GAA2BA,EAAiB1rE,OAE5C0rE,GAA2BA,EAAiB1hE,KAExCnkB,GAIRmsB,eAA8B,SAASnsB,EAASuI,GAC/C,IAAIs9E,EAAmB,GAEvB,IAAI,IAAI9qF,KAAOiF,EACJ,SAAPjF,IACF8qF,EAAiB9qF,GAAOiF,EAAQjF,IAalC,OAAO8qF,IAGR15D,aAAaC,uBAAuB,oBAAqB,kBAAmB,CAAC,gBAC7ED,aAAaE,uBAAuB,oBAAqB,kBAAmB,CAAC,gBAC7EF,aAAay5D,2BAA2B,mBAAoB,gBAAiB,SAC7Ez5D,aAAaQ,2BAA2B,mBAAoB,kBAAmB,SAC/ER,aAAaC,uBAAuB,uBAAwB,oBAAqB,CAAC,iBAAkB,yBAA0B,0BAC9HD,aAAaE,uBAAuB,uBAAwB,oBAAqB,CAAC,iBAAkB,yBAA0B,0BAC9HF,aAAaC,uBAAuB,iBAAkB,cAAe,CAAC,WAAY,WAAY,eAAgB,YAC7G,iBAAkB,aAAc,WAAY,iBAAkB,gBAAiB,sBAChFD,aAAaE,uBAAuB,iBAAkB,cAAe,CAAC,WAAY,WAAY,gBAAiB,eAAgB,YAC9H,iBAAkB,aAAc,WAAY,iBAAkB,gBAAiB,sBAChFF,aAAay5D,2BAA2B,mBAAoB,kBAAmB,YAC/Ez5D,aAAaQ,2BAA2B,mBAAoB,oBAAqB,YACjFR,aAAaC,uBAAuB,kBAAmB,eAAgB,CAAC,UAAW,aAAc,qBACjGD,aAAaE,uBAAuB,kBAAmB,eAAgB,CAAC,qBACxEF,aAAaC,uBAAuB,kBAAmB,eAAgB,CAAC,UAAW,aAAc,qBACjGD,aAAaE,uBAAuB,kBAAmB,eAAgB,CAAC,qBACxEF,aAAaC,uBAAuB,iBAAkB,cAAe,CAAC,UAAW,eACjFD,aAAaC,uBAAuB,mBAAoB,qBACtD,CAAC,cAAe,aAAc,YAAa,YAAa,cAAe,WACtE,yBAA0B,sBAAuB,sBAAuB,2BAC3ED,aAAaC,uBAAuB,kBAAmB,eAAgB,CAAC,iBAAkB,gBAAiB,mBAAoB,qBAC/HD,aAAaE,uBAAuB,kBAAmB,eAAgB,CAAC,iBAAkB,gBAAiB,mBAAoB,qBAG/H9yB,OAAOD,QAAQ6yB","file":"terminus-dashboard.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 62);\n","'use strict';\nmodule.exports = {\n\t\t\t\t WOQLClient:require('./lib/woqlClient'),\n                  ConnectionCapabilities:require('./lib/connectionCapabilities'),\n                  ConnectionConfig:require('./lib/connectionConfig'),\n                  IDParser:require('./lib/terminusIDParser'),\n                  ErrorMessage:require('./lib/errorMessage'),\n                  FrameHelper:require('./lib/frameHelper'),\n                  ObjectFrame:require('./lib/objectFrame'),\n                  WOQLResult:require('./lib/woqlResult'),\n                  WOQL:require('./lib/woql')};","'use strict';\n\nvar bind = require('./helpers/bind');\nvar isBuffer = require('is-buffer');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Function equal to merge with the difference being that no reference\n * to original objects is kept.\n *\n * @see merge\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction deepMerge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = deepMerge(result[key], val);\n    } else if (typeof val === 'object') {\n      result[key] = deepMerge({}, val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  deepMerge: deepMerge,\n  extend: extend,\n  trim: trim\n};\n","/**\n * @file Javascript Api explorer tool\n * @author Kitty Jose\n * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more\n *\n * @summary Set of functions used across scripts\n */\nconst Codemirror= require('./plugins/codemirror.terminus');\nconst TerminusClient = require('@terminusdb/terminus-client');\n// function to read Files\nfunction readFile(file){\n    if (window.XMLHttpRequest){\n        // code for IE7+, Firefox, Chrome, Opera, Safari\n        xmlhttp=new XMLHttpRequest();\n    }\n    else{\n        // code for IE6, IE5\n        xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\");\n    }\n    xmlhttp.open(\"GET\",file,false);\n    xmlhttp.send();\n    xmlDoc=xmlhttp.responseText;\n    return xmlDoc;\n} // readFile()\n\n// function to write api call signatures from woql client\nfunction getFunctionSignature(which){\n  var sigs = {};\n  sigs.connect = {\n    spec   : \"WOQLClient.connect(surl, key)\",\n    descr  : \"\\n\\nConnect to a Terminus server at the given URI with an API key\"\n                + \"Stores the terminus:ServerCapability document returned in the connection register\"\n                + \"which stores, the url, key, capabilities, and database meta-data for the connected server\"\n                + \"If the curl argument is false or null, the this.server will be used if present,\"\n                + \" or the promise will be rejected.\"\n                + \"\\n1)The first (surl) argument: {string} argument it is the Server Url\"\n                + \"\\n2)The second(key) argument: {string} argument contains an API key\",\n    result : \"HTTP 200 on success, 409 for already existing database, otherwise error code\",\n    args   : {server_url : 'url', key: 'Api key'},\n    options: { title: \"\", description: \"\" }\n  };\n  sigs.create = {\n    spec    : \"WOQLClient.createDatabase(dburl, details, key)\",\n    descr   : \"\\n\\nCreate a Terminus Database\"\n                + \"\\n1)The first (dburl) argument:{string}, it is a terminusDB Url or a terminusDB Id \"\n                + \"\\n2)The second(details) argument:{object}, details which is the payload\"\n                + \"\\n which included information of the new database to be created\"\n                +  \"\\n3)The third (key) argument:{string}, contains an API key \",\n    result : \"HTTP 200 on success, 409 for already existing database, otherwise error code\",\n    args   : {database_url : 'url', details: '', key: ' Api key'},\n    options: { title: \"\", description: \"\" }\n  };\n  sigs.delete = {\n      spec  : \"WOQLClient.deleteDatabase(dburl, key)\",\n      descr : \"\\n\\nDeletes a Database\"\n                + \"\\n1)The first (dburl) argument: {string}, it is a terminusDB Url or a terminusDB Id \"\n                + \"\\n2)The second(key) argument: {string}, contains an API key\",\n      result: \"HTTP 200 on success, otherwise error code\",\n  };\n  sigs.getSchema = {\n    spec   : \"WOQLClient.getSchema(surl, options)\",\n    descr  : \"\\n\\nGets the schema of a database.\"\n             +\"\\n1)The first (surl) argument: {string}, it is a dbUrl/schema\"\n             + \"\\n2)The second(key) argument: {string}, contains an API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    options: { format: \"turtle\" }\n  };\n  sigs.getClassFrames = {\n    spec   : \"WOQLClient.getClassFrame = function(cfurl, cls, opts)\",\n    descr  : \"\\n\\nRetrieves a WOQL query on the specified database which updates the state and returns the results\"\n              +  \"\\nThe first (cfurl) argument can be\"\n              + \"\\n1) a valid URL of a terminus database or\"\n              +  \"\\n2) omitted - the current database will be used\"\n              +  \"\\nthe second argument (cls) is the URL / ID of a document class that exists in the database schema\"\n              +  \"\\nthe third argument (opts) is an options json - opts.key is an optional API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    options: { format: \"turtle\" }\n  };\n  sigs.updateSchema = {\n    spec    : \"WOQLClient.updateSchema(schurl, docs, options)\",\n    descr   : \"\\n\\nUpdates the Schema of the specified database\"\n                +\"\\n1)The first (surl) argument :{string}, is a dbUrl/schema\"\n                + \"\\n2)The second(docs) argument:{object}, is a valid owl ontology (new schema to be updated) in turtle format\"\n                + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args   : {document : 'doc'},\n    options: { format: \"turtle\", editmode: \"replace\"}\n  };\n  sigs.createDocument = {\n    spec   : \"WOQLClient.createDocument(docurl, document, options)\",\n    descr  : \"\\n\\nCreates a new document in the specified database\"\n              + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\n              + \"\\n2)The second(document) argument: {object}, is a valid document in json-ld\"\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result : \"Created Document on success (HTTP 200), Violation Report Otherwise (HTTP 400+)\",\n    args   : {document_url : 'url', document: \"doc\"},\n    options: { format: \"turtle\", fail_on_id_denied: false}\n  };\n  sigs.viewDocument = {\n    spec    : \"WOQLClient.getDocument(docurl, options)\",\n    descr   : \"\\n\\nRetrieves a document from the specified database\"\n              + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\n              + \"\\n2)The second (key) argument: {string}, contains an API key\",\n    result : \"Document (HTTP 200), Violation Report Otherwise (HTTP 400+)\",\n    args   : {document_url : 'url'},\n    options: { format: \"turtle\"}\n  };\n  sigs.updateDocument = {\n    spec   : \"WOQLClient.updateDocument(docurl, document, options)\",\n    descr  : \"\\n\\nUpdates a document in the specified database with a new version\"\n                + \"\\n1)The first (docurl) argument: {string}, is a dbUrl/document/document_id\"\n                + \"\\n2)The second(document) argument: {object}, is a valid document in json-ld\"\n                + \"\\n3)The third (key) argument:{string} argument contains an API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args   : {document_url : 'url', document: \"doc\"},\n    options: { format: \"turtle\", editmode: \"replace\"}\n  };\n  sigs.deleteDocument = {\n    spec  : \"WOQLClient.deleteDocument(docurl, key)\",\n    descr : \"\\n\\nDeletes a document from the specified database\"\n            + \"\\n1)The first (docurl) argument: {string},is a dbUrl/document/document_id\"\n            + \"\\n2)The second (key) argument: {string}, contains an API key\",\n    result: \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args  : {document_url : 'url'},\n  };\n  sigs.select = {\n    spec: \"WOQLClient.select(dburl, query, options)\",\n    descr: \"\\n\\nExecutes a read-only WOQL query on the specified database and returns the results\"\n              + \"\\n1)The first (docurl) argument: {string}, is a terminusDB Url or a terminusDB Id\"\n              + \"\\n2)The second (query) argument: {object}, a valid query in json-ld format \"\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {woql: 'woql'},\n  };\n  sigs.update = {\n    spec  : \"WOQLClient.update(dburl, query, options)\",\n    descr : \"\\n\\nExecutes a WOQL query on the specified database which updates the state and returns the results\"\n              + \"\\n1)The first (dburl) argument: {string}, is a terminusDB Url or a terminusDB Id\"\n              + \"\\n2)The second (query) argument: {object}, a valid query in json-ld format \"\n              + \"\\n3)The third (key) argument:{string}, contains an API key\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args  : {woql: 'woql'},\n  };\n  sigs.lookup = {\n    spec: \"WOQLClient.lookup(database_url, woql, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url', term: 'string'},\n  };\n  sigs.map = {\n    spec: \"WOQLClient.lookup(source, target, woql, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {source: 'json', target: \"json\", woql: 'json'},\n  };\n  sigs.getClassFrame = {\n    spec: \"WOQLClient.getClassFrame(class, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url'},\n  };\n  sigs.getPropertyFrame = {\n    spec: \"WOQLClient.getPropertyFrame(class, property, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url', property: 'url'},\n  };\n  sigs.getFilledPropertyFrame = {\n    spec: \"WOQLClient.getPropertyFrame(document_url, property, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {document_url: 'url', property: 'url'},\n  };\n  sigs.getSubClasses = {\n    spec: \"WOQLClient.getSubClasses(class, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url'},\n  };\n  return sigs[which];\n}//getFunctionSignature\n\n// returns dom element for header text\nfunction getHeaderDom(text){\n  var hd = document.createElement('div');\n  hd.setAttribute('class', 'terminus-module-head');\n  var h = document.createElement('h3');\n  h.innerHTML = text;\n  hd.appendChild(h);\n  return hd;\n} // getHeaderTextDom\n\nfunction getButton(text){\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn');\n  button.setAttribute('value', text);\n  button.appendChild(document.createTextNode(text));\n  return button;\n}\n\n// returns dom for alert banner\nfunction getInfoAlertDom(type, label, msg){\n  var ald = document.createElement('div');\n  if(type == 'info') ald.setAttribute('class', 'terminus-alert terminus-alert-success');\n  else ald.setAttribute('class', 'alert');\n  var str = document.createElement('STRONG');\n  str.innerHTML = label;\n  ald.appendChild(str);\n  var txt = document.createTextNode(msg);\n  ald.appendChild(txt);\n  return ald;\n} // getInfoAlertDom()\n\n// formats response results from platform\nfunction getResponse(currForm, action, response, terminator){\n\n  var rd = document.createElement('div');\n\n  // get header result\n  rd.appendChild(getHeaderDom('Result'));\n  var br = document.createElement('BR');\n  rd.appendChild(br);\n\n  var data = JSON.stringify(response, 0, 4);\n\n  var pre = document.createElement('pre');\n  pre.setAttribute('class', 'terminus-api-view terminus-scheme-pre');\n  pre.innerHTML = data;\n\n  var cm = stylizeCodeDisplay(terminator, pre, rd, 'javascript');\n  if(!cm) rd.appendChild(pre);\n\n  var br = document.createElement('BR');\n  rd.appendChild(br);\n\n  currForm.appendChild(rd);\n\n  return currForm;\n}\n\n// formats the response from fetch call and spits out Http header and result\nfunction showHttpResult(response, action, currForm, terminator){\n    //var currForm = document.createElement('div');\n\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n\n    // get header result\n    currForm.appendChild(getHeaderDom('HTTP Header'));\n\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n\n     var retHttpHeaders  = '';\n\n     // iterate over all headers\n     for (let [key, value] of response.headers) {\n       retHttpHeaders = retHttpHeaders +  `${key} = ${value}` + '\\n';\n     }\n\n    // http header result\n    var hdres = document.createElement('pre');\n    hdres.setAttribute('class', 'terminus-api-signature-pre');\n    var txt = document.createTextNode(retHttpHeaders);\n    hdres.appendChild(txt);\n\n    var cm = stylizeCodeDisplay(terminator, hdres, currForm, 'message/http');\n    if(!cm) currForm.appendChild(hdres);\n\n    return response.json()\n    .then(function(response){\n      getResponse(currForm, action, response, terminator); // get return response\n    })\n\n} // UTILS.showHttpResult()\n\n\nfunction deleteStylizedEditor(ui, qip){\n    if(ui.pluginAvailable(\"codemirror\")){\n\t\tvar cm = qip.nextElementSibling;\n\t\tcm.setAttribute('class', 'terminus-hide');\n\t\tTerminusClient.FrameHelper.removeChildren(cm);\n\t}\n}\n\n/* ui: terminus ui reference\n   txt: text area to be stylized\n   view: defines the size of editor to appear in pages (schema/ query)\n   mode: format to be displayed in\n*/\nfunction stylizeEditor(ui, txt, view, mode){\n    if(ui){\n        var cmConfig = ui.pluginAvailable(\"codemirror\");\n        if(!(cmConfig)) return;\n        var cm = new Codemirror(txt, mode, cmConfig);\n    }\n\telse{\n        var cm = new Codemirror(txt, mode, {});\n    }\n\tvar ar = cm.colorizeTextArea(view);\n\tcm.updateTextArea(ar);\n}\n\n/* ui: terminus ui reference\n   txt: text area to be stylized\n   dom: stylized pre area is appended to dom\n   mode: format to be displayed in\n*/\nfunction stylizeCodeDisplay(ui, txt, dom, mode){\n    if(ui){\n        var cmConfig = ui.pluginAvailable(\"codemirror\");\n        if(!(cmConfig)) return false;\n        var cm = new Codemirror(txt, mode, cmConfig);\n    }\n    else var cm = new Codemirror(txt, mode, {});\n    var pr = cm.colorizePre();\n    if(dom) dom.appendChild(pr);\n    return true;\n}\n\n/* name: classname to find and remove classes from elements\n*/\nfunction removeSelectedNavClass(name){\n    var el = document.getElementsByClassName(name);\n    if (el.length < 1) return;\n    for(var i=0; i<(el.length + 1); i++){\n        el[i].classList.remove(name);\n    }\n}\n\nfunction setSelectedSubMenu(a){\n    removeSelectedNavClass(\"terminus-submenu-selected\");\n    a.classList.add(\"terminus-submenu-selected\");\n}\n\nfunction setSelected(el, className){\n    var par = el.parentElement;\n    for(var i=0; i<par.childNodes.length; i++){\n        if(par.childNodes[i].classList.contains(className))\n            par.childNodes[i].classList.remove(className);\n    }\n    el.classList.add(className);\n}\n\n// toggles between contents\nfunction tolggleContent(icon, content){\n    if (content.style.display === \"block\"){\n        removeSelectedNavClass(\"fa-chevron-up\");\n        icon.classList.add(\"fa-chevron-down\");\n        content.style.display = \"none\";\n    }\n    else{\n        removeSelectedNavClass(\"fa-chevron-down\");\n        icon.classList.add(\"fa-chevron-up\");\n        content.style.display = \"block\";\n    }\n}\n\n// controls current selected nav bar\nfunction activateSelectedNav(nav, terminator){\n    removeSelectedNavClass(\"terminus-selected\");\n\t//checkDocumentSubMenus(terminator);\n\tnav.classList.add(\"terminus-selected\");\n}\n\nfunction hideDocumentSubMenus(el){\n\tif(el.classList.contains('terminus-display')){\n\t\tel.classList.remove('terminus-display');\n\t\tel.classList.add('terminus-hide');\n\t}\n}\n\nfunction checkDocumentSubMenus(terminator){\n\tif(terminator.ui.showControl(\"get_document\")) {\n\t\tvar gd = document.getElementsByClassName('terminus-get-doc');\n\t\thideDocumentSubMenus(gd[0]);\n\t}\n\tif(terminator.ui.showControl(\"create_document\")) {\n\t\tvar cd = document.getElementsByClassName('terminus-create-doc');\n\t\thideDocumentSubMenus(cd[0]);\n\t}\n}\n\nfunction toggleVisibility(el){\n\tif(el.classList.contains('terminus-display')){\n\t\tel.classList.remove('terminus-display');\n\t\tel.classList.add('terminus-hide');\n\t}\n    else if(el.classList.contains('terminus-hide')){\n        el.classList.remove('terminus-hide');\n\t\tel.classList.add('terminus-display');\n\t}\n}\n\nfunction extractValueFromCell(cellValue){\n    var ihtml = new DOMParser().parseFromString(cellValue, \"text/xml\");\n    return ihtml.firstChild.innerHTML;\n}\n\nfunction displayDocumentSubMenus(ui) {\n\t//display submenus on click of documents\n\tif(ui.showControl(\"get_document\")) {\n\t\tvar gd = document.getElementsByClassName('terminus-get-doc');\n\t\tshowSubMenus(gd[0]);\n\t}\n\tif(ui.showControl(\"create_document\")) {\n\t\tvar cd = document.getElementsByClassName('terminus-create-doc');\n\t\tshowSubMenus(cd[0]);\n\t}\n}\n\nfunction checkForMandatoryId(){\n    var objId = document.getElementsByClassName('terminus-object-id-input');\n    if(objId.length>0){\n        if(!objId[0].value){\n            objId[0].setAttribute('placeholder', 'Required field');\n            objId[0].style.background = '#f8d7da';\n            return false;\n        }\n        else return true;\n    }\n}\n\nfunction showSubMenus (el){\n\tel.classList.remove('terminus-hide');\n\tel.classList.add('terminus-display');\n}\n\n// function which generates query based on current settings from different screens of dashboard\nfunction getCurrentWoqlQueryObject(query, settings){\n\tvar qval;\n    if(!query) query = settings.query;\n\tswitch(query){\n\t\tcase 'Show_All_Schema_Elements':\n\t\t\tqval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .elementMetadata();\n\t\tbreak;\n\t\tcase 'Show_All_Classes':\n\t\t\tqval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .classMetadata();\n\t\tbreak;\n\t\tcase 'Show_All_Data':\n\t\t\tqval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .getEverything();\n\t\tbreak;\n\t\tcase 'Show_All_Documents':\n\t\t\tqval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .getAllDocuments();\n\t\tbreak;\n        case 'Show_All_Document_classes':\n            qval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .documentMetadata();\n        break;\n        case 'Show_Document_Classes':\n            qval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start).and(\n                        TerminusClient.WOQL.quad(\"v:Element\", \"rdf:type\", \"owl:Class\", \"db:schema\"),\n                        TerminusClient.WOQL.abstract(\"v:Element\"),\n                        TerminusClient.WOQL.sub(\"v:Element\", \"tcs:Document\"),\n                        TerminusClient.WOQL.opt().quad(\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n                        TerminusClient.WOQL.opt().quad(\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"));\n        break;\n        case 'Show_All_Properties':\n            qval = TerminusClient.WOQL.limit(settings.pageLength)\n                        .start(settings.start)\n                        .propertyMetadata();\n        break;\n\t\tdefault:\n\t\t\tconsole.log('Invalid query ' + query + ' passed in WOQLTextboxGenerator');\n\t\tbreak;\n\t}\n\treturn qval;\n}\n\n// removes spaces\nfunction trimValue(text){\n    (text).replace(/[\\s\\t\\r\\n\\f]/g,'');\n    return text;\n}\n\n// query string\nfunction getqObjFromInput(q){\n    const WOQL = TerminusClient.WOQL ;\n    //var query = 'WOQL.' + q;\n    var query = q;\n    try {\n        var qObj = eval(query);\n        this.qObj = qObj;\n        return qObj;\n    }\n    catch(e){\n        console.log('Error in getting woql object ',e.toString());\n    }\n}\n\nmodule.exports={tolggleContent,\n               removeSelectedNavClass,\n               stylizeCodeDisplay,\n               stylizeEditor,\n               deleteStylizedEditor,\n               showHttpResult,\n               getHeaderDom,\n               getInfoAlertDom,\n               getFunctionSignature,\n               toggleVisibility,\n               extractValueFromCell,\n               displayDocumentSubMenus,\n               setSelectedSubMenu,\n               checkForMandatoryId,\n               activateSelectedNav,\n               getCurrentWoqlQueryObject,\n               getButton,\n               trimValue,\n               setSelected,\n               getqObjFromInput}\n","const TerminusPluginManager = require('../plugins/TerminusPlugin');\nconst TerminusClient = require('@terminusdb/terminus-client');\nlet HTMLFrameHelper = {};\n\nHTMLFrameHelper.getActionControl = function(type, control, label, callback, disabled){\n\tvar pman = new TerminusPluginManager();\n\tvar dpropDOM = document.createElement(\"span\");\n\tdpropDOM.setAttribute(\"class\", \"terminus-action-control terminus-save-btn \" + type + \"-\" + control);\n\tvar pman = new TerminusPluginManager();\n    /*if(pman.pluginAvailable(\"font-awesome\")){\n\t\tvar icon = document.createElement('icon');\n\t\tvar faic = this.getControlIcon(control);\n\t\tif(disabled){\n\t\t\ticon.setAttribute(\"class\", \"terminus-frame-control frame-control-action action-disabled fa fa\" + faic + \" \" + type + \"-\" + control + \"-disabled terminus-font-align\");\n\t\t\ticon.setAttribute(\"title\", disabled);\n\t\t}\n\t\telse {\n\t\t\ticon.setAttribute(\"class\", \"terminus-frame-control frame-control-action frame-control-action fa fa\" + faic + \" \" + type + \"-\" + control + \" terminus-font-align\");\n\t\t\ticon.addEventListener(\"click\", function(){\n\t\t\t\tcallback(control);\n\t\t\t});\n\t\t}\n\t\tdpropDOM.appendChild(icon);\n\t}\n\telse{*/\n\t\tvar button = document.createElement(\"button\");\n\t\tbutton.appendChild(document.createTextNode(label));\n\t\tif(disabled){\n\t\t\tbutton.setAttribute(\"class\", \"terminus-frame-control terminus-frame-btn frame-control-action action-disabled \" + type + \"-\" + control + \"-disabled\");\n\t\t\tbutton.setAttribute(\"title\", disabled);\n\t\t}\n\t\telse {\n\t\t\tbutton.setAttribute(\"class\", \"terminus-frame-control terminus-frame-btn frame-control-action \" + type + \"-\" + control);\n\t\t\tbutton.addEventListener(\"click\", function(){\n\t\t\t\tif(this.innerHTML == 'Save'){\n\t\t\t\t\tvar objId = document.getElementsByClassName('terminus-object-id-input');\n\t\t\t\t\tif(objId.length>0){\n\t\t\t\t\t\tif(!objId[0].value){\n\t\t\t\t\t\t\tobjId[0].setAttribute('placeholder', 'Required field');\n\t\t\t\t\t\t\tobjId[0].style.background = '#f8d7da';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse callback(control);\n\t\t\t\t\t}\n\t\t\t\t\telse callback(control);\n\t\t\t\t}\n\t\t\t\telse callback(control);\n\t\t\t\t//(control);\n\t\t\t});\n\t\t}\n\t\tdpropDOM.appendChild(button);\n\t//}\n\treturn dpropDOM;\n}\n\nHTMLFrameHelper.getSettingsControl = function(view){\n\tvar pman = new TerminusPluginManager();\n\tif(pman.pluginAvailable(\"font-awesome\")){\n\t\tvar icon = document.createElement('icon');\n\t\tif(view == 'property') icon.setAttribute('class', 'fa fa-cog terminus-pointer');\n\t\telse if(view == 'data') icon.setAttribute('class', 'fa fa-edit terminus-pointer');\n\t\ticon.setAttribute('style', 'margin: 10px;')\n\t\treturn icon;\n\t}\n\telse{\n\t\tvar button = document.createElement(\"button\");\n\t\tbutton.setAttribute('class', 'terminus-btn');\n\t\tbutton.appendChild(document.createTextNode('Settings'));\n\t\treturn button;\n\t}\n}\n\nHTMLFrameHelper.getControlIcon = function(control){\n\tvar icon;\n\tswitch(control){\n\t\tcase 'delete':\n\t\t\ticon = '-alt-delete';\n\t\tbreak;\n\t\tcase 'add':\n\t\t\ticon = '-plus';\n\t\tbreak;\n\t\tcase 'reset':\n\t\t\ticon = '-undo';\n\t\tbreak;\n\t\tcase 'save':\n\t\t\ticon = '-save';\n\t\tbreak;\n\t\tcase 'hide':\n\t\t\ticon = '-eye-slash';\n\t\tbreak;\n\t}\n\treturn icon;\n}\n\nHTMLFrameHelper.getSelectionControl = function(type, options, selected, callback){\n\tvar sel = document.createElement(\"select\");\n\tsel.setAttribute(\"class\", \"terminus-frame-selector frame-control-selection \" + type);\n\tfor(var i = 0; i < options.length; i++){\n\t\tvar opt = document.createElement(\"option\");\n\t\tif(typeof options[i] == \"object\"){\n\t\t\topt.value = options[i].value;\n\t\t\tvar label = (options[i].label ?  document.createTextNode(options[i].label) : document.createTextNode(TerminusClient.FrameHelper.labelFromURL(options[i].value)));\n\t\t\topt.appendChild(label);\n\t\t}\n\t\telse {\n\t\t\topt.value = options[i];\n\t\t\tlabel = TerminusClient.FrameHelper.labelFromURL(opt.value);\n\t\t\topt.appendChild(document.createTextNode(label));\n\t\t}\n\t\tif(selected == opt.value){\n\t\t\topt.setAttribute(\"selected\", \"selected\");\n\t\t}\n\t\tsel.appendChild(opt);\n\t}\n\tsel.addEventListener(\"change\", function(){\n\t\tcallback(this.value);\n\t});\n\treturn sel;\n}\n\nHTMLFrameHelper.getModeSelectorDOM = function(which, renderer){\n\tvar viewsDOM = document.createElement(\"span\");\n\tviewsDOM.setAttribute(\"class\", \"terminus-mode terminus-\"+which+\"-mode\");\n\tif(renderer.mode == \"view\"){\n\t\tvar callback = function(){ renderer.setMode(\"edit\");}\n\t\tviewsDOM.appendChild(HTMLFrameHelper.getActionControl(\"terminus-mode terminus-\"+which+\"-mode\", \"edit\", \" Edit \", callback));\n\t}\n\telse if(renderer.isNew()){\n\t\treturn false;\n\t}\n\telse {\n\t\tvar callback = function(){ renderer.cancel();}\n\t\tviewsDOM.appendChild(HTMLFrameHelper.getActionControl(which, \"cancel\", \"Cancel\", callback));\n\t}\n\treturn viewsDOM;\n}\n\nHTMLFrameHelper.goToName = function(s, p, i){\n\tvar url = window.location.href;\n\tif(url){\n\t\tvar wbits = url.split(\"#\");\n\t\tvar loc = wbits[0];\n\t\tvar sh = TerminusClient.FrameHelper.getShorthand(s);\n\t    if(!sh) sh = s;\n\t\tvar bits = sh.split(\":\");\n\t\tif(bits.length > 1) sh = bits[1];\n\t\tvar htmlid = sh;\n\t\tif(p){\n\t\t\tvar prop = TerminusClient.FrameHelper.getShorthand(p);\n\t\t\tif(!prop ) prop = p;\n\t\t\tvar bits = prop.split(\":\");\n\t\t\tif(bits.length > 1) prop = bits[1];\n\t\t\thtmlid += \"_\" + prop;\n\t\t\tif(i){\n\t\t\t\thtmlid += \"_\" + i;\n\t\t\t}\n\t\t}\n\t\twindow.location = loc + \"#\" + htmlid;\n\t}\n}\n\nHTMLFrameHelper.wrapShortenedText = function(wrap, text, max_cell_size, max_word_size){\n\tif(max_cell_size && (text.length > max_cell_size)){\n\t\twrap.setAttribute(\"title\", text);\n\t\ttext = text.substring(0, max_cell_size) + \"...\";\n\t}\n\tif(text && text.length > max_word_size){\n\t\tconst replacements = {}\n\t\tconst words = text.split(\" \");\n\t\tfor(var i = 0; i < words.length; i++){\n\t\t\tvar word = words[i];\n\t\t\tif(word.length > max_word_size){\n\t\t\t\twrap.setAttribute(\"title\", text);\n\t\t\t\tvar newstr = word.substring(0, max_word_size) + \"...\";\n\t\t\t\treplacements[word] = newstr;\n\t\t\t}\n\t\t}\n\t\tfor(var k in replacements){\n\t\t\ttext = text.replace(k, replacements[k]);\n\t\t}\n\t}\n\twrap.appendChild(document.createTextNode(text));\n}\n\nHTMLFrameHelper.getVariableValueFromBinding = function(varname, bind){\n\tfor(var key in bind){\n\t\tvar skey = key.substring(key.lastIndexOf(\"/\")+1);\n\t\tif(skey == varname){\n\t\t\tconst obj = bind[key];\n\t\t\tif(typeof obj == \"object\" && obj['@value']) return obj['@value'];\n\t\t\treturn obj;\n\t\t}\n\t}\n\treturn false;\n}\n\n\nHTMLFrameHelper.getInfoboxDOM = function(type, label, value, help, input){\n\t/*var frow = this.getFrameRow();\n\tvar fgroup = this.getFrameGroup(frow);*/\n\tvar infoDOM = document.createElement(\"span\");\n\tinfoDOM.setAttribute(\"class\", \"terminus-frame-infobox-box \" + \"terminus-\" +type );\n\t//fgroup.appendChild(infoDOM);\n\tif(help){\n\t\tinfoDOM.setAttribute(\"title\", help);\n\t}\n\tif(label){\n\t\tvar linfo = document.createElement(\"span\");\n\t\tlinfo.setAttribute(\"class\", \"terminus-frame-infobox-label \" + \"terminus-\" +type + \"-label\");\n\t\tlinfo.appendChild(document.createTextNode(label));\n\t\tinfoDOM.appendChild(linfo);\n\t}\n\tvar lspacer = document.createElement(\"span\");\n\tlspacer.setAttribute(\"class\", \"terminus-frame-infobox-spacer \" + \"terminus-\" +type + \"-spacer\");\n\tlspacer.appendChild(document.createTextNode(\" \"));\n\tinfoDOM.appendChild(lspacer);\n\tvar lval = document.createElement(\"span\");\n\tlval.setAttribute(\"class\", \"terminus-frame-infobox-value \" + \"terminus-\" +type + \"-value\");\n\tif(input){\n\t\tinput.value = value;\n\t\tlval.appendChild(input);\n\t}\n\telse if(value) {\n\t\tvar sh = TerminusClient.FrameHelper.getShorthand(value);\n        if(sh){\n    \t   \tvar bits = sh.split(\":\");\n            sh = bits[1];\n   \t\t\tlval.setAttribute(\"title\", value);\n\t\t\tlval.appendChild(document.createTextNode(sh));\n\t\t}\n\t\telse {\n\t\t\tlval.appendChild(document.createTextNode(value));\n\t\t}\n\t}\n\tinfoDOM.appendChild(lval);\n\treturn infoDOM;\n}\n\n/*\n * HTML drawing function for document rendering \n */\n\nHTMLFrameHelper.getFrameDOM = function(scope, frame, orientation, hfeatures, features){\n\tif(frame.display_options.hidden) return false;\n\tvar framedom = HTMLFrameHelper.getFrameHolderDOM(scope, frame, orientation);\n\tif(typeof frame.display_options.header != \"undefined\"){\n\t\tif(typeof frame.display_options.header == \"function\"){\n\t\t\tvar hd = frame.display_options.header(frame.display_options.header_features, hfeatures);\n\t\t\tframedom.appendChild(hd);\n\t\t}\n\t}\n\telse {\n\t\tvar hd = HTMLFrameHelper.getFrameHeaderDOM(scope, frame, orientation, hfeatures);\n\t\tif(hfeatures) hd.appendChild(hfeatures);\n\t\tframedom.appendChild(hd);\n\t}\n\treturn framedom.appendChild(HTMLFrameHelper.getFrameBodyDOM(scope, frame, orientation, features));\n}\n\nHTMLFrameHelper.getFrameHolderDOM = function(scope, frame, orientation){\n\tvar pcls = \"terminus-\" + scope + \"-frame\";\n\tif(orientation == \"page\"){\n\t\tvar sp = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar sp = document.createElement(\"span\");\n\t}\n\tvar css = pcls + \" \" + pcls + \"-\" + orientation + \n\t\t(scope == \"object\" && frame.parent ? \"\" : \" terminus-root-frame\") \n\t\t+ \" \" + pcls + \"-\" + frame.display_options.mode;\n\tsp.setAttribute(\"class\", css);\n\tif(scope == \"object\"){\n\t\tsp.setAttribute(\"data-class\", frame.subjectClass());\n\t\tsp.setAttribute(\"data-id\", frame.subject());\t\t\n\t\tvar hid = this.hash(frame.subject());\n\t}\n\telse if(scope == \"property\"){\n\t\tsp.setAttribute('data-property', frame.property());\t\n\t\tvar hid = this.hash(frame.subject()+frame.property());\n\t}\n\telse if(scope == \"data\"){\n\t\tsp.setAttribute('data-value', frame.get());\n\t\tvar hid = this.hash(frame.subject() + frame.property() + frame.index);\n\t}\n\tvar idm = document.createElement(\"a\");\n\tidm.setAttribute(\"class\", \"terminus-\" + scope + \"-idmarker\");\n\tidm.setAttribute(\"name\", hid);\t\t\t\t\n    sp.appendChild(idm);\n\treturn sp;\n}\n\nHTMLFrameHelper.getFrameHeaderDOM = function(scope, frame, orientation, features){\n\tvar css = \"terminus-\" + scope + \"-header\";\n\tif(orientation == \"page\"){\n\t\tvar objDOM = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar objDOM = document.createElement(\"span\");\n\t}\n\tobjDOM.setAttribute(\"class\", css + \" \" + css + \"-\" + orientation);\n    if(features) objDOM.appendChild(features);\n\treturn objDOM;\n}\n\nHTMLFrameHelper.getFrameBodyDOM = function(scope, frame, orientation, features){\n\tvar css = \"terminus-\" + scope + \"-properties\";\n\tif(orientation == \"page\"){\n\t\tvar vholder = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar vholder = document.createElement(\"span\");\n\t}\n    vholder.setAttribute('class', css + \" \" + css + \"-\" + orientation);\n    if(features) vholder.appendChild(features);\n    return vholder;\n}\n\nHTMLFrameHelper.hash = function(s) {\n\tvar hash = 0, i, chr;\n\tif (s.length === 0) return hash;\n\tfor (i = 0; i < s.length; i++) {\n\t    chr   = s.charCodeAt(i);\n\t    hash  = ((hash << 5) - hash) + chr;\n\t    hash |= 0; // Convert to 32bit integer\n\t}\n\treturn hash;\n};\n\nHTMLFrameHelper.getFeatureDOM = function(feature, scope, frame){\n\tif(feature == \"id\"){\t\n\t\tif(scope == \"object\") var val = frame.subject();\n\t\telse if(scope == \"property\") var val = frame.property();\n\t\tif(val == \"_:\") var val = \"New Document\";\n\t\treturn HTMLFrameHelper.getInfoboxDOM(\"object-id\", \"ID\", val, \"The URL that identifies this data object\");\n\t}\n\telse if(feature == \"summary\"){\n\t\tvar sum = frame.getSummary();\n\t\treturn HTMLFrameHelper.getInfoboxDOM(scope + \"-summary\", false, sum.long, sum.status);\n\t}\n\telse if(feature == \"label\"){\n\t\tvar lab = frame.getLabel();\n\t\tif(lab){\n\t\t\treturn HTMLFrameHelper.getInfoboxDOM(scope + \"-type\", false, lab);\n\t\t}\n\t\treturn false;\n\t}\n\telse if(feature == \"status\"){\n\t\tvar sum = frame.getSummary();\n\t\treturn HTMLFrameHelper.getInfoboxDOM(scope + \"-status-\"+sum.status, false, sum.status, sum.status);\n\t}\n\telse if(feature == \"comment\"){\n\t\tvar lab = frame.getComment();\n\t\treturn HTMLFrameHelper.getInfoboxDOM(\"property-comment\", false, lab);\n\t}\n\telse if(feature == \"type\"){\n\t\tif(scope == \"property\" && frame.display_options.mode == \"edit\" && frame.parent && frame.parent.isClassChoice() && frame.isNew()){\n\t\t\treturn this.getClassChoiceTypeSelector(frame);\n\t\t}\n\t\tif(scope == \"object\") var lab = frame.subjectClass();\n\t\telse if(scope == \"property\") var lab = frame.range();\n\t\telse if(scope == \"data\") var lab = frame.getType();\n\t\tif(lab){\n\t\t\treturn HTMLFrameHelper.getInfoboxDOM(scope + \"-type\", \"Type\", lab);\n\t\t}\n\t\treturn false;\n\t}\n\telse if(feature == \"delete\"){\n\t\tvar callback = function(){frame.delete()};\n\t\tvar disabled = false;\n\t\tif(!frame.cardControlAllows(\"delete\", scope)){\n\t\t\tif(!frame.display_options.show_disabled_buttons){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdisabled = \"Cardinality rules prevent deleting this element\";\n\t\t}\n\t\treturn HTMLFrameHelper.getActionControl(scope, \"delete\", \"Delete\", callback, disabled);\n\t}\n\telse if(feature == \"clone\"){\n\t\tvar callback = function(){frame.clone()};\n\t\tvar disabled = false;\n\t\tif(!frame.cardControlAllows(\"clone\", scope)){\n\t\t\tif(!frame.display_options.show_disabled_buttons){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdisabled = \"Cardinality rules prevent cloning this element\";\n\t\t}\n\t\treturn HTMLFrameHelper.getActionControl(scope, \"clone\", \"Clone\", callback, disabled);\n\t}\n\telse if(feature == \"reset\"){\n\t\tvar callback = function(){frame.reset()};\n\t\tvar disabled = false;\n\t\tif(!frame.isUpdated()){\n\t\t\tif(!frame.display_options.show_disabled_buttons){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdisabled = \"No changes have been made to this element\";\n\t\t}\n\t\treturn HTMLFrameHelper.getActionControl(scope, \"reset\", \"Reset\", callback, disabled);\n\t}\n\telse if(feature == \"hide\"){\n\t\tvar callback = function(){frame.hide()};\n\t\treturn HTMLFrameHelper.getActionControl(scope, \"hide\", \"Hide\", callback);\n\t}\n\telse if(feature == \"show\"){\n\t\tvar callback = function(){frame.show()};\n\t\treturn HTMLFrameHelper.getActionControl(scope, \"show\", \"Show\", callback);\n\t}\n\telse if(feature == \"update\"){\n\t\tvar callback = function(){frame.save()};\n\t\tif(!frame.isUpdated() && !frame.display_options.show_disabled_buttons){\n\t\t\treturn false;\n\t\t}\n\t\tvar disabled = frame.isUpdated() ? false : \"No changes have been made to this element\";\n\t\treturn HTMLFrameHelper.getActionControl(scope, \"save\", \"Save\", callback, disabled);\n\t}\n\telse if(feature == \"viewer\"){\n\t\treturn this.getViewerSelectorDOM(scope, frame);\n\t}\n\telse if(feature == \"view\"){\n\t\treturn this.getViewEntryDOM(scope, frame);\n\t}\n\telse if(feature == \"cardinality\"){\n\t\treturn this.getCardinalityDOM(scope, frame);\n\t}\n\telse if(feature == \"add\"){\n\t\treturn this.getAddDOM(scope, frame);\n\t}\n}\n\nHTMLFrameHelper.getViewerSelectorDOM = function(scope, frame){\n\tvar viewers = frame.terminus.datatypes.getAvailableViewers();\n\tvar r = this.terminus.datatypes.getRenderer(t);\n\n\tif(viewers && viewers.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-\" + scope + \"-viewer\");\n\t\tvar callback = function(viewer){\n\t\t\tif(viewer){\n\t\t\t\tframe.setViewer(viewer);\n\t\t\t}\n\t\t}\n\t\tvar selected = frame.currentViewer();\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(scope + '-viewer', viewers, selected, callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\n\n/* needs html viewer context for goto */\nHTMLFrameHelper.getViewEntryDOM = function(scope, frame){\n\tif(scope == \"object\"){\n\t\tvar viewables = frame.getFilledPropertyList();\n\t}\n\telse if(scope == \"property\"){\n\t\t\n\t}\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-\"+scope + \"-view-entry\");\n\t\tviewables.unshift({ value: \"\", label: \"View \" + scope});\n\t\tvar callback = function(add){\n\t\t\tif(add){\n\t\t\t\tframe.goToEntry(add);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(scope + \"-view-entry\", viewables, \"\", callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n\t\n}\n\nHTMLFrameHelper.getCardinalityDOM = function(scope, frame){\n\tvar restriction = frame.getRestriction();\n\tif(restriction.min && restriction.max){\n\t\tif(restriction.min == restriction.max){\n\t\t\tvar lab = restriction.min;\n\t\t\tvar help = \"Cardinality: \" + restriction.min;\n\t\t}\n\t\telse {\n\t\t\tvar lab = restriction.min + \"-\" + restriction.max;\n\t\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\n\t\t\thelp += \", Maximum Cardinality: \" + restriction.max;\n\t\t}\n\t}\n\telse if(restriction.min){\n\t\tvar lab = \">\"+(restriction.min-1);\n\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\n\t}\n\telse if(restriction.max){\n\t\tvar lab = \"<\"+(restriction.max+1);\n\t\tvar help = \"Maximum Cardinality: \" + restriction.max;\n\t}\n\telse {\n\t\treturn false;\n\t}\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-cardinality\", \"Cardinality\", lab, help);\n}\n\nHTMLFrameHelper.getClassChoiceTypeSelector = function(frame){\n\tvar cs = frame.parent.getAvailableClassChoices();\n\tif(cs && cs.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-change-class\");\n\t\tvar mlabDOM = document.createElement(\"span\");\n\t\tmlabDOM.setAttribute(\"class\", \"terminus-property-change-label\");\n\t\tmlabDOM.appendChild(document.createTextNode(\"Type\"));\n\t\tmpropDOM.appendChild(mlabDOM);\n\t\tvar callback = function(cls){\n\t\t\tif(cls){\n\t\t\t\tframe.changeClass(cls);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"change-class\", cs, frame.subjectClass(), callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLFrameHelper.getAddDOM = function(scope, frame){\n\tif(scope == \"property\"){\n\t\tif(frame.isClassChoice()){\n\t\t\tvar cs = frame.getAvailableClassChoices();\n\t\t\tif(cs && cs.length){\n\t\t\t\tvar mpropDOM = document.createElement(\"span\");\n\t\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-add-class\");\n\t\t\t\tcs.unshift({ value: \"\", label: \"Add Type\"});\n\t\t\t\tvar callback = function(cls){\n\t\t\t\t\tif(cls){\n\t\t\t\t\t\tframe.addClass(cls);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"add-property\", cs, \"\", callback);\n\t\t\t\tmpropDOM.appendChild(sel);\n\t\t\t\treturn mpropDOM;\n\t\t\t}\n\t\t}\n\t\tif(frame.cardControlAllows(\"add\") || frame.display_options.show_disabled_buttons){\n\t\t\tvar callback = function(){frame.add(\"edit\")};\n\t\t\tvar disabled = (frame.cardControlAllows(\"add\") ? false : \"Cardinality Rules Forbid Add\");\n\t\t\treturn HTMLFrameHelper.getActionControl(scope + \"-add-entry\", \"add\", \"Add\", callback, disabled);\n\t\t}\n\t}\n\telse {\n\t\tvar addables = frame.getMissingPropertyList();\n\t\tif(addables && addables.length){\n\t\t\tvar mpropDOM = document.createElement(\"span\");\n\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-\" + scope + \"-add-entry\");\n\t\t\taddables.unshift({ value: \"\", label: \"Add new \" + scope});\n\t\t\tvar callback = function(add){\n\t\t\t\tif(add){\n\t\t\t\t\tif(scope == \"object\") frame.addNewProperty(add);\n\t\t\t\t\telse if(scope == \"property\") frame.addNewValue(add);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(frame.cardControlAllows(\"add\") || frame.display_options.show_disabled_buttons){\n\t\t\t\tvar disabled = (frame.cardControlAllows(\"add\") ? false : \"Cardinality rules forbid adding element\");\n\t\t\t\tvar sel = HTMLFrameHelper.getSelectionControl(scope + \"-add-entry\", addables, \"\", callback, disabled);\n\t\t\t\tmpropDOM.appendChild(sel);\n\t\t\t\treturn mpropDOM;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nmodule.exports=HTMLFrameHelper\n","/**\n * Helper functions for dealing with frames and linked data documents\n */\nconst FrameHelper = {\n\tstandard_urls: {\n\t\trdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n\t\trdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n\t\txsd: 'http://www.w3.org/2001/XMLSchema#',\n\t\towl: 'http://www.w3.org/2002/07/owl#',\n\t\ttcs: 'http://terminusdb.com/schema/tcs#',\n\t\ttbs: 'http://terminusdb.com/schema/tbs#',\n\t\txdd: 'http://terminusdb.com/schema/xdd#',\n\t\tv: 'http://terminusdb.com/woql/variable/',\n\t\tterminus: 'http://terminusdb.com/schema/terminus#',\n\t\tvio: 'http://terminusdb.com/schema/vio#',\n\t\tdocs: 'http://terminusdb.com/schema/documentation#'\n\t}\n};\n\nFrameHelper.addURLPrefix = function (prefix, url) {\n\tthis.standard_urls[prefix] = url;\n};\n\n\nFrameHelper.removeChildren = function (node) {\n\tif (node) {\n\t\twhile (node.hasChildNodes()) {\n\t\t\tnode.removeChild(node.childNodes[0]);\n\t\t}\n\t}\n};\n\nFrameHelper.removeElement = function (node) {\n\tif (node) {\n\t\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\nFrameHelper.empty = function (obj) {\n\t   // null and undefined are \"empty\"\n\tif (!obj) return true;\n\t// Assume if it has a length property with a non-zero value\n\t// that that property is correct.\n\tif (obj.length > 0) return false;\n\tif (obj.length === 0) return true;\n\t// Otherwise, does it have any properties of its own?\n\t// Note that this doesn't handle\n\t// toString and valueOf enumeration bugs in IE < 9\n\t// for (const key in obj) {\n\tif (typeof obj === 'object') {\n\t\tfor (const key of Object.keys(obj)) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) return false;\n\t\t}\n\t}\n\treturn true;\n};\n\nFrameHelper.genBNID = function () {\n\tconst r = Math.random().toString(36).substring(7);\n\tconst d = new Date();\n\tconst bnid = `_:${r}${d.getTime()}`;\n\treturn bnid;\n};\n\nFrameHelper.getShorthand = function (link) {\n\tif (typeof link === 'object' && link.length) link = link[0];\n\tif (link && typeof link === 'string') {\n\t\tfor (const pref of Object.keys(this.standard_urls)) {\n\t\t\tconst full = this.standard_urls[pref];\n\t\t\tif (link.substring(0, full.length) === full) {\n\t\t\t\tconst sh = `${pref}:${link.substring(full.length)}`;\n\t\t\t\treturn sh;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nFrameHelper.compareIDs = function (ida, idb) {\n\tif (ida === idb) return true;\n\tif (this.unshorten(ida) === idb) return true;\n\tif (this.unshorten(ida) === this.unshorten(idb)) return true;\n\tconst sha = this.getShorthand(ida);\n\tconst shb = this.getShorthand(idb);\n\tif (sha && ((sha === idb) || (sha === shb))) return true;\n\tif (shb && shb === ida) return true;\n\treturn false;\n};\n\n\nFrameHelper.shorten = function (url, prefixes) {\n\tfor (const pref in prefixes) {\n\t\tif (prefixes[pref] == url.substring(0, prefixes[pref].length)) {\n\t\t\treturn (`${pref}:${url.substring(prefixes[pref].length)}`);\n\t\t}\n\t}\n\treturn url;\n};\n\nFrameHelper.unshorten = function (url) {\n\tif (this.validURL(url)) return url;\n\tif (!url) return url;\n\tconst bits = url.split(':');\n\tif (bits[1]) {\n\t\tif (this.standard_urls[bits[0]]) {\n\t\t\treturn this.standard_urls[bits[0]] + bits[1];\n\t\t}\n\t}\n\treturn url;\n};\n\n// Valid URLs are those that start with http:// or https://\nFrameHelper.validURL = function (str) {\n\tif (str && (str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://')) return true;\n\treturn false;\n};\n\n\nFrameHelper.labelFromURL = function (url) {\n\tlet nurl = this.urlFragment(url);\n\tnurl = (nurl || url);\n\tif (nurl.lastIndexOf('/') < nurl.length - 1) {\n\t\tnurl = nurl.substring(nurl.lastIndexOf('/') + 1);\n\t}\n\tnurl = nurl.replace('_', ' ');\n\treturn nurl.charAt(0).toUpperCase() + nurl.slice(1);\n};\n\nFrameHelper.urlFragment = function (url) {\n\turl = (typeof url !== 'string') ? window.location.href : url;\n\tlet bits = url.split('#');\n\tif (bits.length <= 1) {\n\t\tif (!this.validURL(url)) {\n\t\t\tbits = url.split(':');\n\t\t}\n\t}\n\tif (bits.length >= 1) {\n\t\tconst [, urlStr] = bits;\n\n\t\tif (urlStr) {\n\t\t\tconst [baseUrl] = urlStr.split('?');\n\t\t\turl = baseUrl;\n\t\t}\n\t}\n\treturn url;\n};\n\nFrameHelper.isStringType = function (stype) {\n\tif (stype === 'http://www.w3.org/2001/XMLSchema#string') return true;\n\tif (stype === 'xsd:string') return true;\n\treturn false;\n};\n\nFrameHelper.lastURLBit = function (url) {\n\turl = (typeof url === 'undefined') ? window.location.href : url;\n\tconst [urlFirst] = url.split('#');\n\tconst [urlTmp] = urlFirst.split('?');\n\turl = urlTmp.substring(url.lastIndexOf('/') + 1);\n\treturn url;\n};\n\n\nFrameHelper.getStdURL = function (pref, ext, url) {\n\tif (this.standard_urls[pref]) {\n\t\tif (url) {\n\t\t\tif (url === this.standard_urls[pref] + ext) return url;\n\t\t} else {\n\t\t\treturn this.standard_urls[pref] + ext;\n\t\t}\n\t}\n\treturn false;\n};\n\nFrameHelper.viewIncludesProperties = function (view) {\n\tif (view === 'full' || view === 'production' || view === 'terse') {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nFrameHelper.viewIncludesChildren = function (view, type) {\n\treturn this.viewIncludesProperties(view, type);\n};\n\nFrameHelper.viewIncludesValue = function (view, type) {\n\treturn this.viewIncludesProperties(view, type);\n};\n\nFrameHelper.numberWithCommas = function (value) {\n\tif (value >= 1000 || value <= -1000) {\n\t    const parts = value.toString().split('.');\n\t    if (value <= -1000) parts[0] = parts[0].substring(1);\n\t    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n\t    if (value <= -1000) value = `-${parts.join('.')}`;\n\t    else value = parts.join('.');\n\t}\n\treturn value;\n};\n\nFrameHelper.datatypes = [\n\t'xdd:coordinate', 'xdd:coordinatePolyline',\n\t'xdd:coordinatePolygon', 'xdd:dateRange', 'xdd:gYearRange', 'xdd:integerRange',\n\t'xdd:decimalRange', 'xdd:cc', 'xdd:email', 'xdd:html', 'xdd:url', 'xsd:anySimpleType',\n\t'xsd:string', 'xsd:boolean', 'xsd:decimal', 'xsd:double', 'xsd:float', 'xsd:time', 'xsd:date',\n\t'xsd:dateTime', 'xsd:dateTimeStamp', 'xsd:gYear', 'xsd:gMonth', 'xsd:gDay', 'xsd:gYearMonth',\n\t'xsd:gMonthDay', 'xsd:duration', 'xsd:yearMonthDuration', 'xsd:dayTimeDuration',\n\t'xsd:byte', 'xsd:short', 'xsd:integer', 'xsd:long', 'xsd:unsignedByte',\t'xsd:unsignedInt',\n\t'xsd:unsignedLong',\t'xsd:nonNegativeInteger', 'xsd:positiveInteger', 'xsd:negativeInteger',\n\t'xsd:nonPositiveInteger', 'xsd:base64Binary', 'xsd:anyURI', 'xsd:language', 'xsd:normalizedString',\n\t'xsd:token', 'xsd:NMTOKEN',\t'xsd:Name',\t'xsd:NCName', 'xsd:NOTATION', 'xsd:QName', 'xsd:ID',\n\t'xsd:IDREF', 'xsd:ENTITY', 'rdf:XMLLiteral', 'rdf:PlainLiteral', 'rdfs:Literal', 'xdd:json'\n];\n\nFrameHelper.parseDate = function (ty, value) {\n\tlet parsed;\n\tif (ty === 'xsd:date') {\n\t\tparsed = this.parseXsdDate(value);\n\t} else if (ty === 'xsd:time') {\n\t\tparsed = this.parseXsdTime(value);\n\t} else if (ty === 'xsd:dateTime') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t} else if (ty === 'xsd:gYear') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gYearRange') {\n\t\tparsed = { year: value };\n\t} else if (ty === 'xsd:gMonth') {\n\t\tparsed = { month: value.substring(2) };\n\t} else if (ty === 'xsd:gDay') {\n\t\tparsed = { day: value };\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { year: bits[0], month: bits[1] };\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tconst bits = value.split('-');\n\t\twhile (bits.length < 2) bits.push('');\n\t\tparsed = { month: bits[0], day: bits[1] };\n\t} else if (ty === 'xsd:dateTimeStamp') {\n\t\tparsed = this.parseXsdDateTime(value);\n\t}\n\treturn parsed;\n};\n\nFrameHelper.parseXsdDate = function (val) {\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tlet year;\n\tif (val.substring(0, 1) === '-') {\n\t\tyear = val.substring(0, 5);\n\t} else {\n\t\tyear = val.substring(0, 4);\n\t}\n\tlet parsed;\n\tif (year && Math.abs(year) < 10000) {\n\t\tlet month = val.substring(year.length + 1, year.length + 3);\n\t\tif (month) { month = parseInt(month, 10); } else return false;\n\t\tlet day = val.substring(year.length + 4);\n\t\tif (day) day = parseInt(day, 10);\n\t\telse return false;\n\t\tparsed = {\n\t\t\tyear,\n\t\t\t   month,\n\t\t\t   day,\n\t\t\t   timezone: tz\n\t\t};\n\t}\n\treturn parsed;\n};\n\nFrameHelper.addXsdPadding = function (parsed) {\n\tconst nparsed = {};\n\tif (typeof parsed.year !== 'undefined' && parsed.year !== false && parsed.year < 1000) {\n\t\tif (Math.abs(parsed.year) < 10) nparsed.year = (parsed.year < 0 ? `-000${Math.abs(parsed.year)}` : `000${parsed.year}`);\n\t\telse if (Math.abs(parsed.year) < 100) nparsed.year = (parsed.year < 0 ? `-00${Math.abs(parsed.year)}` : `00${parsed.year}`);\n\t\telse nparsed.year = (parsed.year < 0 ? `-0${Math.abs(parsed.year)}` : `0${parsed.year}`);\n\t} else if (parsed.year) {\n\t\tnparsed.year = parsed.year;\n\t}\n\tif (typeof parsed.month !== 'undefined' && parsed.month !== false && parsed.month < 10) {\n\t\tnparsed.month = `0${parsed.month}`;\n\t} else if (parsed.month) {\n\t\tnparsed.month = parsed.month;\n\t}\n\tif (typeof parsed.day !== 'undefined' && parsed.day !== false && parsed.day < 10) {\n\t\tnparsed.day = `0${parsed.day}`;\n\t} else if (parsed.day) {\n\t\tnparsed.day = parsed.day;\n\t}\n\tif (typeof parsed.hour !== 'undefined' && parsed.hour !== false && parsed.hour < 10) {\n\t\tnparsed.hour = `0${parsed.hour}`;\n\t} else if (parsed.hour) {\n\t\tnparsed.hour = parsed.hour;\n\t}\n\tif (typeof parsed.minute !== 'undefined' && parsed.minute !== false && parsed.minute < 10) {\n\t\tnparsed.minute = `0${parsed.minute}`;\n\t} else if (parsed.minute) {\n\t\tnparsed.minute = parsed.minute;\n\t}\n\tif (typeof parsed.second !== 'undefined' && parsed.second !== false && parsed.second < 10) {\n\t\tnparsed.second = `0${parsed.second}`;\n\t} else if (parsed.second) {\n\t\tnparsed.second = parsed.second;\n\t}\n\treturn nparsed;\n};\n\n\nFrameHelper.xsdFromParsed = function (parsed, ty) {\n\tconst xparsed = this.addXsdPadding(parsed);\n\tlet ret;\n\tif (ty === 'xsd:gYear') {\n\t\tret = (xparsed.year ? xparsed.year : false);\n\t} else if (ty === 'xsd:time') {\n\t\treturn (xparsed.hour && xparsed.minute && xparsed.second) ? `${xparsed.hour}:${xparsed.minute}:${xparsed.second}` : false;\n\t} else if (ty === 'xsd:date') {\n\t\treturn (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}` : false;\n\t} else if (ty === 'xsd:dateTime' || ty === 'xsd:dateTimeStamp') {\n\t\tret = (xparsed.year && xparsed.month && xparsed.day) ? `${xparsed.year}-${xparsed.month}-${xparsed.day}T` : false;\n\t\tif (ret) ret += `${xparsed.hour ? xparsed.hour : '12'}:${xparsed.minute ? xparsed.minute : '00'}:${xparsed.second ? xparsed.second : '00'}`;\n\t} else if (ty === 'xsd:gMonth') {\n\t\tret = (xparsed.month ? `--${xparsed.month}` : false);\n\t} else if (ty === 'xsd:gDay') {\n\t\tret = (xparsed.day ? `---${xparsed.day}` : false);\n\t} else if (ty === 'xsd:gYearMonth') {\n\t\tret = (xparsed.year && xparsed.month) ? `${xparsed.year}-${xparsed.month}` : false;\n\t} else if (ty === 'xsd:gMonthDay') {\n\t\tret = (xparsed.day && xparsed.month) ? `--${xparsed.month}-${xparsed.day}` : false;\n\t}\n\tif (xparsed.timezone) {\n\t\tret += xparsed.timezone;\n\t}\n\treturn ret;\n};\n\n\nFrameHelper.parseXsdTime = function (val) {\n\tif (!val) return {};\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst parsed = {\n\t\thour: val.substring(0, 2),\n\t\tminute: val.substring(3, 5),\n\t\tsecond: val.substring(6),\n\t\ttimezone: tz\n\t};\n\treturn parsed;\n};\n\nFrameHelper.convertTimestampToXsd = function (val) {\n\t  const a = new Date(val * 1000);\n\t  const parsed = {\n\t\tyear: a.getFullYear(),\n\t\tmonth: a.getMonth() + 1,\n\t\tday: a.getDate(),\n\t\thour: a.getHours(),\n\t\tminute: a.getMinutes(),\n\t\tsecond: a.getSeconds()\n\t  };\n\t  return parsed;\n};\n\nFrameHelper.parseXsdDateTime = function (val) {\n\tif (!val) return {};\n\tif (typeof val === 'number') {\n\t\treturn this.convertTimestampToXsd(val);\n\t}\n\tconst tz = this.extractXsdTimezone(val);\n\tif (tz) {\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tconst datetime = this.parseXsdDate(val);\n\tconst ptime = this.parseXsdTime(val.substring(val.indexOf('T') + 1));\n\n\tfor (const i of Object.keys(ptime)) {\n\t\tdatetime[i] = ptime[i];\n\t}\n\tdatetime.timezone = tz;\n\treturn datetime;\n};\n\nFrameHelper.extractXsdTimezone = function (val) {\n\tif (val && val.charAt(val.length - 1) === 'Z') {\n\t\treturn 'Z';\n\t}\n\tif (val && (val.charAt(val.length - 6) === '+' || val.charAt(val.length - 6) === '-')) {\n\t\tval.substring(val.length - 6);\n\t}\n\treturn false;\n};\n\nFrameHelper.parseRangeValue = function (val, dividor) {\n\tdividor = (dividor || ',');\n\tlet vals = [];\n\tif (typeof val === 'object' && val.length) {\n\t\tvals = val;\n\t} else if (val) {\n\t\tif (typeof val !== 'string') {\n\t\t\tval = `${val}`;\n\t\t}\n\t\tif (val.length && (val.charAt(0) === '[') && val.charAt(val.length - 1) === ']') {\n\t\t\tvals.push(val.substring(1, val.indexOf(dividor)));\n\t\t\tvals.push(val.substring(val.indexOf(dividor) + 1, val.length - 1));\n\t\t} else {\n\t\t\tvals.push(val);\n\t\t}\n\t}\n\treturn vals;\n};\n\nFrameHelper.loadDynamicScript = function (scriptid, src, callback) {\n\tconst existingScript = document.getElementById(scriptid);\n\tif (!existingScript) {\n\t\tconst script = document.createElement('script');\n\t\tscript.src = src; // URL for the third-party library being loaded.\n\t\tdocument.body.appendChild(script);\n\t\tscript.onload = function () {\n\t\t\tscript.id = scriptid; // do it here so it doesn't trigger the callback below on multiple calls\n\t\t\tif (callback) callback(scriptid);\n\t\t};\n\t}\n\tif (existingScript && callback) {\n\t\tcallback(scriptid);\n\t}\n};\n\nFrameHelper.loadDynamicCSS = function (cssid, src, callback) {\n\tconst existingScript = document.getElementById(cssid);\n\tif (!existingScript) {\n\t\tconst link = document.createElement('link');\n\t\tlink.href = src; // URL for the third-party library being loaded.\n\t\tlink.id = cssid; // e.g., googleMaps or stripe\n\t\tlink.rel = 'stylesheet';\n\t\tdocument.body.appendChild(link);\n\t\tlink.onload = function () {\n\t\t\tif (callback) callback(cssid);\n\t\t};\n\t}\n\tif (existingScript && callback) callback(cssid);\n};\n\nmodule.exports = FrameHelper;\n","const TerminusClient = require('@terminusdb/terminus-client');\nconst UTILS = require('../../Utils');\n/*\nqObj: WOQL object\nwidth: width of snippet in px\nheight: height of snippet in px\n*/\nfunction TerminusCodeSnippet(language, mode, format, width, height, placeholder){\n\tthis.language = (language ? language : \"woql\");//woql / rule\n\tthis.mode = (mode ? mode : \"view\");\n    this.width = (width ? width : 1200);\n\tthis.height = (height ? height : 300);\n\tthis.placeholder = (placeholder ? placeholder : \"\");\n    this.format = (format ? format : \"js\");\n    this.formats = {'js': \"WOQL.js\", 'jsonld': \"JSON-LD\"};\n    if(this.mode == 'view')\n        this.snippet = document.createElement('pre');\n    else {\n    \tthis.snippet = document.createElement('textarea');\n    \tthis.snippet.setAttribute(\"spellcheck\", \"false\");\n\t\tthis.snippet.setAttribute(\"class\", \"terminus-code-snippet\");\n    }\n}\n\nTerminusCodeSnippet.prototype.setQuery = function(q){\n\tthis.qObj = q;\n\tthis.refreshContents();\n}\n\nTerminusCodeSnippet.prototype.serialise = function(query, format){\n\tif(format == \"js\"){\n\t\treturn query.prettyPrint(4);\n\t}\n\telse {\n\t\treturn JSON.stringify(query.json(), undefined, 2);\n\t}\n}\n\n//parses a string encoding a woql in either json or js notation\nTerminusCodeSnippet.prototype.parseText = function(text, format){\n\ttry {\n\t\tvar WOQL = TerminusClient.WOQL;\n\t\tif(format == \"js\"){\n\t\t\tvar nw = eval(text);\n\t\t\tif(this.language == \"rule\"){\n\t\t\t\tthis.view = view;\n\t\t\t\treturn view;\n\t\t\t}\n\t\t\treturn nw;\n\t\t}\n\t\telse {\n\t\t\tvar qval = JSON.parse(text);\n\t\t\tif(this.language == \"woql\"){\n\t\t\t\treturn WOQL.json(qval);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn WOQL.loadConfig(qval);\n\t\t\t}\n\t\t}\n\t}\n\tcatch(e){\n\t\tthis.error = \"Failed to parse Query \" + e.toString() + \" \" + text;\n\t\treturn this.error;\n\t\t//return false;\n\t}\n}\n\nTerminusCodeSnippet.prototype.getInputElement = function(){\n\treturn this.snippet;\n}\n\nTerminusCodeSnippet.prototype.readInput = function(){\n\tif(this.mode == \"edit\") {\n\t\tthis.qObj = this.parseText(this.snippet.value, this.format);\n\t\treturn this.qObj;\n\t}\n\treturn this.qObj;\n}\n\nTerminusCodeSnippet.prototype.get = function(){\n\treturn this.readInput();\n}\n\nTerminusCodeSnippet.prototype.getAsDOM = function(with_buttons){\n    var scont = document.createElement('div');\n\tscont.setAttribute('class', 'terminus-snippet-container terminus-display-flex')\n    // query\n    var snpc = document.createElement('div');\n    snpc.setAttribute('style', 'display:table-caption; margin: 20px');\n    if(this.placeholder)\n\t\tthis.snippet.setAttribute(\"placeholder\", this.placeholder);\n    if(this.width && this.height)\n\t\tthis.snippet.setAttribute(\"style\", \"width: \"+ this.width +\"px; height: \"+ this.height + \"px;\");\n    //if(this.language == \"woql\"){\n    \tsnpc.appendChild(this.getFormatButtons());\n    //}\n    //else {\n    //\tif(with_buttons) snpc.appendChild(this.getViewTypeButtons());\n    //}\n    if(this.qObj){\n    \tvar serial = this.serialise(this.qObj, this.format);\n\t\t//console.log('serial', serial);\n    \tif(this.mode == \"edit\"){\n    \t\tthis.snippet.value = serial;\n    \t}\n    \telse {\n    \t\tthis.snippet.appendChild(document.createTextNode(serial));\n    \t}\n\t}\n\telse {\n\t\tthis.snippet.value = \"\";\n\t}\n    snpc.appendChild(this.snippet);\n    if(this.mode == \"edit\"){\n    \tvar actbtn = this.getSubmitButton();\n    \tsnpc.appendChild(actbtn);\n    }\n    scont.appendChild(snpc);\n    return scont;\n}\n\nTerminusCodeSnippet.prototype.changeRuleView = function(nview){\n\tthis.snippet.value = \"view = WOQL.\"+ nview + \"()\";\n\tthis.readInput();\n\tthis.submit(this.qObj);\n}\n\n\nTerminusCodeSnippet.prototype.getIconsDOM = function(){\n    var bsp = document.createElement('span');\n    bsp.setAttribute('class', 'terminus-snippet-icons');\n    for(var i = 0; i<this.view_types.length; i++){\n\t\tvar isp = document.createElement('span');\n\t\tvar icon = document.createElement(\"i\");\n\t\ticon.title = this.view_types[i].label;\n\t\ticon.setAttribute(\"class\", this.view_types[i].icon);\n\t\tisp.appendChild(icon);\n\t\tisp.name = this.view_types[i].id;\n\t\tvar self = this;\n\t\tisp.addEventListener('click', function(){\n\t\t\tif(!(self.view && self.view.type == this.name)){\n\t\t\t\tself.changeRuleView(this.name);\n\t\t\t}\n\t\t});\n\t\tisp.addEventListener('mouseover', function(){\n\t\t\tif(!(self.view && self.view.type == this.name)){\n\t\t\t\tthis.style.cursor = \"pointer\";\n\t\t\t}\n\t\t});\n\t\tbsp.appendChild(isp);\n    }\n    return bsp;\n}\n\nTerminusCodeSnippet.prototype.getFormatButtons = function(){\n    var bsp = document.createElement('span');\n    bsp.setAttribute('class', 'terminus-snippet-panel');\n    //if(this.width) bsp.setAttribute(\"style\", \"width: \"+ this.width +\"px;\");\n    for(f in this.formats){\n        var btn = document.createElement('button');\n        btn.setAttribute('value', f);\n        btn.setAttribute('class', 'terminus-snippet-button');\n\t\tif(f == 'js') btn.classList.add('terminus-snippet-format-selected');\n        btn.appendChild(document.createTextNode(this.formats[f]));\n        var self = this;\n        btn.addEventListener('click', function(){\n\t\t\tUTILS.setSelected(this, 'terminus-snippet-format-selected');\n\t\t\tvar qobj = self.parseText(self.snippet.value, self.format);\n\t\t\tself.format = this.value;\n\t\t\tif(qobj) self.qObj = qobj;\n\t\t\tself.refreshContents();\n        })\n        bsp.appendChild(btn);\n    }\n    return bsp;\n}\n\nTerminusCodeSnippet.prototype.getSubmitButton = function(){\n    var actbtn = document.createElement('button');\n    actbtn.setAttribute('class', 'terminus-btn');\n\tactbtn.setAttribute('type', 'submit');\n\tvar txt = \"Submit\";\n\tif(this.language == \"WOQL\"){\n\t\ttxt = \"Submit Query\";\n\t}\n\telse if(this.language == \"rule\") {\n\t\ttxt = \"Update View\";\n\t}\n\telse if(this.language == \"code\"){\n\t\ttxt = \"Run Script\";\n\t}\n    actbtn.appendChild(document.createTextNode(txt));\n    actbtn.addEventListener('click', () => {\n\t\tthis.readInput();\n\t\tthis.submit(this.qObj);\n    });\n    return actbtn;\n}\n\nTerminusCodeSnippet.prototype.submit = function(){\n\talert(\"Submitted \" + JSON.stringify(this.qObj));\n}\n\nTerminusCodeSnippet.prototype.removeCodeMirror = function(){\n\tvar cm = this.snippet.nextSibling;\n\tif(!cm) return;\n\tif(cm.classList.contains('CodeMirror')) // remove code mirror\n\t\tTerminusClient.FrameHelper.removeElement(cm);\n}\n\nTerminusCodeSnippet.prototype.stylizeSnippet = function(){\n\tvar dimensions = {};\n\tdimensions.width = this.width;\n\tdimensions.height = this.height;\n\tthis.removeCodeMirror();\n\tif(this.mode == 'view')\n\t\tUTILS.stylizeCodeDisplay(null, this.snippet, null, 'javascript');\n\telse UTILS.stylizeEditor(null, this.snippet, dimensions, 'javascript'); // default view is js\n}\n\nTerminusCodeSnippet.prototype.refreshContents = function(qObj){\n\tqObj = qObj ? qObj : this.qObj;\n\tTerminusClient.FrameHelper.removeChildren(this.snippet);\n\tif(this.mode == \"edit\") this.snippet.value == \"\";\n\tif(!qObj) return;\n\tvar serial = this.serialise(this.qObj, this.format);\n\tif(this.mode == \"edit\"){\n\t\tthis.snippet.value = serial;\n\t\tif(this.snippet.nextSibling){\n\t\t\tthis.removeCodeMirror();\n\t\t\tif(this.format == 'js') var mode = 'javascript';\n\t\t\telse var mode = 'application/ld+json';\n\t\t\tUTILS.stylizeEditor(null,\n\t\t\t\t\t\t\t\tthis.snippet,\n\t\t\t\t\t\t\t\t{width: this.width, height: this.height},\n\t\t\t\t\t\t\t\tmode);\n\t\t}\n\t}\n\telse {\n\t\tthis.snippet.appendChild(document.createTextNode(serial));\n\t\tUTILS.stylizeCodeDisplay(null, this.snippet, null, mode);\n\t}\n}\n\nmodule.exports = TerminusCodeSnippet;\n","function getErrorAsMessage(url, api, err) {\n\t// console.log('getErrorAsMessage');\n\tlet str = '';\n\tif (err.response) {\n\t\terr = err.response;\n\t\tif (err.data) str += `${formatErrorMessage(err.data)}`;\n\t} else if (err.body) str += `${formatErrorMessage(err.data)}`;\n\n\tif (err.status) str += `Code: ${err.status}`;\n\tif (err.action) str += `, Action: ${err.action}`;\n\tif (err.type) str += `, Type: ${err.type}`;\n\tif (url) str += `, url: ${url}`;\n\tif (api && api.method) str += `, method: ${api.method}`;\n\treturn str;\n}\n\nfunction formatErrorMessage(msg) {\n\tif (typeof msg === 'object') {\n\t\tlet nmsg = '';\n\t\tfor (const key of Object.keys(msg)) {\n\t\t\tnmsg += `${key} ${msg[key]} `;\n\t\t}\n\t\treturn nmsg;\n\t}\n\treturn msg;\n}\n\nfunction accessDenied(action, db, server) {\n\tconst err = {};\n\terr.status = 403;\n\terr.url = (server || '') + (db || '');\n\terr.type = 'client';\n\terr.action = action;\n\terr.body = `${err.action} not permitted for ${err.url}`;\n\treturn err;\n}\n\nfunction getAPIErrorMessage(url, api, err) {\n\treturn `API Error ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getAccessDeniedMessage(url, api, err) {\n\treturn `Access Denied ${getErrorAsMessage(url, api, err)}`;\n}\n\nfunction getInvalidURIMessage(url, call) {\n\tconst str = `Invalid argument to\n            ${call}. \n            ${url}\n            is not a valid Terminus DB API endpoint`;\n\treturn str;\n}\n\n/**\n * Utility functions for generating and retrieving error messages\n * and storing error state\n */\n\nfunction parseAPIError(response) {\n\tconst err = {};\n\terr.status = response.status;\n\terr.type = response.type;\n\tif (response.data && typeof response.data === 'object') {\n\t\tlet msg;\n\t\ttry {\n\t\t\tmsg = response.text();\n\t\t} catch (e) {\n\t\t\ttry {\n\t\t\t\tmsg = response.json();\n\t\t\t} catch (error) {\n\t\t\t\tmsg = response.toString();\n\t\t\t}\n\t\t}\n\t\terr.body = msg;\n\t} else if (response.data) err.body = response.data;\n\terr.url = response.url;\n\terr.headers = response.headers;\n\terr.redirected = response.redirected;\n\treturn err;\n}\n\n\nmodule.exports = {\n\tgetErrorAsMessage,\n\tgetAPIErrorMessage,\n\tgetAccessDeniedMessage,\n\taccessDenied,\n\tgetInvalidURIMessage,\n\tparseAPIError\n};\n","const DatatypeRenderers = require(\"./DatatypeRenderers\");\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction TerminusFrame(client){\n\tthis.client = client;\n\tthis.load_schema = false;\n}\n\nTerminusFrame.prototype.options = function(opts){\n\tthis.config = opts || TerminusClient.WOQL.document();\n\treturn this;\n}\n\nTerminusFrame.prototype.setDatatypes = function(func){\n\tthis.datatypes = new DatatypeRenderers();\n\tif(this.config.datatypes) this.datatypes.options(this.config.datatypes);\n\tif(func) func(this.datatypes);\n\treturn this;\n}\n\nTerminusFrame.prototype.loadDocument = function(url, cls){\n\tif(!url) return false;\n\tvar self = this;\n\tif(url.substring(0,4) == \"doc:\"){\n\t\turl = url.substring(4);\n\t}\n\treturn this.client.getDocument(url, {\"terminus:encoding\": \"terminus:frame\"})\n\t.then(function(response){\n\t\tself.loadDataFrames(response);\n\t\tif(self.config.load_schema()){\n\t\t\tself.loadDocumentSchema(self.document.cls);\n\t\t}\n\t\treturn response;\n\t});\n}\n\nTerminusFrame.prototype.loadDocumentSchema = function(cls){\n\tvar self = this;\n\tvar ncls = TerminusClient.FrameHelper.unshorten(cls);\n\treturn this.client.getClassFrame(false, ncls)\n\t.then(function(response){\n\t\treturn self.loadSchemaFrames(response, cls);\n\t});\n}\n\nTerminusFrame.prototype.loadDataFrames = function(dataframes, cls){\n\tif(!cls){\n\t\tif(this.document) cls = this.document.cls;\n\t\telse {\n\t\t\tif(dataframes && dataframes.length && dataframes[0] && dataframes[0].domain){\n\t\t\t\tcls = dataframes[0].domain;\n\t\t\t}\n\t\t}\n\t}\n\tif(cls){\n\t\tif(!this.document){\n\t\t\tthis.document = new TerminusClient.ObjectFrame(cls, dataframes);\n\t\t}\n\t\telse {\n\t\t\tthis.document.loadDataFrames(dataframes);\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"Missing Class\" + \" \" + \"Failed to add dataframes due to missing class\");\n\t}\n}\n\nTerminusFrame.prototype.loadSchemaFrames = function(classframes, cls){\n\tif(!cls){\n\t\tif(classframes && classframes.length && classframes[0] && classframes[0].domain){\n\t\t\tcls = classframes[0].domain;\n\t\t}\n\t}\n\tif(cls){\n\t\tif(!this.document){\n\t\t\tthis.document = new TerminusClient.ObjectFrame(cls);\n\t\t}\n\t\tif(classframes){\n\t\t\tthis.document.loadClassFrames(classframes);\n\t\t\tif(!this.document.subjid){\n\t\t\t\tthis.document.newDoc = true;\n\t\t\t\tthis.document.fillFromSchema(\"_:\");\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(\"Missing Class\", \"Failed to add class frames due to missing class\");\n\t}\n}\n\nTerminusFrame.prototype.render = function(){\n\tif(!this.renderer && this.document){\n\t\tif(this.config.renderer()){\n\t\t\tthis.renderer = this.config.renderer();\n\t\t}\n\t\telse {\n\t\t\tthis.applyRulesToDocument(this.document, this.config);\n\t\t\tthis.renderer = this.document;\n\t\t}\n\t}\n\tif(this.renderer && this.renderer.render){\n\t\t//this.renderer.world();\n\t\treturn this.renderer.render(this.document);\n\t}\n\telse if(typeof this.renderer == \"function\"){\n\t\tvar x = this.renderer(this.document);\n\t\treturn x;\n\t}\n\telse {\n\t\tconsole.log(\"didna make it \");\n\t}\n}\n\n/*\n * adds render and compare functions to object frames\n */\nTerminusFrame.prototype.applyRulesToDocument = function(doc, config){\n\tvar self = this;\n\tfunction onmatch(frame, rule){\n\t\tif(typeof rule.render() != \"undefined\"){\n\t\t\tframe.render = rule.render();\n\t\t}\n\t\telse {\n\t\t\tif(rule.renderer()){\n\t\t\t\tvar renderer = self.loadRenderer(rule.renderer(), frame, rule.args);\t\t\n\t\t\t}\n\t\t\tif(renderer && renderer.render){\n\t\t\t\tframe.render = function(frame){\n\t\t\t\t\treturn renderer.render(frame);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(rule.compare()){\n\t\t\tframe.compare = rule.compare();\n\t\t}\n\t\tconfig.setFrameDisplayOptions(frame, rule);\n\t}\n\tthis.document.filter(config.rules, onmatch);\n}\n\nTerminusFrame.prototype.loadRenderer = function(rendname, frame, args){\n\tif(this.owner){\n\t\treturn this.owner.loadRenderer(rendname, frame, args, this);\n\t}\n\treturn false;\n}\n\nmodule.exports = TerminusFrame ;\n","const TerminusClient = require('@terminusdb/terminus-client');\nfunction TerminusPluginManager(){\n\tthis.preloaded = [];\n\tthis.loaded = [];\n\tthis.loading = [];\n\tthis.precluded = [];\n\tthis.plugins = {};\n\tthis.plugins[\"font-awesome\"] = {\n\t\tlabel: \"Font Awesome\",\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0-11/css/all.css\"]\n\t};\n\tthis.plugins[\"quill\"] = {\n\t\tlabel: \"Quill\",\n\t\tjs: [\"https://cdn.quilljs.com/1.3.6/quill.min.js\"],\n\t\tcss: [\"https://cdn.quilljs.com/1.3.6/quill.snow.css\"],\n\t};\n\tthis.plugins[\"codemirror\"] = {\n\t\tlabel : \"Code Mirror\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/xml/xml.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/css/css.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/turtle/turtle.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/javascript/javascript.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/anyword-hint.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/runmode/runmode.js\",\n\t\t  \t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/http/http.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/closebrackets.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/matchbrackets.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/display/placeholder.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/foldgutter.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/foldcode.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/indent-fold.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/markdown-fold.js\"\n\n\n\n\t  ],\n\t\tcss: [\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/neo.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/erlang-dark.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/fold/foldgutter.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/eclipse.css\"\n\t\t]\n\t};\n\tthis.plugins[\"jquery\"] = {\n\t\tlabel: \"jQuery\",\n\t\tjs: [\"https://code.jquery.com/jquery-2.2.4.min.js\"]\n\t};\n\tthis.plugins[\"jqueryui\"] = {\n\t\tlabel: \"jQuery UI\",\n\t\tcss: [\"https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css\"],\n\t\tjs: [\"https://code.jquery.com/ui/1.12.0/jquery-ui.js\"],\n\t\trequires: ['jquery']\n\t};\n\tthis.plugins[\"datatables\"] = {\n\t\tlabel: \"Data Tables\",\n\t\tjs: [\"https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js\",\n\t\t\t \"https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.16/b-1.5.1/b-html5-1.5.1/datatables.min.js\"],\n\t\tcss: [\"https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css\"],\n\t\trequires: ['jquery']\n\t};\n\t/*this.plugins[\"prettify\"] = {\n\t\tlabel: \"Prettify\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.css\"],\n\t\trequires: ['jquery']\n\t};*/\n\tthis.plugins[\"gmaps\"] = {\n\t\tlabel: \"Google Maps\",\n\t\tjs: [\"https://maps.googleapis.com/maps/api/js\"],\n\t\t//plugin: \"gmaps.terminus.js\"\n\t};\n\tthis.plugins[\"d3\"] = {\n\t\tlabel: \"d3\",\n\t\tjs: [\"https://code.jquery.com/jquery-2.2.4.min.js\"],\n\t\trequires: ['jquery']\n\t};\n\tthis.plugins[\"select2\"] = {\n\t\tlabel: \"Select 2\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css\"],\n\t\trequires: ['jquery']\n\t};\n\t/*this.plugins[\"jsoneditor\"] = {\n\t\tlabel: \"JSON Editor\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/7.0.4/jsoneditor.min.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/7.0.4/jsoneditor.min.css\"],\n\t\t//plugin: \"jsoneditor.terminus.js\"\n\t};\n\tthis.plugins[\"bootstrap\"] = {\n\t\tlabel: \"Bootstrap\",\n\t\tjs: [\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap.min.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css\"]\n\t};\n\tthis.plugins[\"flot\"] = {\n\t\tlabel: \"Flot\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.min.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.resize.min.js\"],\n\t\trequires: [\"jquery\"]\n\t};*/\n}\n\nTerminusPluginManager.prototype.setPluginOptions = function(opts){\n\tfor(var p in opts){\n\t\tif(!this.plugins[p]) continue;\n\t\tfor(var k in opts[p]){\n\t\t\tthis.plugins[p][k] = opts[p][k];\n\t\t}\n\t}\n}\n\nTerminusPluginManager.prototype.init = function(opts, then){\n\tif(opts) this.setPluginOptions(opts);\n\tthis.calculatePreloaded();\n\tvar toload = this.calculateRequiredInitPlugins(opts);\n\tif(toload && toload[0].length) {\n\t\tif(toload[1].length){\n\t\t\tvar self = this;\n\t\t\tvar nthen = function(){\n\t\t\t\tself.loadPlugins(toload[1], then);\n\t\t\t}\n\t\t\tthis.loadPlugins(toload[0], nthen);\n\t\t}\n\t\telse {\n\t\t\tthis.loadPlugins(toload[0], then);\n\t\t}\n\t}\n\telse if(then){\n\t\tthen();\n\t}\n}\n\nTerminusPluginManager.prototype.calculateRequiredInitPlugins = function(opts){\n\tif(opts){\n\t\tvar pins = [];\n\t\tfor(var pid in opts){\n\t\t\tif(opts[pid] && pins.indexOf(pid) == -1){\n\t\t\t\tif(typeof opts[pid] != \"object\" && opts[pid]){\n\t\t\t\t\tpins.push(pid);\n\t\t\t\t}\n\t\t\t\telse if(typeof opts[pid] == \"object\"){\n\t\t\t\t\tif(!(typeof opts[pid].loaded != \"undefined\" && !opts[pid].loaded)){\n\t\t\t\t\t\tpins.push(pid);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tvar pins = this.getDefaultPlugins();\n\t}\n\tvar needed_pins = [];\n\tfor(var i = 0; i<pins.length; i++){\n\t\tif(this.loaded.indexOf(pins[i]) == -1 && this.preloaded.indexOf(pins[i]) == -1 ){\n\t\t\tneeded_pins.push(pins[i])\n\t\t}\n\t}\n\tvar loading_order = [[], []];\n\tfor(var i = 0; i<needed_pins.length; i++){\n\t\tif(this.plugins[needed_pins[i]]){\n\t\t\tif(this.plugins[needed_pins[i]].requires && this.plugins[needed_pins[i]].requires.length){\n\t\t\t\tloading_order[1].push(needed_pins[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tloading_order[0].push(needed_pins[i]);\n\t\t\t}\n\t\t}\n\t}\n\treturn loading_order;\n}\n\nTerminusPluginManager.prototype.getAvailablePlugins = function(){\n\treturn this.plugins;\n}\n\nTerminusPluginManager.prototype.calculatePreloaded = function(){\n\tfor(var pl in this.plugins){\n\t\tif(this.pluginAvailable(pl)){\n\t\t\tthis.preloaded.push(pl);\n\t\t}\n\t}\n}\n\nTerminusPluginManager.prototype.pluginAvailable = function(plugin, version_check){\n\tif(typeof this.plugins[plugin] == \"object\"){\n\t\tvar pluginmeta = this.plugins[plugin];\n\t\tif(pluginmeta.requires && pluginmeta.requires.length){\n\t\t\tfor(var i =0 ; i < pluginmeta.requires.length; i++){\n\t\t\t\tif(!this.pluginAvailable(pluginmeta.requires[i], version_check)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar required_version = (pluginmeta.version ? pluginmeta.version : false);\n\t\tswitch(plugin){\n\t\t\tcase \"jquery\": {\n\t\t\t\tif(typeof jQuery == \"undefined\") return false;\n\t\t\t\tif(version_check && required_version){}\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"jqueryui\": {\n\t\t\t\ttry{\n\t\t\t\t\tif(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.slider )) return true;\n\t\t\t\t}\n\t\t\t\tcatch(e){}\n\t\t\t\treturn false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"quill\": {\n\t\t\t\tif(typeof Quill == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"jsoneditor\": {\n\t\t\t\tif(typeof JSONEditor == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"codemirror\": {\n\t\t\t\tif(typeof CodeMirror == \"undefined\") return false;\n\t\t\t\treturn this.plugins[plugin];  // sent plugin config with darkmode true/ false\n\t\t\t}\n\t\t\tcase \"font-awesome\": {\n\t\t\t\t//if(typeof CodeMirror != \"undefined\") return true;\n\t\t\t\treturn this.fontAwesomeCheck();\n\t\t\t}\n\t\t\tcase \"datatables\": {\n\t\t\t\t if(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.dataTable)) return true;\n\t\t\t\t return false;\n\t\t\t}\n\t\t\tcase \"select2\": {\n\t\t\t\t if(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.select2 )) return true;\n\t\t\t\t return false;\n\t\t\t}\n\t\t\tcase \"gmaps\": {\n\t\t\t\tif(typeof google == \"undefined\" || typeof google.maps == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase \"openlayers\": {\n\t\t\t\tif(typeof ol == \"undefined\" || typeof ol.Map == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase \"d3\": {\n\t\t\t\tif(typeof d3 == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(new Error(plugin + \" is not a supported plugin ID\"));\n\t}\n\treturn false;\n};\n\nTerminusPluginManager.prototype.fontAwesomeCheck = function(){\n\tvar span = document.createElement('span');\n\tspan.className = 'fa';\n\tspan.style.display = 'none';\n\tif(document.body){\n\t\tdocument.body.insertBefore(span, document.body.firstChild);\n\t\tfunction css(element, property) {\n\t\t  return window.getComputedStyle(element, null).getPropertyValue(property);\n\t\t}\n\t\tvar loaded = false;\n\t\tvar fontAwsm = css(span, 'font-family');\n\t\tif (fontAwsm.replace(/\"/g, \"\") == 'Font Awesome 5 Free') { // remove double quotes\n\t\t\tloaded = true;\n\t\t}\n\t\tdocument.body.removeChild(span);\n\t\treturn loaded;\n\t}\n\treturn false;\n}\n\nTerminusPluginManager.prototype.getDefaultPlugins = function(){\n\tvar defplugs = [\"font-awesome\"];\n\treturn defplugs;\n}\n\nTerminusPluginManager.prototype.loadPlugins = function(plugins, then){\n\tvar ticker = plugins.length;\n\tvar cback = function(){\n\t\tif(--ticker <= 1 && then){\n\t\t\tthen();\n\t\t}\n\t};\n\tfor(var i = 0; i < plugins.length; i++){\n\t\tthis.loadPlugin(plugins[i], cback);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPlugin = function(plugin, then){\n\tvar pug = this.plugins[plugin];\n\tif(pug.css){\n\t\tfor(var i=0; i<pug.css.length; i++){\n\t\t\tvar cssid = plugin + \"_css_\" + i;\n\t\t\tTerminusClient.FrameHelper.loadDynamicCSS(cssid, pug.css[i]);\n\t\t}\n\t}\n\tvar scripts = (pug.js ? pug.js : []);\n\tif(plugin == \"gmaps\" && pug.key){\n\t\tscripts[0] += \"?key=\" + pug.key;\n\t}\n\tif(pug.plugin){\n\t\t//scripts.push(\"plugins/\" + pug.plugin);\n\t}\n\tif(plugin == \"codemirror\"){\n\t\tvar cm = scripts[0];\n\t\tvar sid = plugin + \"_js_\" + (scripts.length -1);\n\t\tscripts.splice(0, 1);\n\t\tvar self = this;\n\t\tvar cback = function(){\n\t\t\tself.loadPluginScripts(plugin, scripts, then);\n\t\t}\n\t\tTerminusClient.FrameHelper.loadDynamicScript(sid, cm, cback);\n\t}\n\telse {\n\t\tthis.loadPluginScripts(plugin, scripts, then);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPluginScripts = function(plugin, scripts, then){\n\tvar ticker = scripts.length - 1;\n\tvar self = this;\n\tvar cback = function(){\n\t\tif(ticker == 0) {\n\t\t\tif(self.loaded.indexOf(plugin) == -1){\n\t\t\t\tself.loaded.push(plugin);\n\t\t\t}\n\t\t\tif(self.loading.indexOf(plugin) != -1){\n\t\t\t\tself.loading.splice(self.loading.indexOf(plugin), 1);\n\t\t\t}\n\t\t\tthen();\n\t\t}\n\t\tticker--;\n\t};\n\tif(scripts.length == 0){\n\t\tthis.loaded.push(plugin);\n\t}\n\telse {\n\t\tthis.loading.push(plugin);\n\t}\n\tfor(var i = 0; i<scripts.length; i++){\n\t\tvar sid = plugin + \"_js_\" + i;\n\t\tTerminusClient.FrameHelper.loadDynamicScript(sid, scripts[i], cback);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPageCSS = function(css){\n\tcssfid = \"terminus_client_css\";\n\tvar cssdom = document.getElementById(cssfid);\n\tif(cssdom){\n\t\tcssdom.parentNode.removeChild(cssdom);\n\t}\n\tif(css){\n\t\tcssurl = \"css/\" + css + \".css\";\n\t\tTerminusClient.FrameHelper.loadDynamicCSS(cssfid, cssurl);\n\t}\n}\n\nTerminusPluginManager.prototype.pluginLoadable = function(pid){\n\treturn (this.precluded.indexOf(pid) !== -1 || this.pluginLoadedOrLoading(pid));\n}\n\nTerminusPluginManager.prototype.pluginLoadedOrLoading = function(pid){\n\tif(this.loaded.indexOf(pid) != -1) return true;\n\tif(this.preloaded.indexOf(pid) != -1) return true;\n\tif(this.loading.indexOf(pid) != -1) return true;\n\treturn false;\n}\n\nTerminusPluginManager.prototype.disabled = function(pid, obj){\n\tif(this.precluded.indexOf(pid) != -1) return true;\n\tif(obj.requires){\n\t\tfor(var i = 0; i<obj.requires.length; i++){\n\t\t\tif(!this.pluginLoadedOrLoading(obj.requires[i])) return true;\n\t\t}\n\t}\n\treturn false;\n}\n\nTerminusPluginManager.prototype.getPluginDOM = function(plugid, obj, ui){\n\tvar a = document.createElement(\"a\");\n\tvar cl = document.createElement(\"span\");\n\ta.appendChild(cl);\n\tcl.setAttribute(\"class\", \"terminus-plugin-control\");\n\tvar cbox = document.createElement(\"input\");\n\tcbox.id = \"terminus-plugin-control-\" + plugid;\n\tcbox.type = \"checkbox\";\n\tif(this.preloaded.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t\tcbox.disabled = true;\n\t}\n\telse if(this.loaded.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t}\n\telse if(this.loading.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t}\n\telse if(this.disabled(plugid, obj)){\n\t\tcbox.disabled = true;\n\t}\n\tvar clab = document.createElement(\"label\");\n\tclab.setAttribute(\"class\", \"terminus-plugin-label terminus-pointer\");\n\tclab.setAttribute(\"for\", cbox.id);\n\tclab.appendChild(document.createTextNode(obj.label));\n\tcl.appendChild(clab);\n\tcl.appendChild(cbox);\n\tvar self = this;\n\tcbox.addEventListener(\"change\", function(){\n\t\tself.togglePlugin(plugid, ui);\n\t});\n\treturn a;\n}\n\nTerminusPluginManager.prototype.togglePlugin = function(plugid, ui){\n\tif(this.loaded.indexOf(plugid) == -1){\n\t\tvar then = function(){\n\t\t\tui.redraw();\n\t\t}\n\t\tthis.loadPlugin(plugid, then);\n\t}\n\telse {\n\t\tthis.unloadPlugin(plugid);\n\t}\n\tTerminusClient.FrameHelper.removeChildren(ui.plugins);\n\tui.drawPlugins();\n}\n\nTerminusPluginManager.prototype.unloadPlugin = function(plugid){\n\tif(!this.plugins[plugid] || this.loaded.indexOf(plugid) == -1) {\n\t\tconsole.log(new Error(plugid + \" plugin unload request when it is not loaded\"));\n\t\treturn false;\n\t}\n\tvar pug = this.plugins[plugid];\n\tvar num = (pug.js) ? pug.js.length : 0;\n\tif(pug.plugin) num++;\n\tfor(var i=0; i< num; i++){\n\t\tvar cssfid = plugid + \"_js_\" + i;\n\t\tvar cssdom = document.getElementById(cssfid);\n\t\tif(cssdom){\n\t\t\tcssdom.parentNode.removeChild(cssdom);\n\t\t}\n\t}\n\tnum = (pug.css ? pug.css.length : 0);\n\tfor(var i=0; i< num; i++){\n\t\tvar cssfid = plugid + \"_css_\" + i;\n\t\tvar cssdom = document.getElementById(cssfid);\n\t\tif(cssdom){\n\t\t\tcssdom.parentNode.removeChild(cssdom);\n\t\t}\n\t}\n\tthis.loaded.splice(this.loaded.indexOf(plugid), 1);\n}\n\nTerminusPluginManager.prototype.getAsDOM = function(ui){\n\tvar dm = document.createElement(\"span\");\n\tdm.setAttribute(\"class\", \"terminus-plugin-manager\");\n\tvar clh = document.createElement(\"span\");\n\tclh.setAttribute(\"class\", \"terminus-plugin-control-header terminus-plugin-nav terminus-pointer\");\n\tclh.appendChild(document.createTextNode(\"Plugins\"));\n\tdm.appendChild(clh);\n\tvar a = document.createElement('a');\n\tthis.showPlugins(a, ui);\n\tclh.appendChild(a);\n\ta.style.display = 'none';\n\tclh.addEventListener('click', function(){\n\t\tif(a.style.display == 'none')\n\t\t\ta.style.display = 'block';\n\t\telse a.style.display = 'none';\n\t})\n\treturn dm;\n}\n\nTerminusPluginManager.prototype.showPlugins = function(a, ui){\n\ta.setAttribute('style', 'background-color: #111;');\n\tfor(var pid in this.plugins){\n\t\ta.appendChild(this.getPluginDOM(pid, this.plugins[pid], ui));\n\t}\n}\n\nmodule.exports=TerminusPluginManager\n","\nmodule.exports = Object.freeze({\n\tCONNECT: 'connect',\n\tGET_SCHEMA: 'get_schema',\n\tUPDATE_SCHEMA: 'update_schema',\n\tUPDATE_DOCUMENT: 'update_document',\n\tCLASS_FRAME: 'class_frame',\n\tWOQL_SELECT: 'woql_select',\n\tGET_DOCUMENT: 'get_document',\n\tDELETE_DATABASE: 'delete_database',\n\tDELETE_DOCUMENT: 'delete_document',\n\tCREATE_DATABASE: 'create_database',\n\tCREATE_DOCUMENT: 'create_document',\n\tWOQL_UPDATE: 'woql_update'\n});\n\n/*\n{\"extends\": \"strongloop\",\n  \"env\": {\n\t\t\"browser\": true,\n\t\t\"node\": true,\n\t\t\"es6\": true\n  },\n  \"rules\":{\"max-len\": [\"error\", { \"code\": 100 }]},\n \"parserOptions\": { \"ecmaVersion\": 6 }}\n*/\n","function authorityActionsToArr(action) {\n\tif (Array.isArray(action) === false) return [];\n\n\treturn action.map(item => item['@id']);\n}\n\nfunction URIEncodePayload(payload) {\n\tif (typeof payload === 'string') return encodeURIComponent(payload);\n\tconst payloadArr = [];\n\tfor (const key of Object.keys(payload)) {\n\t\tif (typeof payload[key] === 'object') {\n\t\t\tfor (const keyElement of Object.keys(payload[key])) {\n\t\t\t\t const valueElement = payload[key][keyElement];\n\t\t\t\t payloadArr.push(`${encodeURIComponent(keyElement)}=${encodeURIComponent(valueElement)}`);\n\t\t\t}\n\t\t} else {\n\t\t\tpayloadArr.push(`${encodeURIComponent(key)}=${encodeURIComponent(payload[key])}`);\n\t\t}\n\t}\n\treturn payloadArr.join('&');\n}\n\nmodule.exports = { authorityActionsToArr, URIEncodePayload };\n","const TerminusClient = require('@terminusdb/terminus-client');\nconst WOQLChooser = require(\"./WOQLChooser\");\nconst WOQLTable = require(\"./WOQLTable\");\nconst WOQLQueryViewer = require(\"./WOQLQueryView\");\nconst WOQLGraph = require(\"./WOQLGraph\");\nconst WOQLStream = require(\"./WOQLStream\");\nconst TerminusFrame = require(\"./TerminusFrame\");\n\nTerminusClient.WOQL.table = function(){ return new WOQLTableConfig(); }\nTerminusClient.WOQL.chart = function(){ return new WOQLChartConfig(); }\n\n\nTerminusClient.WOQL.graph = function(){ return new WOQLGraphConfig(); }\nTerminusClient.WOQL.chooser = function(){ return new WOQLChooserConfig(); }\nTerminusClient.WOQL.stream = function(){ return new WOQLStreamConfig(); }\nTerminusClient.WOQL.document = function(){ return new FrameConfig(); }\nTerminusClient.WOQL.loadConfig = function(config){\n\tif(config.table){\n\t\tvar view = new WOQLTableConfig();\n\t\tview.loadJSON(config.table, config.rules);\n\t}\n\telse if(config.chooser){\n\t\tvar view = new WOQLChooserConfig();\n\t\tview.loadJSON(config.chooser, config.rules);\n\t}\n\telse if(config.graph){\n\t\tvar view = new WOQLGraphConfig();\n\t\tview.loadJSON(config.graph, config.rules);\n\t}\n\telse if(config.stream){\n\t\tvar view = new WOQLStreamConfig();\n\t\tview.loadJSON(config.stream, config.rules);\n\t}\n\telse if(config.frame){\n\t\tvar view = new FrameConfig();\n\t\tview.loadJSON(config.frame, config.rules);\n\t}\n\treturn view;\n}\n//the below are aspirational...\n//TerminusClient.WOQL.map = function(){ return new WOQLMapConfig(); }\n//TerminusClient.WOQL.chart = function(){ return new WOQLChartConfig(); }\n\n//Class for expressing and matching rules about WOQL results\n//especially for efficiently expressing rules about how they should be rendered\n//const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction FrameConfig(){\n\tthis.rules = [];\n\tthis.type = \"document\";\n}\n\nFrameConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = WOQL.document();\\n\";\n\tif(this.renderer()){\n\t\tstr += \"view.renderer('\" + this.renderer() + \"')\\n\";\n\t}\n\tif(typeof this.load_schema() != \"undefined\"){\n\t\tstr += \"view.load_schema(\" + this.load_schema() + \")\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint(\"frame\") + \"\\n\";\n\t}\n\treturn str;\n}\n\nFrameConfig.prototype.json = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\tvar conf = {};\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tconf['renderer'] = this.renderer();\n\t}\n\tif(typeof this.load_schema() != \"undefined\"){\n\t\tconf['load_schema'] = this.load_schema();\n\t}\n\tlet mj = {\"frame\" :conf, \"rules\": jr};\n\treturn mj;\n}\n\nFrameConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new TerminusClient.WOQL.rule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(typeof config.renderer != \"undefined\"){\n\t\tthis.renderer(config.renderer);\n\t}\n\tif(typeof config.load_schema != \"undefined\"){\n\t\tthis.load_schema(config.load_schema);\n\t}\n}\n\nFrameConfig.prototype.create = function(client, renderers){\n\tvar tf = new TerminusFrame(client, this);\n\tif(this.trenderer) tf.setRenderer(this.trenderer);\n\telse if(renderers && renderers['frame']){\n\t\ttf.setRenderer(renderers['frame']);\n\t}\n\treturn tf;\n}\n\nFrameConfig.prototype.renderer = function(rend){\n\tif(typeof rend == \"undefined\") return this.trenderer;\n\tthis.trenderer = rend;\n\treturn this;\n}\n\nFrameConfig.prototype.json_rules = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\treturn jr;\n}\n\nFrameConfig.prototype.load_schema = function(tf){\n\tif(typeof tf == \"undefined\") return this.get_schema;\n\tthis.get_schema = tf;\n\treturn this;\n}\n\nFrameConfig.prototype.show_all = function(r){\n\tthis.all().renderer(r);\n\treturn this;\n}\n\nFrameConfig.prototype.show_parts = function(o, p, d){\n\tthis.object().renderer(o);\n\tthis.property().renderer(p);\n\tthis.data().renderer(d);\n\treturn this;\n}\n\nFrameConfig.prototype.object = function(){\n\tlet fp = TerminusClient.WOQL.rule();\n\tfp.scope(\"object\")\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\nFrameConfig.prototype.property = function(){\n\tlet fp = TerminusClient.WOQL.rule();\n\tfp.scope(\"property\");\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\nFrameConfig.prototype.data = function(){\n\tlet fp = TerminusClient.WOQL.rule();\n\tfp.scope(\"data\")\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\nFrameConfig.prototype.all = function(){\n\tlet fp = TerminusClient.WOQL.rule();\n\tfp.scope(\"*\")\n\tthis.rules.push(fp);\n\treturn fp;\n}\n\n\nFrameConfig.prototype.setFrameDisplayOptions = function(frame, rule){\n\tif(typeof frame.display_options == \"undefined\") frame.display_options = {};\n\tif(typeof rule.mode() != \"undefined\") {\tframe.display_options.mode = rule.mode();}\n\tif(typeof rule.view() != \"undefined\") frame.display_options.view = rule.view();\n\t//if(typeof rule.facets() != \"undefined\") frame.display_options.facets = rule.facets();\n\t//if(typeof rule.facet() != \"undefined\") frame.display_options.facet = rule.facet();\n\tif(typeof rule.showDisabledButtons() != \"undefined\") frame.display_options.show_disabled_buttons = rule.showDisabledButtons();\n\tif(typeof rule.features() != \"undefined\") {\n\t\tframe.display_options.features = rule.features();\n\t}\n\tif(typeof rule.header() != \"undefined\") frame.display_options.header = rule.header();\n\tif(typeof rule.hidden() != \"undefined\") frame.display_options.hidden = rule.hidden();\n\tif(typeof rule.collapse() != \"undefined\") frame.display_options.collapse = rule.collapse();\n\tif(typeof rule.headerFeatures() != \"undefined\") frame.display_options.header_features = rule.headerFeatures();\n\tif(typeof rule.showEmpty() != \"undefined\") frame.display_options.show_empty = rule.showEmpty();\n\tif(typeof rule.featureRenderers() != \"undefined\") frame.display_options.feature_renderers = rule.featureRenderers();\n\tif(typeof rule.dataviewer() != \"undefined\") {\n\t\tframe.display_options.dataviewer = rule.dataviewer();\n\t\tif(typeof rule.args() != \"undefined\")\n\t\t\tframe.display_options.args = rule.args();\n\t}\n}\n\n\n\n//WOQL.rule().renderer(\"object\").json(),\n//WOQL.rule().renderer(\"property\").json(),\n//WOQL.rule().renderer(\"data\").json(),\n//WOQL.rule().renderer(\"data\").property(\"rdfs:comment\").render(false).json()\n\n\n\n\n\n\n\n\n\n\nfunction WOQLStreamConfig(){\n\tthis.rules = [];\n\tthis.type = \"stream\";\n}\n\nWOQLStreamConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = WOQL.stream();\\n\";\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint(\"stream\") + \"\\n\";\n\t}\n\treturn str;\n}\n\nWOQLStreamConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n}\n\n\nWOQLStreamConfig.prototype.json = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\tvar conf = {};\n\tlet mj = {\"stream\" :conf, \"rules\": jr};\n\treturn mj;\n}\n\nWOQLStreamConfig.prototype.getMatchingRules = function(row, key, context, action){\n\treturn getMatchingRules(this.rules, row, key, context, action);\n}\n\nWOQLStreamConfig.prototype.create = function(client, renderers){\n\tvar wqt = new WOQLStream(client, this);\n\tif(this.trenderer) wqt.setRenderer(this.trenderer);\n\telse if(renderers && renderers['stream']){\n\t\twqt.setRenderer(renderers['stream']);\n\t}\n\treturn wqt;\n}\n\n\nfunction WOQLChooserConfig(){\n\tthis.rules = [];\n\tthis.type = \"chooser\";\n}\n\nWOQLChooserConfig.prototype.getMatchingRules = function(row, key, context, action){\n\treturn getMatchingRules(this.rules, row, key, context, action);\n}\n\nWOQLChooserConfig.prototype.create = function(client, renderers){\n\tvar wqt = new WOQLChooser(client, this);\n\tif(this.trenderer) wqt.setRenderer(this.trenderer);\n\telse if(renderers && renderers['chooser']){\n\t\twqt.setRenderer(renderers['chooser']);\n\t}\n\treturn wqt;\n}\n\nWOQLChooserConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = WOQL.chooser();\\n\";\n\tif(typeof this.change() != \"undefined\"){\n\t\tstr += \"view.change(\" + this.change() + \")\\n\";\n\t}\n\tif(typeof this.show_empty() != \"undefined\"){\n\t\tstr += \"view.show_empty('\" + this.show_empty() + \"')\\n\";\n\t}\n\tif(typeof this.values() != \"undefined\"){\n\t\tstr += \"view.values('\" + removeNamespaceFromVariable(this.values()) + \"')\\n\";\n\t}\n\tif(typeof this.labels() != \"undefined\"){\n\t\tstr += \"view.labels('\" + removeNamespaceFromVariable(this.labels()) + \"')\\n\";\n\t}\n\tif(typeof this.titles() != \"undefined\"){\n\t\tstr += \"view.titles('\" + removeNamespaceFromVariable(this.titles()) + \"')\\n\";\n\t}\n\tif(typeof this.sort() != \"undefined\"){\n\t\tstr += \"view.sort(\" + this.sort() + \")\\n\";\n\t}\n\tif(typeof this.direction() != \"undefined\"){\n\t\tstr += \"view.direction('\" + this.direction() + \"')\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint(\"chooser\") + \"\\n\";\n\t}\n\treturn str;\n}\n\nWOQLChooserConfig.prototype.json = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\tvar conf = {};\n\tif(typeof this.change() != \"undefined\"){\n\t\tconf['change'] = this.change();\n\t}\n\tif(typeof this.show_empty() != \"undefined\"){\n\t\tconf['show_empty'] = this.show_empty();\n\t}\n\tif(typeof this.values() != \"undefined\"){\n\t\tconf['values'] = this.values();\n\t}\n\tif(typeof this.labels() != \"undefined\"){\n\t\tconf['labels'] = this.labels();\n\t}\n\tif(typeof this.titles() != \"undefined\"){\n\t\tconf['titles'] = this.titles();\n\t}\n\tif(typeof this.sort() != \"undefined\"){\n\t\tconf['sort'] = this.sort();\n\t}\n\tif(typeof this.direction() != \"undefined\"){\n\t\tconf['direction'] = this.direction();\n\t}\n\tlet mj = {\"chooser\" :conf, \"rules\": jr};\n\treturn mj;\n}\n\nWOQLChooserConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(typeof config.change != \"undefined\"){\n\t\tthis.change(config.change);\n\t}\n\tif(typeof config.show_empty != \"undefined\"){\n\t\tthis.show_empty(config.show_empty);\n\t}\n\tif(typeof config.values != \"undefined\"){\n\t\tthis.values(config.values);\n\t}\n\tif(typeof config.labels != \"undefined\"){\n\t\tthis.labels(config.labels);\n\t}\n\tif(typeof config.titles != \"undefined\"){\n\t\tthis.titles(config.titles);\n\t}\n\tif(typeof config.sort != \"undefined\"){\n\t\tthis.sort(config.sort);\n\t}\n\tif(typeof config.direction != \"undefined\"){\n\t\tthis.direction(config.direction);\n\t}\n}\n\nWOQLChooserConfig.prototype.change = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.onChange = v;\n\t\treturn this;\n\t}\n\treturn this.onChange;\n}\n\nWOQLChooserConfig.prototype.show_empty = function(p){\n\tif(typeof p != \"undefined\"){\n\t\tthis.placeholder = p;\n\t\treturn this;\n\t}\n\treturn this.placeholder;\n}\n\nWOQLChooserConfig.prototype.rule = function(v){\n\tlet nr = new WOQLRule(\"row\");\n\tthis.rules.push(nr);\n\treturn nr.v(v);\n}\n\nWOQLChooserConfig.prototype.values = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tif(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.value_variable = v;\n\t\treturn this;\n\t}\n\treturn this.value_variable;\n}\n\nWOQLChooserConfig.prototype.labels = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.label_variable = v;\n\t\treturn this;\n\t}\n\treturn this.label_variable;\n}\n\nWOQLChooserConfig.prototype.titles = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.title_variable = v;\n\t\treturn this;\n\t}\n\treturn this.title_variable;\n}\n\nWOQLChooserConfig.prototype.sort = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.sort_variable = v;\n\t\treturn this;\n\t}\n\treturn this.sort_variable;\n}\n\nWOQLChooserConfig.prototype.direction = function(v){\n\tif(v){\n\t\tthis.sort_direction = v;\n\t\treturn this;\n\t}\n\treturn this.sort_direction;\n}\n\n\n//this.choice = (config && config.choice ? config.choice : false);\n\n\nfunction WOQLTableConfig(){\n\tthis.rules = [];\n\tthis.type = \"table\";\n}\n\nWOQLTableConfig.prototype.getMatchingRules = function(row, key, context, action){\n\treturn getMatchingRules(this.rules, row, key, context, action);\n}\n\nWOQLTableConfig.prototype.create = function(client, renderers, dtypes){\n\tvar wqt = new WOQLTable(client, this);\n\twqt.setDatatypes(dtypes);\n\tif(this.trenderer) wqt.setRenderer(this.trenderer);\n\telse if(renderers && renderers['table']){\n\t\twqt.setRenderer(renderers['table']);\n\t}\n\treturn wqt;\n}\n\nWOQLTableConfig.prototype.json = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\tvar conf = {};\n\tif(typeof this.column_order() != \"undefined\"){\n\t\tconf['column_order'] = this.column_order();\n\t}\n\tif(typeof this.pagesize() != \"undefined\"){\n\t\tconf['pagesize'] = this.pagesize();\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tconf['renderer'] = this.renderer();\n\t}\n\tif(typeof this.pager() != \"undefined\"){\n\t\tconf['pager'] = this.pager();\n\t}\n\tif(typeof this.page() != \"undefined\"){\n\t\tconf['page'] = this.page();\n\t}\n\tlet mj = {\"table\" :conf, \"rules\": jr};\n\treturn mj;\n}\n\nWOQLTableConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(typeof config.column_order != \"undefined\"){\n\t\tthis.column_order(config.column_order);\n\t}\n\tif(typeof config.pagesize != \"undefined\"){\n\t\tthis.pagesize(config.pagesize);\n\t}\n\tif(typeof config.renderer != \"undefined\"){\n\t\tthis.renderer(config.renderer);\n\t}\n\tif(typeof config.pager != \"undefined\"){\n\t\tthis.pager(config.pager);\n\t}\n\tif(typeof config.page != \"undefined\"){\n\t\tthis.titles(config.page);\n\t}\n}\n\nWOQLTableConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = WOQL.table();\\n\";\n\tif(typeof this.column_order() != \"undefined\"){\n\t\tstr += \"view.column_order('\" + this.column_order() + \"')\\n\";\n\t}\n\tif(typeof this.pagesize() != \"undefined\"){\n\t\tstr += \"view.pagesize(\" + this.pagesize() + \")\\n\";\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \"view.renderer('\" + this.renderer() + \"')\\n\";\n\t}\n\tif(typeof this.pager() != \"undefined\"){\n\t\tstr += \"view.pager(\" + this.pager() + \")\\n\";\n\t}\n\tif(typeof this.page() != \"undefined\"){\n\t\tstr += \"view.page(\" + this.page() + \")\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint(\"table\") + \"\\n\";\n\t}\n\treturn str;\n}\n\nWOQLTableConfig.prototype.renderer = function(rend){\n\tif(!rend) return this.trenderer;\n\tthis.trenderer = rend;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.column_order = function(...val){\n\tif(typeof val == \"undefined\" || val.length == 0){\n\t\treturn this.order;\n\t}\n\tthis.order = addNamespacesToVariables(val);\n\treturn this;\n}\n\nWOQLTableConfig.prototype.pager = function(val){\n\tif(typeof val == \"undefined\"){\n\t\treturn this.show_pager;\n\t}\n\tthis.show_pager = val;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.pagesize = function(val, editable){\n\tif(typeof val == \"undefined\"){\n\t\treturn this.show_pagesize;\n\t}\n\tthis.show_pagesize = val;\n\tthis.change_pagesize = editable;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.page = function(val){\n\tif(typeof val == \"undefined\"){\n\t\treturn this.show_pagenumber;\n\t}\n\tthis.show_pagenumber = val;\n\treturn this;\n}\n\nWOQLTableConfig.prototype.column = function(...cols){\n\tlet nr = new WOQLRule(\"column\");\n\tnr.setVariables(cols);\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\nWOQLTableConfig.prototype.row = function(){\n\tlet nr = new WOQLRule(\"row\");\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\nWOQLGraphConfig = function(){\n\tthis.rules = [];\n\tthis.type = \"graph\";\n}\n\nWOQLGraphConfig.prototype.create = function(client, renderers){\n\tvar wqt = new WOQLGraph(client, this);\n\tif(this.trenderer) wqt.setRenderer(this.trenderer);\n\telse if(renderers && renderers['graph']){\n\t\twqt.setRenderer(renderers['graph']);\n\t}\n\treturn wqt;\n}\n\nWOQLGraphConfig.prototype.getMatchingRules = function(row, key, context, action){\n\treturn getMatchingRules(this.rules, row, key, context, action);\n}\n\nWOQLGraphConfig.prototype.literals = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.show_literals = v;\n\t\treturn this;\n\t}\n\treturn this.show_literals;\n}\n\nWOQLGraphConfig.prototype.source = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.source_variable = v;\n\t\treturn this;\n\t}\n\treturn this.source_variable;\n}\n\nWOQLGraphConfig.prototype.fontfamily = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.fontfam = v;\n\t\treturn this;\n\t}\n\t//return 'Font Awesome 5 Free';\n\treturn this.fontfam;\n}\n\nWOQLGraphConfig.prototype.show_force = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.force = v;\n\t\treturn this;\n\t}\n\treturn this.force;\n}\n\nWOQLGraphConfig.prototype.fix_nodes = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.fixed = v;\n\t\treturn this;\n\t}\n\treturn this.fixed;\n}\n\nWOQLGraphConfig.prototype.explode_out = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.explode = v;\n\t\treturn this;\n\t}\n\treturn this.explode;\n}\n\nWOQLGraphConfig.prototype.selected_grows = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.bigsel = v;\n\t\treturn this;\n\t}\n\treturn this.bigsel;\n}\n\nWOQLGraphConfig.prototype.width = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.gwidth = v;\n\t\treturn this;\n\t}\n\treturn this.gwidth;\n}\n\nWOQLGraphConfig.prototype.height = function(v){\n\tif(typeof v != \"undefined\"){\n\t\tthis.gheight = v;\n\t\treturn this;\n\t}\n\treturn this.gheight;\n}\n\nWOQLGraphConfig.prototype.edges = function(...edges){\n\tif(edges && edges.length){\n\t\tvar nedges = [];\n\t\tfor(var i = 0; i<edges.length; i++){\n\t\t\tnedges.push(addNamespacesToVariables(edges[i]));\n\t\t}\n\t\tthis.show_edges = nedges;\n\t\treturn this;\n\t}\n\treturn this.show_edges;\n}\n\nWOQLGraphConfig.prototype.edge = function(source, target){\n\tlet nr = new WOQLRule(\"edge\");\n\tif(source && target) nr.setVariables([source, target]);\n\telse if(source) nr.setVariables([source]);\n\telse if(target) nr.setVariables([target]);\n\tif(source) nr.source = source;\n\tif(target) nr.target = target;\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\nWOQLGraphConfig.prototype.node = function(...cols){\n\tlet nr = new WOQLRule(\"node\");\n\tnr.setVariables(cols);\n\tthis.rules.push(nr);\n\treturn nr;\n}\n\nWOQLGraphConfig.prototype.getConfigAsJSON = function(){\n\tvar json = {};\n\tif(typeof this.literals() != \"undefined\"){\n\t\tjson['literals'] = this.literals();\n\t}\n\tif(typeof this.source() != \"undefined\"){\n\t\tjson['source'] = this.source();\n\t}\n\tif(typeof this.fontfamily() != \"undefined\"){\n\t\tjson['fontfamily'] = this.fontfamily();\n\t}\n\tif(typeof this.show_force() != \"undefined\"){\n\t\tjson['show_force'] = this.show_force();\n\t}\n\tif(typeof this.fix_nodes() != \"undefined\"){\n\t\tjson['fix_nodes'] = this.fix_nodes();\n\t}\n\tif(typeof this.explode_out() != \"undefined\"){\n\t\tjson['explode_out'] = this.explode_out();\n\t}\n\tif(typeof this.selected_grows() != \"undefined\"){\n\t\tjson['selected_grows'] = this.selected_grows();\n\t}\n\tif(typeof this.width() != \"undefined\"){\n\t\tjson['width'] = this.width();\n\t}\n\tif(typeof this.height() != \"undefined\"){\n\t\tjson['height'] = this.height();\n\t}\n\tif(typeof this.edges() != \"undefined\"){\n\t\tjson['edges'] = this.edges();\n\t}\n\treturn json;\n}\n\nWOQLGraphConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(typeof config.literals != \"undefined\"){\n\t\tthis.literals(config.literals);\n\t}\n\tif(typeof config.source != \"undefined\"){\n\t\tthis.source(config.source);\n\t}\n\tif(typeof config.fontfamily != \"undefined\"){\n\t\tthis.fontfamily(config.fontfamily);\n\t}\n\tif(typeof config.show_force != \"undefined\"){\n\t\tthis.show_force(config.show_force);\n\t}\n\tif(typeof config.fix_nodes != \"undefined\"){\n\t\tthis.fix_nodes(config.showfix_nodes_force);\n\t}\n\tif(typeof config.explode_out != \"undefined\"){\n\t\tthis.explode_out(config.explode_out);\n\t}\n\tif(typeof config.selected_grows != \"undefined\"){\n\t\tthis.selected_grows(config.selected_grows);\n\t}\n\tif(typeof config.width != \"undefined\"){\n\t\tthis.width(config.width);\n\t}\n\tif(typeof config.height != \"undefined\"){\n\t\tthis.height(config.height);\n\t}\n\tif(typeof config.edges != \"undefined\"){\n\t\tthis.edges(config.edges);\n\t}\n}\n\n\nWOQLGraphConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = WOQL.graph();\\n\";\n\tif(typeof this.literals() != \"undefined\"){\n\t\tstr += \"view.literals('\" + this.literals() + \"')\\n\";\n\t}\n\tif(typeof this.source() != \"undefined\"){\n\t\tstr += \"view.source('\" + removeNamespaceFromVariable(this.source()) + \"')\\n\";\n\t}\n\tif(typeof this.fontfamily() != \"undefined\"){\n\t\tstr += \"view.fontfamily('\" + this.fontfamily() + \"')\\n\";\n\t}\n\tif(typeof this.show_force() != \"undefined\"){\n\t\tstr += \"view.show_force('\" + this.show_force() + \"')\\n\";\n\t}\n\tif(typeof this.fix_nodes() != \"undefined\"){\n\t\tstr += \"view.fix_nodes('\" + this.fix_nodes() + \"')\\n\";\n\t}\n\tif(typeof this.explode_out() != \"undefined\"){\n\t\tstr += \"view.explode_out('\" + this.explode_out() + \"')\\n\";\n\t}\n\tif(typeof this.selected_grows() != \"undefined\"){\n\t\tstr += \"view.selected_grows('\" + this.selected_grows() + \"')\\n\";\n\t}\n\tif(typeof this.width() != \"undefined\"){\n\t\tstr += \"view.width('\" + this.width() + \"')\\n\";\n\t}\n\tif(typeof this.height() != \"undefined\"){\n\t\tstr += \"view.height('\" + this.height() + \"')\\n\";\n\t}\n\tif(typeof this.edges() != \"undefined\"){\n\t\tvar nedges = this.edges();\n\t\tvar estrs = [];\n\t\tfor(var i = 0; i<nedges.length; i++){\n\t\t\testrs.push(\"['\" + nedges[i][0] + \", \" + nedges[i][1] + \"']\");\n\t\t}\n\t\tstr += \"view.edges('\" + estrs.join(\", \") + \"')\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint(\"graph\") + \"\\n\";\n\t}\n\treturn str;\n}\n\nWOQLGraphConfig.prototype.json = function(){\n\tlet jr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\tjr.push(this.rules[i].json());\n\t}\n\tlet mj = {\"graph\" : this.getConfigAsJSON(), \"rules\": jr};\n\treturn mj;\n}\n\n\nfunction WOQLRule(s){\n\tthis.rule = { scope: s };\n}\n\nWOQLRule.prototype.prettyPrint = function(type){\n\t//starts with obj. ...\n\tvar str = this.rule.scope + \"('\";\n\tif(this.rule.variables){\n\t\tstr += this.rule.variables.join(\"', '\");\n\t }\n\t str += \"')\";\n\tif(typeof this.literal() != \"undefined\"){\n\t\tstr += \".literal(\" + this.literal() + \")\";\n\t}\n\tif(typeof this.type() != \"undefined\"){\n\t\tstr += \".type(\" + JSON.stringify(removeNamespacesFromVariables(this.type())) + \")\";\n\t}\n\tif(typeof this.selected() != \"undefined\"){\n\t\tstr += \".selected(\" + this.selected() + \")\";\n\t}\n\tif(typeof this.label() != \"undefined\"){\n\t\tstr += \".label(\" + this.label() + \")\";\n\t}\n\tif(typeof this.size() != \"undefined\"){\n\t\tstr += \".size('\" + this.size() + \"')\";\n\t}\n\tif(typeof this.color() != \"undefined\"){\n\t\tstr += \".color([\" + this.color().join(\",\") + \"])\";\n\t}\n\tif(typeof this.charge() != \"undefined\"){\n\t\tstr += \".charge('\" + this.charge() + \"')\";\n\t}\n\tif(typeof this.distance() != \"undefined\"){\n\t\tstr += \".distance('\" + this.distance() + \"')\";\n\t}\n\tif(typeof this.weight() != \"undefined\"){\n\t\tstr += \".distance('\" + this.weight() + \"')\";\n\t}\n\tif(typeof this.symmetric() != \"undefined\"){\n\t\tstr += \".symmetric(\" + this.symmetric() + \")\";\n\t}\n\tif(typeof this.collisionRadius() != \"undefined\"){\n\t\tstr += \".collisionRadius(\" + this.collisionRadius() + \")\";\n\t}\n\tif(typeof this.icon() != \"undefined\"){\n\t\tstr += \".icon(\" + JSON.stringify(this.icon()) + \")\";\n\t}\n\tif(typeof this.text() != \"undefined\"){\n\t\tstr += \".text(\" + JSON.stringify(this.text()) + \")\";\n\t}\n\tif(typeof this.arrow() != \"undefined\"){\n\t\tstr += \".arrow(\" + JSON.stringify(this.arrow()) + \")\";\n\t}\n\tif(typeof this.border() != \"undefined\"){\n\t\tstr += \".border(\" + JSON.stringify(this.border()) + \")\";\n\t}\n\tif(typeof this.args() != \"undefined\"){\n\t\tstr += \".args(\" + JSON.stringify(this.args()) + \")\";\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \".renderer('\" + this.renderer() + \"')\";\n\t}\n\tif(typeof this.render() != \"undefined\"){\n\t\tstr += \".render(\" + this.render() + \")\";\n\t}\n\tif(typeof this.header() != \"undefined\"){\n\t\tstr += \".header('\" + this.header() + \"')\";\n\t}\n\tif(typeof this.click() != \"undefined\"){\n\t\tstr += \".click(\" + this.click() + \")\";\n\t}\n\tif(typeof this.hover() != \"undefined\"){\n\t\tstr += \".hover(\" + this.hover() + \")\";\n\t}\n\tfor(var v in this.rule.constraints){\n\t\tstr += \".v('\" + v + \"')\";\n\t\tfor(var i = 0; i<this.rule.constraints[v].length; i++){\n\t\t\tif(typeof(this.rule.constraints[v][i]) == \"function\"){\n\t\t\t\tstr += \".filter(\" + this.rule.constraints[v][i] + \")\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstr += \".in(\" + JSON.stringify(this.rule.constraints[v][i]) + \")\";\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n\n/*\n * Graph\n */\n\nWOQLRule.prototype.json = function(mjson){\n\tif(!mjson) return this.rule;\n\tthis.rule = mjson;\n\treturn this;\n}\n\n\nWOQLRule.prototype.size = function(size){\n\tif(typeof size == \"undefined\"){\n\t\treturn this.rule.size;\n\t}\n\tthis.rule.size = size;\n\treturn this;\n}\n\nWOQLRule.prototype.color = function(color){\n\tif(typeof color == \"undefined\"){\n\t\treturn this.rule.color;\n\t}\n\tthis.rule.color = color;\n\treturn this;\n}\n\nWOQLRule.prototype.charge = function(v){\n\tif(typeof v == \"undefined\"){\n\t\treturn this.rule.charge;\n\t}\n\tthis.rule.charge = v;\n\treturn this;\n}\n\nWOQLRule.prototype.collisionRadius = function(v){\n\tif(typeof v == \"undefined\"){\n\t\treturn this.rule.collisionRadius;\n\t}\n\tthis.rule.collisionRadius = v;\n\treturn this;\n}\n\nWOQLRule.prototype.icon = function(json){\n\tif(json){\n\t\tthis.rule.icon = json;\n\t\treturn this;\n\t}\n\treturn this.rule.icon;\n}\n\nWOQLRule.prototype.text = function(json){\n\tif(json){\n\t\tthis.rule.text = json;\n\t\treturn this;\n\t}\n\treturn this.rule.text;\n}\n\nWOQLRule.prototype.border = function(json){\n\tif(json){\n\t\tthis.rule.border = json;\n\t\treturn this;\n\t}\n\treturn this.rule.border;\n}\n\nWOQLRule.prototype.arrow = function(json){\n\tif(json){\n\t\tthis.rule.arrow = json;\n\t\treturn this;\n\t}\n\treturn this.rule.arrow;\n}\n\nWOQLRule.prototype.distance = function(d){\n\tif(typeof d != \"undefined\"){\n\t\tthis.rule.distance = d;\n\t\treturn this;\n\t}\n\treturn this.rule.distance;\n}\n\nWOQLRule.prototype.symmetric = function(d){\n\tif(typeof d != \"undefined\"){\n\t\tthis.rule.symmetric = d;\n\t\treturn this;\n\t}\n\treturn this.rule.symmetric ;\n}\n\n\nWOQLRule.prototype.weight = function(w){\n\tif(typeof w != \"undefined\"){\n\t\tthis.rule.weight = w;\n\t\treturn this;\n\t}\n\treturn this.rule.weight;\n}\n\n/*\n * Table\n */\n\nWOQLRule.prototype.renderer = function(rend){\n\tif(typeof rend == \"undefined\"){\n\t\treturn this.rule.renderer;\n\t}\n\tthis.rule.renderer = rend;\n\treturn this;\n}\n\nWOQLRule.prototype.header = function(hdr){\n\tif(typeof hdr == \"undefined\"){\n\t\treturn this.rule.header;\n\t}\n\tthis.rule.header = hdr;\n\treturn this;\n}\n\n\nWOQLRule.prototype.render = function(func){\n\tif(typeof func == \"undefined\"){\n\t\treturn this.rule.render;\n\t}\n\tthis.rule.render = func;\n\treturn this;\n}\n\nWOQLRule.prototype.click = function(onClick){\n\tif(onClick){\n\t\tthis.rule.click = onClick;\n\t\treturn this;\n\t}\n\treturn this.rule.click;\n}\n\nWOQLRule.prototype.hover = function(onHover){\n\tif(onHover){\n\t\tthis.rule.hover = onHover;\n\t\treturn this;\n\t}\n\treturn this.rule.hover;\n}\n\n/*\n * All\n */\n\n\nWOQLRule.prototype.hidden = function(hidden){\n\tif(typeof hidden == \"undefined\"){\n\t\treturn this.rule.hidden;\n\t}\n\tthis.rule.hidden = hidden;\n\treturn this;\n}\n\nWOQLRule.prototype.args = function(args){\n\tif(typeof args == \"undefined\"){\n\t\treturn this.rule.args;\n\t}\n\tthis.rule.args = args;\n\treturn this;\n}\n\n/*\n * The below are conditions\n */\nWOQLRule.prototype.literal = function(tf){\n\tif(typeof tf == \"undefined\"){\n\t\treturn this.rule.literal;\n\t}\n\tthis.rule.literal = tf;\n\treturn this;\n}\n\nWOQLRule.prototype.type = function(...list){\n\tif(typeof list == \"undefined\" || list.length == 0){\n\t\treturn this.rule.type;\n\t}\n\tthis.rule.type = list;\n\treturn this;\n}\n\nWOQLRule.prototype.setVariables = function(vars){\n\tif(vars && vars.length){\n\t\tthis.rule.variables = addNamespacesToVariables(vars);\n\t\tthis.current_variable = this.rule.variables[this.rule.variables.length - 1];\n\t}\n\treturn this;\n}\n\nWOQLRule.prototype.v = function(v){\n\tif(v){\n\t\tif(v.substring(0, 2) != \"v:\") v = \"v:\" + v;\n\t\tthis.current_variable = v;\n\t\treturn this;\n\t}\n\treturn this.current_variable;\n}\n\nWOQLRule.prototype.in = function(...list){\n\tif(this.current_variable){\n\t\tif(!this.rule.constraints) this.rule.constraints = {};\n\t\tif(!this.rule.constraints[this.current_variable]) this.rule.constraints[this.current_variable] = [];\n\t\tthis.rule.constraints[this.current_variable].push(list);\n\t}\n\treturn this;\n}\n\nWOQLRule.prototype.filter = function(tester){\n\tif(this.current_variable){\n\t\tif(!this.rule.constraints) this.rule.constraints = {};\n\t\tif(!this.rule.constraints[this.current_variable]) this.rule.constraints[this.current_variable] = [];\n\t\tthis.rule.constraints[this.current_variable].push(tester);\n\t}\n\treturn this;\n}\n\nWOQLRule.prototype.label = function(l){\n\tif(l){\n\t\tthis.rule.label = l;\n\t\treturn this;\n\t}\n\treturn this.rule.label;\n}\n\nWOQLRule.prototype.title = function(l){\n\tif(l){\n\t\tthis.rule.title = l;\n\t\treturn this;\n\t}\n\treturn this.rule.title;\n}\n\n/*\n * This is for chooser\n */\n\nWOQLRule.prototype.selected = function(s){\n\tif(typeof s != \"undefined\"){\n\t\tthis.rule.selected = s;\n\t\treturn this;\n\t}\n\treturn this.rule.selected;\n}\n\n\n/*\n * Matches on\n * 1. scope (row, cell, column)\n * 2. variables - only match certain ones\n * 3. type - only match datatype\n * 4. constraints - on values of variables\n */\n\nWOQLRule.prototype.match = function(data, key, context, action){\n\tif(context && this.rule.scope != context) return false;\n\tif(key){\n\t\tif(this.rule.variables && this.rule.variables.length){\n\t\t\tif(typeof key == \"object\"){\n\t\t\t\tif(this.rule.variables.indexOf(key[0]) == -1) return false;\n\t\t\t\tif(this.rule.variables.indexOf(key[1]) == -1) return false;\n\t\t\t}\n\t\t\telse if(this.rule.variables.indexOf(key) == -1) return false;\n\t\t}\n\t\tif(this.rule && this.rule.type){\n\t\t\tif(typeof key == \"object\"){\n\t\t\t\tif(!(data[key][0][\"@type\"] && this.rule.type.indexOf(data[key][0][\"@type\"]) != -1)){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(!(data[key][\"@type\"] && this.rule.type.indexOf(data[key][\"@type\"]) != -1)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(this.rule && typeof this.rule.literal != \"undefined\"){\n\t\t\tif(typeof key == \"object\"){\n\t\t\t\tif(data[key[0]]['@value']) {\n\t\t\t\t\tif(!this.rule.literal) return false;\n\t\t\t\t}\n\t\t\t\telse if(this.rule.literal) return false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(data[key]['@value']) {\n\t\t\t\t\tif(!this.rule.literal) return false;\n\t\t\t\t}\n\t\t\t\telse if(this.rule.literal) return false;\n\t\t\t}\n\t\t}\n\t\tif(typeof key == \"object\"){\n\t\t\tif(this.rule.constraints && this.rule.constraints[key[0]]){\n\t\t\t\tif(!data) return false;\n\t\t\t\tfor(var i = 0; i<this.rule.constraints[key[0]].length; i++){\n\t\t\t\t\tif(!this.test(data[key[0]], this.rule.constraints[key][0])){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.rule.constraints && this.rule.constraints[key[1]]){\n\t\t\t\tif(!data) return false;\n\t\t\t\tfor(var i = 0; i<this.rule.constraints[key[1]].length; i++){\n\t\t\t\t\tif(!this.test(data[key[1]], this.rule.constraints[key][1])){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if(this.rule.constraints && this.rule.constraints[key]){\n\t\t\tif(!data) return false;\n\t\t\tfor(var i = 0; i<this.rule.constraints[key].length; i++){\n\t\t\t\tif(!this.test(data[key], this.rule.constraints[key])){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(context == \"edge\"){\n\t\t\tif(this.rule.source && this.rule.source != key[0]) return false;\n\t\t\tif(this.rule.target && this.rule.target != key[1]) return false;\n\t\t}\n\t}\n\telse {\n\t\tfor(var k in this.rule.constraints){\n\t\t\tif(!data) return false;\n\t\t\tfor(var i = 0; i<this.rule.constraints[k].length; i++){\n\t\t\t\tif(!this.test(data[k], this.rule.constraints[k])){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(action && typeof this.rule[action] == \"undefined\") return false;\n\treturn true;\n}\n\nWOQLRule.prototype.test = function(value, constraint){\n\tif(typeof constraint == \"object\" && constraint.length){\n\t\tvar vundertest = (value['@value'] ? value['@value'] : value);\n\t\treturn (constraint.indexOf(vundertest) != -1);\n\t}\n\tif(typeof constraint == \"function\"){\n\t\treturn constraint(value);\n\t}\n}\n\n\n/*\n * Utility function adds v: to variables...\n */\nfunction addNamespacesToVariables(vars){\n\tvar nvars = [];\n\tfor(var i = 0; i<vars.length; i++){\n\t\tvar nvar = (vars[i].substring(0, 2) == \"v:\") ? vars[i] : \"v:\" + vars[i];\n\t\tnvars.push(nvar);\n\t}\n\treturn nvars;\n}\n\nfunction removeNamespaceFromVariable(mvar){\n\tif(mvar.substring(0, 2) == \"v:\") return mvar.substring(2)\n\treturn mvar;\n}\n\n\nfunction removeNamespacesFromVariables(vars){\n\tvar nvars = [];\n\tfor(var i = 0; i<vars.length; i++){\n\t\tnvars.push(removeNamespaceFromVariable(vars[i]));\n\t}\n\treturn nvars;\n}\n\n\nfunction getMatchingRules(rules, row, key, context, action){\n\tvar matches = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tif(rules[i].match(row, key, context, action)){\n\t\t\tmatches.push(rules[i].rule);\n\t\t}\n\t}\n\treturn matches;\n}\n\n\n\nmodule.exports=TerminusClient.WOQL\n\n\n/*\n *\nvar x = WOQL.schema();\nx.addClass(\"my:Class\").label(\"A class\").comment(\"A comment\").abstract().relationship();\nx.addProperty(\"my:prop\", \"xsd:string\").domain(\"my:Class\").label(\"x\").comment(\"x\").max(2).min(1);\nx.execute(client).then ...\n */\n\nfunction WOQLChartRule(scope){\n\tWOQLRule.call(this,scope); \n};\n\nWOQLChartRule.prototype = Object.create(WOQLRule.prototype);\nWOQLChartRule.prototype.constructor = WOQLRule;\n\n\n//{top:0, bottom:0, left: 30, right: 30 }\n\nWOQLChartRule.prototype.padding=function(paddingObj){\n\tif(paddingObj){\n\t\tthis.rule.padding=paddingObj;\n\t\treturn this;\n\t}\n\treturn this.rule.padding=paddingObj;\n}\n\nWOQLChartRule.prototype.connectNulls =function(bool){\n\tif(bool){\n\t\tthis.rule.connectNulls=bool;\n\t\treturn this;\n\t}\n\treturn this.rule.connectNulls=bool;\n}\n\n/*\n\tXAxis 'bottom' | 'top' \n\tYAxis 'left' | 'right'\n*/\nWOQLChartRule.prototype.orientation=function(orientation){\n\tif(orientation){\n\t\tthis.rule.orientation = orientation;\n\t\treturn this;\n\t}\n\treturn this.rule.orientation;\n}\n\nWOQLChartRule.prototype.fill=function(color){\n\tif(color){\n\t\tthis.rule.fill = color;\n\t\treturn this;\n\t}\n\treturn this.rule.fill;\n}\n\nWOQLChartRule.prototype.stroke=function(color){\n\tif(color){\n\t\tthis.rule.stroke = color;\n\t\treturn this;\n\t}\n\treturn this.rule.stroke;\n}\n\n\nWOQLChartRule.prototype.strokeWidth=function(size){\n\tif(size){\n\t\tthis.rule.strokeWidth = size;\n\t\treturn this;\n\t}\n\treturn this.rule.strokeWidth;\n}\n\n//\"preserveStart\" | \"preserveEnd\" | \"preserveStartEnd\" | Number\n\nWOQLChartRule.prototype.interval=function(interval){\n\tif(interval){\n\t\tthis.rule.interval = interval;\n\t\treturn this;\n\t}\n\treturn this.rule.interval;\n}\n\n\nWOQLChartRule.prototype.dot=function(isVisible){\n\tif(isVisible){\n\t\tthis.rule.dot = isVisible;\n\t\treturn this;\n\t}\n\treturn this.rule.dot;\n}\n\nWOQLChartRule.prototype.labelRotate=function(angle){\n\tif(angle){\n\t\tthis.rule.labelRotate = angle;\n\t\treturn this\n\t}\n\treturn this.rule.labelRotate;\n}\n/*\n* axis type number| category\n*/\nWOQLChartRule.prototype.type=function(type){\n\tif(type){\n\t\tthis.rule.type=type\n\t\treturn this;\n\t}\n\treturn this.rule.type\n}\n/*\n* works only if type is number\n* domainArr =[min,max];\n*/\nWOQLChartRule.prototype.domain=function(domainArr){\n\tif(domainArr){\n\t\tthis.rule.domain=domainArr\n\t\treturn this;\n\t}\n\treturn this.rule.domain\n}\n\n\nWOQLChartRule.prototype.strokeDasharray=function(dashArr){\n\tif(dashArr){\n\t\tthis.rule.strokeDasharray=dashArr\n\t\treturn this\n\t}\n\n\treturn this.rule.strokeDasharray;\n}\n\nWOQLChartRule.prototype.iconSize=function(iconSize){\n\tif(iconSize){\n\t\tthis.rule.iconSize=iconSize\n\t\treturn this\n\t}\n\n\treturn this.rule.iconSize;\n}\n\n/*\n'line' | 'square' | 'rect' | 'circle' | 'cross' | 'diamond' | 'star' | 'triangle' | 'wye\n*/\nWOQLChartRule.prototype.iconType=function(iconType){\n\tif(iconType){\n\t\tthis.rule.iconType=iconType\n\t\treturn this\n\t}\n\n\treturn this.rule.iconType;\n}\n\nWOQLChartRule.prototype.showTicks=function(showTicks){\n\tif(showTicks){\n\t\tthis.rule.showTicks=showTicks\n\t\treturn this\n\t}\n\treturn this.rule.showTicks\n}\n\nWOQLChartRule.prototype.prettyPrint = function(type){\n\t//starts with obj. ...\n\tvar str = this.rule.scope + \"('\";\n\tif(this.rule.variables){\n\t\tstr += this.rule.variables.join(\"', '\");\n\t }\n\tstr += \"')\";\n\t\n \tif(typeof this.orientation() != \"undefined\"){\n\t\tstr += \".orientation('\" + this.orientation() + \"')\";\n\t}\n\tif(typeof this.padding() != \"undefined\"){\n\t\tstr += \".padding(\" + this.padding() + \")\";\n\t}\n\tif(typeof this.connectNulls() != \"undefined\"){\n\t\tstr += \".connectNulls(\" + this.connectNulls() + \")\";\n\t}\n\tif(typeof this.fill() != \"undefined\"){\n\t\tstr += \".fill('\" + this.fill() + \"')\";\n\t}\n\tif(typeof this.stroke() != \"undefined\"){\n\t\tstr += \".stroke('\" + this.stroke() + \"')\";\n\t}\n\tif(typeof this.strokeWidth() != \"undefined\"){\n\t\tstr += \".strokeWidth(\" + this.stroke() + \")\";\n\t}\n\tif(typeof this.interval() != \"undefined\"){\n\t\tstr += \".interval(\" + this.interval() + \")\";\n\t}\n\tif(typeof this.dot() != \"undefined\"){\n\t\tstr += \".dot(\" + this.dot() + \")\";\n\t}\n\tif(typeof this.labelRotate() != \"undefined\"){\n\t\tstr += \".labelRotate('\" + this.labelRotate() + \"')\";\n\t}\n\tif(typeof this.type() != \"undefined\"){\n\t\tstr += \".type('\" + this.type() + \"')\";\n\t}\n\tif(typeof this.domain() != \"undefined\"){\n\t\tstr += \".domain(\" + this.domain() + \")\";\n\t}\n\tif(typeof this.strokeDasharray() != \"undefined\"){\n\t\tstr += \".strokeDasharray(\" + this.strokeDasharray() + \")\";\n\t}\n\tif(typeof this.iconSize() != \"undefined\"){\n\t\tstr += \".iconSize(\" + this.iconSize() + \")\";\n\t}\n\tif(typeof this.iconType() != \"undefined\"){\n\t\tstr += \".iconType('\" + this.iconType() + \"')\";\n\t}\n\tif(typeof this.showTicks() != \"undefined\"){\n\t\tstr += \".showTicks('\" + this.showTicks() + \"')\";\n\t}\n\tif(typeof this.label() != \"undefined\"){\n\t\tstr += \".label('\" + this.label() + \"')\";\n\t}\n\treturn str;\n}\n\n\nfunction WOQLChartConfig(){\n\tthis.rules = [];\n\tthis.type = \"chart\";\n}\n\n\n/*\n{\"XAxis\":{dataKey:\"date_i\",type:'number'}\n\t\t\t\t\t\t\t,\"chartObj\":\n\t\t\t\t\t\t\t[{'label':'Confident','dataKey':'conf',\"chartType\":\"Area\",\n\t\t\t\t\t\t\t\"style\":{\"stroke\":\"#82ca9d\", \"fillOpacity\":1, \"fill\":\"#82ca9d\"}},\n\t\t\t\t\t\t\t {'label':'Predictions','dataKey':'predictions',\"chartType\":\"Line\",\n\t\t\t\t\t\t\t \"style\":{\"strokeWidth\":2, \"stroke\":\"#ff8000\"}},\n\t\t\t\t\t\t\t {'label':'Picks','dataKey':'picks',\"chartType\":\"Point\",\"style\": \n\t\t\t\t\t\t\t {\"stroke\": '#8884d8', \"fill\": '#8884d8'}},\n\t\t\t\t\t\t\t {'label':'Stock','dataKey':'stock',\"chartType\":\"Line\",\"style\":\n\t\t\t\t\t\t\t  {\"stroke\": '#0000ff', \"fill\": '#0000ff'}}]}\n\n{\"XAxis\":{dataKey:\"v:Date\",\"label\":{rotate:\"-50\"}},\"chartObj\":\n\t\t\t\t\t\t\t  \t[{'dot':true, 'label':'Quantity','dataKey':'v:Quantity',\"chartType\":\"Line\",  \n\t\t\t\t\t\t\t  \t  \"style\": {\"stroke\": '#FF9800', \"fill\": '#FF9800'}}]\n\t\t\t\t\t\t\t  }\n*/\n\n\nWOQLChartConfig.prototype.xAxis = function(...vars){\n\tlet woqlRule = new WOQLChartRule(\"xAxis\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.bar = function(...vars){\n\tlet woqlRule=new WOQLChartRule(\"bar\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.line=function(...vars){\n\tlet woqlRule=new WOQLChartRule(\"line\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.point=function(...vars){\n\tlet woqlRule=new WOQLChartRule(\"point\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.area=function(...vars){\n\tlet woqlRule=new WOQLChartRule(\"area\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.cartesianGrid=function(...vars){\n\tlet woqlRule=new WOQLChartRule(\"cartesianGrid\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\nWOQLChartConfig.prototype.legend=function(...vars){\n\tlet woqlRule=new WOQLChartRule(\"legend\");\n\twoqlRule.setVariables(vars);\n\tthis.rules.push(woqlRule);\n\treturn woqlRule;\n}\n\n\nWOQLChartConfig.prototype.title=function(title){\n\tif(title){\n\t\tthis._title=title;\n\t\treturn this\n\t}\n\treturn this._title;\n}\n\nWOQLChartConfig.prototype.description=function(description){\n\tif(description){\n\t\tthis._description=description;\n\t\treturn this\n\t}\n\treturn this._description;\n}\n\n//layout \"vertical\" | \"horizontal\"\nWOQLChartConfig.prototype.layout=function(layout){\n\tif(layout){\n\t\tthis._layout=layout;\n\t\treturn this\n\t}\n\treturn this._layout;\n}\n\n\n//default is { top: 10, right: 30, left: 0, bottom: 0 }\nWOQLChartConfig.prototype.margin=function(marginObj){\n\tif(marginObj){\n\t\tthis._margin=marginObj;\n\t\treturn this\n\t}\n\n\treturn this._margin;\n}\n\nWOQLChartConfig.prototype.json = function(){\n\tlet rulesArr = [];\n\tfor(var i = 0; i<this.rules.length; i++){\n\t\trulesArr.push(this.rules[i].json());\n\t}\n\t/*\n\t*general properties \n\t*/\n\tvar conf = {};\n\tif(typeof this.margin() != \"undefined\"){\n\t\tconf['margin'] = this.margin();\n\t}\n\tif(typeof this.title() != \"undefined\"){\n\t\tconf['title'] = this.title();\n\t}\n\tif(typeof this.description() != \"undefined\"){\n\t\tconf['description'] = this.description();\n\t}\n\tif(typeof this.layout() != \"undefined\"){\n\t\tconf['layout'] = this.layout();\n\t}\n\tlet mj = {\"chart\" :conf, \"rules\": rulesArr};\n\treturn mj;\n}\n\nWOQLChartConfig.prototype.loadJSON = function(config, rules){\n\tvar jr = [];\n\tfor(var i = 0; i<rules.length; i++){\n\t\tvar nr = new WOQLRule();\n\t\tnr.json(rules[i]);\n\t\tjr.push(nr);\n\t}\n\tthis.rules = jr;\n\tif(typeof config.margin != \"undefined\"){\n\t\tthis.margin(config.margin);\n\t}\n\tif(typeof config.title != \"undefined\"){\n\t\tthis.title(config.title);\n\t}\n\tif(typeof config.description != \"undefined\"){\n\t\tthis.description(config.description);\n\t}\n\tif(typeof config.layout != \"undefined\"){\n\t\tthis.layout(config.layout);\n\t}\n}\n\nWOQLChartConfig.prototype.prettyPrint = function(){\n\tvar str = \"view = WOQL.chart();\\n\";\n\tif(typeof this.margin() != \"undefined\"){\n\t\tstr += \"view.margin(\" + this.margin() + \")\\n\";\n\t}\n\tif(typeof this.title() != \"undefined\"){\n\t\tstr += \"view.title('\" + this.title() + \"')\\n\";\n\t}\n\tif(typeof this.description() != \"undefined\"){\n\t\tstr += \"view.description('\" + this.description() + \"')\\n\";\n\t}\n\tif(typeof this.layout() != \"undefined\"){\n\t\tstr += \"view.layout('\" + this.layout() + \"')\\n\";\n\t}\n\tfor(var i = 0; i<this.rules.length ; i++){\n\t\tstr += \"view.\" + this.rules[i].prettyPrint(\"chart\") + \"\\n\";\n\t}\n\treturn str;\n}\n\n//WOQLChartConfig.prototype.style()\n\n\n//const woqlChart=new WOQLChartConfig();//TerminusClient.woql.chart();\n\n//woqlChart.Bar('test');\n\n\n","const HTMLStringViewer = require('./datatypes/String');\nconst HTMLStringEditor = require('./datatypes/StringEditor');\nconst HTMLBooleanViewer = require('./datatypes/Boolean');\nconst HTMLBooleanEditor = require('./datatypes/BooleanEditor');\nconst HTMLChoiceViewer = require('./datatypes/Choice');\nconst HTMLChoiceEditor = require('./datatypes/ChoiceEditor');\nconst HTMLCoordinateViewer = require('./datatypes/Coordinate');\nconst HTMLCoordinateEditor = require('./datatypes/CoordinateEditor');\nconst HTMLDateViewer = require('./datatypes/Date');\nconst HTMLDateEditor = require('./datatypes/DateEditor');\nconst HTMLEntityViewer = require('./datatypes/Entity');\nconst HTMLEntityEditor = require('./datatypes/EntityEditor');\nconst HTMLImageViewer = require('./datatypes/Image');\nconst HTMLImageEditor = require('./datatypes/ImageEditor');\nconst HTMLLinkViewer = require('./datatypes/Link');\nconst HTMLNumberViewer = require('./datatypes/Number');\nconst HTMLRangeViewer = require('./datatypes/Range');\nconst HTMLRangeEditor = require('./datatypes/RangeEditor');\nconst GoogleMapEditor = require('./datatypes/GoogleMapEditor');\nconst GoogleMapViewer = require('./datatypes/GoogleMapViewer');\nconst HTMLMarkupEditor = require('./datatypes/HTMLMarkupEditor');\nconst S2EntityEditor = require('./datatypes/S2EntityEditor');\n\n\nfunction initialiseDataRenderers(RenderingMap, plugins){\n\tRenderingMap.registerViewerForTypes(\"HTMLBooleanViewer\", {label: \"Checkbox Viewer\"}, [\"xsd:boolean\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLBooleanEditor\", {label: \"Checkbox Editor\"}, [\"xsd:boolean\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLChoiceViewer\", {label: \"Choice Viewer\"}, [\"oneOf\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLChoiceEditor\", {label: \"Choice Selector\"}, [\"oneOf\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLCoordinateViewer\", {label: \"Coordinate Viewer\"}, [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLCoordinateEditor\", {label: \"Coordinate Editor\"}, [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLDateViewer\", {label: \"Date Viewer\"}, [\"xsd:time\", \"xsd:date\", \"xsd:dateTime\", \"xsd:gYear\", \n\t\t\"xsd:gYearRange\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:dateTimeStamp\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLDateEditor\", {label: \"Date Editor\"}, [\"xsd:time\", \"xsd:date\", \"xsd:dateRange\" ,\"xsd:dateTime\", \"xsd:gYear\", \n\t\t\"xsd:gYearRange\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:dateTimeStamp\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLEntityViewer\", {label: \"Document Viewer\"}, [\"document\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLEntityEditor\", {label: \"Document Selector\"}, [\"document\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLImageViewer\", {label: \"Image Viewer\"}, [\"xdd:url\", \"xsd:anyURI\", \"xsd:base64Binary\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLImageEditor\", {label: \"Image Editor\"}, [\"xsd:base64Binary\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLImageViewer\", {label: \"Image Viewer\"}, [\"xdd:url\", \"xsd:anyURI\", \"xsd:base64Binary\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLImageEditor\", {label: \"Image Editor\"}, [\"xsd:base64Binary\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLLinkViewer\", {label: \"Link Viewer\"}, [\"xdd:url\", \"xsd:anyURI\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLNumberViewer\", {label: \"Number with commas\"}, \n\t\t\t[\"xsd:decimal\", \"xsd:double\", \"xsd:float\", \"xsd:short\", \"xsd:integer\", \"xsd:long\", \n\t\t\t\t\"xsd:nonNegativeInteger\", \"xsd:positiveInteger\", \"xsd:negativeInteger\", \"xsd:nonPositiveInteger\"]);\n\tRenderingMap.registerViewerForTypes(\"HTMLRangeViewer\", {label: \"Range Viewer\"}, [\"xdd:gYearRange\", \"xdd:dateRange\", \"xdd:integerRange\", \"xdd:decimalRange\"]);\n\tRenderingMap.registerEditorForTypes(\"HTMLRangeEditor\", {label: \"Range Editor\"}, [\"xdd:gYearRange\", \"xdd:dateRange\", \"xdd:integerRange\", \"xdd:decimalRange\"]);\n\tRenderingMap.universalEditor = \"HTMLStringEditor\";\n\tRenderingMap.universalViewer = \"HTMLStringViewer\";\n\taddPlugins(RenderingMap, plugins);\n\tRenderingMap.createRenderer = function(type, args){\n\t\tlet r = createDataRenderer(type, args);\n\t\treturn r;\n\t}\n}\n\nfunction createDataRenderer(type, options){\n\ttry {\n\t\tvar viewer = eval(\"new \" + type + \".\" + type + \"(\" + JSON.stringify(options) + \")\");\n\t}\n\tcatch(e){\n\t\treturn false;\n\t}\n\treturn viewer;\n}\n\nfunction addPlugins(RenderingMap, plugins){\n\tif(plugins && plugins.indexOf(\"gmaps\") != -1){\n\t\tRenderingMap.registerEditorForTypes(\"GoogleMapEditor\", {label: \"Google Map Editor\"}, [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\t\tRenderingMap.registerViewerForTypes(\"GoogleMapViewer\", {label: \"Google Map Editor\"}, [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\t}\n\tif(plugins && plugins.indexOf(\"quill\") != -1){\n\t\tRenderingMap.registerEditorForTypes(\"HTMLMarkupEditor\", {label: \"Quill WYSIWIG HTML Editor\"}, [\"xdd:html\"]);\n\t}\n\tif(plugins && plugins.indexOf(\"select2\") != -1){\n\t\tRenderingMap.registerEditorForFrameType(\"S2EntityEditor\", {label: \"S2 Autocomplete Selector\"}, \"document\");\n\t}\n}\n\nmodule.exports = {createDataRenderer, initialiseDataRenderers};","const HTMLFrameHelper = require('../HTMLFrameHelper');\n\nfunction HTMLStringViewer(options){\n\tthis.size = ((options && options.size) ? options.size : false);\n\tthis.css = ((options && options.css) ? \"terminus-literal-value \" + options.css : \"terminus-literal-value\");\n\tthis.max_word_size = (options && options.max_word_size ? options.max_word_size : false);\n\tthis.max_cell_size = (options && options.max_cell_size ? options.max_cell_size : false);\n\tthis.show_types = (options && options.show_types ? options.show_types : false);\n}\n\nHTMLStringViewer.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\treturn this.render(value);\n}\n\nHTMLStringViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\nHTMLStringViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', this.css);\n\tinput.setAttribute('data-value', value);\n\tif(this.show_types && this.type != \"id\"){\n\t\tvalue += \" (\" + this.type + \")\";\n\t}\n\tif(this.max_word_size || this.max_cell_size){\n\t\tHTMLFrameHelper.wrapShortenedText(input, value, this.max_cell_size, this.max_word_size);\n\t}\n\telse {\n\t\tvalue = document.createTextNode(value);\n\t\tinput.appendChild(value);\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLStringViewer}\n\n\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  // Only Node.JS has a process variable that is of [[Class]] process\n  if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  } else if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  utils.forEach(['url', 'method', 'params', 'data'], function valueFromConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    }\n  });\n\n  utils.forEach(['headers', 'auth', 'proxy'], function mergeDeepProperties(prop) {\n    if (utils.isObject(config2[prop])) {\n      config[prop] = utils.deepMerge(config1[prop], config2[prop]);\n    } else if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (utils.isObject(config1[prop])) {\n      config[prop] = utils.deepMerge(config1[prop]);\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  utils.forEach([\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'maxContentLength',\n    'validateStatus', 'maxRedirects', 'httpAgent', 'httpsAgent', 'cancelToken',\n    'socketPath'\n  ], function defaultToConfig2(prop) {\n    if (typeof config2[prop] !== 'undefined') {\n      config[prop] = config2[prop];\n    } else if (typeof config1[prop] !== 'undefined') {\n      config[prop] = config1[prop];\n    }\n  });\n\n  return config;\n};\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","const UTILS = require('./utils.js');\nconst CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n/*\n * Creates an entry in the connection registry for the server\n * and all the databases that the client has access to\n * maps the input authorties to a per-db array for internal storage and easy\n * access control checks\n * {doc:dbid => {terminus:authority =>\n * [terminus:woql_select, terminus:create_document, auth3, ...]}}\n *\n */\n\nfunction ConnectionCapabilities(connectionConfig, key) {\n\tthis.connection = {};\n\tthis.connectionConfig = connectionConfig;\n\tif (this.connectionConfig.server && key) {\n\t\tthis.setClientKey(this.connectionConfig.server, key);\n\t}\n}\n\nConnectionCapabilities.prototype.getClientKey = function (serverURL) {\n\tif (!serverURL) serverURL = this.connectionConfig.serverURL();\n\tif (serverURL && this.connection[serverURL]) return this.connection[serverURL].key;\n\treturn false;\n};\n\n\n/*\n * Utility functions for changing the state of connections with Terminus servers\n */\nConnectionCapabilities.prototype.setClientKey = function (curl, key) {\n\tif (typeof key === 'string' && key.trim()) {\n\t\tif (typeof this.connection[curl] === 'undefined') {\n\t\t\tthis.connection[curl] = {};\n\t\t}\n\t\tthis.connection[curl].key = key.trim();\n\t}\n};\n\n\n/**\n * @params {string} curl a valid terminusDB server URL\n * @params {object} capabilities it is the connect call response\n */\nConnectionCapabilities.prototype.addConnection = function (curl, capabilities) {\n\tif (typeof this.connection[curl] === 'undefined') {\n\t\tthis.connection[curl] = {};\n\t}\n\tconst capabilitiesKeys = capabilities ? Object.keys(capabilities) : [];\n\n\tfor (const pred of capabilitiesKeys) {\n\t    if (pred === 'terminus:authority' && capabilities[pred]) {\n\t      const auths = Array.isArray(capabilities[pred]) === true\n\t        ? capabilities[pred]\n\t        : [capabilities[pred]];\n\n\t      for (let i = 0; i < auths.length; i += 1) {\n\t        let scope = auths[i]['terminus:authority_scope'];\n\t        const actions = auths[i]['terminus:action'];\n\n\t        if (Array.isArray(scope) === false) scope = [scope];\n\t        const actionsArr = UTILS.authorityActionsToArr(actions);\n\n\t        for (let j = 0; j < scope.length; j += 1) {\n\t          const nrec = scope[j];\n\t          if (typeof this.connection[curl][nrec['@id']] === 'undefined') {\n\t            this.connection[curl][nrec['@id']] = nrec;\n\t          }\n\t          this.connection[curl][nrec['@id']]['terminus:authority'] = actionsArr;\n\t        }\n\t      }\n\t    } else {\n\t      this.connection[curl][pred] = capabilities[pred];\n\t    }\n\t}\n};\n\nConnectionCapabilities.prototype.serverConnected = function () {\n\treturn typeof this.connection[this.connectionConfig.server] !== 'undefined';\n};\n\nConnectionCapabilities.prototype.capabilitiesPermit = function (action, dbid, server) {\n\tif (!this.connectionConfig.connectionMode()\n         || this.connectionConfig.client_checks_capabilities !== true\n         || action === CONST.CONNECT) { return true; }\n\n\tserver = server || this.connectionConfig.server;\n\tdbid = dbid || this.connectionConfig.dbid;\n\n\tlet rec;\n\n\tif (action === CONST.CREATE_DATABASE) {\n\t\trec = this.getServerRecord(server);\n\t} else if (dbid) rec = this.getDBRecord(dbid);\n\telse console.log('no dbid', server, dbid);\n\tif (rec) {\n\t\tconst auths = rec['terminus:authority'];\n\t\tif (auths && auths.indexOf(`terminus:${action}`) !== -1) return true;\n\t} else {\n\t\tconsole.log('problem with ', this.connection, action, server, dbid);\n\t}\n\tthis.error = ErrorMessage.accessDenied(action, dbid, server);\n\treturn false;\n};\n\nConnectionCapabilities.prototype.getServerRecord = function (srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tconst connectionObj = this.connection[url] || {};\n\tconst okeys = Object.keys(connectionObj);\n\n\tfor (const oid of okeys) {\n\t\tif (this.connection[url][oid]['@type'] === 'terminus:Server') {\n\t\t\treturn this.connection[url][oid];\n\t\t}\n\t}\n\treturn false;\n};\n\nConnectionCapabilities.prototype.getDBRecord = function (dbid, srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tdbid = (dbid || this.connectionConfig.dbid);\n\tif (typeof this.connection[url] !== 'object') {\n\t\treturn false;\n\t}\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\tdbid = this.dbCapabilityID(dbid);\n\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\treturn undefined;\n};\n\nConnectionCapabilities.prototype.getServerDBRecords = function (srvr) {\n\tconst url = (srvr || this.connectionConfig.server);\n\tconst dbrecs = {};\n\tconst connectionObj = this.connection[url] || {};\n\n\tfor (const oid of Object.keys(connectionObj)) {\n\t\tif (this.connection[url][oid]['@type'] === 'terminus:Database') {\n\t\t\tdbrecs[oid] = this.connection[url][oid];\n\t\t}\n\t}\n\treturn dbrecs;\n};\n\n/*\n * removes a database record from the connection registry (after deletion, for example)\n */\nConnectionCapabilities.prototype.removeDB = function (dbid, srvr) {\n\tdbid = dbid || this.connectionConfig.dbid;\n\n\tif (dbid && this.connectionConfig.dbid && this.connectionConfig.dbid === dbid) {\n\t\tthis.connectionConfig.dbid = false;\n\t}\n\n\tconst url = srvr || this.connectionConfig.server;\n\tconst dbidCap = this.dbCapabilityID(dbid);\n\tif (dbidCap && this.connection[url] && this.connection[url][dbidCap]) {\n\t\tdelete this.connection[url][dbidCap];\n\t}\n};\n\n\nConnectionCapabilities.prototype.dbCapabilityID = function (dbid) {\n\treturn `doc:${dbid}`;\n};\n\nConnectionCapabilities.prototype.getDBRecord = function (dbid, srvr) {\n\tconst url = srvr || this.connectionConfig.server;\n\tdbid = dbid || this.connectionConfig.dbid;\n\tif (typeof this.connection[url] !== 'object') {\n\t\treturn false;\n\t}\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\tdbid = this.dbCapabilityID(dbid);\n\n\tif (typeof this.connection[url][dbid] !== 'undefined') { return this.connection[url][dbid]; }\n\n\treturn undefined;\n};\n\nmodule.exports = ConnectionCapabilities;\n","\nconst IDParser = require('./terminusIDParser');\n\nfunction ConnectionConfig(params) {\n\tconst newParams = params || {};\n\tthis.server = false;\n\tthis.dbid = false;\n\tthis.docid = false;\n\tif (newParams.server) this.setServer(newParams.server);\n\tif (newParams.db) this.setDB(newParams.db);\n\tif (newParams.doc) this.setDocument(newParams.doc);\n\t/*\n     * client configuration options - connected_mode = connected\n     * tells the client to first connect to the server before invoking other services\n     */\n\n\tthis.connected_mode = newParams.connected_mode || 'connected';\n\t// include a terminus:user_key API key in the calls\n\tthis.include_key = newParams.include_key || true;\n\t// client side checking of access control (in addition to server-side access control)\n\tthis.client_checks_capabilities = newParams.client_checks_capabilities || true;\n}\n\nConnectionConfig.prototype.serverURL = function () {\n\treturn this.server;\n};\n\n\nConnectionConfig.prototype.connectionMode = function () {\n\treturn this.connected_mode === 'connected';\n};\n\nConnectionConfig.prototype.includeKey = function () {\n\treturn this.include_key === true;\n};\n\nConnectionConfig.prototype.schemaURL = function () {\n\treturn `${this.dbURL()}/schema`;\n};\nConnectionConfig.prototype.queryURL = function () {\n\treturn `${this.dbURL()}/woql`;\n};\nConnectionConfig.prototype.frameURL = function () {\n\treturn `${this.dbURL()}/frame`;\n};\nConnectionConfig.prototype.docURL = function () {\n\treturn `${this.dbURL()}/document/${this.docid ? this.docid : ''}`;\n};\n\nConnectionConfig.prototype.dbURL = function (call) {\n\t// url swizzling to talk to platform using server/dbid/platform/ pattern..\n\tif (this.platformEndpoint()) {\n\t\tconst baseURL = this.server.substring(0, this.server.lastIndexOf('/platform/'));\n\n\t\tif (!call || call !== 'create') {\n\t\t\treturn `${baseURL}/${this.dbid}/platform`;\n\t\t} if (call === 'platform') {\n\t\t\treturn `${baseURL}/${this.dbid}`;\n\t\t}\n\t}\n\treturn this.server + this.dbid;\n};\n\nConnectionConfig.prototype.platformEndpoint = function () {\n\tif (this.server && this.server.lastIndexOf('/platform/') === this.server.length - 10) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n/**\n * Utility functions for setting and parsing urls and determining\n * the current server, database and document\n */\nConnectionConfig.prototype.setServer = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseServerURL(inputStr)) {\n\t\tthis.server = parser.server();\n\t\tthis.dbid = false;\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setDB = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseDBID(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n// @param {string} inputStr TerminusDB server URL or a valid TerminusDB Id or omitted\n\nConnectionConfig.prototype.setSchemaURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseSchemaURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setDocument = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseDocumentURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tif (parser.dbid()) this.dbid = parser.dbid();\n\t\tif (parser.docid()) this.docid = parser.docid();\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setQueryURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseQueryURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nConnectionConfig.prototype.setClassFrameURL = function (inputStr, context) {\n\tconst parser = new IDParser(context);\n\tif (parser.parseClassFrameURL(inputStr)) {\n\t\tif (parser.server()) this.server = parser.server();\n\t\tthis.dbid = parser.dbid();\n\t\tthis.docid = false;\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nmodule.exports = ConnectionConfig;\n","/*\n11.75s$ npm install\n6.39s$ npm test\n*/\n/*\n * Helper class for parsing and decomposing Terminus URLs /\n * and dealing with namespace prefixed URLs\n */\n// const URL = require('url').URL;\n\n/*\n\"@context\": {\n    \"owl\":\"http://www.w3.org/2002/07/owl#\",\n    \"rdf\":\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"xsd\":\"http://www.w3.org/2001/XMLSchema#\"\n  } */\n\n\nfunction IDParser(context) {\n\tthis.context = context;\n\tthis.server_url = false;\n\tthis.db = false;\n\tthis.doc = false;\n}\n\nIDParser.prototype.server = function () {\n\treturn this.server_url;\n};\n\nIDParser.prototype.dbid = function () {\n\treturn this.db;\n};\n\nIDParser.prototype.docid = function () {\n\treturn this.doc;\n};\n\nIDParser.prototype.setContext = function (context) {\n\tthis.context = context;\n};\n\nIDParser.prototype.parseServerURL = function (str) {\n\tthis.server_url = false;\n\n\tif (this.validURL(str)) {\n\t\tthis.server_url = str;\n\t} else if (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tthis.server_url = this.expandPrefixed(str, this.context);\n\t}\n\n\tif (this.server_url && this.server_url.lastIndexOf('/') !== this.server_url.length - 1\n\t) {\n\t\tthis.server_url += '/';\n\t}\n\treturn this.server_url;\n};\n\nIDParser.prototype.parseDBID = function (str) {\n\tthis.db = false;\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tif (str.lastIndexOf('/') === str.length - 1) {\n\t\t\t// trim trailing slash\n\t\t\tstr = str.substring(0, str.length - 1);\n\t\t}\n\t\tconst index = str.lastIndexOf('/');\n\n\t\tconst serverURL = str.substring(0, index);\n\t\t// only dbNamer\n\t\tstr = str.substring(index + 1);\n\n\t\tif (this.parseServerURL(serverURL) === false) return false;\n\t}\n\n\tif (this.validIDString(str)) {\n\t\tthis.db = str;\n\t}\n\treturn this.db;\n};\n\nIDParser.prototype.parseDocumentURL = function (str) {\n\tthis.doc = false;\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\n\tif (this.validURL(str)) {\n\t\tlet dbURL = str;\n\t\tif (str.lastIndexOf('/document/') !== -1) {\n\t\t\t// get dbURL\n\t\t\tdbURL = str.substring(0, str.lastIndexOf('/document/'));\n\t\t\tstr = str.substring(str.lastIndexOf('/document/') + 10);\n\t\t}\n\t\tif (this.parseDBID(dbURL) === false) return false;\n\t}\n\tif (str.substring(0, 4) === 'doc:') str = str.substring(4);\n\t// check if the document's name hasn't space or '/'\n\tif (this.validIDString(str)) {\n\t\tthis.doc = str;\n\t}\n\treturn this.doc;\n};\n\nIDParser.prototype.parseSchemaURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'schema');\n\t}\n\treturn this.parseDBID(str);\n};\n\nIDParser.prototype.parseQueryURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'woql');\n\t\tstr = this.stripOptionalPath(str, 'query');\n\t}\n\treturn this.parseDBID(str);\n};\n\nIDParser.prototype.stripOptionalPath = function (str, bit) {\n\tif (str.indexOf(`/${bit}`) !== -1) str = str.substring(0, str.indexOf(`/${bit}`));\n\treturn str;\n};\n\nIDParser.prototype.parseClassFrameURL = function (str) {\n\tif (this.context && this.validPrefixedURL(str, this.context)) {\n\t\tstr = this.expandPrefixed(str, this.context);\n\t}\n\tif (this.validURL(str)) {\n\t\tstr = this.stripOptionalPath(str, 'frame');\n\t}\n\treturn this.parseDBID(str);\n};\n\n// Valid URLs are those that start with http:// or https://\nIDParser.prototype.validURL = function (str) {\n\tif (str.substring(0, 7) === 'http://' || str.substring(0, 8) === 'https://') return true;\n\treturn false;\n};\n\nIDParser.prototype.validPrefixedURL = function (str, context) {\n\tif (typeof str !== 'string' || typeof context !== 'object') return false;\n\tconst parts = str.split(':');\n\tif (parts.length !== 2) return false;\n\tif (parts[0].length < 1 || parts[1].length < 1) return false;\n\tif (context && context[parts[0]] && this.validIDString(parts[1])) return true;\n\treturn false;\n};\n\nIDParser.prototype.validIDString = function (str) {\n\tif (typeof str !== 'string') return false;\n\tif (str.indexOf(':') !== -1 || str.indexOf(' ') !== -1 || str.indexOf('/') !== -1) return false;\n\treturn true;\n};\n\nIDParser.prototype.expandPrefixed = function (str, context) {\n\tconst parts = str.split(':');\n\treturn context[parts[0]] + parts[1];\n};\n\nmodule.exports = IDParser;\n","const FrameHelper = require('./frameHelper');\n/**\n * A frame pattern can have the following variables\n * renderer : object, property, data, * - matches a specific part of the frame\n * label : matches the label of a property\n * frame_type: object, data, document, id, oneOf\n * subject: id of the subject\n * subjectClass: class of the subject\n * range: type of a property (applies to property and data)\n * property: property id or list of property ids (parent property if it is an object or data)\n * value: value of the property\n * parent: a pattern relating to the parent of this frame\n * children: patterns for matching on the children of a frame\n * depth: how deep are we in the document? starts from 0\n * index: the index of a value in an array\n * status: updated, error, new, ok,\n */\n\nfunction FramePattern(pattern){\n\tif(pattern){\n\t\tthis.setPattern(pattern);\n\t}\n};\n\nFramePattern.prototype.setPattern = function(pattern){\n\tthis.scope = (pattern.scope ? pattern.scope: false);\n\tthis.label = (pattern.label ? pattern.label : false);\n\tthis.frame_type = (pattern.frame_type ? pattern.frame_type : false);\n\tthis.subject = (pattern.subject ? pattern.subject : false);\n\tthis.subjectClass = (pattern.subjectClass ? pattern.subjectClass : false);\n\tthis.range = (pattern.range ? pattern.range : false);\n\tthis.property = (pattern.property ? pattern.property : false);\n\tthis.value = (pattern.value ? pattern.value : false);\n\tthis.parent = (pattern.parent ? new FramePattern(pattern.parent) : false);\n\tthis.children = [];\n\tif (pattern.children) {\n\t\tfor (let i = 0; i < pattern.children.length; i++) {\n\t\t\tthis.children.push(new FramePattern(pattern.children[i]));\n\t\t}\n\t}\n\tthis.depth = (typeof pattern.depth !== 'undefined' ? pattern.depth : false);\n\tthis.index = (pattern.index ? pattern.index : false);\n\tthis.status = (pattern.status ? pattern.status : false);\n}\n\nFramePattern.prototype.checkFrame = function(frame){\n\tvar rtype = this.getRendererType(frame);\n\tif(!rtype) return false;\n\tif(this.scope && (this.scope != rtype) && (this.scope != \"*\" )) return false;\n\tif(this.illegalRuleType(rtype)) return false;\n\tif(this.frame_type && !this.checkFrameType(rtype, frame)) return false;\n\tif(this.label && !this.checkLabel(rtype, frame)) return false;\n\tif(this.subject && !this.checkSubject(rtype, frame)) return false;\n\tif(this.subjectClass && !this.checkSubjectClass(rtype, frame)) return false;\n\tif(this.property && !this.checkProperty(rtype, frame)) return false;\n\tif(this.depth !== false && !this.checkDepth(rtype, frame)) return false;\n\tif(this.range && !this.checkRange(rtype, frame)) return false;\n\tif(this.value && !this.checkValue(rtype, frame)) return false;\n\tif(this.parent && !this.checkParent(rtype, frame)) return false;\n\tif(this.children && this.children.length && !this.checkChildren(rtype, frame)) return false;\n\tif(this.index && !this.checkIndex(rtype, frame)) return false;\n\tif(this.status && !this.checkStatus(rtype, frame)) return false;\n\treturn true;\n};\n\nFramePattern.prototype.illegalRuleType = function (rtype) {\n\t// data frames have no children\n\tif (rtype == 'data' && this.children.length) return true;\n\t// object frames have no range\n\tif (rtype == 'object' && this.range) return true;\n\treturn false;\n};\n\n/* subject is an id or an array of ids,\n/* match is positive if the renderer's subject appears in the array or is the id\n */\nFramePattern.prototype.checkSubject = function (subject, frame) {\n\tif (typeof this.subject !== 'object' || !this.subject.length) this.subject = [this.subject];\n\tconst rsubj = frame.subject();\n\tfor (let i = 0; i < this.subject.length; i++) {\n\t\tif (this.IDsMatch(subject[i], rsubj)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n// at least one child must match all child rules\nFramePattern.prototype.checkChildren = function (rtype, frame) {\n\tfor (let i = 0; i < this.children.length; i++) {\n\t\tlet found = false;\n\t\tif (rtype == 'object') {\n\t\t\tfor (const prop in frame.properties) {\n\t\t\t\tif (this.children[i].checkFrame(frame.properties[prop])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (rtype == 'property') {\n\t\t\tfor (let j = 0; j <= renderer.values.length; j++) {\n\t\t\t\tif (this.children[j].checkFrame(frame.values[j])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!found) return false;\n\t}\n\treturn true;\n};\n\nFramePattern.prototype.checkStatus = function (rtype, frame) {\n\tif (typeof this.status !== 'object' || this.status.length == 0) this.status = [this.status];\n\tfor (let i = 0; i < this.status.length; i++) {\n\t\tif (this.status[i] == 'updated' && !frame.isUpdated()) return false;\n\t\tif (this.status[i] == 'new' && !frame.isNew()) return false;\n\t\tif (this.status[i] == 'unchanged' && frame.isUpdated()) return false;\n\t}\n\treturn true;\n};\n\nFramePattern.prototype.checkDepth = function (rtype, frame) {\n\treturn this.numberMatch(this.depth, frame.depth());\n};\n\nFramePattern.prototype.checkParent = function (rtype, frame) {\n\treturn this.parent.checkFrame(frame.parent);\n};\n\nFramePattern.prototype.checkIndex = function (rtype, frame) {\n\tif (rtype == 'data') {\n\t\treturn this.index == frame.index;\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkProperty = function (rtype, frame) {\n\tif (typeof this.property !== 'object' || !this.property.length) this.property = [this.property];\n\tfor (let i = 0; i < this.property.length; i++) {\n\t\tif (this.propertyIDsMatch(frame.property(), this.property[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n// returns true if any of the values are found\nFramePattern.prototype.checkValue = function (rtype, frame) {\n\tif (typeof this.value !== 'object' || !this.value.length) this.value = [this.value];\n\tfor (let i = 0; i < this.value.length; i++) {\n\t\tif (rtype == 'data') {\n\t\t\tif (this.valuesMatch(frame.value(), this.value[i])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if (rtype == 'property') {\n\t\t\tfor (let j = 0; j <= frame.values.length; j++) {\n\t\t\t\tif (this.getRendererType(frame.values[i]) == 'data'\n\t\t\t\t\t\t&& this.valuesMatch(frame.values[i].get(), this.value[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (rtype == 'object') {\n\t\t\tfor (const prop in frame.properties) {\n\t\t\t\tif (this.checkValue(this.getRendererType(frame.properties[prop]), frame.properties[prop])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkRange = function (rtype, frame) {\n\tif (typeof this.range !== 'object' || !this.range.length) this.range = [this.range];\n\tfor (let i = 0; i < this.range.length; i++) {\n\t\tif (this.rangeIDsMatch(frame.range(), this.range[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkSubjectClass = function (rtype, frame) {\n\tif (typeof this.subjectClass !== 'object' || !this.subjectClass.length) this.subjectClass = [this.subjectClass];\n\tconst rcls = frame.subjectClass();\n\tfor (let i = 0; i < this.subjectClass.length; i++) {\n\t\tif (this.classIDsMatch(this.subjectClass[i], rcls)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nFramePattern.prototype.checkFrameType = function (rtype, frame) {\n\tif (rtype == 'object') return this.frame_type == 'object';\n\tif (rtype == 'data') {\n\t\tif (frame.frame) {\n\t\t\treturn this.frame_type == frame.frame.ftype();\n\t\t}\n\t}\n\tif (rtype == 'property') return false;\n};\n\nFramePattern.prototype.checkLabel = function (rtype, frame) {\n\tif (typeof frame.getLabel !== 'function') {\n\t\tconsole.log(new Error('Rule passed to check label with broken renderer object - no getLabel'));\n\t\treturn false;\n\t}\n\treturn this.stringMatch(this.label, frame.getLabel());\n};\n\nFramePattern.prototype.IDsMatch = function (ida, idb) {\n\treturn FrameHelper.compareIDs(ida, idb);\n};\n\nFramePattern.prototype.classIDsMatch = function (ida, idb) {\n\treturn this.IDsMatch(ida, idb);\n};\nFramePattern.prototype.propertyIDsMatch = function (ida, idb) {\n\tconst match = this.IDsMatch(ida, idb);\n\treturn match;\n};\nFramePattern.prototype.rangeIDsMatch = function (ida, idb) {\n\treturn this.IDsMatch(ida, idb);\n};\nFramePattern.prototype.valuesMatch = function (vala, valb) {\n\treturn vala == valb;\n};\nFramePattern.prototype.numberMatch = function (vala, valb) {\n\tif (typeof vala === 'string') {\n\t\ttry {\n\t\t\treturn eval(valb + vala);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn vala === valb;\n};\n\nFramePattern.prototype.stringMatch = function (vala, valb) {\n\tconst pat = new RegExp(vala);\n\treturn pat.test(valb);\n};\n\nFramePattern.prototype.getRendererType = function (frame) {\n\tif (frame.isProperty()) return 'property';\n\tif (frame.isObject()) return 'object';\n\tif (frame.isData()) return 'data';\n\tif (frame.renderer_type) return frame.renderer_type;\n\tconsole.log(new Error(`frame configuration passed non-renderer type ${frame.constructor.name}`));\n\tconsole.log(renderer);\n\treturn false;\n};\n\n\n\n\n\n/**\n * FramePatternMatcher does pattern matching on frames\n * Does a given pattern match a given frame?\n */\nconst FramePatternMatcher = {}\n\n/**\n * Runs an array of matching rules across a frame and calls the passed onmatch function on each match\n * The optional onmatch function is called with each hit and is passed the frame and the rule that hit it.\n * A list of the matched rules is returned.\n *\n */\nFramePatternMatcher.testRules = function(rules, frame, onmatch){\n\tvar matched_rules = [];\n\tif(rules && rules.length){\n\t\tfor(var i = 0; i<rules.length; i++){\n\t\t\tvar match = (!rules[i].rule.pattern || FramePatternMatcher.patternMatchesFrame(rules[i].rule.pattern, frame));\n\t\t\tif(match){\n\t\t\t\tmatched_rules.push(rules[i]);\n\t\t\t\tif(onmatch && typeof onmatch == \"function\"){\n\t\t\t\t\tonmatch(frame, rules[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn matched_rules;\n}\n\n/**\n * Determines whether a given pattern matches a given frame\n */\nFramePatternMatcher.patternMatchesFrame = function(pattern, frame){\n\tif(typeof pattern == \"object\" && pattern.length){ //multiple patterns are ANDed\n\t\tfor(var i = 0 ; i<pattern.length; i++){\n\t\t\tvar fp = new FramePattern(pattern[i]);\n\t\t\tif(!fp.checkFrame(frame)) return false;\n\t\t}\n\t\treturn true;\n\t}\n\telse {\n\t\tvar fp = new FramePattern(pattern);\n\t\treturn fp.checkFrame(frame);\n\t}\n}\n\n\n\nfunction FrameRule(){\n\tthis.rule = { pattern: {} };\n\treturn this;\n};\n\n\nFrameRule.prototype.unpack = function(arr, nonstring){\n\tif(nonstring) var str = arr.join(\",\");\n\tvar str = \"'\" + arr.join(\"','\") + \"'\";\n\treturn str;\n}\n\nFrameRule.prototype.unpackFeatures = function(feats){\n\tlet extensions = {};\n\tvar fstr = \"\";\n\tfor(var i = 0; i<feats.length; i++){\n\t\tif(typeof feats[i] == \"string\"){\n\t\t\tfstr += '\"' + feats[i] + '\"';\n\t\t}\n\t\telse if(typeof feats[i] == \"object\"){\n\t\t\tvar fid = Object.keys(feats[i])[0];\n\t\t\tfstr += '\"' +  fid + '\"';\n\t\t\tfor(var prop in feats[i][fid]){\n\t\t\t\textensions[prop] = feats[i][fid][prop];\n\t\t\t}\n\t\t}\n\t\tif(i < feats.length - 1){\n\t\t\tfstr += \", \"\n\t\t}\n\t}\n\tfor(var k = 0; k < Object.keys(extensions).length; k++){\n\t\tvar ext = Object.keys(extensions)[k];\n\t\tvar val = extensions[ext];\n\t\tfstr += \").\" + ext + \"(\";\n\t\tif(typeof val == \"function\"){\n\t\t\tfstr += val;\n\t\t}\n\t\telse if(typeof val == \"string\"){\n\t\t\tfstr += '\"' + val + '\"';\n\t\t}\n\t\telse if(typeof val == \"object\"){\n\t\t\tfstr += JSON.stringify(val);\n\t\t}\n\t}\n\treturn fstr;\n}\n\nFrameRule.prototype.prettyPrint = function(type){\n\t//starts with obj. ...\n\tif(this.scope() == \"*\"){\n\t\tvar str = \"all()\";\n\t}\n\telse {\n\t\tvar str = this.scope() + \"()\";\n\t}\n\tif(typeof this.frameType() != \"undefined\"){\n\t\tstr += \".frame_type(\" + this.unpack(this.frameType()) + \")\";\n\t}\n\tif(typeof this.label() != \"undefined\"){\n\t\tstr += \".label(\" + this.unpack(this.label()) + \")\";\n\t}\n\tif(typeof this.subject() != \"undefined\"){\n\t\tstr += \".subject(\" + this.unpack(this.subject()) + \")\";\n\t}\n\tif(typeof this.subjectClass() != \"undefined\"){\n\t\tstr += \".subjectClass(\" + this.unpack(this.subjectClass()) + \")\";\n\t}\n\tif(typeof this.property() != \"undefined\"){\n\t\tstr += \".property(\" + this.unpack(this.property()) + \")\";\n\t}\n\tif(typeof this.range() != \"undefined\"){\n\t\tstr += \".range(\" + this.unpack(this.range()) + \")\";\n\t}\n\tif(typeof this.value() != \"undefined\"){\n\t\tstr += \".value(\" + this.unpack(this.value()) + \")\";\n\t}\n\tif(typeof this.children() != \"undefined\" && this.children.length > 0){\n\t\tstr += \".children(\\n\";\n\t\tvar kids = this.children();\n\t\tfor(var i = 0; i< kids.length; i++){\n\t\t\tstr += kids.prettyPrint() + \"\\n\";\n\t\t}\n\t\tstr += \")\";\n\t}\n\tif(typeof this.parent() != \"undefined\"){\n\t\tstr += \".parent(\" + this.parent.prettyPrint() + \")\";\n\t}\n\tif(typeof this.depth() != \"undefined\"){\n\t\tvar d = this.depth();\n\t\tif(typeof d == \"string\"){\n\t\t\tstr += \".depth('\" + this.depth() + \"')\";\n\t\t}\n\t\telse {\n\t\t\tstr += \".depth(\" + this.depth() + \")\";\n\t\t}\n\t}\n\tif(typeof this.index() != \"undefined\"){\n\t\tstr += \".index(\" + this.unpack(this.index(), true) + \")\";\n\t}\n\tif(typeof this.status() != \"undefined\"){\n\t\tstr += \".status(\" + this.unpack(this.status()) + \")\";\n\t}\n\tif(typeof this.renderer() != \"undefined\"){\n\t\tstr += \".renderer('\" + this.renderer() + \"')\";\n\t}\n\tif(typeof this.render() != \"undefined\"){\n\t\tstr += \".render(\" + this.render + \")\";\n\t}\n\tif(typeof this.compare() != \"undefined\"){\n\t\tstr += \".compare(\" + this.compare() + \")\";\n\t}\n\tif(typeof this.mode() != \"undefined\"){\n\t\tstr += \".mode('\" + this.mode() + \"')\";\n\t}\n\tif(typeof this.collapse() != \"undefined\"){\n\t\tstr += \".collapse(\" + this.collapse() + \")\";\n\t}\n\tif(typeof this.hidden() != \"undefined\"){\n\t\tstr += \".hidden(\" + this.hidden() + \")\";\n\t}\n\tif(typeof this.view() != \"undefined\"){\n\t\tstr += \".view('\" + this.view() + \"')\";\n\t}\n\tif(typeof this.showDisabledButtons() != \"undefined\"){\n\t\tstr += \".showDisabledButtons(\" + this.showDisabledButtons() + \")\";\n\t}\n\tif(typeof this.header() != \"undefined\"){\n\t\tstr += \".header(\" + this.header() + \")\";\n\t}\n\tif(typeof this.style() != \"undefined\"){\n\t\tstr += \".style(\\\"\" + this.style() + \"\\\")\";\n\t}\n\tif(typeof this.headerStyle() != \"undefined\"){\n\t\tstr += \".headerStyle(\\\"\" + this.headerStyle() + \"\\\")\";\n\t}\n\tif(typeof this.args() != \"undefined\"){\n\t\tstr += \".args(\" + JSON.stringify(this.args()) + \")\";\n\t}\n\tif(typeof this.showEmpty() != \"undefined\"){\n\t\tstr += \".showEmpty(\" + this.show_empty() + \")\";\n\t}\n\tif(typeof this.dataviewer() != \"undefined\"){\n\t\tstr += \".dataviewer(\\\"\" + this.dataviewer() + \"\\\")\";\n\t}\n\tif(typeof this.features() != \"undefined\"){\n\t\tstr += \".features(\" + this.unpackFeatures(this.features()) + \")\";\n\t}\n\tif(typeof this.headerFeatures() != \"undefined\"){\n\t\tstr += \".headerFeatures(\" + this.unpackFeatures(this.headerFeatures()) + \")\";\n\t}\n\treturn str;\n}\n\nFrameRule.prototype.scope = function(scope){\n\tif(typeof scope == \"undefined\") return this.rule.pattern.scope;\n\tthis.rule.pattern.scope = scope;\n\treturn this;\n};\n\nFrameRule.prototype.frameType = function(...frametype){\n\tif(typeof frametype == \"undefined\" || frametype.length == 0) return this.rule.pattern.frametype;\n\tthis.rule.pattern.frametype = frametype;\n\treturn this;\n};\n\nFrameRule.prototype.label = function(...label){\n\tif(typeof label == \"undefined\" || label.length == 0) return this.rule.pattern.label;\n\tthis.rule.pattern.label = label;\n\treturn this;\n};\n\nFrameRule.prototype.subject = function(...subject){\n\tif(typeof subject == \"undefined\" || subject.length == 0) return this.rule.pattern.subject;\n\tthis.rule.pattern.subject = subject;\n\treturn this;\n};\n\nFrameRule.prototype.subjectClass = function(...subjectClass){\n\tif(typeof subjectClass == \"undefined\" || subjectClass.length == 0) return this.rule.pattern.subjectClass;\n\tthis.rule.pattern.subjectClass = subjectClass;\n\treturn this;\n};\n\nFrameRule.prototype.property = function(...property){\n\tif(typeof property == \"undefined\" || property.length == 0) return this.rule.pattern.property;\n\tthis.rule.pattern.property = property;\n\treturn this;\n};\n\nFrameRule.prototype.depth = function(depth){\n\tif(typeof depth == \"undefined\") return this.rule.pattern.depth;\n\tthis.rule.pattern.depth = depth;\n\treturn this;\n};\n\nFrameRule.prototype.range = function(...range){\n\tif(typeof range == \"undefined\" || range.length == 0) return this.rule.pattern.range;\n\tthis.rule.pattern.range = range;\n\treturn this;\n};\n\nFrameRule.prototype.value = function(...value){\n\tif(typeof value == \"undefined\" || value.length == 0) return this.rule.pattern.value;\n\tthis.rule.pattern.value = value;\n\treturn this;\n};\n\nFrameRule.prototype.pattern = function () {\n\treturn this.rule.pattern;\n};\n\nFrameRule.prototype.json = function(json){\n\tif(!json) return this.rule;\n\tthis.rule = json;\n\treturn this;\n}\n\nFrameRule.prototype.parent = function(parent){\n\tif(typeof parent == \"undefined\") return this.rule.pattern.parent;\n\tthis.rule.pattern.parent = parent.pattern();\n\treturn this;\n};\n\nFrameRule.prototype.children = function(...children){\n\tif(typeof children == \"undefined\") return this.rule.pattern.children;\n\tif(typeof this.rule.pattern.children == \"undefined\"){\n\t\tthis.rule.pattern.children = [];\n\t}\n\tfor (let i = 0; i < children.length; i++) {\n\t\tthis.rule.pattern.children.push(children[i].pattern());\n\t}\n\treturn this;\n};\n\nFrameRule.prototype.index = function(...index){\n\tif(typeof index == \"undefined\" || index.length == 0) return this.rule.pattern.index;\n\tthis.rule.pattern.index = index;\n\treturn this;\n};\n\nFrameRule.prototype.status = function(...status){\n\tif(typeof status == \"undefined\" || status.length == 0) return this.rule.pattern.status;\n\tthis.rule.pattern.status = status;\n\treturn this;\n};\n\n/**\n * The below correspond to rule actions - what happens when a pattern matches\n */\n\n/**\n * These onces can apply to features - if the rule includes an earlier features or header_features call, subsequent render, style, hidden and args apply to it\n */\nFrameRule.prototype.render = function(func){\n\tif(!func) return this.rule.render;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"render\", func);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"render\", func);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.render = func;\n\t}\n\treturn this;\n}\n\nFrameRule.prototype.style = function(style){\n\tif(typeof style == \"undefined\") return this.rule.style;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"style\", style);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"style\", style);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.style = style;\n\t}\n\treturn this;\n};\n\n/**\n * The frame or feature will be hidden or unhidden (boolean)\n */\nFrameRule.prototype.hidden = function(m){\n\tif(typeof m == \"undefined\") return this.rule.hidden;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"hidden\", m);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"hidden\", m);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.hidden = m;\n\t}\n\treturn this;\n}\n\n/**\n * Specifies arguments to a renderer \n */\nFrameRule.prototype.args = function(json){\n\tif(!json) return this.rule.args;\n\tvar hf = this.headerFeatures(); \n\tvar f = this.features(); \n\tif(hf && hf.length){\n\t\tvar feats = this.applyFeatureProperty(hf, \"args\", json);\n\t\tthis.headerFeatures(...feats);\n\t}\n\telse if(f && f.length){\n\t\tvar feats = this.applyFeatureProperty(f, \"args\", json);\n\t\tthis.features(...feats);\n\t}\n\telse {\n\t\tthis.rule.args = json;\n\t}\n\treturn this;\n}\n\n/**\n * Adds a property to a feature array\n */\nFrameRule.prototype.applyFeatureProperty = function(feats, prop, val){\n\tvar nfeats = [];\n\tfor(var i = 0; i<feats.length; i++){\n\t\tif(typeof feats[i] == \"string\"){\n\t\t\tvar nfeat = {};\n\t\t\tnfeat[feats[i]] = {};\n\t\t\tnfeat[feats[i]][prop] = val;\n\t\t\tnfeats.push(nfeat);\n\t\t}\n\t\telse if(typeof feats[i] == \"object\"){\n\t\t\tlet fkey = Object.keys(feats[i])[0];\n\t\t\tif(fkey){\n\t\t\t\tvar nfeat = feats[i];\n\t\t\t\tnfeat[fkey][prop] = val;\n\t\t\t\tnfeats.push(nfeat);\n\t\t\t}\n\t\t}\n\t}\n\treturn nfeats;\n}\n\t\n\n\n/**\n * These apply to regular frames\n */\nFrameRule.prototype.renderer = function(rend){\n\tif(!rend) return this.rule.renderer;\n\tthis.rule.renderer = rend;\n\treturn this;\n}\n\nFrameRule.prototype.headerStyle = function(hstyle){\n\tif(!hstyle) return this.rule.header_style;\n\tthis.rule.header_style = hstyle;\n\treturn this;\n}\n\n/**\n * Function which specifies the ordering of values in a frame\n */\nFrameRule.prototype.compare = function(func){\n\tif(!func) return this.rule.compare;\n\tthis.rule.compare = func;\n\treturn this;\n}\n\n/**\n * Edit / view mode\n */\nFrameRule.prototype.mode = function(m){\n\tif(!m) return this.rule.mode;\n\tthis.rule.mode = m;\n\treturn this;\n}\n\n/**\n * Specifies whether a frame should be presented in collapsed form or not\n */\nFrameRule.prototype.collapse = function(m){\n\tif(!m) return this.rule.collapse;\n\tthis.rule.collapse = m;\n\treturn this;\n}\n\n/**\n * Specifies whether a frame should include a view selector\n */\n\nFrameRule.prototype.view = function(m){\n\tif(!m) return this.rule.view;\n\tthis.rule.view = m;\n\treturn this;\n}\n\n/**\n * Should actions which are disabled in the given context be displayed?\n */\nFrameRule.prototype.showDisabledButtons = function(m){\n\tif(!m) return this.rule.show_disabled_buttons;\n\tthis.rule.show_disabled_buttons = m;\n\treturn this;\n}\n\nFrameRule.prototype.features = function(...m){\n\tif(typeof m == \"undefined\" || m.length == 0) return this.rule.features;\n\tthis.rule.features = m;\n\treturn this;\n}\n\nFrameRule.prototype.headerFeatures = function(...m){\n\tif(typeof m == \"undefined\" || m.length == 0) return this.rule.header_features;\n\tthis.rule.header_features = m;\n\treturn this;\n}\n\nFrameRule.prototype.header = function(m){\n\tif(!m) return this.rule.header;\n\tthis.rule.header = m;\n\treturn this;\n}\n\nFrameRule.prototype.showEmpty = function(m){\n\tif(!m) return this.rule.show_empty;\n\tthis.rule.show_empty = m;\n\treturn this;\n}\n\nFrameRule.prototype.dataviewer = function(m){\n\tif(!m) return this.rule.dataviewer;\n\tthis.rule.dataviewer = m;\n\treturn this;\n}\n\nmodule.exports = {FramePatternMatcher, FramePattern, FrameRule } ;\n","const TerminusClient = require('@terminusdb/terminus-client');\n\n/*\n * Very simple implementation of a WOQL backed chooser\n * Makes a drop down from a WOQL query - configuration tells it which columns to use...\n */\n\nfunction WOQLChooser(client, options){\n\tthis.client = client;\n\tthis.selected = false;\n\treturn this.options(options);\n}\n\nWOQLChooser.prototype.options = function(config){\n\tthis.config = config || TerminusClient.WOQL.chooser();\t\n\treturn this;\n}\n\nWOQLChooser.prototype.set = function(id){\n\tif(this.selected != id){\n\t\tthis.selected = id;\n\t\tlet ch = this.config.change;\n\t\tif(ch) ch(id);\n\t}\n}\n\nWOQLChooser.prototype.render = function(){\n\tif(this.renderer) return this.renderer.render(this);\n}\n\nWOQLChooser.prototype.setRenderer = function(rend){\n\tthis.renderer = rend;\n\treturn this;\n}\n\n/*\n * Sets up the required variables from the result / config\n */\nWOQLChooser.prototype.setResult = function(result){\n\tthis.result = result;\n\tthis.choices = [];\n\tthis.cursor = 0;\n\tconst variables = result.getVariableList();\n\tif(!this.config.values() && variables.length){\n\t\tthis.config.values(variables[0]);\n\t}\n\t//sort it \n\tif(this.config.sort()){\n\t\tthis.result.sort(this.config.sort(), this.config.direction());\n\t}\n\twhile(row = this.result.next()){\n\t\tif(row && this.includeRow(row)){\n\t\t\tthis.choices.push(this.rowToChoice(row, this.result.cursor));\n\t\t}\n\t}\n\treturn this;\n}\n\nWOQLChooser.prototype.includeRow = function(row){\n\tconst matched_rules = this.config.getMatchingRules(row, false, \"row\", \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].hidden) return false;\n\t}\n\treturn true;\n}\n\nWOQLChooser.prototype.rowToChoice = function(binding, rownum){\n\tvar choice = { \n\t\tid: this.getRowID(binding) \n\t};\n\tchoice.label = this.getLabelFromBinding(binding, rownum);\n\tchoice.title = this.getTitleFromBinding(binding, rownum);\n\tchoice.selected = this.getSelectedFromBinding(binding, rownum);\n\treturn choice;\n}\n\nWOQLChooser.prototype.getRowID = function(binding){\n\tvar rval = binding[this.config.values()];\n\tif(rval['@value']) return rval['@value'];\n\treturn rval;\n}\n\nWOQLChooser.prototype.getLabelFromBinding = function(binding, rownum){\n\tlet sp = this.getSpecialRenderer(binding, \"label\");\n\tif(sp) return this.renderSpecial(sp, binding, rownum);\n\tif(this.config.labels()){\n\t\tif(binding[this.config.labels()]){\n\t\t\tvar lab = binding[this.config.labels()];\n\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\n\t\t\tif(lab != \"unknown\") return lab;\n\t\t}\n\t}\n\treturn TerminusClient.FrameHelper.labelFromURL(this.getRowID(binding));\n}\n\nWOQLChooser.prototype.getTitleFromBinding = function(binding, rownum){\n\tlet sp = this.getSpecialRenderer(binding, \"title\");\n\tif(sp) return this.renderSpecial(sp, binding, rownum);\n\tif(this.config.titles()){\n\t\tif(binding[this.config.titles()]){\n\t\t\tvar lab = binding[this.config.titles()];\n\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\n\t\t\tif(lab != \"unknown\") return lab;\n\t\t}\n\t}\n\treturn false;\n}\n\nWOQLChooser.prototype.getSelectedFromBinding = function(binding){\n\tconst matched_rules = this.config.getMatchingRules(row, false, \"row\", \"selected\");\n\tif(matched_rules && matched_rules.length){\n\t\treturn matched_rules[matched_rules.length - 1].selected;\n\t}\n\treturn false;\n}\n\nWOQLChooser.prototype.getSpecialRenderer = function(row, type){\n\tconst matched_rules = this.config.getMatchingRules(row, false, \"row\", type);\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i][type]) return matched_rules[i][type];\n\t}\n\treturn false;\n}\n\nWOQLChooser.prototype.renderSpecial = function(rule, row, rownum){\n\tif(rule && typeof rule == \"function\"){\n\t\treturn render(row);\n\t}\n\tif(rule && typeof rule == \"string\"){\n\t\treturn rule;\n\t}\n}\n\nWOQLChooser.prototype.count = function(){\n\treturn this.result.count();\n}\n\nWOQLChooser.prototype.first = function(){\n\tthis.cursor = 0;\n\treturn this.choices[this.cursor];\n}\n\nWOQLChooser.prototype.prev = function(){\n\tif(this.cursor > 0) {\n\t\treturn this.choices[--this.cursor];\n\t}\n}\n\nWOQLChooser.prototype.next = function(){\n\treturn this.choices[this.cursor++];\n}\n\n\nmodule.exports = WOQLChooser;","const TerminusClient = require('@terminusdb/terminus-client');\nconst DatatypeRenderers = require(\"./DatatypeRenderers\");\n\nfunction WOQLTable(client, config){\n\tthis.client = client;\n\tif(config) this.options(config);\n\treturn this;\n}\n\nWOQLTable.prototype.setResult = function(res){\n\tthis.result = res;\n\treturn this;\n}\n\nWOQLTable.prototype.setRenderer = function(rend){\n\tthis.renderer = rend;\n\treturn this;\n}\n\nWOQLTable.prototype.render = function(onChangeQuery){\n\tif(this.renderer) return this.renderer.render(this, onChangeQuery);\n}\n\nWOQLTable.prototype.count = function(){\n\treturn this.result.count();\n}\n\nWOQLTable.prototype.first = function(){\n\treturn this.result.first();\n}\n\nWOQLTable.prototype.prev = function(){\n\treturn this.result.prev();\n}\n\nWOQLTable.prototype.next = function(){\n\treturn this.result.next();\n}\n\n\nWOQLTable.prototype.options = function(config){\n\tthis.config = config || TerminusClient.WOQL.table();\t\n\treturn this;\n}\n\nWOQLTable.prototype.setDatatypes = function(func){\n\tthis.datatypes = new DatatypeRenderers();\n\tif(this.config.datatypes) this.datatypes.options(this.config.datatypes);\n\tif(func) func(this.datatypes);\n\treturn this;\n}\n\nWOQLTable.prototype.canAdvancePage = function(){\n\treturn (this.result.count() == this.result.query.getLimit()); \n}\n\nWOQLTable.prototype.canChangePage = function(){\n\treturn this.canAdvancePage() || this.canRetreatPage();\n}\n\nWOQLTable.prototype.canRetreatPage = function(){\n\treturn (this.result.query.getPage() > 1);\n}\n\nWOQLTable.prototype.getPageSize = function(){\n\treturn this.result.query.getLimit() ;\t\n}\n\nWOQLTable.prototype.setPage = function(l){\n\treturn this.result.query.setPage(l);\t\n}\n\n\nWOQLTable.prototype.getPage = function(){\n\treturn this.result.query.getPage();\t\n}\n\nWOQLTable.prototype.setPageSize = function(l){\n\treturn this.update(this.result.query.setPageSize(l));\n}\n\nWOQLTable.prototype.nextPage = function(){\n\treturn this.update(this.result.query.nextPage());\n}\n\nWOQLTable.prototype.firstPage = function(){\n\treturn this.update(this.result.query.firstPage());\n}\n\nWOQLTable.prototype.previousPage = function(){\n\treturn this.update(this.result.query.previousPage());\n}\n\nWOQLTable.prototype.getColumnsToRender = function(){\n\tif(this.hasColumnOrder()){\n\t\tvar cols = this.getColumnOrder();\n\t}\n\telse if(this.result.query.hasSelect()){\n\t\tvar cols = this.result.query.getSelectVariables();\n\t}\n\telse {\n\t\tvar cols = this.result.getVariableList();\n\t}\n\tvar self = this;\n\treturn (cols ? cols.filter(col => !self.hidden(col)) : []);\n}\n\nWOQLTable.prototype.getColumnHeaderContents = function(colid){\n\tlet hr = this.config.getMatchingRules(false, colid, \"column\", \"header\");\n\tif(hr && hr.length){\n\t\tlet h = hr[hr.length-1].header;\n\t\tif(typeof h == \"string\"){\n\t\t\treturn document.createTextNode(h);\t\t\t\n\t\t}\n\t\telse if(typeof h == \"function\"){\n\t\t\treturn h(colid);\n\t\t}\n\t\telse return h;\n\t}\n\tif(colid.indexOf(\"v:\") === 0) colid = colid.substring(2);\n\tvar clab = (colid.indexOf(\"http\") != -1) ? TerminusClient.FrameHelper.labelFromURL(colid) : colid;\n\tclab = clab.replace(\"_\", \" \");\n\treturn document.createTextNode(clab);\n}\n\n\nWOQLTable.prototype.hidden = function(col){\n\tconst matched_rules = this.config.getMatchingRules(false, col, \"column\", \"hidden\");\n\tif(matched_rules.length){\n\t\treturn matched_rules[matched_rules.length-1].hidden;\n\t}\n\treturn false;\n}\n\n/**\n * Called when you want to change the query associated with the table. \n */\nWOQLTable.prototype.update = function(nquery){\n\treturn nquery.execute(this.client).then((results) => {\n\t\tvar nresult = new TerminusClient.WOQLResult(results, nquery);\n\t\tthis.setResult(nresult);\n\t\tif(this.notify) this.notify(nresult);\n\t\treturn nresult;\n\t});\t\n}\n\nWOQLTable.prototype.hasDefinedEvent = function(row, key, context, action){\n\tconst matched_rules = this.config.getMatchingRules(row, key, context, action);\n\tif(matched_rules && matched_rules.length) return true;\n\treturn false;\n}\n\nWOQLTable.prototype.getDefinedEvent = function(row, key, context, action){\n\tconst matched_rules = this.config.getMatchingRules(row, key, context, action);\n\tif(matched_rules && matched_rules.length) {\n\t\tvar l = (matched_rules.length - 1);\n\t\treturn matched_rules[l][action];\n\t}\n}\n\n\nWOQLTable.prototype.getRowClick = function(row){\n\tlet re = this.getDefinedEvent(row, false, \"row\", \"click\");\n\treturn re;\n}\n\nWOQLTable.prototype.getCellClick = function(row, col){\n\tlet cc = this.getDefinedEvent(row, col, \"column\", \"click\");\n\treturn cc;\n}\n\nWOQLTable.prototype.getRowHover = function(row){\n\treturn this.getDefinedEvent(row, false, \"row\", \"hover\");\n}\n\nWOQLTable.prototype.getCellHover = function(row, key){\n\treturn this.getDefinedEvent(row, key, \"column\", \"hover\");\n}\n\nWOQLTable.prototype.getColumnOrder = function(){\n\treturn this.config.column_order();\n}\n\nWOQLTable.prototype.hasColumnOrder = WOQLTable.prototype.getColumnOrder;\nWOQLTable.prototype.hasCellClick = WOQLTable.prototype.getCellClick;\nWOQLTable.prototype.hasRowClick = WOQLTable.prototype.getRowClick;\nWOQLTable.prototype.hasCellHover = WOQLTable.prototype.getCellHover;\nWOQLTable.prototype.hasRowHover = WOQLTable.prototype.getRowHover;\n\nWOQLTable.prototype.getRenderer = function(key, row){\n\tvar rend = this.getSpecificRender(key, row);\n\tif(rend) return rend;\n\tlet renderer = this.getDefinedEvent(row, key, \"column\", \"renderer\");\n\tlet args =  this.getDefinedEvent(row, key, \"column\", \"args\");\n\tif(!renderer){\n\t\tlet r = this.getRendererForDatatype(row[key]);\n\t\trenderer = r.name;\n\t\tif(!args) args = r.args;\n\t}\n\tif(renderer){\n\t\treturn this.datatypes.createRenderer(renderer, args);\t\t\n\t}\n}\n\nWOQLTable.prototype.renderValue = function(renderer, val, key, row){\n\tif(val && val['@type']){\n\t\trenderer.type = val['@type'];\n\t\tvar dv = new DataValue(val['@value'], val['@type'], key, row);\n\t}\t\n\telse if(val && val['@language']){\n\t\trenderer.type = \"xsd:string\";\n\t\tvar dv = new DataValue(val['@value'], renderer.type, key, row);\n\t}\n\telse if(val && typeof val == \"string\"){\n\t\trenderer.type = \"id\";\n\t\tvar dv = new DataValue(val, \"id\", key, row);\n\t}\n\tif(dv) return renderer.renderValue(dv);\n\treturn \"\";\n}\n\nfunction DataValue(val, type){\n\tthis.datavalue = (val == \"unknown\" ? \"\" : val);\n\tthis.datatype = type;\n}\n\nDataValue.prototype.value = function(nvalue){\n\tif(nvalue) {\n\t\tthis.datavalue = nvalue; \n\t\treturn this;\n\t}\n\treturn this.datavalue;\n}\n\n\nWOQLTable.prototype.getRendererForDatatype = function(val){\n\tif(val && val['@type']){\n\t\treturn this.datatypes.getRenderer(val['@type'], val['@value']);\n\t}\n\telse if(val && val['@language']){\n\t\treturn this.datatypes.getRenderer(\"xsd:string\", val['@value']);\n\t}\n\telse if(val && typeof val == \"string\"){\n\t\treturn this.datatypes.getRenderer(\"id\", val);\t\t\n\t}\n\treturn false;\n}\n\nWOQLTable.prototype.getSpecificRender = function(key, row){\n\tlet rend = this.getDefinedEvent(row, key, \"column\", \"render\");\n\treturn rend;\n}\n\nmodule.exports = WOQLTable;","/*\n * Maintains a list of renderers that are available for rendering \n * datatype values - also covers choice values and id values\n */\n\nfunction DatatypeRenderers(options){\n\tthis.registeredDataViewers = {},\n\tthis.registeredDataEditors = {},\n\tthis.defaultViewers = {};\n\tthis.defaultEditors = {};\n\tthis.universalViewer = false;\n\tthis.universalEditor = false;\n\tif(options) this.options(options);\n\t//links to other documents, choices, id field, id fields of contained objects, ids of structural elements: properties, etc\n\tthis.specials = ['document', 'oneOf', 'id', 'contained', 'structural'];\n}\n\nDatatypeRenderers.prototype.options = function (options){\n\tthis.universalViewer = (options && options.universalViewer ? options.universalViewer : false);\n\tthis.universalEditor = (options && options.universalEditor ? options.universalEditor : false);\n\tthis.editor = (options && options.editor ? options.editor : false);\n}\n\nDatatypeRenderers.prototype.getValidDataViewerList = function(datatype){\n\tlet valids = [];\n\tif(datatype && typeof this.registeredDataViewers[datatype] != \"undefined\"){\n\t\tvalids = valids.concat(this.registeredDataViewers[datatype]);\n\t}\n\tif(this.universalViewer && valids.indexOf(this.universalViewer) == -1){\n\t\tvalids.push(this.universalViewer);\n\t}\n\treturn valids;\n};\n\nDatatypeRenderers.prototype.getValidDataEditorList = function(datatype){\n\tlet valids = [];\n\tif(datatype && typeof this.registeredDataEditors[datatype] != \"undefined\"){\n\t\tvar nftypes = this.registeredDataEditors[datatype];\n\t\tif(nftypes){\n\t\t\tfor(var i = 0; i<nftypes.length; i++){\n\t\t\t\tif(valids.indexOf(nftypes[i]) == -1) valids.push(nftypes[i]);\n\t\t\t}\n\t\t}\n\t}\n\tif(typeof this.registeredDataEditors[datatype] != \"undefined\"){\n\t\tvalids = valids.concat(this.registeredDataEditors[datatype]);\n\t}\n\tif(this.universalEditor && valids.indexOf(this.universalEditor) == -1){\n\t\tvalids.push(this.universalEditor);\n\t}\n\treturn valids;\n}\n\nDatatypeRenderers.prototype.getEditorForDataFrame = function(datatype){\n\tvar vals = this.getValidDataEditorList(datatype);\n\tif(this.defaultEditors[datatype] && vals[this.defaultEditors[datatype]]){\n\t\treturn vals[this.defaultEditors[datatype]];\n\t}\n\t//last added is default if no explicit default is set\n\tif(vals){\n\t\treturn vals[Object.keys(vals)[0]];\n\t}\n\telse {\n\t\tif(this.universalEditor) return this.universalEditor;\n\t}\n}\n\nDatatypeRenderers.prototype.getViewerForDataFrame = function(datatype){\n\tvar vals = this.getValidDataViewerList(datatype);\n\tif(this.defaultViewers[datatype] && vals[this.defaultViewers[datatype]]){\n\t\treturn vals[this.defaultViewers[datatype]];\n\t}\n\tif(vals){\n\t\treturn vals[Object.keys(vals)[0]];\n\t}\n\telse {\n\t\tif(this.universalViewer) return this.universalViewer;\n\t}\n\n}\n\nDatatypeRenderers.prototype.registerViewerForTypes = function(viewer, record, types){\n\tfor(var i = 0; i < types.length; i++){\n\t\tif(typeof this.registeredDataViewers[types[i]] == \"undefined\"){\n\t\t\tthis.registeredDataViewers[types[i]] = {};\n\t\t}\n\t\tif(!this.registeredDataViewers[types[i]][viewer]){\n\t\t\tthis.registeredDataViewers[types[i]][viewer] = record;\n\t\t}\n\t}\n}\n\nDatatypeRenderers.prototype.registerEditorForTypes = function(viewer, record, types){\n\tfor(var i = 0; i < types.length; i++){\n\t\tif(typeof this.registeredDataEditors[types[i]] == \"undefined\"){\n\t\t\tthis.registeredDataEditors[types[i]] = {};\n\t\t}\n\t\tif(!this.registeredDataEditors[types[i]][viewer]){\n\t\t\tthis.registeredDataEditors[types[i]][viewer] = record;\n\t\t}\t\t\t\n\t}\n}\n\nDatatypeRenderers.prototype.getRenderer = function(type, value){\n\tvar r = {};\n\tlet v = this.getViewerForDataFrame(type);\n\tif(v){\n\t\tif(typeof v == \"object\"){\n\t\t\tr.name = Object.keys(v)[0];\n\t\t\tif(v[r.name].label){\n\t\t\t\tr.label = v[r.name].label;\n\t\t\t}\n\t\t\tif(v[r.name].args){\n\t\t\t\tr.args = v[r.name].args;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tr.name = v;\n\t\t}\n\t\treturn r;\n\t}\n\treturn false;\n}\n\nDatatypeRenderers.prototype.getEditor = function(type, value){\n\tvar r = {};\n\tlet v = this.getEditorForDataFrame(type);\n\tif(v){\n\t\tif(typeof v == \"object\"){\n\t\t\tr.name = Object.keys(v)[0];\n\t\t\tif(v[r.name].label){\n\t\t\t\tr.label = v[r.name].label;\n\t\t\t}\n\t\t\tif(v[r.name].args){\n\t\t\t\tr.args = v[r.name].args;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tr.name = v;\n\t\t}\n\t\treturn r;\n\t}\n\treturn false;\n}\n\n\nmodule.exports=DatatypeRenderers;\n\n\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction WOQLGraph(client, options){\n\tthis.client = client;\n\tthis.options(options);\n\tthis.nodes = [];\n\tthis.node_ids = [];\n\tthis.edges = [];\n\treturn this;\n}\n\nWOQLGraph.prototype.setResult = function(result){\n\tthis.result = result;\n\tthis.calculateVariableTypes(result);\n}\n\nWOQLGraph.prototype.setRenderer = function(rend){\n\tthis.renderer = rend;\n\treturn this;\n}\n\nWOQLGraph.prototype.render = function(){\n\tif(this.renderer) return this.renderer.render(this);\n}\n\nWOQLGraph.prototype.options = function(config){\n\tthis.config = config || TerminusClient.WOQL.graph();\t\n\treturn this;\n}\n\nWOQLGraph.prototype.getEdges = function(){\n\tif(this.edges) return this.edges;\n\tthis.edges = [];\n\tvar bindings = this.result.getBindings();\n\tfor(var i = 0; i<bindings.length; i++){\n\t\tif(this.rowIncludesEdge(bindings[i])){\n\t\t\tthis.edges = this.edges.concat(this.makeEdgesFromRow(bindings[i]))\n\t\t}\n\t}\n\treturn this.edges;\n}\n\nWOQLGraph.prototype.getNodes = function(){\n\tif(this.nodes) return this.nodes;\n\tthis.nodes = [];\n\t//get column names first...\n\tvar bindings = this.result.getBindings();\n\tvar nodes = [];\n\tfor(var i = 0; i<bindings.length; i++){\n\t\tfor(var k in bindings[i]){\n\t\t\tif(this.source_variables.indexOf(k) != -1 && nodes.indexOf(bindings[i][k]) == -1){\n\t\t\t\tnodes.push(bindings[i][k]);\n\t\t\t\tthis.nodes.push(this.makeNodeFromSource(bindings[i][k], k, bindings[i]));\n\t\t\t}\n\t\t\tif(this.target_variables.indexOf(k) != -1 && nodes.indexOf(bindings[i][k]) == -1){\n\t\t\t\tnodes.push(bindings[i][k]);\n\t\t\t\tthis.nodes.push(this.makeNodeFromTarget(bindings[i][k], k, bindings[i]));\n\t\t\t}\n\t\t}\n\t}\n\treturn this.nodes;\n}\n\nWOQLGraph.prototype.makeNodeFromSource = function(sid, k, row) {\n\tvar node = {type: \"node\", id: sid};\n\treturn this.adornNode(node, row);\n}\n\nWOQLGraph.prototype.makeNodeFromTarget = WOQLGraph.prototype.makeNodeFromSource ;\n\nWOQLGraph.prototype.adornNode = function(node){\n\treturn node;\n}\n\nWOQLGraph.prototype.adornEdge = function(edge){\n\treturn edge;\n}\n\nWOQLGraph.prototype.makeEdgeFromRow = function(eid, k, row){\n\tvar target = false;\n\tvar source = false;\n\tfor(var i = 0; i<this.target_variables.length; i++){\n\t\tif(row[this.target_variables[i]]){\n\t\t\ttarget = row[this.target_variables[i]];\n\t\t\tcontinue;\n\t\t}\n\t}\n\tif(target){\n\t\tfor(var i = 0; i<this.source_variables.length; i++){\n\t\t\tif(row[this.source_variables[i]]){\n\t\t\t\tsource = row[this.source_variables[i]];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\t\t\n\t}\n\tif(source && target){\n\t\tvar edge = { type: \"link\", id: eid, target: target, source: source };\n\t\treturn this.adornEdge(edge, row);\n\t}\n}\n\nWOQLGraph.prototype.calculateVariableTypes = function(){\n\tvar bindings = this.result.getBindings();\n\tif(bindings && bindings.length){\n\t\tfor(var i = 0; i<bindings.length; i++){\n\t\t\tthis.extractFromBinding(bindings[i]);\n\t\t}\n\t}\n}\n\nWOQLGraph.prototype.extractFromBinding = function(row){\n\t//\n\tif(this.includeRow(row)){\n\t\t//get all the nodes (ids - non literals) //\n\t\t//see which nodes are excluded ...\n\t\tvar nodes = [];\n\t\tvar lits = [];\n\t\tfor(var k in row){\n\t\t\tif(typeof row[k] == \"string\"){\n\t\t\t\tif(row[k] && row[k] != \"unknown\" && this.includeNode(k, row)) nodes.push(k);\n\t\t\t}\n\t\t\telse if(typeof row[k][\"@value\"] == \"string\" && this.includeLiteralNode(k, row)){\n\t\t\t\tlits.push(k);\n\t\t\t}\n\t\t}\n\t\tif(nodes.length == 0) return;\n\t\t//first of all we need to make the literal nodes targets of \n\t\tfor(var i = 0; i<lits.length; i++){\n\t\t\t//make an edge and put the lit in as a node...\n\t\t\tvar nid = TerminusClient.FrameHelper.genBNID().substring(2);\n\t\t\tlet source = this.getLiteralOwner(nodes, lits[i], row);\n\t\t\tif(source) {\n\t\t\t\tthis.addAdornedNode(nid, lits[i], row);\n\t\t\t\tthis.addAdornedEdge(row[source], nid, source, lits[i], row);\n\t\t\t}\n\t\t}\n\t\tthis.createEdgesFromIDs(nodes, row);\n\t\tfor(var i = 0; i<nodes.length; i++){\n\t\t\tvar ndid = row[nodes[i]];\n\t\t\tthis.addAdornedNode(ndid, nodes[i], row);\n\t\t}\n\t}\n}\n\nWOQLGraph.prototype.addAdornedEdge = function(source, target, ks, kt, row){\n\tvar edge = { type: \"link\", target: target, source: source, text: kt};\n\tconst matched_rules = this.config.getMatchingRules(row, [ks, kt], \"edge\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].size){\n\t\t\tif(typeof matched_rules[i].size == \"string\" && matched_rules[i].size.substring(0, 2) == \"v:\"){\n\t\t\t\tvar w = row[matched_rules[i].size];\n\t\t\t\tif(w && w['@value']) edge.size = w['@value'];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tedge.size = matched_rules[i].size;\n\t\t\t}\t\t\t\n\t\t}\n\t\tif(matched_rules[i].color){\n\t\t\tedge.color = matched_rules[i].color;\t\t\t\n\t\t}\n\t\tif(matched_rules[i].distance){\n\t\t\tif(typeof matched_rules[i].distance == \"string\" && matched_rules[i].distance.substring(0, 2) == \"v:\"){\n\t\t\t\tvar w = row[matched_rules[i].distance];\n\t\t\t\tif(w && w['@value']) edge.distance = w['@value'];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tedge.distance = matched_rules[i].distance;\n\t\t\t}\n\t\t}\n\t\tif(matched_rules[i].arrow){\n\t\t\tedge.arrow = matched_rules[i].arrow;\n\t\t}\n\t\tif(typeof matched_rules[i].symmetric != \"undefined\"){\n\t\t\tedge.symmetric = matched_rules[i].symmetric;\n\t\t}\n\t\tif(matched_rules[i].weight){\n\t\t\tif(typeof matched_rules[i].weight == \"string\" && matched_rules[i].weight.substring(0, 2) == \"v:\"){\n\t\t\t\tvar w = row[matched_rules[i].weight];\n\t\t\t\tif(w && w['@value']) edge.weight = w['@value'];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tedge.weight = matched_rules[i].weight;\n\t\t\t}\n\t\t}\n\t}\n\tthis.edges.push(edge);\t\n}\n\nWOQLGraph.prototype.addAdornedNode = function(nid, k, row){\n\tvar node = { type: \"node\", id: nid, nodetype: k };\n\tconst matched_rules = this.config.getMatchingRules(row, k, \"node\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].size){\n\t\t\tif(typeof matched_rules[i].size == \"string\" && matched_rules[i].size.substring(0, 2) == \"v:\"){\n\t\t\t\tvar rad = row[matched_rules[i].size];\n\t\t\t\tif(rad && rad['@value']) node.radius = rad['@value'];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnode.radius = matched_rules[i].size;\n\t\t\t}\n\t\t}\n\t\tif(matched_rules[i].color){\n\t\t\tnode.color = matched_rules[i].color;\n\t\t}\n\t\tif(matched_rules[i].charge){\n\t\t\tif(typeof matched_rules[i].charge == \"string\" && matched_rules[i].charge.substring(0, 2) == \"v:\"){\n\t\t\t\tvar rad = row[matched_rules[i].charge];\n\t\t\t\tif(rad && rad['@value']) node.charge = rad['@value'];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnode.charge = matched_rules[i].charge;\n\t\t\t}\n\t\t}\n\t\tif(matched_rules[i].collisionRadius ){\n\t\t\tif(typeof matched_rules[i].collisionRadius == \"string\" && matched_rules[i].collisionRadius.substring(0, 2) == \"v:\"){\n\t\t\t\tvar rad = row[matched_rules[i].collisionRadius];\n\t\t\t\tif(rad && rad['@value']) node.collisionRadius = rad['@value'];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnode.collisionRadius= matched_rules[i].collisionRadius;\n\t\t\t}\n\t\t}\n\t\tif(matched_rules[i].icon ){\n\t\t\tnode.icon = matched_rules[i].icon;\n\t\t}\n\t\tif(matched_rules[i].text){\n\t\t\tnode.text = matched_rules[i].text;\n\t\t}\n\t\tif(matched_rules[i].border){\n\t\t\tnode.border = matched_rules[i].border;\n\t\t}\n\t}\n\tif(!node.text){\n\t\tif(typeof row[k] == \"string\") node.text = row[k];\n\t\telse if(row[k]['@value']) node.text = row[k]['@value'];\n\t}\n\tthis.nodes.push(node);\n}\n\nWOQLGraph.prototype.getLiteralOwner = function(nodes, v, row){\n\tvar cs = this.config.source();\n\tif(cs && row[cs]){\n\t\treturn cs;\n\t}\n\tvar edges = this.config.edges();\n\tif(edges){\n\t\tfor(var i = 0; i < edges.length; i++){\n\t\t\tif(edges[i][1] == v){\n\t\t\t\treturn edges[i][0];\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\treturn nodes[0];\n}\n\nWOQLGraph.prototype.createEdgesFromIDs = function(nodes, row){\n\tif(nodes.length < 2) return;\n\tvar cs = this.config.source();\n\tlet es = this.config.edges();\n\tif(!cs && es && es.length){\n\t\tfor(var i = 0; i< es.length; i++){\n\t\t\tif(nodes.indexOf(es[i][0]) != -1 && nodes.indexOf(es[i][1]) != -1 ){\n\t\t\t\tthis.addAdornedEdge(row[es[i][0]], row[es[i][1]], es[i][0], es[i][1], row);\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\tvar s = (cs && nodes.indexOf(cs) != -1) ? cs : nodes[0];\n\tfor(var i = 0; i<nodes.length; i++){\n\t\tif(nodes[i] == s) continue;\n\t\tthis.addAdornedEdge(row[s], row[nodes[i]], s, nodes[i], row);\n\t}\n}\n\nWOQLGraph.prototype.includeNode = function(v, row){\n\tconst matched_rules = this.config.getMatchingRules(row, v, \"node\", \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].hidden) return false;\n\t}\n\treturn true;\n}\n\nWOQLGraph.prototype.includeLiteralNode = function(v, row){\n\tlet l = this.config.literals();\n\tif(typeof l != \"undefined\" && !l) return false;\n\tconst matched_rules = this.config.getMatchingRules(row, v, \"node\", \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].hidden) return false;\n\t}\n\treturn true;\n}\n\n\nWOQLGraph.prototype.includeRow = function(row){\n\tconst matched_rules = this.config.getMatchingRules(row, false, \"row\", \"hidden\");\n\tfor(var i = 0; i<matched_rules.length; i++){\n\t\tif(matched_rules[i].hidden) return false;\n\t}\n\treturn true;\n}\n\n\n\nmodule.exports = WOQLGraph;","/*\n * Maps a woql query to a stream of results...\n */\n\nfunction WOQLStream(client){\n\tthis.client = client;\n}\n\nWOQLStream.prototype.options = function(opts){\n\tthis.page_size = 10;\n\treturn this;\n}\n\nWOQLStream.prototype.setResult = function(wqrs){\n\tthis.result = wqrs;\n}\n\nWOQLStream.prototype.setRenderer = function(rend){\n\tthis.renderer = rend;\n\treturn this;\n}\n\nWOQLStream.prototype.render = function(){\n\tif(this.renderer) return this.renderer.render(this);\n}\n\nmodule.exports = WOQLStream;","const TerminusClient = require('@terminusdb/terminus-client');\nconst TerminusCodeSnippet = require('./query/TerminusCodeSnippet');\nconst ResultPane = require(\"./ResultPane\");\nconst UTILS = require('../Utils');\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\n\nfunction QueryPane(client, query, result){\n\tthis.client = client;\n\tthis.query = query;\n\tthis.result = result;\n\tthis.views = [];\n\tthis.container = document.createElement('span');\n    this.container.setAttribute('class', 'terminus-query-pane-cont');\n\tthis.messages = document.createElement('div');\n\tthis.messages.setAttribute('class', 'terminus-query-messages');\n\tthis.fireDefaultQueries();\n}\n\nQueryPane.prototype.fireDefaultQueries = function(){\n\tlet WOQL = TerminusClient.WOQL;\n\tvar query = WOQL.query().classMetadata();\n\tquery.execute(this.client).then((results) => {\n\t\tlet qcres = new TerminusClient.WOQLResult(results, query);\n\t\tthis.classMetaDataRes = qcres;\n\t})\n\tvar query = WOQL.query().propertyMetadata();\n\tquery.execute(this.client).then((results) => {\n\t\tlet qpres = new TerminusClient.WOQLResult(results, query);\n\t\tthis.propertyMetaDataRes = qpres;\n\t})\n}\n\nQueryPane.prototype.options = function(opts){\n\tthis.showQuery = (opts && typeof opts.showQuery != \"undefined\" ? opts.showQuery : true);\n\tthis.editQuery = (opts && typeof opts.editQuery != \"undefined\" ? opts.editQuery : true);\n\tthis.showHeader = (opts && typeof opts.showHeader != \"undefined\" ? opts.showHeader : false);\n\tthis.addViews = (opts && typeof opts.addViews != \"undefined\" ? opts.addViews : false);\n\tthis.intro = (opts && typeof opts.intro != \"undefined\" ? opts.intro : false);\n\tthis.defaultResultView = { showConfig: \"icon\", editConfig: \"true\" };\n    return this;\n}\n\nQueryPane.prototype.getSection = function(sName){\n\tvar btn = document.createElement('button');\n\tbtn.setAttribute('class', 'terminus-query-section');\n\tbtn.appendChild(document.createTextNode(sName));\n\treturn btn;\n}\n\nQueryPane.prototype.clearSubMenus = function(btn){\n\tvar par = btn.parentElement.parentElement;\n\tvar smenus = par.getElementsByClassName('terminus-queries-submenu');\n\tfor(var i=0; i<smenus.length; i++){\n\t\tTerminusClient.FrameHelper.removeChildren(smenus[i]);\n\t}\n}\n\nQueryPane.prototype.getResults = function(query){\n\tif(query)\n\t\tthis.input.setQuery(query);\n\tTerminusClient.FrameHelper.removeChildren(this.sampleQueryDOM);\n\tthis.input.refreshContents();\n}\n\nQueryPane.prototype.AddEvents = function(btn){\n\tvar self = this;\n\tbtn.addEventListener('click', function(){\n\t\tlet WOQL = TerminusClient.WOQL;\n\t\tself.clearSubMenus(this);\n\t\tvar query;\n\t\tswitch(this.value){\n\t\t\tcase 'Show All Schema Elements':\n\t\t\t\tquery = WOQL.query().elementMetadata();\n\t\t\tbreak;\n\t\t\tcase 'Show All Classes':\n\t\t\t\tquery = WOQL.query().classMetadata();\n\t\t\tbreak;\n\t\t\tcase 'Show Document Classes':\n\t\t\t\tquery = WOQL.query().documentMetadata();\n\t\t\tbreak;\n\t\t\tcase 'Show All Properties':\n\t\t\t\tquery = WOQL.query().propertyMetadata();\n\t\t\tbreak;\n\t\t\tcase 'Show All Data':\n\t\t\t\tquery = WOQL.query().getEverything();\n\t\t\tbreak;\n\t\t\tcase 'Show data of chosen type':\n\t\t\t\tvar choosen = 'scm:' + this.innerText;\n\t\t\t\tquery = WOQL.query().getDataOfClass(choosen);\n\t\t\tbreak;\n\t\t\tcase 'Show property of chosen type':\n\t\t\t\tvar choosen = 'scm:' + this.innerText;\n\t\t\t\tquery = WOQL.query().getDataOfProperty(choosen);\n\t\t\tbreak;\n\t\t\tcase 'Show data of type':\n\t\t\t\treturn;\n\t\t\tcase 'Show property of type':\n\t\t\t\treturn;\n\t\t\tdefault:\n\t\t\t\tconsole.log('Invalid Type of query');\n\t\t\tbreak;\n\t\t}\n\t\tself.getResults(query);\n\t})\n}\n\nQueryPane.prototype.getQueryMenu = function(qName){\n\tvar btn = document.createElement('button');\n\tbtn.setAttribute('class', 'terminus-load-queries');\n\tbtn.setAttribute('value', qName);\n\tbtn.appendChild(document.createTextNode(qName));\n\tthis.AddEvents(btn);\n\treturn btn;\n}\n\nQueryPane.prototype.getSubDataMenu = function(qName, val){\n\tvar btn = document.createElement('button');\n\tbtn.setAttribute('class', 'terminus-load-queries');\n\tbtn.setAttribute('value', qName);\n\tbtn.appendChild(document.createTextNode(val));\n\tthis.AddEvents(btn);\n\treturn btn;\n}\n\n// schema queries\nQueryPane.prototype.getSchemaSection = function(d){\n\tvar section = this.getSection('Schema Queries');\n\td.appendChild(section);\n\tvar btn = this.getQueryMenu('Show All Schema Elements');\n\td.appendChild(btn);\n\tvar btn = this.getQueryMenu('Show All Classes');\n\td.appendChild(btn);\n\tvar btn = this.getQueryMenu('Show Document Classes');\n\td.appendChild(btn);\n\tvar btn = this.getQueryMenu('Show All Properties');\n\td.appendChild(btn);\n}\n\nQueryPane.prototype.checkIfDataMenuOpen = function(btn){\n\tvar isOpen = false;\n\tif(btn.children.length){\n\t\tfor(var i=0; i<btn.children.length; i++){\n\t\t\t//var child = btn.children[i].getElementsByClassName('terminus-queries-submenu');\n\t\t\tvar child = btn.getElementsByClassName('terminus-queries-submenu');\n\t\t\tif(child.length){\n\t\t\t\tfor(var j=0; j<child.length; j++){\n\t\t\t\t\tTerminusClient.FrameHelper.removeElement(child[j]);\n\t\t\t\t\tisOpen = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn isOpen;\n}\n\nQueryPane.prototype.showDataOfTypeEvent = function(btn){\n\tvar self = this;\n\tbtn.addEventListener('click', function(){\n\t\tvar isMenuOpen = self.checkIfDataMenuOpen(this);\n\t\tif(!isMenuOpen){\n\t\t\tvar subPar = document.createElement('div');\n\t\t\tsubPar.setAttribute('class', 'terminus-queries-submenu');\n\t\t\tif(self.classMetaDataRes && self.classMetaDataRes.hasBindings()){\n\t\t\t\tfor(var i = 0; i<self.classMetaDataRes.bindings.length; i++){\n\t\t\t\t\tvar text = self.classMetaDataRes.bindings[i]['v:Label']['@value'];\n\t\t\t\t\tsubPar.appendChild(self.getSubDataMenu('Show data of chosen type', text));\n\t\t\t\t}\n\t\t\t}\n\t\t\tbtn.appendChild(subPar);\n\t\t}\n\t})\n}\n\nQueryPane.prototype.showPropertyOfTypeEvent = function(btn){\n\tvar self = this;\n\tbtn.addEventListener('click', function(){\n\t\tvar isMenuOpen = self.checkIfDataMenuOpen(this);\n\t\tif(!isMenuOpen){\n\t\t\tvar subPar = document.createElement('div');\n\t\t\tsubPar.setAttribute('class', 'terminus-queries-submenu');\n\t\t\tif(self.propertyMetaDataRes && self.propertyMetaDataRes.hasBindings()){\n\t\t\t\tfor(var i = 0; i<self.propertyMetaDataRes.bindings.length; i++){\n\t\t\t\t\tvar text = self.propertyMetaDataRes.bindings[i]['v:Label']['@value'];\n\t\t\t\t\tsubPar.appendChild(self.getSubDataMenu('Show property of chosen type', text));\n\t\t\t\t}\n\t\t\t}\n\t\t\tbtn.appendChild(subPar);\n\t\t}\n\t})\n}\n\nQueryPane.prototype.addCheveronIcon = function(btn){\n\tvar i = document.createElement('i');\n\ti.setAttribute('class', 'fa fa-chevron-right terminus-query-section');\n\tbtn.appendChild(i);\n}\n\n// data queries\nQueryPane.prototype.getDataSection = function(d){\n\tvar section = this.getSection('Data Queries');\n\td.appendChild(section);\n\t// div to populate submenu on data of type\n\tvar bd = document.createElement('div');\n\tbd.setAttribute('class', 'terminus-query-submenu');\n\td.appendChild(bd);\n\tvar btn = this.getQueryMenu('Show data of type');\n\tbd.appendChild(btn);\n\tthis.addCheveronIcon(btn);\n\tthis.showDataOfTypeEvent(btn);\n\t// div to populate submenu on property of type\n\tvar bd = document.createElement('div');\n\tbd.setAttribute('class', 'terminus-query-submenu');\n\td.appendChild(bd);\n\tvar btn = this.getQueryMenu('Show property of type');\n\tbd.appendChild(btn);\n\tthis.showPropertyOfTypeEvent(btn);\n\tthis.addCheveronIcon(btn);\n\tvar btn = this.getQueryMenu('Show All Data');\n\td.appendChild(btn);\n}\n\nQueryPane.prototype.fireDocumentEvent = function(document){\n\tlet WOQL = TerminusClient.WOQL;\n\tvar query = WOQL.query().documentProperties(document);\n\tthis.getResults(query);\n}\n\nQueryPane.prototype.getEnterDocumentIdDOM = function(){\n\tvar sp = document.createElement('span');\n\tsp.setAttribute('class', 'terminus-display-flex');\n\tvar inp = document.createElement('input');\n\tinp.setAttribute('class', 'terminus-doc-id-input');\n\tinp.setAttribute('placeholder', 'doc:myDocId');\n\tvar sub = document.createElement('button');\n\tsub.setAttribute('class', 'terminus-btn terminus-doc-id-input-submit');\n\tsub.appendChild(document.createTextNode('Submit'));\n\tvar self = this;\n\tsub.addEventListener('click', function(){\n\t\tself.fireDocumentEvent(inp.value);\n\t})\n\tsp.appendChild(inp);\n\tsp.appendChild(sub);\n\treturn sp;\n}\n\n// document queries\nQueryPane.prototype.getDocumentSection = function(d){\n\tvar section = this.getSection('Document Queries');\n\td.appendChild(section);\n\tvar btn = this.getQueryMenu('Show All Documents');\n\td.appendChild(btn);\n\td.appendChild(this.getEnterDocumentIdDOM());\n}\n\n// bottom color transaprent\nQueryPane.prototype.getQueryMenuBlock = function(){\n\tvar d = document.createElement('div');\n\td.setAttribute('class', 'terminus-load-queries');\n\tthis.getSchemaSection(d);\n\tthis.getDataSection(d);\n\tthis.getDocumentSection(d);\n\treturn d;\n}\n\nQueryPane.prototype.getSampleQueriesDOM = function(){\n\tvar i = document.createElement('icon');\n\ti.setAttribute('class', 'fa fa-ellipsis-v terminus-ellipsis-icon');\n\ti.setAttribute('title', 'Click to load sample Queries');\n\ti.setAttribute('value', false);\n\tthis.sampleQueryDOM = i;\n\tvar self = this;\n\ti.addEventListener('click', function(e){\n\t\tif(e.target !== this) return;\n\t\tif(this.children.length)\n\t\t\tTerminusClient.FrameHelper.removeChildren(this);\n\t\telse{\n\t\t\tvar d = self.getQueryMenuBlock();\n\t\t\tthis.appendChild(d);\n\t\t}\n\t})\n\treturn i;\n}\n\nQueryPane.prototype.getAsDOM = function(){\n\tif(this.intro){\n\t\tthis.container.appendChild(UTILS.getHeaderDom(this.intro));\n\t}\n\tif(this.showQuery) {\n\t\tvar configspan = document.createElement(\"span\");\n\t\tconfigspan.setAttribute(\"class\", \"pane-config-icons\");\n\t\tthis.querySnippet = configspan;\n\t\tthis.container.appendChild(configspan);\n\t\tvar mode = (this.editQuery ? \"edit\" : \"view\");\n\t\tthis.input = this.createInput(mode);\n\t\tvar ipdom = this.input.getAsDOM(true);\n\t\tvar ispan = document.createElement(\"span\");\n\t\tispan.setAttribute(\"class\", \"query-pane-config\");\n\t\tvar ic = document.createElement(\"i\");\n\t\t//ic.setAttribute('style', 'margin:10px;')\n\t\tconfigspan.appendChild(ic);\n\t\tvar self = this;\n\t\tfunction showQueryConfig(){\n\t\t\tconfigspan.title=\"Click to Hide Query\";\n\t\t\tic.setAttribute(\"class\", \"fas fa fa-times-circle\");\n\t\t\tconfigspan.classList.remove('terminus-click-to-view-query');\n\t\t\tvar qicon = self.getSampleQueriesDOM();\n\t\t\tif(configspan.nextSibling){\n\t\t\t\tself.container.insertBefore(ipdom, configspan.nextSibling);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tself.container.appendChild(ipdom);\n\t\t\t\tipdom.appendChild(qicon);\n\t\t\t}\n\t\t\tself.input.stylizeSnippet();\n\t\t}\n\t\tfunction hideQueryConfig(){\n\t\t\tconfigspan.title=\"Click to View Query\";\n            ic.setAttribute(\"class\", \"fas fa fa-search terminus-query-view-icon\");\n\t\t\tconfigspan.classList.add('terminus-click-to-view-query');\n\t\t\tself.container.removeChild(ipdom);\n\t\t}\n\t\tconfigspan.addEventListener(\"click\", () => {\n\t\t\tif(this.showingQuery) hideQueryConfig();\n\t\t\telse showQueryConfig();\n\t\t\tthis.showingQuery = !this.showingQuery;\n\t\t});\n\t\tshowQueryConfig();\n\t\tif(this.showQuery == \"icon\") hideQueryConfig();\n    }\n\tthis.resultDOM = document.createElement(\"span\");\n\tthis.resultDOM.setAttribute(\"class\", \"terminus-query-results\");\n\tif(this.views.length == 0){\n\t\tthis.addView(TerminusClient.WOQL.table(), this.defaultResultView);\n\t}\n\t//this is where we want to put in the view headers in the case of the query page\n\tfor(var i = 0; i<this.views.length; i++){\n\t\tvar vdom = this.views[i].getAsDOM();\n\t\tif(vdom){\n\t\t\tif(this.showHeader){\n\t\t\t\tvar closable = (this.views.length != 1);\n\t\t\t\t//var qhdr = this.getResultPaneHeader(closable);\n\t\t\t\t//vdom.prepend(qhdr);\n\t\t\t}\n\t\t\tthis.resultDOM.appendChild(vdom);\n\t\t}\n\t}\n\tthis.container.appendChild(this.resultDOM);\n\tif(this.addViews) this.container.appendChild(this.getAddViewControl());\n\treturn this.container;\n}\n\n\nQueryPane.prototype.getResultPaneHeader = function(closable){\n\tvar c = document.createElement('div');\n\tvar savePaneButton = document.createElement('button');\n\tsavePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\tsavePaneButton.appendChild(document.createTextNode('Save'));\n\tc.appendChild(savePaneButton);\n\tif(closable){\n\t\tvar closePaneButton = document.createElement('button');\n\t\tclosePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tclosePaneButton.appendChild(document.createTextNode('Close'));\n\t\tc.appendChild(closePaneButton);\n\t}\n\tvar collapsePaneButton = document.createElement('button');\n\tcollapsePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\tcollapsePaneButton.appendChild(document.createTextNode('Collapse'));\n\tc.appendChild(collapsePaneButton);\n\treturn c;\n}\n\nQueryPane.prototype.createInput = function(mode){\n    let input = new TerminusCodeSnippet(\"woql\", mode, null, 800);\n    if(this.query){\n    \tinput.setQuery(this.query);\n\t}\n\tvar self = this;\n\tinput.submit = function(qObj){\n\t\tself.submitQuery(qObj);\n\t};\n\treturn input;\n}\n\nQueryPane.prototype.updateQuery = function(qObj){\n\tthis.query = qObj;\n\tif(this.input) this.input.setQuery(this.query);\n}\n\nQueryPane.prototype.updateResult = function(result){\n\tthis.result = result;\n\tthis.updateQuery(result.query);\n\tthis.refreshViews();\n}\n\nQueryPane.prototype.addView = function(config, options){\n\tvar nrp = new ResultPane(this.client, this, config).options(options);\n\tif(this.result){\n\t\tnrp.setResult(this.result);\n\t}\n\tthis.views.push(nrp);\n\treturn nrp;\n}\n\nQueryPane.prototype.empty = function(){\n\treturn (typeof this.query == \"undefined\");\n}\n\nQueryPane.prototype.clearMessages = function(){\n\tif(this.messages.children.length) TerminusClient.FrameHelper.removeChildren(this.messages);\n}\n\nQueryPane.prototype.getBusyLoader = function(){\n     var pd = document.createElement('div');\n     var pbc = document.createElement('div');\n     pbc.setAttribute('class', 'term-progress-bar-container');\n     pd.appendChild(pbc);\n\n     var pbsa = document.createElement('div');\n     pbsa.setAttribute('class', 'term-progress-bar term-stripes animated reverse slower');\n     pbc.appendChild(pbsa);\n     var pbia = document.createElement('span');\n     pbia.setAttribute('class', 'term-progress-bar-inner');\n     pbsa.appendChild(pbia);\n\t return pd;\n}\n\nQueryPane.prototype.showBusy = function(msg){\n\tvar msgHolder = document.createElement('div');\n\tmsgHolder.setAttribute('class', 'terminus-busy-msg')\n\tmsgHolder.appendChild(document.createTextNode(msg));\n\tmsgHolder.appendChild(this.getBusyLoader());\n\tthis.messages.appendChild(msgHolder);\n\tthis.container.insertBefore(this.messages, this.querySnippet);\n}\n\nQueryPane.prototype.showError = function(e){\n\tvar md = document.createElement('div');\n\tmd.setAttribute('class', 'terminus-show-msg-error');\n\tmd.appendChild(document.createTextNode(e));\n\tthis.messages.appendChild(md);\n\tif(this.container)\n\t\tthis.container.insertBefore(this.messages, this.resultDOM);\n}\n\nQueryPane.prototype.showNoBindings = function(){\n\tnor = document.createElement('div');\n\tnor.setAttribute('class', 'terminus-no-res-alert');\n\tnor.appendChild(document.createTextNode(\"No results available for this query\"));\n\tif(this.container)\n\t\tthis.container.insertBefore(nor, this.resultDOM);\n}\n\nQueryPane.prototype.submitQuery = function(qObj){\n\tthis.clearMessages();\n\tif(typeof qObj == 'string'){\n\t\tthis.showError(qObj);\n\t\treturn;\n\t}\n    this.query = qObj;\n\tthis.showBusy('Fetching results ...');\n\tvar self = this;\n    qObj.execute(this.client).then((results) => {\n\t\tvar r = new TerminusClient.WOQLResult(results, qObj);\n\t\tthis.result = r;\n\t\tself.clearMessages();\n\t\tif(this.result.hasBindings())\n\t\t\tthis.refreshViews();\n\t\telse this.showNoBindings();\n\t})\n}\n\nQueryPane.prototype.refreshViews = function(){\n\tfor(var i = 0; i<this.views.length; i++){\n\t\tthis.views[i].updateResult(this.result);\n\t}\n}\n\n\nQueryPane.prototype.getAddViewControl = function(){\n\tvar vd = document.createElement('div');\n\tvd.setAttribute('class', 'terminus-add-view-selector');\n\tvar self = this;\n\tvar WOQL = TerminusClient.WOQL;\n\tvar newView = function(val){\n\t\tself.selector.value = \"\";\n\t\tvar c= eval('WOQL.' + val + \"()\");\n\t\tvar nv = self.addView(c, self.defaultResultView);\n\t\tif(self.result){\n\t\t\tnv.setResult(self.result);\n\t\t}\n\t\tvar vdom = nv.getAsDOM();\n\t\tif(vdom){\n\t\t\tself.resultDOM.appendChild(vdom);\n\t\t}\n\t}\n\tvar opts = [\n\t\t{ value: \"\", label: \"Add another view of results\"},\n\t\t{ value: \"table\", label: \"Add Table View\"},\n\t\t{ value: \"stream\", label: \"Add Stream View\"},\n\t\t{ value: \"graph\", label: \"Add Graph View\"},\n\t\t{ value: \"chooser\", label: \"Add Drop-down View\"},\n\t\t{ value: \"map\", label: \"Add Map View\"}\n\t];\n\tvar sel = HTMLFrameHelper.getSelectionControl(\"view\", opts, false,newView);\n\tthis.selector = sel;\n\tvd.appendChild(sel);\n\treturn vd;\n}\n\n\n\n\n/*\ndescr: Show results editor on click of Add View\nparams: query object, query snippet\nQueryPane.prototype.showRuleEditor = function(woql, vd, qSnippet){\nvar cancel = document.createElement('icon');\n//cancel.appendChild(document.createTextNode('cancel'));\ncancel.setAttribute('class', 'fa fa-times terminus-pointer terminus-cancel-rule-editor');\nvd.appendChild(cancel);\nvar rSnippet = this.thv.getEditor(1350, 250, 'Enter Rules ...');\n//var rEditor = document.createElement('div');\nvd.setAttribute('class', 'terminus-rule-editor');\n//vd.setAttribute('style', 'border: 1px solid orange');\nthis.qpane.addRuleDom = rSnippet.actionButton;\nvd.appendChild(UTILS.getHeaderDom('Rule Editor:'));\nvd.appendChild(rSnippet.dom);\nqSnippet.dom.appendChild(vd);\nvar self = this;\ncancel.addEventListener('click', function(){\n    TerminusClient.FrameHelper.removeChildren(vd);\n    self.addView(woql, qSnippet);\n})\nthis.qpane.addRuleDom.addEventListener('click', function(){\n    try{\n        self.submitView(woql, qSnippet, rSnippet);\n        self.hideAddViewEditor(vd);\n    }\n    catch(e){\n        self.ui.showError('Error in rule editor: ' + e);\n    }\n})\nreturn rSnippet;\n}\n*/\n\n\n/*\n\nQueryPane.prototype.getWOQLEditor = function(){\n    var tcs = new TerminusCodeSnippet(\"woql\", \"edit\");\n\tvar snippet = tcs.getAsDOM();\n\tvar dimensions = {};\n\tdimensions.width = width;\n\tdimensions.height = height;\n\tUTILS.stylizeEditor(this.ui, snippet.snippetText, dimensions, 'javascript');\n\treturn snippet;\n}\n\nQueryPane.prototype.showConfigEditor = function(result, config, span){\n    var cSnippet = this.getEditor(300, 250,\n                        JSON.stringify(config, undefined, 2));\n    var self = this;\n    cSnippet.actionButton.addEventListener('click', function(){\n        try{\n            //self.submitConfigRules(woql, cSnippet, qSnippet, rSnippet);\n\t\t\tvar cObj = UTILS.getqObjFromInput(cSnippet.snippetText.value);\n\t\t\tTerminusClient.FrameHelper.removeChildren(span);\n\t\t\tspan.appendChild(self.showResult(result, cObj));\n        }\n        catch(e){\n            //self.ui.showError('Error in config editor: ' + e);\n\t\t\tconsole.log('Error in config editor: ' + e);\n        }\n    })\n    return cSnippet;\n}\n\nQueryPane.prototype.submitConfig = function(result, config, span, cdom){\n\tvar cSnippet = this.showConfigEditor(result, config, span);\n\tcdom.appendChild(cSnippet.dom);\n}\n\nQueryPane.prototype.showConfig = function(result, config, span, cdom){\n\tvar cbtn = document.createElement('button');\n    //cbtn.setAttribute('style', 'margin-top: 10px;');\n    cbtn.setAttribute('class', 'terminus-btn terminus-query-config-btn');\n    cbtn.appendChild(document.createTextNode('Config'));\n    //rSnippet.dom.appendChild(cbtn);\n    //qSnippet.dom.appendChild(cbtn);\n    var self = this;\n    cbtn.addEventListener('click', function(){\n\t\tTerminusClient.FrameHelper.removeChildren(cdom);\n        self.submitConfig(result, config, span, cdom);\n    })\n    return cbtn;\n}\n\n\n/*QueryPane.prototype.addResultViewerOLD = function(label, rule, ruleviewer){\n\tlet rv = new ResultViewer(rule);\n\tif(ruleviewer) rv.setRuleViewer(ruleviewer);\n\tthis.result_viewers[label] = rv;\n\treturn this;\n}\n\nQueryPane.prototype.addResultViewer = function(rule){\n\talert(\"rule \" + JSON.stringify(rule));\n\tthis.result_viewers.push(rule);\n\treturn this;\n}\n\n\n\nQueryPane.prototype.addLibrary = function(lib){\n\tthis.libraries.push(lib);\n\treturn this;\n}\n\nQueryPane.prototype.render = function(lib){\n\tvar qps = document.createElement(\"span\");\n\tfor(var i = 0; i<this.query_viewers.length; i++){\n\t\tvar qv = this.query_viewers[i];\n\t\tif(qv){\n\t\t\tlet v = qv.render();\n\t\t\tif(v) qps.appendChild(v);\n\t\t}\n\t}\n\n\tfor(var k in this.result_viewers){\n\t\tvar rv = this.result_viewers[k];\n\t\tif(rv){\n\t\t\tvar x = rv.render();\n\t\t\tif(x) qps.appendChild(x);\n\t\t}\n\t}\n\treturn qps;\n}\n\nfunction ResultViewer(rule){\n\tthis.rules = [];\n\tif(rule) this.rules.push(rule);\n}\n\nResultViewer.prototype.render = function(){\n\talert(\"rv\");\n\tvar span = document.createElement(\"span\");\n\tif(this.ruleviewer){\n\t\tlet r = this.ruleviewer.render();\n\t\tif(r) span.appendChild(r);\n\t}\n\treturn span;\n}\n\nResultViewer.prototype.setRuleViewer = function(rv){\n\tthis.ruleviewer = rv;\n}\n\n*/\n\nmodule.exports = QueryPane;\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLStringEditor(options){\n\tthis.css = ((options && options.css) ? \"terminus-literal-value \" + options.css : \"terminus-literal-value\");\n\tthis.options = options; \n}\n\nHTMLStringEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar big = ((this.options && typeof this.options.big != \"undefined\") ? this.options.big : this.isBigType(this.type, value));\n\tif(big){\n\t\tvar input = document.createElement(\"textarea\");\n\t\tthis.css += \" terminus-literal-big-value\";\t\t\n\t}\n\telse {\n\t\tvar size = ((this.options && typeof this.options.size != \"undefined\") ? this.options.size : this.getTypeSize(this.type, value));\n\t\tvar input = document.createElement(\"input\");\n\t\tinput.setAttribute('type', \"text\");\n\t\tinput.setAttribute('size', size);\n\t}\n\tinput.setAttribute('class', this.css);\n\tinput.setAttribute(\"data-value\", value);\n\t\n\tinput.value = value;\n\tvar self = this;\n\tinput.addEventListener(\"input\", function(){\n\t\tframe.set(this.value);\n\t});\n\treturn input;\n}\n\nHTMLStringEditor.prototype.isBigType = function(ty, value){\n\tif(value && value.length && value.length > 100) return true;\n\tvar longs = [\"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\", \"xsd:base64Binary\", \"xdd:html\", \"xdd:json\", \"rdf:XMLLiteral\"];\n\tif(longs.indexOf(ty) == -1) return false;\n\treturn true;\n}\n\nHTMLStringEditor.prototype.getTypeSize = function(ty, value){\n\tif(value && value.length && value.length > 40) return 80;\n\tvar bigs = [\"xdd:url\", \"xdd:coordinate\", \"xsd:anyURI\"];\n\tvar smalls = [\"xsd:gYearMonth\", \"xdd:gYearRange\", \"xsd:decimal\", \"xsd:float\", \"xsd:time\", \"xsd:date\", \n\t\t\"xsd:dateTimeStamp\",\"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:duration\", \"xsd:yearMonthDuration\", \"xsd:dayTimeDuration\", \n\t\t\"xsd:nonNegativeInteger\", \"xsd:positiveInteger\", \"xsd:negativeInteger\",\t\"xsd:nonPositiveInteger\", \"xsd:integer\",\"xsd:unsignedInt\"];\n\tvar tinys = [\"xsd:boolean\", \"xsd:gYear\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:byte\", \"xsd:short\", \"xsd:unsignedByte\", \"xsd:language\"];\n\tif(bigs.indexOf(ty) != -1) return 80;\n\tif(smalls.indexOf(ty) != -1) return 16;\n\tif(tinys.indexOf(ty) != -1) return 8;\n\treturn 32;\n}\n\nmodule.exports={HTMLStringEditor}\n\n\n","function HTMLBooleanViewer(options){\n\tthis.css = \"terminus-literal-value terminus-literal-value-boolean \" + ((options && options.css) ?  options.css : \"\");\n}\n\nHTMLBooleanViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLBooleanViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\t\n}\n\nHTMLBooleanViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', this.css);\n\tif(value){\n\t\tvar vallab = document.createTextNode(value);\n\t\tinput.appendChild(vallab);\n\t}\n\treturn input;\n}\n\n\nmodule.exports={HTMLBooleanViewer}\n\n","function HTMLBooleanEditor(options){\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n}\n\nHTMLBooleanEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar input = document.createElement(\"input\");\n\tinput.setAttribute('type', \"checkbox\");\n\tif(value){\n\t\tinput.setAttribute(\"checked\", \"checked\");\t\t\t\t\t\n\t}\n\tinput.addEventListener(\"change\", function(){\n\t\tif(value){\n\t\t\tframe.set(\"\");\n\t\t}\n\t\telse {\n\t\t\tframe.set(\"true\");\n\t\t}\n\t});\n\treturn input;\n}\n\nmodule.exports={HTMLBooleanEditor}\n\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLChoiceViewer(options){};\n\nHTMLChoiceViewer.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tif(frame.frame && frame.frame.elements){\n\t\tthis.elements = frame.frame.elements;\n\t}\n\treturn this.render(value);\n}\n\nHTMLChoiceViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\nHTMLChoiceViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-choice-value\");\n\tinput.setAttribute('data-value', value);\n\tvar lab = false;\n\tif(value && this.elements){\n\t\tfor(var i = 0; i<this.elements.length; i++){\n\t\t\tvar elt = this.elements[i];\n\t\t\tif(elt.class == value){\n\t\t\t\tif(elt.label && elt.label[\"@value\"]){\n\t\t\t\t\tlab = elt.label[\"@value\"];\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\t\t\t\t\n\t\t}\n\t}\n\tif(value && !lab){\n\t\tlab = TerminusClient.FrameHelper.labelFromURL(value);\t\t\t\t\t\n\t}\n\tif(lab){\n\t\tinput.appendChild(document.createTextNode(lab));\t\t\n\t}\n\treturn input\n}\n\nmodule.exports={HTMLChoiceViewer}\n\n\n","const HTMLFrameHelper = require('../HTMLFrameHelper');\n\nfunction HTMLChoiceEditor(options){};\n\nHTMLChoiceEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar optInput = document.createElement(\"select\");\n\toptInput.setAttribute('class', \"terminus-choice-picker\");\n\tvar foptions = frame.getChoiceOptions();\n\tfoptions.unshift({ value: \"\", label: \"Not Specified\"});\n\tvar callback = function(val){\n\t\tframe.set(val);\n\t}\n\tvar sel = HTMLFrameHelper.getSelectionControl(\"select-choice\", foptions, value, callback);\n\treturn sel;\n}\n\nmodule.exports={HTMLChoiceEditor}\n\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLCoordinateViewer(options){\n\tthis.inputs = [];\n}\n\nHTMLCoordinateViewer.prototype.parseValue = function(value){\n\ttry {\n\t\tvar parsed = (value ? JSON.parse(value) : false);\n\t\tif(parsed && this.type == \"xdd:coordinate\"){\n\t\t\tparsed = [parsed];\n\t\t}\n\t\treturn parsed;\n\t}\n\tcatch(e){\n\t\tthis.error = this.type + \" value \" + value + \" failed to parse as json\", e.toString();\n\t\treturn [];\n\t}\n}\n\n\nHTMLCoordinateViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLCoordinateViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\nHTMLCoordinateViewer.prototype.render = function(value){ \n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-coordinate\");\n\tif(value){\n\t\tinput.setAttribute('data-value', value);\t\t\n\t\tvar parsed = this.parseValue(value);\n\t\tif(parsed){\n\t\t\tfor(var i = 0; i < parsed.length; i++){\n\t\t\t\tvar lldom = document.createElement(\"span\");\n\t\t\t\tlldom.setAttribute(\"class\", \"latlong\");\n\t\t\t\tlldom.appendChild(document.createTextNode(\"Latitude: \"));\n\t\t\t\tlldom.appendChild(document.createTextNode(parsed[i][0] + \" °\" + \" \"));\n\t\t\t\tlldom.appendChild(document.createTextNode(\"Longitude: \"));\n\t\t\t\tlldom.appendChild(document.createTextNode(parsed[i][1] + \" °\" ));\n\t\t\t\tinput.appendChild(lldom);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tinput.setAttribute(\"title\", this.error);\n\t\t}\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLCoordinateViewer}\n\n","function HTMLCoordinateEditor(options){\n\tthis.inputs = [];\n}\n\nHTMLCoordinateEditor.prototype.getInputDOMs = function(lat, long, change){\n\tvar latdom = document.createElement(\"input\");\n\tlatdom.setAttribute(\"type\", \"text\");\n\tlatdom.value = lat;\n\tvar longdom = document.createElement(\"input\");\n\tlongdom.setAttribute(\"type\", \"text\");\n\tlongdom.value = long;\n\tlatdom.addEventListener(\"change\", change);\n\tlongdom.addEventListener(\"change\", change);\n\treturn [latdom, longdom];\n}\n\nHTMLCoordinateEditor.prototype.getLatLongDOM = function(lat, long, ty, index, parent){\n\tvar lldom = document.createElement(\"span\");\n\tlldom.setAttribute(\"class\", \"terminus-lat-long\");\n\tvar firstcol = document.createElement(\"span\");\n\tfirstcol.setAttribute(\"class\", \"terminus-lat-long-col\");\n\tlldom.appendChild(firstcol);\n\tif(index > 2 || (ty == \"xdd:coordinatePolyline\" && index > 1)){\n\t\tvar delbut = document.createElement(\"button\");\n\t\tdelbut.setAttribute(\"class\", \"delete-coordinate\");\n\t\tdelbut.appendChild(document.createTextNode(\"Remove\"));\n\t\tdelbut.addEventListener(\"click\", function(){\n\t\t\tlong.value = \"\";\n\t\t\tlat.value = \"\";\n\t\t\tparent.removeChild(lldom);\n\t\t});\n\t\tfirstcol.appendChild(delbut);\n\t}\n\tlldom.appendChild(document.createTextNode(\"Latitude: \"));\n\tlldom.appendChild(lat);\n\tlldom.appendChild(document.createTextNode(\" °\" + \" \"));\n\tlldom.appendChild(document.createTextNode(\"  Longitude: \"));\n\tlldom.appendChild(long);\n\tlldom.appendChild(document.createTextNode(\" ° \" ));\n\treturn lldom;\n}\n\n\nHTMLCoordinateEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-coordinate\");\n\tinput.setAttribute('data-value', value);\n\ttry {\n\t\tvar parsed = (value ? JSON.parse(value) : false);\n\t}\n\tcatch(e){\n\t\tthis.error = this.type + \" failed to parse as json\", e.toString();\n\t\tvar parsed = false;\n\t}\n\tvar self = this;\n\tvar updateValueFromForm = function(){\n\t\tvar vals = [];\n\t\tfor(var i = 0; i<self.inputs.length; i++){\n\t\t\tif(self.inputs[i][0].value && self.inputs[i][1].value){\n\t\t\t\tvar val = \"[\" + self.inputs[i][0].value + \",\" + self.inputs[i][1].value + \"]\";\n\t\t\t\tvals.push(val);\n\t\t\t}\n\t\t}\n\t\tif(vals.length == 0){\n\t\t\tframe.set(\"\");\n\t\t}\n\t\telse if(this.type == \"xdd:coordinate\"){\n\t\t\tframe.set(vals[0]);\n\t\t}\n\t\telse {\n\t\t\tvar op = \"[\";\n\t\t\tfor(var i = 0; i<vals.length; i++){\n\t\t\t\top += vals[i];\n\t\t\t\tif(i+1 < vals.length) op += \",\";\n\t\t\t}\n\t\t\top += \"]\";\n\t\t\tframe.set(op);\n\t\t}\n\t};\n\tif(!parsed){\n\t\tif(this.type == \"xdd:coordinate\") parsed = [\"\",\"\"];\n\t\telse {\n\t\t\tparsed = [[\"\",\"\"],[\"\",\"\"]];\n\t\t\tif(this.type == \"xdd:coordinatePolygon\") parsed.push([\"\",\"\"]);\n\t\t}\n\t}\n\tif(this.type == \"xdd:coordinate\"){\n\t\tparsed = [parsed];\n\t}\n\tfor(var i = 0; i < parsed.length; i++){\n\t\tthis.inputs.push(this.getInputDOMs(parsed[i][0], parsed[i][1], updateValueFromForm))\n\t}\n\tvar lldoms = document.createElement(\"span\");\n\tfor(var i = 0; i < this.inputs.length; i++){\n\t\tvar lldom = this.getLatLongDOM(this.inputs[i][0], this.inputs[i][1], this.type, i, lldoms);\n\t\tlldoms.appendChild(lldom);\n\t}\n\tinput.appendChild(lldoms);\n\tvar self = this;\n\tif(this.type != \"xdd:coordinate\"){\n\t\tvar butspan = document.createElement(\"span\");\n\t\tbutspan.setAttribute(\"class\", \"terminus-add-coordinate\")\n\t\tvar addbut = document.createElement(\"button\");\n\t\taddbut.setAttribute(\"class\", \"terminus-add-coordinate\");\n\t\taddbut.appendChild(document.createTextNode(\"Add\"));\n\t\taddbut.addEventListener(\"click\", function(){\n\t\t\tvar ipdoms = self.getInputDOMs(\"\", \"\", updateValueFromForm);\n\t\t\tvar lldom = self.getLatLongDOM(ipdoms[0], ipdoms[1], this.type, self.inputs.length, lldoms);\n\t\t\tlldoms.appendChild(lldom);\n\t\t\tself.inputs.push(ipdoms);\n\t\t});\n\t\tbutspan.appendChild(addbut);\n\t\tinput.appendChild(butspan);\t\t\t\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLCoordinateEditor}","const DateHelper = require('./DateHelper');\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLDateViewer(options){\n\tthis.max = (options && options.max ? options.max : false);\n\tthis.min = (options && options.min ? options.min : false);\n\tthis.allowbce = (options && options.allowbce ? options.allowbce : false);\n\tthis.date_spacer = \"/\";\n\tthis.time_spacer = \":\";\n\tthis.datetime_separator = \", \";\n\tthis.helper = new DateHelper.HTMLDateHelper();\n}\n\nHTMLDateViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLDateViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\nHTMLDateViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-date\");\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tvar parsed = TerminusClient.FrameHelper.parseDate(this.type, value);\n\t\tvar datepart = this.getDateComponentDOM(parsed);\n\t\tvar timepart = this.getTimeComponentDOM(parsed);\n\t\tif(timepart) input.appendChild(timepart);\n\t\tif(timepart && datepart) input.appendChild(document.createTextNode(this.datetime_separator));\n\t\tif(datepart) input.appendChild(datepart);\n\t}\n\treturn input;\n}\n\nHTMLDateViewer.prototype.getTimeComponentDOM = function(parsed, ty){\n\tvar hdom = (parsed.hour ? document.createElement(\"span\") : false);\n\tif(hdom){\n\t\thdom.setAttribute(\"class\", \"terminus-time-hour\");\n\t\thdom.appendChild(document.createTextNode(parsed.hour));\n\t}\n\tvar mdom = (typeof parsed.minute != \"undefined\" ? document.createElement(\"span\") : false);\n\tif(mdom){\n\t\tmdom.setAttribute(\"class\", \"terminus-time-minute\");\n\t\tvar mlab = (parsed.minute < 10 ? parsed.minute : parsed.minute);\n\t\tmdom.appendChild(document.createTextNode(mlab));\n\t}\n\tvar sdom = (typeof parsed.second != \"undefined\" ? document.createElement(\"span\") : false);\n\tif(sdom){\n\t\tsdom.setAttribute(\"class\", \"terminus-time-second\");\n\t\tvar slab = (parsed.second < 10 ? parsed.second : parsed.second);\n\t\tsdom.appendChild(document.createTextNode(slab));\n\t}\n\tvar tz = (parsed.timezone ? document.createElement(\"span\") : false);\n\tif(tz){\n\t\tsdom.setAttribute(\"class\", \"terminus-time-timezone\");\n\t\tsdom.appendChild(document.createTextNode(parsed.timezone));\n\t}\n\tif(hdom || mdom || sdom || tz){\n\t\tvar dadom = document.createElement(\"span\");\n\t\tdadom.setAttribute(\"class\", \"terminus-time-components time-\"+ty);\n\t\tif(hdom) dadom.appendChild(hdom); \n\t\tif(mdom) {\n\t\t\tif(hdom) dadom.appendChild(document.createTextNode(this.time_spacer));\n\t\t\tdadom.appendChild(mdom); \n\t\t}\n\t\tif(sdom) {\n\t\t\tif(mdom || hdom) dadom.appendChild(document.createTextNode(this.time_spacer));\n\t\t\tdadom.appendChild(sdom); \n\t\t}\n\t\tif(tz){\n\t\t\tdadom.appendChild(document.createTextNode(\" (Timezone: \")); \n\t\t\tdadom.appendChild(sdom); \n\t\t\tdadom.appendChild(document.createTextNode(\")\")); \t\t\t\n\t\t}\n\t\treturn dadom;\n\t}\n\treturn false;\n}\n\nHTMLDateViewer.prototype.getDateComponentDOM = function(parsed, ty){\n\tvar ydom = (parsed.year ? document.createElement(\"span\") : false);\n\tif(ydom){\n\t\tydom.setAttribute(\"class\", \"terminus-date-year\");\n\t\tydom.appendChild(document.createTextNode(parsed.year));\n\t}\n\tvar mdom = (parsed.month ? document.createElement(\"span\") : false);\n\tif(mdom){\n\t\tmdom.setAttribute(\"class\", \"terminus-date-month\");\n\t\tmdom.appendChild(document.createTextNode(this.helper.getMonthName(parsed.month)));\t\t\n\t}\n\tvar ddom = (parsed.day ? document.createElement(\"span\") : false );\n\tif(ddom){\n\t\tddom.setAttribute(\"class\", \"terminus-date-day\");\n\t\tddom.appendChild(document.createTextNode(parsed.day));\t\t\n\t}\n\tif(ydom || mdom || ddom){\n\t\tvar dadom = document.createElement(\"span\");\n\t\tif(ddom) dadom.appendChild(ddom); \n\t\tif(mdom) {\n\t\t\tif(ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(mdom); \n\t\t}\n\t\tif(ydom) {\n\t\t\tif(mdom || ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(ydom); \n\t\t}\n\t\treturn dadom;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLDateViewer}","function HTMLDateHelper(){\n\tthis.months = [\"January\", \"Februrary\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n}\n\nHTMLDateHelper.prototype.getMonthName = function(num){\n\treturn this.months[num-1];\n}\n\nmodule.exports={HTMLDateHelper}","const DateHelper = require('./DateHelper');\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLDateEditor(options){\n\tthis.max = (options && options.max ? options.max : false);\n\tthis.min = (options && options.min ? options.min : false);\n\tthis.allowbce = (options && options.allowbce ? options.allowbce : false);\n\tthis.date_spacer = \"/\";\n\tthis.time_spacer = \":\";\n\tthis.datetime_separator = \", \";\n\tthis.helper = new DateHelper.HTMLDateHelper();\n}\n\nHTMLDateEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-date\");\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tthis.parsed = TerminusClient.FrameHelper.parseDate(this.type, value);\n\t}\n\telse this.parsed = {};\n\tvar datepart = this.getDateComponentDOM(this.parsed, this.type, frame);\n\tvar timepart = this.getTimeComponentDOM(this.parsed, this.type, frame);\n\tif(timepart) input.appendChild(timepart);\n\tif(timepart && datepart) input.appendChild(document.createTextNode(this.datetime_separator));\n\tif(datepart) input.appendChild(datepart);\n\treturn input;\n}\n\nHTMLDateEditor.prototype.set = function(part, val, frame, ty){\n\tthis.parsed[part] = val;\n\tvar xsd = TerminusClient.FrameHelper.xsdFromParsed(this.parsed, ty);\n\tif(xsd){\n\t\tframe.set(xsd);\n\t}\n}\n\nHTMLDateEditor.prototype.getTimeComponentDOM = function(parsed, ty, frame){\n\tif([\"xsd:dateTime\", \"xsd:dateTimeStamp\", \"xsd:time\"].indexOf(ty) == -1){\n\t\treturn false;\n\t}\n\tvar self = this;\n\tvar hdom = document.createElement(\"input\");\n\thdom.setAttribute(\"class\", \"terminus-hour-input terminus-hour-\"+ty);\n\thdom.setAttribute(\"size\", 2);\n\thdom.setAttribute(\"placeholder\", \"HH\");\n\thdom.value = (parsed.hour ? parsed.hour : \"\");\n\thdom.addEventListener(\"input\", function(){\n\t\tself.set(\"hour\", this.value, frame, ty);\n\t});\n\tvar mdom = document.createElement(\"input\");\n\tmdom.setAttribute(\"class\", \"terminus-minute-input terminus-minute-\"+ty);\n\tmdom.setAttribute(\"size\", 2);\n\tmdom.setAttribute(\"placeholder\", \"MM\");\n\tmdom.value = (parsed.minute ? parsed.minute: \"\");\n\tmdom.addEventListener(\"input\", function(){\n\t\tself.set(\"minute\", this.value, frame, ty);\n\t});\n\tvar sdom = document.createElement(\"input\");\n\tsdom.setAttribute(\"class\", \"terminus-second-input terminus-second-\"+ty);\n\tsdom.setAttribute(\"size\", 8);\n\tsdom.setAttribute(\"placeholder\", \"SS.sss...\");\n\tsdom.value = (parsed.second ? parsed.second: \"\");\n\tsdom.addEventListener(\"input\", function(){\n\t\tself.set(\"second\", this.value, frame, ty);\n\t})\n\tvar tdom = document.createElement(\"span\");\n\ttdom.appendChild(hdom);\n\ttdom.appendChild(document.createTextNode(this.time_spacer));\n\ttdom.appendChild(mdom);\n\ttdom.appendChild(document.createTextNode(this.time_spacer));\n\ttdom.appendChild(sdom);\n\treturn tdom;\n}\n\nHTMLDateEditor.prototype.getDateComponentDOM = function(parsed, ty, frame){\n\tvar self = this;\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:gYear\", \"xsd:gYearMonth\", \"xsd:dateTimeStamp\"].indexOf(ty) != -1){\n\t\tvar ydom = document.createElement(\"input\");\n\t\tydom.setAttribute(\"class\", \"terminus-year-input terminus-year-\"+ty);\n\t\tydom.setAttribute(\"size\", 6);\n\t\tydom.setAttribute(\"placeholder\", \"YYYY\");\n\t\tydom.value = (parsed.year ? parsed.year : \"\");\n\t\tydom.addEventListener(\"input\", function(){\n\t\t\tself.set(\"year\", this.value, frame, ty);\n\t\t})\n\t}\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:gYearMonth\", \"xsd:dateTimeStamp\", \"xsd:gMonth\", \"xsd:gMonthDay\"].indexOf(ty) != -1){\n\t\tvar mdom = document.createElement(\"select\");\n\t\tmdom.setAttribute(\"class\", \"terminus-month-input terminus-month-\"+ty);\n\t\tfor(var i = 0; i<this.helper.months.length; i++){\n\t\t\tvar opdom = document.createElement(\"option\");\n\t\t\topdom.value = i+1;\n\t\t\topdom.appendChild(document.createTextNode(this.helper.months[i]));\n\t\t\tif(parsed.month && parsed.month == i+1){\n\t\t\t\topdom.selected = true;\n\t\t\t}\n\t\t\tmdom.appendChild(opdom);\n\t\t}\n\t\tmdom.addEventListener(\"change\", function(){\n\t\t\tself.set(\"month\", this.value, frame, ty);\n\t\t})\n\t}\t\n\tif([\"xsd:date\", \"xsd:dateTime\", \"xsd:dateTimeStamp\", \"xsd:gDay\", \"xsd:gMonthDay\"].indexOf(ty) != -1){\n\t\tvar ddom = document.createElement(\"input\");\n\t\tddom.setAttribute(\"class\", \"terminus-day-input terminus-day-\"+ty);\n\t\tddom.setAttribute(\"size\", 2);\n\t\tddom.setAttribute(\"placeholder\", \"DD\");\n\t\tddom.value = (parsed.day ? parsed.day : \"\");\t\n\t\tddom.addEventListener(\"input\", function(){\n\t\t\tself.set(\"day\", this.value, frame, ty);\n\t\t})\n\t}\t\n\tif(ydom || mdom || ddom){\n\t\tvar dadom = document.createElement(\"span\");\n\t\tif(ddom) dadom.appendChild(ddom); \n\t\tif(mdom) {\n\t\t\tif(ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(mdom); \n\t\t}\n\t\tif(ydom) {\n\t\t\tif(mdom || ddom) dadom.appendChild(document.createTextNode(this.date_spacer));\n\t\t\tdadom.appendChild(ydom); \n\t\t}\n\t\treturn dadom;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLDateEditor}","const HTMLFrameHelper = require('../HTMLFrameHelper');\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLEntityViewer(options){\n\tthis.onclick = false;\n}\n\nHTMLEntityViewer.prototype.renderFrame = function(frame, dataviewer){\n\t//this.client = dataviewer.getClient();\n\treturn this.render(frame.get());\t\n}\n\nHTMLEntityViewer.prototype.renderValue = function(dataviewer){\n\t//this.client = dataviewer.getClient();\n\treturn this.render(dataviewer.value());\n}\n\nHTMLEntityViewer.prototype.render = function(value){\n\t//var value = TerminusClient.FrameHelper.unshorten(value);\n\tvar holder = document.createElement(\"span\");\n\tholder.setAttribute(\"class\", \"terminus-literal-value terminus-entity-reference-value\");\n\tvar self = this;\n\tif(this.holder){\n\t\treturn this.holder;\n\t}\n\tif(value){\n\t\tvar dom = this.showValue(value)\n\t\tholder.appendChild(dom);\n\t}\n\treturn holder;\n}\n\nHTMLEntityViewer.prototype.showValue = function(value){\n\treturn document.createTextNode(value);\n}\n\n\nHTMLEntityViewer.prototype.getEntityViewHTML = function(value, frame, dataviewer){\n\tvar span = document.createElement(\"span\");\n\tvar self = this;\n\tspan.setAttribute(\"class\", \"terminus-internal-link\");\n\tspan.appendChild(dataviewer.internalLink(value));\n\tif(controller = renderer.getController()){\n\t\tcontroller.getInstanceMeta(value).then(function(response){\n\t\t\tvar lab = self.getEntityLabel(value, response, dataviewer);\n\t\t\tif(lab){ \n\t\t\t\tTerminusClient.FrameHelper.removeChildren(span);\n\t\t\t\tspan.appendChild(lab);\n\t\t\t}\t\n\t\t});\n\t}\n\treturn span;\n}\n\nHTMLEntityViewer.prototype.getEntityLabel = function(url, response, dv){\n\tvar nspan = document.createElement(\"span\");\n\tif(response && (il = HTMLFrameHelper.getVariableValueFromBinding(\"InstanceLabel\", response))){\n\t\tnspan.appendChild(dv.internalLink(url, il));\n\t\tvar rt = HTMLFrameHelper.getVariableValueFromBinding(\"InstanceType\", response);\n\t\tvar tit = url + \" Type: \" + rt;\n\t\tvar ic = HTMLFrameHelper.getVariableValueFromBinding(\"InstanceComment\", response);\n\t\tif(typeof ic == \"object\" && ic[\"@value\"]){\n\t\t\ttit += \" \" + ic[\"@value\"];\n\t\t}\n\t\tnspan.setAttribute(\"title\", tit);\n\t\treturn nspan;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLEntityViewer}","function HTMLEntityEditor(options){}\nHTMLEntityEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar input = document.createElement(\"input\");\n\tinput.setAttribute(\"class\", \"terminus-literal-value terminus-entity-reference-value\");\n\tinput.setAttribute(\"type\", \"text\");\n\tinput.setAttribute('size', 80);\n\tinput.value = value;\n\tvar self = this;\n\tinput.addEventListener(\"change\", function(){\n\t\tvar url = this.value;\n\t\tif(url.indexOf(\"/\") == -1 && url.indexOf(\":\") == -1){\n\t\t\turl = \"doc:\" + url;\n\t\t}\n\t\tframe.set(url);\n\t});\n\treturn input;\n}\n\nmodule.exports={HTMLEntityEditor}","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLImageViewer(options){}\n\nHTMLImageViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLImageViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\t\nHTMLImageViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-image-value\");\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tvar img = document.createElement(\"a\");\n\t\timg.setAttribute('src', value);\n\t\tinput.appendChild(img);\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLImageViewer}\n\n\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLImageEditor(options){}\nHTMLImageEditor.prototype.renderFrame = function(frame, dataviewer){\n\tif(this.type == \"xsd:base64Binary\"){\n\t\tvar input = document.createElement(\"textarea\");\n\t\tinput.setAttribute('class', \"terminus-literal-value terminus-literal-b64image-value\");\n\t\tinput.value = value;\n\t\tinput.addEventListener(\"change\", function(){\n\t\t\tframe.set(this.value);\n\t\t});\n\t\treturn input;\n\t}\n\treturn false;\n}\n\nmodule.exports={HTMLImageEditor}","function HTMLLinkViewer(options){\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n}\n\nHTMLLinkViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLLinkViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\t\nHTMLLinkViewer.prototype.render = function(value){\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', this.css);\n\tinput.setAttribute('size', 80);\n\tinput.setAttribute('data-value', value);\n\tif(value){\n\t\tvar a = document.createElement(\"a\");\n\t\ta.setAttribute('href', value);\n\t\ta.appendChild(document.createTextNode(value));\n\t\tinput.appendChild(a);\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLLinkViewer}\n\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLNumberViewer(options){\n\tthis.commas = (options && options.commas ? options.commas : true);\n}\n\nHTMLNumberViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLNumberViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\t\nHTMLNumberViewer.prototype.render = function(value){\n\tif(value === 0) value = \"0\";\n\tvar input = document.createElement(\"span\");\n\tinput.setAttribute('class', 'terminus-number-value terminus-literal-value');\n\tinput.setAttribute('data-value', value);\n\tvalue = (this.commas ? TerminusClient.FrameHelper.numberWithCommas(value) : value);\n\tinput.appendChild(document.createTextNode(value));\n\treturn input;\n}\n\nmodule.exports={HTMLNumberViewer}\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLRangeViewer(options){\n\tthis.commas = (options && options.commas ? options.commas : true);\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n\tthis.delimiter = (options && options.delimiter ? options.delimiter : false);\n}\n\nHTMLRangeViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nHTMLRangeViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\t\nHTMLRangeViewer.prototype.render = function(value){\n\tvar vals = TerminusClient.FrameHelper.parseRangeValue(value, this.delimiter);\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", this.css);\n\tvar rvals = document.createElement(\"span\");\n\trvals.setAttribute(\"class\", \"terminus-range-value-left\");\n\tvar svals = document.createElement(\"span\");\n\tsvals.setAttribute(\"class\", \"terminus-range-value-right\");\n\tvar x = (this.useCommas() ? TerminusClient.FrameHelper.numberWithCommas(vals[0]) : vals[0]);\n\tvar tnode = document.createTextNode(x);\n\trvals.appendChild(tnode);\n\td.appendChild(rvals);\t\n\tif(vals.length == 2){\n\t\td.appendChild(getRangeSymbolDOM());\n\t\tvar x2 = (this.useCommas(renderer) ? TerminusClient.FrameHelper.numberWithCommas(vals[1]) : vals[1]);\n\t\tvar t2node = document.createTextNode(x2);\n\t\tsvals.appendChild(t2node);\n\t\td.appendChild(svals);\t\n\t}\n\treturn d;\n}\n\nHTMLRangeViewer.prototype.useCommas = function(){\n\tif([\"xdd:gYearRange\", \"xdd:dateRange\"].indexOf(this.type) != -1) return false;\n\treturn this.commas;\n}\n\nfunction getRangeSymbolDOM(){\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", \"terminus-range-indicator\");\n\td.setAttribute(\"title\", \"The value is uncertain, it lies somewhere in this range\");\n\td.appendChild(document.createTextNode(\" ... \"));\n\treturn d;\n}\n\nmodule.exports={HTMLRangeViewer}\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLRangeEditor(options){\n\tthis.commas = (options && options.commas ? options.commas : true);\n\tthis.css = \"terminus-literal-value terminus-literal-value-range \" + ((options && options.css) ?  options.css : \"\");\n\tthis.delimiter = (options && options.delimiter ? options.delimiter : false);\n}\n\nHTMLRangeEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar vals = TerminusClient.FrameHelper.parseRangeValue(value, this.delimiter);\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", this.css);\n\tvar rvals = document.createElement(\"span\");\n\tvar svals = document.createElement(\"span\");\n\tvar data1 = (vals.length > 0 ? vals[0] : \"\");\n\tvar data2 = (vals.length > 1 ? vals[1] : \"\");\n\tvar firstip = document.createElement(\"input\");\n\tfirstip.setAttribute('type', \"text\");\n\tfirstip.setAttribute('size', 16);\n\tif(data1){\n\t\tfirstip.value = data1;\n\t}\n\tvar secondip = document.createElement(\"input\");\n\tsecondip.setAttribute('type', \"text\");\n\tsecondip.setAttribute('size', 16);\n\tif(data2){\n\t\tthis.showing_range = true;\n\t\tsecondip.value = data2;\n\t}\n\trvals.appendChild(firstip);\n\td.appendChild(rvals);\t\n\tif(this.showing_range){\n\t\tsvals.appendChild(getRangeSymbolDOM());\n\t\tsvals.appendChild(secondip);\n\t}\n\td.appendChild(svals);\t\n\tvar but = document.createElement(\"button\");\n\tbut.setAttribute(\"class\", \"terminus-change-range\");\n\tvar txt = this.showing_range ? \"Change to Simple Value\" : \"Change to Uncertain Range\";\n\tbut.appendChild(document.createTextNode(txt));\n\td.appendChild(but);\t\n\tvar self = this;\n\tbut.addEventListener(\"click\", function(){\n\t\tif(self.showing_range){\n\t\t\tself.showing_range = false;\n\t\t\tsecondip.value = \"\";\t\t\t\t\n\t\t\tTerminusClient.FrameHelper.removeChildren(svals);\n\t\t}\n\t\telse {\n\t\t\tself.showing_range = true;\n\t\t\tsecondip.value = \"\";\t\t\t\t\n\t\t\tsvals.appendChild(getRangeSymbolDOM());\n\t\t\tsvals.appendChild(secondip);\n\t\t}\n\t\tvar txt = self.showing_range ? \"Change to Simple Value\" : \"Change to Uncertain Range\";\n\t\tbut.innerText = txt;\n\t\tchangeHandler();\n\t});\n\tvar changeHandler = function(){\n\t\tif(self.showing_range && secondip.value){\n\t\t\tif(firstip.value) frame.set(\"[\" + firstip.value + \",\" + secondip.value + \"]\");\t\t\t\t\n\t\t\telse frame.set(secondip.value);\t\t\t\t\n\t\t}\n\t\telse {\n\t\t\tframe.set(firstip.value);\n\t\t}\n\t}\n\tfirstip.addEventListener(\"change\", changeHandler);\n\tsecondip.addEventListener(\"change\", changeHandler);\n\treturn d;\n}\n\nfunction getRangeSymbolDOM(){\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", \"terminus-range-indicator\");\n\td.setAttribute(\"title\", \"The value is uncertain, it lies somewhere in this range\");\n\td.appendChild(document.createTextNode(\" ... \"));\n\treturn d;\n}\n\nmodule.exports={HTMLRangeEditor}\n","const GoogleMapHelper = require(\"./GoogleMapHelper\")\nconst TerminusClient = require('@terminusdb/terminus-client');\nfunction GoogleMapEditor(options){}\n\nGoogleMapEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar mapcontainer = document.createElement(\"div\");\n\tmapcontainer.setAttribute('class', \"gmap-window gmap-editor\");\n\tvar self = this;\n\tvar ghelper = new GoogleMapHelper();\n\tvar map = ghelper.initMap(mapcontainer, value, this.type);\n    if(ty == \"xdd:coordinate\"){\n\t    google.maps.event.addListener(map, 'click', function(event) {\n\t    \tvar position = event.latLng;\n\t    \tvar coo = \"[\" + position.lat() + \",\" + position.lng() + \"]\";\n\t    \trenderer.set(coo);\n\t        ghelper.clearMarkers();\n\t        var init = {\n\t    \t\tposition: position, \n\t    \t\tmap: map\n\t    \t}\n\t    \tvar marker = new google.maps.Marker(init);\n\t    \tghelper.markers.push(marker);\n\t  \t});\n\t}\n    else {\n    \tgoogle.maps.event.addListener(map, 'click', function(event) {\n        \tvar path = ghelper.polyline.getPath();\n        \tpath.push(event.latLng);\n      \t    var position = event.latLng;\n      \t    ghelper.addMarker(position, map, frame, '#' + path.getLength(), this.type);\n      \t});\n    }\n    return mapcontainer;\n}\n\nmodule.exports={GoogleMapEditor};","function GoogleMapHelper(options){\n\tthis.polygon = false;\n\tthis.polyline = false;\n\tthis.markers = [];\n\tthis.init(options);\n}\n\nGoogleMapHelper.prototype.init = function(config){\n\tthis.type = ((config && config.type) ? config.type: 'Shape'); \n\tthis.width = ((config && config.width) ? config.width : '400px'); \n\tthis.height = ((config && config.height ) ? config.height : '400px'); \n\tthis.mapLat = ((config && config.mapLat) ? config.mapLat : '41.9010004'); \n\tthis.mapLong = ((config && config.mapLong ) ? config.mapLong : '12.500061500000015');\n\tthis.zoom = ((config && config.zoom) ? config.zoom : 3);\n\tthis.stroke = ((config && config.stroke) ? config.stroke : { color: '#FF0000', opacity: 0.3, weight: 3});\n\tthis.fill = ((config && config.fill) ? config.fill : { color: '#FF0000', opacity: 0.1});\n\tthis.line = ((config && config.line) ? config.line : { color: '#000000', opacity: 0.9, weight: 3});\n}\n\nGoogleMapHelper.prototype.destroy = function(){\n    this.clear();\n} \n\nGoogleMapHelper.prototype.translatePolygonToArray = function(polygon){\n   var data = \"[\";\n   var vertices = polygon.getPath();\n   var seenValue = false;\n   for (var j=0; j<vertices.getLength(); j++){\n       if(seenValue){\n           data = data + \",\";\n       }\n       var xy = vertices.getAt(j);\n       data = data + \"[\" + xy.lat() + \",\" + xy.lng() + \"]\"\n       seenValue = true;\n   }\n   data = data + \"]\";\n   return data;\n};\n\nGoogleMapHelper.prototype.translateArrayToPolygon = function(array){\n   var jsonified = JSON.parse(array);\n   var output = [];\n   for(var i=0;i<jsonified.length;i++){\n       var latlong = {}\n       latlong.lat = jsonified[i][0];\n       latlong.lng = jsonified[i][1];\n       output.push(latlong);\n   }\n   return output;\n}\n\nGoogleMapHelper.prototype.createPolygon = function(coords, map) {\n\tvar polygon = new google.maps.Polygon({\n        paths: coords,\n        strokeColor: this.stroke.color,\n        strokeOpacity: this.stroke.opacity,\n        strokeWeight: this.stroke.weight,\n        fillColor: this.fill.color,\n        fillOpacity: this.fill.opacity\n\t});\n    polygon.setMap(map);\n\treturn polygon;\n}\n\nGoogleMapHelper.prototype.createPolyline = function(coords){\n\tvar init = {\n\t      strokeColor: this.line.color,\n\t      strokeOpacity: this.line.opacity,\n\t      strokeWeight: this.line.weight\n\t};\n\tif(coords){\n\t\tinit.paths = coords;\n\t}\n\tvar poly = new google.maps.Polyline(init);\n\treturn poly;\n}\n\nGoogleMapHelper.prototype.clearMarkers = function() {\n\tfor (var i = 0; i < this.markers.length; i++ ) {\n\t\tthis.markers[i].setMap(null);\n\t}\n\tthis.markers.length = 0;\n}\n\n\nGoogleMapHelper.prototype.addMarker = function(position, map, frame, title, ty) {\n\tvar init = {\n\t\tposition: position, \n\t\tmap: map\n\t}\n\tif(title){\n\t\tinit.title = title;\n\t}\n\tvar marker = new google.maps.Marker(init);\n\tvar self = this;\n\tif(this.markers.length == 0 && ty == \"xdd:coordinatePolygon\"){\n     \tmarker.addListener('click', function() {\n\t\t\tvar coords = self.getCoordsFromMarkers();\n    \t\tself.polygon = self.createPolygon(coords, map);\n            self.clearMarkers();\n            self.polyline.setMap(null);\n            frame.set(self.translatePolygonToArray(self.polygon));\n        });                \t\n    }\n\tthis.markers.push(marker);\n\tif(ty == \"xdd:coordinatePolyline\"){\n\t\tvar x = this.translatePolygonToArray(this.polyline);\n\t\tframe.set(x);\n\t}\n\treturn marker;\n}\n\nGoogleMapHelper.prototype.getCoordsFromMarkers = function(){\n\treturn this.polyline.getPath();\n}\n\nGoogleMapHelper.prototype.clear = function(){\n\tif(this.polygon) {\n\t\tthis.polygon.setMap(null);\n\t\tthis.polygon = false;\n\t}\n\tif(this.polyline) {\n\t\tthis.clearMarkers();\n\t\tthis.polyline.setMap(null);\n\t}\n}\n\nGoogleMapHelper.prototype.initMap = function(mapContainer, value, type){\n\tmapContainer.style.width = this.width;\n\tmapContainer.style.height = this.height;\n\tif(typeof google == \"undefined\"){\n\t\talert(\"google is not effing loaded\");\n\t\treturn false;\n\t}\n\tvar map = new google.maps.Map(mapContainer, {\n\t    zoom: this.zoom,\n\t\tcenter: {lat: parseFloat(this.mapLat), lng: parseFloat(this.mapLong)}  \n\t});\n\tif(type == \"xdd:coordinatePolygon\"){\n\t    this.polyline = this.createPolyline();\n\t\tthis.polyline.setMap(map);\n\t\tvar coords = (value ? this.translateArrayToPolygon(value) : []);\n\t\tif(value){\n\t    \tthis.polygon = this.createPolygon(coords, map);\n\t    }\n\t}\n\telse if(type == \"xdd:coordinatePolyline\"){\n\t\tvar coords = (value ? this.translateArrayToPolygon(value) : []);\n\t    this.polyline = this.createPolyline();\n\t\tthis.polyline.setMap(map);\t\t\n\t\tif(value){\n\t    \tthis.polyline.setPath(coords);\n\t    }\n\t}\t\n\telse if(type == \"xdd:coordinate\"){\n\t\tif(value){\n\t\t\tthis.clearMarkers();\n            var lat = parseFloat(value.substring(1, value.indexOf(\",\")));\n\t\t\tvar long = parseFloat(value.substring(value.indexOf(\",\")+1, value.length-1));\n            var init = {\n            \tposition: {lat: lat, lng: long},\n        \t\tmap: map\n\t        }\n\t        var marker = new google.maps.Marker(init);\n\t        this.markers.push(marker);\n\t\t}\n\t}\n    google.maps.event.trigger(map, 'resize');\n    return map;\n}\n\nmodule.exports=GoogleMapHelper;","const GoogleMapHelper = require(\"./GoogleMapHelper\")\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction GoogleMapViewer(options){}\n\nGoogleMapViewer.prototype.renderFrame = function(frame, dataviewer){\n\treturn this.render(frame.get());\n}\n\nGoogleMapViewer.prototype.renderValue = function(dataviewer){\n\treturn this.render(dataviewer.value());\n}\n\t\nGoogleMapViewer.prototype.render = function(value){\n\tvar map = document.createElement(\"div\");\n\tmap.setAttribute('class', \"gmap-window gmap-viewer\");\n\tvar self = this;\n\tvar ghelper = new GoogleMapHelper();\n\tghelper.initMap(map, value, this.type);\t\t\n    return map;\n}\n\nmodule.exports={GoogleMapViewer};","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLMarkupEditor(options){}\n\nHTMLMarkupEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar input = document.createElement(\"div\");\n\tinput.setAttribute('class', \"html-wysiwyg\");\n\tvar inner = document.createElement(\"span\");\n\tinner.setAttribute('class', \"html-literal literal-value\");\n\tinner.innerHTML=value;\n\tinput.appendChild(inner);\n\tif(typeof Quill != \"undefined\"){\n\t\tvar quill = new Quill(inner, { theme: 'snow' });\n\t\tquill.on(\"text-change\", function(){\n\t\t\tframe.set(quill.root.innerHTML);\n\t\t});\n\t}\n\treturn input;\n}\n\nmodule.exports={HTMLMarkupEditor}","function S2EntityEditor(options){}\n\nS2EntityEditor.prototype.renderFrame = function(frame, dataviewer){\n\tvar value = frame.get();\n\tvar cls = frame.range();\n\tvar cback = frame.set;\n\tvar ctl = dataviewer.getClient();\n\tvar d2ch = new TerminusDocumentChooser(ctl, cls, value);\n\td2ch.change = function(val){\n\t\tframe.set(val);\n\t}\n\td2ch.view = \"label\";\n\tvar d2dom = d2ch.getAsDOM();\n\treturn d2dom;\n}\n\n\nmodule.exports={S2EntityEditor}","const TerminusClient = require('@terminusdb/terminus-client');\n\n\nfunction SimpleTable(){\n\tthis.holder = document.createElement(\"div\");\n}\n\nSimpleTable.prototype.options = function(options){\n\tfor(var k in options){\n\t\tthis[k] = options[k];\n\t}\n\treturn this;\n}\n\n\nSimpleTable.prototype.render = function(woqltable){\n\tif(woqltable) this.woqltable = woqltable;\n\tTerminusClient.FrameHelper.removeChildren(this.holder);\n\tvar ctls = this.getControlsDOM();\n\tvar tab = this.getTableDOM();\n\tif(ctls) this.holder.appendChild(ctls)\n\tthis.holder.appendChild(tab);\n\treturn this.holder;\n}\n\nSimpleTable.prototype.getControlsDOM = function(result){\n\tvar ctrls = document.createElement(\"span\");\n\tif(this.woqltable.config.pager()){\n\t\tvar paging = this.getPaging(result);\n\t\tif(paging) ctrls.appendChild(paging);\n\t}\n\treturn ctrls;\n}\n\nSimpleTable.prototype.getTableDOM = function(){\n\tconst columns = this.woqltable.getColumnsToRender();\n\tvar tab = document.createElement(\"table\");\n\ttab.setAttribute(\"class\", \"terminus-hover-table terminus-simple-table\");\n\tvar thead = this.getTableHeader(columns);\n\ttab.appendChild(thead);\n\tvar tbody = this.getTableBody(columns);\n\ttab.appendChild(tbody);\n\treturn tab;\n}\n\nSimpleTable.prototype.getTableHeader = function(cols){\n\tvar thead = document.createElement(\"thead\");\n\tvar thr = document.createElement(\"tr\");\n\tfor(var i = 0; i<cols.length; i++){\n\t\tvar th = this.getColumnHeader(cols[i]);\n\t\tthr.appendChild(th);\n\t}\n\tthead.appendChild(thr);\n\treturn thead;\n}\n\nSimpleTable.prototype.getColumnHeader = function(colid){\n\tvar th = document.createElement(\"th\");\n\tth.setAttribute('class', 'terminus-table-header-full-css');\n\tvar clab = this.woqltable.getColumnHeaderContents(colid);\n\tth.appendChild(clab);\n\treturn th;\n}\n\nSimpleTable.prototype.getTableBody = function(cols){\n\tvar tbody = document.createElement(\"tbody\");\n\twhile(row = this.woqltable.next()){\n\t\tvar tr = this.getHTMLRow(row, cols);\n\t\tif(tr) tbody.appendChild(tr);\n\t}\n\treturn tbody;\n}\n\nSimpleTable.prototype.getHTMLRow = function(row, cols){\n\tvar tr = document.createElement(\"tr\");\n\tfor(var i = 0; i<cols.length; i++){\n\t\tvar td = this.getCell(cols[i], row);\n\t\ttr.appendChild(td);\n\t}\n\tvar self = this;\n\tif(this.woqltable.hasRowClick(row)){\n\t\tvar rc = this.woqltable.getRowClick(row);\n\t\ttr.addEventListener(\"click\", function(){\n\t\t\trc(row);\n\t\t});\n\t\ttr.addEventListener(\"mouseover\", function(){\n\t\t\tthis.style.cursor = \"pointer\";\n\t\t});\n\t}\n\tif(this.woqltable.hasRowHover(row)){\n\t\tvar rc = this.woqltable.getRowHover(row);\n\t\ttr.addEventListener(\"mouseover\", function(){\n\t\t\trc(row);\n\t\t});\n\t}\n\treturn tr;\n}\n\nSimpleTable.prototype.getCell = function(key, row){\n\tvar td = document.createElement(\"td\");\n\tif(this.woqltable.hasCellClick(row, key)){\n\t\tvar rc = this.woqltable.getCellClick(row, key);\n\t\ttd.addEventListener(\"click\", function(){\n\t\t\trc(row);\n\t\t});\n\t\ttd.addEventListener(\"mouseover\", function(){\n\t\t\tthis.style.cursor = \"pointer\";\n\t\t});\n\t}\n\tif(this.woqltable.hasCellHover(row, key)){\n\t\tvar rc = this.woqltable.getCellHover(row, key);\n\t\ttr.addEventListener(\"mouseover\", function(){\n\t\t\trc(row);\n\t\t});\n\t}\n\tvar c = this.getCellData(key, row);\n\tif(c) td.appendChild(c);\n\treturn td;\n}\n\nSimpleTable.prototype.getCellData = function(key, row){\n\tvar renderer = this.woqltable.getRenderer(key, row);\n\tif(renderer && typeof renderer == \"function\"){\n\t\treturn renderer(row[key], key, row);\n\t}\n\telse if(renderer && typeof renderer == \"object\"){\n\t\treturn this.woqltable.renderValue(renderer, row[key], key, row);\n\t}\n\tvar val = row[key]\n\tif(val && val['@value']) val = val['@value'];\n\treturn document.createTextNode(val);\n}\n\nSimpleTable.prototype.getPaging = function(){\n\tif(this.woqltable.result.query.isPaged()){\n\t\tvar pdom = document.createElement(\"div\");\n\t\tpdom.setAttribute(\"class\", \"table-page-size\");\n\t\tif(this.woqltable.config.pagesize()) pdom.appendChild(this.getPageSize());\n\t\tif(this.woqltable.canChangePage()){\n\t\t\tvar pn = this.woqltable.result.query.getPage();\n\t\t\tif(pn > 2){\n\t\t\t\tpdom.appendChild(this.getFirst());\n\t\t\t}\n\t\t\tif(pn > 1){\n\t\t\t\tpdom.appendChild(this.getPrev(pn));\n\t\t\t}\n\t\t\tif(this.woqltable.config.page()) pdom.appendChild(this.getPageNumber(pn));\n\t\t\tpdom.appendChild(this.getNext(this.woqltable.result));\n\t\t}\n\t\treturn pdom;\n\t}\n}\n\nSimpleTable.prototype.getPageSize = function(){\n\tvar chunk = document.createElement(\"span\");\n\tchunk.setAttribute(\"class\", \"woql-table-pagesize\");\n\tclabel = document.createElement(\"span\");\n\tclabel.appendChild(document.createTextNode(\"Page Size\"));\n\tchunk.appendChild(clabel);\n\tif(this.woqltable.config.change_pagesize){\n\t\tvar ctl = document.createElement(\"input\");\n\t\tctl.setAttribute(\"size\", 6);\n\t\tvar self = this;\n\t\tctl.value = this.woqltable.getPageSize();\n\t\tctl.addEventListener(\"blur\", function(){\n\t\t\tvar pval = (this.value ? parseInt(this.value) : false);\n\t\t\tself.woqltable.setPageSize(pval);\n\t\t});\n\t\tchunk.appendChild(ctl);\n\t}\n\telse {\n\t\tchunk.appendChild(document.createTextNode(this.woqltable.getPageSize()));\n\t}\n\treturn chunk;\n}\n\nSimpleTable.prototype.getPageNumber = function(){\n\tvar ctl = document.createElement(\"input\");\n\tctl.setAttribute(\"size\", 4);\n\tctl.value = this.woqltable.result.query.getPage();\n\tvar self = this;\n\tctl.addEventListener(\"blur\", function(){\n\t\tvar pval = (this.value ? parseInt(this.value) : false);\n\t\tself.woqltable.setPage(pval);\n\t});\n\treturn ctl;\n}\n\nSimpleTable.prototype.getNext = function(result){\n\tvar ctl = document.createElement(\"button\");\n\tvar self = this;\n\tctl.appendChild(document.createTextNode(\"next\"));\n\tif(!this.woqltable.canAdvancePage(result)){\n\t\tctl.setAttribute(\"disabled\", \"disabled\");\n\t}\n\telse {\n\t\tctl.addEventListener(\"click\", function(){\n\t\t\tself.woqltable.nextPage();\n\t\t});\n\t}\n\treturn ctl;\n}\n\nSimpleTable.prototype.getPrev = function(result){\n\tvar ctl = document.createElement(\"button\");\n\tctl.appendChild(document.createTextNode(\"previous\"));\n\tvar self = this;\n\tif(!this.woqltable.canRetreatPage(result)){\n\t\tctl.setAttribute(\"disabled\", \"disabled\");\n\t}\n\telse {\n\t\tctl.addEventListener(\"click\", function(){\n\t\t\tself.woqltable.previousPage();\n\t\t});\n\t}\n\treturn ctl;\n}\n\nSimpleTable.prototype.getFirst = function(result){\n\tvar ctl = document.createElement(\"button\");\n\tctl.appendChild(document.createTextNode(\"first\"));\n\tvar self = this;\n\tif(!this.woqltable.canRetreatPage(result) || this.woqltable.getPage() <= 2){\n\t\tctl.setAttribute(\"disabled\", \"disabled\");\n\t}\n\telse {\n\t\tctl.addEventListener(\"click\", function(){\n\t\t\tself.woqltable.firstPage();\n\t\t});\n\t}\n\treturn ctl;\n}\n\nmodule.exports = SimpleTable;\n","const TerminusClient = require('@terminusdb/terminus-client');\nconst GraphResultsViewer = require('./GraphResultsViewer');\n\n\nfunction SimpleGraph(){\n\tthis.holder = document.createElement(\"div\");\n}\n\nSimpleGraph.prototype.setResult = function(result){\n\tthis.result = result;\n}\n\nSimpleGraph.prototype.render = function(wgraph){\n\tthis.graph = wgraph;\n\tTerminusClient.FrameHelper.removeChildren(this.holder);\n\t//var ctls = this.getControlsDOM(result);\n\tvar tab = this.getGraphDOM(this.result);\n\t//if(ctls) this.holder.appendChild(ctls)\n\tthis.holder.appendChild(tab);\n\treturn this.holder;\n}\n\n\nSimpleGraph.prototype.getGraphDOM = function(){\n\tthis.gviz = new GraphResultsViewer(this.graph.config);\n\tvar gdom = this.gviz.getAsDOM();\n\tvar h = this.graph.config.height() ? this.graph.config.height() : 800;\n\tvar w = this.graph.config.width() ? this.graph.config.width() : 800;\n\tgdom.setAttribute(\"style\", \"border: 1px solid #aaa; width: \" + w + \"px; height: \" + h + \"px; \" + this.graph.config.width() + \"px\");\n\tthis.gviz.setData(this.graph);\n\tthis.gviz.initDOM(gdom);\n\treturn gdom;\n}\n\nmodule.exports = SimpleGraph;\n","const TerminusClient = require('@terminusdb/terminus-client');\n\n\nfunction SimpleStream(){\t\n\tthis.holder = document.createElement(\"div\");\n}\n\nSimpleStream.prototype.options = function(options){\n\tfor(var k in options){\n\t\tthis[k] = options[k];\n\t}\n\treturn this;\n}\n\n\nSimpleStream.prototype.render = function(stream){\n\tif(stream) this.stream = stream;\n\tTerminusClient.FrameHelper.removeChildren(this.holder);\n\t//var ctls = this.getControlsDOM();\n\t//var tab = this.getTableDOM();\n\t//if(ctls) this.holder.appendChild(ctls)\n\t//this.holder.appendChild(tab);\n\treturn this.holder;\n}\n\nmodule.exports = SimpleStream;","function SimpleChooser(){}\n\nSimpleChooser.prototype.options = function(options){\n\tthis.options = options;\n\treturn this;\n}\n\nSimpleChooser.prototype.render = function(chooser){\n\tif(chooser) this.chooser = chooser;\n\tif(this.chooser.config.show_empty() == false && this.chooser.count() < 1) return false;\n\tvar ccdom = document.createElement(\"span\");\n\tccdom.setAttribute(\"class\", \"woql-chooser\");\n\tvar ccsel = document.createElement(\"select\");\n\tccsel.setAttribute(\"class\", \" woql-chooser\");\n\tvar self = this;\n\tccsel.addEventListener(\"change\", function(){\n\t\tself.chooser.set(this.value);\n\t});\n\tvar opts = [];\n\tif(this.chooser.config.show_empty()){\n\t\topts.push(this.getEmptyOption())\n\t}\n\twhile(choice = this.chooser.next()){\n\t\tvar opt = this.createOptionFromChoice(choice);\n\t\topts.push(opt);\n\t}\n\tfor(var i = 0; i<opts.length; i++){\n\t\tccsel.appendChild(opts[i]);\n\t}\n\tccdom.appendChild(ccsel);\n\treturn ccdom;\n}\n\nSimpleChooser.prototype.getEmptyOption = function(){\n\tvar choice = { id: \"\", label: this.chooser.config.show_empty()};\n\treturn this.createOptionFromChoice(choice);\n}\n\nSimpleChooser.prototype.createOptionFromChoice = function(choice){\n\tvar opt = document.createElement(\"option\");\n\topt.setAttribute(\"class\", \"terminus-woql-chooser-choice\");\n\topt.value = choice.id;\n\tif(choice.selected) opt.selected = true;\n\tif(typeof choice.label == \"string\"){\n\t\topt.appendChild(document.createTextNode(choice.label));\n\t}\n\telse if(choice.label){\n\t\topt.appendChild(choice.label);\n\t}\n\tif(choice.title){\n\t\topt.setAttribute(\"title\", choice.title);\n\t}\n\treturn opt;\n}\n\nmodule.exports = SimpleChooser;","const TerminusClient = require('@terminusdb/terminus-client');\nconst TerminusCodeSnippet = require('./query/TerminusCodeSnippet');\nconst UTILS = require('../Utils');\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\nconst TerminusFrame = require(\"../viewer/TerminusFrame\");\nconst Datatypes = require(\"./Datatypes\");\nconst SimpleFrameViewer = require(\"./document/SimpleFrameViewer\");\n\n\nfunction DocumentPane(client){\n\tthis.client = client;\n\tthis.container = document.createElement('span');\n    this.container.setAttribute('class', 'terminus-document-cont');\n}\n\nDocumentPane.prototype.loadDocument = function(docid, config){\n\tthis.docid = docid;\n\tthis.clsid = false;\n\tthis.view = config;\n\tthis.frame = new TerminusFrame(this.client).options(this.view);\n\tthis.frame.owner = this;\n\tthis.frame.setDatatypes(Datatypes.initialiseDataRenderers);\n\treturn this.frame.loadDocument(docid);\n}\n\nDocumentPane.prototype.loadClass = function(cls, config){\n\tthis.clsid = cls;\n\tthis.docid = false;\n\tthis.view = config;\n\tthis.frame = new TerminusFrame(this.client).options(this.view);\n\tthis.frame.owner = this;\n\tthis.frame.setDatatypes(Datatypes.initialiseDataRenderers);\n\treturn this.frame.loadDocumentSchema(cls).then(() => this.frame.document.fillFromSchema(\"_:\"));\n}\n\n\n\nDocumentPane.prototype.setClassLoader = function(cloader){\n\tthis.classLoader = cloader;\n\tif(this.queryPane){\n\t\tthis.queryPane.appendChild(this.classLoader);\n\t}\n\treturn this;\n}\n\nDocumentPane.prototype.options = function(opts){\n\tthis.showQuery = (opts && typeof opts.showQuery != \"undefined\" ? opts.showQuery : false);\n\tthis.showConfig = (opts && typeof opts.showConfig != \"undefined\" ? opts.showConfig : false);\n\tthis.editConfig = (opts && typeof opts.editConfig != \"undefined\" ? opts.editConfig : false);\n\tthis.intro = (opts && typeof opts.intro != \"undefined\" ? opts.intro : false);\n\tthis.defaultResultView = { showConfig: false, editConfig: false };\n\tthis.documentLoader = (opts && typeof opts.loadDocument != \"undefined\" ? opts.loadDocument : false);\n    return this;\n}\n\nDocumentPane.prototype.getQueryPane = function(){\n\tvar pane = document.createElement(\"div\");\n\tpane.setAttribute(\"class\", \"terminus-document-query\");\n\tif(this.documentLoader){\n\t\tpane.appendChild(this.documentLoader);\n\t}\n\tif(this.classLoader){\n\t\tpane.appendChild(this.classLoader);\n\t}\n\treturn pane;\n}\n\nDocumentPane.prototype.getAsDOM = function(){\n\tif(this.intro){\n\t\tthis.container.appendChild(UTILS.getHeaderDom(this.intro));\n\t}\n\tvar configspan = document.createElement(\"span\");\n\tconfigspan.setAttribute(\"class\", \"pane-config-icons\");\n\tthis.container.appendChild(configspan);\n\tif(this.showQuery && (this.documentLoader || this.classLoader)){\n\t\tvar ipdom = this.getQueryPane();\n\t\tvar ispan = document.createElement(\"span\");\n\t\tispan.setAttribute(\"class\", \"document-pane-config\");\n\t\tvar ic = document.createElement(\"i\");\n\t\tispan.appendChild(ic);\n\t\tconfigspan.appendChild(ispan);\n\t\tvar self = this;\n\t\tfunction showQueryConfig(){\n\t\t\tispan.title=\"Click to Hide Query\";\n\t\t\tic.setAttribute(\"class\", \"fas fa fa-times-circle\");\n\t\t\tif(configspan.nextSibling) self.container.insertBefore(ipdom, configspan.nextSibling);\n\t\t\telse self.container.appendChild(ipdom);\n\t\t}\n\t\tfunction hideQueryConfig(){\n\t\t\tispan.title=\"Click to View Query\";\n            ic.setAttribute(\"class\", \"fas fa fa-search\");\n\t\t\tself.container.removeChild(ipdom);\n\t\t}\n\t\tispan.addEventListener(\"click\", () => {\n\t\t\tif(this.showingQuery) hideQueryConfig();\n\t\t\telse showQueryConfig();\n\t\t\tthis.showingQuery = !this.showingQuery;\n\t\t});\n\t\tshowQueryConfig();\n\t\tif(this.showQuery == \"icon\") hideQueryConfig();\n\t\tthis.queryPane = ipdom;\n\t}\n\tif(this.showConfig){\n        this.showingConfig = (this.showConfig != \"icon\");\n\t\tvar mode = (this.editConfig ? \"edit\" : \"view\");\n\t\tthis.input = this.createInput(mode);\n\t\tvar ndom = this.input.getAsDOM();\n        var nspan = document.createElement(\"span\");\n        nspan.addEventListener('mouseover', function(){\n            this.style.cursor = \"pointer\";\n\t\t});\n\t\tnspan.setAttribute(\"class\", \"result-pane-config\");\n\t\tvar nc = document.createElement(\"i\");\n\t\tnspan.appendChild(nc);\n\t\tconfigspan.appendChild(nspan);\n\t\tvar self = this;\n\t\tfunction showDocConfig(){\n\t\t\tnspan.title=\"Click to Hide View Configuration\";\n\t\t\tnc.setAttribute(\"class\", \"fas fa fa-times-circle\");\n\t\t\tif(configspan.nextSibling) self.container.insertBefore(ndom, configspan.nextSibling);\n\t\t\telse self.container.appendChild(ndom);\n\t\t\t//stylize only after ta or pre have been appended\n\t\t\tif((self.input.snippet.value) || (self.input.snippet.innerHTML))\n\t\t\t\tself.input.stylizeSnippet();\n\t\t}\n\t\tfunction hideDocConfig(){\n\t\t\tnspan.title=\"Click to View Configuration\";\n            nc.setAttribute(\"class\", \"fas fa fa-vial\");\n\t\t\tself.container.removeChild(ndom);\n\t\t}\n\t\tnspan.addEventListener(\"click\", () => {\n\t\t\tif(this.showingConfig) hideDocConfig();\n\t\t\telse showDocConfig();\n\t\t\tthis.showingConfig = !this.showingConfig;\n        });\n        showDocConfig();\n\t\tif(this.showConfig == \"icon\") hideDocConfig();\n    }\n\tthis.resultDOM = document.createElement(\"span\");\n\tthis.resultDOM.setAttribute(\"class\", \"terminus-document-results\");\n\t//var form = (this.input.format == \"js\" ? \"javascript\" : \"json\");\n\t//UTILS.stylizeEditor(ui, this.input.snippet, {width: this.input.width, height: this.input.height}, form);\n\tthis.container.appendChild(this.resultDOM);\n\tthis.renderResult();\n\treturn this.container;\n}\n\nDocumentPane.prototype.renderResult = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.resultDOM);\n\tif(this.frame && this.frame.render){\n\t\tvar fpt = this.frame.render();\n\t\tif(fpt){\n\t\t\tthis.resultDOM.appendChild(fpt);\n\t\t}\n\t}\n}\n\nDocumentPane.prototype.loadRenderer = function(rendname, frame, args, termframe){\n\tvar evalstr = \"new \" + rendname + \"(\";\n\tif(args) evalstr += JSON.stringify(args);\n\tevalstr += \");\";\n\ttry {\n\t\tvar nr = eval(evalstr);\n\t\tnr.terminus = termframe;\n\t\treturn nr;\n\t}\n\tcatch(e){\n\t\tconsole.log(\"Failed to load \" + rendname + e.toString());\n\t\treturn false;\n\t}\n}\n\n\nDocumentPane.prototype.createInput = function(mode){\n    let input = new TerminusCodeSnippet(\"rule\", mode);\n    if(this.view){\n    \tinput.setQuery(this.view);\n\t}\n\tvar self = this;\n\tinput.submit = function(qObj){\n\t\tself.updateView(qObj);\n\t};\n\treturn input;\n}\n\nDocumentPane.prototype.updateView = function(docview){\n\tthis.view = docview;\n\tthis.frame.options(this.view);\n\tif(this.input) this.input.setQuery(this.view);\n\tthis.frame.applyRulesToDocument(this.frame.document, this.frame.config);\n\tthis.frame.renderer = this.frame.document;\n\tthis.renderResult();\n}\n\nDocumentPane.prototype.updateResult = function(result){\n\tthis.result = result;\n\tthis.updateQuery(result.query);\n\tthis.refreshViews();\n}\n\nDocumentPane.prototype.empty = function(){\n\treturn (typeof this.view == \"undefined\");\n}\n\nDocumentPane.prototype.clearMessages = function(){}\nDocumentPane.prototype.showError = function(){}\n\nDocumentPane.prototype.submitQuery = function(qObj){\n\tthis.clearMessages();\n\ttdv.owner = this;\n\ttdv.setDatatypes(Datatypes.initialiseDataRenderers);\n\ttdv.loadDocument(id).then(() => {\n\t\tlet dom = tdv.render();\n\t\tif(dom) holder.appendChild(dom);\n\t});\n\treturn holder;\n    this.query = qObj;\n    qObj.execute(this.client).then((results) => {\n\t\tvar r = new TerminusClient.WOQLResult(results, qObj);\n\t\tthis.result = r;\n\t\tthis.refreshViews();\n\t})\n}\n\nmodule.exports = DocumentPane;\n","const HTMLFrameHelper = require(\"../HTMLFrameHelper\");\n\nfunction SimpleFrameViewer(){\n}\n\nSimpleFrameViewer.prototype.getScope = function(frame){\n\tif(frame.isProperty()) return \"property\";\n\tif(frame.isObject()) return \"object\";\n\tif(frame.isData()) return \"data\";\n}\n\nSimpleFrameViewer.prototype.getDatatypeViewer = function(frame, mode){\n\tvar dv = frame.display_options.dataviewer;\n\tif(!dv){\n\t\tif(frame.isChoice()) var t = \"oneOf\";\n\t\telse if(frame.isDocument()) var t = \"document\";\n\t\telse t = frame.getType();\n\t\tif(mode && mode == \"edit\"){\n\t\t\tvar r = this.terminus.datatypes.getEditor(t);\n\t\t}\n\t\telse {\n\t\t\tvar r = this.terminus.datatypes.getRenderer(t);\n\t\t}\n\t\tdv = r.name;\n\t}\n\tif(frame.display_options.args){\n\t\tvar args = frame.display_options.args ;\n\t}\n\telse {\n\t\tif(r && r.args) args = r.args;\n\t\telse args = false;\n\t}\n\treturn this.terminus.datatypes.createRenderer(dv, args);\n}\n\nSimpleFrameViewer.prototype.render = function(frame){\n\tvar scope = this.getScope(frame);\n\tif(frame.display_options.header_features){\n\t\tvar hfeatures = this.getFeaturesDOM(frame.display_options.header_features, frame.display_options.feature_renderers, scope, frame, frame.display_options.mode)\n\t}\n\telse var hfeatures = false;\n\tif(frame.display_options.features){\n\t\tvar features = this.getFeaturesDOM(frame.display_options.features, frame.display_options.feature_renderers, scope, frame, frame.display_options.mode);\n\t}\n\telse var features = false;\n\tvar orient = (scope == \"object\" || scope == \"property\") ? \"page\" : \"line\";\n\tvar ndom = HTMLFrameHelper.getFrameDOM(scope, frame, orient, hfeatures, features);\n\tif(!ndom) return false;\n\tif(this.framedom){\n\t\tthis.framedom.replaceWith(ndom);\n\t}\n\tthis.framedom = ndom;\n\treturn this.framedom;\n}\t\n\nSimpleFrameViewer.prototype.getFeaturesDOM = function(flist, renderers, scope, frame, mode){\n\tvar features = document.createElement(\"span\");\n\tfeatures.setAttribute(\"class\", featuresToCSS(flist));\n\tfor(var i = 0; i<flist.length; i++){\n\t\tif(typeof flist[i] == \"object\"){\n\t\t\tfeatures.appendChild(this.getFeaturesDOM(flist[i], renderers, scope, frame));\n\t\t}\n\t\telse {\n\t\t\tif(renderers && renderers[flist[i]]){\n\t\t\t\tvar dom = renderers[flist[i]](frame, flist[i]);\n\t\t\t\tif(dom)\tfeatures.appendChild(dom);\n\t\t\t}\t\t\t\t\n\t\t\telse {\n\t\t\t\tif(flist[i] == \"value\" && scope == \"data\"){\n\t\t\t\t\tvar dv = this.getDatatypeViewer(frame, mode);\n\t\t\t\t\tif(dv) {\n\t\t\t\t\t\tvar dom = dv.renderFrame(frame, this);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar dom = document.createTextNode(frame.get());\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\tif(dom)\tfeatures.appendChild(dom);\n\t\t\t\t}\n\t\t\t\telse if(flist[i] == \"value\"){\n\t\t\t\t\tif(scope == 'object'){\n\t\t\t\t\t\tvar vals = frame.renderProperties();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar vals = frame.renderValues();\t\t    \n\t\t\t\t\t}\n\t\t\t\t    for(var j = 0; j<vals.length; j++){\n\t\t\t\t\t\tfeatures.appendChild(vals[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar dom = HTMLFrameHelper.getFeatureDOM(flist[i], scope, frame);\n\t\t\t\t\tif(dom)\tfeatures.appendChild(dom);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn features;\n}\n\nfunction featuresToCSS(flist){\n\tvar s = \"\";\n\tfor(var i = 0; i<flist.length; i++){\n\t\tif(typeof flist[i] == \"object\"){\n\t\t\ts += featuresToCSS(flist[i]) + \"-\";\n\t\t}\n\t\telse {\n\t\t\ts += flist[i] + \"-\";\n\t\t}\n\t}\n\treturn s.substring(0, s.length-1);\n}\n\n\n\nmodule.exports = SimpleFrameViewer;","/**\n * Object for producing a HTML view of a given object in a frame\n */\nconst HTMLFrameHelper = require('../HTMLFrameHelper');\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLObjectViewer(renderer){\n\tthis.properties = [];\n}\n\n/**\n * Functions for rendering / re-rendering the object as header and body components\n */\nHTMLObjectViewer.prototype.render = function(renderer){\n\tthis.renderer = renderer;\n\tthis.headerViewer = new HTMLObjectHeaderViewer();\n\tif(this.renderedDOM){\n\t\t//var renderedDOM = this.getObjectDOM();\n\t\t//this.renderedDOM.replaceWith(renderedDOM);\n\t\t//this.renderedDOM = renderedDOM;\n\t}\n\telse {\n\t\t//this.renderedDOM = this.getObjectDOM();\n\t}\n\t//this.renderedDOM.appendChild(this.getObjectIDMarker(this.renderer));\n\tif(this.headerViewer){\n\t\tthis.header = this.headerViewer.getAsDOM(this.renderer);\n\t\tif(this.header) this.renderedDOM.appendChild(this.header);\n\t}\n\tthis.body = this.getObjectBodyDOM();\n\tif(this.body) this.renderedDOM.appendChild(this.body);\n\treturn this.renderedDOM;\n}\n\nHTMLObjectViewer.prototype.getObjectDOM = function(){\n\tvar orientation = this.renderer.getContentOrientation();\n\tvar pcls = \"terminus-object-frame-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar sp = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar sp = document.createElement(\"span\");\n\t}\n\tvar css = \"terminus-object-frame \" + pcls + (this.renderer.parent ? \"\" : \" terminus-root-frame\") + \" terminus-object-frame-\" + this.renderer.mode;\n\tsp.setAttribute(\"class\", css);\n\tsp.setAttribute(\"data-class\", this.renderer.subjectClass());\n\tsp.setAttribute(\"data-id\", this.renderer.subject());\n\treturn sp;\n}\n\nHTMLObjectViewer.prototype.getObjectBodyDOM = function(){\n\tvar orientation = \"page\";//this.renderer.getContentOrientation();\n\tvar pcls = \"terminus-object-properties-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar vholder = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar vholder = document.createElement(\"span\");\n\t}\n    vholder.setAttribute('class', 'terminus-object-properties ' + pcls);\n    for(var prop in this.properties){\n\t\tif(this.properties[prop]) vholder.appendChild(this.properties[prop]);\n\t}\n\treturn vholder;\n}\n\nHTMLObjectViewer.prototype.getFeatureDOM = function(feature){\n\tif(this.hasFeatureViewer(feature)){\n\t\treturn this.featureViewer[feature](this.renderer, this);\n\t}\n}\n\nHTMLObjectViewer.prototype.redraw = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.renderedDOM);\n\tthis.properties = [];\n\tthis.renderer.render(this);\n}\n\nHTMLObjectViewer.prototype.redrawHeader = function(){\n\tif(this.headerViewer && this.header) {\n\t\tvar nheader = this.headerViewer.getAsDOM(this.renderer);\n\t\tthis.header.replaceWith(nheader);\n\t\tthis.header = nheader;\n\t}\n}\n\nHTMLObjectViewer.prototype.redrawBody = function(){\n\tif(this.body){\n\t\tvar nbody = this.getObjectBodyDOM();\n\t\tthis.body.replaceWith(nbody);\n\t\tthis.body = nbody;\n\t}\n}\n\n/**\n * Adds a rendered version of a property to the internal properties array\n */\nHTMLObjectViewer.prototype.addRenderedProperty = function(prop, renderedprop){\n\tthis.properties[prop] = renderedprop;\n}\n\nHTMLObjectViewer.prototype.clear = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.renderedDOM);\n\tthis.properties = {};\n}\n\n/**\n * Removes the object from the dom\n */\nHTMLObjectViewer.prototype.remove = function(){\n\tthis.renderedDOM.parentNode.removeChild(this.renderedDOM);\n}\n\nHTMLObjectViewer.prototype.goTo = function(subj, property){\n\tHTMLFrameHelper.goToName(subj, property);\n}\n\n/**\n * Generates a html anchor element to use as a marker to find the object on the page\n */\nHTMLObjectViewer.prototype.getObjectIDMarker = function(renderer){\n\tvar idm = document.createElement(\"a\");\n\tidm.setAttribute(\"class\", \"terminus-object-idmarker\");\n\tvar sh = TerminusClient.FrameHelper.getShorthand(renderer.subject());\n    if(!sh) sh = renderer.subject();\n    if(sh){\n\t\tvar bits = sh.split(\":\");\n\t\tif(bits.length > 1) sh = bits[1];\n\t\tidm.setAttribute(\"name\", sh);\n    }\n\treturn idm;\n}\n\nfunction HTMLObjectHeaderViewer(){}\n\nHTMLObjectHeaderViewer.prototype.getAsDOM = function(renderer){\n\tvar orientation = renderer.getContentOrientation();\n\tvar pcls = \"terminus-object-frame-btn terminus-object-header-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar objDOM = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar objDOM = document.createElement(\"span\");\n\t}\n\tobjDOM.setAttribute(\"class\", \"terminus-object-header \" + pcls);\n\tif(renderer.showFeature(\"facet\")){\n\t\tvar facetDOM = this.getObjectFacetDOM(renderer);\n\t\tif(facetDOM) objDOM.appendChild(facetDOM);\n\t}\n\tif(renderer.showFeature(\"label\")){\n\t\tvar sumDOM = this.getObjectLabelDOM(renderer);\n\t\tif(sumDOM) objDOM.appendChild(sumDOM);\n\t}\n\tif(renderer.showFeature(\"id\")){\n\t\tvar idDOM = this.getObjectIDDOM(renderer);\n\t\tif(idDOM) objDOM.appendChild(idDOM);\n\t}\n\tif(renderer.showFeature(\"type\")){\n\t\tvar typeDOM = this.getObjectTypeDOM(renderer);\n\t\tif(typeDOM) objDOM.appendChild(typeDOM);\n\t}\n\tif(renderer.showFeature(\"status\")){\n\t\tvar sumDOM = this.getObjectStatusDOM(renderer);\n\t\tif(sumDOM) objDOM.appendChild(sumDOM);\n\t}\n\tif(renderer.showFeature(\"view\")){\n\t\tvar viewDOM = this.getViewPropertyDOM(renderer);\n\t\tif(viewDOM) objDOM.appendChild(viewDOM);\n\t}\n\tif(renderer.showFeature(\"viewer\")){\n\t\tvar hideDOM = this.getViewerSelectorDOM(renderer);\n\t\tif(hideDOM) objDOM.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"control\")){\n\t\tvar controlsDOM = this.getObjectControlsDOM(renderer);\n\t\tif(controlsDOM) objDOM.appendChild(controlsDOM);\n\t}\n\tif(renderer.showFeature(\"summary\")){\n\t\tvar controlsDOM = this.getObjectSummaryDOM(renderer);\n\t\tif(controlsDOM) objDOM.appendChild(controlsDOM);\n\t}\n\treturn objDOM;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectSummaryDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-summary\", false, sum.long, sum.status);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectControlsDOM = function(renderer){\n\tvar controlsDOM = document.createElement(\"span\");\n\tcontrolsDOM.setAttribute(\"class\", \"terminus-object-controls\");\n\tif(renderer.showFeature(\"add\")){\n\t\tvar addDOM = this.getAddPropertyDOM(renderer);\n\t\tif(addDOM) controlsDOM.appendChild(addDOM);\n\t}\n\tif(renderer.showFeature(\"mode\")){\n\t\tvar viewsDOM = HTMLFrameHelper.getModeSelectorDOM(\"object\", renderer);\n\t\tif(viewsDOM) controlsDOM.appendChild(viewsDOM);\n\t}\n\tif(renderer.showFeature(\"delete\")){\n\t\tvar dpropDOM = this.getObjectDeleteDOM(renderer);\n\t\tif(dpropDOM) controlsDOM.appendChild(dpropDOM);\n\t}\n\tif(renderer.showFeature(\"clone\")){\n\t\tvar cpropDOM = this.getObjectCloneDOM(renderer);\n\t\tif(cpropDOM) controlsDOM.appendChild(cpropDOM);\n\t}\n\tif(renderer.showFeature(\"reset\")){\n\t\tvar rpropDOM = this.getObjectResetDOM(renderer);\n\t\tif(rpropDOM) controlsDOM.appendChild(rpropDOM);\n\t}\n\tif(renderer.showFeature(\"update\")){\n\t\tvar upropDOM = this.getObjectUpdateDOM(renderer);\n\t\tif(upropDOM) controlsDOM.appendChild(upropDOM);\n\t}\n\tif(renderer.showFeature(\"show\")){\n\t\tvar showDOM = this.getObjectShowDOM(renderer);\n\t\tif(showDOM) controlsDOM.appendChild(showDOM);\n\t}\n\tif(renderer.showFeature(\"hide\")){\n\t\tvar hideDOM = this.getObjectHideDOM(renderer);\n\t\tif(hideDOM) controlsDOM.appendChild(hideDOM);\n\t}\n\treturn controlsDOM;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectFacetDOM = function(renderer){\n\tvar viewables = renderer.getAvailableFacets();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-facet\");\n\t\tvar callback = function(val){\n\t\t\tif(val){\n\t\t\t\trenderer.setFacet(val);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"object-facet\", viewables, renderer.currentFacet(), callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectLabelDOM = function(renderer){\n\tvar lab = renderer.getLabel();\n\tif(lab){\n\t\treturn HTMLFrameHelper.getInfoboxDOM(\"object-label\", false, lab);\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectIDDOM = function(renderer){\n\tvar val = renderer.subject();\n\tvar input = false;\n\tif(renderer.mode == \"edit\" && renderer.isNewDocument()){\n\t\tif(renderer.idDOM) val = renderer.idDOM.value;\n\t\tinput = document.createElement(\"input\");\n\t\tinput.setAttribute(\"class\", \"terminus-object-id-input\");\n\t\tinput.required  = true;\n\t\tif(val == \"_:\") val = \"\";\n\t\trenderer.idDOM = input;\n\t}\n\telse {\n\t\tif(renderer.isNewDocument() && val == \"_:\") val = \"New Document\";\n\t}\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-id\", \"ID\", val, \"Every fragment of data is identified by a unique URL\", input);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectTypeDOM = function(renderer){\n\tif(renderer.mode == \"edit\" && renderer.parent && renderer.parent.isClassChoice() && renderer.isNew()){\n\t\tvar cs = renderer.parent.getAvailableClassChoices();\n\t\tif(cs && cs.length){\n\t\t\tvar mpropDOM = document.createElement(\"span\");\n\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-change-class\");\n\t\t\tvar mlabDOM = document.createElement(\"span\");\n\t\t\tmlabDOM.setAttribute(\"class\", \"terminus-property-change-label\");\n\t\t\tmlabDOM.appendChild(document.createTextNode(\"Type\"));\n\t\t\tmpropDOM.appendChild(mlabDOM);\n\t\t\tvar callback = function(cls){\n\t\t\t\tif(cls){\n\t\t\t\t\trenderer.changeClass(cls);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"change-class\", cs, renderer.subjectClass(), callback);\n\t\t\tmpropDOM.appendChild(sel);\n\t\t\treturn mpropDOM;\n\t\t}\n\t}\n\tvar cm = renderer.getClassMeta(renderer.subjectClass());\n\tvar lab = renderer.subjectClass();\n\tvar cmt = \"All objects have types, identified by a unique URL\";\n\tif(cm){\n\t\tlab = HTMLFrameHelper.getVariableValueFromBinding(\"Label\", cm);\n\t\tcmt = HTMLFrameHelper.getVariableValueFromBinding(\"Comment\", cm);\n\t\tcmt = (cmt ? renderer.subjectClass() + \" \" + cmt : renderer.subjectClass());\n\t}\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-type\", \"Type\", lab, cmt);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectStatusDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"status-\"+sum.status, false, sum.status, sum.status);\n}\n\nHTMLObjectHeaderViewer.prototype.getAddPropertyDOM = function(renderer){\n\tvar addables = renderer.getAddableProperties();\n\tif(addables && addables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-add-property\");\n\t\taddables.unshift({ value: \"\", label: \"Add New Property\"});\n\t\tvar callback = function(add){\n\t\t\tif(add){\n\t\t\t\trenderer.addNewProperty(add);\n\t\t\t}\n\t\t}\n\t\tvar disabled = (renderer.cardControlAllows(\"add\") ? false : \"Cardinality Rules Forbid Add\");\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"add-property\", addables, \"\", callback, disabled);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getViewPropertyDOM = function(renderer){\n\tvar viewables = renderer.getViewableProperties();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-view-property\");\n\t\tviewables.unshift({ value: \"\", label: \"View Property\"});\n\t\tvar callback = function(add){\n\t\t\tif(add){\n\t\t\t\trenderer.goToProperty(add);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"view-property\", viewables, \"\", callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectDeleteDOM = function(renderer){\n\tvar callback = function(){renderer.delete()};\n\tvar disabled = (renderer.cardControlAllows(\"delete\") ? false : \"Cardinality Rules Forbid Delete\");\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"delete\", \"Delete\", callback, disabled);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectCloneDOM = function(renderer){\n\tvar callback = function(){renderer.clone()};\n\tvar disabled = (renderer.cardControlAllows(\"clone\") ? false : \"Cardinality Rules Forbid Clone\");\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"clone\", \"Clone\", callback, disabled);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectResetDOM = function(renderer){\n\tvar callback = function(){renderer.reset()};\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to reset\");\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"reset\", \"Reset\", callback, disabled);\n}\n\nHTMLObjectHeaderViewer.prototype.getViewerSelectorDOM = function(renderer){\n\tvar viewers = renderer.getAvailableViewers();\n\tif(viewers && viewers.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-viewer\");\n\t\tvar callback = function(viewer){\n\t\t\tif(viewer){\n\t\t\t\trenderer.setViewer(viewer);\n\t\t\t}\n\t\t}\n\t\tvar selected = renderer.currentViewer();\n\t\tvar sel = HTMLFrameHelper.getSelectionControl('object-viewer', viewers, selected, callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectHideDOM = function(renderer){\n\tvar callback = function(){renderer.hide()};\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"hide\", \"Hide\", callback);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectShowDOM = function(renderer){\n\tvar callback = function(){renderer.show()};\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"show\", \"Show\", callback);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectUpdateDOM = function(renderer){\n\tvar dpropDOM = document.createElement(\"span\");\n\tdpropDOM.setAttribute(\"class\", \"terminus-object-update\");\n\tif(renderer.isNewDocument()){\n\t\tvar disabled = false;//(renderer.isUpdated() ? false : \"No changes\");\n\t}\n\telse {\n\t\tvar disabled = (renderer.isUpdated() ? false : \"No changes\");\n\t}\n\tvar saveback = function(){renderer.save()};\n\tdpropDOM.appendChild(HTMLFrameHelper.getActionControl(\"object\", \"save\", \"Save\", saveback, disabled));\n\treturn dpropDOM;\n}\n\nmodule.exports=HTMLObjectViewer;\n","const TerminusUI = require('./TerminusUI');\n\nconst RenderingMap = require('./client/RenderingMap');\nconst WOQL =require('./viewer/WOQLRule')\nmodule.exports={TerminusUI:TerminusUI,\n                RenderingMap:RenderingMap,\n            \tWOQL:WOQL}\n","/**\n * Terminus UI object\n *\n * Traffic control of messages going between different Terminus UI pages and features\n *\n * @param opts - options array\n */\nconst ApiExplorer = require('./ApiExplorer');\nconst TerminusDBsdk = require('./TerminusDB');\nconst TerminusViolations = require('./html/TerminusViolation');\nconst TerminusQueryViewer = require('./TerminusQuery');\nconst TerminusSchemaViewer = require('./TerminusSchema');\nconst TerminusServersdk = require('./TerminusServer');\nconst TerminusURLLoader = require('./TerminusURL');\nconst TerminusPluginManager = require('./plugins/TerminusPlugin');\nconst UTILS = require('./Utils');\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction TerminusUI(opts){\n\tthis.client = new TerminusClient.WOQLClient();\n\tthis.controls = [];\n\tthis.setOptions(opts);\n}\n\n/*\n * Client connects to specified server and specified part\n * opts is a json with the following fields:\n * server: mandatory URL of the server to connect to\n * key: optional client API key\n * dbid: id of the database to connect to\n * schema: if set, the UI will load the schema page after connecting\n * query: if set, the query will be sent to the server and the results will be loaded on the query page\n * document: if set, the document page corresponding to this document will be loaded after connecting\n *\n * (note: schema, query, document are mutually exclusive and must also have a dbid set)\n */\nTerminusUI.prototype.connect = function(opts){\n\tvar self = this;\n\tthis.client.connectionConfig.server = false;\n\tvar key = ((opts && opts.key) ? opts.key : false);\n\tthis.showBusy(\"Connecting to server at \" + opts.server);\n\treturn this.client.connect(opts.server, key)\n\t.then( function(response) {\n\t\tself.clearBusy();\n\t\tif(opts && opts.db && self.getDBRecord(opts.db)){\n\t\t\tself.connectToDB(opts.db);\n\t\t\tif(opts.document && self.showView(\"get_document\")){\n\t\t\t\tresponse = self.showDocument(opts.document);\n\t\t\t}\n\t\t\telse if(opts.schema && self.showView(\"get_schema\")){\n\t\t\t\tresponse = self.showSchemaPage(opts.schema);\n\t\t\t}\n\t\t\telse if(opts.query && self.showView(\"woql_select\")){\n\t\t\t\tself.showQueryPage(opts.query);\n\t\t\t}\n\t\t\telse if(opts.explorer && self.showView(\"api_explorer\")){\n\t\t\t\tself.showExplorer(opts.explorer);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tself.showDBMainPage();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tself.showServerMainPage();\n\t\t}\n\t\tself.redraw();\n\t\treturn response;\n\t})\n\t.catch(function(err) {\n\t\tself.clearBusy();\n\t\tself.showError(err);\n\t\tthrow(err);\n\t});\n}\n\n/**\n * Sends a request to create a new database to the server and interprets the response\n *\n * dbdets is a json object with the following fields:\n * id: the id of the new database (alphanumeric, no spaces, url friendly) mandatory\n * title: the text name of the new database for tables, etc. mandatory\n * description: text description of the database (optional)\n * key: a API client key for server auth\n * schema: the url of another Terminus DB from which to import schema\n * instance: the url of another Terminus DB from which to import data\n *\n */\nTerminusUI.prototype.createDatabase = function(dbdets){\n\tvar self = this;\n\tif(!dbdets.id || !dbdets.title){\n        return Promise.reject(new Error(self.getBadArguments(\"createDatabase\", \"ID and title are mandatory fields\")));\n\t}\n\tvar dbid = dbdets.id;\n\tvar myserver = this.client.connectionConfig.server;\n\tself.showBusy(\"Creating Database \" + dbdets.title + \" with id \" + dbid);\n\tvar dbdoc = this.generateNewDatabaseDocument(dbdets);\n\treturn this.client.createDatabase(dbid, dbdoc)\n\t.then(function(response){ //import schema into newly created DB\n\t\tif(dbdets.schema){\n\t\t\tself.showBusy(\"Fetching imported schema from \" + dbdets.schema);\n\t\t\tvar opts = (dbdets.key ?  {\"terminus:user_key\": dbdets.key } : {});\n\t\t\topts['terminus:encoding'] = \"terminus:turtle\";\n\t\t\treturn self.client.getSchema(dbdets.schema, opts)\n\t\t\t.then(function(response){\n\t\t\t\tself.showBusy(\"Updating database with new schema\");\n\t\t\t\tself.client.connectionConfig.server = myserver;\n\t\t\t\tself.client.connectionConfig.dbid = dbid;\n\t\t\t\tvar nopts = {'terminus:encoding':  \"terminus:turtle\"};\n\t\t\t\treturn self.client.updateSchema(false, response, nopts);\n\t\t\t})\n\t\t\t.then(function(response){\n\t\t\t\tself.clearBusy();\n\t\t\t\tself.redraw();\n\t\t\t\treturn response;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tself.clearBusy();\n\t\t}\n\t\treturn response;\n\t})\n\t.then(function(response){ //reload list of databases in background..\n\t\treturn self.refreshDBList()\n\t\t.then(function(response){\n\t\t\tif(crec = self.client.connection.getDBRecord(dbid)){\n\t\t\t\tself.client.connectionConfig.dbid = dbid;\n\t\t\t\tself.showDBMainPage();\n\t\t\t\tself.showMessage(\"Successfully Created Database \" + dbid, \"success\");\n\t\t\t}\n\t\t\telse {\n\t\t        return Promise.reject(new Error(self.getCrashString(\"createDatabase\", \"Failed to retrieve record of created database \" + dbid)));\n\t\t\t}\n\t\t})\n\t})\n\t.catch(function(error){\n\t\tself.clearBusy();\n\t\tself.showError(error);\n\t});\n}\n\n/**\n * Deletes the database with the passed id from the currently connected server\n */\nTerminusUI.prototype.deleteDatabase = function(dbid){\n\tvar self = this;\n\tvar delrec = this.client.connection.getDBRecord();\n\tvar lid = (dbid ? dbid : this.db());\n\tvar dbn = (delrec && delrec['rdfs:label'] && delrec['rdfs:label'][\"@value\"] ? delrec['rdfs:label'][\"@value\"] + \" (id: \" + lid + \")\" : lid);\n\tthis.showBusy(\"Deleting database \" + dbn);\n\treturn this.client.deleteDatabase(dbid)\n\t.then(function(response){\n\t\tself.clearBusy();\n\t\tself.client.connectionConfig.dbid = false;\n\t\tself.removeDB(dbid);\n\t\tself.showServerMainPage();\n\t\tself.showMessage(\"Successfully Deleted Database \" + dbn, \"success\");\n\t\tself.refreshDBList();\n\t\treturn response;\n\t})\n\t.catch(function(error){\n\t\tself.clearBusy();\n\t\tself.showError(error);\n\t});\n}\n\n/*\n * Transforms a details (id, title, description) array into  json-ld document\n */\nTerminusUI.prototype.generateNewDatabaseDocument = function(dets){\n\tvar doc = {\n\t\t\"@context\" : {\n\t\t\trdfs: \"http://www.w3.org/2000/01/rdf-schema#\",\n\t\t\tterminus: \"http://terminusdb.com/schema/terminus#\"\n\t\t},\n\t\t\"@type\": \"terminus:Database\"\n\t}\n\tif(dets.title){\n\t\tdoc['rdfs:label'] = {\n\t\t\t\"@language\":  \"en\",\n\t\t\t\"@value\": dets.title\n\t\t};\n\t}\n\tif(dets.description){\n\t\tdoc['rdfs:comment'] = {\n\t\t\t\"@language\":  \"en\",\n\t\t\t\"@value\": dets.description\n\t\t};\n\t}\n\tdoc['terminus:allow_origin'] = { \"@type\" : \"xsd:string\", \"@value\" : \"*\" };\n\treturn doc;\n}\n\nTerminusUI.prototype.getBadArguments = function(fname, str){\n\treturn \"Bad arguments to \" + fname + \": \" + str;\n}\n\nTerminusUI.prototype.getCrashString = function(fname, str){\n\treturn \"Results from \" + fname + \" indicate the possibility of a system failure \" + str;\n}\n\n/*\n * Parses the passed URL and turns it into a call to the connect function - loads the appropriate endpoing\n */\nTerminusUI.prototype.load = function(url, key){\n\tvar args = {};\n\tif(url && url.indexOf(\"/document/\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/document/\"));\n\t\targs.document = url.substring(url.indexOf(\"/document/\")+10);\n\t}\n\telse if(url && url.indexOf(\"/schema\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/schema\"));\n\t\targs.schema = {};\n\t}\n\telse if(url && url.indexOf(\"/woql\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/query\"));\n\t\targs.query = url.substring(url.indexOf(\"/query\")+7);\n\t}\n\targs.server = url;\n\tif(key) args.key = key;\n\treturn this.connect(args);\n}\n\n/**\n * Fetches the DB URL from the url by chopping off the extra bits\n */\nTerminusUI.prototype.getConnectionEndpoint = function(url){\n\tif(url && url.lastIndexOf(\"/schema\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/schema\"));\n\t}\n\tif(url && url.lastIndexOf(\"/document\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/document\"));\n\t}\n\tif(url && url.lastIndexOf(\"/frame\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/frame\"));\n\t}\n\tif(url && url.lastIndexOf(\"/woql\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/woql\"));\n\t}\n\treturn url;\n}\n\nTerminusUI.prototype.server = function(){\n\treturn this.client.connectionConfig.server;\n}\n\nTerminusUI.prototype.db = function(){\n\treturn this.client.connectionConfig.dbid;\n}\n\nTerminusUI.prototype.clearServer = function(){\n\tthis.client.connectionConfig.server = false;\n}\n\nTerminusUI.prototype.connectToDB = function(dbid){\n\tthis.client.connectionConfig.dbid = dbid;\n\tTerminusClient.FrameHelper.standard_urls['doc'] = this.client.connectionConfig.dbURL() + \"/document/\";\n\tTerminusClient.FrameHelper.standard_urls['scm'] = this.client.connectionConfig.dbURL() + \"/schema#\";\n}\n\nTerminusUI.prototype.clearDB = function(){\n\tthis.client.connectionConfig.dbid = false;\n}\n\nTerminusUI.prototype.removeDB = function(db, url){\n\tthis.client.connection.removeDB(db, url);\n}\n\nTerminusUI.prototype.getDBRecord = function(db, url){\n\treturn this.client.connection.getDBRecord(db, url);\n}\n\nTerminusUI.prototype.refreshDBList = function(){\n\tvar self = this;\n\treturn this.client.connect();\n}\n\nTerminusUI.prototype.showServerMainPage = function(){\n\tthis.viewer = new TerminusServersdk.TerminusServerViewer(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showCollaboratePage = function(){\n\tthis.viewer = new TerminusURLLoader(this);\n\tthis.redrawMainPage();\n}\n\n\nTerminusUI.prototype.showLoadURLPage = function(val){\n\tthis.viewer = new TerminusURLLoader(this, val);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showDBMainPage = function(){\n\tthis.viewer = new TerminusDBsdk.TerminusDBViewer(this);\n\tthis.viewer.page = \"db\";\n\tthis.redraw();\n}\n\nTerminusUI.prototype.showCreateDBPage = function(){\n\tthis.viewer = new TerminusDBsdk.TerminusDBCreator(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showSchemaPage = function(durl){\n\tthis.viewer = new TerminusSchemaViewer(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showQueryPage = function(query){\n\tthis.viewer = new TerminusQueryViewer(this, query, this.options);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showDocumentPage = function(){\n\tthis.viewer = new TerminusDBsdk.TerminusDBViewer(this);\n\tthis.viewer.page = \"docs\";\n\tthis.redraw();\n}\n\nTerminusUI.prototype.showDocument = function(durl){\n\tthis.viewer = new TerminusDocumentViewer(this, \"view\", this.getDocViewerOptions());\n\tconst promise = this.viewer.loadDocument(durl);\n\tthis.redrawMainPage();\n\treturn promise;\n}\n\nTerminusUI.prototype.showCreateDocument = function(durl){\n\tthis.viewer = new TerminusDocumentViewer(this, \"create\", this.getDocCreatorOptions());\n\tconst promise = this.viewer.loadCreateDocument(durl);\n\tthis.redrawMainPage();\n\treturn promise;\n}\n\nTerminusUI.prototype.redrawMainPage = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.mainDOM);\n\tif(this.viewer && this.mainDOM){\n\t\tvar x = this.viewer.getAsDOM();\n\t\tthis.mainDOM.appendChild(x);\n\t}\n}\n\nTerminusUI.prototype.deleteDBPermitted = function(dbid){\n\tif(dbid == \"terminus\") return false;\n\tif(this.client.connection.capabilitiesPermit(\"delete_database\", dbid)){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.getDeleteDBButton = function(dbid){\n\tif(!this.deleteDBPermitted(dbid)) return false;\n\t//var delbut = document.createElement('button');\n\tvar icon = document.createElement('i');\n\ticon.setAttribute(\"class\", \"terminus-db-list-del-icon fa fa-trash\");\n\t//delbut.appendChild(icon);\n\t//delbut.appendChild(document.createTextNode(\"Delete Database\"));\n\t//delbut.setAttribute(\"class\", \"terminus-control-button terminus-delete-db-button\");\n\t\t// function to fix db in a closure\n\tvar self = this;\n\tvar delDB = function(db){\n\t\treturn function(){\n\t\t\tlet deleteConfirm = confirm(`This action is irreversible, it will remove the database from the system permanently. Are you sure you want to delete ${db} Database?`);\n\t\t\tif (deleteConfirm == true) {\n\t\t\t\tself.deleteDatabase(db);\n\t\t\t}\n\t\t}\n\t};\n\ticon.addEventListener(\"click\", delDB(dbid));\n\treturn icon;\n}\n\nTerminusUI.prototype.showResult = function(response){\n\tthis.showMessage(response, \"success\");\n};\n\nTerminusUI.prototype.showError = function(response){\n\tthis.showMessage(response, \"error\");\n};\n\nTerminusUI.prototype.clearMessages = function(response){\n\tif(this.messages) TerminusClient.FrameHelper.removeChildren(this.messages);\n};\n\nTerminusUI.prototype.clearMainPage = function(){\n\tif(this.main) TerminusClient.FrameHelper.removeChildren(this.main);\n}\n\nTerminusUI.prototype.setMessageDOM = function(dom){\n\tthis.messages = dom;\n}\n\nTerminusUI.prototype.setbuttonControls = function(dom){\n\tthis.buttons = dom;\n}\n\nTerminusUI.prototype.setControllerDOM = function(dom){\n\tthis.controller = dom;\n}\n\nTerminusUI.prototype.setExplorerDOM = function(dom){\n\tthis.explorer = dom;\n}\n\nTerminusUI.prototype.setPluginsDOM = function(dom){\n\tthis.plugins = dom;\n}\n\nTerminusUI.prototype.setViewerDOM = function(dom){\n\tthis.mainDOM = dom;\n}\n\nTerminusUI.prototype.draw = function(comps, slocation){\n\tif(comps && comps.viewer) this.setViewerDOM(comps.viewer);\n\tif(comps && comps.buttons) this.setbuttonControls(comps.buttons);\n\tif(comps && comps.messages) this.setMessageDOM(comps.messages);\n\tif(comps && comps.controller) this.setControllerDOM(comps.controller);\n\t//if(comps && comps.explorer) this.setExplorerDOM(comps.explorer);\n\tif(comps && comps.plugins) this.setPluginsDOM(comps.plugins);\n\tif(this.plugins){\n\t\tthis.drawPlugins();\n\t}\n\tif(this.buttons){\n\t\t//this.toggleControl();\n\t}\n\tvar self = this;\n\tvar cdrawn = false;\n\tif(slocation && slocation.server){\n\t\tif(typeof this.client.connection.connection[slocation.server] == \"undefined\") {\n\t\t\treturn this.connect(slocation)\n\t\t\t.catch(function(error){\n\t\t\t\tself.showLoadURLPage();\n\t\t\t});\n\t\t}\n\t}\n\telse {\n\t\tthis.showLoadURLPage();\n\t};\n}\n\nTerminusUI.prototype.redraw = function(msg){\n\tthis.clearMessages();\n\tthis.redrawControls();\n\tif(this.explorer){\n\t\tTerminusClient.FrameHelper.removeChildren(this.explorer);\n\t\t//this.drawExplorer();\n\t}\n\tif(this.viewer){\n\t\tthis.redrawMainPage();\n\t}\n\tif(msg) this.showMessage(msg);\n};\n\n\nTerminusUI.prototype.toggleDashboardWidget = function(widget){\n    TerminusClient.FrameHelper.removeChildren(this.controller);\n    TerminusClient.FrameHelper.removeChildren(this.explorer);\n    UTILS.removeSelectedNavClass('terminus-dashboard-selected');\n    widget.classList.add('terminus-dashboard-selected');\n}\n\nTerminusUI.prototype.toggleControl = function(){\n /* var self = this;\n  this.buttons.client.addEventListener('click', function(){\n    self.toggleDashboardWidget(this);\n    self.drawControls();\n    self.showServerMainPage();\n  })\n  this.buttons.explorer.addEventListener('click', function(){\n    self.toggleDashboardWidget(this);\n    self.drawExplorer();\n  })*/\n}\n\nTerminusUI.prototype.redrawControls = function(){\n\tif(this.controller){\n\t\tTerminusClient.FrameHelper.removeChildren(this.controller);\n\t\tthis.drawControls();\n\t}\n}\n\nTerminusUI.prototype.drawControls = function(){\n\tthis.controls = [];\n\tthis.loadControls();\n\tfor(var i = 0; i<this.controls.length; i++){\n\t\tvar ncontrol = this.controls[i];\n\t\tif(ncontrol && (nd = ncontrol.getAsDOM())){\n\t\t\tthis.controller.appendChild(nd);\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.drawExplorer = function(){\n\tif(this.explorer){\n\t\tif(this.showControl(\"api_explorer\")){\n\t\t\tvar exp = new ApiExplorer(this);\n\t\t\tae = exp.getAsDOM();\n\t\t\tthis.explorer.appendChild(ae);\n\t\t\tthis.explorer.style.display = 'block';\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.loadControls = function(){\n\tif(this.showControl('server')){\n\t\tvar sc = new TerminusServersdk.TerminusServerController(this);\n\t\tif(sc) {\n\t\t\tthis.controls.push(sc);\n\t\t}\n\t\tif(this.db() && this.showControl(\"db\")){\n\t\t\tvar sc = new TerminusDBsdk.TerminusDBController(this);\n\t\t\tif(sc) this.controls.push(sc);\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.showControl = function(el){\n\tif(this.show_controls.indexOf(el) == -1) return false;\n\tif(this.pseudoCapability(el)) return true;\n\tif(this.client.connection.capabilitiesPermit(el)) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.showView = function(el){\n\tif(this.show_views.indexOf(el) == -1) return false;\n\tif(this.pseudoCapability(el)) return true;\n\tif(this.client.connection.capabilitiesPermit(el)) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.clearBusy = function(response){\n\tthis.clearMessages();\n\tif(this.viewer && typeof this.viewer.busy == \"function\") this.viewer.busy(false);\n}\n\nTerminusUI.prototype.getBusyLoader = function(bsyDom){\n     var pd = document.createElement('div');\n     var pbc = document.createElement('div');\n     pbc.setAttribute('class', 'term-progress-bar-container');\n     pd.appendChild(pbc);\n\n     var pbsa = document.createElement('div');\n     pbsa.setAttribute('class', 'term-progress-bar term-stripes animated reverse slower');\n     pbc.appendChild(pbsa);\n     var pbia = document.createElement('span');\n     pbia.setAttribute('class', 'term-progress-bar-inner');\n     pbsa.appendChild(pbia);\n\n     bsyDom.appendChild(pd);\n}\n\nTerminusUI.prototype.showMessage = function(msg, type){\n\tif(this.messages){\n\t\tTerminusClient.FrameHelper.removeChildren(this.messages);\n\t\tvar md = document.createElement('div');\n        switch(type){\n            case 'busy':\n                var msgHolder = document.createElement('div');\n                msgHolder.setAttribute('class', 'terminus-busy-msg')\n                msgHolder.appendChild(document.createTextNode(msg));\n                md.appendChild(msgHolder);\n                this.getBusyLoader(md);\n            break;\n            case 'success':\n                md.setAttribute('class', 'terminus-show-msg-success');\n                md.appendChild(document.createTextNode(msg));\n            break;\n            case 'error':\n                md.setAttribute('class', 'terminus-show-msg-error');\n                md.appendChild(document.createTextNode(msg));\n            break;\n        }\n\t\tthis.messages.appendChild(md);\n\t}\n};\n\nTerminusUI.prototype.showViolations = function(vios, type){\n\tvar nvios = new TerminusViolations(vios, this);\n\tif(this.messages){\n\t\tvar cmsg = (type == \"schema\" ? \" in Schema\" : \" in Document\");\n\t\tTerminusClient.FrameHelper.removeChildren(this.messages);\n\t\tthis.messages.appendChild(nvios.getAsDOM(cmsg));\n\t}\n}\n\nTerminusUI.prototype.showBusy = function(msg){\n\tthis.showMessage(msg, \"busy\");\n\tif(this.viewer && typeof this.viewer.busy == \"function\") this.viewer.busy(msg);\n};\n\nTerminusUI.prototype.pseudoCapability = function(el){\n\tvar pseuds = [\"server\", \"db\", \"collaborate\", \"change-server\", \"api_explorer\", \"import_schema\", \"add_new_library\"];\n\tif(pseuds.indexOf(el) == -1) return false;\n\treturn true;\n}\n\nTerminusUI.prototype.setOptions = function(opts){\n\tthis.show_controls = opts && opts.controls ? opts.controls :\n\t\t[\"server\", \"db\", \"change-server\", \"schema_format\",\n\t\t\t\"import_schema\", \"class_frame\", \"create_database\",\n\t\t\t\"collaborate\", \"get_document\", \"update_schema\",\n\t\t\t\"get_schema\", \"woql_select\"\n\t\t];\n\tthis.show_views = opts && opts.views ? opts.views : this.show_controls;\n\tif(opts.document){\n\t\tthis.document_options = opts.document;\n\t}\n\tif(opts.schema){\n\t\tthis.schema_options = opts.schema;\n\t}\n\tthis.piman = new TerminusPluginManager();\n\tvar self = this;\n\tthis.piman.init(opts.plugins, function(){\n\t\tvar pins = [\"gmaps\", \"quill\", \"select2\"];\n\t\tfor(var i = 0; i<pins.length; i++){\n\t\t\tif(self.piman.pluginAvailable(pins[i])){\n\t\t\t\t//RenderingMap.addPlugin(pins[i]);\n\t\t\t}\n\t\t}\n\t\tself.redraw();\n\t});\n\tif(opts.css && this.piman){\n\t\tthis.piman.loadPageCSS(opts.css);\n\t}\n\tthis.loadControls();\n}\n\nTerminusUI.prototype.pluginAvailable = function(p){\n\treturn this.piman.pluginAvailable(p);\n}\n\nTerminusUI.prototype.drawPlugins = function(){\n\tif(!this.piman) {\n\t\tconsole.log(new Error(\"No plugin manager initialised in UI object\"));\n\t\treturn false;\n\t}\n\tthis.plugins.appendChild(this.piman.getAsDOM(this));\n}\n\nTerminusUI.prototype.getDocViewerOptions = function(){\n\tif(this.document_options && this.document_options['view']){\n\t\treturn this.document_options['view'];\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.getDocCreatorOptions = function(){\n\tif(this.document_options && this.document_options['view']){\n\t\treturn this.document_options['view'];\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.getClassFrameOptions = function(){\n\treturn this.viewdoc_options;\n}\n\nmodule.exports=TerminusUI\n","/**\n * @file Javascript Api explorer tool\n * @author Kitty Jose\n * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more\n *\n * @summary Displays a demo and description of api calls from WOQLCLient and what happens under the hood of api calls\n */\nconst TerminusPluginManager = require('./plugins/TerminusPlugin');\nconst UTILS = require('./Utils');\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nlet apiNavConfig = {\n    mainNav: {\n        connect: {\n    \t\tnavText: 'Connect API',\n            action : 'connect',\n            icon   : 'link',\n            defaultSelected: true\n    \t},\n        database: {\n            navText: 'Database API',\n            action : 'create',\n            icon   : 'database'\n        },\n        schema: {\n            navText: 'Schema API',\n            action : 'schema',\n            icon   : 'cog'\n        },\n        document: {\n            navText: 'Document API',\n            action : 'document',\n            icon   : 'file'\n        },\n        query: {\n            navText: 'Query API',\n            action : 'query',\n            icon   : 'search'\n        }\n    },\n    subNav: {\n        database: {\n            createDatabase: {\n                navText: 'Create database',\n                action : 'create',\n                icon   : 'plus',\n                defaultSelected: true\n            },\n            deleteDatabase: {\n                navText: 'Delete database',\n                action : 'delete',\n                icon   : 'trash-alt'\n            }\n        },\n        schema: {\n            getSchema: {\n                navText: 'View Schema',\n                action : 'getSchema',\n                icon   : 'eye',\n                defaultSelected: true\n            },\n            updateSchema: {\n                navText: 'Update Schema',\n                action : 'updateSchema',\n                icon   : 'arrow-up'\n            },\n            getClassFrames: {\n                navText: 'Get Class Frames',\n                action : 'getClassFrames',\n                icon   : 'share-alt'\n            }\n        },\n        document: {\n            viewDocument: {\n        \t\tnavText: 'View Document',\n                action : 'viewDocument',\n                icon   : 'eye',\n                defaultSelected: true\n        \t},\n            createDocument: {\n                navText: 'Create Document',\n                action : 'createDocument',\n                icon   : 'plus'\n            },\n            updateDocument: {\n                navText: 'Update Document',\n                action : 'updateDocument',\n                icon   : 'arrow-up'\n            },\n            deleteDocument:{\n                navText: 'Delete Document',\n                action : 'deleteDocument',\n                icon   : 'trash-alt'\n            }\n        },\n        query: {\n            select: {\n                navText: 'Select',\n                action : 'select',\n                icon   : 'mouse-pointer',\n                defaultSelected: true\n            },\n            update: {\n                navText: 'Update',\n                action : 'update',\n                icon   : 'arrow-up'\n            }\n        }\n    }\n}\n\nfunction ApiExplorer(ui){\n    this.ui = ui;\n    this.viewer = ui.mainDOM;\n    this.client = new TerminusClient.WOQLClient();\n    this.client.use_fetch = true;\n    this.client.return_full_response = true;\n    this.pman = new TerminusPluginManager();\n}\n\n// Controller provides access to Api explorer functions\nApiExplorer.prototype.getAsDOM = function(){\n \tvar aec = document.createElement(\"div\");\n    aec.setAttribute(\"class\", \"terminus-db-controller\");\n    if(this.ui){\n       this.getApiNav(aec, this.viewer); // nav\n       this.getApiExplorerDom('connect', this.viewer); // content dom\n    } // if this.ui\n    return aec;\n }\n\n/***** Api Nav bar *****/\n// Toggle selected nav bars\nApiExplorer.prototype.setSelectedNavMenu = function(a){\n    UTILS.removeSelectedNavClass(\"terminus-selected\");\n    a.classList.add(\"terminus-selected\");\n}\n\nApiExplorer.prototype.navOnSelect = function(action, nav, viewer){\n    UTILS.removeSelectedNavClass(\"terminus-selected\");\n    nav.classList.add(\"terminus-selected\");\n    this.getApiExplorerDom(action, viewer);\n}\n\n// create nav bars\nApiExplorer.prototype.createNavs = function(navConfig, viewer, ul){\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    if(navConfig.defaultSelected) a.classList.add('terminus-selected');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        self.navOnSelect(navConfig.action, this, viewer);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-' + navConfig.icon);\n    a.appendChild(icon);\n    var txt = document.createTextNode(navConfig.navText);\n    a.appendChild(txt);\n    ul.appendChild(a);\n}\n\n// gets api nav bar\nApiExplorer.prototype.getApiNav = function(navDom, viewer){\n    // list view of apis\n    var nav = document.createElement('div');\n    navDom.appendChild(nav);\n    // connect to server api\n    var ul = document.createElement('ul');\n    ul.setAttribute('class', 'terminus-ul');\n    nav.appendChild(ul);\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.mainNav){\n        if (apiNavConfig.mainNav.hasOwnProperty(key)) {\n            this.createNavs(apiNavConfig.mainNav[key], viewer, ul);\n        }\n    } // for apiNavConfig\n    return navDom;\n} // getApiNav()\n\n/***** Api sub navs  *****/\n// get schema api explorer - nav bar, alert msg, headers ...\nApiExplorer.prototype.getApiExplorerDom = function(view, viewer){\n    // clear of viewer\n    TerminusClient.FrameHelper.removeChildren(viewer);\n    // wrapper\n    var wrap = document.createElement('div');\n    //wrap.setAttribute('class', 'terminus-wrapper terminus-wrapper-height');\n    viewer.appendChild(wrap);\n    var cont = document.createElement('div');\n    cont.setAttribute('class', 'container-fluid');\n    wrap.appendChild(cont);\n    var row = document.createElement('div');\n    row.setAttribute('class', 'row-fluid');\n    cont.appendChild(row);\n    var body = document.createElement('div');\n    body.setAttribute('class', 'terminus-module-body');\n    row.appendChild(body);\n    var api = document.createElement('div');\n    api.setAttribute('class', 'terminus-module-body terminus-module-body-white-bg terminus-module-body-width');\n    body.appendChild(api);\n    // body\n    var cont = document.createElement('div');\n    var self = this;\n    switch(view){\n        case 'connect':\n            var apiCont = self.getConnectExplorer(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'create':\n            var apiCont = self.getDatabaseExplorer(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'schema':\n            var apiCont = self.getSchemaApi(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'document':\n            var apiCont = self.getDocumentApi(cont);\n            api.appendChild(apiCont);\n        break;\n        case 'query':\n            var apiCont = self.getQueryApi(cont);\n            api.appendChild(apiCont);\n        break;\n    }// switch(api)\n    return wrap;\n} // getApiExplorerDom\n\n// on trigger of click event - change dom\nApiExplorer.prototype.changeSubApiDom = function(curSubMenu, action, cont, body){\n    TerminusClient.FrameHelper.removeChildren(body);\n    switch(curSubMenu){\n        case 'database':\n            var dom = this.getDatabaseDom(action, body);\n        break;\n        case 'schema':  // getShowApiDom() deals with schema and document\n             var dom = this.getShowApiDom(action, body);\n        break;\n        case 'document': // getShowApiDom() deals with schema and document\n             var dom = this.getShowApiDom(action, body);\n        break;\n        case 'query':\n            var dom = this.getQueryApiDom(action, body);\n        break;\n        default:\n            console.log('Invalid Api Config');\n        break;\n    }\n    cont.appendChild(dom);\n}\n\nApiExplorer.prototype.subNavOnSelect = function(curSubMenu, subMenuConfig, subNav, cont, body){\n    UTILS.setSelectedSubMenu(subNav);\n    this.changeSubApiDom(curSubMenu, subMenuConfig.action, cont, body);\n}\n\n// create sub nav bars\nApiExplorer.prototype.createSubNavs = function(curSubMenu, subMenuConfig, cont, body, ul){\n    // comment getclassframes for api explorer time being\n    if(subMenuConfig.action == 'getClassFrames') return;\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    if(subMenuConfig.defaultSelected) a.classList.add('terminus-submenu-selected');\n    var self = this;\n    a.addEventListener(\"click\", function() {\n        self.subNavOnSelect(curSubMenu, subMenuConfig, this, cont, body);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-' + subMenuConfig.icon);\n    a.appendChild(icon);\n    var txt = document.createTextNode(subMenuConfig.navText);\n    a.appendChild(txt);\n    ul.appendChild(a);\n}\n\n// get connect to server api calls - on click of connectAPI nav bar\nApiExplorer.prototype.getConnectExplorer = function(body){\n    var self = this;\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // get signature\n    var b = this.getSignature('connect');\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    //form to get server url\n    this.getForm( '', body, true, 'connect', 'URL : server_url');\n    //body.appendChild(form);\n    return body;\n} // getConnectExplorer\n\n// get database api calls - on click of databaseAPI nav bar - submenus of database Api defined here\nApiExplorer.prototype.getDatabaseExplorer = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.database){\n        if (apiNavConfig.subNav.database.hasOwnProperty(key))\n            this.createSubNavs('database', apiNavConfig.subNav.database[key], cont, body, ul);\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    // landing page\n    var dom = this.getDatabaseDom(apiNavConfig.subNav.database.createDatabase.action, body);\n    cont.appendChild(dom);\n    return cont;\n} // getDatabaseExplorer\n\n// get schema api calls - on click of SchemaAPI nav bar - submenus of schema Api defined here\nApiExplorer.prototype.getSchemaApi = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.schema){\n        if (apiNavConfig.subNav.schema.hasOwnProperty(key)) {\n            this.createSubNavs('schema', apiNavConfig.subNav.schema[key], cont, body, ul);\n        }\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    var dom = this.getShowApiDom(apiNavConfig.subNav.schema.getSchema.action, body);\n    cont.appendChild(dom);\n    return cont;\n} // getSchemaApi\n\n// get document api calls - on click of DocumentAPI nav bar\nApiExplorer.prototype.getDocumentApi = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.document){\n        if (apiNavConfig.subNav.document.hasOwnProperty(key)) {\n            this.createSubNavs('document', apiNavConfig.subNav.document[key], cont, body, ul);\n        }\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    var dom = this.getShowApiDom(apiNavConfig.subNav.document.viewDocument.action, body);\n    cont.appendChild(dom);\n    return cont;\n} // getDocumentApi\n\n// get query api calls - on click of QueryAPI nav bar - submenus of Query Api defined here\nApiExplorer.prototype.getQueryApi  = function(cont){\n    var body = document.createElement('div');\n    // list view of Databse tools\n    var ul = document.createElement('ul');\n    ul.setAttribute('class','terminus-ul-horizontal');\n    // loop over apiNavConfig\n    for (var key in apiNavConfig.subNav.query){\n        if (apiNavConfig.subNav.query.hasOwnProperty(key)) {\n            this.createSubNavs('query', apiNavConfig.subNav.query[key], cont, body, ul);\n        }\n    } // for apiNavConfig\n    cont.appendChild(ul);\n    var dom = this.getQueryApiDom(apiNavConfig.subNav.query.select.action, body);\n    cont.appendChild(dom);\n    return cont;\n} //getQueryApi\n\n/***** Api Content view  *****/\n// get database dom\nApiExplorer.prototype.getDatabaseDom = function(mode, body){\n    var self = this;\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // get signature\n    var b = this.getSignature(mode);\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    //form to get database id\n    if(mode == 'create') this.getForm( null, body, false, mode, 'URL : server/database_id');\n    else this.getForm( null, body, true, mode, 'URL : server/database_id');\n    return body;\n} // getConnectExplorer\n\n//get create & delete db form\nApiExplorer.prototype.getServerForm = function(){\n  // form\n  var form = document.createElement('form');\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var inpLabel = document.createElement('label');\n  inpLabel.setAttribute('class', 'terminus-control-label');\n  inpLabel.setAttribute('for', 'basicinput');\n  inpLabel.innerHTML = 'Url:';\n  fd.appendChild(inpLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var inpId = document.createElement('input');\n  inpId.setAttribute('type', 'text');\n  inpId.setAttribute('id', 'basicinput');\n  inpId.setAttribute('class', 'terminus-input-text');\n  inpId.setAttribute('placeholder', 'URL : server_url');\n  if(this.val) inpId.value = this.val;\n  cd.appendChild(inpId);\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var keyLabel = document.createElement('label');\n  keyLabel.setAttribute('class', 'terminus-control-label');\n  keyLabel.setAttribute('for', 'basicinput');\n  keyLabel.innerHTML = 'Key:';\n  fd.appendChild(keyLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var key = document.createElement('input');\n  key.setAttribute('type', 'text');\n  key.setAttribute('id', 'basicinput');\n  key.setAttribute('class', 'span8 terminus-input-text');\n  key.setAttribute('placeholder', 'Key : key');\n  if(this.val) key.value = this.val;\n  cd.appendChild(key);\n\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n  button.setAttribute('type', 'button');\n  button.innerHTML = 'Send Api';\n  var gatherips = function(){\n    var input = {};\n    input.url = inpId.value;\n    input.key = key.value;\n    return input;\n  }\n  var resd = document.createElement('div');\n  form.appendChild(button);\n  form.appendChild(resd);\n  var self = this;\n  button.addEventListener(\"click\", function(){\n    var buttonSelf = this;\n    //opts = {};\n    var input = gatherips();\n    self.client.connect(input.url, input.key)\n    .then(function(response){\n      TerminusClient.FrameHelper.removeChildren(resd);\n      var resultDom = UTILS.showHttpResult(response, 'connect', resd, self.ui);\n    });\n  }) // button click\n  return form;\n} // getServerForm()\n\n// get database api calls - on click of databaseAPI nav bar - submenus of database Api defined here\nApiExplorer.prototype.getDatabaseExplorer = function(cont){\n  var body = document.createElement('div');\n  // list view of Databse tools\n  var ul = document.createElement('ul');\n  ul.setAttribute('class','terminus-ul-horizontal');\n  // loop over apiNavConfig\n  for (var key in apiNavConfig.subNav.database){\n      if (apiNavConfig.subNav.database.hasOwnProperty(key)) {\n          this.createSubNavs('database', apiNavConfig.subNav.database[key], cont, body, ul);\n      }\n  } // for apiNavConfig\n  cont.appendChild(ul);\n  // landing page\n  var dom = this.getDatabaseDom(apiNavConfig.subNav.database.createDatabase.action, body);\n  cont.appendChild(dom);\n  return cont;\n} // getDatabaseExplorer\n\n\n// get schema & document dom\nApiExplorer.prototype.getShowApiDom = function(action, body){\n    var self = this;\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // signature\n    var b = this.getSignature(action);\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // get input\n    switch(action){\n        case 'getSchema':\n            this.getForm( 'schema', body, true, action, 'URL : server/database_id');\n        break;\n        case 'getClassFrames':\n            this.getForm( 'getClassFrames', body, true, action, 'URL : server/database_id');\n        break;\n        case 'updateSchema':\n            this.getForm( 'schema', body, false, action, 'URL : server/database_id');\n        break;\n        case 'viewDocument':\n            this.getForm('document', body, true, action, 'URL : server/database_id/document/document_id');\n        break;\n        case 'deleteDocument':\n            this.getForm('document', body, true, action, 'URL : server/database_id/document/document_id');\n        break;\n        case 'createDocument':\n            this.getForm('document', body, false, action, 'URL : server/database_id/document/document_id');\n        break;\n        case 'updateDocument':\n            this.getForm('document', body, false, action, 'URL : server/database_id/document/document_id');\n        break;\n        default:\n            console.log('Invalid Api Call on form');\n        break;\n   }// switch(action)\n\n   return body;\n } // getShowApiDom()\n\n// get query api dom\nApiExplorer.prototype.getQueryApiDom = function(action, body){\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    // signature\n    var b = this.getSignature(action);\n    body.appendChild(b);\n    // get header Parameter\n    body.appendChild(UTILS.getHeaderDom('Parameters'));\n    var br = document.createElement('BR');\n    body.appendChild(br);\n    this.getForm( 'query', body, false, action, 'URL : server/database_id');\n    return body;\n} // getQueryApiDom\n\n/*ApiExplorer.prototype.getClassFramesForm = function(){\n    // form\n    var form = document.createElement('form');\n    form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var inpLabel = document.createElement('label');\n    inpLabel.setAttribute('class', 'terminus-control-label');\n    inpLabel.setAttribute('for', 'basicinput');\n    inpLabel.innerHTML = 'Url:';\n    fd.appendChild(inpLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpUrl = document.createElement('input');\n    inpUrl.setAttribute('type', 'text');\n    inpUrl.setAttribute('id', 'basicinput');\n    inpUrl.setAttribute('class', 'span8 terminus-input-text');\n    inpUrl.setAttribute('placeholder', 'URL : database_url');\n    if(this.val) inpUrl.value = this.val;\n    cd.appendChild(inpUrl);\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var inpLabel = document.createElement('label');\n    inpLabel.setAttribute('class', 'terminus-control-label');\n    inpLabel.setAttribute('for', 'basicinput');\n    inpLabel.innerHTML = 'Url/ ID:';\n    fd.appendChild(inpLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpDocUrl = document.createElement('input');\n    inpDocUrl.setAttribute('type', 'text');\n    inpDocUrl.setAttribute('id', 'basicinput');\n    inpDocUrl.setAttribute('class', 'span8 terminus-input-text');\n    inpDocUrl.setAttribute('placeholder', 'Url or ID of document class');\n    cd.appendChild(inpDocUrl);\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var optLabel = document.createElement('label');\n    optLabel.setAttribute('class', 'terminus-control-label');\n    optLabel.setAttribute('for', 'basicinput');\n    optLabel.innerHTML = 'Options:';\n    fd.appendChild(optLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var optInp = document.createElement('input');\n    optInp.setAttribute('type', 'text');\n    optInp.setAttribute('id', 'basicinput');\n    optInp.setAttribute('class', 'span8 terminus-input-text');\n    optInp.setAttribute('placeholder', 'options');\n    cd.appendChild(optInp);\n    var button = document.createElement('button');\n    button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n    button.setAttribute('type', 'button');\n    button.innerHTML = 'Send Api';\n    var gatherips = function(){\n        var input = {};\n        input.url = inpUrl.value;\n        input.docUrl = inpDocUrl.value;\n        input.options = optInp.value;\n        return input;\n    }\n    var self = this;\n    button.addEventListener(\"click\", function(form){\n      var input = gatherips();\n      var buttonSelf = this;\n      opts = {};\n      opts.explorer = true;\n      self.client.getClassFrame(input.url, input.docUrl, opts)\n      .then(function(response){\n          var currForm = buttonSelf.parentNode;\n          var resultDom = UTILS.showHttpResult(response, 'getClassFrames', currForm, self.ui);\n      });\n    }) // button click\n    form.appendChild(button);\n    return form;\n}   */\n\n// get form for all Apis\nApiExplorer.prototype.getForm = function(curApi, body, view, action, urlPlaceholder){\n    // form\n    var formDoc = document.createElement('form');\n    formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    formDoc.appendChild(fd);\n    var urlLabel = document.createElement('label');\n    urlLabel.setAttribute('class', 'terminus-control-label');\n    urlLabel.setAttribute('for', 'basicinput');\n    urlLabel.innerHTML = 'Url:';\n    fd.appendChild(urlLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpUrl = document.createElement('input');\n    inpUrl.setAttribute('type', 'text');\n    inpUrl.setAttribute('id', 'basicinput');\n    inpUrl.setAttribute('class', 'span8 terminus-input-text');\n    inpUrl.setAttribute('placeholder', urlPlaceholder);\n    cd.appendChild(inpUrl);\n    // add extra form fields based on current api chosen\n    switch(curApi){\n        case 'getClassFrames':\n            var fd = document.createElement('div');\n            fd.setAttribute('class', 'terminus-control-group');\n            formDoc.appendChild(fd);\n            var docUrlLabel = document.createElement('label');\n            docUrlLabel.setAttribute('class', 'terminus-control-label');\n            docUrlLabel.setAttribute('for', 'basicinput');\n            docUrlLabel.innerHTML = 'Url/ ID:';\n            fd.appendChild(docUrlLabel);\n            var cd = document.createElement('div');\n            cd.setAttribute('class', 'terminus-controls');\n            fd.appendChild(cd);\n            var inpDocUrl = document.createElement('input');\n            inpDocUrl.setAttribute('type', 'text');\n            inpDocUrl.setAttribute('id', 'basicinput');\n            inpDocUrl.setAttribute('class', 'span8 terminus-input-text');\n            inpDocUrl.setAttribute('placeholder', 'Url or ID of document class');\n            cd.appendChild(inpDocUrl);\n        break;\n        case 'schema':\n            //encoding\n           /* var fd = document.createElement('div');\n            fd.setAttribute('class', 'terminus-control-group');\n            formDoc.appendChild(fd);\n            var encLabel = document.createElement('label');\n            encLabel.setAttribute('class', 'terminus-control-label');\n            encLabel.setAttribute('for', 'basicinput');\n            encLabel.innerHTML = 'Encoding:';\n            fd.appendChild(encLabel);\n            var cd = document.createElement('div');\n            cd.setAttribute('class', 'terminus-controls');\n            fd.appendChild(cd);\n            var inpEnc = document.createElement('select');\n            inpEnc.setAttribute('style', 'height: 50px;width: 300px;padding: 10px;');\n            inpEnc.setAttribute('placeholder', 'turtle');\n            var optTurt = document.createElement('option');\n            optTurt.setAttribute('value', 'terminus:turtle');\n            optTurt.appendChild(document.createTextNode('turtle'));\n            inpEnc.appendChild(optTurt);\n            var optJld = document.createElement('option');\n            optJld.setAttribute('value', 'terminus:jsonld');\n            optJld.appendChild(document.createTextNode('jsonLD'));\n            inpEnc.appendChild(optJld);\n            cd.appendChild(inpEnc); */\n        break;\n    }\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    formDoc.appendChild(fd);\n    var keyLabel = document.createElement('label');\n    keyLabel.setAttribute('class', 'terminus-control-label');\n    keyLabel.setAttribute('for', 'basicinput');\n    keyLabel.innerHTML = 'Key:';\n    fd.appendChild(keyLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpKey = document.createElement('input');\n    inpKey.setAttribute('type', 'text');\n    inpKey.setAttribute('id', 'basicinput');\n    inpKey.setAttribute('class', 'span8 terminus-input-text');\n    inpKey.setAttribute('placeholder', 'Key');\n    cd.appendChild(inpKey);\n    if(!view){\n        // include text area only if call is type post\n        var fd = document.createElement('div');\n        fd.setAttribute('class', 'terminus-control-group');\n        formDoc.appendChild(fd);\n        var docLabel = document.createElement('label');\n        docLabel.setAttribute('class', 'terminus-control-label');\n        docLabel.setAttribute('for', 'basicinput');\n        if(curApi == 'query') docLabel.innerHTML = 'Query:';\n        docLabel.innerHTML = 'Document:';\n        fd.appendChild(docLabel);\n        var cd = document.createElement('div');\n        cd.setAttribute('class', 'terminus-controls');\n        fd.appendChild(cd);\n        var inpDoc = document.createElement('textarea');\n        cd.appendChild(inpDoc);\n        inpDoc.setAttribute('class', 'terminus-api-explorer-text-area');\n        UTILS.stylizeEditor(this.ui, inpDoc, 'api-doc', 'javascript');\n    }\n    body.appendChild(formDoc);\n    // gather inputs\n    var inp ={};\n    inp.url = inpUrl;\n    inp.key = inpKey;\n    if(curApi == 'getClassFrames') inp.docUrl = inpDocUrl;\n    //if(curApi == 'schema') inp.enc = inpEnc;\n    if(!view) inp.doc = inpDoc;\n    var form = this.getApiSendButton(action, inp);\n    body.appendChild(form);\n}\n\n// define event listeners on send api of schema & documents\n\nApiExplorer.prototype.getApiForm = function(action, input){\n  // form\n  var form = document.createElement('form');\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n  button.setAttribute('type', 'button');\n  button.innerHTML = 'Send Api';\n  form.appendChild(button);\n  var resd = document.createElement('div');\n  form.appendChild(resd);\n  var self = this;\n  switch(action){\n    case 'getSchema':\n      button.addEventListener(\"click\", function(){\n        var opts = {};\n        opts['terminus:encoding'] = input.enc.value;\n        opts['terminus:user_key'] = 'terminus:turtle';\n        var schurl = input.url.value;\n        var buttonSelf = this;\n        self.client.getSchema(schurl, opts)\n        .then(function(response){\n          TerminusClient.FrameHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, 'getSchema', resd, self.ui);\n        });\n      }) // button click\n    break;\n    case 'updateSchema':\n      button.addEventListener(\"click\", function(){\n        var buttonSelf = this;\n        opts = {};\n        opts['terminus:encoding'] = input.enc.value;\n        opts['terminus:user_key'] = 'terminus:turtle';\n        var schurl = input.url.value;\n        self.client.connectionConfig.connected_mode = false;\n        self.client.updateSchema(schurl, input.doc.value, opts)\n        .then(function(response){\n          var gtxtar = document.createElement('textarea');\n          gtxtar.setAttribute('readonly', true);\n          gtxtar.innerHTML = response;\n          var currForm = buttonSelf.parentNode;\n          currForm.appendChild(gtxtar);\n          UTILS.stylizeEditor(this.ui, txtar, 'schema', 'turtle');\n        });\n      }) // button click\n    break;\n    case 'viewDocument':\n      button.addEventListener(\"click\", function(){\n      var dcurl = input.value;\n      var buttonSelf = this;\n      var opts = {};\n      opts.format = 'turtle';\n      self.client.getDocument(dcurl, opts)\n      .then(function(response){\n        TerminusClient.FrameHelper.removeChildren(resd);\n        var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n      });\n    }) // button click\n    break;\n    case 'deleteDocument':\n      button.addEventListener(\"click\", function(){\n      var dcurl = input.value;\n      var buttonSelf = this;\n      var opts = {};\n      self.client.deleteDocument(dcurl, opts)\n      .then(function(response){\n        TerminusClient.FrameHelper.removeChildren(resd);\n        var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n      });\n    }) // button click\n    break;\n    case 'createDocument':\n      button.addEventListener(\"click\", function(){\n        var dcurl = input.schemaUrlDom.value;\n        var payload = input.htmlEditor.getValue();\n        var buttonSelf = this;\n        opts = {};\n        self.client.createDocument(dcurl, payload, opts)\n        .then(function(response){\n          TerminusClient.FrameHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n        });\n      }) // button click\n    break;\n    case 'updateDocument':\n      button.addEventListener(\"click\", function(){\n        var dcurl = input.schemaUrlDom.value;\n        var payload = input.htmlEditor.getValue();\n        var buttonSelf = this;\n        opts = {};\n        opts.editmode = 'replace';\n        opts.format = 'json';\n        self.client.updateDocument(dcurl, payload, opts)\n        .then(function(response){\n          TerminusClient.FrameHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n        });\n      }) // button click\n    break;\n  } // switch(action)\n\n  var br = document.createElement('BR');\n  form.appendChild(br);\n  var br = document.createElement('BR');\n  form.appendChild(br);\n\n  return form;\n} // getApiForm()\n\n\n// define event listeners on send api of schema & documents\nApiExplorer.prototype.getApiSendButton = function(action, input){\n    // form\n    var form = document.createElement('form');\n    form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n    var button = document.createElement('button');\n    button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n    button.setAttribute('type', 'button');\n    button.innerHTML = 'Send Api';\n    form.appendChild(button);\n    var resd = document.createElement('div');\n    form.appendChild(resd);\n    var self = this;\n    switch(action){\n        case 'connect':\n            button.addEventListener(\"click\", function(){\n                self.client.connect(input.url.value, input.key.value)\n                .then(function(response){\n                \tTerminusClient.FrameHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n               });\n            }) // button click\n        break;\n        case 'create':\n            button.addEventListener(\"click\", function(form){\n              self.client.createDatabase(input.url.value, JSON.parse(input.doc.value), input.key.value)\n              .then(function(response){\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n            }) // button click\n        break;\n        case 'delete':\n            button.addEventListener(\"click\", function(){\n              var opts ={}\n              self.client.deleteDatabase(input.url.value, input.key.value)\n              .then(function(response){\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n            }) // button click\n        break\n        case 'getSchema':\n            button.addEventListener(\"click\", function(){\n                var opts = {};\n                opts['terminus:encoding'] = 'terminus:turtle';\n                opts['terminus:user_key'] = input.key.value;\n                var schurl = input.url.value;\n                self.client.getSchema(schurl, opts)\n                .then(function(response){\n                \tTerminusClient.FrameHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n                });\n            }) // button click\n        break;\n        case 'updateSchema':\n            button.addEventListener(\"click\", function(){\n                opts = {};\n                opts['terminus:encoding'] = 'terminus:turtle';\n                opts['terminus:user_key'] = input.key.value;\n                var payload = input.doc.value;\n                var schurl = input.url.value;\n                self.client.connectionConfig.connected_mode = false;\n                self.client.updateSchema(schurl, input.doc.value, opts)\n                //self.client.updateSchema(schurl, input.doc.value, opts)\n                .then(function(response){\n                \tTerminusClient.FrameHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n                });\n            }) // button click\n        break;\n        case 'getClassFrames':\n            button.addEventListener(\"click\", function(form){\n                var schurl = input.url.value;\n                opts = {};\n                opts.explorer = true;\n                self.client.getClassFrame(input.url, JSON.parse(input.docUrl.value), opts)\n                .then(function(response){\n                    var currForm = buttonSelf.parentNode;\n                    var resultDom = UTILS.showHttpResult(response, action, currForm, self.ui);\n                });\n            }) // button click\n        break;\n        case 'viewDocument':\n          button.addEventListener(\"click\", function(){\n              var dcurl = input.url.value;\n              var opts = {};\n              opts['terminus:encoding'] = \"jsonld\";\n              opts['terminus:user_key'] = input.key.value;\n              self.client.getDocument(dcurl, opts)\n              .then(function(response){\n            \t    TerminusClient.FrameHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n        }) // button click\n        break;\n        case 'deleteDocument':\n          button.addEventListener(\"click\", function(){\n              var dcurl = input.url.value;\n              var opts = {};\n              opts.key = input.key.value;\n              self.client.deleteDocument(dcurl, opts)\n              .then(function(response){\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n          }) // button click\n        break;\n        case 'createDocument':\n          button.addEventListener(\"click\", function(){\n              var dcurl = input.url.value;\n              var payload = input.doc.value;\n              opts = {};\n              opts['terminus:encoding'] = \"jsonld\";\n              opts['terminus:user_key'] = input.key.value;\n              self.client.createDocument(dcurl, JSON.parse(payload), opts)\n              .then(function(response){\n            \t   TerminusClient.FrameHelper.removeChildren(resd);\n                   var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n               });\n          }) // button click\n        break;\n        case 'updateDocument':\n          button.addEventListener(\"click\", function(){\n            var dcurl = input.url.value;\n            var payload = input.doc.value;\n            var buttonSelf = this;\n            opts = {};\n            opts['terminus:encoding'] = \"jsonld\";\n            opts['terminus:user_key'] = input.key.value;\n            self.client.updateDocument(dcurl, JSON.parse(payload), opts)\n            .then(function(response){\n            \tTerminusClient.FrameHelper.removeChildren(resd);\n                var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n            });\n          }) // button click\n        break;\n        case 'select':\n            button.addEventListener(\"click\", function(){\n                var opts = {};\n                opts.key = input.key.value;\n                var doc = JSON.parse(input.doc.value);\n                self.client.select(input.url.value, doc, opts)\n                .then(function(response){\n                \tTerminusClient.FrameHelper.removeChildren(resd);\n                    var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n                });\n            }) // button click\n        break;\n        case 'update':\n            button.addEventListener(\"click\", function(){\n              var opts = {};\n              opts.key = input.key.value;\n              var doc = JSON.parse(input.doc.value);\n              self.client.update(input.url.value, doc, opts)\n              .then(function(response){\n            \t  TerminusClient.FrameHelper.removeChildren(resd);\n                  var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n              });\n            }) // button click\n        break;\n        default:\n            console.log('Invalid Api call on button');\n        break;\n    } // switch(action)\n    var br = document.createElement('BR');\n    form.appendChild(br);\n    var br = document.createElement('BR');\n    form.appendChild(br);\n    return form;\n} // getApiSendButton()\n\n// get signature of api calls\nApiExplorer.prototype.getSignature = function(action){\n    var api = document.createElement('div');\n    // get header signature\n    var sg = document.createElement('button');\n    sg.appendChild(document.createTextNode('Click to read API Signature'));\n    sg.setAttribute('class', 'terminus-collapsible');\n    ic = document.createElement('i');\n    ic.setAttribute('class', 'terminus-cheveron-float fa fa-chevron-down');\n    sg.appendChild(ic);\n    api.appendChild(sg);\n    var br = document.createElement('BR');\n    api.appendChild(br);\n    var cl = document.createElement('div');\n    cl.setAttribute('class', 'terminus-collapsible-content content');\n    var sig = UTILS.getFunctionSignature(action);\n    var txt = document.createTextNode(sig.spec);\n    var pre = document.createElement('pre');\n    pre.setAttribute('class', 'terminus-api-signature-pre');\n    pre.appendChild(txt);\n    var txt =  document.createTextNode(sig.descr);\n    pre.appendChild(txt);\n    var br = document.createElement('BR');\n    pre.appendChild(br);\n    var br = document.createElement('BR');\n    pre.appendChild(br);\n    var txt = document.createTextNode(sig.result);\n    pre.appendChild(txt);\n    cl.appendChild(pre);\n    api.appendChild(cl);\n    var br = document.createElement('BR');\n    api.appendChild(br);\n    sg.addEventListener('click', function(){\n        UTILS.tolggleContent(ic, cl);\n    });\n    return api;\n} // getSignature()\n\n// displays signature only on click\nfunction tolggleSignatureContent(content){\n    if (content.style.display === \"block\")\n        content.style.display = \"none\";\n    else content.style.display = \"block\";\n}\n\nmodule.exports=ApiExplorer\n","\nconst CONST = require('./const');\nconst DispatchRequest = require('./dispatchRequest');\nconst ErrorMessage = require('./errorMessage');\nconst ConnectionCapabilities = require('./connectionCapabilities');\nconst ConnectionConfig = require('./connectionConfig');\nconst UTILS = require('./utils.js');\n\n/**\n * @file Javascript WOQL client object\n * @license Apache Version 2\n * @summary Simple Javascript Client for accessing the Terminus DB API\n */\n\n/**\n  * @param {Object} params\n  */\nfunction WOQLClient(params) {\n\t// current connection context variables\n\tconst key = params ? params.key : undefined;\n\tthis.use_fetch = false;\n\tthis.return_full_response = false;\n\tthis.connectionConfig = new ConnectionConfig(params);\n\tthis.connection = new ConnectionCapabilities(this.connectionConfig, key);\n}\n\nWOQLClient.CONST = CONST;\n\n/**\n * Connect to a Terminus server at the given URI with an API key\n * Stores the terminus:ServerCapability document returned\n * in the connection register which stores, the url, key, capabilities,\n * and database meta-data for the connected server\n *\n * If the curl argument is false or null,\n * this.connectionConfig.server will be used if present,\n * or the promise will be rejected.\n\n * @param  {string} curl Terminus server URI\n * @param  {string} API  key\n * @return {Promise}\n * @public\n */\nWOQLClient.prototype.connect = function (curl, key) {\n\tif (curl && !this.connectionConfig.setServer(curl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(curl, CONST.CONNECT))\n\t\t);\n\t}\n\tconst serverURL = this.connectionConfig.serverURL();\n\tif (key) {\n\t\tthis.connection.setClientKey(serverURL, key);\n\t}\n\t// unset the current server setting until successful connect\n\tthis.connectionConfig.server = false;\n\tconst self = this;\n\treturn this.dispatch(serverURL, CONST.CONNECT).then((response) => {\n\t\tself.connectionConfig.server = serverURL;\n\t\tself.connection.addConnection(serverURL, response);\n\t\treturn response;\n\t});\n};\n\n/**\n * Create a Terminus Database by posting\n * a terminus:Database document to the Terminus API\n *\n * The dburl argument can be\n *    1) a valid URL of a terminus database or\n *    2) a valid Terminus database id or\n *    3) can be omitted\n * \t\tin case 2) the current server will be used,\n * \t\tin case 3) the database id will be set from the @id field of the terminuse:Database document.\n *\n * The second (details) argument contains a terminus:Database document\n * with a mandatory rdfs:label field and an optional rdfs:comment field.\n * The third (key) argument contains an optional API key\n *\n * @param {string} dburl Terminus server URI or a TerminusID\n * @param {object} details\n * @param {string} key\n * @return {Promise}\n * @public\n */\nWOQLClient.prototype.createDatabase = function (dburl, details, key) {\n\tif (dburl && !this.connectionConfig.setDB(dburl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(dburl, 'Create Database'))\n\t\t);\n\t}\n\tif (\n\t\tdetails\n    && details['@id']\n    && !this.connectionConfig.setDB(details['@id'], details['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(details['@id'], 'Create Database'))\n\t\t);\n\t}\n\tdetails = this.makeDocumentConsistentWithURL(details, this.connectionConfig.dbURL());\n\n\tconst opts = {};\n\tif (key) {\n\t\topts.key = key;\n\t}\n\tconst doc = this.addOptionsToDocument(details, opts);\n\treturn this.dispatch(this.connectionConfig.dbURL('create'), CONST.CREATE_DATABASE, doc);\n};\n\n/**\n * Delete a Database\n * @param {String} dburl it is a terminusDB Url or a terminusDB Id\n * @param {String} key an optional API key\n * @return {Promise}\n *\n * if dburl is omitted, the current server and database will be used\n */\nWOQLClient.prototype.deleteDatabase = function (dburl, key) {\n\tif (dburl && !this.connectionConfig.setDB(dburl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(dburl, 'Delete Database'))\n\t\t);\n\t}\n\tconst opts = {};\n\n\tif (key) {\n\t\topts.key = key;\n\t}\n\n\tconst self = this;\n\treturn this.dispatch(`${this.connectionConfig.dbURL()}`, CONST.DELETE_DATABASE, opts).then(\n\t\t(response) => {\n\t\t\tself.connection.removeDB();\n\t\t\treturn response;\n\t\t}\n\t);\n};\n\n/**\n * Retrieves the schema of the specified database\n *\n * @param {string} schurl TerminusDB server URL or a valid TerminusDB Id or omitted\n * @param {object} opts is an options object\n * @return {Promise}\n *\n * opts.format is optional and defines which format is requested (*json / turtle)\n * opts.key is an optional API key\n */\nWOQLClient.prototype.getSchema = function (schurl, opts) {\n\tif (schurl && !this.connectionConfig.setSchemaURL(schurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(schurl, 'Get Schema'))\n\t\t);\n\t}\n\t// consoleco.log('schemaURL', this.connectionConfig.schemaURL());\n\treturn this.dispatch(this.connectionConfig.schemaURL(), CONST.GET_SCHEMA, opts);\n};\n\n/**\n * Updates the Schema of the specified database\n *\n * @param {string} schurl TerminusDB server URL or a valid TerminusDB Id or omitted\n * @param {object} doc is a valid owl ontology in json-ld or turtle format\n * @param {object} opts is an options object\n * @return {Promise}\n *\n * if omitted the current server and database will be used\n * opts.format is used to specify which format is being used (*json / turtle)\n * opts.key is an optional API key\n */\nWOQLClient.prototype.updateSchema = function (schurl, doc, opts) {\n\tif (schurl && !this.connectionConfig.setSchemaURL(schurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(schurl, 'Update Schema'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(doc, opts);\n\treturn this.dispatch(this.connectionConfig.schemaURL(), 'update_schema', doc);\n};\n\n/**\n * Creates a new document in the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus database (an id will be randomly assigned) or\n * 2) a valid URL or of a terminus document (the document will be given the passed URL) or\n * 3) a valid terminus document id (the current server and database will be used)\n * 4) can be omitted (the URL will be taken from the document if present)\n * The second argument (doc) is a valid document in json-ld\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.createDocument = function (docurl, doc, opts) {\n\tif (docurl && !this.connectionConfig.setDocument(docurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Create Document'))\n\t\t);\n\t} if (\n\t\tdoc\n    && doc['@id']\n    && !this.connectionConfig.setDocument(doc['@id'], doc['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(doc['@id'], 'Create Document'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(\n\t\tthis.makeDocumentConsistentWithURL(doc, this.connectionConfig.docURL()),\n\t\topts\n\t);\n\treturn this.dispatch(this.connectionConfig.docURL(), 'create_document', doc);\n};\n\n/**\n * Retrieves a document from the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database\n * the second argument (opts) is an options json -\n * \t\topts.key is an optional API key\n * \t\topts.shape is frame | *document\n */\nWOQLClient.prototype.getDocument = function (docurl, opts) {\n\tif (docurl && (!this.connectionConfig.setDocument(docurl) || !this.connectionConfig.docid)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Get Document'))\n\t\t);\n\t}\n\treturn this.dispatch(this.connectionConfig.docURL(), 'get_document', opts);\n};\n\n/**\n * Updates a document in the specified database with a new version\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database or\n * 3) omitted in which case the id will be taken from the document @id field\n * the second argument (doc) is a document in json-ld format\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.updateDocument = function (docurl, doc, opts) {\n\tif (docurl && !this.connectionConfig.setDocument(docurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Update Document'))\n\t\t);\n\t}\n\tif (doc && doc['@id']\n    && !this.connectionConfig.setDocument(doc['@id'], doc['@context'])\n\t) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(doc['@id'], 'Update Document'))\n\t\t);\n\t}\n\tdoc = this.addOptionsToDocument(\n\t\tthis.makeDocumentConsistentWithURL(doc, this.connectionConfig.docURL()),\n\t\topts\n\t);\n\treturn this.dispatch(this.connectionConfig.docURL(), 'update_document', doc);\n};\n\n/**\n * Deletes a document from the specified database\n *\n * The first (docurl) argument can be\n * 1) a valid URL of a terminus document or\n * 2) a valid ID of a terminus document in the current database\n * 3) omitted - the current document will be used\n * the second argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.deleteDocument = function (docurl, opts) {\n\tif (docurl && (!this.connectionConfig.setDocument(docurl) || !this.connectionConfig.docid)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(docurl, 'Delete Document'))\n\t\t);\n\t}\n\treturn this.dispatch(this.connectionConfig.docURL(), 'delete_document', opts);\n};\n\n/**\n * Executes a read-only WOQL query on the specified database and returns the results\n *\n * @param {string} qurl TerminusDB server URL or omitted (the current DB will be used)\n * @param {string} woql is a \"woql query select statement\"\n * @param {object} opts it can contents the API key (opts.key)\n *\n */\nWOQLClient.prototype.select = function (qurl, woql, opts) {\n\tif (qurl && !this.connectionConfig.setQueryURL(qurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(qurl, 'Select'))\n\t\t);\n\t}\n\tlet q = { 'terminus:query': JSON.stringify(woql) };\n\tq = this.addOptionsToWOQL(q, opts);\n\treturn this.dispatch(this.connectionConfig.queryURL(), CONST.WOQL_SELECT, q);\n};\n\n/**\n * Executes a WOQL query on the specified database which updates the state and returns the results\n *\n * The first (qurl) argument can be\n * 1) a valid URL of a terminus database or\n * 2) omitted - the current database will be used\n * the second argument (woql) is a woql select statement encoded as a string\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.update = function (qurl, woql, opts) {\n\tif (qurl && !this.connectionConfig.setQueryURL(qurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(qurl, 'Update'))\n\t\t);\n\t}\n\twoql = this.addOptionsToWOQL(woql, opts);\n\treturn this.dispatch(this.connectionConfig.queryURL(), 'woql_update', woql);\n};\n\n/**\n * Retrieves a WOQL query on the specified database which updates the state and returns the results\n *\n * The first (cfurl) argument can be\n * 1) a valid URL of a terminus database or\n * 2) omitted - the current database will be used\n * the second argument (cls) is the URL / ID of a document class that exists in the database schema\n * the third argument (opts) is an options json - opts.key is an optional API key\n */\nWOQLClient.prototype.getClassFrame = function (cfurl, cls, opts) {\n\tif (cfurl && !this.connectionConfig.setClassFrameURL(cfurl)) {\n\t\treturn Promise.reject(\n\t\t\tnew URIError(ErrorMessage.getInvalidURIMessage(cfurl, 'Get Class Frame'))\n\t\t);\n\t}\n\tif (!opts) opts = {};\n\topts['terminus:class'] = cls;\n\treturn this.dispatch(this.connectionConfig.frameURL(), 'class_frame', opts);\n};\n\n/*\n * Utility functions for adding standard fields to API arguments\n */\nWOQLClient.prototype.addOptionsToWOQL = function (woql, opts) {\n\tif (opts && opts.key) {\n\t\twoql.key = opts.key;\n\t}\n\treturn woql;\n};\n\nWOQLClient.prototype.addOptionsToDocument = function (doc, opts) {\n\tconst pdoc = {};\n\tpdoc['@context'] = doc['@context'];\n\tif (pdoc['@context'] && doc['@id']) { // add blank node prefix as document base url\n\t\tpdoc['@context']._ = `${doc['@id']}/`;\n\t}\n\tif (opts && opts['terminus:encoding'] && opts['terminus:encoding'] === 'terminus:turtle') {\n\t\tpdoc['terminus:turtle'] = doc;\n\t\tpdoc['terminus:schema'] = this.connectionConfig.schemaURL();\n\t\tdelete pdoc['terminus:turtle']['@context'];\n\t} else {\n\t\tpdoc['terminus:document'] = doc;\n\t\tdelete pdoc['terminus:document']['@context'];\n\t}\n\tpdoc['@type'] = 'terminus:APIUpdate';\n\tif (opts && opts['terminus:user_key']) {\n\t\tpdoc['terminus:user_key'] = opts['terminus:user_key'];\n\t}\n\tif (opts && opts.key) {\n\t\tpdoc['terminus:user_key'] = opts.key;\n\t}\n\treturn pdoc;\n};\n\nWOQLClient.prototype.addKeyToPayload = function (payload, url) {\n\tif (typeof payload !== 'object')payload = {};\n\tif (payload.key) {\n\t\tpayload['terminus:user_key'] = payload.key;\n\t\tdelete payload.key;\n\t} else if (this.connection.getClientKey()) {\n\t\tpayload['terminus:user_key'] = this.connection.getClientKey();\n\t} else if (this.connection.getClientKey(url)) {\n\t\tpayload['terminus:user_key'] = this.connection.getClientKey(url);\n\t}\n\treturn payload;\n};\n\nWOQLClient.prototype.makeDocumentConsistentWithURL = function (doc, dburl) {\n\tdoc['@id'] = dburl;\n\treturn doc;\n};\n\nWOQLClient.prototype.dispatch = function (url, action, payload) {\n\tif (this.connectionConfig.includeKey()) {\n\t\tpayload = this.addKeyToPayload(payload, url);\n\t}\n\tif (this.use_fetch) {\n\t\treturn this.dispatchFetch(url, action, payload);\n\t}\n\treturn DispatchRequest(url, action, payload);\n};\n\n\nWOQLClient.prototype.dispatchFetch = function (url, action, payload) {\n\tconst api = {\n\t\t//mode: 'cors',  no-cors, cors, *same-origin\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrer: 'client', // no-referrer, *client\n\t};\n\tlet hdrs = {};\n\tif (this.connectionConfig.platformEndpoint()) {\n\t\tapi.credentials = 'include'; // include, *same-origin, omit\n\t}\n\tif (payload && payload['terminus:user_key']) {\n\t\thdrs = { Authorization: `Basic ${btoa(`:${payload['terminus:user_key']}`)}` };\n\t\tdelete (payload['terminus:user_key']);\n\t}\n\t// read only API calls - use GET\n\tswitch (action) {\n\tcase CONST.DELETE_DATABASE:\n\tcase CONST.DELETE_DOCUMENT:\n\t\tif (Object.keys(payload).length > 0) url += `?${UTILS.URIEncodePayload(payload)}`;\n\t\tapi.method = 'DELETE';\n\t\tapi.cache = 'no-cache';\n\t\tbreak;\n\tcase CONST.CREATE_DATABASE:\n\tcase CONST.UPDATE_SCHEMA:\n\tcase CONST.CREATE_DOCUMENT:\n\tcase CONST.UPDATE_DOCUMENT:\n\tcase CONST.WOQL_UPDATE:\n\t\tapi.method = 'POST';\n\t\tapi.cache = 'no-cache';\n\t\thdrs['Content-Type'] = 'application/json';\n\t\tapi.body = JSON.stringify(payload);\n\t\tbreak;\n\tcase CONST.GET_SCHEMA:\n\tcase CONST.CONNECT:\n\tcase CONST.CLASS_FRAME:\n\tcase CONST.WOQL_SELECT:\n\tcase CONST.GET_DOCUMENT:\n\tdefault:\n\t\tapi.method = 'GET';\n\t\tif (Object.keys(payload).length > 0) url += `?${UTILS.URIEncodePayload(payload)}`;\n\t}\n\tconst self = this;\n\tif (Object.keys(hdrs).length > 0) {\n\t\tapi.headers = new Headers(hdrs);\n\t}\n\treturn fetch(url, api).then((response) => {\n\t\tif (self.return_full_response) return response;\n\t\tif (response.ok) {\n\t\t\treturn response.json();\n\t\t}\n\t\tself.error = self.parseAPIError(response);\n\t\treturn Promise.reject(new Error(self.getAPIErrorMessage(url, api, self.error)));\n\t});\n};\n\nmodule.exports = WOQLClient;\n","const axios = require('axios');\nconst UTILS = require('./utils.js');\nconst CONST = require('./const.js');\nconst ErrorMessage = require('./errorMessage');\n/*\nAccess-Control-Allow-Credentials   true\nAccess-Control-Allow-Headers  X-PINGOTHER, Content-Type\nAccess-Control-Allow-Methods GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS\nAccess-Control-Allow-Origin: http://localhost:3000 // WILD CARD WILL NOT WORK WHEN POSTING\n*/\n\nfunction btoaImplementation(str) {\n\ttry {\n\t\treturn btoa(str);\n\t} catch (err) {\n\t\t// console.log('in buffer')\n\t\treturn Buffer.from(str).toString('base64');\n\t}\n}\n\nfunction DispatchRequest(url, action, payload) {\n\t/*\n\t*CORS is only required when trying to fetch data from a browser,\n\t*as browsers by default will block requests to different origins\n\t*/\n\tconst options = {\n\t\tmode: 'cors', // no-cors, cors, *same-origin\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrer: 'client',\n\t\t// url:url,\n\t\t// no-referrer, *client\n\t};\n\tif (payload && payload['terminus:user_key']) {\n\t\toptions.headers = { Authorization: `Basic ${btoaImplementation(`:${payload['terminus:user_key']}`)}` };\n\t\tdelete (payload['terminus:user_key']);\n\t}\n\n\tswitch (action) {\n\tcase CONST.DELETE_DATABASE:\n\tcase CONST.DELETE_DOCUMENT:\n\t\tif (payload) {\n\t\t\tconst ext = UTILS.URIEncodePayload(payload);\n\t\t\tif (ext) url += `?${ext}`;\n\t\t}\n\t\treturn axios.delete(url, options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n\t\t\t\tthrow new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t});\n\tcase CONST.CREATE_DATABASE:\n\tcase CONST.UPDATE_SCHEMA:\n\tcase CONST.CREATE_DOCUMENT:\n\tcase CONST.UPDATE_DOCUMENT:\n\tcase CONST.WOQL_UPDATE:\n\t\toptions.headers = options.headers ? options.headers : {};\n\t\toptions.headers['Content-Type'] = 'application/json';\n\t\treturn axios.post(url, JSON.stringify(payload), options)\n\t\t\t.then(response => response.data)\n\t\t\t.catch((err) => {\n\t\t\t\tconst e = new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t\tif (err.response && err.response.data) e.data = err.response.data;\n\t\t\t\tthrow e;\n\t\t\t});\n\tcase CONST.GET_SCHEMA:\n\tcase CONST.CONNECT:\n\tcase CONST.CLASS_FRAME:\n\tcase CONST.WOQL_SELECT:\n\tcase CONST.GET_DOCUMENT:\n\tdefault:\n\t\tif (payload) {\n\t\t\tconst ext = UTILS.URIEncodePayload(payload);\n\t\t\tif (ext) url += `?${ext}`;\n\t\t}\n\t\treturn axios.get(url, options)\n\t\t\t.then((response => response.data))\n\t\t\t.catch((err) => {\n\t\t\t\tthrow new Error(ErrorMessage.getAPIErrorMessage(url, options, err));\n\t\t\t});\n\t}\n}\n\nmodule.exports = DispatchRequest;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\nmodule.exports = function isBuffer (obj) {\n  return obj != null && obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n  config.method = config.method ? config.method.toLowerCase() : 'get';\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","/**\n * Represents a frame for programmatic access to object frame, anywhere within a document\n * Recursive data structure where this.children contains an indexed array of object frames\n * and this.dataframes contains a property indexed array of data frames\n * Every object frame carries a reference to its classframe\n * This gives us instructions as to how to create new frames according to the schema\n * After that it's turtles all the way down.\n * @param cls - ID of the class (URL)\n * @param classframe - an array of frames representing a class\n * @param archetypes list of class frames\n * @param parent parent object\n * @returns\n */\nconst FrameHelper = require('./frameHelper');\nconst FramePattern = require('./framePattern');\n\nfunction ObjectFrame(cls, dataframes, classframes, parent, parentframe) {\n\t// the class of the frame - mandatory\n\tthis.empty();\n\tthis.cls = cls;\n\n\t// array of frames representing the full class frame\n\t// (optional - required to be able to safely add missing properties)\n\tif (classframes && typeof classframes === 'object') {\n\t\tthis.loadClassFrames(classframes);\n\t}\n\tif (dataframes && typeof dataframes === 'object') {\n\t\tthis.originalFrames = dataframes;\n\t\tthis.loadDataFrames(dataframes);\n\t} else {\n\t\tthis.originalFrames = false;\n\t}\n\t// parent object frame\n\tthis.parent = parent;\n\t// original frame used by parent to create me\n\tthis.parentframe = parentframe;\n\t// set to true if this is a newly created document\n\tthis.newDoc = false;\n}\n\n/**\n * Loads class frames for the object's class - the instructions about how to put an object together\n */\nObjectFrame.prototype.loadClassFrames = function (classframes) {\n\tfor (let j = 0; j < classframes.length; j += 1) {\n\t\tif (classframes[j]['@context']) this.jsonld_context = classframes[j]['@context'];\n\n\t\tconst cf = new ClassFrame(classframes[j]);\n\t\tif (cf.isValid()) {\n\t\t\tif(!this.classframes) this.classframes = {};\n\t\t\tif(typeof this.classframes[classframes[j].property] === 'undefined') {\n\t\t\t\tthis.classframes[classframes[j].property] = [];\n\t\t\t}\n\t\t\tthis.classframes[classframes[j].property] = cf;\n\t\t\tif (cf.isObject() && this.properties[classframes[j].property]) {\n\t\t\t\tfor (let i = 0; i < this.properties[classframes[j].property].values.length; i += 1) {\n\t\t\t\t\tthis.properties[classframes[j].property].values[i].loadClassFrames(classframes[j].frame);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n};\n\n/**\n * Does this object have a schema loaded?\n */\nObjectFrame.prototype.hasSchema = function () {\n\treturn !FrameHelper.empty(this.classframes);\n};\n\n/*\n * Loads an array of data frames into the object's internal index\n * {property: [frames]}\n */\nObjectFrame.prototype.loadDataFrames = function (frames) {\n\tif (typeof frames !== 'object' || !frames.length) return undefined;\n\tif (!this.originalFrames) this.originalFrames = frames;\n\tif (!this.subjid && frames[0].domainValue) this.subjid = frames[0].domainValue;\n\tfor (let i = 0; i < frames.length; i += 1) {\n\t\tif (frames[i]['@context']) this.jsonld_context = frames[i]['@context'];\n\t\tlet cframe = this.getPropertyClassFrame(frames[i].property, frames[i]);\n\t\tif (cframe.isClassChoice()) {\n\t\t\tcframe = cframe.getChosenClassFrame(frames[i].range);\n\t\t\tif (!cframe) {\n\t\t\t\tconsole.log(`no choice frame ${frames[i].range}`);\n\t\t\t}\n\t\t} else if (cframe.isLogic()) {\n\t\t\tcframe = cframe.getChosenFrame(frames[i]);\n\t\t}\n\t\tif (cframe) {\n\t\t\tif (typeof this.properties[frames[i].property] === 'undefined') {\n\t\t\t\tthis.properties[frames[i].property] = new PropertyFrame(frames[i].property, cframe, this);\n\t\t\t}\n\t\t\tthis.properties[frames[i].property].addFrame(frames[i]);\n\t\t}\n\t}\n\treturn this;\n};\n\n/*\n * Serialises the javascript object as an array of frames\n */\nObjectFrame.prototype.getAsFrame = function (prop, parent) {\n\tif (this.parentframe) return this.parentframe;\n\tconst ff = { type: 'objectProperty', property: prop };\n\tff.range = this.cls;\n\tff.domain = parent.cls;\n\tff.domainValue = parent.subjid;\n\tff.frame = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tff.frame = ff.frame.concat(ff.frame, this.properties[prop].getAsFrames());\n\t}\n\treturn ff;\n};\n\nObjectFrame.prototype.getAsFrames = function (prop, parent) {\n\tvar frames = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tframes = frames.concat(frames, this.properties[prop].getAsFrames());\n\t}\n\treturn frames;\n}\n\nObjectFrame.prototype.isnew = function () {\n\treturn this.newDoc;\n};\n\n/**\n * Cleans out object and sets everything empty\n */\nObjectFrame.prototype.empty = function () {\n\t// all indexed by property\n\tthis.properties = {};\n\tthis.restrictions = {};\n\tthis.subjid = false;\n\tthis.cls = false;\n};\n\n/*\n * Resets object state to original state\n */\nObjectFrame.prototype.reset = function (prop) {\n\tif (prop) {\n\t\tconst props = [];\n\t\tfor (let i = 0; i < this.originalFrames.length; i += 1) {\n\t\t\tif (this.originalFrames[i].property === prop) {\n\t\t\t\tprops.push(this.originalFrames[i]);\n\t\t\t}\n\t\t}\n\t\tif (this.properties[prop]) this.properties[prop] = [];\n\t\tthis.loadDataFrames(props);\n\t} else {\n\t\tthis.restrictions = {};\n\t\tthis.properties = {};\n\t\tthis.loadDataFrames(this.originalFrames);\n\t}\n};\n\n/*\n * Clears out any specific information from a tree\n */\nObjectFrame.prototype.clear = function () {\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.properties[prop].clear();\n\t}\n\treturn this;\n};\n\n/*\n * Filters the frame and its children\n */\nObjectFrame.prototype.filter = function (rules, onmatch, options) {\n\tconst cascading = (options && options.ignore_failure ? true : false);\n\tvar hits = FramePattern.FramePatternMatcher.testRules(rules, this, onmatch);\n\t//if(hits.length || cascading){\n\t\tfor (const prop of Object.keys(this.properties)) {\n\t\t\tthis.properties[prop].filter(rules, onmatch, options);\n\t\t}\n\t//}\n\treturn this;\n};\n\n\n/**\n * If a class frame is present, it is returned for the given property\n * If no class frame is present and an instance frame is passed in the\n * this enables make it up as you go along editing\n * second argument a class frame will be created from the instance frame.\n */\nObjectFrame.prototype.getPropertyClassFrame = function (prop, instance) {\n\tif (this.classframes && typeof this.classframes === 'object' && typeof this.classframes[prop] === 'object') {\n\t\treturn this.classframes[prop];\n\t}\n\tif (instance) {\n\t\tconst cf = new ClassFrame(instance);\n\t\treturn cf;\n\t}\n\tif (this.properties[prop]) {\n\t\treturn new ClassFrame(this.properties[prop].values[0]);\n\t}\n\treturn false;\n};\n\n/*\n * Returns a list of properties - type can be filled|missing|all\n */\nObjectFrame.prototype.getProperties = function (type) {\n\tif(type == \"filled\" || !this.classframes){\n\t\treturn Object.keys(this.properties);\n\t}\n\tif (type == 'missing') {\n\t\tconst filled = Object.keys(this.properties);\n\t\tconst all = Object.keys(this.classframes);\n\t\tconst missing = [];\n\t\tfor (let i = 0; i < all.length; i++) {\n\t\t\tif (filled.indexOf(all[i]) == -1 && missing.indexOf(all[i]) == -1) {\n\t\t\t\tmissing.push(all[i]);\n\t\t\t}\n\t\t}\n\t\treturn missing;\n\t}\n\treturn Object.keys(this.classframes);\n};\n\n/**\n * Missing properties are those that are present in the classframe,\n * but not instantiated in the current object frame\n * for this to work we need to load the frame with the associated classframe\n */\nObjectFrame.prototype.getMissingPropertyList = function () {\n\tvar missing = this.getProperties(\"missing\");\n\tconst nmissing = [];\n\tfor (let i = 0; i < missing.length; i++) {\n\t\tconst cframe = this.getPropertyClassFrame(missing[i]);\n\t\tconst newb = { label: cframe.getLabel(), value: missing[i] };\n\t\tnmissing.push(newb);\n\t}\n\treturn nmissing;\n};\n\n/**\n * List of properties that are filled in the object\n */\nObjectFrame.prototype.getFilledPropertyList = function () {\n\tvar props = this.getProperties(\"filled\");\n\tconst filled = [];\n\tfor (let i = 0; i < props.length; i++) {\n\t\tconst cframe = this.getPropertyClassFrame(props[i]);\n\t\tconst newb = { label: cframe.getLabel(), value: props[i] };\n\t\tfilled.push(newb);\n\t}\n\treturn filled;\n};\n\n/*\n * Fills the object frame from the schema - adding all the necessary property frames, etc to make it complete\n */\nObjectFrame.prototype.fillFromSchema = function (newid) {\n\tif (newid) this.subjid = newid;\n\tnewid = (newid || FrameHelper.genBNID());\n\tconst properties = {};\n\tif(this.classframes){\n\t\tfor (const prop of Object.keys(this.classframes)) {\n\t\t\tconst pf = this.getPropertyClassFrame(prop);\n\t\t\tproperties[prop] = new PropertyFrame(prop, pf, this);\n\t\t\tproperties[prop].fillFromSchema(newid);\n\t\t}\n\t}\n\tthis.properties = properties;\n\tthis.originalFrames = [];\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tthis.originalFrames.push(this.properties[prop].getAsFrames());\n\t}\n\treturn this;\n};\n\n/*\n * Clones an object frame to be a copy of the current frame\n */\nObjectFrame.prototype.clone = function (newid) {\n\tconst properties = {};\n\tconst cloned = new ObjectFrame(this.cls, false, false, this.parent);\n\tcloned.classframes = this.classframes;\n\tcloned.subjid = newid;\n\tfor (const prop of Object.keys(this.properties)) {\n\t\tproperties[prop] = this.properties[prop].clone();\n\t}\n\tcloned.properties = properties;\n\treturn cloned;\n};\n\n\n/**\n * Returns a child frame with a particular id\n * If the second parameter is included, it will only look in that specific property\n * Otherwise searches all properties for the child\n */\nObjectFrame.prototype.getChild = function (childid, prop) {\n\tlet pframe = this.getProperty(prop);\n\tfor (let i = 0; i < pframe.values.length; pframe++) {\n\t\tif (pframe.values[i].isObject() && pframe.values[i].subject === childid) return pframe.values[i];\n\t}\n\tif (!prop) {\n\t\tfor (const key of Object.keys(this.properties)) {\n\t\t\tfor (let i = 0; i < this.properties[key].values.length; i += 1) {\n\t\t\t\tif (this.properties[key].values[i].subject() === childid) return this.properties[key].values[i];\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.addProperty = function (prop, cls) {\n\tconst cframe = this.getPropertyClassFrame(prop);\n\tconst nprop = new PropertyFrame(prop, cframe, this);\n\tif (nprop.isData()) {\n\t\tconst df = cframe.copy();\n\t\tdf.set('');\n\t}\n\tif (cframe.isObject()) {\n\t\tif (!cframe.isClassChoice()) {\n\t\t\tconst df = cframe.createEmpty(FrameHelper.genBNID());\n\t\t}\n\t\tif (cls) {\n\t\t\tconst df = cframe.createEmptyChoice(cls, FrameHelper.genBNID());\n\t\t}\n\t\tconst clss = cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst df = cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t}\n\t}\n\tif (typeof this.properties[prop] === 'undefined') {\n\t\tthis.properties[prop] = [];\n\t}\n\tthis.properties[prop].push(df);\n\treturn df;\n};\n\nObjectFrame.prototype.addPropertyValue = function (prop, value) {\n\tconst pframe = this.properties[prop];\n\treturn pframe.addValue(value);\n};\n\nObjectFrame.prototype.removeProperty = function (prop) {\n\tif (typeof this.properties[prop] !== 'undefined') {\n\t\tdelete (this.properties[prop]);\n\t}\n};\n\nObjectFrame.prototype.removePropertyValue = function (prop, value, index) {\n\tconst pframe = this.properties[prop];\n\tpframe.removeValue(value, index);\n\tif (pframe.values.length == 0) {\n\t\tthis.removeProperty(prop);\n\t}\n};\n\nObjectFrame.prototype.error = function (msg) {\n\tconsole.error(msg);\n};\n\n\nObjectFrame.prototype.subject = function () {\n\treturn this.subjid;\n};\n\nObjectFrame.prototype.get = ObjectFrame.prototype.subject;\n\nObjectFrame.prototype.isObject = function () { return true; };\nObjectFrame.prototype.isProperty = function () { return false; };\nObjectFrame.prototype.isData = function () { return false; };\n\n\nObjectFrame.prototype.subjectClass = function () {\n\treturn this.cls;\n};\n\nObjectFrame.prototype.depth = function () {\n\tif (this.parent) return (this.parent.depth() + 1);\n\treturn 0;\n};\n\nObjectFrame.prototype.getProperty = function (prop) {\n\treturn this.properties[prop];\n};\n\nObjectFrame.prototype.first = function (prop) {\n\tif (this.properties && this.properties[prop]) {\n\t\treturn this.properties[prop].first();\n\t}\n};\n\nObjectFrame.prototype.property = function (prop) {\n\tif (this.parent) return this.parent.property();\n\treturn false;\n};\n\nObjectFrame.prototype.parentObject = function () {\n\tif (this.parent && this.parent.parent) {\n\t\treturn this.parent.parent;\n\t}\n\treturn false;\n};\n\nObjectFrame.prototype.root = function () {\n\tif (this.parent) return false;\n\treturn true;\n};\n\nObjectFrame.prototype.renderProperties = function () {\n\tconst props = this.sortProperties();\n\tconst nprops = [];\n\tfor (let i = 0; i < props.length; i++) {\n\t\tif (this.properties[props[i]].render) {\n\t\t\tconst rend = this.properties[props[i]].render(this.properties[props[i]]);\n\t\t\tif (rend) nprops.push(rend);\n\t\t}\n\t}\n\treturn nprops;\n};\n\nObjectFrame.prototype.sortProperties = function () {\n\tconst unsorted = Object.keys(this.properties);\n\tif (this.compare) {\n\t\treturn unsorted.sort((a, b) => this.compare(a, b, this));\n\t}\n\treturn unsorted.sort((a, b) => this.standardCompare(a, b, this));\n};\n\n/*\n * Label first, then datatype properties, then object properties\n */\nObjectFrame.prototype.standardCompare = function (a, b, doc) {\n\tif (a == 'rdfs:label') return -1;\n\tif (b == 'rdfs:label') return 1;\n\tif (a == 'rdfs:comment') return -1;\n\tif (b == 'rdfs:comment') return 1;\n\tif (doc.properties[a].isData() && doc.properties[b].isObject()) return -1;\n\tif (doc.properties[b].isData() && doc.properties[a].isObject()) return 1;\n\treturn 0;\n};\n\nObjectFrame.prototype.cardControlAllows = function(action){\n\tif(!this.parent) return true;\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nObjectFrame.prototype.isUpdated = function(){\n\tvar i = 0;\n\tfor(var prop in this.properties){\n\t\tif(this.originalFrames[i] != prop) return true;\n\t\tif(this.properties[prop].isUpdated()) return true;\n\t\ti++;\n\t}\n\tif(i != this.originalFrames.length) return true;\n\treturn false;\n}\n\nObjectFrame.prototype.isNew = function(){\n\treturn (this.subject().substring(0, 2) == \"_:\");\n}\n\nObjectFrame.prototype.getSummary = function(){\n\tvar ret = { status: \"ok\" };\n\tif(this.isUpdated()) ret.status = \"updated\";\n\tif(this.isNew()) ret.status = \"new\";\n\tret.propcount = 0;\n\tfor(var prop in this.properties){\n\t\tret.propcount++;\n\t}\n\tret.long = ret.propcount + \" properties\";\n\treturn ret;\n}\n\nfunction PropertyFrame(property, cframe, parent) {\n\tthis.predicate = property;\n\tthis.cframe = cframe;\n\tthis.parent = parent;\n\tthis.values = [];\n}\n\nPropertyFrame.prototype.addFrame = function (frame) {\n\tif(this.cframe.isData()){\n\t\tvar df = new DataFrame(frame, this, this.values.length);\n\t\tthis.values.push(df);\n\t} else {\n\t\tconst kid = new ObjectFrame(this.range(), cframe.frame, frame.frame, this, frame);\n\t\tthis.values.push(kid);\n\t}\n};\n\nPropertyFrame.prototype.fillFromSchema = function (newid) {\n\tif (this.isData() || (this.isObject() && !this.isClassChoice())) {\n\t\tvar values = [];\n\t\tif (this.cframe.hasRestriction() && this.cframe.restriction.min) {\n\t\t\tfor (let i = 0; i < this.cframe.restriction.min; i += 1) {\n\t\t\t\tvar nframe = this.createEmpty(newid);\n\t\t\t\tnframe.parent = this;\n\t\t\t\tvalues.push(nframe);\n\t\t\t}\n\t\t} \n\t\telse {\n\t\t\tvar nframe = this.createEmpty(newid);\n\t\t\tnframe.parent = this;\n\t\t\tvalues.push(nframe);\n\t\t}\n\t\tthis.values = values;\n\t}\n\telse if (this.isClassChoice()) {\n\t\tconst clss = this.cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst empty = this.cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\tempty.parent = this;\n\t\t\tthis.values = [empty];\n\t\t}\n\t}\n};\n\nPropertyFrame.prototype.isData = function () {\n\treturn this.cframe.isData();\n};\n\nPropertyFrame.prototype.isObject = function () {\n\treturn this.cframe.isObject();\n};\n\nPropertyFrame.prototype.isProperty = function () {\n\treturn true;\n};\n\nPropertyFrame.prototype.property = function () {\n\treturn this.predicate;\n};\n\nPropertyFrame.prototype.extract = function () {\n \tconst extracts = [];\n \tfor (let i = 0; i < this.values.length; i++) {\n \t\tconst val = this.values[i].extract();\n \t\tif (val !== '' && val !== false && typeof val !== 'undefined') extracts.push(val);\n \t}\n\treturn extracts;\n};\n\nPropertyFrame.prototype.subject = function () {\n\treturn (this.parent ? this.parent.subject() : false);\n};\nPropertyFrame.prototype.subjectClass = function () {\n\treturn (this.parent ? this.parent.subjectClass() : false);\n};\nPropertyFrame.prototype.depth = function () {\n\treturn (this.parent ? this.parent.depth() : false);\n};\nPropertyFrame.prototype.updated = function () {\n\treturn (this.parent ? this.parent.childUpdated() : false);\n};\nPropertyFrame.prototype.range = function () {\n\treturn (this.cframe ? this.cframe.range : '');\n};\nPropertyFrame.prototype.getLabel = function () {\n\treturn (\n\t\tthis.cframe ? this.cframe.getLabel() : '');\n};\nPropertyFrame.prototype.getComment = function () {\n\treturn (this.cframe ? this.cframe.getComment() : false);\n};\nPropertyFrame.prototype.hasCardinalityRestriction = function () {\n\treturn (this.cframe ? this.cframe.hasRestriction() : false);\n};\nPropertyFrame.prototype.getRestriction = function () {\n\treturn (this.cframe ? this.cframe.restriction : false);\n};\nPropertyFrame.prototype.isClassChoice = function () {\n\treturn (this.cframe ? this.cframe.isClassChoice() : false);\n};\n\nPropertyFrame.prototype.deletePropertyValue = function (value, index) {\n\tthis.parent.removePropertyValue(this.property(), value, index);\n};\n\nPropertyFrame.prototype.get = function(){\n\tvar gets = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]) {\n\t\t\tvar x = this.values[i].get();\n\t\t\tif(x) gets.push(x);\n\t\t}\n\t}\n\treturn gets;\n}\n\nPropertyFrame.prototype.clear = function(){\n\tfor(var i = 0 ; i<this.values.length; i++){\n\t\tthis.values[i].clear();\n\t}\n}\n\nPropertyFrame.prototype.clone = function(){\n\tconst cvalues = [];\n\tconst cloned = new PropertyFrame(this.predicate, this.cframe, this.parent);\n\tfor(var i = 0 ; i<this.values.length; i++){\n\t\tcvalues.push(this.values[i].clone());\n\t}\n\tcloned.values = cvalues;\n\treturn cloned;\n\t//\n}\n\nPropertyFrame.prototype.getAsFrames = function(){\n\tvar fs = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i]){\n\t\t\tif(this.isData()){\n\t\t\t\tfs.push(this.values[i].getAsFrame());\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfs = fs.concat(this.values[i].getAsFrames());\n\t\t\t}\n\t\t}\n\t}\n\treturn fs;\n}\n\nPropertyFrame.prototype.createEmpty = function(){\n\tif (this.cframe.isData()) {\n\t\tconst df = this.cframe.copy();\n\t\tdf.set('');\n\t\treturn df;\n\t}\n\telse if (this.cframe.isObject()) {\n\t\tif (!this.cframe.isClassChoice()) {\n\t\t\tconst df = this.cframe.createEmpty(FrameHelper.genBNID());\n\t\t\treturn df;\n\t\t}\n\t\tconst clss = this.cframe.getClassChoices();\n\t\tif (clss && clss.length) {\n\t\t\tconst df = this.cframe.createEmptyChoice(clss[0], FrameHelper.genBNID());\n\t\t\treturn df;\n\t\t}\n\t}\n}\n\nPropertyFrame.prototype.filter = function (rules, onmatch, options) {\n\tconst cascading = (options && options.ignore_failure ? true : false);\n\tvar hits = FramePattern.FramePatternMatcher.testRules(rules, this, onmatch);\n\t//if(hits.length || cascading){\n\t\tfor (var i = 0; i<this.values.length; i++){\n\t\t\tthis.values[i].filter(rules, onmatch, options);\n\t\t}\n\t//}\n\treturn this;\n}\n\n/*\n * Shorthand functions to make it easier to access the underlying data\n */\n\nPropertyFrame.prototype.first = function () {\n\tif (this.values && this.values[0]) {\n\t\treturn this.values[0].get();\n\t}\n};\n\nPropertyFrame.prototype.renderValues = function(){\n\tvar sortedVals = this.sortValues();\n\tvar vals = [];\n\tfor(var i = 0; i<sortedVals.length; i++){\n\t\tif(sortedVals[i] && sortedVals[i].render){\n\t\t\tvar rend = sortedVals[i].render(sortedVals[i]);\n\t\t\tif(rend) vals.push(rend);\n\t\t}\n\t}\n\treturn vals;\n};\n\nPropertyFrame.prototype.sortValues = function () {\n\tif (this.compare) {\n\t\treturn this.values.sort((a, b) => this.compare(a, b, this));\n\t}\n\treturn this.values;\n};\n\nPropertyFrame.prototype.cardControlAllows = function(action){\n\tif(this.cframe.hasRestriction()){\n\t\tvar rest = this.cframe.restriction;\n\t\tvar currentnum = this.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nPropertyFrame.prototype.isUpdated = function(){\n\treturn true;\n\tif(this.values.length != this.originalValues.length) return true;\n\tfor(var i = 0 ; i < this.values.length; i++){\n\t\tif(this.cframe && this.cframe.isData()){\n\t\t\tif(this.values[i].value() != this.originalValues[i]){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif(this.values[i].subject() != this.originalValues[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(this.values[i].isUpdated()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\n\nfunction DataFrame(frame, parent, index) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tthis.index = index;\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nDataFrame.prototype.load = function (frame) {\n\tif (typeof frame !== 'object') {\n\t\tthis.error('No frame passed to load');\n\t\treturn;\n\t}\n\t// all the meta-data carried in frames:\n\tthis.type = frame.type;\n\tthis.predicate = frame.property;\n\tthis.range = frame.range;\n\tthis.rangeValue = frame.rangeValue;\n\tthis.domain = frame.domain;\n\tthis.domainValue = frame.domainValue;\n\tthis.frame = frame.frame;\n\tthis.label = frame.label;\n\tthis.comment = frame.comment;\n\tconst { restriction } = frame;\n\tthis.restriction = false;\n\tif (restriction && typeof restriction === 'object') {\n\t\tthis.restriction = new Restriction(restriction);\n\t}\n};\n\nDataFrame.prototype.filter = function (rules, onmatch) {\n\tFramePattern.FramePatternMatcher.testRules(rules, this, onmatch);\n\treturn this;\n};\n\nDataFrame.prototype.delete = function () {\n\tthis.parent.deletePropertyValue(this.get(), this.index);\n};\n\nDataFrame.prototype.save = function () {\n\tif (this.parent) {\n\t\tthis.parent.save();\n\t}\n};\n\nDataFrame.prototype.reset = function () {\n\tthis.set(this.originalValue);\n\t// this.redraw();\n};\n\nDataFrame.prototype.clone = function () {\n\tconst newb = this.parent.addPropertyValue(this.get());\n\tconst nrend = this.copy(newb);\n\tnrend.setNew();\n\tnrend.mode = 'edit';\n\tnrend.index = this.parent.values.length;\n\tthis.parent.values.push(nrend);\n};\n\n\nDataFrame.prototype.depth = function () { return (this.parent ? this.parent.depth() : false); };\nDataFrame.prototype.property = function () { return (this.parent ? this.parent.property() : false); };\nDataFrame.prototype.subject = function () { return (this.parent ? this.parent.subject() : false); };\nDataFrame.prototype.subjectClass = function () { return (this.parent ? this.parent.subjectClass() : false); };\nDataFrame.prototype.range = function () {\treturn (this.frame ? this.frame.range : false); };\n\nDataFrame.prototype.isValidType = function (dt) {\n\tconst vtypes = ['datatypeProperty', 'objectProperty', 'restriction '];\n\tif (vtypes.indexOf(dt) === -1) return false;\n\treturn true;\n};\n\n\nDataFrame.prototype.getAsFrame = function () {\n\t const ff = { type: this.type, property: this.property() };\n\t if (this.range) ff.range = this.range;\n\t if (this.rangeValue) ff.rangeValue = this.rangeValue;\n\t if (this.domain) ff.domain = this.domain;\n\t if (this.domainValue) ff.domainValue = this.domainValue;\n\t if (this.frame) ff.frame = this.frame;\n\t if (this.label) ff.label = this.label;\n\t if (this.comment) ff.comment = this.comment;\n\t return ff;\n};\n\nDataFrame.prototype.hasRestriction = function () {\n\t if (this.restriction) {\n\t\t return this.restriction.hasCardRestriction();\n\t }\n\t return false;\n};\n\nDataFrame.prototype.copy = function (newid) {\n\tconst copy = new DataFrame(this, this.parent);\n\tif (newid) copy.domainValue = newid;\n\treturn copy;\n};\n\nDataFrame.prototype.getLabel = function () {\n\tlet lab = '';\n\tif(this.predicate == \"rdfs:label\") return \"Name\";\n\tif(this.predicate == \"rdfs:comment\") return \"Description\";\n\tif (this.label && typeof this.label === 'object') lab = this.label['@value'];\n\tif (this.label && typeof this.label === 'string') lab = this.label;\n\t// always return something\n\tif (!lab && this.property()) lab = FrameHelper.labelFromURL(this.property());\n\tif (!lab) lab = FrameHelper.labelFromURL(this.cls);\n\treturn lab;\n};\n\nDataFrame.prototype.getType = function () {\n\tif (this.range) return this.range;\n\tif (this.rangeValue && this.rangeValue.type) return this.rangeValue.type;\n\treturn false;\n};\n\nObjectFrame.prototype.getLabel = DataFrame.prototype.getLabel;\n\nDataFrame.prototype.getComment = function () {\n\tlet comment = '';\n\tif (this.comment && typeof this.comment === 'object') comment = this.comment['@value'];\n\tif (this.comment && typeof this.comment === 'string') comment = this.comment;\n\treturn comment;\n};\n\nObjectFrame.prototype.getComment = DataFrame.prototype.getComment;\n\n\nDataFrame.prototype.error = function (msg) {\n\tif (msg)\tthis.err = msg;\n\treturn this.err;\n};\n\nDataFrame.prototype.isValid = function () {\n\tif (!(this.type && this.isValidType(this.type))) {\n\t\tthis.error(`Missing or Illegal Frame Type ${this.type}`);\n\t\treturn false;\n\t}\n\tif (!(this.predicate)) {\n\t\tthis.error('Missing Frame Property');\n\t\treturn false;\n\t}\n\tif (!(this.domain)) {\n\t\tthis.error('Missing Frame Domain');\n\t\treturn false;\n\t}\n\tif (!(this.range)) {\n\t\tthis.error('Missing Frame Range');\n\t\treturn false;\n\t}\n\tif (this.isObjectProperty() && !(this.frame && typeof this.frame === 'object')) {\n\t\tthis.error('Missing Object Frame');\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nDataFrame.prototype.isObjectProperty = function () {\n\treturn this.type === 'objectProperty';\n};\n\nDataFrame.prototype.isDatatypeProperty = function () {\n\treturn this.type === 'datatypeProperty';\n};\n\nDataFrame.prototype.isLogic = function () {\n\tif (this.type === 'and' || this.type === 'or' || this.type === 'xor') {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.isRestriction = function () {\n\treturn this.type === 'restriction';\n};\n\nDataFrame.prototype.ftype = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isDatatypeProperty()) return 'data';\n\tif (this.isChoice()) return 'oneOf';\n\tif (this.isObject()) return 'object';\n\tif (this.isLogic()) return 'logic';\n\tif (this.isClassChoice()) return 'class_choice';\n\treturn undefined;\n};\n\n\nDataFrame.prototype.isClassChoice = function () {\n\treturn (this.frame && this.frame.type === 'class_choice');\n};\n\nDataFrame.prototype.isString = function () {\n\tif (this.range === FrameHelper.getStdURL('xsd', 'string')) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nDataFrame.prototype.getChoiceOptions = function () {\n\tconst opts = [];\n\tfor (let i = 0; i < this.frame.elements.length; i += 1) {\n\t\tconst option = {};\n\t\tif (this.frame.elements[i].label) {\n\t\t\toption.label = this.frame.elements[i].label['@value'];\n\t\t} else {\n\t\t\toption.label = FrameHelper.labelFromURL(this.frame.elements[i].class);\n\t\t}\n\t\toption.value = this.frame.elements[i].class;\n\t\topts.push(option);\n\t}\n\treturn opts;\n};\n\nDataFrame.prototype.lang = function () {\n\treturn 'en';\n};\n\nDataFrame.prototype.isChoice = function () {\n\treturn (this.frame && this.frame.type === 'oneOf');\n};\n\nDataFrame.prototype.isDocument = function () {\n\treturn (this.frame && this.frame.type === 'document');\n};\n\nDataFrame.prototype.isData = function () {\n\treturn (this.isDocument() || this.isChoice() || this.isDatatypeProperty());\n};\n\nDataFrame.prototype.isObject = function () {\n\treturn (this.isObjectProperty() && this.frame && !(this.isChoice() || this.isDocument()));\n};\n\nDataFrame.prototype.isProperty = function () {\n\treturn false;\n};\n\nDataFrame.prototype.getTypeShorthand = function () {\n\tif (this.isDocument()) return 'document';\n\tif (this.isChoice()) return 'choice';\n\tconst sh = FrameHelper.getShorthand(this.getType());\n\treturn (sh || this.getType());\n};\n\nDataFrame.prototype.get = function () {\n\tif (this.contents) {\n\t\treturn this.contents;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue && typeof this.rangeValue['@value'] !== 'undefined') {\n\t\treturn this.rangeValue['@value'];\n\t}\n\tif (this.isChoice() || this.isDocument()) {\n\t\treturn this.frame.domainValue;\n\t}\n\treturn '';\n};\n\nDataFrame.prototype.set = function (value, normalizer) {\n\tif (normalizer) value = normalizer(value, this);\n\tthis.contents = value;\n\tif (this.isChoice() || this.isDocument()) {\n\t\tthis.frame.domainValue = value;\n\t}\n\tif (this.isDatatypeProperty() && this.rangeValue) {\n\t\tthis.rangeValue['@value'] = value;\n\t}\n};\n\nDataFrame.prototype.clear = function () {\n\tif (this.isDocument() || this.isChoice() || this.isDatatypeProperty()) {\n\t\tthis.set('');\n\t}\n};\n\nDataFrame.prototype.cardControlAllows = function(action){\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n\n/*\n * Class frames represent the archetypal version of a property frame as returned by the class frame api\n */\nfunction ClassFrame(frame, parent) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t// the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tif (frame) {\n\t\tthis.load(frame);\n\t}\n}\n\nClassFrame.prototype = DataFrame.prototype;\n\nClassFrame.prototype.loadFromObjectFrame = function (par, child) {\n\t// all the meta-data carried in frames:\n\tthis.type = 'objectProperty';\n\tthis.predicate = par.property;\n\tthis.range = par.range;\n\tthis.rangeValue = child.subjid;\n\tthis.domain = par.cls;\n\tthis.domainValue = par.subjid;\n\tthis.label = par.getLabel();\n\tthis.comment = par.getComment();\n\tthis.restriction = par.restriction;\n};\n\nClassFrame.prototype.createEmptyChoice = function (cls, newid) {\n\tconst cf = this.getChosenClassFrames(cls);\n\tconst objframe = new ObjectFrame(cls);\n\tif (newid) objframe.subjid = newid;\n\tobjframe.loadClassFrames(cf);\n\tconst fframe = objframe.fillFromSchema();\n\treturn fframe;\n};\n\nClassFrame.prototype.getChosenClassFrames = function (chosen) {\n\tlet nc = [];\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\tif (chosen === this.frame.operands[i][j].domain) {\n\t\t\t\tnc = nc.concat(this.frame.operands[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\treturn nc;\n};\n\nClassFrame.prototype.createEmpty = function (newid) {\n\tif (this.isObject()) {\n\t\tconst objframe = new ObjectFrame(this.range);\n\t\tif (newid) objframe.subjid = newid;\n\t\tobjframe.loadClassFrames(this.frame);\n\t\tconst fframe = objframe.fillFromSchema();\n\t\treturn fframe;\n\t}\n\tif (this.isData()) {\n\t\tconst dataframe = this.copy();\n\t\tdataframe.set('');\n\t\treturn dataframe;\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.cloneDataFrame = function (newid, other) {\n\treturn other;\n};\n\nClassFrame.prototype.clone = function (newid, other) {\n\tif (this.isObject()) {\n\t\tconsole.log('cannot clone class frame');\n\t} else if (this.isData()) {\n\t\treturn this.cloneDataFrame(newid, other);\n\t}\n\treturn undefined;\n};\n\nClassFrame.prototype.getClassChoices = function () {\n\tconst choices = [];\n\tif (this.frame.operands) {\n\t\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\t\tfor (let j = 0; j < this.frame.operands[i].length; j += 1) {\n\t\t\t\tconst domcls = this.frame.operands[i][j].domain;\n\t\t\t\tif (domcls && choices.indexOf(domcls) === -1) {\n\t\t\t\t\tchoices.push(domcls);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn choices;\n};\n\nClassFrame.prototype.getChosenClassFrame = function (chosen) {\n\tfor (let i = 0; i < this.frame.operands.length; i += 1) {\n\t\tconst operand = this.frame.operands[i];\n\t\tif (operand.length) {\n\t\t\tfor (let j = 0; j < operand.length; j += 1) {\n\t\t\t\tif (operand[j] && (chosen === operand[j].domain)) {\n\t\t\t\t\tconst cf = new ClassFrame(operand);\n\t\t\t\t\treturn cf;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (operand.range && chosen === operand.range) {\n\t\t\tconst cf = new ClassFrame(operand);\n\t\t\treturn cf;\n\t\t}\n\t}\n\treturn false;\n};\n\nClassFrame.prototype.getChosenFrame = function (dataframe) {\n\treturn dataframe;\n};\n\n\nfunction Restriction(restriction) {\n\tthis.min = 0;\n\tthis.max = 0;\n\tif (restriction) this.loadRestriction(restriction);\n}\n\nRestriction.prototype.hasCardRestriction = function () {\n\tif (this.min === 0 && this.max === 0) return false;\n\treturn true;\n};\n\nRestriction.prototype.loadRestriction = function (restriction) {\n\tif (typeof restriction.cardinality !== 'undefined') {\n\t\tthis.max = restriction.cardinality;\n\t\tthis.min = restriction.cardinality;\n\t} else if (typeof restriction.maxCardinality !== 'undefined') {\n\t\tthis.max = restriction.maxCardinality;\n\t} else if (typeof restriction.minCardinality !== 'undefined') {\n\t\tthis.min = restriction.minCardinality;\n\t} else if (typeof restriction.type !== 'undefined' && restriction.type === 'and' && typeof restriction.operands === 'object') {\n\t\tfor (let i = 0; i < restriction.operands.length; i += 1) {\n\t\t\tconst nrest = new Restriction(restriction.operands[i]);\n\t\t\tif (this.max === 0 && nrest.max > 0) this.max = nrest.max;\n\t\t\telse if (this.max > 0 && nrest.max > 0 && nrest.max < this.max) this.max = nrest.max;\n\t\t\tif (this.min === 0 && nrest.min > 0) this.min = nrest.min;\n\t\t\telse if (this.min > 0 && nrest.min > 0 && nrest.min > this.min) this.min = nrest.min;\n\t\t}\n\t}\n};\n\nmodule.exports = ObjectFrame;\n","const FrameHelper = require('./frameHelper');\n\nfunction WOQLResult(results, query, config) {\n\tthis.bindings = results.bindings;\n\tif(query.constructor.name == \"WOQLQuery\"){\n\t\tthis.query = query;\n\t}\n\telse {\n\t\tthis.query = query.query;\n\t}\n\tthis.cursor = 0;\n\tif (!(config && config.no_compress)) {\n\t\tconst context = (config && config.context ? config.context : false);\n\t\tthis.compress(context);\n\t}\n}\n\nWOQLResult.prototype.compress = function (context) {\n\tcontext = (context || this.query.getContext());\n\tfor (let i = 0; i < this.bindings.length; i++) {\n\t\tfor (const prop of Object.keys(this.bindings[i])) {\n\t\t\tconst nprop = FrameHelper.shorten(prop, context);\n\t\t\tconst nval = ((typeof this.bindings[i][prop] === 'string')\n\t\t\t\t? FrameHelper.shorten(this.bindings[i][prop], context)\n\t\t\t\t: this.bindings[i][prop]\n\t\t\t);\n\t\t\tdelete (this.bindings[i][prop]);\n\t\t\tthis.bindings[i][nprop] = nval;\n\t\t}\n\t}\n\treturn this;\n}\n\nWOQLResult.prototype.first = function () {\n\tthis.cursor = 0;\n\treturn this.bindings[0];\n};\n\nWOQLResult.prototype.last = function(){\n\tthis.cursor = this.bindings.length-1;\n\treturn this.bindings[this.bindings.length-1];\n}\n\nWOQLResult.prototype.next = function () {\n\tconst res = this.bindings[this.cursor];\n\tthis.cursor++;\n\treturn res;\n};\n\nWOQLResult.prototype.prev = function () {\n\tif (this.cursor > 0) {\n\t\tthis.cursor--;\n\t\treturn this.bindings[this.cursor];\n\t}\n};\n\nWOQLResult.prototype.compareValues = function(a, b, asc_or_desc){\n\tif(!a || !b) return 0;\n\tif(typeof a['@value'] != \"undefined\" && typeof b['@value'] != \"undefined\"){\n\t\ta = a['@value'];\n\t\tb = b['@value'];\n\t}\n\tif (a > b) {\n\t\treturn (asc_or_desc && asc_or_desc == 'asc' ? 1 : -1);\n\t}\n\tif (b > a) {\n\t\treturn (asc_or_desc && asc_or_desc == 'asc' ? -1 : 1);\n\t}\n};\n\nWOQLResult.prototype.sort = function(key, asc_or_desc){\n\tthis.bindings.sort((a, b) => {\n\t\treturn this.compareValues(a[key], b[key], asc_or_desc);\n\t});\n\tthis;\n}\n\nWOQLResult.prototype.getVariableList = function () {\n\tif (this.bindings && this.bindings[0]) {\n\t\treturn Object.keys(this.bindings[0]);\n\t}\n};\n\nWOQLResult.prototype.count = function () {\n\treturn this.bindings.length;\n};\n\nWOQLResult.prototype.hasBindings = function (result) {\n\treturn (this.bindings && this.count());\n};\n\nWOQLResult.prototype.getBindings = function () {\n\treturn this.bindings;\n};\n\nmodule.exports = WOQLResult;\n","/**\n * The WOQL object is a wrapper around the WOQL query object\n * Syntactic sugar to allow you to write WOQL.triple()... instead of new WOQLQuery().triple()\n * Every function matches one of the public api functions of the woql query object\n */\n\nconst FrameHelper = require('./frameHelper');\nconst Pattern = require('./framePattern');\n\nconst WOQL = {};\n\n/*\n * We expose all the real woql predicates via the WOQL object,\n * for ease of typing - all return a WOQL query object\n */\nWOQL.when = function(Query, Update){ return new WOQLQuery().when(Query, Update);}\nWOQL.opt = function(query){ return new WOQLQuery().opt(query); }\nWOQL.from = function(dburl, query){ return new WOQLQuery().from(dburl, query); }\nWOQL.into = function(dburl, query){ return new WOQLQuery().into(dburl, query); }\nWOQL.limit = function(limit, query){ return new WOQLQuery().limit(limit, query); }\nWOQL.start = function(start, query){ return new WOQLQuery().start(start, query); }\nWOQL.select = function(...list){ return new WOQLQuery().select(...list); }\nWOQL.or = function(...queries){\treturn new WOQLQuery().or(...queries); }\nWOQL.and = function(...queries){ return new WOQLQuery().and(...queries); }\nWOQL.not = function(query){ return new WOQLQuery().not(query); }\nWOQL.triple = function(a, b, c){ return new WOQLQuery().triple(a, b, c); }\nWOQL.quad = function(a, b, c, d){ return new WOQLQuery().quad(a, b, c, d); }\nWOQL.sub = function(a, b){ return new WOQLQuery().sub(a, b); }\nWOQL.isa = function(a, b){\treturn new WOQLQuery().isa(a, b);\t}\nWOQL.eq = function(a, b){ return new WOQLQuery().eq(a, b);}\nWOQL.trim = function(a, b){\treturn new WOQLQuery().trim(a, b);\t}\nWOQL.delete = function(JSON_or_IRI){ return new WOQLQuery().delete(JSON_or_IRI);\t}\nWOQL.delete_triple = function( S, P, O ){ return new WOQLQuery().delete_triple (S, P, O);\t}\nWOQL.delete_quad = function( S, P, O, G ){ return new WOQLQuery().delete_quad (S, P, O, G); }\nWOQL.add_triple = function( S, P, O ){ return new WOQLQuery().add_triple (S, P, O); }\nWOQL.add_quad = function( S, P, O, G ){ \treturn new WOQLQuery().add_quad (S, P, O, G);}\nWOQL.get = function(vars, cols, target){\treturn new WOQLQuery().get(vars, cols, target); }\nWOQL.as = function(map, vari){\treturn new WOQLQuery().as(map, vari); }\nWOQL.remote = function(url){\treturn new WOQLQuery().remote(url); }\nWOQL.file = function(url){\treturn new WOQLQuery().file(url); }\nWOQL.list = function(...vars){\treturn new WOQLQuery().list(...vars); }\nWOQL.group_by = function(gvarlist, groupedvar, groupquery, output){\treturn new WOQLQuery().group_by(gvarlist, groupedvar, groupquery, output); }\nWOQL.update = function(Q){\treturn new WOQLQuery().update(Q); }\n\n/* String and other processing functions */\nWOQL.concat = function(list, v){\treturn new WOQLQuery().concat(list, v); }\nWOQL.lower = function(u, l){\treturn new WOQLQuery().lower(u, l); }\nWOQL.pad = function(input, pad, len, output){\treturn new WOQLQuery().pad(input, pad, len, output); }\nWOQL.join = function(...list){\treturn new WOQLQuery().join(...list); }\nWOQL.unique = function(prefix, vari, type){\treturn new WOQLQuery().unique(prefix, vari, type); }\nWOQL.idgen = function(prefix, vari, type, output){\treturn new WOQLQuery().idgen(prefix, vari, type, output); }\nWOQL.typecast = function(vara, type, varb){\treturn new WOQLQuery().typecast(vara, type, varb); }\nWOQL.re = function(pattern, test, matches){\treturn new WOQLQuery().re(pattern, test, matches); }\n\nWOQL.less = function(v1, v2){\treturn new WOQLQuery().less(v1, v2); }\nWOQL.greater = function(v1, v2){\treturn new WOQLQuery().greater(v1, v2); }\n\n\n/* Mathematical Processing */\nWOQL.eval = function(arith, v){\treturn new WOQLQuery().eval(arith, v);}\nWOQL.plus = function(...args){\treturn new WOQLQuery().plus(...args);}\nWOQL.minus = function(...args){\treturn new WOQLQuery().minus(...args); }\nWOQL.times = function(...args){\treturn new WOQLQuery().times(...args); }\nWOQL.divide = function(...args){ return new WOQLQuery().divide(...args); }\nWOQL.exp = function(a, b){\treturn new WOQLQuery().exp(a, b); }\nWOQL.div = function(...args){\treturn new WOQLQuery().div(...args); }\nWOQL.comment = function(arg){\treturn new WOQLQuery().comment(arg); }\nWOQL.length = function(var1, res){\treturn new WOQLQuery().length(var1, res);}\n\n\n//language extensions that can be chained after 'grounded' stuff (clauses with a specific subject) sub, isa, delete_triple, add_triple, delete_quad, add_quad, node\n//WOQL.value = function(vars){\treturn new WOQLQuery().list(vars); }\n//These ones are special ones for dealing with the schema only...\nWOQL.star = function(G, S, P, O){\treturn new WOQLQuery().star(G, S, P, O); }\nWOQL.addClass = function(classid, graph){\treturn new WOQLQuery().addClass(classid, graph); }\nWOQL.addProperty = function(propid, type, graph){\treturn new WOQLQuery().addProperty(propid, type, graph); }\nWOQL.deleteClass = function(classid, graph){\treturn new WOQLQuery().deleteClass(classid, graph); }\nWOQL.deleteProperty = function(propid, type, graph){\treturn new WOQLQuery().deleteProperty(propid, type, graph); }\nWOQL.node = function(nodeid, type){\treturn new WOQLQuery().node(nodeid, type); }\n\n\n/*\n * Beneath here are pseudo predicates - they belong to the javascript object\n * but not to the WOQL language\n */\n//returns empty query object\nWOQL.query = function(){\treturn new WOQLQuery(); }\n//loads query from json\nWOQL.json = function(json){\treturn new WOQLQuery().json(json); }\n\nWOQL.rule = function(){ return new Pattern.FrameRule(); }\n//Simple utility function for typechecking\nWOQL.isLiteralType = function(t){\n\tif(t){\n\t\tvar pref = t.split(\":\");\n\t\tif(pref[0] == \"xdd\" || pref[0] == \"xsd\") return true;\n\t}\n\treturn false;\n}\n/**\n * The WOQL Query object implements the WOQL language via the fluent style\n * @param query - json version of query\n * @returns WOQLQuery object\n */\nfunction WOQLQuery(query){\n\tthis.query = (query ? query : {});\n\tthis.cursor = this.query;\n\tthis.chain_ended = false;\n\tthis.contains_update = false;\n\t// operators which preserve global paging\n\tthis.paging_transitive_properties = ['select', 'from', 'start', 'when', 'opt', 'limit'];\n\tthis.vocab = this.loadDefaultVocabulary();\n\t//object used to accumulate triples from fragments to support usage like node(\"x\").label(\"y\");\n\tthis.tripleBuilder = false;\n\treturn this;\n}\n\n/**\n * Takes an array of variables, an optional array of column names\n */\nWOQLQuery.prototype.get = function(arr1, arr2, target){\n\tif(arr1.json){\n\t\tvar map = arr1.json();\n\t\ttarget = arr2;\n\t}\n\telse {\n\t\tvar map = this.buildAsClauses(arr1, arr2);\n\t}\n\tif(target){\n\t\tif(target.json) target = target.json();\n\t\tthis.cursor['get'] = [map, target];\n\t}\n\telse {\n\t\tthis.cursor['get'] = [map, {}];\n\t\tthis.cursor = this.cursor[\"get\"][1];\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.buildAsClauses = function(vars, cols){\n\tvar clauses = [];\n\tif(vars && typeof vars == \"object\" && vars.length){\n\t\tfor(var i = 0; i<vars.length; i++){\n\t\t\tvar v = vars[i];\n\t\t\tif(cols && typeof cols == \"object\" && cols.length){\n\t\t\t\tvar c = cols[i];\n\t\t\t\tif(typeof c == \"string\"){\n\t\t\t\t\tc = {\"@value\": c};\n\t\t\t\t}\n\t\t\t\tclauses.push({as: [c, v]});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tv.as ? clauses.push(v) : clauses.push({as: [v]});\n\t\t\t}\n\t\t}\n\t}\n\treturn clauses;\n}\n\nWOQLQuery.prototype.typecast = function(va, type, vb){\n\tthis.cursor['typecast'] = [va, type, vb];\n\treturn this;\n}\n\nWOQLQuery.prototype.length = function(va, vb){\n\tthis.cursor['length'] = [va, vb];\n\treturn this;\n}\n\nWOQLQuery.prototype.re = function(p, s, m){\n\tthis.cursor['re'] = [p, s, m];\n\treturn this;\n}\n\nWOQLQuery.prototype.remote = function(json){\n\tthis.cursor['remote'] = [json];\n\treturn this;\n}\n\nWOQLQuery.prototype.file = function(json){\n\tthis.cursor['file'] = [json];\n\treturn this;\n}\n\n//WOQL.group_by = function(gvarlist, groupedvar, groupquery, output){\treturn new WOQLQuery().group_by(gvarlist, groupedvar, groupquery, output); }\n\nWOQLQuery.prototype.group_by = function(gvarlist, groupedvar, groupquery, output){\n\tvar args = [];\n\tthis.cursor['group_by'] = args;\n\tif(gvarlist.json){\n\t\targs.push(gvarlist.json());\n\t}\n\tif(gvarlist['list']){\n\t\targs.push(gvarlist);\n\t}\n\telse {\n\t\targs.push({'list': gvarlist});\n\t}\n\tif(typeof groupedvar == \"object\" && Array.isArray(groupedvar)){\n\t\tng = [];\n\t\tfor(var i = 0; i<groupedvar.length; i++){\n\t\t\tng.push(groupedvar[i].substring(0, 2) != \"v:\" ? \"v:\" + groupedvar[i] : groupedvar[i]);\n\t\t}\n\t\tgroupedvar = {\"list\": ng};\n\t}\n\telse if(typeof groupedvar == \"string\"){\n\t\tif(groupedvar.substring(0, 2) != \"v:\") groupedvar = \"v:\" + groupedvar;\n\t}\n\targs.push(groupedvar);\n\tif(output){\n\t\tgroupquery = groupquery.json ? groupquery.json() : groupquery;\n\t\targs.push(groupquery);\n\t}\n\telse {\n\t\toutput = groupquery;\n\t\tvar sq = {};\n\t\tthis.cursor = sq;\n\t\targs.push(sq);\n\t}\n\tif(output.substring(0, 2) != \"v:\") output = \"v:\" + output;\n\targs.push(output);\n\treturn this;\n}\n\nWOQLQuery.prototype.idgen = function(prefix, vari, type, mode){\n\tthis.cursor['idgen'] = [prefix];\n\tif(vari.json){\n\t\tthis.cursor['idgen'].push(vari.json());\n\t}\n\telse if(vari.list){\n\t\tthis.cursor['idgen'].push(vari);\n\t}\n\telse {\n\t\tthis.cursor['idgen'].push({\"list\": vari})\n\t}\n\tif(mode){\n\t\tthis.cursor['idgen'].push(mode);\n\t}\n\tthis.cursor['idgen'].push(type);\n\treturn this;\n}\n\n\nWOQLQuery.prototype.unique = function(prefix, vari, type){\n\tthis.cursor['unique'] = [prefix];\n\tif(vari.json){\n\t\tthis.cursor['unique'].push(vari.json());\n\t}\n\telse if(vari.list){\n\t\tthis.cursor['unique'].push(vari);\n\t}\n\telse {\n\t\tthis.cursor['unique'].push({\"list\": vari})\n\t}\n\tthis.cursor['unique'].push(type);\n\treturn this;\n}\n\n\nWOQLQuery.prototype.concat = function(list, v){\n\tif(typeof list == \"string\"){\n\t\tvar nlist = list.split(/(v:[\\w_]+)\\b/);\n\t\tvar nxlist = [];\n\t\tfor(var i = 1; i<nlist.length; i++){\n\t\t\tif(nlist[i-1].substring(nlist[i-1].length-1) == \"v\" && nlist[i].substring(0, 1) == \":\"){\n\t\t\t\tnlist[i-1] = nlist[i-1].substring(0, nlist[i-1].length-1);\n\t\t\t\tnlist[i] = nlist[i].substring(1);\n\t\t\t}\n\t\t}\n\t}\n\telse if(list.list){\n\t\tvar nlist = list.list;\n\t}\n\telse if(typeof list == \"object\"){\n\t\tvar nlist = list;\n\t}\n\tvar args = [];\n\tfor(var i = 0; i<nlist.length; i++){\n\t\tif(!nlist[i]) continue;\n\t\tif(typeof nlist[i] == \"string\"){\n\t\t\tif(nlist[i].substring(0, 2) == \"v:\"){\n\t\t\t\targs.push(nlist[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar nvalue = {\"@value\": nlist[i], \"@type\": \"xsd:string\"};\n\t\t\t\targs.push(nvalue);\n\t\t\t}\n\t\t}\n\t\telse if(nlist[i]){\n\t\t\targs.push(nlist[i]);\n\t\t}\n\t}\n\tif(v.indexOf(\":\") == -1) v = \"v:\" + v;\n\tthis.cursor['concat'] = [{\"list\": args}, v];\n\treturn this;\n};\n\nWOQLQuery.prototype.lower = function(u, l){\n\tthis.cursor['lower'] = [u, l];\n\treturn this;\n};\n\nWOQLQuery.prototype.pad = function(input, pad, len, output){\n\tthis.cursor['pad'] = [input, pad, len, output];\n\treturn this;\n}\n\nWOQLQuery.prototype.join = function(...list){\n\tthis.cursor['join'] = list;\n\treturn this;\n}\n\nWOQLQuery.prototype.less = function(v1, v2){\n\tthis.cursor['less'] = [v1, v2];\n\treturn this;\n}\n\nWOQLQuery.prototype.greater = function(v1, v2){\n\tthis.cursor['greater'] = [v1, v2];\n\treturn this;\n}\n\n\nWOQLQuery.prototype.list  = function(...vars){\n\tthis.cursor['list'] = vars;\n\treturn this;\n}\n\n\n/*\n * json version of query for passing to api\n */\nWOQLQuery.prototype.json = function(json){\n\tif(json){\n\t\tthis.query = json;\n\t\treturn this;\n\t}\n\treturn this.query;\n}\n\n/*\n * Functions which take a query as an argument advance the cursor to make the chaining of queries fall\n * into the corrent place in the encompassing json\n */\nWOQLQuery.prototype.when = function(Query, Update){\n\tif(typeof Query == 'boolean'){\n\t\tif(Query){\n\t\t\tthis.cursor[\"when\"] = [{\"true\": []}, {}];\n\t\t}\n\t\telse {\n\t\t\tthis.cursor[\"when\"] = [{\"false\": []}, {}];\n\t\t}\n\t}\n\telse {\n\t\tvar q = (Query.json ? Query.json() : Query);\n\t\tthis.cursor['when'] = [q, {}];\n\t}\n\tif(Update){\n\t\tvar upd = (Update.json ? Update.json() : Update);\n\t\tthis.cursor[\"when\"][1] = upd;\n\t}\n\tthis.cursor = this.cursor[\"when\"][1];\n\treturn this;\n}\n\nWOQLQuery.prototype.opt = function(query){\n\tif(query){\n\t\tvar q = ((typeof query.json == \"function\") ? query.json() : query);\n\t\tthis.cursor[\"opt\"] = [q];\n\t}\n\telse {\n\t\tthis.cursor['opt'] = [{}];\n\t\tthis.cursor = this.cursor[\"opt\"][0];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.from = function(dburl, query){\n\tthis.advanceCursor(\"from\", dburl);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.into = function(dburl, query){\n\tthis.advanceCursor(\"into\", dburl);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n};\n\n\nWOQLQuery.prototype.limit = function(limit, query){\n\tthis.advanceCursor(\"limit\", limit);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.start = function(start, query){\n\tthis.advanceCursor(\"start\", start);\n\tif(query){\n\t\tthis.cursor = query.json();\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.select = function (...list) {\n\tthis.cursor.select = list;\n\tconst index = list.length;\n\tif (typeof this.cursor.select[index - 1] === 'object') {\n\t\tthis.cursor.select[index - 1] = this.cursor.select[index - 1].json();\n\t} else {\n\t\tthis.cursor.select[index] = {};\n\t\tthis.cursor = this.cursor.select[index];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.and = function (...queries) {\n\tthis.cursor.and = [];\n\tfor (let i = 0; i < queries.length; i++) {\n\t\tif (queries[i].contains_update) this.contains_update = true;\n\t\tthis.cursor.and.push(queries[i].json());\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.or = function (...queries) {\n\tthis.cursor.or = [];\n\tfor (let i = 0; i < queries.length; i++) {\n\t\tif (queries[i].contains_update) this.contains_update = true;\n\t\tthis.cursor.or.push(queries[i].json());\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.not = function (query) {\n\tif (query) {\n\t\tif (query.contains_update) this.contains_update = true;\n\t\tthis.cursor.not = [query.json()];\n\t} else {\n\t\tthis.cursor.not = [{}];\n\t\tthis.cursor = this.cursor.not[0];\n\t}\n\treturn this;\n};\n\nWOQLQuery.prototype.triple = function(a, b, c){\n\tthis.cursor[\"triple\"] = [this.cleanSubject(a),this.cleanPredicate(b),this.cleanObject(c)];\n\treturn this.last(\"triple\", this.cleanSubject(a));\n}\n\nWOQLQuery.prototype.quad = function(a, b, c, g){\n\tthis.cursor[\"quad\"] = [this.cleanSubject(a),this.cleanPredicate(b),this.cleanObject(c),this.cleanGraph(g)];\n\treturn this.last(\"quad\", this.cleanSubject(a));\n}\n\nWOQLQuery.prototype.eq = function(a, b){\n\tthis.cursor[\"eq\"] = [this.cleanObject(a),this.cleanObject(b)];\n\treturn this.last();\n};\n\nWOQLQuery.prototype.sub = function(a, b){\n\tif(!b && this.tripleBuilder){\n\t\tthis.tripleBuilder.sub(this.cleanClass(a));\n\t\treturn this;\n\t}\n\tthis.cursor[\"sub\"] = [this.cleanClass(a),this.cleanClass(b)];\n\treturn this.last(\"sub\", a);\n}\n\nWOQLQuery.prototype.comment = function(val){\n\tif(val && val.json){\n\t\tthis.cursor['comment'] = [val.json()];\n\t}\n\telse if(typeof val == \"string\"){\n\t\tthis.cursor['comment'] = [{\"@value\": val, \"@language\": \"en\"}];\n\t}\n\telse if(typeof val == \"object\"){\n\t\tif(val.length) this.cursor['comment'] = val;\n\t\telse this.cursor['comment'] = [val];\n\t}\n\telse {\n\t\tthis.cursor['comment'] = [];\n\t}\n\tvar last_index = this.cursor['comment'].length;\n\tthis.cursor['comment'][last_index] = {};\n\tthis.cursor = this.cursor['comment'][last_index];\n\treturn this;\n}\n\n\nWOQLQuery.prototype.abstract = function(varname){\n\tif(varname){\n\t\treturn this.quad(varname, \"tcs:tag\", \"tcs:abstract\", \"db:schema\");\n\t}\n\telse if(this.tripleBuilder){\n\t\tthis.tripleBuilder.abstract();\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.isa = function(a, b){\n\tif(!b && this.tripleBuilder){\n\t\tthis.tripleBuilder.isa(this.cleanClass(a));\n\t\treturn this;\n\t}\n\tif(b){\n\t\tthis.cursor[\"isa\"] = [this.cleanClass(a),this.cleanClass(b)];\n\t\treturn this.last(\"isa\", a);\n\t}\n}\n\nWOQLQuery.prototype.trim = function(a, b){\n\tthis.cursor['trim'] = [a, b];\n\treturn this.last('trim', b);\n}\n\nWOQLQuery.prototype.eval = function(arith, v){\n\tarith = arith.json ? arith.json() : arith;\n\tthis.cursor['eval'] = [arith, v];\n\treturn this.last('eval', v);\n}\n\nWOQLQuery.prototype.plus = function (...args) {\n\tthis.cursor.plus = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.plus.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.minus = function (...args) {\n\tthis.cursor.minus = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.minus.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.times = function (...args) {\n\tthis.cursor.times = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.times.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.divide = function (...args) {\n\tthis.cursor.divide = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.divide.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.div = function (...args) {\n\tthis.cursor.div = [];\n\tfor(var i = 0; i < args.length; i++){\n\t\tthis.cursor.div.push(args[i].json ? args[i].json() : args[i]);\n\t}\n\treturn this.last();\n};\n\nWOQLQuery.prototype.exp = function (a, b) {\n\ta = (a.json ? a.json() : a);\n\tb = (b.json ? b.json() : b);\n\tthis.cursor.exp = [a, b];\n\treturn this.last();\n};\n\nWOQLQuery.prototype.delete = function (JSON_or_IRI) {\n\tthis.cursor.delete = [JSON_or_IRI];\n\treturn this.lastUpdate();\n};\n\nWOQLQuery.prototype.delete_triple = function( Subject, Predicate, Object_or_Literal ){\n\tthis.cursor['delete_triple'] = [this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal)];\n\treturn this.lastUpdate('delete_triple', this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.add_triple = function( Subject, Predicate, Object_or_Literal ){\n\tthis.cursor['add_triple'] =[this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal)];\n\treturn this.lastUpdate('add_triple', this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.delete_quad = function( Subject, Predicate, Object_or_Literal, Graph ){\n\tthis.cursor['delete_quad'] =[this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal),this.cleanGraph(Graph)];\n\treturn this.lastUpdate('delete_quad', this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.add_quad = function( Subject, Predicate, Object_or_Literal, Graph){\n\tthis.cursor['add_quad'] = [this.cleanSubject(Subject),this.cleanPredicate(Predicate),this.cleanObject(Object_or_Literal),this.cleanGraph(Graph)];\n\treturn this.lastUpdate(\"add_quad\", this.cleanSubject(Subject));\n}\n\nWOQLQuery.prototype.update = function(woql){\n\tthis.cursor['update'] = [ woql.json() ];\n\treturn this.lastUpdate();\n}\n\n/**\n * Schema manipulation shorthand\n */\nWOQLQuery.prototype.addClass = function(c, graph){\n\tif(c){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tc = (c.indexOf(\":\") == -1) ? \"scm:\" + c : c;\n\t\tthis.add_quad(c, \"rdf:type\", \"owl:Class\", graph);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.addProperty = function(p, t, g){\n\tt = (t ? t : \"xsd:string\");\n\tif(p){\n\t\tvar graph = (g ? this.cleanGraph(g) : \"db:schema\");\n\t\tp = (p.indexOf(\":\") == -1) ?  \"scm:\" + p : p;\n\t\tt = (t.indexOf(\":\") == -1) ? this.cleanType(t) : t ;\n\t\tvar tc = this.cursor;\n\t\tif(WOQL.isLiteralType(t)){\n\t\t\tthis.and(\n\t\t\t\tWOQL.add_quad(p, \"rdf:type\", \"owl:DatatypeProperty\", graph),\n\t\t\t\tWOQL.add_quad(p, \"rdfs:range\", t, graph)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tthis.and(\n\t\t\t\tWOQL.add_quad(p, \"rdf:type\", \"owl:ObjectProperty\", graph),\n\t\t\t\tWOQL.add_quad(p, \"rdfs:range\", t, graph)\n\t\t\t);\n\t\t}\n\t}\n\treturn this.lastUpdate(\"add_quad\", this.cleanClass(p));\n}\n\nWOQLQuery.prototype.deleteClass = function(c, graph){\n\tif(c){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tc = (c.indexOf(\":\") == -1) ?  \"scm:\" + c : c;\n\t\treturn this.and(\n\t\t\tWOQL.delete_quad(c, \"v:All\", \"v:Al2\", graph),\n\t\t\tWOQL.opt().delete_quad(\"v:Al3\", \"v:Al4\", c, graph)\n\t\t);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.deleteProperty = function(p, graph){\n\tif(p){\n\t\tgraph = (graph ? this.cleanGraph(graph) : \"db:schema\");\n\t\tp = (p.indexOf(\":\") == -1) ? \"scm:\" + p : p;\n\t\treturn this.and(\n\t\t\tWOQL.delete_quad(p, \"v:All\", \"v:Al2\", graph),\n\t\t\tWOQL.delete_quad(\"v:Al3\", \"v:Al4\", p, graph)\n\t\t);\n\t}\n\treturn this;\n}\n\n/**\n * Language elements that cannot be invoked from the top level and therefore are not exposed in the WOQL api\n */\nWOQLQuery.prototype.as = function(a, b){\n\tif(!a || !b) return;\n\tif(!this.asArray){\n\t\tthis.asArray = true;\n\t\tthis.query = [];\n\t}\n\tb = (b.indexOf(\":\") == -1 ? \"v:\" + b : b);\n\tvar val = (typeof a == \"object\" ? a : { \"@value\" : a});\n\tthis.query.push({as: [val, b]});\n\treturn this;\n}\n\n/**\n * WOQL API\n */\n\nWOQLQuery.prototype.node = function(node, type){\n\ttype = (type ? type : \"triple\");\n\tthis.tripleBuilder = new TripleBuilder(type, this.cursor, node);\n\treturn this;\n}\n\nWOQLQuery.prototype.max = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"max\");\n\treturn this;\n}\n\nWOQLQuery.prototype.cardinality = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"cardinality\");\n\treturn this;\n}\n\nWOQLQuery.prototype.min = function(m){\n\tif(this.tripleBuilder) this.tripleBuilder.card(m, \"min\");\n\treturn this;\n}\n\nWOQLQuery.prototype.graph = function(g){\n\tg = this.cleanGraph(g);\n\tvar t = (this.type == \"triple\") ? \"quad\" : false;\n\tif(this.type == \"add_triple\") t = \"add_quad\";\n\tif(this.type == \"delete_triple\") t = \"delete_quad\";\n\tif(!this.tripleBuilder){\n\t\tthis.tripleBuilder = new TripleBuilder(t, this.cursor);\n\t}\n\tthis.tripleBuilder.graph(g);\n\treturn this;\n}\n\nWOQLQuery.prototype.domain = function(d){\n\td = this.cleanClass(d);\n\tif(this.tripleBuilder) this.tripleBuilder.addPO('rdfs:domain',d);\n\treturn this;\n}\n\nWOQLQuery.prototype.label = function(l, lang){\n\tif(this.tripleBuilder) this.tripleBuilder.label(l, lang);\n\treturn this;\n}\n\nWOQLQuery.prototype.description = function(c, lang){\n\tif(this.tripleBuilder) this.tripleBuilder.description(c, lang);\n\treturn this;\n}\n\nWOQLQuery.prototype.parent = function(...p){\n\tif(this.tripleBuilder){\n\t\tfor(var i = 0 ; i<p.length; i++){\n\t\t\tvar pn = this.cleanClass(p[i]);\n\t\t\tthis.tripleBuilder.addPO('rdfs:subClassOf', pn);\n\t\t}\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.entity = function(...p){\n\treturn this.parent(\"tcs:Entity\");\n}\n\nWOQLQuery.prototype.relationship = function(...p){\n\treturn this.parent(\"tcs:Entity\");\n}\n\nWOQLQuery.prototype.property = function(p,val){\n\tif(this.tripleBuilder) {\n\t\tp = this.cleanPredicate(p);\n\t\tthis.tripleBuilder.addPO(p, val);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.star = function(GraphIRI, Subj, Pred, Obj){\n\tSubj = (Subj ? this.cleanSubject(Subj) : \"v:Subject\");\n\tPred = (Pred ? this.cleanPredicate(Pred) : \"v:Predicate\");\n\tObj = (Obj  ? this.cleanObject(Obj) : \"v:Object\");\n\tGraphIRI = (GraphIRI ? this.cleanGraph(GraphIRI) : false);\n\tif(GraphIRI){\n\t\treturn this.quad(Subj, Pred, Obj, GraphIRI);\n\t}\n\telse {\n\t\treturn this.triple(Subj, Pred, Obj);\n\t}\n}\n\n\nWOQLQuery.prototype.getEverything = function(GraphIRI){\n\tif(GraphIRI){\n\t\tGraphIRI = this.cleanGraph(GraphIRI);\n\t\treturn this.quad(\"v:Subject\", \"v:Predicate\", \"v:Object\", GraphIRI);\n\t}\n\telse {\n\t\treturn this.triple(\"v:Subject\", \"v:Predicate\", \"v:Object\");\n\t}\n}\n\nWOQLQuery.prototype.getAllDocuments = function(){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", \"rdf:type\", \"v:Type\"),\n\t\tWOQL.sub(\"v:Type\", \"tcs:Document\")\n\t);\n}\n\nWOQLQuery.prototype.documentMetadata = function(){\n\treturn this.and(\n\t\tWOQL.triple(\"v:ID\", \"rdf:type\", \"v:Class\"),\n\t\tWOQL.sub(\"v:Class\", \"tcs:Document\"),\n\t\tWOQL.opt().triple(\"v:ID\", \"rdfs:label\", \"v:Label\"),\n\t\tWOQL.opt().triple(\"v:ID\", \"rdfs:comment\", \"v:Comment\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:label\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:comment\", \"v:Type_Comment\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.concreteDocumentClasses = function(){\n\treturn this.and(\n\t\tWOQL.sub(\"v:Class\", \"tcs:Document\"),\n\t\tWOQL.not().abstract(\"v:Class\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Class\", \"rdfs:comment\", \"v:Comment\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.propertyMetadata = function(){\n\treturn this.and(\n\t\tWOQL.or(\n\t\t\tWOQL.quad(\"v:Property\", \"rdf:type\", \"owl:DatatypeProperty\", \"db:schema\"),\n\t\t\tWOQL.quad(\"v:Property\", \"rdf:type\", \"owl:ObjectProperty\", \"db:schema\")\n\t\t),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:range\", \"v:Range\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdf:type\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:domain\", \"v:Domain\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.elementMetadata = function(){\n\treturn this.and(\n\t\tWOQL.quad(\"v:Element\", \"rdf:type\", \"v:Type\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:subClassOf\", \"v:Parent\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:domain\", \"v:Domain\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:range\", \"v:Range\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.classMetadata = function(){\n\treturn this.and(\n\t\tWOQL.quad(\"v:Element\", \"rdf:type\", \"owl:Class\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:label\", \"v:Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"rdfs:comment\", \"v:Comment\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Element\", \"tcs:tag\", \"v:Abstract\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getDataOfClass = function(chosen){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", \"rdf:type\", chosen),\n\t\tWOQL.opt().triple(\"v:Subject\", \"v:Property\", \"v:Value\")\n\t);\n}\n\nWOQLQuery.prototype.getDataOfProperty = function(chosen){\n\treturn this.and(\n\t\tWOQL.triple(\"v:Subject\", chosen, \"v:Value\"),\n\t\tWOQL.opt().triple(\"v:Subject\", \"rdfs:label\", \"v:Label\")\n\t);\n}\n\nWOQLQuery.prototype.documentProperties = function(id){\n\treturn this.and(\n\t\tWOQL.triple(id, \"v:Property\", \"v:Property_Value\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdfs:label\", \"v:Property_Label\", \"db:schema\"),\n\t\tWOQL.opt().quad(\"v:Property\", \"rdf:type\", \"v:Property_Type\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getDocumentConnections = function(id){\n\treturn this.and(\n\t\tWOQL.or(\n\t\t\tWOQL.triple(id, \"v:Outgoing\", \"v:Entid\"),\n\t\t\tWOQL.triple(\"v:Entid\", \"v:Incoming\", id)\n\t\t),\n\t\tWOQL.isa(\"v:Entid\", \"v:Enttype\"),\n\t\tWOQL.sub(\"v:Enttype\", \"tcs:Document\"),\n\t\tWOQL.opt().triple(\"v:Entid\", \"rdfs:label\", \"v:Label\"),\n\t\tWOQL.opt().quad(\"v:Enttype\", \"rdfs:label\", \"v:Class_Label\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.getInstanceMeta = function(url){\n\treturn this.and(\n\t\tWOQL.triple(url, \"rdf:type\", \"v:InstanceType\"),\n\t\tWOQL.opt().triple(url, \"rdfs:label\", \"v:InstanceLabel\"),\n\t\tWOQL.opt().triple(url, \"rdfs:comment\", \"v:InstanceComment\"),\n\t\tWOQL.opt().quad(\"v:InstanceType\", \"rdfs:label\", \"v:ClassLabel\", \"db:schema\")\n\t);\n}\n\nWOQLQuery.prototype.simpleGraphQuery = function(){\n\treturn this.and(\n\t    WOQL.triple(\"v:Source\", \"v:Edge\", \"v:Target\"),\n\t    WOQL.isa(\"v:Source\", \"v:Source_Class\"),\n\t    WOQL.sub(\"v:Source_Class\", \"tcs:Document\"),\n\t    WOQL.isa(\"v:Target\", \"v:Target_Class\"),\n\t    WOQL.sub(\"v:Target_Class\", \"tcs:Document\"),\n\t    WOQL.opt().triple(\"v:Source\", \"rdfs:label\", \"v:Source_Label\"),\n\t    WOQL.opt().triple(\"v:Source\", \"rdfs:comment\", \"v:Source_Comment\"),\n\t    WOQL.opt().quad(\"v:Source_Class\", \"rdfs:label\", \"v:Source_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Source_Class\", \"rdfs:comment\", \"v:Source_Type_Comment\", \"db:schema\"),\n\t    WOQL.opt().triple(\"v:Target\", \"rdfs:label\", \"v:Target_Label\"),\n\t    WOQL.opt().triple(\"v:Target\", \"rdfs:comment\", \"v:Target_Comment\"),\n\t    WOQL.opt().quad(\"v:Target_Class\", \"rdfs:label\", \"v:Target_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Target_Class\", \"rdfs:comment\", \"v:Target_Type_Comment\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Edge\", \"rdfs:label\", \"v:Edge_Type\", \"db:schema\"),\n\t    WOQL.opt().quad(\"v:Edge\", \"rdfs:comment\", \"v:Edge_Type_Comment\", \"db:schema\")\n\t);\n}\n\n\n/**\n * Queries the schema graph and loads all the ids found there as vocabulary that can be used without prefixes\n * ignoring blank node ids\n */\nWOQLQuery.prototype.loadVocabulary = function(client){\n\tvar nw = new WOQLQuery().quad(\"v:S\", \"v:P\", \"v:O\", \"db:schema\");\n\tnw.execute(client).then( (result) => {\n\t\tif(result.bindings && result.bindings.length > 0){\n\t\t\tfor(var i = 0; i<result.bindings.length; i++){\n\t\t\t\tfor(var k in result.bindings[i]){\n\t\t\t\t\tvar v = result.bindings[i][k]\n\t\t\t\t\tif(typeof v == \"string\"){\n\t\t\t\t\t\tvar spl = v.split(\":\");\n\t\t\t\t\t\tif(spl.length == 2 && spl[1] && spl[0] != \"_\"){\n\t\t\t\t\t\t\tthis.vocab[spl[1]] = v;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\n\n/**\n * Provides the query with a 'vocabulary' a list of well known predicates that can be used without prefixes mapping: id: prefix:id ...\n */\nWOQLQuery.prototype.setVocabulary = function(vocab){\n\tthis.vocab = vocab;\n}\n\nWOQLQuery.prototype.getVocabulary = function(vocab){\n\treturn this.vocab;\n}\n\nWOQLQuery.prototype.getLimit = function(){\n\treturn this.getPagingProperty(\"limit\");\n}\n\nWOQLQuery.prototype.setLimit = function(l){\n\treturn this.setPagingProperty(\"limit\", l);\n}\n\nWOQLQuery.prototype.isPaged = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"limit\") return true;\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\treturn this.isPaged(q[prop][q[prop].length-1]);\n\t\t}\n\t}\n\treturn false;\n}\n\nWOQLQuery.prototype.getPage = function(){\n\tif(this.isPaged()){\n\t\tvar psize = this.getLimit();\n\t\tif(this.hasStart()){\n\t\t\tvar s = this.getStart();\n\t\t\treturn (parseInt(s / psize) + 1);\n\t\t}\n\t\telse return 1;\n\t}\n\telse return false;\n}\n\nWOQLQuery.prototype.setPage = function(pagenum){\n\tvar pstart = (this.getLimit() * (pagenum - 1));\n\tif(this.hasStart()){\n\t\tthis.setStart(pstart);\n\t}\n\telse {\n\t\tthis.addStart(pstart);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.nextPage = function(){\n\treturn this.setPage(this.getPage() + 1);\n}\n\nWOQLQuery.prototype.firstPage = function(){\n\treturn this.setPage(1);\n}\n\nWOQLQuery.prototype.previousPage = function(){\n\tconst npage = this.getPage() - 1;\n\tif(npage > 0) this.setPage(npage);\n\treturn this;\n}\n\nWOQLQuery.prototype.setPageSize = function(size){\n\tthis.setPagingProperty(\"limit\", size);\n\tif(this.hasStart()){\n\t\tthis.setStart(0);\n\t}\n\telse {\n\t\tthis.addStart(0);\n\t}\n\treturn this;\n}\n\nWOQLQuery.prototype.hasSelect = function(){\n\treturn (this.getPagingProperty(\"select\") ? true : false);\n}\n\nWOQLQuery.prototype.getSelectVariables = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"select\") {\n\t\t\tvar vars = q[prop].slice(0, q[prop].length - 1);\n\t\t\treturn vars;\n\t\t}\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar val = this.getSelectVariables(q[prop][q[prop].length-1]);\n\t\t\tif(typeof val != \"undefined\"){\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t}\n}\n\nWOQLQuery.prototype.hasStart = function(){\n\treturn (typeof this.getPagingProperty(\"start\") != \"undefined\");\n}\n\nWOQLQuery.prototype.getStart = function(){\n\treturn this.getPagingProperty(\"start\");\n}\n\nWOQLQuery.prototype.setStart = function(start){\n\treturn this.setPagingProperty(\"start\", start);\n}\n\nWOQLQuery.prototype.addStart = function(s){\n\tif(this.hasStart()) this.setStart(s);\n\telse {\n\t\tvar nq = {'start': [s, this.query]};\n\t\tthis.query = nq;\n\t}\n\treturn this;\n}\n\n\n/**\n * Executes the query using the passed client to connect to a server\n */\nWOQLQuery.prototype.execute = function(client){\n\tif(!this.query[\"@context\"]){\n\t\tthis.query['@context'] = this.defaultContext(client.connectionConfig.dbURL());\n\t\tvar json = this.json();\n\t}\n\telse {\n\t\tvar json = this.json();\n\t}\n\tif(this.contains_update){\n\t\treturn client.select(false, json);\n\t\t//return client.update(false, json);\n\t}\n\telse {\n\t\treturn client.select(false, json);\n\t}\n}\n\n/*\n * Internal State Control Functions\n * Not part of public API -\n */\n\n /**\n * Advances internal cursor to support chaining of calls: limit(50).start(50). rather than (limit, [50, (start, [50, (lisp-style (encapsulation)))))\n */\nWOQLQuery.prototype.advanceCursor = function(action, value){\n\tthis.cursor[action] = [value];\n\tthis.cursor[action][1] = {};\n\tthis.cursor = this.cursor[action][1];\n}\n\nWOQLQuery.prototype.loadDefaultVocabulary = function(){\n\tvar vocab = {};\n\tvocab.type = \"rdf:type\";\n\tvocab.label = \"rdfs:label\";\n\tvocab.Class = \"owl:Class\";\n\tvocab.DatatypeProperty = \"owl:DatatypeProperty\";\n\tvocab.ObjectProperty = \"owl:ObjectProperty\";\n\tvocab.Entity = \"tcs:Entity\";\n\tvocab.Document = \"tcs:Document\";\n\tvocab.Relationship = \"tcs:Relationship\";\n\tvocab.temporality = \"tcs:temporality\";\n\tvocab.geotemporality = \"tcs:geotemporality\";\n\tvocab.geography = \"tcs:geography\";\n\tvocab.abstract = \"tcs:abstract\";\n\tvocab.comment = \"rdfs:comment\";\n\tvocab.range = \"rdfs:range\";\n\tvocab.domain = \"rdfs:domain\";\n\tvocab.subClassOf = \"rdfs:subClassOf\";\n\tvocab.string = \"xsd:string\";\n\tvocab.integer = \"xsd:integer\";\n\tvocab.decimal = \"xsd:decimal\";\n\tvocab.email = \"xdd:email\";\n\tvocab.json = \"xdd:json\";\n\tvocab.dateTime = \"xsd:dateTime\";\n\tvocab.date = \"xsd:date\";\n\tvocab.coordinate = \"xdd:coordinate\";\n\tvocab.line = \"xdd:coordinatePolyline\";\n\tvocab.polygon = \"xdd:coordinatePolygon\";\n\treturn vocab;\n}\n\nWOQLQuery.prototype.defaultContext = function(DB_IRI){\n\tlet def = {}\n\tfor(var pref in FrameHelper.standard_urls){\n\t\tdef[pref] = FrameHelper.standard_urls[pref];\n\t}\n\tdef.scm = DB_IRI + \"/schema#\"\n\tdef.doc = DB_IRI + \"/document/\"\n\tdef.db = DB_IRI + \"/\";\n\treturn def;\n}\n\n\n\n/**\n * Called to indicate that this is the last call that is chainable - for example triple pattern matching..\n *\n */\nWOQLQuery.prototype.last = function(call, subject){\n\tthis.chain_ended = true;\n\tif(call) this.tripleBuilder = new TripleBuilder(call, this.cursor, this.cleanSubject(subject));\n\treturn this;\n}\n\nWOQLQuery.prototype.lastUpdate = function(call, subj){\n\tthis.contains_update = true;\n\tvar ret = this.last(call, subj);\n\treturn ret;\n}\n\n/**\n * Returns the value of one of the 'paging' related properties (limit, start,...)\n */\nWOQLQuery.prototype.getPagingProperty = function(pageprop, q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == pageprop) return q[prop][0];\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar val = this.getPagingProperty(pageprop, q[prop][q[prop].length-1]);\n\t\t\tif(typeof val != \"undefined\"){\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Sets the value of one of the paging_transitive_properties properties\n */\nWOQLQuery.prototype.setPagingProperty = function(pageprop, val, q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == pageprop) {\n\t\t\tq[prop][0] = val;\n\t\t}\n\t\telse if(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tthis.setPagingProperty(pageprop, val, q[prop][q[prop].length-1]);\n\t\t}\n\t}\n\treturn this;\n}\n\n/**\n * Retrieves the value of the current json-ld context\n */\nWOQLQuery.prototype.getContext = function(q){\n\tq = (q ? q : this.query);\n\tfor (const prop of Object.keys(q)) {\n\t\tif(prop == \"@context\") return q[prop];\n\t\tif(this.paging_transitive_properties.indexOf(prop) !== -1){\n\t\t\tvar nq = q[prop][1];\n\t\t\tvar nc = this.getContext(nq);\n\t\t\tif(nc) return nc;\n\t\t}\n\t}\n}\n\n\n/**\n * Retrieves the value of the current json-ld context\n */\nWOQLQuery.prototype.context = function(c){\n\tthis.cursor['@context'] = c;\n}\n\n\n/*\n* Transforms from internal json representation to human writable WOQL.js format\n*/\nWOQLQuery.prototype.prettyPrint = function(indent, show_context, q, fluent){\n\tif(!this.indent) this.indent = indent;\n\tq = (q ? q : this.query);\n\tvar str = \"\";\n\tconst newlining_operators = [\"get\", \"from\", \"into\"];\n\tfor(var operator in q){\n\t\t//ignore context in pretty print\n\t\tif(operator == \"@context\") {\n\t\t\tif( show_context){\n\t\t\t\tvar c = this.getContext();\n\t\t\t\tif(c) str += \"@context: \" + JSON.stringify(c) + \"\\n\";\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\t//statement starts differently depending on indent and whether it is fluent style or regular function style\n\t\tstr += this.getWOQLPrelude(operator, fluent, indent - this.indent);\n\t\tvar val = q[operator];\n\t\tif(this.chainable(operator, val[val.length-1])){\n\t\t\t//all arguments up until the last are regular function arguments\n\t\t\tstr += this.uncleanArguments(operator,  val.slice(0, val.length-1), indent, show_context);\n\t\t\tif(newlining_operators.indexOf(operator) !== -1){\n\t\t\t\t//some fluent function calls demand a linebreak..\n\t\t\t\tstr += \"\\n\" + nspaces(indent-this.indent);\n\t\t\t}\n\t\t\t//recursive call to query included in tail\n\t\t\tstr += this.prettyPrint(indent, show_context, val[val.length-1], true);\n\t\t}\n\t\telse {\n\t\t\t//non chainable operators all live inside the function call parameters\n\t\t\tstr += this.uncleanArguments(operator,  val, indent, show_context);\n\t\t}\n\t}\n\t//remove any trailing dots in the chain (only exist in incompletely specified queries)\n\tif(str.substring(str.length-1) == \".\"){\n\t\tstr = str.substring(0, str.length-1);\n\t}\n\treturn str;\n}\n\n/**\n * Gets the starting characters for a WOQL query - varies depending on how the query is invoked and how indented it is\n */\nWOQLQuery.prototype.getWOQLPrelude = function(operator, fluent, inline){\n\tif(operator === \"true\" || operator === \"false\"){\n\t\treturn operator;\n\t}\n\tif(fluent){\n\t\treturn \".\" + operator;\n\t}\n\treturn (inline ? \"\\n\" + nspaces(inline) : \"\") + \"WOQL.\" + operator;\n}\n\n/**\n * Determines whether a given operator can have a chained query as its last argument\n */\nWOQLQuery.prototype.chainable = function(operator, lastArg){\n\tconst non_chaining_operators = [\"and\", \"or\"];\n\tif(lastArg && typeof lastArg == \"object\" && typeof lastArg['@value'] == \"undefined\"  && typeof lastArg['@type'] == \"undefined\"  && typeof lastArg['value'] == \"undefined\" && non_chaining_operators.indexOf(operator) == -1){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Transforms arguments to WOQL functions from the internal (clean) version, to the WOQL.js human-friendly version\n */\nWOQLQuery.prototype.uncleanArguments = function(operator, args, indent, show_context){\n\tstr = '(';\n\tconst args_take_newlines = [\"and\", \"or\"];\n\tif(this.hasShortcut(operator, args)){\n\t\treturn this.getShortcut(args, indent);\n\t}\n\telse {\n\t\tfor(var i = 0; i<args.length; i++){\n\t\t\tif(this.argIsSubQuery(operator, args[i], i)){\n\t\t\t\tstr += this.prettyPrint(indent + this.indent, show_context, args[i], false);\n\t\t\t}\n\t\t\telse if(operator == \"get\" && i == 0){ // weird one, needs special casing\n\t\t\t\tstr += \"\\n\" + nspaces(indent-this.indent) + \"WOQL\";\n\t\t\t\tfor(var j = 0; j < args[0].length; j++){\n\t\t\t\t\tvar myas = (args[0][j].as ? args[0][j].as : args[0][j]);\n\t\t\t\t\tvar lhs = myas[0];\n\t\t\t\t\tvar rhs = myas[1];\n\t\t\t\t\tif(typeof lhs == \"object\" && lhs['@value']){\n\t\t\t\t\t\tlhs = lhs['@value'];\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof lhs == \"object\") {\n\t\t\t\t\t\tlhs = JSON.stringify(lhs);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tlhs = '\"' + lhs + '\"'\n\t\t\t\t\t}\n\t\t\t\t\tstr += '.as(' + lhs;\n\t\t\t\t\tif(rhs) str += ', \"' + rhs + '\"';\n\t\t\t\t\tstr += \")\";\n\t\t\t\t\tstr += \"\\n\" + nspaces(indent);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tstr += this.uncleanArgument(operator, args[i], i, args);\n\t\t\t}\n\t\t\tif(i < args.length -1) str +=  ',';\n\t\t}\n\t}\n\tif(args_take_newlines.indexOf(operator) != -1){\n\t\tstr += \"\\n\" + nspaces(indent-this.indent);\n\t}\n\tstr += \")\";\n\treturn str;\n}\n\n\n/**\n * Passed as arguments: 1) the operator (and, triple, not, opt, etc)\n * 2) the value of the argument\n * 3) the index (position) of the argument.\n */\nWOQLQuery.prototype.uncleanArgument = function(operator, val, index, allArgs){\n\t//numeric values go out untouched...\n\tconst numeric_operators = [\"limit\", \"start\", \"eval\", \"plus\", \"minus\", \"times\", \"divide\", \"exp\", \"div\"];\n\tif(operator == \"isa\"){\n\t\tval = (index == 0 ? this.unclean(val, 'subject') : this.unclean(val, 'class'));\n\t}\n\telse if(operator == \"sub\"){\n\t\tval = this.unclean(val, 'class');\n\t}\n\telse if([\"select\"].indexOf(operator) != -1){\n\t\tif(val.substring(0, 2) == \"v:\") val = val.substring(2);\n\t}\n\telse if([\"quad\", \"add_quad\", \"delete_quad\", \"add_triple\", \"delete_triple\", \"triple\"].indexOf(operator) != -1){\n\t\tswitch(index){\n\t\t\tcase 0: val = this.unclean(val, \"subject\"); break;\n\t\t\tcase 1: val = this.unclean(val, \"predicate\"); break;\n\t\t\tcase 2: val = this.unclean(val, \"object\"); break;\n\t\t\tcase 3: val = this.unclean(val, \"graph\"); break;\n\t\t}\n\t}\n\tif(typeof val == \"object\"){\n\t\tif(operator == \"concat\" && index == 0){\n\t\t\tvar cstr = \"\";\n\t\t\tif(val.list){\n\t\t\t\tfor(var i = 0 ; i<val.list.length; i++){\n\t\t\t\t\tif(val.list[i]['@value']) cstr += val.list[i]['@value'];\n\t\t\t\t\telse cstr += val.list[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar oval = '\"' + cstr + '\"';\n\t\t}\n\t\telse {\n\t\t\tvar oval = this.uncleanObjectArgument(operator, val, index);\n\t\t}\n\t\treturn oval;\n\t}\n\t//else if(numeric_operators.indexOf(operator) !== -1){\n\t//\treturn val;\n\t//}\n\tif(typeof val == \"string\"){\n\t\treturn '\"' + val + '\"';\n\t}\n\treturn val;\n}\n\n\n\nWOQLQuery.prototype.uncleanObjectArgument = function(operator, val, index){\n\tif(val['@value'] && (val['@language'] || (val['@type'] && val['@type'] == \"xsd:string\"))) return '\"' + val['@value'] + '\"';\n\tif(val['@value'] && (val['@type'] && val['@type'] == \"xsd:integer\")) return val['@value'];\n\tif(val['list']) {\n\t\tvar nstr = \"[\";\n\t\tfor(var i = 0 ; i<val['list'].length; i++){\n\t\t\tif(typeof val['list'][i] == \"object\"){\n\t\t\t\tnstr += this.uncleanObjectArgument(\"list\", val['list'][i], i);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnstr += '\"' + val['list'][i] + '\"';\n\t\t\t}\n\t\t\tif(i < val['list'].length-1){\n\t\t\t\tnstr += \",\";\n\t\t\t}\n\t\t}\n\t\tnstr += \"]\";\n\t\treturn nstr;\n\t}\n\treturn JSON.stringify(val);\n}\n\nWOQLQuery.prototype.argIsSubQuery = function(operator, arg, index){\n\tconst squery_operators = [\"and\", \"or\", \"when\", \"not\", \"opt\", \"exp\", \"minus\", \"div\", \"divide\", \"plus\", \"multiply\"];\n\tif(squery_operators.indexOf(operator) !== -1){\n\t\tif(arg && typeof arg != \"object\") return false;\n\t\treturn true;\n\t}\n\tif(operator == \"group_by\" && index == 2) return true;\n\telse return false;\n}\n\n/**\n * Goes from the properly prefixed clean internal version of a variable to the WOQL.js unprefixed form\n */\nWOQLQuery.prototype.unclean = function(s, part){\n\tif(typeof s != \"string\") return s;\n\tif(s.indexOf(\":\") == -1) return s;\n\tif(s.substring(0,4) == \"http\") return s;\n\tvar suff = s.split(\":\")[1];\n\tif(this.vocab && this.vocab[suff] && this.vocab[suff] == s){\n\t\treturn suff;\n\t}\n\tif(!part) return s;\n\tif(part == \"subject\" && (s.split(\":\")[0] == \"doc\")) return suff;\n\tif(part == \"class\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"predicate\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"type\" && (s.split(\":\")[0] == \"scm\")) return suff;\n\tif(part == \"graph\" && (s.split(\":\")[0] == \"db\")) return suff;\n\treturn s;\n}\n\nWOQLQuery.prototype.hasShortcut = function(operator, args, indent, show_context){\n\tif(operator == \"true\") return true;\n}\n\nWOQLQuery.prototype.getShortcut = function(operator, args, indent, show_context){\n\tif(operator == \"true\") return true;\n}\n\nfunction nspaces(n){\n\tlet spaces = \"\";\n\tfor(var i = 0; i<n; i++){\n\t\tspaces += \" \";\n\t}\n\treturn spaces;\n}\n\nWOQLQuery.prototype.printLine = function(indent, clauses){\n\treturn \"(\\n\" + nspaces(indent) + \"WOQL.\" + clauses.join(\",\\n\"+ nspaces(indent) + \"WOQL.\") + \"\\n\" + nspaces(indent - this.indent) + \")\";\n}\n\nWOQLQuery.prototype.cleanSubject = function(s){\n\tif(typeof s != \"string\") return s;\n\tif(s.indexOf(\":\") != -1) return s;\n\tif(this.vocab && this.vocab[s]) return this.vocab[s];\n\treturn \"doc:\" + s;\n}\n\nWOQLQuery.prototype.cleanPredicate = function(p){\n\tif(p.indexOf(\":\") != -1) return p;\n\tif(this.vocab && this.vocab[p]) return this.vocab[p];\n\treturn \"scm:\" + p;\n}\nWOQLQuery.prototype.cleanType = function(t){\n\tif(t.indexOf(\":\") != -1) return t;\n\tif(this.vocab && this.vocab[t]) return this.vocab[t];\n\treturn \"scm:\" + t;\n}\n\nWOQLQuery.prototype.cleanObject = function(o){\n\tif(typeof o != \"string\" || o.indexOf(\":\") != -1) return o;\n\tif(this.vocab && this.vocab[o]) return this.vocab[o];\n\treturn { \"@value\": o, \"@language\": \"en\"};\n}\n\nWOQLQuery.prototype.cleanGraph = function(g){\n\tif(g.indexOf(\":\") != -1) return g;\n\tif(this.vocab && this.vocab[g]) return this.vocab[g];\n\treturn \"db:\" + g;\n}\n\nWOQLQuery.prototype.cleanClass = function(c){\n\tif(c.indexOf(\":\") != -1) return c;\n\tif(this.vocab && this.vocab[c]) return this.vocab[c];\n\treturn \"scm:\" + c;\n}\n\n/*\n * higher level composite queries - not language or api elements\n */\n/**\n * Class for enabling building of triples from pieces\n * type is add_quad / remove_quad / add_triple / remove_triple\n */\nfunction TripleBuilder(type, cursor, s){\n\t//what accumulation type are we\n\tthis.type = type;\n\tthis.cursor = cursor;\n\tthis.subject = (s ? s : false);\n\tthis.g = false;\n}\n\nTripleBuilder.prototype.label = function(l, lang){\n\tlang = (lang ? lang : \"en\");\n\tif(l.substring(0, 2) == \"v:\"){\n\t\tvar d = {\"value\": l, \"@language\": lang }\n\t}\n\telse {\n\t\tvar d = {\"@value\": l, \"@language\": lang }\n\t}\n\tvar x = this.addPO('rdfs:label', d);\n\treturn x;\n}\n\nTripleBuilder.prototype.description = function(c, lang){\n\tlang = (lang ? lang : \"en\");\n\tif(c.substring(0, 2) == \"v:\"){\n\t\tvar d = {\"value\": c, \"@language\": lang }\n\t}\n\telse {\n\t\tvar d = {\"@value\": c, \"@language\": lang }\n\t}\n\treturn this.addPO('rdfs:comment', d);\n}\n\nTripleBuilder.prototype.addPO = function(p, o, g){\n\tif(this.type){\n\t\tvar ttype = (this.type == \"isa\" || this.type == \"sub\" ? \"triple\" : this.type);\n\t}\n\telse var ttype = \"triple\";\n\tvar evstr = ttype + '(\"' + this.subject + '\", \"' + p + '\", ';\n\tif(typeof o == \"string\"){\n\t\tevstr += \"'\" + o + \"'\";\n\t}\n\telse if(typeof o == \"object\"){\n\t\tevstr += JSON.stringify(o);\n\t}\n\telse {\n\t\tevstr += o;\n\t}\n\tif(ttype.substring(ttype.length-4) == \"quad\" || this.g){\n\t\tvar g = (g ? g : (this.g ? this.g : \"db:schema\"));\n\t\tevstr += ', \"' + g + '\"';\n\t}\n\tevstr += \")\";\n\ttry {\n\t\tvar unit = eval(\"new WOQLQuery().\" + evstr );\n\t\treturn this.addEntry(unit);\n\t}\n\tcatch(e){\n\t\tconsole.error(e);\n\t\treturn this;\n\t}\n}\n\nTripleBuilder.prototype.getO = function(s, p){\n\tif(this.cursor['and']){\n\t\tfor(var i = 0; i<this.cursor['and'].length; i++){\n\t\t\tvar clause = this.cursor['and'][i];\n\t\t\tvar key = Object.keys(clause)[0];\n\t\t\tif(clause[key][0] == s && clause[key][1] == p && clause[key][2]) return clause[key][2];\n\t\t}\n\t}\n\telse if(Object.keys(this.cursor)) {\n\t\tvar key =  Object.keys(this.cursor)[0];\n\t\tif(this.cursor[key][0] == s && this.cursor[key][1] == p && this.cursor[key][2])  return this.cursor[key][2];\n\t}\n\treturn false;\n}\n\nTripleBuilder.prototype.addEntry = function(unit){\n\tif(this.cursor[this.type]){\n\t\tvar next = {};\n\t\tnext[this.type] = this.cursor[this.type];\n\t\tthis.cursor['and'] = [next];\n\t\tdelete(this.cursor[this.type]);\n\t}\n\tif(this.cursor['and']){\n\t\tthis.cursor['and'].push(unit.json());\n\t}\n\telse {\n\t\tvar j = unit.json();\n\t\tif(j[this.type]) this.cursor[this.type] = j[this.type];\n\t\telse {\n\t\t\talert(JSON.stringify(j));\n\t\t}\n\t}\n\treturn this;\n}\n\nTripleBuilder.prototype.card = function(n, which){\n\tlet os = this.subject;\n\tthis.subject += \"_\" + which;\n\tthis.addPO('rdf:type', \"owl:Restriction\");\n\tthis.addPO(\"owl:onProperty\", os);\n\tswitch(which){\n\t\tcase \"max\": this.addPO(\"owl:maxCardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t\t\tbreak;\n\t\tcase \"min\": this.addPO(\"owl:minCardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t\t\tbreak;\n\t\tdefault: this.addPO(\"owl:cardinality\", {\"@value\": n, \"@type\": \"xsd:nonNegativeInteger\"});\n\t}\n\tlet od = this.getO(os, \"rdfs:domain\");\n\tif(od){\n\t\tvar x = this.subject;\n\t\tthis.subject = od;\n\t\tthis.addPO(\"rdfs:subClassOf\", this.subject);\n\t\t//this.triples.push([od, \"rdfs:subClassOf\", this.subject]);\n\t}\n\tthis.subject = os;\n\treturn this;\n};\n\nTripleBuilder.prototype.isa = function(a){\n\tvar unit = new WOQLQuery.isa(this.subject, a);\n\tthis.tb.addEntry(unit);\n}\n\nTripleBuilder.prototype.graph = function(g){\n\tthis.g = g;\n}\n\nTripleBuilder.prototype.sub = function(s){\n\tvar unit = new WOQLQuery.sub(this.subject, s);\n\treturn this.addEntry(unit);\n}\n\nTripleBuilder.prototype.abstract = function(){\n\treturn this.addPO('tcs:tag', \"tcs:abstract\");\n}\n\nmodule.exports = WOQL;\n","function Codemirror(text, format, config){\n  this.textdom = text;\n  this.mode = format;\n  if(objectIsEmpty(config)) this.darkMode = config.darkMode;\n  if(this.jsonldCheck(format)) this.mode = 'javascript';\n}\n// checks if a json object is empty\nfunction objectIsEmpty(arg) {\n  for (var item in arg) {\n    return false;\n  }\n  return true;\n}\n\nfunction autocomplete(){\n    var orig = CodeMirror.hint.javascript = function (cm) {\n        var list = [\"limit()\",\"start()\",\"triple()\"];//Session.get(Template.strSessionDistinctFields) || [];\n        var cursor = cm.getCursor();\n        var currentLine = cm.getLine(cursor.line);\n        var start = cursor.ch;\n        var end = start;\n        while (end < currentLine.length && /[\\w$]+/.test(currentLine.charAt(end))) ++end;\n        while (start && /[\\w$]+/.test(currentLine.charAt(start - 1))) --start;\n        var curWord = start != end && currentLine.slice(start, end);\n        var regex = new RegExp('^' + curWord, 'i');\n        var result = {\n            list: (!curWord ? list : list.filter(function (item) {\n                return item.match(regex);\n            })).sort(),\n            from: CodeMirror.Pos(cursor.line, start),\n            to: CodeMirror.Pos(cursor.line, end)\n        };\n        return result;\n    };\n    // codeMirror.hint.sql is defined when importing codemirror/addon/hint/sql-hint\n    // (this is mentioned in codemirror addon documentation)\n    // Reference the hint function imported here when including other hint addons\n    // or supply your own\n   \t//cm.replaceSelection(\".\");\n    //codeMirror.showHint(cm, CodeMirror.hint.javascript, hintOptions);\n}\n\n/*\ntxtar    : editor is attached to textar\nmode     : format for highlighting, ex: json, html etc.\neditable : readOnly false/ nocursor is special value in code editor to set readonly true */\nCodemirror.prototype.colorizeTextArea = function(dimensions){\n    //initize auto complete\n    /*CodeMirror.commands.autocomplete = function(cm) {\n    cm.showHint({hint: CodeMirror.hint.anyword});\n    }*/\n\n    // initialise code editor on text area\n    var editor = CodeMirror.fromTextArea(this.textdom, {\n        mode                : this.mode,\n        firstLineNumber     : 1,\n        lineNumbers         : true,\n        styleActiveLine     : true,\n        lineWrapping        : true,\n        smartIndent         : true,\n        indentWithTabs      : true,\n        newlineAndIndent    : true,\n        autoCloseBrackets   : true,\n        matchBrackets       : {afterCursor: true},\n        extraKeys           : {\"Ctrl-F\": \"find\",\n                               \"Tab\": \"autocomplete\",\n                               \"Ctrl-Q\": function(cm){ cm.foldCode(cm.getCursor()); }},\n        refresh             : true,\n        foldGutter          : true,\n        gutters             : [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\"]\n    });\n    editor.foldCode(CodeMirror.Pos(13, 0));\n    if(!(objectIsEmpty(dimensions)))\n        editor.setSize(dimensions.width, dimensions.height);\n    else this.setCodemirrorSize(editor, dimensions);\n    editor.defaultCharWidth('20px');\n    if(this.darkMode) editor.setOption(\"theme\", 'erlang-dark');\n    else editor.setOption(\"theme\", 'neo');\n    return editor;\n} // colorizeTextArea()\n\n/*\n  set editor size according to screens\n  editor : code mirror editor Object\n  mode   : editor being viewed from schema/ doc/ query page*/\nCodemirror.prototype.setCodemirrorSize = function(editor, dimensions){\n  switch(dimensions){\n    case 'query':\n      editor.setSize('800', '400');\n    break;\n    case 'schema':\n      editor.setSize('auto', '1550');\n    break;\n    case 'document':\n     editor.setSize('765', '500');\n    break;\n    case 'api-doc':\n        editor.setSize('800', '500');\n    break;\n    case 'doc-json':\n        editor.setSize('1410', 'auto');\n    break;\n    case 'doc-json-create':\n        editor.setSize('1410', '500');\n    break;\n  } // switch(dimensions)\n} // setCodemirrorSize()\n\n// updateTextArea(): highlights new changes on editor\nCodemirror.prototype.updateTextArea = function(editor){\n  editor.save();\n  setTimeout(function() {\n      editor.refresh();\n  },1);\n  // save changes of code mirror editor\n  editor.on('change', function(){\n    editor.save();\n  });\n} //updateTextArea()\n\n/*\ncolorizePre() to colorise pre tags (read only mode)\ntext (string)    : The document to run through the highlighter.\nmode (mode spec) : format to highlight color\noutput (DOM node): The tokens will be converted to spans as in an editor,\n                   and inserted into the node (through innerHTML).*/\nCodemirror.prototype.colorizePre = function(){\n  CodeMirror.runMode(this.textdom.innerText, this.mode, this.textdom);\n  if(this.darkMode)\n      var theme = 'cm-s-erlang-dark';\n  else var theme = 'cm-s-neo';\n  this.textdom.setAttribute('class', 'CodeMirror CodeMirror-wrap ' + theme + ' terminus-wrap-text terminus-wrapper-height ');\n  return this.textdom;\n} // colorizePre()\n\nCodemirror.prototype.jsonldCheck = function(format){\n  if(format == 'jsonld') return true;\n}\n\nmodule.exports=Codemirror\n","/*\n * User Interface elements dealing with database level functions - view, delete, create, db\n * view document etc\n */\nconst UTILS=require('./Utils');\nconst TerminusClient = require('@terminusdb/terminus-client');\nconst WOQLRule = require(\"./viewer/WOQLRule\");\nconst QueryPane = require(\"./html/QueryPane\");\nconst TerminusFrame = require(\"./viewer/TerminusFrame\");\nconst DocumentPane = require(\"./html/DocumentPane\");\n\n\n/*\n * User Interface elements dealing with database level functions - view, delete, create, db\n * view document etc\n */\nfunction TerminusDBController(ui){\n\t this.ui = ui;\n}\n\n/*\n * Controller provides access to the server level functions (create/delete db) and db-level functions (schema, query, document)\n * Populates left hand column on dashboard page\n */\nTerminusDBController.prototype.getAsDOM = function(){\n\tvar self = this;\n\tvar dbc = document.createElement(\"div\");\n\tdbc.setAttribute(\"class\", \"terminus-db-controller\");\n\tif(this.ui && this.ui.db()){\n\t\tvar scd = document.createElement(\"div\");\n\t\tscd.setAttribute(\"class\", \"terminus-field terminus-db-connection\");\n\t\tvar dbrec = this.ui.client.connection.getDBRecord();\n\t\tvar nm = (dbrec && dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.ui.db());\n\t\t//dbc.appendChild(scd);\n\t\tvar nav = document.createElement('div');\n\t\tnav.setAttribute('class', 'span3');\n\t\tdbc.appendChild(nav);\n\t\tvar ul = document.createElement('ul');\n\t\tul.setAttribute('class','terminus-ul' );\n\t\tnav.appendChild(ul);\n\t\t// connected to db\n\t\tvar a = document.createElement('a');\n        a.setAttribute('class', 'terminus-dashboard-info terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer\"');\n        a.appendChild(document.createTextNode(nm));\n\t\tul.appendChild(a);\n\t\tvar p = this.ui.page ? this.ui.page : \"db\";\n\t\tif(this.ui.showControl(\"db\")){\n\t\t\tif(p == \"db\") a.classList.add(\"terminus-selected\");\n\t\t\tself.ui.page = \"db\";\n\t\t\ta.addEventListener(\"click\", function(){\n\t\t\t\tself.ui.showDBMainPage();\n\t\t\t\tself.ui.page = \"db\";\n\t\t\t\tself.ui.redrawControls();\n\t\t\t});\n\t\t}\n\n\t\tif(this.ui.showControl(\"get_document\")){\n\t\t\tvar item = this.getControlHTML(\"Documents\", \"fas fa-file\");\n\t\t\tif(p == \"docs\") item.classList.add(\"terminus-selected\");\n\t\t    item.addEventListener(\"click\", function(){\n\t\t\t\tself.ui.showDocumentPage();\n\t\t\t\tself.ui.page = \"docs\";\n\t\t\t\tself.ui.redrawControls();\n\t\t\t });\n\t        ul.appendChild(item);\n\t    }\n\t\tif(this.ui.showControl(\"delete_database\")){\n\t\t\tvar item = this.getControlHTML(\"Delete Database\", \"fa-trash-alt\");\n\t\t    item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.activateSelectedNav(this, self);\n\t\t\t\tself.ui.deleteDatabase();\n\t\t\t });\n\t        ul.appendChild(item);\n\t\t}\n\t\tif(this.ui.showControl(\"woql_select\")){\n\t\t\tvar item = this.getControlHTML(\"Query\", \"fa-search\");\n\t\t\tif(p == \"query\") item.classList.add(\"terminus-selected\");\n\t\t    item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.activateSelectedNav(this, self);\n\t\t\t\tself.ui.page = \"query\";\n\t\t\t\tself.ui.showQueryPage();\n\t\t\t\tself.ui.redrawControls();\n\t\t\t});\n\t        ul.appendChild(item);\n\t\t}\n\t\tif(this.ui.showControl(\"get_schema\")){\n\t\t\tvar item = this.getControlHTML(\"Schema\", \"fa-cog\");\n\t\t\tif(p == \"schema\") item.classList.add(\"terminus-selected\");\n\t        item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.activateSelectedNav(this, self);\n\t\t\t\tself.ui.page = \"schema\";\n\t\t\t\tself.ui.showSchemaPage();\n\t\t\t\tself.ui.redrawControls();\n\t\t\t})\n\t        ul.appendChild(item);\n\t\t}\n\t}\n\treturn dbc;\n}\n\n\nTerminusDBController.prototype.getControlHTML = function(text, ic, css){\n    var self = this;\n    var a = document.createElement('a');\n\ta.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa ' + ic);\n    a.appendChild(icon);\n    var txt = document.createTextNode(text);\n    a.appendChild(txt);\n    return a;\n}\n\n\n/**\n * DB home page main function\n * @param {TerminusUI} ui\n */\nfunction TerminusDBViewer(ui){\n\tthis.ui = ui;\n\tthis.container = document.createElement(\"span\");\n\tthis.container.setAttribute(\"class\", \"terminus-main-page\");\n\tthis.pages = [\"home\"];\n}\n\nTerminusDBViewer.prototype.getAsDOM = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.container);\n\tvar limit = 20;\n\tvar WOQL = TerminusClient.WOQL;\n\tvar dburl = this.ui.client.connectionConfig.dbURL();\n\tvar q = WOQL.from(dburl).limit(limit).documentMetadata();\n\tq.execute(this.ui.client).then( (result) => {\n\t\tvar docs = new TerminusClient.WOQLResult(result, q);\n\t\tvar q2 = WOQL.from(dburl).concreteDocumentClasses();\n\t\tq2.execute(this.ui.client).then( (result2) => {\n\t\t\tvar docClasses = new TerminusClient.WOQLResult(result2, q2);\n\t\t\tvar bdom = this.getBodyAsDOM(docs, docClasses);\n\t\t\tif(bdom) this.container.appendChild(bdom);\n\t\t});\n\t}).catch((e) => {\n\t\tthis.ui.showError(e);\n\t});\n\treturn this.container;\n}\n\nTerminusDBViewer.prototype.getRulesForListOfDocuments = function(woql) {\n\tvar table = woql.table();\n\ttable.column('Label').header('Document');\n\ttable.column('Comment').header('Description');\n\ttable.column('Type_Comment').header('Type Description');\n\treturn table;\n}\n\nTerminusDBViewer.prototype.getRulesForGraphOfDocuments = function(woql){\n\tvar graph = woql.graph();\n\tgraph.height(500).width(1250);\n\treturn graph;\n}\n\nTerminusDBViewer.prototype.getBodyAsDOM = function(docs, docClasses){\n\t if(this.page == \"docs\"){\n\t\t return this.getDocumentsDOM(docs, docClasses);\n\t }\n\t else {\n\t\t return this.getHomeDOM(docs, docClasses);\n\t }\n}\n\nTerminusDBViewer.prototype.getHomeDOM = function(docs, docClasses){\n\tif(this.body){\n\t\tTerminusClient.FrameHelper.removeChildren(this.body);\n\t}\n\telse {\n\t\tthis.body = document.createElement(\"div\");\n\t\tthis.body.setAttribute(\"class\", \"terminus-home-body terminus-document-view\");\n\t\t//this.body.setAttribute('style', 'display: table-caption;');\n\t}\n\tif(docs.count() > 0){\n\t\tthis.body.appendChild(this.showHappyBox(\"dbhome\", \"demo\"));\n\t\tthis.body.appendChild(this.showHappyBox(\"dbhome\", \"intro\"));\n\t\tthis.body.appendChild(this.showHappyBox(\"happy\", \"query\"));\n\t\tvar delw = this.getDeleteDatabaseWidget();\n\t\tvar config = TerminusClient.WOQL.document();\n\t\tconfig.show_all(\"SimpleFrameViewer\");\n\t\tconfig.object().features(\"id\", \"type\", \"comment\", \"save\", \"value\");\n\t\tconfig.property().features(\"label\", \"value\");\n\t\tconfig.data().features(\"value\");\n\t\t\n\t\tvar cont = document.createElement(\"span\");\n\t\tthis.body.appendChild(cont);\n\t\tvar mydb = this.ui.db();\n\t\tthis.ui.connectToDB(\"terminus\");\n\t\tthis.insertDocument(\"doc:\" + mydb, cont, config);\n\t\tthis.ui.connectToDB(mydb); \n\t}\n\telse if(docClasses.count() > 0) {\n\t\tvar dchooser = this.getCreateDataChooser(docClasses,\n\t\t\t{showQuery: false, editQuery: false},\n\t\t\t{showConfig: false, editConfig: false});\n\t\tif(docClasses.count() <= 3){\n\t\t\tthis.body.appendChild(this.showHappyBox(\"empty\", \"schema\"));\n\t\t\tthis.body.appendChild(this.showHappyBox(\"empty\", \"query\"));\n\t\t\tif(docClasses.count() > 0){\n\t\t\t\tthis.body.appendChild(this.showHappyBox(\"empty\", \"docs\", dchooser));\n\t\t\t}\n\t\t}\n\t\telse  {\n\t\t\tthis.body.appendChild(this.showHappyBox(\"happy\", \"schema\"));\n\t\t\tthis.body.appendChild(this.showHappyBox(\"happy\", \"docs\", dchooser));\n\t\t\tthis.body.appendChild(this.showHappyBox(\"happy\", \"query\"));\n\t\t}\n\t}\n\telse {\n\t\tthis.body.appendChild(this.showHappyBox(\"empty\", \"schema\"));\n\t\tthis.body.appendChild(this.showHappyBox(\"empty\", \"query\"));\t\n\t}\n\tif(delw) this.body.appendChild(delw);\n\treturn this.body;\n}\n\n\nTerminusDBViewer.prototype.getDocumentsDOM = function(docs, docClasses){\n\tvar WOQL = TerminusClient.WOQL;\n\tvar self = this;\n\tif(this.body){\n\t\tTerminusClient.FrameHelper.removeChildren(this.body);\n\t\tvar body = this.body;\n\t}\n\telse {\n\t\tvar body = document.createElement(\"div\");\n\t\tbody.setAttribute(\"class\", \"terminus-home-body terminus-document-view\");\n\t\t//body.setAttribute('style', 'display: table-caption;');\n\t}\n\tvar page_actions = document.createElement(\"div\");\n\tpage_actions.setAttribute(\"class\", \"terminus-home-actions\");\n\tbody.appendChild(page_actions);\n\tvar span = document.createElement('span');\n\tspan.setAttribute('class', 'terminus-display-flex');\n\tpage_actions.appendChild(span);\n\tif(docClasses.count() > 0){\n\t\tvar ch = function(cls){\n\t\t\tif(cls)\tself.loadCreateDocumentPage(cls);\n\t\t}\n\t\tvar dchooser = this.getCreateDataChooser(docClasses,\n\t\t\t\t\t\t\t\t\t\t\t\t{showQuery: false, editQuery: false},\n\t\t\t\t\t\t\t\t\t\t\t\t{showConfig: false, editConfig: true},\n\t\t\t\t\t\t\t\t\t\t\t\t ch );\n\t\tif(docs.count() > 1) span.appendChild(dchooser);\n\t}\n\telse {\n\t\tthis.ui.showError(\"No document classes found in schema - you must define a document, entity or relationship class before you can create documents\");\n\t}\n\tif(docs.count() > 0){\n\t\tvar show_doc_action = this.getShowDocumentControl();\n\t\tspan.prepend(show_doc_action);\n\t\tvar dp = new QueryPane(this.ui.client, docs.query, docs)\n\t\t\t\t\t.options({showQuery: \"icon\", editQuery: true});\n\t\tvar table = this.getRulesForListOfDocuments(WOQL);\n\t\tvar g = this.getRulesForGraphOfDocuments(WOQL);\n\t\tvar options =  { showConfig: \"icon\", editConfig: \"true\", viewers: [g]};\n\t\tdp.addView(table, options);\n\t\tbody.appendChild(dp.getAsDOM());\n\t\tvar WOQL = TerminusClient.WOQL;\n\t\tvar dburl = this.ui.client.connectionConfig.dbURL();\n\t\tvar q = WOQL.from(dburl).limit(100).documentMetadata();\n\t\tq.execute(this.ui.client).then( (result) => {\n\t\t\tvar g = new TerminusClient.WOQLResult(result, q);\n\t\t\tvar ddp = new QueryPane(this.ui.client, g.query, g).options({showQuery: \"icon\", editQuery: false});\n\t\t\tvar g2 = this.getRulesForGraphOfDocuments(WOQL);\n\t\t\tvar options =  { showConfig: \"icon\", editConfig: \"true\", viewers: [table] };\n\t\t\tbody.appendChild(UTILS.getHeaderDom('Graph showing links between documents'));\n\t\t\tddp.addView(g2, options);\n\t\t\tbody.appendChild(ddp.getAsDOM());\n\t\t\tthis.container.appendChild(body);\n\t\t}).catch((e) => {\n\t\t\tthis.ui.showError(e);\n\t\t});\n\t}\n\telse {\n\t\tif(docClasses.count() == 3){\n\t\t\tbody.appendChild(this.showHappyBox(\"empty\", \"schema\"));\n\t\t\tbody.appendChild(this.showHappyBox(\"empty\", \"query\"));\n\t\t\tbody.appendChild(this.showHappyBox(\"empty\", \"docs\", dchooser));\n\t\t}\n\t\telse {\n\t\t\tbody.appendChild(this.showHappyBox(\"happy\", \"schema\"));\n\t\t\tbody.appendChild(this.showHappyBox(\"happy\", \"docs\", dchooser));\n\t\t\tbody.appendChild(this.showHappyBox(\"happy\", \"query\"));\n\t\t}\n\t}\n\tthis.body = body;\n\treturn body;\n}\n\n\nTerminusDBViewer.prototype.getDeleteDatabaseWidget = function(){\n\t// delete database\n\tif(this.ui.db() == \"terminus\") return;\n\tvar d = document.createElement(\"span\");\n\td.setAttribute(\"class\", \"terminus-db-widget\");\n\tTerminusClient.FrameHelper.removeChildren(this.container);\n    var del = document.createElement('button');\n    del.setAttribute('class', 'terminus-btn terminus-btn-float-right terminus-home-del');\n    del.setAttribute('type', 'button');\n\tdel.appendChild(document.createTextNode('Delete Database'));\n\tvar di = document.createElement(\"i\");\n\tdi.setAttribute(\"class\", \"fa fa-trash terminus-icon-padding\");\n\tdel.appendChild(di);\n\tvar dbrec = this.ui.getDBRecord();\n\tif(dbrec)\n\t\tvar nm = (dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.ui.db());\n\telse var nm = this.ui.db();\n    var self = this;\n\tvar dbdel = this.ui.db();\n\tvar delbut = this.ui.getDeleteDBButton(dbdel);\n\tif(delbut){\n\t\td.appendChild(delbut);\n\t}\n\treturn d;\n}\n\nTerminusDBViewer.prototype.styleCreateDocumentChooser = function(){\n\tvar select = document.getElementsByClassName('woql-chooser');\n\tfor(i=0; i<select.length; i++){\n\t\tif(select[i].type == 'select'){\n\t\t\tselect[i].classList.add('terminus-form-doc-value');\n\t\t\tvar self = this;\n\t\t\tselect[i].addEventListener('change', function(){\n\t\t\t\tself.showCreateDocument(this.value);\n\t\t\t})\n\t\t}\n\t}\n}\n\nTerminusDBViewer.prototype.getCreateDataChooser = function(docClasses, qopts, ropts, change, pholder){\n\tvar WOQL = TerminusClient.WOQL;\n\tpholder = (pholder ? pholder : \"Create a New Document\");\n\tqopts  = (qopts ? qopts :  { showConfig: \"icon\", editConfig: \"true\" });\n\tvar dp = new QueryPane(this.ui.client, docClasses.query, docClasses).options(qopts);\n\tvar chooser = WOQL.chooser().values(\"Class\").labels(\"Label\").titles(\"Comment\").show_empty(pholder);\n\n\tvar self = this;\n\tchooser.change = (change ? change : function(cls){\n\t\tif(cls)\tself.loadCreateDocumentPage(cls);\n\t});\n\tropts  = (ropts ? ropts :  { showConfig: \"icon\", editConfig: \"true\" });\n\tdp.addView(chooser, ropts);\n\tvar dchooser = dp.getAsDOM();\n\treturn dchooser;\n}\n\nTerminusDBViewer.prototype.showHappyBox = function(happy, type, chooser){\n\tvar hbox = document.createElement(\"div\");\n\thbox.setAttribute(\"class\", \"terminus-welcome-box terminus-no-res-alert\");\n\tvar self = this;\n\tvar sets = {};\n\tif(type == \"schema\"){\n\t\tsets.title = (happy == \"happy\") ? \"Document Classes Created\" : \"No Schema Created\";\n\t\tsets.text = (happy == \"happy\") ? \"You have successfully created a schema with valid document classes!\" : \"You should create a schema and add at least one document classes before you add data to the system\";\n\t\tsets.css = \"fa fa-cog fa-2x terminus-welcome-icons\";\n\t}\n\telse if(type == \"docs\"){\n\t\tsets.css = \"fa fa-book fa-2x terminus-welcome-icons\";\n\t\tsets.title = \"Create Documents\";\n\t\tsets.text = (happy == \"happy\") ? \"Add data to the system through easy to use automatically generated forms for each document type\" : \"You should create a schema and add at least one document classes before you add data to the system\";\n\t}\n\telse if(type == \"intro\"){\n\t\tsets.css = \"fa fa-book fa-2x\";\n\t\tsets.title = \"View Documents\";\n\t\tsets.text = \"View the documents in the database and add new ones\";\n\t}\n\telse if(type == \"query\"){\n\t\tsets.css = \"fa fa-search fa-2x\";\n\t\tsets.title = \"Run Queries\";\n\t\tsets.css = \"fa fa-search fa-2x terminus-welcome-icons\";\n\t\tsets.title = \"Run Queries\";\n\t\tsets.text = (happy == \"happy\") ? \"You can add data to the system with queries and scripts, and import data directly from CSVs and URLs\" : \"You can write WOQL queries to create a schema through our query interface\";\n\t}\n\telse if(type == \"demo\"){\n\t\tsets.css = \"fa fa-database fa-2x terminus-welcome-icons\";\n\t\tvar dbrec = this.ui.getDBRecord();\n\t\tif(dbrec)\n\t\t\tvar nm = (dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.ui.db());\n\t\telse var nm = this.ui.db();\n\t\tsets.title = nm ;\n\t\tsets.text = \"On this level we just want functions that have database granularity - collaboration, access control, database meta-data...\";\n\t}\n\tvar ispan =  document.createElement(\"span\");\n\tvar ic = document.createElement(\"i\");\n\tic.setAttribute(\"class\", sets.css);\n\tispan.appendChild(ic);\n\thbox.appendChild(ispan);\n\tvar htit = document.createElement(\"span\");\n\thtit.appendChild(document.createElement(\"strong\").appendChild(document.createTextNode(sets.title)));\n\thtit.classList.add('terminus-welcome-title');\n\thbox.appendChild(htit);\n\tvar body = document.createElement(\"p\");\n\tbody.setAttribute('class', 'terminus-welcome-body');\n\tbody.appendChild(document.createTextNode(sets.text));\n\thbox.appendChild(body);\n\tif(type == \"schema\"){\n\t\thbox.addEventListener(\"click\", function(){\n\t\t\tself.ui.page = \"schema\";\n\t\t\tself.ui.showSchemaPage();\n\t\t\tself.ui.redrawControls();\n\t\t});\n\t};\n\tif(type == \"intro\"){\n\t\thbox.addEventListener(\"click\", function(){\n\t\t\tself.ui.page = \"docs\";\n\t\t\tself.ui.showDocumentPage();\n\t\t\tself.ui.redrawControls();\n\t\t});\n\t};\n\tif(type == \"query\"){\n\t\thbox.addEventListener(\"click\", function(){\n\t\t\tself.ui.page = \"query\";\n\t\t\tself.ui.showQueryPage();\n\t\t\tself.ui.redrawControls();\n\t\t});\n\t};\n\tif(type == \"query\" || type == \"schema\" || type == \"intro\"){\n\t\thbox.addEventListener('mouseover', function(){\n            this.style.cursor = \"pointer\";\n\t\t});\n\t}\n\tif(type == \"docs\"){\n\t\tvar sp = document.createElement('span');\n\t\tsp.setAttribute('class', 'terminus-welcome-chooser');\n\t\tsp.appendChild(chooser);\n\t\thbox.appendChild(sp);\n\t}\n\treturn hbox;\n}\n\nTerminusDBViewer.prototype.loadCreateDocumentPage = function(cls){\n\tthis.ui.page = \"docs\";\n\tthis.ui.redrawControls();\n\tvar WOQL = TerminusClient.WOQL;\n\tvar dburl = this.ui.client.connectionConfig.dbURL();\n\n\tvar df = new DocumentPane(this.ui.client).options({\n\t\tshowQuery: \"icon\",\n\t\teditQuery: false,\n\t\tloadDocument: this.getShowDocumentControl(),\n\t});\n\tvar q2 = WOQL.from(dburl).concreteDocumentClasses();\n\tq2.execute(this.ui.client).then( (result2) => {\n\t\tvar docClasses = new TerminusClient.WOQLResult(result2, q2);\n\t\tvar dchooser = this.getCreateDataChooser(docClasses, {showQuery: \"icon\", editQuery: false},  { showConfig: \"icon\", editConfig: \"true\" } );\n\t\tdf.setClassLoader(dchooser);\n\t});\n\tvar config = WOQL.document().load_schema(true);\n\tconfig.show_all(\"SimpleFrameViewer\");\n\tconfig.object().features(\"id\", \"type\", \"comment\", \"delete\", \"reset\", \"hide\", \"show\", \"clone\", \"update\", \"view\", \"add\", \"value\").mode(\"edit\");//\"summary\", \"viewer\", \"status\",\n\tconfig.property().features(\"value\", \"label\").mode(\"edit\");//features(\"id\", \"cardinality\", \"type\", \"comment\", \"delete\", \"reset\", \"hide\", \"show\", \"clone\", \"update\", \"view\", \"add\", \"value\");//\"summary\", \"status\",\n\tconfig.data().features(\"value\").mode(\"edit\");//.dataviewer(\"HTMLStringViewer\").args({max_cell_size: 20, max_word_size: 10});\n\n\tdf.loadClass(cls, config).then(() => {\n\t\tthis.pages.push(\"New \" + cls);\n\t\tTerminusClient.FrameHelper.removeChildren(this.container);\n\t\tvar nav = this.getNavigationDOM();\n\t\tthis.container.appendChild(nav);\n\t\tthis.container.appendChild(df.getAsDOM());\n\t});\n}\n\nTerminusDBViewer.prototype.getNavigationDOM = function(){\n\tvar s = document.createElement(\"span\");\n\ts.setAttribute('class', 'terminus-back-to-home terminus-backtohome-span');\n\tvar i = document.createElement(\"span\");\n\ti.setAttribute(\"class\", \"fa fas fa-arrow-left\");\n\ts.appendChild(i);\n\tvar p =  this.pages[this.pages.length-2];\n\ts.appendChild(document.createTextNode(\" back to \" + p));\n\ts.addEventListener(\"click\", () => {\n\t\tvar pp = this.pages.pop();\n\t\tp =  this.pages[this.pages.length-1];\n\t\tif(p == \"home\"){\n\t\t\t//this.ui.page = \"docs\";\n\t\t\tthis.getAsDOM();\n\t\t}\n\t\telse {\n\t\t\tpp = this.pages.pop();\n\t\t\tthis.showDocumentPage(pp);\n\t\t}\n\t});\n\ts.addEventListener('mouseover', function(){\n\t\tthis.style.cursor = \"pointer\";\n\t});\n\treturn s;\n}\n\nTerminusDBViewer.prototype.insertDocument = function(docid, insertDOM, config){\n\tvar df = new DocumentPane(this.ui.client).options(config);\n\treturn df.loadDocument(docid, config).then(() => {\n\t\tinsertDOM.appendChild(df.getAsDOM());\n\t})\n\t.catch((e) => this.ui.showError(e));\t\n}\n\nTerminusDBViewer.prototype.showDocumentPage = function(docid){\n\tthis.ui.page = \"docs\";\n\tthis.ui.redrawControls();\n\tvar start = docid.substring(0, 4);\n\tif(start != \"doc:\" && start != \"http\") docid = \"doc:\" + docid;\n\tvar WOQL = TerminusClient.WOQL;\n\tvar dburl = this.ui.client.connectionConfig.dbURL();\n\tvar df = new DocumentPane(this.ui.client).options({\n\t\tshowQuery: \"icon\",\n\t\teditQuery: true,\n\t\tloadDocument: this.getShowDocumentControl(),\n\t});\n\tvar q2 = WOQL.from(dburl).concreteDocumentClasses();\n\tq2.execute(this.ui.client).then( (result2) => {\n\t\tvar docClasses = new TerminusClient.WOQLResult(result2, q2);\n\t\tvar dchooser = this.getCreateDataChooser(docClasses, {showQuery: \"icon\", editQuery: false},  { showConfig: \"icon\", editConfig: \"true\" } );\n\t\tdf.setClassLoader(dchooser);\n\t});\n\n\n\tvar config = WOQL.document().load_schema(true);\n\tconfig.show_all(\"SimpleFrameViewer\");\n\tconfig.object().features(\"id\", \"type\", \"comment\", \"delete\", \"reset\", \"hide\", \"show\", \"clone\", \"update\", \"view\", \"add\", \"value\");//\"summary\", \"viewer\", \"status\",\n\tconfig.property().features(\"value\");//features(\"id\", \"cardinality\", \"type\", \"comment\", \"delete\", \"reset\", \"hide\", \"show\", \"clone\", \"update\", \"view\", \"add\", \"value\");//\"summary\", \"status\",\n\tconfig.data().features(\"value\");//.dataviewer(\"HTMLStringViewer\").args({max_cell_size: 20, max_word_size: 10});\n\n\tthis.pages.push(docid);\n\tTerminusClient.FrameHelper.removeChildren(this.container);\n\tthis.insertDocument(docid, this.container, config);\n}\n\nTerminusDBViewer.prototype.getShowDocumentControl = function(){\n\tvar scd = document.createElement(\"span\");\n\tscd.setAttribute(\"class\", \"terminus-get-doc terminus-document-chooser terminus-form-horizontal terminus-control-group\");\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"terminus-document-chooser-label terminus-doc-control-label terminus-control-label-padding\");\n\tvar dcip = document.createElement(\"input\");\n\tdcip.setAttribute(\"class\", \"terminus-form-doc-value terminus-document-chooser terminus-doc-input-text\");\n\tdcip.setAttribute(\"placeholder\", \"Enter Document ID to view ...\");\n\tvar nbut = document.createElement(\"button\");\n\tnbut.setAttribute('class', \"terminus-control-button terminus-document-button terminus-btn\");\n\tnbut.setAttribute('title', 'Enter Document ID to view');\n\tvar is = document.createElement('i');\n\tis.setAttribute('class', 'fa fa-caret-left');\n\tnbut.appendChild(is);\n\tnbut.appendChild(document.createTextNode(\" Load \"));\n\tvar i = document.createElement('i');\n\ti.setAttribute('class', 'fa fa-caret-right');\n\tnbut.appendChild(i);\n\tvar self = this;\n\tnbut.addEventListener(\"click\", function(){\n\t\tif(dcip.value) {\n\t\t\tself.showDocumentPage(dcip.value);\n\t\t}\n\t})\n\tdcip.addEventListener(\"keyup\", function(event) {\n\t\tevent.preventDefault();\n\t\tif (event.keyCode === 13 && dcip.value) {\n\t\t\tself.showDocumentPage(dcip.value);\n\t\t}\n\t});\n\tscd.appendChild(lab);\n\tscd.appendChild(dcip);\n\tscd.appendChild(nbut);\n\treturn scd;\n}\n\nTerminusDBViewer.prototype.getDocumentTableConfig = function(nq){\n\tvar self = this;\n\tvar rowClick = function(row){\n\t\tself.ui.showDocument(row['v:ID']);\n\t};\n\tvar cellClick = function(key, value){\n\t\tself.ui.showDocument(value);\n\t}\n\n\tvar opts = {\n\t\t//cellClick: cellClick,\n\t\trowClick: rowClick,\n\t\t\"v:ID\": {\n\t\t\thidden: true\n\t\t},\n\t\t\"v:Class\": {hidden: true },\n\t\t\"v:Type_Comment\": {hidden: true },\n\t\t\"v:Label\": {\n\t\t\theader: \"Document\",\n\t\t\trenderer: function(dataviewer){\n\t\t\t\treturn dataviewer.annotateValue(dataviewer.value(),\n\t\t\t\t\t{ ID: dataviewer.binding('v:ID')});\n\t\t\t},\n\t\t},\n\t\t\"v:Type\": {\n\t\t\trenderer: function(dataviewer){\n\t\t\t\treturn dataviewer.annotateValue(dataviewer.value(),\n\t\t\t\t\t\t{ Class: dataviewer.binding('v:Class'), Description: dataviewer.binding('v:Type_Comment')}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t\"v:Comment\": {\theader: \"Description\", renderer: \"HTMLStringViewer\", args: {max_cell_size: 40, max_word_size: 10} },\n\t\t\"column_order\" : [\"v:Label\", \"v:Type\", \"v:Comment\"]\n\t}\n\t//return {};\n\treturn opts;\n}\n\nTerminusDBViewer.prototype.getExplanation = function(view){\n\tvar d = document.createElement('div');\n\tvar title = view.charAt(0).toUpperCase() + view.slice(1)\n\td.appendChild(UTILS.getHeaderDom(title + ' View'));\n\tif(view == 'table')\n\t\tvar explaination = 'Below view shows a table view of available documents within the database';\n\telse var explaination = 'Below view shows a graph view of how available documents are related to other documents';\n\td.appendChild(document.createTextNode(explaination));\n\treturn d;\n}\n\nTerminusDBViewer.prototype.getClassesDOM = function(d){\n\tvar q = TerminusClient.WOQL\n\t\t\t\t.limit(25)\n\t\t\t\t.start(0)\n\t\t\t\t.documentMetadata();\n\tvar self = this;\n\tvar rowClick = function(row){\n\t\tself.ui.showDocument(row['v:ID']);\n\t};\n\tvar cellClick = function(key, value){\n\t\tself.ui.showDocument(value);\n\t}\n\n\tvar showLabel = function(value, key, row){\n\t\tif(value) return document.createTextNode(value['@value'] + \" aa\");\n\t\treturn document.createElement(\"span\");\n\t}\n\tlet nq = new TerminusHTMLViewer(this.ui.client);//should specify default renderers here....\n\tlet WOQL = TerminusClient.WOQL;\n\tlet query = WOQL.from(this.ui.client.connectionConfig.dbURL()).limit(25).start(0).documentMetadata();\n\t//TerminusClient.FrameHelper.loadDynamicCSS(\"myfa\", \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0-11/css/all.css\");\n\tquery.execute(this.ui.client).then((results) => {\n\t\tlet qres = new TerminusClient.WOQLResult(results, query);\n\t\tvar nt = nq.showResult(qres, WOQL.table(), false);\n\t\td.appendChild(this.getExplanation('table'));\n\t\td.appendChild(nt);\n\t\t/*qres.first()\n\t\tvar n = nq.showResult(qres, WOQL.chooser());\n\t\td.appendChild(n); */\n\t\tqres.first();\n\t\tvar lg = WOQL.graph();\n\t\tlg.source(\"v:Subject\");\n\t\tvar licon2 = { color: [255,255,25], weight: 100, unicode: \"\\uf2bb\", size:2 };\n\t\tlg.edge(\"v:Subject\", \"v:Object\").icon(licon2);\n\t\tvar ng = nq.showResult(qres, lg, false);\n\t\td.appendChild(this.getExplanation('graph'));\n\t\td.appendChild(ng);\n\t\tqres.first();\n\t\t//var sg = nq.showResult(qres, WOQL.stream());\n\t\t//d.appendChild(sg);\n\t\t//d.appendChild(nc);\n\t\t//var ng = nq.displayResults(false, WOQL.graph());\n\t\t//d.appendChild(ng);\n\t\t/*let t = WOQL.table().pager(false);\n\t\tt.column(\"Class\", \"Type_Comment\", \"ID\").hidden(true);\n\t\tt.column(\"Label\").header(\"Document\");\n\t\tt.column(\"Comment\").header(\"Description\");\n\t\tt.column(\"Comment\").renderer(\"HTMLStringViewer\").args({max_cell_size: 20, max_word_size: 10});\n\t\t//t.column_order(\"Subject\", \"Predicate\", \"Object\");\n\t\tt.column(\"Label\").render(showLabel);\n\t\tt.row().click(rowClick);\n\t\tqres.first();\n\t\tvar dt2 = nq.showResult(qres, t);\n\t\td.appendChild(dt2);\n\n\t\tqres.first();\n\t\tvar w = WOQL.chooser().values(\"ID\").labels(\"Comment\").titles(\"Class\").sort(\"Comment\").direction(\"asc\");\n\t\tw.change(function(x){\n\t\t\talert(x);\n\t\t}).show_empty(\"Choose something\");\n\t\tvar n2 = nq.showResult(qres, w);\n\t\td.appendChild(n2);\n\t\tvar licon2 = { color: [255,255,25], weight: 100, unicode: \"\\uf2bb\", size:2 };\n\t\tvar licon = { color: [255,255,255], weight: 100, unicode: \"\\uf1c2\"};\n\t\tvar licon3 = { color: [23,3,34], weight: 100, unicode: \"\\uf1c2\"};\n\t\tvar lborder = { color: [10,255,0], weight: 100, unicode: \"\\uf2bb\", size:2 };\n\t\tvar g = WOQL.graph();\n\t\tg.source(\"ID\").width(\"1000\").height(1000);//.literals(false);\n\t\t//g.node(\"Id\").size(20).color([220, 202, 230]).collisionRadius(100).icon(licon3);\n\t\tg.node(\"Object\").size(24).color([20, 20, 20]).icon(licon2);\n\t\tg.node().literal(true).color([200, 200, 220]).size(10).icon(licon);\n\t\tg.node(\"Predicate\").hidden(true);\n\t\t//var e = g.rule().edge(\"ID\", \"Class\").label(x).icon(y).color();\n\t\t//var n = g.rule().node(\"ID\").label(x).icon(y).color();\n\t\tg.edges([\"Subject\", \"Object\"]);\n\t\tg.edge().color([150, 200, 250]);\n\t\tqres.first()\n\t\tvar ng3 = nq.showResult(qres, g);\n\t\td.appendChild(ng3);*/\n\t\t/*var x = \"doc:access_all_areas\";\n\t\tvar nd = WOQL.document();\n\t\tnd.show_all(\"SimpleFrameViewer\");\n\t\tnd.object().features(\"id\", \"type\", \"comment\", \"delete\", \"reset\", \"hide\", \"show\", \"clone\", \"update\", \"view\", \"add\", \"value\");//\"summary\", \"viewer\", \"status\",\n\t\tnd.property().features(\"value\");//features(\"id\", \"cardinality\", \"type\", \"comment\", \"delete\", \"reset\", \"hide\", \"show\", \"clone\", \"update\", \"view\", \"add\", \"value\");//\"summary\", \"status\",\n\t\tnd.data().features(\"value\");//.dataviewer(\"HTMLStringViewer\").args({max_cell_size: 20, max_word_size: 10});\n\t\tvar d1 = nq.document(x, nd);\n\t\td.appendChild(d1); */\n\t});\n\t//let c = WOQL.chooser();\n\n\t//t.display(query);\n\t//t.column(\"Label\").header(\"Document\").render(showLabel).click(cellClick);\n\t//t.column(\"ID\").header(\"l\").renderer(\"MyRenderer\");\n\t//should specify default renderers here....\n\t//var qp = nq.querypane(woql, this.getDocumentTableConfig());\n\n\t//let nquery = WOQL.from(this.ui.client.connectionConfig.dbURL()).limit(1000).simpleGraphQuery();\n\t//let g = WOQL.graph();\n\t//g.edge(\"v:Source\", \"v:Edge\", \"v:Target\").label(\"bla\").color([23,23,45]).weight(\"v:Account\")\n\t//t.column(\"Class\", \"Type_Comment\", \"ID\").hidden(true);\n\t//t.column(\"Label\").header(\"Document\").render(showLabel).click(cellClick);\n\t//t.column(\"Comment\").header(\"Description\").renderer(\"HTMLStringViewer\").args({max_cell_size: 20, max_word_size: 10});\n\t//t.column(\"ID\").header(\"l\").renderer(\"MyRenderer\");\n\t//t.order(\"Label\", \"Type\", \"Comment\");\n\t//var ng = nq.displayResults(nquery, g);\n\t//d.appendChild(ng);\n\n\n\treturn d;\n\t/*var q = this.wquery.getClassesQuery(25, 0);\n\tvar self = this;\n\t//this.wquery.execute(q)\n\tq.execute(this.ui.client)\n\t.then(function(result){\n\t\tvar wqRes = new TerminusClient.WOQLResult(result, q);\n\t\tself.result = new WOQLResultsViewer.WOQLResultsViewer(self.ui, result, wqRes, {}, {}, false);\n\t\tif(self.result){\n\t\t\tvar nd = self.result.getAsDOM(d, false);\n\t\t\tif(nd){\n\t\t\t\tnd.setAttribute('class', 'terminus-margin-box');\n\t        }\n\t\t\telse{\n\t\t\t\tnor = document.createElement('div');\n\t\t\t\tnor.setAttribute('class', 'terminus-no-res-alert');\n\t\t\t\tnor.appendChild(document.createTextNode(\"No results available, create new ones to view them here...\"));\n\t\t\t\td.appendChild(nor);\n\t\t\t}\n\t\t}\n\t})\n\t.catch(function(err){\n\t\tconsole.error(err);\n\t\tself.ui.showError(err);\n\t});\n\treturn d;*/\n}\n\n/**\n * Class Representing the create Database form\n * @param {TerminusUI} ui\n */\nfunction TerminusDBCreator(ui){\n\tthis.ui = ui;\n}\n\nTerminusDBCreator.prototype.getAsDOM = function(selected){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-db-creator\");\n\tvar sct = document.createElement(\"h3\");\n\tsct.setAttribute(\"class\", \"terminus-db-creator-title terminus-module-head\");\n\tsct.appendChild(UTILS.getHeaderDom(\"Create Database\"));\n\tscd.appendChild(sct);\n\tvar mfd = document.createElement('div');\n\tmfd.setAttribute('class', 'terminus-form-border ');\n\tscd.appendChild(mfd);\n\tvar dht = document.createElement('div');\n\tdht.setAttribute('class', 'terminus-form-margin-top');\n\tmfd.appendChild(dht);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-id-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"ID\"));\n\tsci.appendChild(slab);\n\tvar idip = document.createElement(\"input\");\n\tidip.setAttribute(\"type\", \"text\");\n\tidip.setAttribute(\"class\", \"terminus-form-value terminus-input-text\");\n\tidip.setAttribute(\"placeholder\", \"No spaces or special characters allowed in IDs\");\n\tsci.appendChild(idip);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-title-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Title\"));\n\tvar titip = document.createElement(\"input\");\n\ttitip.setAttribute(\"type\", \"text\");\n\ttitip.setAttribute(\"placeholder\", \"A brief title for the Database\");\n\ttitip.setAttribute(\"class\", \"terminus-form-value terminus-input-text\");\n\tsci.appendChild(slab);\n\tsci.appendChild(titip);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-title-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Description\"));\n\tsci.appendChild(slab);\n\tvar descip = document.createElement(\"textarea\");\n\tdescip.setAttribute(\"class\", \"terminus-textarea terminus-db-description terminus-textarea \");\n\tdescip.setAttribute(\"placeholder\", \"A short text describing the database and its purpose\");\n\tsci.appendChild(descip);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-schema-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Import Schema\"));\n\tsci.appendChild(slab);\n\tvar schem = document.createElement(\"input\");\n\tschem.setAttribute(\"placeholder\", \"Terminus DB URL\");\n\tschem.setAttribute(\"type\", \"text\");\n\tschem.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-input-text\");\n\tsci.appendChild(schem);\n\tmfd.appendChild(sci);\n\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-schema-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Key\"));\n\tsci.appendChild(slab);\n\tvar kip = document.createElement(\"input\");\n\tkip.setAttribute(\"placeholder\", \"Server API Key\");\n\tkip.setAttribute(\"type\", \"text\");\n\tkip.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-input-text\");\n\tsci.appendChild(kip);\n\tmfd.appendChild(sci);\n\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-data-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Import Data\"));\n\tsci.appendChild(slab);\n\tvar datip = document.createElement(\"input\");\n\tdatip.setAttribute(\"type\", \"text\");\n\tdatip.setAttribute(\"placeholder\", \"Terminus DB URL\");\n\tdatip.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-input-text\");\n\tsci.appendChild(datip);\n\t//mfd.appendChild(sci);\n\tvar butfield = document.createElement(\"div\");\n\tbutfield.setAttribute(\"class\", \"terminus-control-buttons\");\n\tvar cancbut = document.createElement(\"button\");\n\tcancbut.setAttribute(\"class\", \"terminus-control-button terminus-cancel-db-button terminus-btn terminus-btn-float-right\");\n\tcancbut.appendChild(document.createTextNode(\"Cancel\"));\n\tvar loadbut = document.createElement(\"button\");\n\tloadbut.setAttribute(\"class\", \"terminus-control-button terminus-create-db-button terminus-btn terminus-btn-float-right\");\n\tloadbut.appendChild(document.createTextNode(\"Create\"));\n\tvar self = this;\n\tvar gatherips = function(){\n\t\tvar input = {};\n\t\tinput.id = idip.value;\n\t\tinput.title = titip.value;\n\t\tinput.description = descip.value;\n\t\tinput.schema = schem.value;\n\t\tinput.key = kip.value;\n\t\tinput.data = datip.value;\n\t\treturn input;\n\t}\n\tvar self = this;\n\tloadbut.addEventListener(\"click\", function(){\n\t\tvar input = gatherips();\n\t\tself.ui.createDatabase(input);\n\t})\n\tcancbut.addEventListener(\"click\", function(){\n\t\tself.ui.showServerMainPage();\n\t})\n\tbutfield.appendChild(cancbut);\n\tbutfield.appendChild(loadbut);\n\tmfd.appendChild(butfield);\n\n\treturn scd;\n}\n\nmodule.exports={TerminusDBViewer:TerminusDBViewer,\n\t            TerminusDBController:TerminusDBController,\n\t            TerminusDBCreator:TerminusDBCreator}\n","const TerminusClient = require('@terminusdb/terminus-client');\n\nfunction WOQLQueryView(client){\n\tthis.client = client;\n}\n\nWOQLQueryView.prototype.options = function(options){\n\tthis.options = options;\n\treturn this;\n}\n\nWOQLQueryView.prototype.setQuery = function(query){\n\tthis.query = query;\n\treturn this;\n}\n\nWOQLQueryView.prototype.setRenderer = function(rend){\n\tthis.renderer = rend;\n\treturn this;\n}\n\nWOQLQueryView.prototype.render = function(){\n\tif(this.renderer){\n\t\tif(this.query){\n\t\t\tthis.renderer.set(this.query);\n\t\t}\n\t\treturn this.renderer.render(this);\n\t}\n}\n\n//parses a string encoding a woql in either json or js notation\nWOQLQueryView.prototype.parseText = function(text, format){\n\ttry {\n\t\tvar WOQL = TerminusClient.WOQL;\n\t\tif(format == \"json\"){\n\t\t\tvar qval = JSON.parse(text);\n\t\t\treturn WOQL.json(qval);\n\t\t}\n\t\telse {\n\t\t\tvar nw = eval(\"WOQL.\" + text);\n\t\t\treturn nw;\n\t\t}\n\t}\n\tcatch(e){\n\t\tthis.error(\"Failed to parse Query \" + e.toString());\n\t}\n}\n\nWOQLQueryView.prototype.submitQuery = function(qObj){\n\n}\n\nWOQLQueryView.prototype.error = function(msg){\n\tconsole.log(msg);\n}\n\nWOQLQueryView.prototype.serialise = function(query, format){\n\tif(format == \"json\"){\n\t\treturn JSON.stringify(query.json(), 0, 2);\n\t}\n\telse {\n\t\treturn query.prettyPrint(4);\n\t}\n}\n\nmodule.exports = WOQLQueryView;\n","const TerminusCodeSnippet = require('./query/TerminusCodeSnippet');\nconst TerminusClient = require('@terminusdb/terminus-client');\nconst Datatypes = require(\"./Datatypes\");\nconst SimpleTable = require(\"./table/SimpleTable\");\nconst SimpleGraph = require(\"./graph/SimpleGraph\");\nconst SimpleStream = require(\"./stream/SimpleStream\");\nconst SimpleChooser = require(\"./chooser/SimpleChooser\");\n\n/**\n * Result Pane is defined by a WOQL configuration object\n * Visually it consists of a single rule editor (showing the current state of the configuration object) which may be collapsed behind a configuration link\n * and a single result view which shows the result of the rule when applied to the current results.\n *\n */\nfunction ResultPane(client, querypane, config){\n    this.client = client;\n    this.qp = querypane;\n    this.config = config;\n\tthis.container = document.createElement('span');\n    this.container.setAttribute('class', 'terminus-result-pane');\n}\n\nResultPane.prototype.options = function(opts){\n\tthis.showConfig = (opts && typeof opts.showConfig != \"undefined\" ? opts.showConfig : false);\n    this.editConfig = (opts && typeof opts.editConfig != \"undefined\" ? opts.editConfig : false);\n    this.changeViewType = (opts && typeof opts.changeViewType != \"undefined\" ? opts.changeViewType : true);\n    this.intro = (opts && typeof opts.intro != \"undefined\" ? opts.intro : false);\n    this.renderers =  (opts && opts.renderers ? opts.renderers : {\n\t\ttable: new SimpleTable(),\n\t\tgraph: new SimpleGraph(),\n\t\tstream: new SimpleStream(),\n\t\tchooser: new SimpleChooser()\n    });\n    if(this.config){\n        this.viewers = [this.config];\n    }\n    this.viewers =  (opts && typeof opts.viewers != \"undefined\" ? this.viewers.concat(opts.viewers) : this.viewers);\n    this.currentViewer = 0;\n    return this;\n}\n\nResultPane.prototype.getAsDOM = function(){\n    if(this.intro){\n        var di = (typeof this.intro == \"string\" ? document.createTextNode(this.intro) : this.intro);\n\t\tthis.container.appendChild(di);\n\t}\n    var configspan = document.createElement(\"span\");\n    configspan.setAttribute(\"class\", \"pane-config-icons\");\n    this.container.appendChild(configspan);\n\tthis.resultDOM = document.createElement('span');\n\tthis.resultDOM.setAttribute('class', 'terminus-result-view');\n\tif(this.result){\n\t\tthis.resultDOM.appendChild(this.getResultDOM());\n\t}\n\tthis.container.appendChild(this.resultDOM);\n\tif(this.showConfig){\n        this.showingQuery = (this.showConfig != \"icon\");\n\t\tvar mode = (this.editConfig ? \"edit\" : \"view\");\n\t\tthis.input = this.createInput(mode);\n\t\tvar ipdom = this.input.getAsDOM();\n        var ispan = document.createElement(\"span\");\n        ispan.addEventListener('mouseover', function(){\n            this.style.cursor = \"pointer\";\n\t\t});\n\t\tispan.setAttribute(\"class\", \"result-pane-config\");\n\t\tvar ic = document.createElement(\"i\");\n\t\tispan.appendChild(ic);\n\t\tconfigspan.appendChild(ispan);\n\t\tvar self = this;\n\t\tfunction showQueryConfig(){\n\t\t\tconfigspan.title=\"Click to Hide View Configuration\";\n\t\t\tic.setAttribute(\"class\", \"fas fa fa-times-circle\");\n            if(configspan.nextSibling){\n                self.container.insertBefore(ipdom, configspan.nextSibling);\n                if(self.input.snippet.value)\n\t\t\t\t\tself.input.stylizeSnippet();\n            }\n            else{\n                self.container.appendChild(ipdom);\n                if(self.input.snippet.value)\n\t\t\t\t\tself.input.stylizeSnippet();\n            }\n\t\t}\n\t\tfunction hideQueryConfig(){\n\t\t\tconfigspan.title=\"Click to View Configuration\";\n            ic.setAttribute(\"class\", \"terminus-result-icons terminus-result-view-icon \" + self.getViewConfigIconClass());\n\t\t\tself.container.removeChild(ipdom);\n\t\t}\n\t\tispan.addEventListener(\"click\", () => {\n\t\t\tif(this.showingQuery) hideQueryConfig();\n\t\t\telse showQueryConfig();\n\t\t\tthis.showingQuery = !this.showingQuery;\n        });\n        showQueryConfig();\n\t\tif(this.showConfig == \"icon\") hideQueryConfig();\n    }\n    if(this.changeViewType){\n        cvicons = this.getViewTypeIconDOM(ipdom);\n        if(cvicons) configspan.prepend(cvicons);\n    }\n\treturn this.container;\n}\n\nResultPane.prototype.getViewConfigIconClass = function(){\n    if(this.changeViewType && this.viewers.length > 1){\n        return \"fas fa fa-vial\";\n    }\n    if(this.viewers[this.currentViewer].icon){\n        return this.viewers[this.currentViewer].icon;\n    }\n    var def = this.getDefaultViewerIcon(this.viewers[this.currentViewer]);\n    return def.icon;\n}\n\n\nResultPane.prototype.getViewTypeIconDOM = function(sp, ipdom){\n    var bsp = document.createElement('span');\n    bsp.setAttribute('class', 'terminus-result-icons');\n    if(this.viewers.length > 1){\n        for(var i = 0; i<this.viewers.length; i++){\n            var isp = this.getIconForViewer(this.viewers[i], i, bsp);\n            bsp.appendChild(isp);\n        }\n    }\n    return bsp;\n}\n\nResultPane.prototype.changeViewerType = function(viewer, index){\n    this.currentViewer = index;\n    this.config = viewer;\n    this.input.setQuery(viewer);\n    this.input.submit(this.input.qObj);\n}\n\n\nResultPane.prototype.getDefaultViewerIcon = function(viewer){\n    var view_types = {\n        table: {label: \"Table\", icon: \"fa fa-table\"},\n\t\tgraph: {label: \"Graph\", icon: \"fas fa-code-branch\"},\n\t\tchooser: {label: \"Drop-down List\", icon: \"fas fa-caret-down\"},\n\t\tstream: {label: \"Result Stream\", icon: \"fa fa-list\"}\n    }\n    return view_types[viewer.type];\n}\n\n\nResultPane.prototype.getIconForViewer = function(viewer, index, container){\n    var isp = document.createElement('span');\n    var icon = document.createElement(\"i\");\n    var def = this.getDefaultViewerIcon(viewer);\n    icon.title = (viewer.label) ? viewer.label : def.label;\n    var ic = (viewer.icon ? viewer.icon : def.icon);\n    icon.setAttribute(\"class\", ic);\n    icon.classList.add('terminus-result-view-icon');\n    //icon.classList.add('circle-icon');\n    isp.appendChild(icon);\n    if(this.currentViewer == index){\n        isp.setAttribute(\"class\", \"result-icon-selected selected terminus-result-selected\");\n        icon.classList.add('terminus-view-selected');\n    }\n    else {\n        isp.setAttribute(\"class\", \"result-icon-selectable selectable\");\n        isp.addEventListener('mouseover', function(){\n            this.style.cursor = \"pointer\";\n\t\t});\n    }\n    isp.addEventListener(\"click\", () => {\n        this.changeViewerType(viewer, index);\n        TerminusClient.FrameHelper.removeChildren(container);\n        for(var i = 0; i<this.viewers.length; i++){\n            var isp = this.getIconForViewer(this.viewers[i], i, container);\n            container.appendChild(isp);\n        }\n    });\n    return isp;\n}\n\nResultPane.prototype.createInput = function(mode){\n    let input = new TerminusCodeSnippet(\"rule\", mode);\n    if(this.config){\n    \tinput.setQuery(this.config);\n\t}\n\tvar self = this;\n\tinput.submit = function(config){\n\t\tself.updateView(config);\n\t};\n\treturn input;\n}\n\nResultPane.prototype.setResult = function(wres){\n\tthis.result = wres;\n}\n\nResultPane.prototype.updateResult = function(wres){\n\tthis.result = wres;\n\tTerminusClient.FrameHelper.removeChildren(this.resultDOM);\n\tthis.resultDOM.appendChild(this.getResultDOM());\n}\n\nResultPane.prototype.updateView = function(config){\n\tthis.config = config;\n\tTerminusClient.FrameHelper.removeChildren(this.resultDOM);\n\tif(this.result){\n\t\tthis.resultDOM.appendChild(this.getResultDOM());\n\t}\n}\n\nResultPane.prototype.getResultDOM = function(){\n\tlet span = document.createElement(\"span\");\n\tspan.setAttribute(\"class\", \"terminus-query-results\");\n    let viewer = this.config.create(this.client, this.renderers, Datatypes.initialiseDataRenderers);\n    var self = this;\n    viewer.notify = function(r){\n        self.qp.updateResult(r);\n    }\n\tthis.result.first();\n\tviewer.setResult(this.result);\n\tspan.appendChild(viewer.render());\n\treturn span;\n}\n\nmodule.exports = ResultPane;\n","function GraphResultsViewer(config) {\n\tthis.svg;\n\tthis.visid = randomString(8);\n\tthis.currentDate = Date.now() / 1000; // nowish\n\t// Individual links, nodes and text graphical elements\n\tthis.link_elements;\n\tthis.node_elements;\n\t// DOM object that this this is directly drawn into\n\tthis.container = false;\n\t// Map of ids to loaded nodes for ease\n\tthis.loadedNodes = {};\n\tthis.focusNodes = [];\n\t// Currently displayed nodes and links\n\tthis.nodes;\n\tthis.links;\n\t// Var for selecting and deselecting elements\n\tthis.selected_id;\n\tthis.setConfigOptions(config);\n}\n\n/*\n * Loads the graph with new data and optionally starts the animation\n */\nGraphResultsViewer.prototype.load = function(show) {\n\tthis.initD3(this.d3DOM);\n\tthis.loadNewData();\n\tthis.updateGraph();\n\tif(show){\n\t\tthis.updateSimulation(\"init\");\n\t}\n}\n\n/*\n * Called to issue a new set of datapoints\n */\nGraphResultsViewer.prototype.setData = function(dqr, show){\n\t//this.setFocusNodeFromResult(dqr);\n\tif(this.result){\n\t\tthis.clear();\n\t}\n\tthis.result = dqr;\n\t//if(this.svg){\n\t\tthis.load(show);\n\t//}\n}\n\nGraphResultsViewer.prototype.loadNewData = function(){\n\tthis.nodes = jQuery.extend(true, [], this.result.getNodes());\n\tfor(var i = 0 ; i<this.nodes.length; i++){\n\t\tthis.loadedNodes[this.nodes[i].id] = this.nodes[i];\n\t}\n\tthis.links = this.result.getEdges();\n\t//this.browser.rebuildController();\n}\n\n\n/*\n * Called to indicate that the current set of datapoints has been updated\n */\nGraphResultsViewer.prototype.updateData = function(dqr, show) {\n\tthis.setFocusNodeFromResult(dqr);\n\tthis.result = dqr;\n\tthis.reload(show, \"update\", this.fix_nodes);\n}\n\nGraphResultsViewer.prototype.setFocusNodeFromResult = function(dqr) {\n\tvar fn = dqr.getFocusNode();\n\tif(fn){\n\t\tthis.selected_id = fn;\n\t\tthis.focusNodes.push(fn);\n\t}\n}\n\n/*\n * Called to indicate that the filter setting has been changed on the current datapoints\n */\nGraphResultsViewer.prototype.setFilter = function(dqr, show){\n\tthis.simulation.stop();\n\tthis.reload(show, \"filter\", true);\n}\n\nGraphResultsViewer.prototype.wake = function() {\n\tif(this.simulation)\tthis.updateSimulation(\"wake\");\n}\n\nGraphResultsViewer.prototype.hibernate = function() {\n\tthis.simulation.stop();\n}\n\n/*\n * Called when more data is added to the result but the query remains the same\n */\nGraphResultsViewer.prototype.reload = function(show, mode, no_animate) {\n\tfor(var i = 0 ; i<this.nodes.length; i++){\n\t\tthis.loadedNodes[this.nodes[i].id] = this.nodes[i];\n\t}\n\tvar nnodes = jQuery.extend(true, [], this.result.getNodesAndFringes());\n\tthis.nodes = [];\n\tvar snode = this.loadedNodes[this.selected_id];\n\tfor(var i = 0 ; i<nnodes.length; i++){\n\t\tvar nnode = nnodes[i];\n\t\tif(this.loadedNodes[nnode.id]){\n\t\t\tif(nnode.id == this.selected_id){\n\t\t\t\tthis.loadedNodes[nnode.id].fx = this.loadedNodes[nnode.id].x;\n\t\t\t\tthis.loadedNodes[nnode.id].fy = this.loadedNodes[nnode.id].y;\n\t\t\t}\n\t\t\telse if(!no_animate) {\n\t\t\t\tthis.loadedNodes[nnode.id].fx = null;\n\t\t\t\tthis.loadedNodes[nnode.id].fy = null;\n\t\t\t}\n\t\t\telse if(this.loadedNodes[nnode.id].x){\n\t\t\t\tthis.loadedNodes[nnode.id].fx = this.loadedNodes[nnode.id].x;\n\t\t\t\tthis.loadedNodes[nnode.id].fy = this.loadedNodes[nnode.id].y;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif(this.explode_out && snode.x){\n\t\t\t\tnnode.x = snode.x;\n\t\t\t\tnnode.y = snode.y;\n\t\t\t}\n\t\t\tthis.loadedNodes[nnode.id] = nnode;\n\t\t}\n\t\tthis.nodes.push(this.loadedNodes[nnode.id]);\n\t}\n\tthis.links = this.result.getLinks();\n\tthis.updateGraph();\n\tif(show){\n\t\t//this.browser.rebuildController();\n\t\tthis.updateSimulation(mode);\n\t}\n}\n\nGraphResultsViewer.prototype.clear = function() {\n\tthis.nodes = [];\n\tthis.loadedNodes = {};\n\tthis.links = [];\n\tthis.updateGraph();\n\tjQuery(this.d3DOM).empty();\n\tthis.scale_factor = 1;\n}\n\n/*\n * Called to initialise the DOM when it is first loaded (called after setData)\n */\nGraphResultsViewer.prototype.initDOM = function(vdom) {\n\tif(!this.width) this.width = this.setWidth();\n\tif(!this.height) this.height = this.setHeight();\n\tthis.d3DOM = vdom;\n\tif(this.result){\n\t\tthis.load(true);\n\t}\n}\n\n/*\n * Generate the div that contains the visualisation panel\n */\nGraphResultsViewer.prototype.getAsDOM = function() {\n\tvar vdom = document.createElement(\"div\");\n\tvdom.setAttribute(\"class\", \"terminus-gviz-panel\");\n\tvdom.setAttribute(\"id\", this.visid);\n\tvdom.setAttribute(\"width\", \"100%\");\n\tthis.container = vdom;\n\treturn vdom;\n}\n\n/*\n * Calculates the width of the container area available for the SVG\n */\nGraphResultsViewer.prototype.setWidth = function() {\n\tif(this.container && this.container.clientWidth){\n\t\tthis.width = this.container.clientWidth;\n\t}\n\telse if(this.container.parentNode && this.container.parentNode.clientWidth){\n\t\tthis.width = this.container.parentNode.clientWidth;\n\t}\n\telse {\n\t\tvar w = jQuery(this.container).width();\n\t\tif(w == 0){\n\t\t\tw = jQuery(this.container.parentNode).width();\n\t\t}\n\t\tif(w == 0) {\n\t\t\tw = 800;\n\t\t}\n\t\tthis.width = w;\n\t}\n\treturn this.width;\n}\n\nGraphResultsViewer.prototype.setHeight = function() {\n\tif(this.container && this.container.clientHeight){\n\t\tthis.height = this.container.clientHeight;\n\t}\n\telse if(this.container.parentNode && this.container.parentNode.clientHeight){\n\t\tthis.height = this.container.parentNode.clientHeight;\n\t}\n\telse {\n\t\tvar w = jQuery(this.container).height();\n\t\tif(w == 0){\n\t\t\tw = jQuery(this.container.parentNode).height();\n\t\t}\n\t\tif(w == 0) {\n\t\t\tw = 400;\n\t\t}\n\t\tthis.height = w;\n\t}\n\treturn this.height;\n}\n\n\nGraphResultsViewer.prototype.initD3 = function(jqid) {\n\tvar self = this;\n\n\t/********************* Seed the data **************************/\n\tthis.svg = d3.select(jqid).append(\"svg\")\n\t\t.attr(\"width\", this.width)\n\t\t.attr(\"height\", this.height);\n\n\tvar distanceFun = function(link){\n\t\treturn self.getLinkDistance(link);\n\t}\n\n\t// create the force object\n\tthis.simulation  = d3.forceSimulation()\n\t\t//link distance varies with link type\n\t    .force(\"link\", d3.forceLink().distance(distanceFun).id(function(link) { return link.id; }))\n\t    //charge is the same for all nodes\n\t    .force('charge', d3.forceManyBody().strength(function(node){ return self.getCharge(node)}))\n\t    //collision radius changes with node type\n\t    .force('collision', d3.forceCollide().radius(function(node) {\n\t    \treturn (self.getCollisionRadius(node));\n\t    }))\n\t\t.force(\"center\", d3.forceCenter(this.width / 2, this.height / 2));\n\n\t// node drag\n\tthis.drag_drop = d3.drag()\n\t\t.on('start', function(node) {\n\t\t\tnode.fx = node.x\n\t\t\tnode.fy = node.y\n\t\t})\n\t\t.on('drag', function(node) {\n\t\t\tself.simulation.restart()\n\t\t\tnode.fx = d3.event.x;\n\t\t\tnode.fy = d3.event.y;\n\t\t})\n\t\t.on('end', function(node) {\n\t\t\tnode.fx = null;\n\t\t\tnode.fx = null;\n\t\t\tself.simulation.stop()\n\t\t});\n\n\tthis.svg.append(\"rect\")\n\t   .attr(\"width\", this.width)\n\t   .attr(\"height\", this.height)\n\t   .style(\"fill\", \"none\")\n\t   .style(\"pointer-events\", \"all\")\n\t   .call(d3.zoom().on(\"zoom\", function(){self.zoomed()}));\n\n\t// Append graphic element to svg which are groups for graph elements\n\tthis.link_group = this.svg.append(\"g\").classed(\"links\", true);\n\tthis.node_group = this.svg.append(\"g\").classed(\"nodes\", true);\n}\n\nGraphResultsViewer.prototype.zoomed = function() {\n\tthis.current_transform = d3.event.transform;\n\tif(this.node_elements)\n\t\tthis.node_elements.attr(\"transform\", d3.event.transform);\n    if(this.link_elements)\n    \tthis.link_elements.attr(\"transform\", d3.event.transform);\n}\n\n/***\n * updates the svg with the current nodes and links\n */\nGraphResultsViewer.prototype.updateGraph = function(nodes, links) {\n\tvar self = this;\n\n\tvar follow_node_wrapper = function(graph_node){\n\t\tself.nodeSelected(graph_node);\n\t}\n\tvar zoomed = function(){\n\t\tself.zoomed();\n\t}\n\n\tnodes = (typeof nodes != \"undefined\" ? nodes : this.nodes);\n\tlinks = (typeof links != \"undefined\" ? links : this.links);\n\tthis.node_elements  = this.node_group.selectAll(\"g\").data(nodes);\n\tthis.node_elements.exit().remove();\n\n\t/*Create and place the \"blocks\" containing the circle and the text */\n    var node_enter = this.node_elements.enter().append(\"g\");\n\n\t// enter and create new ones\n\tnode_enter.append(\"circle\")\n\t\t.style('opacity', 0.99)\n\t\t.attr('r', function(node){return self.getRadius(node)})\n\t\t.attr(\"cx\",  function(node){ return node.x})\n\t\t.attr(\"cy\",  function(node){ return node.y})\n\t\t.attr(\"type\", function(node) {return self.isFringe(node) ? \"fringe\" : \"node\"})\n\t\t.call(self.drag_drop)\n\t\t.on(\"mouseover\", function(d){ d3.select(this).style(\"cursor\", \"pointer\"); })\n\t\t.on(\"mouseout\", function(d){ d3.select(this).style(\"cursor\", \"default\"); })\n\t\t.on('click', follow_node_wrapper);\n\n    node_enter.append(\"text\")\n\t\t.attr(\"x\",  function(node){ return node.x})\n\t\t.attr(\"y\",  function(node){ return node.y})\n\t\t.text(function(node) { return self.getNodeIconUnicode(node)})\n\t\t.call(self.drag_drop)\n\t\t.on(\"mouseover\", function(d){ d3.select(this).style(\"cursor\", \"pointer\"); })\n\t\t.on(\"mouseout\", function(d){ d3.select(this).style(\"cursor\", \"default\"); })\n\t\t.on('click', follow_node_wrapper);\n\n\t// merge new and old nodes\n\tthis.node_elements = node_enter.merge(this.node_elements);\n\n\tthis.styleNodeElements();\n\n\t// update LINKS ********************************************\n\tthis.link_elements  = this.link_group.selectAll(\"line\").data(links);\n\n\t// remove old links\n\tthis.link_elements.exit().remove();\n\t// enter and create new ones\n\tvar link_enter = this.link_elements.enter().append(\"line\");\n\n\t// merge new and old links\n\tthis.link_elements = link_enter.merge(this.link_elements)\n\n\tthis.styleLinkElements();\n\n\t//execute the current state of the pan-zoom transform\n\tif(this.current_transform){\n\t\tif(this.node_elements)\n\t\t\tthis.node_elements.attr(\"transform\", this.current_transform);\n\t    if(this.link_elements)\n\t    \tthis.link_elements.attr(\"transform\", this.current_transform);\n\t}\n}\n\nGraphResultsViewer.prototype.updateSimulation = function(mode) {\n\tvar self = this;\n\t//move all of the graphical elements corresponding to the nodes with each tick\n\tvar ticker = function(){\n\t\tself.node_elements.selectAll(\"circle\")\n\t\t\t.attr(\"cx\",  function(node){ return node.x})\n\t\t\t.attr(\"cy\",  function(node){ return node.y});\n\t\tself.node_elements.selectAll(\"text\")\n\t\t\t.attr(\"x\",  function(node){ return node.x})\n\t\t\t.attr(\"y\",  function(node){ return node.y});\n\t\tself.link_elements\n\t\t\t.attr('x1', function(link){ return link.source.x})\n\t\t\t.attr('y1', function(link){ return link.source.y})\n\t\t\t.attr('x2', function(link){ return link.target.x})\n\t\t\t.attr('y2', function(link){ return link.target.y});\n\t}\n\tif(this.show_force){\n\t\tthis.simulation.nodes(this.nodes).on('tick', ticker).force('link').links(this.links);\n\t}\n\telse {\n\t\tthis.simulation.nodes(this.nodes).on('end', ticker).force('link').links(this.links);\n\t}\n\tif(this.nodes.length){\n\t\tif(mode == \"wake\" || mode == \"init\"){\n\t\t\tthis.simulation.restart();\n\t\t}\n\t\telse if(mode == \"filter\"){\n\t\t\tthis.simulation.restart();\n\t\t}\n\t\telse {\n\t\t\tthis.simulation.alpha(1).restart();\n\t\t}\n\t}\n}\n\nGraphResultsViewer.prototype.styleNodeElements = function() {\n\tvar self = this;\n\tif(this.node_elements){\n\t\tthis.node_elements.each(function(node){\n\t\t\tvar g = d3.select(this);\n\t\t\tvar sel = g.select(\"circle\");\n\t\t\tsel.select(\"title\").remove();\n\t\t\tsel.style(\"fill\", self.getNodeColour(node));\n\t\t\tsel.attr('r', self.getRadius(node));\n\t\t\tsel.classed(\"highlighted\", function(node) { return self.focusNodes.indexOf(node.id) != -1});\n\t\t\tsel.append(\"title\")\n\t\t\t\t.classed(\"terminus-gnode-title\", true)\n\t\t\t\t.text(self.getNodeText(node));\n\t\t\tvar txt = g.select(\"text\");\n\t\t\ttxt.select(\"title\").remove();\n\t\t\ttxt.attr('text-anchor', 'middle')\n\t\t\t\t.attr(\"title\", self.getNodeText(node))\n\t\t\t\t.attr('dominant-baseline', 'central')\n\t\t\t\t.style('font-family', \"'\" + self.fontfam + \"'\")\n\t\t\t\t.style('font-weight', self.getNodeIconWeight(node))\n\t\t\t\t.style('font-size', self.getNodeIconSize(node))\n\t\t\t\t.style(\"fill\", self.getNodeIconColour(node))\n\t\t\t\t.text(self.getNodeIconUnicode(node))\n\t\t\t\t.append(\"title\")\n\t\t\t\t\t.classed(\"terminus-gnode-title\", true)\n\t\t\t\t\t.text(self.getNodeText(node));\n\t\t});\n\t}\n}\n\nGraphResultsViewer.prototype.styleLinkElements = function() {\n\tvar self = this;\n\tif(this.link_elements){\n\t\tthis.link_elements.each(function(link){\n\t\t\tvar sel = d3.select(this);\n\t\t\tsel.select(\"title\").remove();\n\t\t\tsel.attr(\"stroke-width\", self.getLineWidth(link));\n\t\t\tsel.attr(\"marker-end\", self.getEdgeArrow(link));\n\t\t\tsel.style(\"stroke\", self.getEdgeColour(link));\n\t\t\tsel.append(\"title\")\n\t\t\t\t.classed(\"terminus-glink-title\", true)\n\t\t\t\t.text(self.getLinkText(link));\n\t\t});\n\t}\n}\n\nGraphResultsViewer.prototype.getEdgeArrow = function(edge) {\n\tif(edge){\n\t\tvar dir = this.getEdgeDirection(edge);\n\t\t//if(dir){\n\t\t\tvar col = this.getEdgeColour(edge);\n\t\t\tvar reference;\n\t\t\tthis.svg.append(\"svg:defs\").selectAll(\"marker\")\n\t\t\t\t.data([reference])\n\t\t\t\t.enter().append(\"svg:marker\")\n\t\t\t\t.attr(\"id\", String)\n\t\t\t\t.attr(\"viewBox\", \"0 -5 10 10\")\n\t\t\t\t.attr(\"refX\", 22)  // This sets how far back it sits, kinda\n\t\t\t\t.attr(\"refY\", 0)\n\t\t\t\t.attr(\"markerWidth\", this.getArrowWidth(edge))\n\t\t\t\t.attr(\"markerHeight\", this.getArrowHeight(edge))\n\t\t\t\t.attr(\"orient\", \"auto\")\n\t\t\t\t.attr(\"markerUnits\", \"userSpaceOnUse\")\n\t\t\t\t.append(\"svg:path\")\n\t\t\t\t\t.attr(\"d\", dir)\n\t\t\t\t\t.style(\"fill\", col);\n\t\t\t\treturn \"url(#\" + reference + \")\";\n\t\t//}\n\t}\n\treturn \"\";\n}\n\n\nGraphResultsViewer.prototype.nodeSelected = function(selected_node) {\n\tvar self = this;\n\tif(this.selected_id == selected_node.id && this.selection_grows){\n\t\tthis.selection_grows = false;\n\t\tthis.styleNodeElements();\n\t}\n\telse {\n\t\tthis.selection_grows = true;\n\t\tthis.selected_id = selected_node.id;\n\t\tthis.styleNodeElements();\n\t\t//this.browser.nodeSelected(selected_node);\n\t\tif(this.isFringe(selected_node)){\n\t\t\t//this.browser.followNode(selected_node);\n\t\t}\n\t}\n}\n\nGraphResultsViewer.prototype.getScaleTransform = function(x, y, scale_factor){\n\treturn \"scale(\"+ scale_factor + \") translate(\" + x + \",\" + y + \")\";\n}\n\nGraphResultsViewer.prototype.scale = function(min_ratio) {\n    // the new dimensions of the molecule\n    new_mol_width = this.width * min_ratio;\n    new_mol_height = this.height * min_ratio;\n\n    var y_trans = (this.height - new_mol_height) ;\n\n    var x_trans = (this.width - new_mol_width);\n    // do the actual moving\n    var self = this;\n    if(this.node_elements)\n    \tthis.node_elements.transition()\n        .duration(750).attr(\"transform\", function(node){ return self.getScaleTransform(x_trans, y_trans, min_ratio)});\n    if(this.link_elements)\n        this.link_elements.transition()\n        .duration(750).attr(\"transform\", function(node){ return self.getScaleTransform(x_trans, y_trans, min_ratio)});\n\tthis.scale_factor = min_ratio;\n\tthis.svg.selectAll(\"marker\").attr(\"markerWidth\", this.getArrowWidth())\n\t\t\t.attr(\"markerHeight\", this.getArrowHeight());\n}\n\n\nGraphResultsViewer.prototype.scaleToFit = function() {\n    // Center the view on the molecule(s) and scale it so that everything\n    // fits in the window\n    //no molecules, nothing to do\n    if (this.nodes.length === 0)\n        return;\n\n    // Get the bounding box\n    min_x = d3.min(this.nodes.map(function(d) {return d.x;}));\n    min_y = d3.min(this.nodes.map(function(d) {return d.y;}));\n    max_x = d3.max(this.nodes.map(function(d) {return d.x;}));\n    max_y = d3.max(this.nodes.map(function(d) {return d.y;}));\n\n    // The width and the height of the graph\n    mol_width = max_x - min_x;\n    mol_height = max_y - min_y;\n\n    mol_width = mol_width * 1.05;\n    mol_height = mol_height * 1.05;\n    // how much larger the drawing area is than the width and the height\n    width_ratio = this.width / mol_width;\n    height_ratio = this.height / mol_height;\n\n    // we need to fit it in both directions, so we scale according to\n    // the direction in which we need to scale the most\n    min_ratio = Math.min(width_ratio, height_ratio);\n    if(min_ratio < 1){\n    \tthis.scale(min_ratio);\n    }\n};\n\n// recentre graph\nGraphResultsViewer.prototype.recentre = function(graph_node) {\n\tthis.translated = true;\n\t// get the x and y you need to transform the nodes by\n\tthis.dcx = (this.width/2-graph_node.x);\n\tthis.dcy = (this.height/2-graph_node.y);\n\t//zoom.translate([dcx,dcy]); If we do zooming we'll need to do something here\n\tthis.node_elements.attr(\"transform\", \"translate(\"+ this.dcx + \",\" + this.dcy  + \")\");\n\tthis.link_elements.attr(\"transform\", \"translate(\"+ this.dcx + \",\" + this.dcy  + \")\");\n\tthis.text_elements.attr(\"transform\", \"translate(\"+ this.dcx + \",\" + this.dcy  + \")\");\n}\n\n\nGraphResultsViewer.prototype.setConfigOptions = function(config) {\n\t//configuration options for different types of behaviour\n\t// Need to explicitly know font family name for unicode glyphs\n\tthis.fontfam = (config && (config.fontfamily()) ? config.fontfamily() : 'Font Awesome 5 Free');\n\tthis.selected_grows = (config && typeof config.selected_grows() != \"undefined\" ? config.selected_grows() : true);\n\tthis.show_force = (config && typeof config.show_force() != \"undefined\" ? config.show_force() : true);\n\tthis.fix_nodes = (config && typeof config.fix_nodes() != \"undefined\" ? config.fix_nodes() : false);\n\tthis.explode_out = (config && typeof config.explode_out() != \"undefined\" ? config.explode_out(): false);\n\tthis.width = (config && config.width() ? config.width(): false);\n\tthis.height = (config && config.height() ? config.height(): false);\n\tthis.defaults = {\n\t\tedge: {\n\t\t\ttype: \"edge\",\n\t\t\tdistance: (config && config.edge && config.edge.distance ? config.edge.distance : 70),\n\t\t\tarrow: (config && config.edge && config.edge.arrow ? config.edge.arrow : { width: 36, height: 16}),\n\t\t\tsymmetric: (config && config.edge && config.edge.symmetric ? config.edge.symmetric : true),\n\t\t\tcolor: (config && config.edge && config.edge.color ? config.edge.color : [150,150,255]),\n\t\t\tweight: (config && config.edge && config.edge.weight ? config.edge.weight : 0.3),\n\t\t\tsize: (config && config.edge && config.edge.size ? config.edge.size : 4)\n\t\t},\n\t\tnode: {\n\t\t\ttype: \"node\",\n\t\t\tradius: (config && config.node && config.node.radius ? config.node.radius : 14),\n\t\t\tcharge: (config && config.node && config.node.charge ? config.node.charge : -60),\n\t\t\tcollisionRadius: (config && config.node && config.node.collisionRadius ? config.node.collisionRadius : 20),\n\t\t\tcolor: (config && config.node && config.node.color ? config.node.color : [0,255,255]),\n\t\t\ticon: {\n\t\t\t\tweight: (config && config.node && config.node.icon && config.node.icon.weight ? config.node.icon.weight : 900),\n\t\t\t\tcolor: (config && config.node && config.node.icon && config.node.icon.color ? config.node.icon.color : [0,0,255]),\n\t\t\t\tunicode: (config && config.node && config.node.icon && config.node.icon.unicode ? config.node.icon.unicode : \"\\uf4fb\"),\n\t\t\t\tsize: (config && config.node && config.node.icon && config.node.icon.size ? config.node.icon.size : 10),\n\t\t\t\tfaclass: (config && config.node && config.node.icon && config.node.icon.faclass ? config.node.icon.faclass : \"fas fa-user-astronaut\")\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\tcolor: (config && config.node && config.node.text && config.node.text.color ? config.node.text.color : [0,0,0]),\n\t\t\t\tsize: (config && config.node && config.node.icon && config.node.text.size ? config.node.text.size : 10)\n\t\t\t},\n\t\t\tborder: {\n\t\t\t\tcolor: (config && config.node && config.node.border && config.node.border.color ? config.node.border.color : [0,0,0]),\n\t\t\t\tsize: (config && config.node && config.node.border && config.node.border.size ? config.node.border.size : 10)\n\t\t\t}\n\t\t}\n\t}\n}\n\n/*\n * Dimensions / forces / etc all settable with a scale factor - for zooming\n */\nGraphResultsViewer.prototype.getMultiplier = function(node) {\n\tvar mult = (node && node.size ? node.size : 1);\n\tif(node.id == this.selected_id && this.selection_grows){\n\t\tmult = mult * 2;\n\t}\n\treturn mult;\n}\n\nGraphResultsViewer.prototype.getRadius = function(node) {\n\tvar radius = (node && node.radius ? node.radius : this.defaults.node.radius);\n\tvar r = (this.scale_factor ? Math.min(this.scale_factor * radius, radius) : radius);\n\tr = r * this.getMultiplier(node);\n\treturn r;\n}\n\nGraphResultsViewer.prototype.getCollisionRadius = function(node) {\n\tvar colrad = (node && node.collisionRadius ? node.collisionRadius : this.defaults.node.collisionRadius );\n\tvar v = (this.scale_factor ? Math.min(this.scale_factor * colrad, colrad) : colrad);\n\treturn v * this.getMultiplier(node);\n}\n\nGraphResultsViewer.prototype.getCharge = function(node) {\n\tvar charge = (node && node.charge ? node.charge : this.defaults.node.charge);\n\tif(charge < 0){\n\t\tvar v = (this.scale_factor ? Math.max(this.scale_factor * charge, charge) : charge);\n\t}\n\telse {\n\t\tvar v = (this.scale_factor ? Math.min(this.scale_factor * charge, charge) : charge);\n\t}\n\treturn v * this.getMultiplier(node);\n}\n\nGraphResultsViewer.prototype.getLinkDistance = function(link) {\n\tvar linkDistance = (link && link.distance ? link.distance : this.defaults.edge.distance);\n\tvar x = (this.scale_factor ? Math.min(this.scale_factor * linkDistance, linkDistance) : linkDistance);\n\treturn x;\n}\n\nGraphResultsViewer.prototype.getNodeIconSize = function(node) {\n\tif(node && node.icon && node.icon.size){\n\t\treturn node.icon.size + \"em\";\n\t}\n\treturn (this.getMultiplier(node) + \"em\");\n}\n\nGraphResultsViewer.prototype.getNodeColour = function(node) {\n\tvar col = (node && node.color ? node.color : this.defaults.node.color);\n\tif(this.isFringe(node)){\n\t\treturn \"rgba(\"+col.join(\",\")+\",0.25)\";\n\t}\n\telse {\n\t\treturn \"rgb(\"+col.join(\",\")+\")\";\n\t}\n}\n\nGraphResultsViewer.prototype.getNodeIcon = function(node) {\n\tvar fac = (node && node.icon && node.icon.faclass ? node.icon.faclass : this.defaults.node.icon.faclass);\n\treturn fac;\n}\n\nGraphResultsViewer.prototype.getNodeIconUnicode= function(node) {\n\treturn (node && node.icon && node.icon.unicode ? node.icon.unicode : this.defaults.node.icon.unicode);\n}\n\nGraphResultsViewer.prototype.getNodeIconWeight = function(node) {\n\treturn (node && node.icon && node.icon.weight ? node.icon.weight : this.defaults.node.icon.weight );\n}\n\nGraphResultsViewer.prototype.getNodeIconColour = function(node) {\n\tvar col = (node && node.icon && node.icon.color ? node.icon.color : this.defaults.node.icon.color );\n\tif(this.isFringe(node)){\n\t\treturn \"rgba(\"+col.join(\",\")+\",0.25)\";\n\t}\n\telse {\n\t\treturn \"rgb(\"+col.join(\",\")+\")\";\n\t}\n}\n\nGraphResultsViewer.prototype.getEdgeColour = function(edge) {\n\tvar col = (edge && edge.color ? edge.color : this.defaults.edge.color );\n\tvar weight = (edge && edge.weight ? edge.weight : this.defaults.edge.weight);\n\tvar nc = col.concat([weight]);\n\treturn \"rgba(\"+nc.join(\",\")+\")\";\n}\n\nGraphResultsViewer.prototype.getEdgeDirection = function(edge) {\n\tif(edge && edge.symmetric){\n\t\treturn \"M10,-5 L0,0 L10,5\";\n\t}\n\treturn \"M0,-5 L10,0 L0,5\";\n\treturn false;\n}\n\nGraphResultsViewer.prototype.getLineWidth = function(link) {\n\tvar x = (link && link.size ? link.size : this.defaults.edge.size);\n\treturn x;\n}\n\n\nGraphResultsViewer.prototype.getNodeText = function(node) {\n\tif(node && node.text) return node.text;\n\treturn node.id;\n}\n\nGraphResultsViewer.prototype.getLinkText = function(edge) {\n\tif(edge && edge.text) return edge.text;\n\tif(edge && edge.id) return edge.id;\n\treturn \"\";\n}\n\nGraphResultsViewer.prototype.getArrowWidth = function(edge) {\n\tvar w = (edge && edge.arrow && edge.arrow.width ? edge.arrow.width : this.defaults.edge.arrow.width);\n\treturn (this.scale_factor ? Math.min(this.scale_factor * w, w) : w);\n}\n\nGraphResultsViewer.prototype.getArrowHeight = function(edge) {\n\tvar w = (edge && edge.arrow && edge.arrow.height ? edge.arrow.height : this.defaults.edge.arrow.height );\n\treturn (this.scale_factor ? Math.min(this.scale_factor * w, w) : w);\n}\n\nGraphResultsViewer.prototype.isNeighbourLink = function(node, link) {\n\treturn link.target.id === node.id || link.source.id === node.id;\n}\n\nGraphResultsViewer.prototype.isFringe = function(node){\n\tif(this.result && this.result.added && this.result.added.upgraded){\n\t\tif(this.result.added.upgraded.indexOf(node.id) != -1){\n\t\t\tnode.type = \"node\";\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn node.type && node.type == \"fringe\";\n}\n\nfunction randomString(length) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz'.split('');\n    if (! length) {\n        length = Math.floor(Math.random() * chars.length);\n    }\n    var str = '';\n    for (var i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\n\nmodule.exports = GraphResultsViewer;\n","function TerminusViolations(vios, ui){\n\tthis.ui = ui;\n\tthis.vios = [];\n\tvar nvios = [];\n\tfor(var i = 0; i<vios.length; i++){\n\t\tfor(var j = 0; j<nvios.length; j++){\n\t\t\tif(JSON.stringify(vios[i]) == JSON.stringify(nvios[j])) continue;\n\t\t}\n\t\tnvios.push(vios[i]);\n\t}\n\tfor(var i = 0; i<nvios.length; i++){\n\t\tthis.vios.push(new TerminusViolation(nvios[i], this.ui));\n\t}\n}\n\nTerminusViolations.prototype.getAsDOM = function(context_msg){\n\tvar vdom = document.createElement(\"div\");\n\tvdom.setAttribute(\"class\", \"terminus-violations terminus-show-msg-vio\");\n\tvar vioHeading = document.createElement(\"div\");\n\tvioHeading.setAttribute('class', 'terminus-violations-heading');\n\tvdom.appendChild(vioHeading);\n\tvar msg = this.vios.length + (this.vios.length > 1 ? \" Violations Detected\" : \" Violation Detected\");\n\tif(context_msg) msg += \" \" + context_msg;\n\tvioHeading.appendChild(document.createTextNode(msg));\n\tfor(var i = 0; i<this.vios.length; i++){\n\t\tvdom.appendChild(this.vios[i].getAsDOM());\n\t}\n\treturn vdom;\n}\n\n/*\n * Class for displaying violation reports as HTML\n */\nfunction TerminusViolation(vio, ui){\n\tthis.ui = ui;\n\tthis.vio = vio;\n}\n\nTerminusViolation.prototype.getAsDOM = function(){\n\tvar vdom = document.createElement(\"div\");\n\tvdom.setAttribute(\"class\", \"terminus-violation\");\n\tif(this.vio['@type']){\n\t\tvar msg = this.vio['vio:message'] || {\"@value\": \"\"};\n\t\tvdom.appendChild(this.getPropertyAsDOM(this.vio[\"@type\"], msg));\n\t}\n\tfor(var prop in this.vio){\n\t\tif(prop != \"vio:message\" && prop != \"@type\"){\n\t\t\tvdom.appendChild(this.getPropertyAsDOM(prop, this.vio[prop]));\n\t\t}\n\t}\n\treturn vdom;\n}\n\nTerminusViolation.prototype.getPropertyAsDOM = function(prop, val){\n\tvar pdom = document.createElement(\"div\");\n\tpdom.setAttribute(\"class\", \"terminus-violation-property\");\n\tvar ldom = document.createElement(\"span\");\n\tldom.setAttribute(\"class\", \"terminus-label terminus-violation-property-label\");\n\tldom.appendChild(document.createTextNode(prop));\n\tvar vdom = document.createElement(\"span\");\n\tvdom.setAttribute(\"class\", \"terminus-violation-property-value\");\n\tvdom.appendChild(document.createTextNode(val[\"@value\"]));\n\tpdom.appendChild(ldom);\n\tpdom.appendChild(vdom);\n\treturn pdom;\n}\n\nmodule.exports=TerminusViolations\n","//const TerminusHTMLViewer = require('./html/TerminusHTMLViewer');\nconst TerminusClient = require('@terminusdb/terminus-client');\nconst QueryPane = require(\"./html/QueryPane\");\nconst ScriptPane = require(\"./html/ScriptPane\");\nconst DocumentPane = require(\"./html/DocumentPane\");\n\nfunction TerminusQueryViewer(ui, options){\n\tthis.ui = ui;\n\tthis.options = options;\n\tthis.panes = [];\n\tthis.new_pane = false;\n\tthis.new_pane_type = false;\n\tthis.meta = {};\n\tthis.container = document.createElement(\"div\");\n\tthis.container.setAttribute(\"class\", \"terminus-query-page\");   \n}\n\nTerminusQueryViewer.prototype.newPaneOptions = function(){ \n\tvar opts = {\n\t\tshowQuery: true, \n\t\teditQuery: true,\n\t\tshowHeader: true, \n\t};\n\treturn opts;\n} \n\nTerminusQueryViewer.prototype.defaultResultOptions = function(){ \n\tvar opts = {\n\t\tshowConfig: \"icon\", \n\t\teditConfig: true,\n\t\tshowHeader: false, \n\t\tviewers: [new TerminusClient.WOQL.graph()],\n\t};\n\treturn opts;\n} \n\nTerminusQueryViewer.prototype.getNewQueryPane = function(){\n\tlet qpane = new QueryPane(this.ui.client).options(this.newPaneOptions());\n\tqpane.addView(new TerminusClient.WOQL.table(), this.defaultResultOptions());\n\treturn qpane;\n}\n\n\nTerminusQueryViewer.prototype.addQueryPane = function(){\n\tvar qpane = this.getNewQueryPane();\n\tthis.panes.push(qpane);\n\treturn qpane;\n}\n\nTerminusQueryViewer.prototype.addScriptPane = function(q){\n\tlet qpane = new ScriptPane(this.ui.client, q);\n\tthis.panes.push(qpane);\n\treturn qpane;\n}\n\nTerminusQueryViewer.prototype.addScriptPaneDOM = function(){\n\tlet qpane = new ScriptPane(this.ui.client);\n\tthis.addNewPaneDOM(qpane);\n}\n\nTerminusQueryViewer.prototype.addQueryPaneDOM = function(){\n\tlet qpane = new QueryPane(this.ui.client).options({showQuery: true, editQuery: true});\n\tthis.addNewPaneDOM(qpane);\n}\n\nTerminusQueryViewer.prototype.setNewDocumentPaneDOM = function(){\n\tthis.new_pane = new DocumentPane(this.ui.client).options({showQuery: true, editQuery: true});\n\tthis.new_pane_type = \"document\";\n}\n\nTerminusQueryViewer.prototype.addDocumentPaneDOM = function(){\n\tlet qpane = new DocumentPane(this.ui.client).options({showQuery: true, editQuery: true});\n\tthis.addNewPaneDOM(qpane);\n}\n\nTerminusQueryViewer.prototype.addNewPaneDOM = function(qpane){\n\tvar lpane = this.panes[this.panes.length-1];\n\t//if(lpane && lpane.empty()){\n\t//\tthis.panes[this.panes.length-1] = qpane;\n\t//\tthis.paneDOM.removeChild(this.paneDOM.lastChild)\t\t \n\t//}\n\t//else {\n\t\tthis.panes.push(qpane);\n\t//}\n\tvar qdom = qpane.getAsDOM();\n\tvar qhdr = this.getPaneHeader();\n\tqdom.prepend(qhdr);\n\tthis.paneDOM.appendChild(qdom);\n}\n\nTerminusQueryViewer.prototype.getAsDOM = function(q){\n\tTerminusClient.FrameHelper.removeChildren(this.container);\n\tif(!this.paneDOM) this.paneDOM = this.getPanesDOM();\n\tthis.container.appendChild(this.paneDOM);\n\tthis.controlDOM = this.getControlsDOM();\n\t//this.container.appendChild(this.controlDOM);\n\tvar newPaneButton = document.createElement('button');\n\t\tnewPaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tnewPaneButton.appendChild(document.createTextNode('Add New Query'));\n\t\tnewPaneButton.addEventListener('click', () => this.addQueryPaneDOM());\t    \n\tthis.container.appendChild(newPaneButton);\n\treturn this.container;\n}\n\nTerminusQueryViewer.prototype.getPanesDOM = function(q){\n\tthis.panesDOM = document.createElement(\"div\");\n\tthis.panesDOM.setAttribute(\"class\", \"terminus-query-panes\");\n\tfor(var i = 0; i<this.panes.length; i++){\n\t\tvar pd = this.panes[i].getAsDOM();\n\t\tvar qhdr = this.getPaneHeader();\n\t\tpd.prepend(qhdr);\n\t\tthis.panesDOM.appendChild(pd);\n\t}\n\tif(!this.new_pane){\n\t\tthis.new_pane = this.getNewQueryPane();\n\t}\n\tvar npd = this.new_pane.getAsDOM();\n\tvar nqhdr = this.getNewPaneHeader();\n\tthis.new_pane.headerDOM = nqhdr;\n\tthis.new_pane.paneDOM = npd;\n\tnpd.prepend(nqhdr);\n\tthis.panesDOM.appendChild(npd);\n\treturn this.panesDOM;\n}\n\nTerminusQueryViewer.prototype.removePane = function(pane, index){\n\tTerminusClient.FrameHelper.removeChildren(pane.paneDOM);\n\tpane.paneDOM.appendChild(pane.headerDOM);\n\tif(this.panes[i]){\n\t\tthis.panes.splice(i, 1);\n\t}\n}\n\nTerminusQueryViewer.prototype.showPane = function(pane){\n\t//TerminusClient.FrameHelper.removeChildren(pane.paneDOM);\n\t//var pd = pane.getAsDOM();\n\t//var qhdr = this.getPaneHeader();\n\t//pd.prepend(qhdr);\n\t//pane.headerDOM = qhdr;\t\n}\n\nTerminusQueryViewer.prototype.hidePane = function(pane){\n\t\n}\n\n\n\nTerminusQueryViewer.prototype.getPaneHeader = function(){\n\tvar hdr = document.createElement(\"div\");\n\t//hdr.appendChild(this.getControlsDOM());\n\treturn hdr;\n}\n\nTerminusQueryViewer.prototype.getNewPaneHeader = function(){\n\tvar hdr = document.createElement(\"div\");\n\t//hdr.appendChild(this.getControlsDOM(\"new\"));\n\treturn hdr;\n}\n\nTerminusQueryViewer.prototype.getControlsDOM = function(isnew){\n\tvar c = document.createElement(\"div\");\n\tc.setAttribute(\"class\", \"terminus-query-page-controls\");    \n\tif(isnew == \"new\"){\n\t\tvar newPaneButton = document.createElement('button');\n\t\tnewPaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tnewPaneButton.appendChild(document.createTextNode('WOQL Query'));\n\t\t//newPaneButton.addEventListener('click', () => this.addQueryPaneDOM());\t    \n\t\tc.appendChild(newPaneButton);\n\t\tvar newScriptButton = document.createElement('button');\n\t\tnewScriptButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tnewScriptButton.appendChild(document.createTextNode('Script'));\n\t\t//newScriptButton.addEventListener('click', () => this.addScriptPaneDOM());\t    \n\t\tc.appendChild(newScriptButton);\n\t\tvar newDocButton = document.createElement('button');\n\t\tnewDocButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tnewDocButton.appendChild(document.createTextNode('Document Query'));\n\t\tnewDocButton.addEventListener('click', () => this.setNewDocumentPaneDOM());\t    \n\t\tc.appendChild(newDocButton);\n\t}\n\telse {\n\t\tvar savePaneButton = document.createElement('button');\n\t\tsavePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tsavePaneButton.appendChild(document.createTextNode('Save'));\n\t\tc.appendChild(savePaneButton);\n\t\tvar closePaneButton = document.createElement('button');\n\t\tclosePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tclosePaneButton.appendChild(document.createTextNode('Close'));\n\t\tc.appendChild(closePaneButton);\n\t\tvar collapsePaneButton = document.createElement('button');\n\t\tcollapsePaneButton.setAttribute('class', 'terminus-btn terminus-query-btn');\n\t\tcollapsePaneButton.appendChild(document.createTextNode('Collapse'));\t\t\n\t\tc.appendChild(collapsePaneButton);\n\t}\n\treturn c;\n}\n\n\nmodule.exports=TerminusQueryViewer\n","const TerminusClient = require('@terminusdb/terminus-client');\nconst TerminusCodeSnippet = require('./query/TerminusCodeSnippet');\nconst UTILS = require('../Utils');\n\nfunction ScriptPane(client, script){\n\tthis.client = client;\n\tthis.script = (script ? script : \"\");\n\tthis.container = document.createElement('div');\n    this.container.setAttribute('class', 'terminus-script-pane-cont');\n}\n\nScriptPane.prototype.empty = function(){\n\treturn this.script == \"\";\n}\n\n\nScriptPane.prototype.createInput = function(ui){\n\tlet input = new TerminusCodeSnippet(\"code\", \"edit\");\n\tif(this.script){\n\t\tinput.setQuery(this.script);\n\t}\n\tvar self = this;\n\tinput.submit = function(qObj){\n\t\tself.executeScript(qObj, ui);\n\t};\n\treturn input;\n}\n\n\nScriptPane.prototype.executeScript = function(script, ui){\n    if(ui) ui.clearMessages();\n    this.script = script;\n\tvar client = this.client;\n\tvar WOQL = TerminusClient.WOQL;\n\ttry {\n\t\tvar res = eval(script);\n\t\tif(res){\n\t\t\tthis.updateResult(res);\n\t\t}\n\t\telse {\n\t\t\t//executed ok message \n\t\t}\n\t}\n\tcatch(e){\n\t\tif(ui) ui.showError(e);\n\t\tconsole.error(e);\n\t}\n}\n\nScriptPane.prototype.showOKMessage = function(){\n    var msg = document.createTextNode(\"Script executed ok\");\n    this.updateResult(msg);\n}\n\nScriptPane.prototype.updateResult = function(res){\n    TerminusClient.FrameHelper.removeChildren(this.resultDOM);\n    this.resultDOM.appendChild(res);\n}\n\n\nScriptPane.prototype.getAsDOM = function(ui){\n\tthis.container.appendChild(UTILS.getHeaderDom('Enter Script'));\n\tthis.input = this.createInput(ui);\n\tthis.container.appendChild(this.input.getAsDOM());\n\tthis.resultDOM = document.createElement(\"div\");\n\tthis.resultDOM.setAttribute(\"class\", \"terminus-script-results\"); \n\t//var form = (this.input.format == \"js\" ? \"javascript\" : \"json\");\n\t//UTILS.stylizeEditor(ui, this.input.snippet, {width: this.input.width, height: this.input.height}, form);\n\tif(this.result){\n        this.resultDOM.appendChild(this.result);\n    }\n\tthis.container.appendChild(this.resultDOM);\n\treturn this.container;\n}\n\n\nmodule.exports = ScriptPane;\n","/*\n * Draws the screen for viewing and updating the schema\n * and provides wrappers around the client's schema API\n */\nconst TerminusHTMLViewer = require('./html/TerminusHTMLViewer');\nconst UTILS=require('./Utils')\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction TerminusSchemaViewer(ui){\n\tthis.ui = ui;\n\tthis.mode = \"view\";\n\tthis.format = \"turtle\";\n\tthis.confirm_before_update = false;\n\tthis.thv = new TerminusHTMLViewer(this.ui.client);\n\tlet WOQL = TerminusClient.WOQL;\n\tthis.woql = WOQL;\n}\n\nTerminusSchemaViewer.prototype.changeHeaders = function() {\n\tvar table = this.woql.table();\n\ttable.column('Comment').header('Description');\n\treturn table;\n}\n\nTerminusSchemaViewer.prototype.setGraphSize = function(){\n\tvar graph = this.woql.graph();\n\tgraph.source(\"v:Subject\");\n\tvar licon2 = { color: [255,255,25], weight: 100, unicode: \"\\uf2bb\", size:2 };\n\tgraph.edge(\"v:Subject\", \"v:Object\").icon(licon2);\n\tgraph.width(1223);\n\treturn graph;\n}\n\nTerminusSchemaViewer.prototype.getOWLView = function(){\n\tthis.mode = 'view'; // reset mode\n\tthis.loadSchema();\n}\n\nTerminusSchemaViewer.prototype.appendRuleViews = function(){\n\tthis.view.appendChild(UTILS.getHeaderDom('Classes'));\n\tthis.appendClassViews(this.woql.table());\n\tthis.appendClassViews(this.woql.graph());\n\tthis.view.appendChild(UTILS.getHeaderDom('Properties'));\n\tthis.appendPropertyViews(this.woql.table());\n\tthis.appendPropertyViews(this.woql.graph());\n}\n\nTerminusSchemaViewer.prototype.appendPropertyViews = function(config){\n\tthis.qprops.first();\n\tvar n = this.thv.showResult(this.qprops, config, false);\n\tthis.view.appendChild(n);\n}\n\nTerminusSchemaViewer.prototype.appendClassViews = function(config){\n\tthis.qclasses.first();\n\tvar n = this.thv.showResult(this.qclasses, config, false);\n\tthis.view.appendChild(n);\n}\n\nTerminusSchemaViewer.prototype.getAllProperties = function(){\n\tlet query = this.woql.from(this.ui.client.connectionConfig.dbURL())\n\t\t\t\t\t\t .limit(25)\n\t\t\t\t\t\t .start(0)\n\t\t\t\t\t\t .propertyMetadata();\n    var self = this;\n    query.execute(this.ui.client).then((results) => {\n\t\tlet qres = new TerminusClient.WOQLResult(results, query);\n\t\tself.qprops = qres;\n\t\tthis.view.appendChild(UTILS.getHeaderDom('Table & Graph View of Properties'));\n\t\tvar table = self.changeHeaders();\n\t\tvar graph = self. setGraphSize();\n\t\tself.appendPropertyViews(table);\n\t\tself.appendPropertyViews(graph);\n\t})\n}\n\nTerminusSchemaViewer.prototype.getAllClasses = function(){\n\tlet query = this.woql.from(this.ui.client.connectionConfig.dbURL())\n\t\t\t\t\t\t .limit(25)\n\t\t\t\t\t\t .start(0)\n\t\t\t\t\t\t .classMetadata();\n    var self = this;\n    query.execute(this.ui.client).then((results) => {\n\t\tlet qres = new TerminusClient.WOQLResult(results, query);\n\t\tself.qclasses = qres;\n\t\tself.view.appendChild(UTILS.getHeaderDom('Table & Graph View of Classes'));\n\t\tvar table = self.changeHeaders();\n\t\tvar graph = self. setGraphSize();\n\t\tself.appendClassViews(table);\n\t\tself.appendClassViews(graph);\n\t})\n}\n\nTerminusSchemaViewer.prototype.defineViewAction = function(a, view){\n\tTerminusClient.FrameHelper.removeChildren(this.view);\n\tUTILS.setSelectedSubMenu(a);\n\tswitch(view){\n\t\tcase 'table':\n\t\t\tthis.appendRuleViews();\n\t\tbreak;\n\t\tcase 'owl':\n\t\t\tthis.getOWLView();\n\t\tbreak;\n\t\tdefault:\n\t\t\tconsole.log('Invalid view passed in TerminusSchema.js')\n\t\tbreak;\n\t}\n}\n\nTerminusSchemaViewer.prototype.getTabs = function(view){\n\tvar a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    //if(navConfig.defaultSelected) a.classList.add('terminus-selected');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        self.defineViewAction(this, view);\n    })\n\tif(view == 'owl')\n\t\tvar t = view.toUpperCase();\n\telse var t = view.charAt(0).toUpperCase() + view.slice(1)\n\ta.appendChild(document.createTextNode(t + ' View'));\n    return a;\n}\n\nTerminusSchemaViewer.prototype.getSchemaViews = function(){\n\tvar ul = document.createElement('ul');\n    ul.setAttribute('class', 'terminus-ul-horizontal');\n\tvar tview = this.getTabs('table');\n\ttview.classList.add('terminus-submenu-selected'); // default view is table\n\tul.appendChild(tview);\n\tul.appendChild(this.getTabs('owl'));\n\tthis.controldom.appendChild(ul);\n\tthis.getAllClasses();\n\tthis.getAllProperties();\n}\n\n/*\n * Retrieves schema from API and writes the response into the page\n */\nTerminusSchemaViewer.prototype.getAsDOM = function(){\n\tthis.holder = document.createElement(\"div\");\n\tthis.controldom = document.createElement(\"div\");\n\tthis.controldom.setAttribute(\"class\", \"terminus-schema-controls\");\n\tthis.view = document.createElement(\"div\");\n\tthis.view.setAttribute(\"class\", \"terminus-schema-view\");\n\tthis.getSchemaViews();\n\tthis.pagedom = document.createElement(\"div\");\n\tthis.pagedom.setAttribute(\"class\", \"terminus-schema-viewer\");\n\t//this.loadSchema();\n\tthis.holder.appendChild(this.controldom);\n\tthis.controldom.appendChild(this.view);\n\tthis.holder.appendChild(this.pagedom);\n\treturn this.holder;\n}\n\nTerminusSchemaViewer.prototype.loadSchema = function(msg, msgtype){\n\tvar self = this;\n\tthis.ui.showBusy(\"Fetching Database Schema\");\n\tthis.ui.client.getSchema(false, {\"terminus:encoding\": \"terminus:\" + this.format})\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t\tself.schema = response;\n\t\tself.refreshPage(msg, msgtype);\n\t})\n\t.catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\n}\n\nTerminusSchemaViewer.prototype.resetControlDOM = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.view);\n\tif(this.mode == \"edit\"){\n\t\tthis.view.appendChild(this.getSchemaSaveButtons());\n\t}\n\telse if(this.mode == \"import\"){\n\t\tthis.view.appendChild(this.getSchemaImportActionButtons());\n\t}\n\telse if(this.mode == \"class_frame\"){\n\t\tif(this.ui.showControl(\"get_schema\")){\n\t\t\tthis.view.appendChild(this.getShowSchemaButton());\n\t\t}\n\t\tif(this.ui.showControl(\"class_frame\")){\n\t\t\tthis.view.appendChild(this.getClassFrameChooser());\n\t\t}\n\t}\n\telse if(this.mode == \"view\"){\n\t\tif(this.ui.showControl(\"update_schema\")){\n\t\t\tthis.view.appendChild(this.getSchemaEditButton());\n\t\t}\n\t\tif(this.ui.showControl(\"import_schema\")){\n\t\t\tthis.view.appendChild(this.getImportButton());\n\t\t}\n\t\tif(this.ui.showControl(\"add_new_library\")){\n\t\t\tthis.view.appendChild(this.getNewLibaryButton());\n\t\t}\n\t\tif(this.ui.showControl(\"class_frame\")){\n\t\t\tthis.view.appendChild(this.getClassFrameChooser());\n\t\t}\n\t}\n}\n/*\nTerminusSchemaViewer.prototype.getFormatChoices = function(){\n\tvar fc = document.createElement(\"select\");\n\tfc.setAttribute(\"class\", \"terminus-form-select terminus-schema-format terminus-type-select\");\n\tvar tc = document.createElement(\"option\");\n\ttc.setAttribute(\"class\", \"terminus-schema-turtle\");\n\ttc.value = \"turtle\";\n\ttc.appendChild(document.createTextNode(\"Turtle\"));\n\tif(this.format == \"turtle\") tc.selected = true;\n\tfc.appendChild(tc);\n\tvar tj = document.createElement(\"option\");\n\ttj.setAttribute(\"class\", \"terminus-schema-jsonld\");\n\ttj.value = \"jsonld\";\n\ttj.appendChild(document.createTextNode(\"Json LD\"));\n\tif(this.format == \"jsonld\") tj.selected = true;\n\tfc.appendChild(tj);\n\tvar self = this;\n\tfc.addEventListener(\"change\", function(e){\n\t\tself.format = this.value;\n\t\tself.loadSchema();\n\t});\n\treturn fc;\n}\n*/\n\nTerminusSchemaViewer.prototype.refreshPage = function(msg, msgtype){\n\tif(this.view) {\n\t\tthis.resetControlDOM();\n\t\tthis.refreshMainPage(msg, msgtype);\n\t}\n\t/*if(this.controldom)\tthis.resetControlDOM();\n\tif(this.pagedom) this.refreshMainPage(msg, msgtype);*/\n}\n\nTerminusSchemaViewer.prototype.refreshMainPage = function(msg, msgtype){\n\tTerminusClient.FrameHelper.removeChildren(this.pagedom);\n\tif(this.mode == 'view'){\n\t\tthis.view.appendChild(this.getSchemaViewDOM());\n\t}\n\telse if(this.mode == \"edit\"){\n\t\tthis.view.appendChild(this.getSchemaEditDOM());\n\t}\n\telse if(this.mode == \"import\"){\n\t\tthis.view.appendChild(this.getSchemaImportDOM());\n\t}\n\tif(msg){\n\t\tthis.ui.showMessage(msg, msgtype);\n\t}\n}\n\nTerminusSchemaViewer.prototype.getSchemaSaveButtons = function(){\n\tvar ssb = document.createElement(\"span\");\n\tssb.setAttribute(\"class\", \"terminus-schema-save-buttons\");\n\tssb.appendChild(this.getCancelButton());\n\tssb.appendChild(this.getSaveButton());\n\treturn ssb;\n}\n\nTerminusSchemaViewer.prototype.getSchemaImportActionButtons = function(){\n\tvar ssb = document.createElement(\"span\");\n\tssb.setAttribute(\"class\", \"terminus-schema-import-buttons\");\n\tssb.appendChild(this.getCancelButton(true));\n\tssb.appendChild(this.getImportSaveButton());\n\treturn ssb;\n}\n\nTerminusSchemaViewer.prototype.getShowSchemaButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tself.mode = \"view\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"View Schema\", \"get_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getImportPreviewButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tself.mode = \"preview\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"Preview\", \"preview\", func);\n}\n\nTerminusSchemaViewer.prototype.getCancelButton = function(is_import){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tself.mode = \"view\";\n\t\tif(is_import){\n\t\t\tself.ui.redraw();\n\t\t}\n\t\telse {\n\t\t\tself.refreshPage();\n\t\t}\n\t}\n\treturn this.getSchemaButton(\"Cancel\", \"cancel_update\", func);\n}\n\nTerminusSchemaViewer.prototype.getImportSaveButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tif(typeof self.doImport == \"function\"){\n\t\t\tself.doImport();\n\t\t}\n\t}\n\treturn this.getSchemaButton(\"Import\", \"import_schema\", func)\n}\n\nTerminusSchemaViewer.prototype.getSaveButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tvar text = self.schema_edit_dom.value;\n\t\tif(typeof(self.schema) == \"object\"){\n\t\t\ttext = JSON.parse(text);\n\t\t}\n\t\tvar opts = {};\n\t\topts['terminus:encoding'] =  'terminus:' + self.format;\n\t\tif(!(TerminusClient.FrameHelper.empty(self.schema_edit_dom_name)))\n\t\t\topts['schemaId'] = self.ui.client.connectionConfig.dbURL() + '/' + self.schema_edit_dom_name.value;\n\t\telse opts['schemaId'] = self.ui.client.connectionConfig.dbURL() + '/' + 'schema';\n\t\treturn self.updateSchema(text, opts);\n\t}\n\treturn this.getSchemaButton(\"Save\", \"update_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getSchemaEditButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.mode = \"edit\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"Edit\", \"update_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getNewLibaryButton = function(){  //add_new_library\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tself.mode = \"edit\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"New Library\", \"add_new_library\", func);\n}\n\nTerminusSchemaViewer.prototype.getImportButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.ui.clearMessages();\n\t\tself.mode = \"import\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"Import New Schema\", \"import_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getSchemaButton = function(label, action, func){\n\tvar opt = document.createElement(\"button\");\n\topt.appendChild(document.createTextNode(label));\n\topt.setAttribute(\"class\", \"terminus-btn terminus-control-button terminus-schema-\" + action);\n\topt.addEventListener(\"click\", func);\n\treturn opt;\n}\n\n/*\n * Updates schema, then fetches updated version and updates the page with it\n */\nTerminusSchemaViewer.prototype.updateSchema  = function(text, opts) {\n\tthis.ui.showBusy(\"Updating Database Schema\");\n\tvar self = this;\n\treturn this.ui.client.updateSchema(false, text, opts)\n\t.then(function(response){\n\t\tif(response['terminus:status'] && response['terminus:status'] == \"terminus:success\"){\n\t\t\tself.ui.showBusy(\"Retrieving updated schema\");\n\t\t\tself.mode = \"view\";\n\t\t\tself.loadSchema(\"Successfully Updated Schema\");\n\t\t\tself.ui.redraw();\n\t\t}\n\t\telse if(response['terminus:status'] && response['terminus:status'] == \"terminus:failure\"){\n\t\t\tself.ui.clearBusy();\n\t\t\tself.ui.showViolations(response['terminus:witnesses'], \"schema\");\n\t\t}\n\t\telse {\n\t\t\tthrow new Error(\"Update Schema returned no terminus:status code\");\n\t\t}\n\t})\n\t.catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tif(error.data && error.data['terminus:witnesses']){\n\t\t\tself.ui.showViolations(error.data['terminus:witnesses'], \"schema\");\n\t\t}\n\t\telse {\n\t\t\tself.ui.showError(error);\n\t\t}\n\t});\n}\n\n/*\n * Imports a schema from the passed url\n * mode: replace | append\n */\nTerminusSchemaViewer.prototype.load  = function(url, key, mode){\n\tvar self = this;\n\tmode = (mode ? mode : \"replace\");\n\tthis.ui.showBusy(\"Loading schema from \" + url);\n\tvar origurl = this.ui.client.connectionConfig.schemaURL();\n\treturn this.ui.client.getSchema(url, {\"terminus:user_key\": key, \"terminus:encoding\" : \"terminus:\" + this.format})\n\t.then(function(response){\n\t\tvar newschema = (mode == \"append\") ? self.appendSchema(response) : response;\n\t\tif(self.confirm_before_update){\n\t\t\t//reconnect to original db\n\t\t\tself.ui.showResult(\"Schema retrieved - click save to deploy\");\n\t\t\tself.ui.client.connectionConfig.setSchemaURL(origurl);\n\t\t\tself.showConfirmPage(newschema);\n\t\t}\n\t\telse {\n\t\t\tself.ui.showBusy(\"Updating schema\");\n\t\t\tself.ui.client.connectionConfig.setSchemaURL(origurl);\n\t\t\tself.updateSchema(newschema, {\"terminus:encoding\": \"terminus:\" + self.format}).then(function(response){\n\t\t\t\tself.mode = \"view\";\n\t\t\t\tself.ui.clearBusy();\n\t\t\t\tself.ui.redraw();\n\t\t\t\tself.ui.showResult(\"Successfully deployed new schema from \" + url);\n\t\t\t\treturn response;\n\t\t\t});\n\t\t}\n\t}).catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\n}\n\nTerminusSchemaViewer.prototype.appendSchema = function(s2){\n\tvar nschema = this.schema;\n\tif(this.format == 'turtle'){\n\t\tnschema = this.schema + s2;\n\t}\n\telse if(this.format == 'jsonld'){\n\t\tfor(var i in s2){\n\t\t\tnschema[i] = s2[i];\n\t\t}\n\t}\n\treturn nschema;\n}\n\n\n\n\nTerminusSchemaViewer.prototype.showConfirmPage = function(newschema){\n\tthis.schema = newschema;\n\tthis.confirm_before_update = false;\n\tthis.mode = \"edit\";\n\tthis.refreshPage(\"Confirm new schema\");\n}\n\nTerminusSchemaViewer.prototype.getSchemaNameInputDOM = function(np){\n\tvar label = document.createElement('label');\n    label.setAttribute('class', 'terminus-control-label');\n\tlabel.setAttribute('for', 'basicinput');\n    label.appendChild(document.createTextNode('Schema name:'));\n\tvar sid = document.createElement('input');\n\tsid.setAttribute('class', 'terminus-input-text terminus-schema-id-display');\n\tsid.setAttribute('placeholder', 'Enter schema name');\n\tnp.appendChild(label);\n\tnp.appendChild(sid);\n\treturn sid;\n}\n\nTerminusSchemaViewer.prototype.getSchemaEditDOM = function(){\n\tvar np = document.createElement(\"div\");\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-edit-page\");\n\tif(this.ui.showControl(\"add_new_library\")) var sid = this.getSchemaNameInputDOM(np);\n\tvar ipval = document.createElement(\"textarea\");\n\tipval.setAttribute(\"class\", \"terminus-schema-edit terminus-schema-textarea\");\n\tipval.setAttribute(\"width\", \"100%\");\n\tipval.setAttribute(\"style\", \"min-width: 400px; min-height: 400px;\");\n\tif(typeof(this.schema) == \"string\"){\n\t\tipval.innerHTML = this.schema;\n\t}\n\telse if(typeof (this.schema) == \"object\") {\n\t\tipval.innerHTML = JSON.stringify(this.schema, 0, 4);\n\t}\n\tif(this.ui.showControl(\"add_new_library\")) this.schema_edit_dom_name = sid;\n\tthis.schema_edit_dom = ipval;\n\tnp.appendChild(ipval);\n\tUTILS.stylizeEditor(this.ui, ipval, 'schema', 'turtle');\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.getSchemaViewDOM = function(){\n\tvar self = this;\n\tvar np = document.createElement(\"div\");\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-view-page\");\n\tvar ipval = document.createElement(\"pre\");\n\tipval.setAttribute(\"class\", \"terminus-schema-view terminus-scheme-pre\");\n\tif(typeof(this.schema) == \"string\"){\n\t\tvar txt = this.schema.replace(/&/g, \"&amp;\")\n         .replace(/</g, \"&lt;\")\n         .replace(/>/g, \"&gt;\")\n         .replace(/\"/g, \"&quot;\")\n         .replace(/'/g, \"&#039;\");\n\t\tipval.innerHTML = txt;\n\t}\n\telse if(typeof (this.schema) == \"object\") {\n\t\tipval.innerHTML = JSON.stringify(this.schema, 0, 4);\n\t}\n\tvar cm = UTILS.stylizeCodeDisplay(this.ui, ipval, np, 'turtle');\n\tif(!cm) np.appendChild(ipval);\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.getSchemaImportDOM = function(){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-form-border terminus-schema-page terminus-schema-import-page\");\n\n\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-url-loader-input terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"URL\"));\n\tsci.appendChild(slab);\n\tvar inpUrl  = document.createElement(\"input\");\n\tinpUrl.setAttribute(\"type\", \"text\");\n\tinpUrl.setAttribute(\"class\", \"terminus-form-value terminus-input-text terminus-form-url terminus-url-connect\");\n\tinpUrl.setAttribute(\"placeholder\", \"Enter URL of DB to import from\");\n\tsci.appendChild(inpUrl);\n\tscd.appendChild(sci);\n\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar klab = document.createElement(\"span\");\n\tklab.setAttribute(\"class\", \"terminus-url-loader-input terminus-form-label  terminus-control-label terminus-import_mode-input\");\n\tklab.appendChild(document.createTextNode(\"Import Mode\"));\n\tsci.appendChild(klab);\n\tvar modes = document.createElement(\"select\");\n\tmodes.setAttribute(\"class\", \"terminus-form-select\");\n\n\tvar overwrite = document.createElement(\"option\");\n\toverwrite.value = \"replace\";\n\toverwrite.appendChild(document.createTextNode(\"Replace Mode\"))\n\tmodes.appendChild(overwrite);\n\tvar append = document.createElement(\"option\");\n\tappend.value = \"append\";\n\tappend.appendChild(document.createTextNode(\"Append Mode\"))\n\tmodes.appendChild(append);\n\tmodes.setAttribute(\"class\", \"terminus-form-select terminus-import-mode\");\n\tsci.appendChild(klab);\n\tsci.appendChild(modes);\n\tscd.appendChild(sci);\n\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar klab = document.createElement(\"span\");\n\tklab.setAttribute(\"class\", \"terminus-form-label terminus-url-key-input terminus-control-label\");\n\tklab.appendChild(document.createTextNode(\"Key\"))\n\tvar key = document.createElement(\"input\");\n\tkey.setAttribute(\"type\", \"text\");\n\tkey.setAttribute(\"class\", \"terminus-form-value terminus-input-text terminus-url-key\");\n\tsci.appendChild(klab);\n\tsci.appendChild(key);\n\tscd.appendChild(sci);\n\tvar self = this;\n\tthis.doImport = function(){\n\t\tif(inpUrl.value){\n\t\t\tself.load(inpUrl.value, key.value, modes.value);\n\t\t}\n\t}\n\treturn scd;\n}\n\nmodule.exports=TerminusSchemaViewer\n","const TerminusClient = require('@terminusdb/terminus-client');\nconst WOQLRule = require(\"../viewer/WOQLRule\");\nconst WOQLTable = require(\"../viewer/WOQLTable\");\nconst WOQLChooser = require(\"../viewer/WOQLChooser\");\n//const WOQLQueryViewer = require(\"./viewer/WOQLQueryView\");\nconst WOQLGraph = require(\"../viewer/WOQLGraph\");\nconst WOQLStream = require(\"../viewer/WOQLStream\");\nconst TerminusFrame = require(\"../viewer/TerminusFrame\");\nconst Datatypes = require(\"./Datatypes\");\nconst SimpleTable = require(\"./table/SimpleTable\");\nconst SimpleGraph = require(\"./graph/SimpleGraph\");\nconst SimpleStream = require(\"./stream/SimpleStream\");\n//const SimpleTextbox = require(\"./html/query/SimpleTextbox\");\nconst SimpleChooser = require(\"./chooser/SimpleChooser\");\nconst SimpleDocument = require(\"./document/SimpleDocument\");\nconst DocumentTable = require(\"./document/DocumentTable\");\nconst SimpleFrameViewer = require(\"./document/SimpleFrameViewer\");\nconst HTMLObjectViewer = require(\"./document/ObjectViewer\");\nconst HTMLPropertyViewer = require(\"./document/PropertyViewer\");\nconst HTMLDataViewer = require(\"./document/DataViewer\");\nconst TerminusCodeSnippet = require('./query/TerminusCodeSnippet');\nconst UTILS = require('../Utils');\n\n/**\n * Provides access to the two basic HTML views supported by the system:\n * QueryPane(, [rvs])\n * DocumentPane(qeditor, [rvs])\n * ScriptPane(seditor, sv)\n */\n\n\nfunction TerminusHTMLViewer(client){\n\tthis.client = client;\n}\n\nTerminusHTMLViewer.prototype.setRenderers = function(config){\n}\n\nTerminusHTMLViewer.prototype.getEditor = function(width, height, placeholder){\n    var woql = TerminusClient.WOQL;\n\tvar tcs = new TerminusCodeSnippet({}, width, height, placeholder, this.mode);\n\tvar snippet = tcs.getAsDOM();\n\tvar dimensions = {};\n\tdimensions.width = width;\n\tdimensions.height = height;\n\tUTILS.stylizeEditor(this.ui, snippet.snippetText, dimensions, 'javascript');\n\treturn snippet;\n}\n\nTerminusHTMLViewer.prototype.showConfigEditor = function(result, config, span){\n    var cSnippet = this.getEditor(300, 250,\n                        JSON.stringify(config, undefined, 2));\n    var self = this;\n    cSnippet.actionButton.addEventListener('click', function(){\n        try{\n            //self.submitConfigRules(woql, cSnippet, qSnippet, rSnippet);\n\t\t\tvar cObj = UTILS.getqObjFromInput(cSnippet.snippetText.value);\n\t\t\tTerminusClient.FrameHelper.removeChildren(span);\n\t\t\tspan.appendChild(self.showResult(result, cObj));\n        }\n        catch(e){\n            //self.ui.showError('Error in config editor: ' + e);\n\t\t\tconsole.log('Error in config editor: ' + e);\n        }\n    })\n    return cSnippet;\n}\n\nTerminusHTMLViewer.prototype.submitConfig = function(result, config, span, cdom){\n\tvar cSnippet = this.showConfigEditor(result, config, span);\n\tcdom.appendChild(cSnippet.dom);\n}\n\nTerminusHTMLViewer.prototype.showConfig = function(result, config, span, cdom){\n\tvar cbtn = document.createElement('button');\n    //cbtn.setAttribute('style', 'margin-top: 10px;');\n    cbtn.setAttribute('class', 'terminus-btn terminus-query-config-btn');\n    cbtn.appendChild(document.createTextNode('Config'));\n    //rSnippet.dom.appendChild(cbtn);\n    //qSnippet.dom.appendChild(cbtn);\n    var self = this;\n    cbtn.addEventListener('click', function(){\n\t\tTerminusClient.FrameHelper.removeChildren(cdom);\n        self.submitConfig(result, config, span, cdom);\n    })\n    return cbtn;\n}\n\nTerminusHTMLViewer.prototype.showResult = function(result, config, cDisplay){\n\tlet span = document.createElement(\"span\");\n\tspan.setAttribute(\"class\", \"terminus-query-results\");\n\tresult.first();\n\tlet renderers = {\n\t\ttable: new SimpleTable(),\n\t\tgraph: new SimpleGraph(),\n\t\tstream: new SimpleStream(),\n\t\tchooser: new SimpleChooser()\n\t}\n\tlet viewer = config.create(this.client, renderers, Datatypes.initialiseDataRenderers);\n\tviewer.setResult(result);\n\tspan.appendChild(viewer.render());\n\tvar cdom = document.createElement('div');\n\tspan.appendChild(cdom);\n\tif(cDisplay) span.appendChild(this.showConfig(result, config, span, cdom));\n\treturn span;\n}\n\nTerminusHTMLViewer.prototype.displayResults = function(query, config){\n\tlet span = document.createElement(\"span\");\n\tspan.setAttribute(\"class\", \"terminus-results\");\n\tlet renderers = {\n\t\t\ttable: new SimpleTable(),\n\t\t\tgraph: new SimpleGraph(),\n\t\t//\tstream: [new SimpleStream()],\n\t\t\tchoice: new SimpleChooser()\n\t}\n\tlet viewer = config.create(this.client, renderers, Datatypes.initialiseDataRenderers);\n\tif(query){\n\t\tthis.loadResults(query, viewer, function(){ span.appendChild(viewer.render()); })\n\t}\n\telse {\n\t\tif(this.last_result){\n\t\t\tviewer.setResult(this.last_result);\n\t\t\tspan.appendChild(viewer.render());\n\t\t}\n\t}\n\treturn span;\n}\n\nTerminusHTMLViewer.prototype.loadResults = function(query, viewer, then){\n\tvar self = this;\n\treturn query.execute(this.client).then((results) => {\n\t\tself.last_result = new TerminusClient.WOQLResult(results, query);\n\t\tviewer.setResult(self.last_result);\n\t\tconsole.log('self.last_result', self.last_result);\n\t});\n}\n\nTerminusHTMLViewer.prototype.table = function(query, config){\n\tvar span = document.createElement(\"span\");\n\tspan.setAttribute(\"class\", \"terminus-table\");\n\tvar wqt = new WOQLTable(this.client).options(config);\n\twqt.setDatatypes(Datatypes.initialiseDataRenderers);\n\twqt.setRenderer(new SimpleTable());\n\tquery.execute(this.client).then((results) => {\n\t\tvar result = new TerminusClient.WOQLResult(results, query);\n\t\twqt.setResult(result);\n\t\tspan.appendChild(wqt.render());\n\t});\n\treturn span;\n}\n\nTerminusHTMLViewer.prototype.stream = function(query, config){\n\tvar span = document.createElement(\"span\");\n\tspan.setAttribute(\"class\", \"terminus-stream\");\n\tvar wqt = new WOQLStream(this.client).options(config);\n\twqt.setDatatypes(Datatypes.initialiseDataRenderers);\n\treturn query.execute(this.client).then((results) => {\n\t\tvar result = new WOQLResult(results, query);\n\t\tspan.appendChild(wqt.render());\n\t});\n\treturn span;\n}\n\nTerminusHTMLViewer.prototype.woql = function(query, config){\n\tvar span = document.createElement(\"span\");\n\tspan.setAttribute(\"class\", \"terminus-woql\");\n\tvar wqt = new WOQLQueryViewer(this.client).options(config);\n\tspan.appendChild(wqt.render());\n\tif(query){\n\t\twqt.setQuery(query, true);\n\t}\n\treturn span;\n}\n\nTerminusHTMLViewer.prototype.ruleEditor = function(){\n\n}\n\nTerminusHTMLViewer.prototype.getAddRuleButton = function(cont){\n\tvar rbtn = document.createElement('button');\n\trbtn.appendChild(document.createTextNode('Add another rule'));\n\tvar self = this;\n\trbtn.addEventListener('click', function(){\n\t\t//self.QueryPane.addResultViewer(\"Choice\", wqc);\n\t\t//qp.addResultViewer(\"Choice\", wqc);\n\t\t//addResultViewer = function(label, rule, ruleviewer){\n\t})\n\tcont.appendChild(rbtn);\n}\n\nTerminusHTMLViewer.prototype.getConfigButton = function(cont){\n\tvar cbtn = document.createElement('button');\n\tcbtn.appendChild(document.createTextNode('Rule'));\n\tvar self = this;\n\tcbtn.addEventListener('click', function(){\n\t\tcont.appendChild(self.ruleEditor());\n\t\tself.getAddRuleButton(cont);\n\t})\n\tcont.appendChild(cbtn);\n}\n\nTerminusHTMLViewer.prototype.querypane = function(query, config){\n\tvar span = document.createElement(\"span\");\n\tspan.setAttribute(\"class\", \"terminus-woql-pane\");\n\tvar qp = new QueryPane(this.client, query);\n\tqp.options(config);\n\tthis.queryPane = qp;\n\tvar wqv = new WOQLQueryViewer(this.client).options(config);\n\tthis.queryViewer = wqv;\n\n\t// Query Viewer\n/*\tvar tcs = new TerminusCodeSnippet({}, 800, 250, 'Enter Query', 'edit');\n\tvar snippet = tcs.getAsDOM();\n\tspan.appendChild(snippet.dom);\n\t//span.appendChild(this.ruleEditor());\n\tvar abtn = snippet.actionButton;\n\tvar self = this; */\n\t// On submit query\n\t/*abtn.addEventListener('click', function(){\n\t\tvar qObj = wqv.getqObjFromInput(snippet.snippetText.value);\n\t\tlet t = TerminusClient.WOQL.table();\n\t\tconsole.log('t', t);\n\n\n\t\tspan.appendChild(self.displayResults(qObj, t));\n\t\tself.getConfigButton(span);\n\n\t\t/*qObj.execute(self.client).then(function(response){\n\t\t\t// default result in table format\n\t\t\tlet t = TerminusClient.WOQL.table();\n\t\t\tlet res = TerminusClient.WOQLResult(response, qObj, t);\n\t\t\t/*t.column(\"Label\").header(\"Document\");\n\t\t\tt.column(\"Range\").header(\"Range\");\n\t\t\tt.column(\"Domain\").header(\"Domain\");\n\t\t\tt.column(\"Comment\").header(\"Description\");\n\t\t\tt.column(\"Comment\").renderer(\"HTMLStringViewer\").args({max_cell_size: 20, max_word_size: 10});\n\t\t    t.column_order(\"Label\", \"Type\", \"Comment\");*/\n\t\t/*\tspan.appendChild(self.displayResults(res, t));\n\t\t\tself.getConfigButton(span);\n\t\t}) */\n\t\t//wqv.submitQuery(qObj);\n\t/*})\n\t*/\n\n\t//console.log('wqv', wqv);\n\t//var wqc = new WOQLChoice(this.client).options(config);\n\t//var wqs = new WOQLStream(this.client).options(config);\n\t//var wqg = new WOQLGraph(this.client).options(config);\n\t//var wqt = new WOQLTable(this.client).options(config)\n\t//wqv.setRenderer(new SimpleTextbox(wqv, 1000, 600));\n\t//wqt.setRenderer(new SimpleTable());\n\t//wqg.setRenderer(new SimpleGraph());\n\t//wqt.setDatatypes(Datatypes.initialiseDataRenderers);\n\t//wqs.setDatatypes(Datatypes.initialiseDataRenderers);\n\t//qp.addQueryViewer(wqv);\n\t//qp.addResultViewer(\"Choice\", wqc);\n\t//qp.addResultViewer(\"Stream\", wqs);\n\t//qp.addResultViewer(\"Graph\", wqg);\n\t//qp.addResultViewer(\"Table\", wqt);\n\n\t//qp.addResultViewer(\"ABC\", config, new SimpleTextbox(wqv, 1000, 600));\n\t//span.appendChild(qp.render());\n\n\treturn span;\n}\n\n\nTerminusHTMLViewer.prototype.chooser = function(query, config){\n\tvar span = document.createElement(\"span\");\n\tspan.setAttribute(\"class\", \"terminus-chooser\");\n\tvar wqt = new WOQLChoice(this.client).options(config);\n\treturn query.execute(this.client).then((results) => {\n\t\tvar result = new WOQLResult(results, query);\n\t\tspan.appendChild(wqt.render(result));\n\t});\n\treturn span;\n}\n\nTerminusHTMLViewer.prototype.graph = function(query, config){\n\tvar span = document.createElement(\"span\");\n\tspan.setAttribute(\"class\", \"terminus-graph terminus-graph-holder\");\n\tvar wqt = new WOQLGraph(this.client).options(config);\n\treturn query.execute(this.client).then((results) => {\n\t\tvar result = new WOQLResult(results, query);\n\t\tspan.appendChild(wqt.render(result));\n\t});\n\treturn span;\n}\n\nTerminusHTMLViewer.prototype.document = function(id, config){\n\tvar holder = document.createElement(\"span\");\n\tholder.setAttribute(\"class\", \"terminus-document terminus-document-holder\");\n\t//config.renderer(new DocumentTable());\n\t//config.show_all(\"SimpleFrameViewer\");\n\tvar tdv = new TerminusFrame(this.client).options(config);\n\ttdv.owner = this;\n\ttdv.setDatatypes(Datatypes.initialiseDataRenderers);\n\ttdv.loadDocument(id).then(() => {\n\t\tlet dom = tdv.render();\n\t\tif(dom) holder.appendChild(dom);\n\t});\n\treturn holder;\n}\n\nTerminusHTMLViewer.prototype.loadRenderer = function(rendname, frame, args, termframe){\n\tvar evalstr = \"new \" + rendname + \"(\";\n\tif(args) evalstr += JSON.stringify(args);\n\tevalstr += \");\";\n\ttry {\n\t\tvar nr = eval(evalstr);\n\t\tnr.terminus = termframe;\n\t\treturn nr;\n\t}\n\tcatch(e){\n\t\tconsole.log(\"Failed to load \" + rendname + e.toString());\n\t\treturn false;\n\t}\n}\n\nmodule.exports = TerminusHTMLViewer;\n","function SimpleDocument(){}\n\nSimpleDocument.prototype.render = function(frame){\n\tvar s = document.createElement(\"div\");\n\tfor(var p in frame.properties){\n\t\tvar pr = this.renderProperty(frame.properties[p])\n\t\tif(pr) s.appendChild(pr);\n\t}\n\treturn s;\n}\n\nSimpleDocument.prototype.renderProperty = function(frame){\n\tvar s = document.createElement(\"div\");\n\ts.appendChild(document.createTextNode(frame.getLabel() + \": \"));\n\tfor(var i = 0 ; i < frame.values.length; i++){\n\t\tif(frame.values[i].isData()){\n\t\t\tvar pr = this.renderValue(frame.values[i]);\n\t\t}\n\t\telse {\n\t\t\tvar pr = this.render(frame.values[i]);\t\t\t\n\t\t}\n\t\tif(pr) s.appendChild(pr);\n\t}\n\treturn s;\n}\n\nSimpleDocument.prototype.renderValue = function(frame){\n\tvar s = document.createElement(\"span\");\n\ts.appendChild(document.createTextNode(frame.get() + \" \"));\n\treturn s;\n}\n\nmodule.exports = SimpleDocument;","function DocumentTable(){}\n\nDocumentTable.prototype.render = function(frame){\n\tvar t = this.getTableDOM(frame);\n\tvar tbody = document.createElement(\"tbody\");\n\tfor(var p in frame.properties){\n\t\t//s.appendChild(document.createTextNode(p));\n\t\tvar pr = this.renderProperty(tbody, frame.properties[p]);\n\t\t//if(pr) tbody.appendChild(pr);\n\t}\n\tt.appendChild(tbody);\n\treturn t;\n}\n\nDocumentTable.prototype.getTableDOM = function(frame){\n\t//const columns = this.woqltable.getColumnsToRender();\n\tvar tab = document.createElement(\"table\");\n\ttab.setAttribute(\"class\", \"terminus-hover-table\");\n\tvar thead = document.createElement(\"thead\");\n\tvar thr = document.createElement(\"tr\");\n\tvar th = document.createElement(\"th\");\n\tth.setAttribute('class', 'terminus-table-header-full-css');\n\tth.setAttribute('colspan', 2);\n\tth.appendChild(document.createTextNode(frame.subject() + \", \" + frame.subjectClass()));\n\tthr.appendChild(th);\n\tthead.appendChild(thr);\t\n\ttab.appendChild(thead);\n\treturn tab;\n}\n\nDocumentTable.prototype.renderProperty = function(tbody, frame){\n\tfor(var i = 0 ; i < frame.values.length; i++){\n\t\tvar thr = document.createElement(\"tr\");\n\t\tvar td = document.createElement(\"td\");\n\t\ttd.appendChild(document.createTextNode(frame.getLabel()));\n\t\tvar td2 = document.createElement(\"td\");\n\t\tif(frame.values[i].isData()){\n\t\t\ttd2.appendChild(this.renderValue(frame.values[i]));\n\t\t}\n\t\telse {\n\t\t\ttd2.appendChild(this.render(frame.values[i]));\t\t\t\n\t\t}\n\t\tthr.appendChild(td);\t\n\t\tthr.appendChild(td2);\t\n\t\ttbody.appendChild(thr);\t\n\t}\n}\n\nDocumentTable.prototype.renderValue = function(frame){\n\treturn document.createTextNode(frame.get());\n}\n\nmodule.exports = DocumentTable;","const HTMLFrameHelper = require('../HTMLFrameHelper');\nconst TerminusClient = require('@terminusdb/terminus-client');\n/**\n * Property Viewer\n */\nfunction HTMLPropertyViewer(renderer){\n\tthis.values = [];\n}\n\n\n/**\n * Draws the property as header and body components\n */\nHTMLPropertyViewer.prototype.render = function(renderer){\n\tthis.renderer = renderer;\n\tthis.headerViewer = new HTMLPropertyHeaderViewer();\n\t//var block = document.createElement('div');\n\t//block.setAttribute('style', 'display: flex; margin: 10px');\n\t//var br = document.createElement('br');\n\t//block.appendChild(br);\n\tif(this.propDOM){\n\t\tvar npropDOM = this.getPropertyDOM();\n\t\t//npropDOM.setAttribute('style', 'display: flex; margin: 10px;');\n\t\t\t//block.appendChild(npropDOM);\n\t\tthis.propDOM.replaceWith(npropDOM);\n\t\tthis.propDOM = npropDOM;\n\t\t//this.propDOM = block;\n\t}\n\telse {\n\t\t//block.appendChild(this.getPropertyDOM());\n\t\t//this.propDOM = block;\n\t\tthis.propDOM = this.getPropertyDOM();\n\t\t//this.propDOM.setAttribute('style', 'display: flex; margin: 10px;');\n\t}\n\tthis.propDOM.appendChild(this.getPropertyIDMarker(this.renderer));\n\tif(this.headerViewer){\n\t\tthis.header = this.headerViewer.getAsDOM(this.renderer);\n\t\tif(this.header) this.propDOM.appendChild(this.header);\n\t}\n\tthis.body = this.getPropertyBodyDOM();\n\tif(this.body) this.propDOM.appendChild(this.body);\n\treturn this.propDOM;\n}\n\nHTMLPropertyViewer.prototype.getPropertyDOM = function(){\n\tvar orientation = this.renderer.getContentOrientation();\n\tvar pcls = \" terminus-property-frame-display terminus-property-frame-\" + orientation;\n\tif(orientation == \"label\"){\n\t\tvar sp = document.createElement(\"span\");\n\t}\n\telse {\n\t\tvar sp = document.createElement(\"div\");\n\t}\n\t//terminus-property-frame-spacer\n\n\tsp.setAttribute(\"class\", \"terminus-property-frame terminus-zebra-frame terminus-property-frame-\" + this.renderer.mode + \" \" + pcls);\n\tsp.setAttribute('data-property', this.renderer.property());\n\treturn sp;\n}\n\nHTMLPropertyViewer.prototype.getPropertyBodyDOM = function(){\n\tvar orientation = this.renderer.getContentOrientation();\n\tvar pcls = \"terminus-property-values-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar vholder = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar vholder = document.createElement(\"span\");\n\t}\n    vholder.setAttribute('class', 'terminus-property-values ' + pcls + ' terminus-property-values-align');\n\tfor(var i =0; i<this.values.length; i++){\n\t\tvholder.appendChild(this.values[i]);\n\t}\n\treturn vholder;\n}\n\nHTMLPropertyViewer.prototype.addRenderedValue = function(renderedval){\n\tthis.values.push(renderedval);\n}\n\nHTMLPropertyViewer.prototype.clear = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.propDOM);\n\tthis.values = [];\n}\n\n\n/**\n * Removes the property from the dom\n */\nHTMLPropertyViewer.prototype.remove = function(){\n\tthis.propDOM.parentNode.removeChild(this.propDOM);\n}\n\n/**\n * Redraws the property to reflect an updated state\n */\nHTMLPropertyViewer.prototype.redraw = function(){\n\tvar npropDOM = this.getPropertyDOM();\n\tthis.propDOM.replaceWith(npropDOM);\n\tthis.propDOM = npropDOM;\n\tthis.values = [];\n\tthis.renderer.render(this);\n}\n\nHTMLPropertyViewer.prototype.redrawHeader = function(){\n\tif(this.headerViewer && this.header) {\n\t\tvar nheader = this.headerViewer.getAsDOM(this.renderer);\n\t\tthis.header.replaceWith(nheader);\n\t\tthis.header = nheader;\n\t}\n}\n\nHTMLPropertyViewer.prototype.redrawBody = function(){\n\tif(this.body){\n\t\tvar nbody = this.getPropertyBodyDOM();\n\t\tthis.body.replaceWith(nbody);\n\t\tthis.body = nbody;\n\t}\n}\n\n/**\n * Generates a html anchor element to use as a marker to find the property on the page\n */\nHTMLPropertyViewer.prototype.getPropertyIDMarker = function(renderer){\n\tvar idm = document.createElement(\"a\");\n\tidm.setAttribute(\"class\", \"terminus-property-idmarker\");\n\tvar subj = TerminusClient.FrameHelper.getShorthand(renderer.subject());\n\tif(!subj ) subj = renderer.subject();\n\tvar bits = subj .split(\":\");\n\tif(bits.length > 1) subj = bits[1];\n\tvar prop = TerminusClient.FrameHelper.getShorthand(renderer.property());\n\tif(!prop ) prop = renderer.property();\n\tvar bits = prop.split(\":\");\n\tif(bits.length > 1) prop = bits[1];\n\tidm.setAttribute(\"name\", subj + \"_\" + prop);\n\treturn idm;\n}\n\nHTMLPropertyViewer.prototype.goTo = function(subj, property, index){\n\tHTMLFrameHelper.goToName(subj, property, index);\n}\n\nfunction HTMLPropertyHeaderViewer(){}\n\nHTMLPropertyHeaderViewer.prototype.getAsDOM = function(renderer){\n\tvar orientation = renderer.getContentOrientation();\n\tvar pcls = \"terminus-property-header-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar objDOM = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar objDOM = document.createElement(\"span\");\n\t}\n\tobjDOM.setAttribute(\"class\", \"terminus-text terminus-property-header \" + pcls);\n\tvar wrapper = document.createElement(\"span\");\n\twrapper.setAttribute(\"class\", \"terminus-property-header-wrapper\");\n\tif(renderer.showFeature(\"control\")){\n\t\tvar expModeMenu = this.getPropertyControlsDOM(wrapper, renderer);\n\t\tif(orientation == 'page') this.expModeMenu = expModeMenu;\n\t\telse this.expModeMenu = null;\n\t}\n\tif(renderer.showFeature(\"label\")){\n\t\tvar sumDOM = this.getPropertyLabelDOM(renderer);\n\t\tif(renderer.showFeature(\"status\")){\n\t\t\tvar statDOM = this.getPropertyStatusDOM(renderer);\n\t\t\tif(statDOM) sumDOM.prepend(statDOM);\n\t\t}\n\t\tif(sumDOM) wrapper.appendChild(sumDOM);\n\t}\n\telse if(renderer.showFeature(\"status\")){\n\t\tvar statDOM = this.getPropertyStatusDOM(renderer);\n\t\tif(statDOM) wrapper.appendChild(statDOM);\n\t}\n\tif(renderer.showFeature(\"summary\")){\n\t\tvar sumDOM = this.getPropertySummaryDOM(renderer);\n\t\tif(sumDOM) wrapper.appendChild(sumDOM);\n\t}\n\n\tvar prelude = document.createElement(\"span\");\n\tprelude.setAttribute(\"class\", \"terminus-property-header-info terminus-property-header-info-\"+renderer.currentFacet());\n\n\tif(renderer.showFeature(\"facet\")){\n\t\tvar facetDOM = this.getPropertyFacetDOM(renderer);\n\t\tif(facetDOM) prelude.appendChild(facetDOM);\n\t\t//if(facetDOM && this.expModeMenu) this.expModeMenu.appendChild(facetDOM);//\n\t}\n\tif(renderer.showFeature(\"view\")){\n\t\tvar viewDOM = this.getViewValueDOM(renderer);\n\t\tif(viewDOM) prelude.appendChild(viewDOM);\n\t\t//if(viewDOM && this.expModeMenu) this.expModeMenu.appendChild(viewDOM); //prelude.appendChild(viewDOM);\n\t}\n\tif(renderer.showFeature(\"id\")){\n\t\tvar idDOM = this.getPropertyIDDOM(renderer);\n\t\tif(idDOM) prelude.appendChild(idDOM);\n\t\t//if(idDOM && this.expModeMenu) this.expModeMenu.appendChild(idDOM); //\n\t}\n\tif(renderer.showFeature(\"type\")){\n\t\tvar typeDOM = this.getPropertyRangeDOM(renderer);\n\t\tif(typeDOM)\tprelude.appendChild(typeDOM);\n\t\t/*if(typeDOM && this.expModeMenu){\n\t\t\tthis.expModeMenu.appendChild(typeDOM);//\n\t\t\ttypeDOM.style.display = 'block';\n\t\t}*/\n\t}\n\tif(renderer.showFeature(\"cardinality\") && renderer.hasCardinalityRestriction()){\n\t\tvar hideDOM = this.getPropertyCardinalityDOM(renderer);\n\t\tif(hideDOM) prelude.appendChild(hideDOM);\n\t\t//\tthis.expModeMenu.appendChild(hideDOM); \t\t\thideDOM.style.display = 'block';\n\n\t}\n\tif(renderer.showFeature(\"comment\")){\n\t\tvar sumDOM = this.getPropertyCommentDOM(renderer);\n\t\tif(sumDOM) prelude.appendChild(sumDOM);\n\t\t/*if(sumDOM && this.expModeMenu){\n\t\t\tthis.expModeMenu.appendChild(sumDOM); //\n\t\t\tsumDOM.style.display = 'block';\n\t\t}*/\n\t}\n\twrapper.appendChild(prelude);\n\tobjDOM.appendChild(wrapper);\n\treturn objDOM;\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyFacetDOM = function(renderer){\n\tvar viewables = renderer.getAvailableFacets();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-facet\");\n\t\tvar callback = function(val){\n\t\t\tif(val){\n\t\t\t\trenderer.setFacet(val);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"property-facet\", viewables, renderer.currentFacet(), callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyIDDOM = function(renderer){\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-id\", \"Property\", renderer.property(), \"This property is identified by this unique URL: \" + renderer.property());\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyRangeDOM = function(renderer){\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-type\", \"Type\", renderer.range(), \"The type of arguments that this property accepts\");\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertySummaryDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-summary\", false, sum.long, sum.status);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyStatusDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"status-\"+sum.status, false, sum.status, sum.status);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyLabelDOM = function(renderer){\n\tvar lab = renderer.getLabel();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-label\", false, lab);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyCommentDOM = function(renderer){\n\tvar lab = renderer.getComment();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-comment\", false, lab);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyCardinalityDOM = function(renderer){\n\tvar restriction = renderer.getRestriction();\n\tif(restriction.min && restriction.max){\n\t\tif(restriction.min == restriction.max){\n\t\t\tvar lab = restriction.min;\n\t\t\tvar help = \"Cardinality: \" + restriction.min;\n\t\t}\n\t\telse {\n\t\t\tvar lab = restriction.min + \"-\" + restriction.max;\n\t\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\n\t\t\thelp += \", Maximum Cardinality: \" + restriction.max;\n\t\t}\n\t}\n\telse if(restriction.min){\n\t\tvar lab = \">\"+(restriction.min-1);\n\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\n\t}\n\telse if(restriction.max){\n\t\tvar lab = \"<\"+(restriction.max+1);\n\t\tvar help = \"Maximum Cardinality: \" + restriction.max;\n\t}\n\telse {\n\t\treturn false;\n\t}\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-cardinality\", \"Cardinality\", lab, help);\n}\n\nHTMLPropertyHeaderViewer.prototype.getActionControlDOM = function(settingsDOM, renderer){\n\tif(renderer.showFeature(\"mode\")){\n\t\tvar viewsDOM = HTMLFrameHelper.getModeSelectorDOM(\"property\", renderer);\n\t\tif (viewsDOM) settingsDOM.appendChild(viewsDOM);\n\t}\n\tif(renderer.showFeature(\"delete\")){\n\t\tvar dpropDOM = this.getPropertyDeleteDOM(renderer);\n\t\tif (dpropDOM) settingsDOM.appendChild(dpropDOM);\n\t}\n\tif(renderer.showFeature(\"add\") && !renderer.isClassChoice()){\n\t\tvar addDOM = this.getAddValueDOM(renderer);\n\t\tif(addDOM) settingsDOM.appendChild(addDOM);\n\t}\n\tif(renderer.showFeature(\"reset\")){\n\t\tvar rpropDOM = this.getPropertyResetDOM(renderer);\n\t\tif(rpropDOM) settingsDOM.appendChild(rpropDOM);\n\t}\n\tif(renderer.showFeature(\"update\")){\n\t\tvar upropDOM = this.getPropertyUpdateDOM(renderer);\n\t\tif(upropDOM) settingsDOM.appendChild(upropDOM);\n\t}\n\tif(renderer.showFeature(\"show\")){\n\t\tvar showDOM = this.getPropertyShowDOM(renderer);\n\t\tif(showDOM) settingsDOM.appendChild(showDOM);\n\t}\n\tif(renderer.showFeature(\"hide\")){\n\t\tvar hideDOM = this.getPropertyHideDOM(renderer);\n\t\tif(hideDOM) settingsDOM.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"viewer\")){\n\t\tvar hideDOM = this.getViewerSelectorDOM(renderer);\n\t\tif(hideDOM) settingsDOM.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"add\") && renderer.isClassChoice()){\n\t\tvar addDOM = this.getAddValueDOM(renderer);\n\t\tif(addDOM) settingsDOM.appendChild(addDOM);\n\t}\n}\n\nHTMLPropertyHeaderViewer.prototype.getSettingsControlDOM = function(controlsDOM, renderer){\n\tvar settings = document.createElement(\"div\");\n\tcontrolsDOM.appendChild(settings);\n\tvar orientation = renderer.getContentOrientation();\n\tif(false && orientation == 'page'){ // expert mode\n\t\tvar sControl = HTMLFrameHelper.getSettingsControl('property');\n\t\tvar menu = document.createElement('div');\n\t\tmenu.setAttribute('class', 'terminus-hide terminus-popup');\n\t\tmenu.appendChild(document.createTextNode('Edit property'));\n\t\tmenu.appendChild(document.createElement('BR'));\n\t\tsControl.appendChild(menu);\n\t\tsControl.addEventListener('click', function(e){\n\t\t\tvar target = e.target || e.srcElement,\n        \ttext = target.textContent || target.innerText;\n\t\t\tif((target.nodeName == 'ICON') || (target.nodeName == 'BUTTON')){\n\t\t\t\tif(this.children[0].style.display == 'none') this.children[0].style.display = 'block';\n\t\t\t\telse this.children[0].style.display = 'none';\n\t\t\t}\n\t\t});\n\t\tthis.getActionControlDOM(menu, renderer);\n\t    settings.appendChild(sControl);\n\t\treturn menu;\n\t}\n\telse this.getActionControlDOM(controlsDOM, renderer);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyControlsDOM = function(wrapper, renderer){\n\tvar controlsDOM = document.createElement(\"span\");\n\tcontrolsDOM.setAttribute(\"class\", \"terminus-property-controls\");\n\t//controlsDOM.setAttribute(\"style\", \"display: table-cell;\");\n\t// get settings icon or button\n\tvar expModeMenu = this.getSettingsControlDOM(controlsDOM, renderer);\n\twrapper.appendChild(controlsDOM);\n\treturn expModeMenu;\n}\n\nHTMLPropertyHeaderViewer.prototype.getAddValueDOM = function(renderer){\n\tif(renderer.isClassChoice()){\n\t\tvar cs = renderer.getAvailableClassChoices();\n\t\tif(cs && cs.length){\n\t\t\tvar mpropDOM = document.createElement(\"span\");\n\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-add-class\");\n\t\t\tcs.unshift({ value: \"\", label: \"Add Type\"});\n\t\t\tvar callback = function(cls){\n\t\t\t\tif(cls){\n\t\t\t\t\trenderer.addClass(cls);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"add-property\", cs, \"\", callback);\n\t\t\tmpropDOM.appendChild(sel);\n\t\t\treturn mpropDOM;\n\t\t}\n\t}\n\telse {\n\t\tvar callback = function(){renderer.add(\"edit\")};\n\t\tvar disabled = (renderer.cardControlAllows(\"add\") ? false : \"Cardinality Rules Forbid Add\");\n\t\treturn HTMLFrameHelper.getActionControl(\"property\", \"add\", \"Add\", callback, disabled);\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.getViewValueDOM = function(renderer){\n\tvar viewables = renderer.getViewableValues();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-view-value\");\n\t\tviewables.unshift({ value: \"\", label: \"View Value\"});\n\t\tvar callback = function(val){\n\t\t\trenderer.goToValue(val);\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"view-values\", viewables, \"\", callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyDeleteDOM = function(renderer){\n\tvar callback = function(){renderer.delete()};\n\tvar disabled = (renderer.cardControlAllows(\"delete\") ? false : \"Cardinality Rules Forbid Delete\");\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"delete\", \"Delete\", callback, disabled);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyHideDOM = function(renderer){\n\tvar callback = function(){renderer.hide()};\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"hide\", \"Hide\", callback);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyResetDOM = function(renderer){\n\tvar callback = function(){renderer.reset()};\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to reset\");\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"reset\", \"Reset\", callback, disabled);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyShowDOM = function(renderer){\n\tvar callback = function(){renderer.show()};\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"show\", \"Show\", callback);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyUpdateDOM = function(renderer){\n\tvar dpropDOM = document.createElement(\"span\");\n\tdpropDOM.setAttribute(\"class\", \"terminus-property-update\");\n\tvar disabled = (renderer.isUpdated() ? false : \"No Change\");\n\tvar saveback = function(){renderer.save()};\n\tdpropDOM.appendChild(HTMLFrameHelper.getActionControl(\"property\", \"save\", \"Save\", saveback, disabled));\n\treturn dpropDOM;\n}\n\nHTMLPropertyHeaderViewer.prototype.getViewerSelectorDOM = function(renderer){\n\tvar viewers = renderer.getAvailableViewers();\n\tif(viewers && viewers.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-viewer\");\n\t\tvar callback = function(viewer){\n\t\t\tif(viewer){\n\t\t\t\trenderer.setViewer(viewer);\n\t\t\t}\n\t\t}\n\t\tvar selected = renderer.currentViewer();\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"property-viewers\", viewers, selected, callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.showValue = function(renderer, index){\n\tvar htmlid = renderer.subject() + \"->\" + renderer.property() + \"_\" + index;\n\twindow.location = (\"\"+window.location).replace(/#[A-Za-z0-9_]*$/,'') + \"#\" + htmlid;\n}\n\nfunction HTMLDataViewer(){\n}\n\nmodule.exports=HTMLPropertyViewer;\n","/**\n * Draws the property as header and body components\n */\nconst HTMLFrameHelper = require('../HTMLFrameHelper');\nconst HTMLStringViewer = require('../datatypes/String');\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nfunction HTMLDataViewer(){\n}\n\nHTMLDataViewer.prototype.render = function(renderer){\n\tthis.headerViewer = new HTMLDataHeaderViewer();\n\tif(this.valDOM){\n\t\tvar nvalDOM = this.getValueDOM();\n\t\tthis.valDOM.replaceWith(nvalDOM);\n\t\tthis.valDOM = nvalDOM;\n\t}\n\telse {\n\t\tthis.valDOM = this.getValueDOM();\n\t}\n\tthis.valDOM.appendChild(this.getValueIDMarker(this.renderer));\n\tthis.body = this.getValueBodyDOM();\n\tif(this.body) this.valDOM.appendChild(this.body);\n\tif(this.headerViewer){\n\t\tthis.header = this.headerViewer.getAsDOM(this.renderer);\n\t\tif(this.renderer.facet == 'page'){ //expert mode\n\t\t\tif(this.header && this.expModeMenu) {\n\t\t\t\tthis.expModeMenu.appendChild(this.header);\n\t\t\t\t//this.valDOM.appendChild(this.expModeMenu);\n\t\t\t}\n\t\t}\n\t\telse if(this.header) this.valDOM.appendChild(this.header);\n\t}\n\treturn this.valDOM;\n}\n\nHTMLDataViewer.prototype.getValueDOM = function(){\n\tif(this.renderer.currentFacet() == \"page\"){\n\t\tvar sp = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar sp = document.createElement(\"span\");\n\t}\n\tsp.setAttribute(\"class\", \"terminus-property-value property-value-\" + this.renderer.currentFacet() + \" property-value-\" + this.renderer.mode);\n\tif(this.renderer.mode == \"view\"){\n\t\tsp.setAttribute('data-value', this.renderer.value());\n\t}\n\treturn sp;\n}\n\nHTMLDataViewer.prototype.getValueBodyDOM = function(){\n\tif(this.renderer.currentFacet() == \"page\"){\n\t\tvar vholder = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar vholder = document.createElement(\"span\");\n\t}\n    vholder.setAttribute('class', ' terminus-property-body property-value-body property-value-body-'+this.renderer.currentFacet() + ' terminus-property-body-align');\n\t//vholder.setAttribute('style', 'display: flex;');\n\tif(this.renderer.showFeature(\"body\")){\n        var valueViewer = this.renderer.getDataValueViewer();\n    \tvar vdom = valueViewer.getDOM(this.renderer, this);\n    }\n    else if(this.renderer.showFeature(\"summary\")){\n\t\tvar vdom = this.getSummaryDOM();\n    }\n    else {\n    \treturn false;\n    }\n    if(vdom) vholder.appendChild(vdom);\n\tif(false && this.renderer.currentFacet() == \"page\"){\n\t\tvar sControl = HTMLFrameHelper.getSettingsControl('data');\n\t\tvar menu = document.createElement('div');\n\t\tmenu.setAttribute('class', 'terminus-hide terminus-popup');\n\t\tmenu.appendChild(document.createTextNode('Edit property value'));\n\t\tmenu.appendChild(document.createElement('BR'));\n\t\tsControl.appendChild(menu);\n\t\tsControl.addEventListener('click', function(e){\n\t\t\tvar target = e.target || e.srcElement,\n\t\t\ttext = target.textContent || target.innerText;\n\t\t\tif((target.nodeName == 'ICON') || (target.nodeName == 'BUTTON')){\n\t\t\t\tif(this.children[0].style.display == 'none') this.children[0].style.display = 'block';\n\t\t\t\telse this.children[0].style.display = 'none';\n\t\t\t}\n\t\t});\n\t\tthis.expModeMenu = menu;\n\t\tvholder.appendChild(sControl);\n\t}\n\treturn vholder;\n}\n\n/**\n * Removes the value from the dom\n */\nHTMLDataViewer.prototype.remove = function(){\n\tthis.valDOM.parentNode.removeChild(this.valDOM);\n}\n\nHTMLDataViewer.prototype.redrawHeader = function(){\n\tif(this.headerViewer && this.header) {\n\t\tvar nheader = this.headerViewer.getAsDOM(this.renderer);\n\t\tthis.header.replaceWith(nheader);\n\t\tthis.header = nheader;\n\t}\n}\n\nHTMLDataViewer.prototype.redrawBody = function(){\n\tif(this.body){\n\t\tvar nbody = this.getValueBodyDOM();\n\t\tthis.body.replaceWith(nbody);\n\t\tthis.body = nbody;\n\t}\n}\n\n/**\n * Generates a html anchor element to use as a marker to find the property on the page\n */\nHTMLDataViewer.prototype.getValueIDMarker = function(renderer){\n\tvar idm = document.createElement(\"a\");\n\tidm.setAttribute(\"class\", \"terminus-value-idmarker\");\n\tvar subj = TerminusClient.FrameHelper.getShorthand(renderer.subject());\n\tif(!subj ) subj = renderer.subject();\n\tvar bits = subj .split(\":\");\n\tif(bits.length > 1) subj = bits[1];\n\tvar prop = TerminusClient.FrameHelper.getShorthand(renderer.property());\n\tif(!prop ) prop = renderer.property();\n\tvar bits = prop.split(\":\");\n\tif(bits.length > 1) prop = bits[1];\n\tidm.setAttribute(\"name\", subj + \"_\" + prop + \"_\" + renderer.index);\n\treturn idm;\n}\n\nHTMLDataViewer.prototype.getSummaryDOM = function(){\n\tvar sum = this.renderer.getSummary();\n\treturn HTMLTerminusClient.FrameHelper.getInfoboxDOM(\"value-summary\", false, sum.long, sum.long);\n}\n\nHTMLDataViewer.prototype.fireInternalLink = function(link){\n\tvar self = this;\n\tvar fire = function(e){\n\t\te.preventDefault();\n\t\tself.renderer.load(link);\t\t\n\t}\n\treturn fire;\n}\n\nHTMLDataViewer.prototype.internalLink = function(link, label){\n\tvar onclick = this.fireInternalLink(link);\n\tvar a = document.createElement(\"a\");\n\ta.onClick = onclick;\n\ta.href=link;\n\ta.addEventListener(\"click\", onclick);\n\tif(label){\n\t\ta.appendChild(document.createTextNode(label));\n\t}\n\telse {\n\t\tvar sh = TerminusClient.FrameHelper.getShorthand(link);\n\t\tif(sh){\n\t\t\ta.setAttribute(\"title\", link);\n\t\t\ta.appendChild(document.createTextNode(sh));\n\t\t}\n\t\telse {\n\t\t\ta.appendChild(document.createTextNode(link));\n\t\t}\n\t}\n\treturn a;\n}\n\nHTMLDataViewer.prototype.clear = function(){\n\tTerminusClient.FrameHelper.removeChildren(this.valDOM);\n}\n\n\nfunction HTMLDataHeaderViewer(){}\n\nHTMLDataHeaderViewer.prototype.getAsDOM = function(renderer){\n\tif(renderer.currentFacet() == \"page\"){\n\t\tvar objDOM = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar objDOM = document.createElement(\"span\");\n\t}\n\tobjDOM.setAttribute(\"class\", \"terminus-value-header terminus-value-header-\" + renderer.currentFacet());\n\tif(renderer.showFeature(\"facet\")){\n\t\tvar facetDOM = this.getValueFacetDOM(renderer);\n\t\tif(facetDOM) objDOM.appendChild(facetDOM);\n\t}\n\tif(renderer.showFeature(\"viewer\")){\n\t\tvar hideDOM = this.getViewerSelectorDOM(renderer);\n\t\tif(hideDOM) objDOM.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"type\")){\n\t\tvar typeDOM = this.getValueTypeDOM(renderer);\n\t\tif(typeDOM) objDOM.appendChild(typeDOM);\n\t}\n\tif(renderer.showFeature(\"status\")){\n\t\tvar sumDOM = this.getValueStatusDOM(renderer);\n\t\tif(sumDOM) objDOM.appendChild(sumDOM);\n\t}\n\tif(renderer.showFeature(\"control\")){\n\t\tvar controlsDOM = this.getValueControlsDOM(renderer);\n\t\tif(controlsDOM) objDOM.appendChild(controlsDOM);\n\t}\n\treturn objDOM;\n}\n\nHTMLDataHeaderViewer.prototype.getValueFacetDOM = function(renderer){\n\tvar viewables = renderer.getAvailableFacets();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-value-facet\");\n\t\tvar callback = function(val){\n\t\t\tif(val){\n\t\t\t\trenderer.setFacet(val);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"value-facet\", viewables, renderer.currentFacet(), callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\n\nHTMLDataHeaderViewer.prototype.getValueTypeDOM = function(renderer){\n\treturn HTMLFrameHelper.getInfoboxDOM(\"value-type\", \"Type\", renderer.type(), \"All data values have types, identified by a unique URL\");\n}\n\nHTMLDataHeaderViewer.prototype.getValueStatusDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"status-\"+sum.status, false, sum.status, sum.status);\n}\n\n\nHTMLDataHeaderViewer.prototype.getValueControlsDOM = function(renderer){\n\tvar controlsDOM = document.createElement(\"span\");\n\tcontrolsDOM.setAttribute(\"class\", \"terminus-value-controls\");\n\tif(renderer.showFeature(\"mode\")){\n\t\tvar viewsDOM = HTMLFrameHelper.getModeSelectorDOM(\"value\", renderer);\n\t\tif(viewsDOM) controlsDOM.appendChild(viewsDOM);\n\t}\n\tif(renderer.showFeature(\"delete\")){\n\t\tvar dpropDOM = this.getValueDeleteDOM(renderer);\n\t\tif(dpropDOM) controlsDOM.appendChild(dpropDOM);\n\t}\n\tif(renderer.showFeature(\"clone\")){\n\t\tvar cpropDOM = this.getValueCloneDOM(renderer);\n\t\tif(cpropDOM) controlsDOM.appendChild(cpropDOM);\n\t}\n\tif(renderer.showFeature(\"reset\")){\n\t\tvar rpropDOM = this.getValueResetDOM(renderer);\n\t\tif(rpropDOM) controlsDOM.appendChild(rpropDOM);\n\t}\n\tif(renderer.showFeature(\"update\")){\n\t\tvar upropDOM = this.getValueUpdateDOM(renderer);\n\t\tif(upropDOM) controlsDOM.appendChild(upropDOM);\n\t}\n\tif(renderer.showFeature(\"show\")){\n\t\tvar showDOM = this.getValueShowDOM(renderer);\n\t\tif(showDOM) controlsDOM.appendChild(showDOM);\n\t}\n\tif(renderer.showFeature(\"hide\")){\n\t\tvar hideDOM = this.getValueHideDOM(renderer);\n\t\tif(hideDOM) controlsDOM.appendChild(hideDOM);\n\t}\n\treturn controlsDOM;\n}\n\nHTMLDataHeaderViewer.prototype.getValueDeleteDOM = function(renderer){\n\tvar callback = function(){renderer.delete()};\n\tvar disabled = (renderer.cardControlAllows(\"delete\") ? false : \"Cardinality Rules Forbid Delete\");\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"delete\", \"Delete\", callback, disabled);\n}\n\nHTMLDataHeaderViewer.prototype.getValueResetDOM = function(renderer){\n\tvar callback = function(){renderer.reset()};\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to reset\");\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"reset\", \"Reset\", callback, disabled);\n}\n\nHTMLDataHeaderViewer.prototype.getValueShowDOM = function(renderer){\n\tvar callback = function(){renderer.show()};\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"show\", \"Show\", callback);\n}\n\nHTMLDataHeaderViewer.prototype.getValueHideDOM = function(renderer){\n\tvar callback = function(){renderer.hide()};\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"hide\", \"Hide\", callback);\n}\n\nHTMLDataHeaderViewer.prototype.getValueCloneDOM = function(renderer){\n\tvar callback = function(){renderer.clone()};\n\tvar disabled = (renderer.cardControlAllows(\"clone\") ? false : \"Cardinality Rules Forbid Clone\");\n\treturn HTMLFrameHelper.getActionControl(\"value\", \"clone\", \"Clone\", callback, disabled);\n}\n\nHTMLDataHeaderViewer.prototype.getValueUpdateDOM = function(renderer){\n\tvar dpropDOM = document.createElement(\"span\");\n\tdpropDOM.setAttribute(\"class\", \"terminus-value-update\");\n\tvar saveback = function(){renderer.save()};\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to save - no change\");\n\tdpropDOM.appendChild(HTMLFrameHelper.getActionControl(\"value\", \"save\", \"Save\", saveback, disabled));\n\treturn dpropDOM;\n}\n\nHTMLDataHeaderViewer.prototype.getViewerSelectorDOM = function(renderer){\n\tvar viewers = renderer.getAvailableViewers();\n\tif(viewers && viewers.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-value-viewer\");\n\t\tvar callback = function(viewer){\n\t\t\tif(viewer){\n\t\t\t\trenderer.setViewer(viewer);\n\t\t\t}\n\t\t}\n\t\tvar selected = renderer.currentViewer();\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"data-viewer\", viewers, selected, callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nmodule.exports=HTMLDataViewer;\n","/* User interface elements that relate to server context\n *\n * TerminusServerController is a control widget that invokes server actions\n * TerminusServerViewer is a window that displays server actions and server screens\n *\n */\n const Datatables = require('./plugins/datatables.terminus');\n const UTILS =require('./Utils');\n const HTMLFrameHelper = require('./html/HTMLFrameHelper');\n \n const TerminusClient = require('@terminusdb/terminus-client');\n\n function TerminusServerController(ui){\n\t this.ui = ui;\n }\n\nTerminusServerController.prototype.getAsDOM = function(){\n\tvar rsc = document.createElement(\"div\");\n\trsc.setAttribute(\"class\", \"terminus-server-controller\");\n\tvar self = this;\n\tif(this.ui && this.ui.server()){\n\t\tvar scd = document.createElement(\"div\");\n\t\tscd.setAttribute(\"class\", \"terminus-server-connection\");\n        var nav = document.createElement('div');\n        nav.setAttribute('class', 'span3');\n        var ul = document.createElement('ul');\n        ul.setAttribute('class', 'terminus-ul');\n        nav.appendChild(ul);\n        rsc.appendChild(nav);\n        // connected to server\n        // change server\n        if(this.ui.showControl(\"change-server\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n                UTILS.activateSelectedNav(this, self);\n                self.ui.showLoadURLPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-link');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Change Server');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n        // view databases\n        if(this.ui.showControl(\"db\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n                UTILS.activateSelectedNav(this, self);\n                if(self.ui.db()){\n                    self.ui.clearDB();\n\t\t\t\t\tself.ui.redrawControls();\n                }\n                self.ui.showServerMainPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-home');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Home');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n\t\tif(this.ui.showControl(\"create_database\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n               UTILS.activateSelectedNav(this, self);\n                if(self.ui.db()){\n                    self.ui.clearDB();\n\t\t\t\t\tself.ui.redrawControls();\n                }\n                self.ui.showCreateDBPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-plus');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Create Database');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n        if(this.ui.showControl(\"collaborate\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n               UTILS.activateSelectedNav(this, self);\n                if(self.ui.db()){\n                    self.ui.clearDB();\n\t\t\t\t\tself.ui.redrawControls();\n                }\n                self.ui.showCollaboratePage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-share-alt');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Collaborate');\n            a.appendChild(txt);\n            ul.appendChild(a);\n\t\t}\n\t}\n\treturn rsc;\n}\n\nTerminusServerController.prototype.getServerLabelDOM = function(){\n\tvar srec = this.ui.client.connection.getServerRecord();\n\tvar lab = (srec && srec['rdfs:label'] && srec['rdfs:label'][\"@value\"] ? srec['rdfs:label'][\"@value\"] : this.ui.server());\n\tvar desc = (srec && srec['rdfs:comment'] && srec['rdfs:comment'][\"@value\"] ? srec['rdfs:comment'][\"@value\"] : \"\");\n\tdesc += \" Server URL: \"+ this.ui.server();\n\tvar val = document.createElement(\"span\");\n\tval.setAttribute(\"class\", \"terminus-server-value\");\n\tval.setAttribute(\"title\", desc);\n\tval.appendChild(document.createTextNode(lab));\n    val =  document.createElement('div');\n\treturn val;\n}\n\nfunction TerminusServerViewer(ui){\n\tthis.ui = ui;\n\tthis.server = this.ui.server();\n\tthis.max_cell_size = 500;\n\tthis.max_word_size = 40;\n}\n\nTerminusServerViewer.prototype.getAsDOM = function(selected){\n\tvar self = this;\n\tvar pd = document.createElement(\"span\");\n\tpd.setAttribute(\"class\", \"terminus-server-home-page\");\n\tif(this.ui.server()){\n\t\tvar scd = document.createElement(\"span\");\n\t\tscd.setAttribute(\"class\", \"terminus-server-home\");\n\t\tif(this.ui.showView(\"server\")){\n\t\t\t// 11092019 scd.appendChild(this.getServerDetailsDOM());\n\t\t}\n\t\tif(this.ui.showView(\"change-server\")){\n\t\t\tvar csbut = document.createElement(\"button\");\n\t\t\tcsbut.setAttribute(\"class\", \"terminus-control-button terminus-change-server-button terminus-btn\")\n\t\t\tcsbut.appendChild(document.createTextNode(\"Disconnect\"));\n\t\t\tcsbut.addEventListener(\"click\", function(){\n\t\t\t\t//self.ui.clearDB();\n\t\t\t\t//self.ui.clearServer();\n\t\t\t\tself.ui.showLoadURLPage();\n\t\t\t})\n\t\t\t// 11092019 scd.appendChild(csbut);\n\t\t}\n\t\tif(this.ui.showView(\"create_database\")){\n\t\t\tvar crbut = document.createElement(\"button\");\n\t\t\tcrbut.setAttribute(\"class\", \"terminus-control-button terminus-create-db-button terminus-btn\")\n\t\t\tcrbut.appendChild(document.createTextNode(\"Create New Database\"));\n\t\t\tcrbut.addEventListener(\"click\", function(){\n\t\t\t\tif(self.ui.db()){\n\t\t\t\t\t//self.ui.clearDB();\n\t\t\t\t}\n\t\t\t\tself.ui.clearMessages();\n\t\t\t\tself.ui.showCreateDBPage();\n\t\t\t})\n\t\t\t// 11092019 scd.appendChild(crbut);\n\t\t}\n\t\tif(this.ui.showView(\"db\")){\n\t\t\t//scd.appendChild(this.getNDBListDOM());\n\t\t\tscd.appendChild(this.getDBListDOM());\n\t\t}\n\t\tpd.appendChild(scd);\n\t}\n\telse {\n\t\tself.ui.showLoadURLPage();\n\n\t\t//pd.appendChild(this.getLoadURLPage());\n\t}\n\treturn pd;\n}\n\nTerminusServerViewer.prototype.getServerDetailsDOM = function(){\n\tvar scd = document.createElement(\"span\");\n\tscd.setAttribute(\"class\", \"terminus-server-details terminus-server-banner\");\n\tvar scl = document.createElement(\"span\");\n\tscl.setAttribute(\"class\", \"terminus-label terminus-server-info\");\n\tscl.appendChild(document.createTextNode(\"Connected to Server - \"))\n\tvar scs = document.createElement(\"span\");\n\tscs.setAttribute(\"class\", \"terminus-value terminus-server-info\");\n\tscs.appendChild(document.createTextNode(this.ui.server()))\n\tscd.appendChild(scl);\n\tscd.appendChild(scs);\n\treturn scd;\n}\n\nTerminusServerViewer.prototype.wrapTableLinkCell = function(tdElement,dbid, text){\n\tvar self = this;\n\tvar wrap = document.createElement(\"p\");\n//\twrap.setAttribute(\"href\", \"#\");\n\twrap.setAttribute(\"class\", \"terminus-table-content\");\n\tHTMLFrameHelper.wrapShortenedText(wrap, text, this.max_cell_size, this.max_word_size);\n\ttdElement.addEventListener(\"click\", function(){\n\t\tself.ui.connectToDB(dbid);\n\t\tself.ui.showDBMainPage();\n\t});\n\treturn wrap;\n}\n\nTerminusServerViewer.prototype.getNDBListDOM = function(){\n\tvar whtml = new TerminusHTMLViewer(this.ui.client);\n\tvar dbrecs = this.ui.client.connection.getServerDBRecords();\n\n\t//var tab = whtml.table();\n}\n\nTerminusServerViewer.prototype.getDBListDOM = function(){\n\tvar self = this;\n\tvar sec = document.createElement(\"div\");\n\tsec.appendChild(UTILS.getHeaderDom('Available Databases'));\n\tvar scd = document.createElement(\"table\");\n\tscd.setAttribute(\"class\", \"terminus-db-list terminus-db-size terminus-hover-table terminus-margin-top\");\n\tvar thead = document.createElement(\"thead\");\n\tvar thr = document.createElement(\"tr\");\n\tvar th1 = document.createElement(\"th\");\n\tth1.appendChild(document.createTextNode(\"ID\"));\n\tth1.setAttribute(\"class\", \"terminus-db-id terminus-table-header-full-css\");\n\tvar th2 = document.createElement(\"th\");\n\tth2.appendChild(document.createTextNode(\"Title\"));\n\tth2.setAttribute(\"class\", \"terminus-db-title terminus-table-header-full-css\");\n\tvar th3 = document.createElement(\"th\");\n\tth3.appendChild(document.createTextNode(\"Description\"));\n\tth3.setAttribute(\"class\", \"terminus-db-description terminus-table-header-full-css\");\n\tvar th4 = document.createElement(\"th\");\n\tth4.setAttribute(\"class\", \"terminus-db-size terminus-table-header-full-css\");\n\tth4.appendChild(document.createTextNode(\"Size\"));\n\tvar th5 = document.createElement(\"th\");\n\tth5.setAttribute(\"class\", \"terminus-db-created terminus-table-header-full-css\");\n\tth5.appendChild(document.createTextNode(\"Created\"));\n\tvar th6 = document.createElement(\"th\");\n\tth6.appendChild(document.createTextNode(\"Delete\"));\n\tth6.setAttribute(\"class\", \"terminus-db-delete terminus-table-header-full-css\");\n\tthr.appendChild(th1);\n\tthr.appendChild(th2);\n\tthr.appendChild(th3);\n\t//thr.appendChild(th4);\n\t//thr.appendChild(th5);\n\tthr.appendChild(th6);\n\tthead.appendChild(thr);\n\tscd.appendChild(thead);\n\tvar tbody = document.createElement(\"tbody\");\n\tvar dbrecs = this.ui.client.connection.getServerDBRecords();\n\tfor(let fullid in dbrecs){\n\t\tlet dbrec = dbrecs[fullid];\n\t\tconst dbid = fullid.split(\":\")[1];\n\t\tlet tr = document.createElement(\"tr\");\n\t\tvar td1 = document.createElement(\"td\");\n\t\ttd1.appendChild(this.wrapTableLinkCell(td1,dbid, dbid));\n\t\ttd1.setAttribute(\"class\", \"terminus-db-id terminus-db-pointer\");\n\t\tvar td2 = document.createElement(\"td\");\n\t\ttd2.setAttribute(\"class\", \"terminus-db-title terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['rdfs:label'] && dbrec['rdfs:label']['@value'] ? dbrec['rdfs:label']['@value'] : \"\");\n\t\ttd2.appendChild(this.wrapTableLinkCell(td2,dbid, txt));\n\t\tvar td3 = document.createElement(\"td\");\n\t\ttd3.setAttribute(\"class\", \"terminus-db-description terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['rdfs:comment'] && dbrec['rdfs:comment']['@value'] ? dbrec['rdfs:comment']['@value'] : \"\");\n\t\ttd3.appendChild(this.wrapTableLinkCell(td3,dbid, txt));\n\t\tvar td4 = document.createElement(\"td\");\n\t\ttd4.setAttribute(\"class\", \"terminus-db-size terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['terminus:size'] && dbrec['terminus:size']['@value'] ? dbrec['terminus:size']['@value'] : \"\");\n\t\ttd4.appendChild(this.wrapTableLinkCell(td4,dbid, txt));\n\t\tvar td5 = document.createElement(\"td\");\n\t\ttd5.setAttribute(\"class\", \"terminus-db-created terminus-db-pointer\");\n\t\tvar txt = (dbrec && dbrec['terminus:last_updated'] && dbrec['terminus:last_updated']['@value'] ? dbrec['terminus:last_updated']['@value'] : \"\");\n\t\ttd5.appendChild(this.wrapTableLinkCell(td5,dbid, txt));\n\t\tvar td6 = document.createElement(\"td\");\n\t\ttd6.setAttribute(\"class\", \"db-delete\");\n\t\tvar delbut = this.ui.getDeleteDBButton(dbid);\n\t\tif(delbut) td6.appendChild(delbut);\n\n\t\ttr.appendChild(td1);\n\t\ttr.appendChild(td2);\n\t\ttr.appendChild(td3);\n\t\t//tr.appendChild(td4);\n\t\t//tr.appendChild(td5);\n\t\ttr.appendChild(td6);\n\t\ttbody.appendChild(tr);\n\t}\n\tscd.appendChild(tbody);\n\tsec.appendChild(scd);\n\n\tif(this.ui.pluginAvailable(\"datatables\")){\n        var dt = new Datatables.CspDatatables(this.ui);\n\t\tvar tab = dt.draw(scd);\n\t}\n\treturn sec;\n}\n\n\nmodule.exports = {TerminusServerViewer,TerminusServerController}\n","const TerminusClient = require('@terminusdb/terminus-client');\nconst HTMLFrameHelper = require('../html/HTMLFrameHelper');\nconst UTILS= require('../Utils')\n\n/*** client side processing ***/\nfunction CspDatatables(ui){\n    this.ui = ui;\n}\n\nCspDatatables.prototype.convertToDatatable = function(tab){\n    var dt = this;\n    var table = jQuery(tab).DataTable({\n         searching : false,\n         pageLength: 25,\n         lengthMenu: [10, 25, 50, 75, 100],\n         paging    : true,\n         select    : true,\n         initComplete: function(settings) {\n                        var ict =settings.oInstance.api();\n                        ict.$('td').each(function(){\n                            this.setAttribute('title', $(this).html())\n                        })},\n         columnDefs:[{targets:'_all',className:\"truncate\"}],\n         createdRow: function(row) {\n                            var td = $(row).find(\".truncate\");\n                            td.attr(\"title\", td.html());}\n    }); //jQuery(tab)\n\n    // on click of row connect to db, on click of 5th column delete db\n    jQuery(tab, 'tbody').on('click', 'td', function(){\n        if(table.cell(this).index().column == 5){\n            var dbInfo = table.row(jQuery(this).parents('tr')).data();\n            var dbId = UTILS.extractValueFromCell(dbInfo[0]);\n            dt.ui.deleteDatabase(dbId);\n            return;\n        }\n        else dt.ui.showDBMainPage();\n     }); // on click\n\n    tab.setAttribute('class'      , 'stripe dataTable terminus-db-size');\n    tab.setAttribute('cellpadding', '1');\n    tab.setAttribute('cellspacing', '0');\n    tab.setAttribute('border'     , '0');\n    return tab;\n}\n\nCspDatatables.prototype.draw = function(dtResult){\n    return(this.convertToDatatable(dtResult));\n}\n\n/*** server side processing ***/\nfunction Datatables(wResViewer, qPage){\n   this.wrViewer = wResViewer;\n   this.wQuery = wResViewer.wQuery;\n   this.ui = wResViewer.ui;\n   this.qPage = qPage;\n   this.currDTSettings = wResViewer.settings;\n}\n\n/*\n    query: new woqlquery with current pagination changes\n    pageInfo: current drawCallBack page change info\n    resultDOM: result dom on veiwer page\n*/\nDatatables.prototype.executeQuery = function(qObj, pageInfo, resultDOM){\n    var self = this;\n    // return this.wQuery.execute(query)\n    return qObj.execute(this.ui.client)\n    .then(function(result){\n      var dtResult = {};\n      var wqRes = new TerminusClient.WOQLResult(result, qObj);\n      dtResult = self.wrViewer.formatResultsForDatatableDisplay(result.bindings, pageInfo)\n      return dtResult.data;\n    })\n    .catch(function(err){\n      console.error(err);\n      self.ui.showError(err);\n    });\n}\n\n/* get query string based on datatable pagination and current query */\n/*Datatables.prototype.getQueryOnPagination = function(wq, settings){\n    switch(settings.query){\n        case 'Show_All_Documents':\n            return wq.getAllDocumentQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Data':\n            return wq.getEverythingQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Schema_Elements':\n            return wq.getElementMetaDataQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_Document_Classes':\n        \tvar sqp = wq.getConcreteDocumentClassPattern(\"Class\");\n            return wq.getClassMetaDataQuery(sqp);\n        break;\n        case 'Show_All_Properties':\n            return wq.getPropertyListQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Classes':\n            return wq.getClassMetaDataQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_Data_Class':\n            return  wq.getDataOfChosenClassQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        case 'Show_Property_Class':\n            return wq.getDataOfChosenPropertyQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        case 'Show_Document_Info_by_Id':\n            return wq.getDocumentQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Document_classes':\n            return wq.getClassesQuery(settings.pageLength, settings.start);\n        break;\n        default:\n            console.log('Invalid woql option passed');\n        break;\n\n    }\n}   */\n/*\n    pageInfo: current drawCallBack page change info\n*/\nDatatables.prototype.generateNewQueryOnPageChange = function(pageInfo){\n    if(this.qPage) UTILS.deleteStylizedEditor(this.ui, pageInfo.qTextDom);\n    var qObj = UTILS.getCurrentWoqlQueryObject(null, pageInfo);\n    //var query = this.getQueryOnPagination(this.wQuery, pageInfo)\n    if(this.qPage) {\n        if(pageInfo.queryMode.value == 'woql')\n            pageInfo.qTextDom.value = JSON.stringify(qObj.prettyPrint(), undefined, 2);\n        else pageInfo.qTextDom.value = JSON.stringify(qObj, undefined, 2);\n        UTILS.stylizeEditor(this.ui, pageInfo.qTextDom, 'query', 'javascript');\n    }\n    //return query;\n    return qObj;\n}\n\n/*\n    dt: Datatable reference\n    len : current number of records to display\n*/\nDatatables.prototype.getCallbackSettings = function(dt, dtAPIChangeSettings){\n    var pageInfo = {};\n    pageInfo.pageLength  = dtAPIChangeSettings._iDisplayLength;\n    pageInfo.start       = dtAPIChangeSettings._iDisplayStart;\n    pageInfo.draw        = dtAPIChangeSettings.iDraw;\n    pageInfo.qTextDom    = dt.qTextDom;\n    pageInfo.queryMode   = dt.queryMode;\n    if(this.qPage) pageInfo.query = dt.query;\n    else pageInfo.query = 'Show_All_Document_classes';\n    pageInfo.chosenValue = dt.chosenValue;\n    return pageInfo;\n}\n\n/*\n    tab: datatable table dom\n    settings : settings from woql txt generator\n    resultDOM: result dom of viewer\n*/\nDatatables.prototype.setUp = function(tab, settings, resultDOM){\n    // delete previous datatable\n    TerminusClient.FrameHelper.removeChildren(this.dtdom);\n    this.dtdom = document.createElement('div');\n    this.dtdom.appendChild(tab);\n    resultDOM.appendChild(this.dtdom);\n    // saving query text box dom to change limit value on change of datatable page length\n    this.qTextDom = settings.qTextDom;\n    this.query = settings.query;\n    this.chosenValue = settings.chosenValue;\n    this.queryMode = settings.queryMode;\n}\n\n// update datatables settings so it can be reused in WOQLTextboxGenerator to re write query in woql/ jsonld\nDatatables.prototype.updateCurrDTSettings = function(pageInfo){\n    this.currDTSettings.pageLength = pageInfo.pageLength;\n    this.currDTSettings.start      = pageInfo.start;\n}\n\nDatatables.prototype.getNewDataOnChange = function(drawnTab, aSettings, resultDOM){\n    var pageInfo = this.getCallbackSettings(this, aSettings);\n    this.updateCurrDTSettings(pageInfo);\n   // var query = this.generateNewQueryOnPageChange(pageInfo);\n    var qObj = this.generateNewQueryOnPageChange(pageInfo);\n    return this.executeQuery(qObj, pageInfo, resultDOM);\n    //return this.executeQuery(query, pageInfo, resultDOM);\n    //return  dtResult.result.data;\n}\n\nDatatables.prototype.getDataFromServer = function(dtResult, resultDOM){\n    var dt = this;\n    var tab = dtResult.tab;\n    this.setUp(tab, this.wrViewer.settings, resultDOM);\n    // initialize datatables\n    var table = jQuery(tab).DataTable({\n         searching   : false,\n         pageLength  : dt.wrViewer.settings.pageLength,\n         serverSide  : true,\n         processing  : true,\n         lengthMenu  : [25, 50, 75, 100],\n         dom         : 'RBlftip',\n         columns     : dtResult.result.columns,\n         paging      : true,\n         select      : true,\n         autoWidth   : true,\n         ajax        : function (data, callback, settings) {\n                            if(Object.entries(dtResult.result.data).length > 0){\n                                // first draw is loaded\n                                var res = dtResult.result.data;\n                                dtResult.result.data = {};\n                                callback(res);\n                            }\n                            else{\n                                dt.getNewDataOnChange(this, settings, resultDOM)\n                                    .then(function(result){\n                                     callback(result);\n                                })\n                            }\n                       },\n         buttons     : [{ extend: 'copy', text: 'Copy to clipboard' },\n                        { extend: 'excel', text: 'Export to Excel' }],\n         columnDefs  : [{ targets:'_all',\n                          className:\"truncate\"}],\n         createdRow  : function(row){\n                            var td = $(row).find(\".truncate\");\n                            td.attr(\"title\", td.html());},\n         scrollX     : true\n    }); //jQuery(tab)\n\n    // on click of doc\n    jQuery(tab, 'tbody').on('click', 'td', function(){\n        if(table.cell(this).data){\n            if(this.innerText.substring(0, 4) == \"doc:\"){\n                if(dt.wrViewer.result.ui) {\n        \t\t\tdt.wrViewer.result.ui.showDocument(this.innerText);\n        \t\t\tdt.wrViewer.result.ui.redraw();\n        \t\t\tdt.wrViewer.selectDocumentNavBar(dt.ui);\n        \t\t}\n            }\n        }\n     }); // on click\n\n    //styling\n    tab.setAttribute('class'      , 'stripe dataTable');\n    tab.setAttribute('style'      , 'margin: 0!important');\n    tab.setAttribute('cellpadding', '1');\n    tab.setAttribute('cellspacing', '1');\n    tab.setAttribute('border'     , '0');\n\n    return tab;\n}\n\n/*\nserverside: true or false\n*/\nDatatables.prototype.draw = function(dtResult, resultDOM){\n    return(this.getDataFromServer(dtResult, resultDOM));\n}\n\nmodule.exports={Datatables, CspDatatables}\n","const UTILS = require(\"./Utils.js\");\n\nfunction TerminusURLLoader(ui, val){\n\tthis.ui = ui;\n\tthis.val = val;\n\tthis.url_input = false;\n\tthis.key_input = false;\n}\n\nTerminusURLLoader.prototype.getLabelDOM = function(){\n\treturn document.createTextNode(\"Connect\");\n}\n\nTerminusURLLoader.prototype.getFormFieldDOM = function(ip, fname, ltxt, pholder){\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-horizontal terminus-control-group terminus-form-field-spacing terminus-display-flex terminus-field-\"+fname);\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"terminus-control-label terminus-form-label terminus-form-field-label terminus-label-\"+fname);\n\tlab.appendChild(document.createTextNode(ltxt))\n\tip.setAttribute(\"type\", \"text\");\n\tip.setAttribute(\"placeholder\", pholder);\n\tsci.appendChild(lab);\n\tsci.appendChild(ip);\n\treturn sci;\n}\n\nTerminusURLLoader.prototype.getAsDOM = function(){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-form terminus-url-loader\");\n\tscd.appendChild(UTILS.getHeaderDom('Connect To Terminus Server'));\n\tvar mfd = document.createElement('div');\n\tmfd.setAttribute('class', 'terminus-form-border terminus-margin-top');\n\tscd.appendChild(mfd);\n\tthis.url_input = document.createElement(\"input\");\n\tthis.url_input.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-form-field-input terminus-input-text\");\n\tif(this.val){\n\t\tthis.url_input.value = this.val;\n\t}\n\tvar dht = document.createElement('div');\n\tdht.setAttribute('class', 'terminus-form-margin-top');\n\tmfd.appendChild(dht);\n\tmfd.appendChild(this.getFormFieldDOM(this.url_input, \"connect\", \"URL\", \"Terminus DB URL\"));\n\tthis.key_input = document.createElement(\"input\");\n\tthis.key_input.setAttribute(\"class\", \"terminus-form-value terminus-value terminus-input-text\");\n\tmfd.appendChild(this.getFormFieldDOM(this.key_input, \"connect\", \"Key\", \"Server API Key\"));\n\tvar loadbuts = document.createElement(\"div\");\n\tloadbuts.setAttribute(\"class\", \"terminus-control-buttons\");\n\tvar loadbut = document.createElement(\"button\");\n\tloadbut.setAttribute(\"class\", \"terminus-control-button terminus-url-load terminus-btn terminus-btn-float-right\");\n\tloadbut.appendChild(document.createTextNode(\"Connect\"));\n\tvar self = this;\n\tloadbut.addEventListener(\"click\", function(){\n\t\tif(self.url_input.value){\n\t\t\tself.ui.load(self.url_input.value, self.key_input.value);\n\t\t}\n\t});\n\tloadbuts.appendChild(loadbut);\n\tmfd.appendChild(loadbuts);\n\treturn scd;\n}\n\n\nmodule.exports=TerminusURLLoader\n","const ObjectViewer= require(\"../html/document/ObjectViewer\")\nconst HTMLStringViewer = require('../html/datatypes/String');\nconst HTMLStringEditor = require('../html/datatypes/StringEditor');\nconst HTMLBooleanViewer = require('../html/datatypes/Boolean');\nconst HTMLBooleanEditor = require('../html/datatypes/BooleanEditor');\nconst HTMLChoiceViewer = require('../html/datatypes/Choice');\nconst HTMLChoiceEditor = require('../html/datatypes/ChoiceEditor');\nconst HTMLCoordinateViewer = require('../html/datatypes/Coordinate');\nconst HTMLCoordinateEditor = require('../html/datatypes/CoordinateEditor');\nconst HTMLDateViewer = require('../html/datatypes/Date');\nconst HTMLDateEditor = require('../html/datatypes/DateEditor');\nconst HTMLEntityViewer = require('../html/datatypes/Entity');\nconst HTMLEntityEditor = require('../html/datatypes/EntityEditor');\nconst HTMLImageViewer = require('../html/datatypes/Image');\nconst HTMLImageEditor = require('../html/datatypes/ImageEditor');\nconst HTMLLinkViewer = require('../html/datatypes/Link');\nconst HTMLNumberViewer = require('../html/datatypes/Number');\nconst HTMLRangeViewer = require('../html/datatypes/Range');\nconst HTMLRangeEditor = require('../html/datatypes/RangeEditor');\n//const SantizedHTMLViewer = require('../html/datatypes/SanitizedHTML');\nconst GoogleMapEditor = require('../html/datatypes/GoogleMapEditor');\nconst GoogleMapViewer = require('../html/datatypes/GoogleMapViewer');\nconst HTMLMarkupEditor = require('../html/datatypes/HTMLMarkupEditor');\nconst S2EntityEditor = require('../html/datatypes/S2EntityEditor');\nconst TerminusClient = require('@terminusdb/terminus-client');\n\nlet RenderingMap = {\n\tregisteredDataViewers: {},\n\tregisteredDataEditors: {},\n\tgetValidDataViewerList: function(type, frametype){\n\t\tvar valids = ['HTMLStringViewer'];\n\t\tif(frametype && typeof this.registeredDataViewers[frametype] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredDataViewers[frametype]);\n\t\t}\n\t\tif(typeof this.registeredDataViewers[type] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredDataViewers[type]);\n\t\t}\n\t\treturn valids;\n\t},\n\tgetValidDataEditorList: function(type, frametype){\n\t\tvar valids = ['HTMLStringEditor'];\n\t\tif(frametype && typeof this.registeredDataEditors[frametype] != \"undefined\"){\n\t\t\tvar nftypes = this.registeredDataEditors[frametype];\n\t\t\tif(nftypes){\n\t\t\t\tfor(var i = 0; i<nftypes.length; i++){\n\t\t\t\t\tif(valids.indexOf(nftypes[i]) == -1) valids.push(nftypes[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(typeof this.registeredDataEditors[type] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredDataEditors[type]);\n\t\t}\n\t\treturn valids;\n\t},\n\tgetViewer: function(type, options, datatype){\n\t\tvar vi = this.renderers[type];\n\t\toptions = (options ? options: {});\n\t\ttry {\n\t\t\tvar viewer = eval(\"new \" + type + \".\" + type + \"(\" + JSON.stringify(options) + \")\");\n\t\t\tif(datatype) viewer.type = datatype;\n\t\t\treturn viewer;\n\t\t}\n\t\tcatch(e){\n\t\t\talert(\"failed on create \" + e.toString());\n\t\t}\n\t},\n\tgetAvailableDataViewers: function(type, frametype){\n\t\tvar viewers = [];\n\t\tvar nviewers = []\n\t\tvar opts = this.getValidDataViewerList(type, frametype);\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\n\t\t\t\tnviewers.push(opts[i]);\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i<nviewers.length; i++){\n\t\t\tif(this.renderers[nviewers[i]]){\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\n\t\t\t}\n\t\t}\n\t\treturn viewers;\n\t},\n\tgetAvailableDataEditors: function(type, frametype){\n\t\tvar viewers = [];\n\t\tvar nviewers = []\n\t\tvar opts = this.getValidDataEditorList(type, frametype);\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\n\t\t\t\tnviewers.push(opts[i]);\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i<nviewers.length; i++){\n\t\t\tif(this.renderers[nviewers[i]]){\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\n\t\t\t}\n\t\t}\n\t\treturn viewers;\n\t},\n\tgetViewerForDataFrame: function(type, frametype){\n\t\tvar vals = this.getValidDataViewerList(type, frametype);\n\t\treturn vals[vals.length-1];\n\t},\n\tgetEditorForDataFrame: function(type, frametype){\n\t\tvar vals = this.getValidDataEditorList(type, frametype);\n\t\treturn vals[vals.length-1];\n\t},\n\tregisterViewerForTypes: function(viewer, label, types){\n\t\tfor(var i = 0; i < types.length; i++){\n\t\t\tif(typeof this.registeredDataViewers[types[i]] == \"undefined\"){\n\t\t\t\tthis.registeredDataViewers[types[i]] = [];\n\t\t\t}\n\t\t\tif(this.registeredDataViewers[types[i]].indexOf(viewer) == -1){\n\t\t\t\tthis.registeredDataViewers[types[i]].push(viewer);\n\t\t\t\tthis.renderers[viewer] = {label: label};\n\t\t\t}\n\t\t}\n\t},\n\tregisterEditorForTypes: function(viewer, label, types){\n\t\tfor(var i = 0; i < types.length; i++){\n\t\t\tif(typeof this.registeredDataEditors[types[i]] == \"undefined\"){\n\t\t\t\tthis.registeredDataEditors[types[i]] = [];\n\t\t\t}\n\t\t\tif(this.registeredDataEditors[types[i]].indexOf(viewer) == -1){\n\t\t\t\tthis.registeredDataEditors[types[i]].push(viewer);\n\t\t\t\tthis.renderers[viewer] = {label: label};\n\t\t\t}\n\t\t}\n\t},\n\tregisterEditorForFrameType: function(viewer, label, frametype){\n\t\tthis.renderers[viewer] = {label: label};\n\t\tif(typeof this.registeredDataEditors[frametype] == \"undefined\") this.registeredDataEditors[frametype] = [];\n\t\tif(this.registeredDataEditors[frametype].indexOf(viewer) == -1){\n\t\t\tthis.registeredDataEditors[frametype].push(viewer);\n\t\t}\n\t},\n\tregisterViewerForFrameType: function(viewer, label, frametype){\n\t\tthis.renderers[viewer] = {label: label};\n\t\tif(typeof this.registeredDataViewers[frametype] == \"undefined\") this.registeredDataViewers[frametype] = [];\n\t\tif(this.registeredDataViewers[frametype].indexOf(viewer) == -1){\n\t\t\tthis.registeredDataViewers[frametype].push(viewer);\n\t\t}\n\t},\n\trenderers: {\n\t\tHTMLStringViewer: { label: \"String Viewer\"},\n\t\tHTMLStringEditor: { label: \"String Editor\"},\n\t}\n}\n\nRenderingMap.addPlugin = function(plugin){\n\tif(plugin == \"gmaps\"){\n\t\tthis.registerEditorForTypes(\"GoogleMapEditor\", \"Google Map Editor\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\t\tthis.registerViewerForTypes(\"GoogleMapViewer\", \"Google Map Editor\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\n\t}\n\tif(plugin == \"quill\"){\n\t\tthis.registerEditorForTypes(\"HTMLMarkupEditor\", \"Quill WYSIWIG HTML Editor\", [\"xdd:html\"]);\n\t}\n\tif(plugin == \"select2\"){\n\t\tRenderingMap.registerEditorForFrameType(\"S2EntityEditor\", \"S2 Autocomplete Selector\", \"document\");\n\t}\n\tif(plugin == \"jsoneditor\"){\n\t\tRenderingMap.registerEditorForFrameType(\"S2EntityEditor\", \"S2 Autocomplete Selector\", \"document\");\n\t}\n}\n\nRenderingMap.decorateRenderer = function(options, renderer){\n\tvar compiled_options = this.compileOptions(options, renderer);\n\tif(compiled_options && compiled_options.mode){\n\t\trenderer.mode = compiled_options.mode;\n\t}\n\telse {\n\t\tif(renderer.parent && renderer.parent.mode) renderer.mode = renderer.parent.mode;\n\t\telse renderer.mode = \"view\";\n\t}\n\tif(compiled_options && compiled_options.view){\n\t\trenderer.view = compiled_options.view;\n\t}\n\telse {\n\t\tif(renderer.parent && renderer.parent.view) renderer.view = renderer.parent.view;\n\t\telse renderer.view = \"full\";\n\t}\n\tif(compiled_options && compiled_options.facets){\n\t\trenderer.facets = compiled_options.facets;\n\t}\n\telse {\n\t\trenderer.facets = renderer.getDefaultFacets();\n\t}\n\tif(compiled_options && compiled_options.facet && typeof renderer.facets[compiled_options.facet] == \"object\"){\n\t\trenderer.facet = compiled_options.facet;\n\t}\n\telse {\n\t\tvar deffacet = renderer.getDefaultFacet();\n\t\tif(typeof renderer.facets[deffacet] == \"object\"){\n\t\t\trenderer.facet = deffacet;\n\t\t}\n\t\telse {\n\t\t\trenderer.facet = key(renderer.facets);\n\t\t}\n\t}\n\tif(compiled_options && compiled_options.hide_disabled_buttons){\n\t\trenderer.hide_disabled_buttons = compiled_options.hide_disabled_buttons;\n\t}\n\telse if(renderer.parent) renderer.hide_disabled_buttons = parent.hide_disabled_buttons;\n\telse renderer.hide_disabled_buttons = true;\n\tif(compiled_options && typeof compiled_options.features == \"object\"){\n\t\trenderer.features = compiled_options.features;\n\t}\n\telse {\n\t\trenderer.features = renderer.facets[renderer.facet].features;\n\t\t//renderer.features = renderer.getDefaultFeatures(renderer.facet);\n\t}\n\tif(compiled_options && typeof compiled_options.controls == \"object\"){\n\t\trenderer.controls = compiled_options.controls;\n\t}\n\telse {\n\t\trenderer.controls = renderer.facets[renderer.facet].controls;\n\t\t//renderer.controls = renderer.getDefaultControls();\n\t}\n\tif(compiled_options && typeof compiled_options.viewerType != \"undefined\"){\n\t\trenderer.viewerType = compiled_options.viewerType;\n\t\tif(compiled_options.viewerOptions)\n\t\t\trenderer.viewerOptions = compiled_options.viewerOptions;\n\t}\n\tif(compiled_options && typeof compiled_options.header != \"undefined\"){}\n\telse {\n\t\trenderer.header_viewer = new ObjectViewer.HTMLObjectHeaderViewer();\n\t}\n\tif(compiled_options && typeof compiled_options.filter != \"undefined\"){}\n\telse {}\n\tif(compiled_options && typeof compiled_options.sort != \"undefined\"){}\n\telse {}\n\treturn options;\n}\n\n\nRenderingMap.compileOptions = function(options, renderer){\n\tvar compiled_options = {};\n\tvar rules = [];\n\tfor(var key in options){\n\t\tif(key != \"rules\"){\n\t\t\tcompiled_options[key] = options[key];\n\t\t}\n\t}\n\t/*if(options.rules){\n\t\tfor(var i = 0; i<options.rules.length; i++){\n\t\t\tvar match = (!options.rules[i].pattern || this.patternMatchesRenderer(options.rules[i].pattern, renderer));\n\t\t\tif(match && options.rules[i].output){\n\t\t\t\tfor(var k in options.rules[i].output){\n\t\t\t\t\tcompiled_options[k] = options.rules[i].output[k];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} */\n\treturn compiled_options;\n}\n\nRenderingMap.registerViewerForTypes(\"HTMLBooleanViewer\", \"Checkbox Viewer\", [\"xsd:boolean\"]);\nRenderingMap.registerEditorForTypes(\"HTMLBooleanEditor\", \"Checkbox Editor\", [\"xsd:boolean\"]);\nRenderingMap.registerViewerForFrameType(\"HTMLChoiceViewer\", \"Choice Viewer\", \"oneOf\");\nRenderingMap.registerEditorForFrameType(\"HTMLChoiceEditor\", \"Choice Selector\", \"oneOf\");\nRenderingMap.registerViewerForTypes(\"HTMLCoordinateViewer\", \"Coordinate Viewer\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\nRenderingMap.registerEditorForTypes(\"HTMLCoordinateEditor\", \"Coordinate Editor\", [\"xdd:coordinate\", \"xdd:coordinatePolyline\", \"xdd:coordinatePolygon\"]);\nRenderingMap.registerViewerForTypes(\"HTMLDateViewer\", \"Date Viewer\", [\"xsd:time\", \"xsd:date\", \"xsd:dateTime\", \"xsd:gYear\",\n\t\"xsd:gYearRange\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:dateTimeStamp\"]);\nRenderingMap.registerEditorForTypes(\"HTMLDateEditor\", \"Date Editor\", [\"xsd:time\", \"xsd:date\", \"xsd:dateRange\" ,\"xsd:dateTime\", \"xsd:gYear\",\n\t\"xsd:gYearRange\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:gYearMonth\", \"xsd:gMonthDay\", \"xsd:dateTimeStamp\"]);\nRenderingMap.registerViewerForFrameType(\"HTMLEntityViewer\", \"Document Viewer\", \"document\");\nRenderingMap.registerEditorForFrameType(\"HTMLEntityEditor\", \"Document Selector\", \"document\");\nRenderingMap.registerViewerForTypes(\"HTMLImageViewer\", \"Image Viewer\", [\"xdd:url\", \"xsd:anyURI\", \"xsd:base64Binary\"]);\nRenderingMap.registerEditorForTypes(\"HTMLImageEditor\", \"Image Editor\", [\"xsd:base64Binary\"]);\nRenderingMap.registerViewerForTypes(\"HTMLImageViewer\", \"Image Viewer\", [\"xdd:url\", \"xsd:anyURI\", \"xsd:base64Binary\"]);\nRenderingMap.registerEditorForTypes(\"HTMLImageEditor\", \"Image Editor\", [\"xsd:base64Binary\"]);\nRenderingMap.registerViewerForTypes(\"HTMLLinkViewer\", \"Link Viewer\", [\"xdd:url\", \"xsd:anyURI\"]);\nRenderingMap.registerViewerForTypes(\"HTMLNumberViewer\", \"Number with commas\",\n\t\t[\"xsd:decimal\", \"xsd:double\", \"xsd:float\", \"xsd:short\", \"xsd:integer\", \"xsd:long\",\n\t\t\t\"xsd:nonNegativeInteger\", \"xsd:positiveInteger\", \"xsd:negativeInteger\", \"xsd:nonPositiveInteger\"]);\nRenderingMap.registerViewerForTypes(\"HTMLRangeViewer\", \"Range Viewer\", [\"xdd:gYearRange\", \"xdd:dateRange\", \"xdd:integerRange\", \"xdd:decimalRange\"]);\nRenderingMap.registerEditorForTypes(\"HTMLRangeEditor\", \"Range Editor\", [\"xdd:gYearRange\", \"xdd:dateRange\", \"xdd:integerRange\", \"xdd:decimalRange\"]);\n//RenderingMap.registerViewerForTypes(\"SantizedHTMLViewer\", \"Sanitized HTML\", [\"xsd:string\", \"xdd:html\"]);\n\nmodule.exports=RenderingMap\n"],"sourceRoot":""}
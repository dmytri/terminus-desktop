{"version":3,"sources":["webpack://TerminusDB_SDK/webpack/bootstrap","webpack://TerminusDB_SDK/./src/ApiExplorer.js","webpack://TerminusDB_SDK/./src/FrameHelper.js","webpack://TerminusDB_SDK/./src/ObjectFrame.js","webpack://TerminusDB_SDK/./src/TerminusUI.js","webpack://TerminusDB_SDK/./src/Utils.js","webpack://TerminusDB_SDK/./src/client/HTMLFrameHelper.js","webpack://TerminusDB_SDK/./src/client/ObjectRenderer.js","webpack://TerminusDB_SDK/./src/client/ObjectViewer.js","webpack://TerminusDB_SDK/./src/client/PropertyRenderer.js","webpack://TerminusDB_SDK/./src/client/PropertyViewer.js","webpack://TerminusDB_SDK/./src/client/RenderingMap.js","webpack://TerminusDB_SDK/./src/client/TerminusClassChooser.js","webpack://TerminusDB_SDK/./src/client/TerminusDB.js","webpack://TerminusDB_SDK/./src/client/TerminusDocument.js","webpack://TerminusDB_SDK/./src/client/TerminusDocumentChooser.js","webpack://TerminusDB_SDK/./src/client/TerminusMapping.js","webpack://TerminusDB_SDK/./src/client/TerminusPropertyChooser.js","webpack://TerminusDB_SDK/./src/client/TerminusQuery.js","webpack://TerminusDB_SDK/./src/client/TerminusSchema.js","webpack://TerminusDB_SDK/./src/client/TerminusServer.js","webpack://TerminusDB_SDK/./src/client/TerminusURL.js","webpack://TerminusDB_SDK/./src/client/ValueRenderer.js","webpack://TerminusDB_SDK/./src/index.js","webpack://TerminusDB_SDK/./src/plugins/TerminusPlugin.js","webpack://TerminusDB_SDK/./src/plugins/codemirror.terminus.js","webpack://TerminusDB_SDK/./src/plugins/datatables.terminus.js","webpack://TerminusDB_SDK/./src/query/WOQLGraphBrowserGenerator.js","webpack://TerminusDB_SDK/./src/query/WOQLQuery.js","webpack://TerminusDB_SDK/./src/query/WOQLResult.js","webpack://TerminusDB_SDK/./src/query/WOQLResultsViewer.js","webpack://TerminusDB_SDK/./src/query/WOQLTextboxGenerator.js","webpack://TerminusDB_SDK/./src/query/WOQLTimePicker.js"],"names":["FrameHelper","require","TerminusPluginManager","UTILS","ApiExplorer","ui","viewer","main","client","TerminusDB","WOQLClient","use_fetch","return_full_response","pman","prototype","getAsDOM","aec","document","createElement","setAttribute","getApiNav","navDom","nav","appendChild","ul","a","self","addEventListener","removeSelectedNavClass","classList","add","getApiExplorerDom","icon","txt","createTextNode","view","removeChildren","wrap","cont","row","body","api","msg","al","getInfoAlertDom","getHeaderDom","apiCont","getConnectExplorer","getDatabaseExplorer","getSchemaApi","getDocumentApi","getQueryApi","setSelectedNavMenu","setSelectedSubMenu","changeApiDom","action","dom","getShowApiDom","getQueryApiDom","br","b","getSignature","form","getServerForm","fd","inpLabel","innerHTML","cd","inpId","val","value","keyLabel","key","button","gatherips","input","url","resd","buttonSelf","opts","connect","then","response","resultDom","showHttpResult","getDatabaseDom","mode","getDBForm","inpTxtAr","stylizeEditor","inpKey","id","doc","createDatabase","currForm","parentNode","deleteDatabase","txtar","select","getClassFramesForm","inpUrl","inpDocUrl","optLabel","optInp","docUrl","options","explorer","getClassFrame","formDoc","getApiForm","schemaUrlDom","schemaTextDom","htmlEditor","editor","schurl","format","responseType","getSchema","payload","updateSchema","gtxtar","dcurl","getDocument","deleteDocument","getValue","createDocument","editmode","updateDocument","sg","ic","cl","sig","getFunctionSignature","spec","pre","descr","result","tolggleContent","tolggleSignatureContent","content","style","display","module","exports","standard_urls","addURLPrefix","prefix","node","hasChildNodes","removeChild","childNodes","empty","obj","length","Object","hasOwnProperty","call","genBNID","r","Math","random","toString","substring","d","Date","bnid","getTime","getShorthand","link","pref","full","sh","compareIDs","ida","idb","unshorten","sha","shb","validURL","bits","split","str","pattern","RegExp","test","labelFromURL","nurl","urlFragment","lastIndexOf","charAt","toUpperCase","slice","window","location","href","isStringType","stype","lastURLBit","getStdURL","ext","viewIncludesProperties","type","viewIncludesChildren","viewIncludesValue","numberWithCommas","parts","replace","join","datatypes","parseDate","ty","parsed","parseXsdDate","parseXsdDateTime","year","month","day","push","tz","extractXsdTimezone","abs","toNumber","timezone","addXsdPadding","nparsed","hour","minute","second","xsdFromParsed","xparsed","ret","parseXsdTime","convertTimestampToXsd","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","datetime","ptime","paseXsdTime","indexOf","i","parseRangeValue","dividor","vals","loadDynamicScript","scriptid","src","callback","existingScript","getElementById","script","onload","loadDynamicCSS","cssid","rel","ObjectFrame","cls","dataframes","classframes","parent","parentframe","loadClassFrames","originalFrames","loadDataFrames","newDoc","getAsFrame","prop","ff","property","range","domain","domainValue","subjid","frame","children","isnew","restrictions","reset","props","clear","clearData","newkids","j","jsonld_context","cf","ClassFrame","isValid","isObject","hasSchema","frames","cframe","getPropertyClassFrame","isClassChoice","getChosenClassFrame","alert","isLogic","getChosenFrame","isData","df","DataFrame","kid","matchesPattern","matching","compare","pat","instance","basis","getMissingPropertyList","missing","newb","label","getLabel","getFilledPropertyList","filled","fillFromSchema","newid","pf","hasRestriction","restriction","min","createEmpty","clss","getClassChoices","createEmptyChoice","clone","cloned","clonedval","kidclone","getChildren","getChild","childid","kids","getDataFrames","removeProperty","addProperty","copy","set","addPropertyValue","removePropertyValue","index","nfvals","contents","nkids","error","more","err","load","isValidType","dt","vtypes","rangeValue","comment","Restriction","hasCardRestriction","lab","getType","getComment","isObjectProperty","isDatatypeProperty","isRestriction","ftype","isEntity","isChoice","isString","getChoiceOptions","elements","option","lang","getTypeShorthand","get","normalizer","loadFromObjectFrame","par","child","getChosenClassFrames","objframe","fframe","chosen","nc","operands","concat","dataframe","cloneDataFrame","other","choices","domcls","operand","max","loadRestriction","cardinality","maxCardinality","minCardinality","nrest","TerminusDocumentViewer","TerminusDBsdk","TerminusQueryViewer","TerminusMappingViewer","TerminusSchemaViewer","TerminusServersdk","TerminusURLLoader","TerminusUI","controls","setOptions","connectionConfig","server","showBusy","clearBusy","db","getDBRecord","connectToDB","showView","showDocument","schema","showSchemaPage","query","showQueryPage","showExplorer","showDBMainPage","showServerMainPage","redraw","showError","dbdets","title","Promise","reject","Error","getBadArguments","dbid","myserver","dbdoc","generateNewDatabaseDocument","refreshDBList","crec","connection","showMessage","getCrashString","delrec","lid","dbn","removeDB","dets","rdfs","terminus","description","fname","args","getConnectionEndpoint","clearServer","clearDB","removeDBFromConnection","TerminusServerViewer","redrawMainPage","showLoadURLPage","TerminusDBViewer","showCreateDBPage","TerminusDBCreator","durl","showMappingPage","mapping","getDocViewerOptions","loadDocument","showCreateDocument","getDocCreatorOptions","loadCreateDocument","showResult","clearMessages","messages","clearMainPage","setMessageDOM","setbuttonControls","buttons","setControllerDOM","controller","setExplorerDOM","setPluginsDOM","plugins","setViewerDOM","draw","comps","slocation","toggleControl","drawControls","drawPlugins","drawExplorer","loadControls","ncontrol","nd","showControl","exp","ae","sc","TerminusServerController","TerminusDBController","el","show_controls","pseudoCapability","capabilitiesPermit","show_views","busy","md","pseuds","views","document_options","schema_options","piman","init","css","loadPageCSS","pluginAvailable","p","console","log","getClassFrameOptions","viewdoc_options","Codemirror","readFile","file","XMLHttpRequest","xmlhttp","ActiveXObject","open","send","xmlDoc","responseText","which","sigs","server_url","create","database_url","details","getClassFrames","document_url","fail_on_id_denied","viewDocument","woql","update","lookup","term","map","source","target","getPropertyFrame","getFilledPropertyFrame","getSubClasses","text","hd","h","ald","getResponse","terminator","rd","data","JSON","stringify","cm","stylizeCodeDisplay","retHttpHeaders","headers","hdres","json","deleteStylizedEditor","qip","nextElementSibling","cmConfig","ar","colorizeTextArea","updateTextArea","pr","colorizePre","name","getElementsByClassName","remove","HTMLFrameHelper","getActionControl","control","disabled","dpropDOM","faic","getControlIcon","getSettingsControl","getSelectionControl","selected","sel","opt","getModeSelectorDOM","renderer","viewsDOM","setMode","isNew","cancel","goToName","s","wbits","loc","htmlid","getInfoboxDOM","help","infoDOM","linfo","lspacer","lval","PropertyRenderer","RenderingMap","ObjectRenderer","properties","originalProperties","newProperties","decorateRenderer","getOptionsForProperty","render","buildPropertyRenderers","getViewerForObject","renderedprop","showFeature","addRenderedProperty","getPropertiesToRender","renders","setNew","subject","subjectClass","getAvailableViewers","depth","parentObject","root","nkid","parentobj","newrend","values","save","isNewDocument","demandid","inputID","dval","nukeViewer","deletePropertyValue","nprops","deleteProperty","updated","addNewProperty","goToProperty","addPropertyClass","changeClass","addClass","getClassMeta","ctl","getController","classmeta","getClient","idDOM","new_object","isPartOfNewDocument","isUpdated","childUpdated","redrawHeader","setFacet","facet","nocascade","parentFacetChange","getDefaultFacets","defs","page","features","line","summary","getAvailableFacets","keys","facets","currentFacet","getDefaultFacet","pfacet","getContentOrientation","prend","vrend","sum","getSummary","status","propcount","getObjectHeaderViewer","header_viewer","getFeaturesForFacet","hideDisabledControls","hide_disabled_controls","cardcontrols","cardControlAllows","updcontrols","fets","rest","currentnum","goTo","currentViewer","viewerType","setViewer","nviewer","setView","hide","show","getViewableProperties","getAddableProperties","sort","standardSort","filter","patterns","sorted","rdft","rdfc","extractLDO","extracts","extractJSONLD","extract","extracted","HTMLObjectViewer","headerViewer","renderedDOM","getObjectDOM","replaceWith","getObjectIDMarker","header","getObjectBodyDOM","orientation","pcls","sp","vholder","getFeatureDOM","feature","hasFeatureViewer","featureViewer","nheader","redrawBody","nbody","subj","idm","HTMLObjectHeaderViewer","objDOM","facetDOM","getObjectFacetDOM","sumDOM","getObjectLabelDOM","getObjectIDDOM","typeDOM","getObjectTypeDOM","getObjectStatusDOM","viewDOM","getViewPropertyDOM","hideDOM","getViewerSelectorDOM","addDOM","getAddPropertyDOM","controlsDOM","getObjectControlsDOM","getObjectSummaryDOM","nextSibling","getObjectDeleteDOM","cpropDOM","getObjectCloneDOM","rpropDOM","getObjectResetDOM","upropDOM","getObjectUpdateDOM","showDOM","getObjectShowDOM","getObjectHideDOM","viewables","mpropDOM","cs","getAvailableClassChoices","mlabDOM","cmt","Label","Comment","addables","unshift","viewers","saveback","ValueRenderer","predicate","originalValues","changed","getOptionsForChild","getOptionsForValue","getOptionsForObject","buildValueRenderers","getViewerForProperty","renderedval","addRenderedValue","adorig","getDataFramesToRender","vr","getChildrenToRender","kidf","allvals","allkids","extr","hasCardinalityRestriction","getRestriction","clsmeta","goToValue","nvals","new_property","getViewableValues","multiline","containsPage","getAvailablePropertyViewers","getAvailablePropertyEditors","getViewerForDataValue","ptype","getEditorForProperty","getPropertyHeaderViewer","HTMLPropertyHeaderViewer","valcount","vsum","HTMLPropertyViewer","block","propDOM","npropDOM","getPropertyDOM","getPropertyIDMarker","getPropertyBodyDOM","wrapper","getPropertyControlsDOM","getPropertyLabelDOM","statDOM","getPropertyStatusDOM","prepend","getPropertySummaryDOM","prelude","getPropertyFacetDOM","getViewValueDOM","getPropertyIDDOM","getPropertyRangeDOM","getPropertyCardinalityDOM","getPropertyCommentDOM","getActionControlDOM","settingsDOM","getPropertyDeleteDOM","getAddValueDOM","getPropertyResetDOM","getPropertyUpdateDOM","getPropertyShowDOM","getPropertyHideDOM","getSettingsControlDOM","settings","sControl","popup","showValue","HTMLDataViewer","getValueHeaderViewer","ObjectViewer","registeredDataViewers","registeredDataEditors","registeredPropertyViewers","registeredPropertyEditors","registeredObjectViewers","registeredObjectEditors","getValidDataViewerList","frametype","valids","getValidDataEditorList","nftypes","getValidPropertyViewerList","proptype","proprange","propdom","getValidPropertyEditorList","getViewer","vi","renderers","eval","e","nviewers","sets","getAvailableDataViewers","getAvailableDataEditors","getViewerForDataFrame","getEditorForDataFrame","registerViewerForTypes","types","registerEditorForTypes","registerEditorForFrameType","registerViewerForFrameType","registerViewerForProperties","registerEditorForProperties","HTMLStringViewer","HTMLStringEditor","patternMatchesRenderer","fp","FramePattern","checkRenderer","JSONObjectViewer","getEditorForObject","getAvailableObjectViewers","entries","compiled_options","compileOptions","deffacet","hide_disabled_buttons","viewerOptions","rules","match","output","k","frame_type","rtype","getRendererType","illegalRuleType","checkFrameType","checkLabel","checkSubject","checkSubjectClass","checkProperty","checkDepth","checkRange","checkValue","checkParent","checkChildren","checkIndex","checkStatus","rsubj","IDsMatch","found","numberMatch","propertyIDsMatch","valuesMatch","rangeIDsMatch","rcls","classIDsMatch","renderder","stringMatch","vala","valb","constructor","WOQLQuery","TerminusClassChooser","choice","show_single","setRoot","setFilter","change","ccdom","ccsel","wq","getClassListMetaDataQuery","execute","getResultsAsOptions","clist","bindings","empty_choice","opt1","added","Class","WOQLResultsViewer","TerminusDocumentChooser","dbc","scd","dbrec","nm","item","getControlHTML","getDocumentChooserDOM","getDocumentCreatorDOM","dcip","nbut","platformEndpoint","mcls","d2ch","sdom","jQuery","nlab","click","nbuts","getSubclassQueryPattern","getAbstractQueryPattern","termcc","new_class","tcdom","nlabs","ccDOM","wquery","pd","sth","banner","dhp","scs","getDBSummary","getClassesDOM","getDbInfoBox","info","del","q","getClassesQuery","sct","mfd","sci","slab","idip","titip","descip","schem","datip","butfield","cancbut","loadbut","load_schema","config_options","getBuiltInViewerOptions","getClassMetaDataQuery","instancemeta","wresult","hasBindings","refreshPage","getInstanceMeta","elid","res","page_config","loadDocumentSchema","setLabel","loadSchemaFrames","URL","getOptionsFromPageConfig","FrameConfig","pageconf","docid","labdom","dfs","pagedom","rends","holder","controldom","getDocumentPageControls","dpc","show_button","getS2DOM","getIDDOM","docchooser","cfilter","tdom","params","searchurl","dbURL","s2config","ajax","dataType","contentType","delay","cache","placeholder","width","select2","keyCode","dbut","toggleView","getChangeViewText","tsel","o1","o2","getFormFieldDOM","getFormField","queries","mdom","submit","jsonip","map_source","parse","map_target","TerminusPropertyChooser","getPropertyListQuery","Property","WOQLResult","WOQLTextboxGenerator","WOQLGraphBrowserGenerator","meta","generator","results_first","gentype","generators","gbrowse","loadGenerator","hasGeneratorOptions","yup","gen","changeGenerator","ng","redrawGenerator","inputDOM","getQueryInputDOM","nquery","getElementMetaDataQuery","wqlR","Element","tab","resultDOM","getResultViewDom","qbox","getQueryCreatorChoiceDOM","qcc","c","confirm_before_update","loadSchema","resetControlDOM","getSchemaSaveButtons","getSchemaImportActionButtons","getShowSchemaButton","getClassFrameChooser","getImportButton","getSchemaEditButton","getFormatChoices","fc","tc","tj","refreshMainPage","getSchemaViewDOM","getSchemaEditDOM","getSchemaImportDOM","getClassFrameDOM","ssb","getCancelButton","getSaveButton","getImportPreviewButton","getImportSaveButton","func","getSchemaButton","doImport","schema_edit_dom","newschema","appendSchema","showConfirmPage","s2","nschema","np","docviewer","ipval","ip","klab","modes","overwrite","append","Datatables","rsc","getServerLabelDOM","srec","getServerRecord","desc","csbut","crbut","getDBListDOM","getServerDetailsDOM","scl","wrapTableLinkCell","sec","lihed","thead","thr","th1","th2","th3","th4","th5","th6","tbody","dbrecs","getServerDBRecords","fullid","tr","td1","td2","td3","td4","td5","td6","deleteDBPermitted","delbut","delDB","url_input","key_input","getLabelDOM","ltxt","pholder","stit","loadbuts","originalValue","nf","nvr","inline","getAPIURL","apiurl","DBURL","getEntityReference","entities","badData","bd","new_value","text_summary_length","v","nrend","getViewerForValue","objlit","HTMLDataHeaderViewer","getDataValueViewer","ft","TerminusConfig","pconfig","nlocation","showPanel","toggleHeaders","preloaded","loaded","loading","precluded","js","plugin","requires","setPluginOptions","calculatePreloaded","toload","calculateRequiredInitPlugins","nthen","loadPlugins","pins","pid","getDefaultPlugins","needed_pins","loading_order","getAvailablePlugins","pl","version_check","pluginmeta","required_version","version","isFunction","fn","slider","Quill","JSONEditor","CodeMirror","fontAwesomeCheck","dataTable","google","maps","ol","Map","d3","span","className","insertBefore","firstChild","element","getComputedStyle","getPropertyValue","fontAwsm","defplugs","ticker","cback","loadPlugin","pug","scripts","sid","splice","loadPluginScripts","cssfid","cssdom","cssurl","pluginLoadable","pluginLoadedOrLoading","getPluginDOM","plugid","cbox","checked","clab","togglePlugin","unloadPlugin","num","dm","clh","showPlugins","config","textdom","darkMode","jsonldCheck","fromTextArea","firstLineNumber","lineNumbers","styleActiveLine","lineWrapping","smartIndent","indentWithTabs","newlineAndIndent","autoCloseBrackets","matchBrackets","afterCursor","extraKeys","refresh","setCodemirrorSize","defaultCharWidth","setOption","setSize","setTimeout","on","runMode","innerText","theme","convertToDatatable","table","DataTable","searching","pageLength","lengthMenu","paging","columnDefs","targets","createdRow","td","$","find","attr","html","executeQuery","dcb","pageInfo","rtab","getTable","getDataFromServer","getQueryOnPagination","getAllDocumentQuery","start","getEverythingQuery","getDataOfChosenClassQuery","chosenValue","getDataOfChosenPropertyQuery","getDocumentQuery","generateNewQueryOnPageChange","qTextDom","getCallbackSettings","len","setUp","dtdom","drawCallback","serverside","WOQLTimePicker","tq","qman","getSliderDOM","DCOGBrowser","model","myowner","default_viewport","current_viewport","viewports","viewportDOMs","browserid","randomString","query_timeslice","current_result","focus_node","show_filter","entity_count","default_display","icon_unicode","color","forward","backward","DCOGQueryFilter","DCOGTimePicker","getViewportAsDOM","vpdom","newQuery","success","getQuery","setBusy","handle","DCOGQueryResult","containsData","setViewportData","getNodeOrFringe","from_node","nodeCount","fillInfoBoxes","nodeSelected","rebuildController","tellUser","ehandle","untell","moreResults","nfocus","addMoreResults","updateViewportData","showBusyOverlay","insert_patterns","browser","dqr","qstruct","to_node","source_node","target_node","current_relationships","relationships","current_depth","max_path_length","current_threshold","filters","shareholding_threshold","server_side","timeslice","date","wake","initData","setInitNodes","groupID","initDOM","qstr","setData","updateData","setViewportFilter","sections","getNodeInfoSections","followNode","setFocusNode","setPathSearch","node_from","node_to","changeTimeSlice","valto","force","isTemporalSuperset","setQueryTimeslice","getTimeslice","setFilterTimeslice","getControllerAsDOM","cdom","getControllerViewButtonsAsDOM","toolboxDOM","getUserToolboxDOM","filterDOM","legendDOM","getControllerFilterAsDOM","fdom","getRelationshipFilterAsDOM","ndom","getQueryParameterDOM","ipfield","getSliderTypeDOM","gobut","toggleFilterVisibility","getLegendAsDOM","userMessageDOM","msgdom","dlc","bdoms","bdom","legend","getNodeRelativeSize","nconf","getNodeDisplaySettings","size","getLineWidth","getModelElementDisplaySettings","elt","modeldisplay","extend","isBidirectional","edge","typeID","conf","t","getRelationshipClass","nick","getGraphElementDisplaySettings","nds","getLinkDisplaySettings","getElementIcon","getClassIcon","getElementIconUnicode","getElementColour","setUpIPGSpecials","reldisptypes","entdisptypes","rid","disptype","eid","default_limit","prefixes","colid","serverURL","schemaURL","docURL","shorten","wrapped","wstr","varname","aqp","clsname","sqp","constraint","limit","vdoc","vEl","vClass","gLink","ldoc","count","showTable","show_table","orderColumns","sample","ordered","rs","rh","getTableDOM","ordered_headings","th","datatable","gatherDatatableSettings","txtArea","queryName","getQueryButtonGroups","qGroupQueries","qrow","g","ch","setDatatableSettings","searchStr","remString","substr","getQueryTextAreaDOM","box","eqh","qbut","qbuts","qexs","qh","qcGroup","nqbut","aqbut","ebut","pbut","prbut","qdGroup","termpc","qdocGroup","pdom","docch","docdom","d2dom","slidertype","defch","from","to","ss","years","toggleServerSideFiltering","getSliderParameters","end","pointInit","slide","event","tt","tickToTime","rangeInit","sconfig","val2","noshow","showCurrentPick","ticknum","nval","seconds_ago","now","timeToTick","timeval","y","thisy","changeSliderType","ntype","updateSliderDOM","dcd","cb","lb","slideDOM","TopAxisDOM","curdate","cursdate","curedate","LabelDOM","PayloadDOM","L2DOM","getSliderAxisDOM","getTimesliceAsTicks","vtf","vtt","fy","adjustOffset","tval","tick","totwidth","offsetWidth","unit","off","sd","ldom","Y2Time"],"mappings":"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","file":"terminus-javascript-sdk.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","/**\n * @file Javascript Api explorer tool\n * @author Kitty Jose\n * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more\n *\n * @summary Displays a demo and description of api calls from WOQLCLient and what happens under the hood of api calls\n */\nconst FrameHelper = require('./FrameHelper');\nconst TerminusPluginManager = require('./plugins/TerminusPlugin');\nconst UTILS= require('./Utils')\n\n function ApiExplorer(ui){\n    this.ui = ui;\n    this.viewer = ui.main;\n    this.client = new TerminusDB.WOQLClient();\n    this.client.use_fetch = true;\n    this.client.return_full_response = true;\n    this.pman = new TerminusPluginManager();\n }\n\n\n// Controller provides access to the Api explorer functions\nApiExplorer.prototype.getAsDOM = function(){\n \tvar aec = document.createElement(\"div\");\n    aec.setAttribute(\"class\", \"terminus-db-controller\");\n    if(this.ui){\n       this.getApiNav(aec, this.viewer);\n    } // if this.ui\n    return aec;\n }\n\n// gets api nav bar\nApiExplorer.prototype.getApiNav = function(navDom, viewer){\n    // list view of apis\n    var nav = document.createElement('div');\n    navDom.appendChild(nav);\n\n    // connect to server api\n    var ul = document.createElement('ul');\n    ul.setAttribute('class', 'terminus-ul');\n    nav.appendChild(ul);\n\n    // connect api\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-selected terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        UTILS.removeSelectedNavClass(\"terminus-selected\");\n        this.classList.add(\"terminus-selected\");\n        self.getApiExplorerDom('connect', viewer);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-link');\n    a.appendChild(icon);\n    var txt = document.createTextNode('Connect Server Api');\n    a.appendChild(txt);\n    ul.appendChild(a);\n\n    // database api\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        UTILS.removeSelectedNavClass(\"terminus-selected\");\n        this.classList.add(\"terminus-selected\");\n        self.getApiExplorerDom('create', viewer);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-database');\n    a.appendChild(icon);\n    var txt = document.createTextNode('Database Api');\n    a.appendChild(txt);\n    ul.appendChild(a);\n\n    // schema api\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        UTILS.removeSelectedNavClass(\"terminus-selected\");\n        this.classList.add(\"terminus-selected\");\n        self.getApiExplorerDom('schema', viewer);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-cog');\n    a.appendChild(icon);\n    var txt = document.createTextNode('Schema Api');\n    a.appendChild(txt);\n    ul.appendChild(a);\n\n    // documents api\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        UTILS.removeSelectedNavClass(\"terminus-selected\");\n        this.classList.add(\"terminus-selected\");\n        self.getApiExplorerDom('document', viewer);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-file');\n    a.appendChild(icon);\n    var txt = document.createTextNode('Document Api');\n    a.appendChild(txt);\n    ul.appendChild(a);\n\n    // query api\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        UTILS.removeSelectedNavClass(\"terminus-selected\");\n        this.classList.add(\"terminus-selected\");\n        self.getApiExplorerDom('query', viewer);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-search');\n    a.appendChild(icon);\n    var txt = document.createTextNode('Query Api');\n    a.appendChild(txt);\n    ul.appendChild(a);\n\n    this.getApiExplorerDom('connect', viewer);\n\n    return navDom;\n} // getApiNav()\n\n// get schema api explorer - nav bar, alert msg, headers ...\nApiExplorer.prototype.getApiExplorerDom = function(view, viewer){\n\n  // clear of viewer\n  FrameHelper.removeChildren(viewer);\n\n  // wrapper\n  var wrap = document.createElement('div');\n  //wrap.setAttribute('class', 'terminus-wrapper terminus-wrapper-height');\n  viewer.appendChild(wrap);\n  var cont = document.createElement('div');\n  cont.setAttribute('class', 'container-fluid');\n  wrap.appendChild(cont);\n  var row = document.createElement('div');\n  row.setAttribute('class', 'row-fluid');\n  cont.appendChild(row);\n\n  var body = document.createElement('div');\n  body.setAttribute('class', 'terminus-module-body');\n  row.appendChild(body);\n\n  var api = document.createElement('div');\n  api.setAttribute('class', 'terminus-module-body span9 terminus-module-body-white-bg terminus-module-body-width');\n\n  body.appendChild(api);\n\n  var msg = 'API Explorer helps to understand api calls in depth.'\n              + ' User can perform actions and view what happens in the background.'\n  var al = UTILS.getInfoAlertDom('info', 'Info: ', msg);\n  api.appendChild(al);\n\n  // header\n  api.appendChild(UTILS.getHeaderDom('Api Explorer'));\n\n  // body\n  var cont = document.createElement('div');\n  //cont.setAttribute('class', 'terminus-module-body');\n\n  var self = this;\n  switch(view){\n    case 'connect':\n      var apiCont = self.getConnectExplorer(cont);\n      api.appendChild(apiCont);\n    break;\n    case 'create':\n      var apiCont = self.getDatabaseExplorer(cont);\n      api.appendChild(apiCont);\n    break;\n    case 'schema':\n      var apiCont = self.getSchemaApi(cont);\n      api.appendChild(apiCont);\n    break;\n    case 'document':\n      var apiCont = self.getDocumentApi(cont);\n      api.appendChild(apiCont);\n    break;\n    case 'query':\n      var apiCont = self.getQueryApi(cont);\n      api.appendChild(apiCont);\n    break;\n\n  }// switch(api)\n\n  return wrap;\n} // getApiExplorerDom\n\nApiExplorer.prototype.setSelectedNavMenu = function(a){\n    UTILS.removeSelectedNavClass(\"terminus-selected\");\n    a.classList.add(\"terminus-selected\");\n}\n\nApiExplorer.prototype.setSelectedSubMenu = function(a){\n    UTILS.removeSelectedNavClass(\"terminus-submenu-selected\");\n    a.classList.add(\"terminus-submenu-selected\");\n}\n\n// on trigger of click event - change dom\nApiExplorer.prototype.changeApiDom = function(action, cont, body){\n    FrameHelper.removeChildren(body);\n    var dom = this.getShowApiDom(action, body);\n    cont.appendChild(dom);\n}\n\n// get document api calls - on click of DocumentAPI nav bar\nApiExplorer.prototype.getDocumentApi = function(cont){\n\n  var body = document.createElement('div');\n\n  // list view of Databse tools\n  var ul = document.createElement('ul');\n  ul.setAttribute('class','terminus-ul-horizontal');\n\n  // view document api\n  var a = document.createElement('a');\n  a.setAttribute('class', 'terminus-a terminus-submenu-selected terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n  var self = this;\n  a.addEventListener(\"click\", function(){\n      self.setSelectedNavMenu(this);\n      self.changeApiDom('viewDocument', cont, body);\n  })\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'terminus-menu-icon fa fa-eye');\n  a.appendChild(icon);\n  var txt = document.createTextNode('View Document');\n  a.appendChild(txt);\n  ul.appendChild(a);\n\n  // create document api\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        self.setSelectedNavMenu(this);\n        self.changeApiDom('createDocument', cont, body);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-plus');\n    a.appendChild(icon);\n    var txt = document.createTextNode('Create Document');\n    a.appendChild(txt);\n    ul.appendChild(a);\n\n    // update document api\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        self.setSelectedNavMenu(this);\n        self.changeApiDom('updateDocument', cont, body);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-arrow-up');\n    a.appendChild(icon);\n    var txt = document.createTextNode('Update Document');\n    a.appendChild(txt);\n    ul.appendChild(a);\n\n    // delete document api\n    var a = document.createElement('a');\n    a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var self = this;\n    a.addEventListener(\"click\", function(){\n        self.setSelectedNavMenu(this);\n        self.changeApiDom('deleteDocument', cont, body);\n    })\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa fa-trash-alt');\n    a.appendChild(icon);\n    var txt = document.createTextNode('Delete Document');\n    a.appendChild(txt);\n    ul.appendChild(a);\n\n    cont.appendChild(ul);\n\n    var dom = self.getShowApiDom('viewDocument', body);\n    cont.appendChild(dom);\n\n    return cont;\n} // getDocumentApi\n\n// get query api calls - on click of QueryAPI nav bar - submenus of Query Api defined here\nApiExplorer.prototype.getQueryApi  = function(cont){\n  var body = document.createElement('div');\n\n  // list view of Databse tools\n  var ul = document.createElement('ul');\n  ul.setAttribute('class','terminus-ul-horizontal');\n\n  //woql select\n  var a = document.createElement('a');\n  a.setAttribute('class', 'terminus-submenu-selected terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n  var self = this;\n  a.addEventListener(\"click\", function(){\n      self.setSelectedSubMenu(this);\n      FrameHelper.removeChildren(body);\n      var dom = self.getQueryApiDom('select', body);\n  })\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'terminus-menu-icon fa fa-mouse-pointer');\n  a.appendChild(icon);\n  var txt = document.createTextNode('Select');\n  a.appendChild(txt);\n  ul.appendChild(a);\n\n  //update select\n  var a = document.createElement('a');\n  a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n  var self = this;\n  a.addEventListener(\"click\", function(){\n      self.setSelectedSubMenu(this);\n      FrameHelper.removeChildren(body);\n      var dom = self.getQueryApiDom('update', body);\n      cont.appendChild(dom);\n  })\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'terminus-menu-icon fa fa-arrow-up');\n  a.appendChild(icon);\n  var txt = document.createTextNode('Update');\n  a.appendChild(txt);\n  ul.appendChild(a);\n\n  //mapping\n  var a = document.createElement('a');\n  a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n  var self = this;\n  a.addEventListener(\"click\", function(){\n      self.setSelectedSubMenu(this);\n      FrameHelper.removeChildren(body);\n      var dom = self.getQueryApiDom('lookup', body);\n      cont.appendChild(dom);\n  })\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'terminus-menu-icon fa fa-random');\n  a.appendChild(icon);\n  var txt = document.createTextNode('Look up');\n  a.appendChild(txt);\n  ul.appendChild(a);\n\n  cont.appendChild(ul);\n\n  var dom = self.getQueryApiDom('select', body);\n  cont.appendChild(dom);\n\n  return cont;\n} //getQueryApi\n\n// get schema api calls - on click of SchemaAPI nav bar - submenus of schema Api defined here\nApiExplorer.prototype.getSchemaApi = function(cont){\n\n  var body = document.createElement('div');\n\n  // list view of Databse tools\n  var ul = document.createElement('ul');\n  ul.setAttribute('class','terminus-ul-horizontal');\n\n  var body = document.createElement('div');\n\n  // list view of Databse tools\n  var ul = document.createElement('ul');\n  ul.setAttribute('class','terminus-ul-horizontal');\n\n  //get schema\n  var a = document.createElement('a');\n  a.setAttribute('class', 'terminus-a terminus-submenu-selected terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n  var self = this;\n  a.addEventListener(\"click\", function(){\n      self.setSelectedSubMenu(this);\n      self.changeApiDom('getSchema', cont, body);\n  })\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'terminus-menu-icon fa fa-eye');\n  a.appendChild(icon);\n  var txt = document.createTextNode('View Schema');\n  a.appendChild(txt);\n  ul.appendChild(a);\n\n  //update schema\n  var a = document.createElement('a');\n  a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n  var self = this;\n  a.addEventListener(\"click\", function(){\n      self.setSelectedSubMenu(this);\n      self.changeApiDom('updateSchema', cont, body);\n  })\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'terminus-menu-icon fa fa-arrow-up');\n  a.appendChild(icon);\n  var txt = document.createTextNode('Update Schema');\n  a.appendChild(txt);\n  ul.appendChild(a);\n\n  //get class frames\n  var a = document.createElement('a');\n  a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n  var self = this;\n  a.addEventListener(\"click\", function(){\n      self.setSelectedSubMenu(this);\n      self.changeApiDom('getClassFrames', cont, body);\n  })\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'terminus-menu-icon fa fa-share-alt');\n  a.appendChild(icon);\n  var txt = document.createTextNode('Get Class Frames');\n  a.appendChild(txt);\n  ul.appendChild(a);\n\n  cont.appendChild(ul);\n\n  var dom = self.getShowApiDom('getSchema', body);\n  cont.appendChild(dom);\n\n  return cont;\n} // getSchemaApi\n\n// get connect to server api calls - on click of connectAPI nav bar\nApiExplorer.prototype.getConnectExplorer = function(body){\n  var self = this;\n\n  var br = document.createElement('BR');\n  body.appendChild(br);\n\n  // get signature\n  var b = this.getSignature('connect');\n  body.appendChild(b);\n\n  // get header Parameter\n  body.appendChild(UTILS.getHeaderDom('Parameters'));\n\n  var br = document.createElement('BR');\n  body.appendChild(br);\n\n  //form to get server url\n  var form = this.getServerForm();\n\n  body.appendChild(form);\n  return body;\n\n} // getConnectExplorer\n\n//get create & delete db form\nApiExplorer.prototype.getServerForm = function(){\n  // form\n  var form = document.createElement('form');\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var inpLabel = document.createElement('label');\n  inpLabel.setAttribute('class', 'terminus-control-label');\n  inpLabel.setAttribute('for', 'basicinput');\n  inpLabel.innerHTML = 'Url:';\n  fd.appendChild(inpLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var inpId = document.createElement('input');\n  inpId.setAttribute('type', 'text');\n  inpId.setAttribute('id', 'basicinput');\n  inpId.setAttribute('class', 'span8 terminus-input-text');\n  inpId.setAttribute('placeholder', 'URL : server_url');\n  if(this.val) inpId.value = this.val;\n  cd.appendChild(inpId);\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n  cd.appendChild(icon);\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var keyLabel = document.createElement('label');\n  keyLabel.setAttribute('class', 'terminus-control-label');\n  keyLabel.setAttribute('for', 'basicinput');\n  keyLabel.innerHTML = 'Key:';\n  fd.appendChild(keyLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var key = document.createElement('input');\n  key.setAttribute('type', 'text');\n  key.setAttribute('id', 'basicinput');\n  key.setAttribute('class', 'span8 terminus-input-text');\n  key.setAttribute('placeholder', 'Key : key');\n  if(this.val) key.value = this.val;\n  cd.appendChild(key);\n\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n  button.setAttribute('type', 'button');\n  button.innerHTML = 'Send Api';\n  var gatherips = function(){\n    var input = {};\n    input.url = inpId.value;\n    input.key = key.value;\n    return input;\n  }\n  var resd = document.createElement('div');\n  form.appendChild(button);\n  form.appendChild(resd);\n  var self = this;\n  button.addEventListener(\"click\", function(){\n    var buttonSelf = this;\n    opts = {};\n    var input = gatherips();\n    self.client.connect(input.url, input.key)\n    .then(function(response){\n      FrameHelper.removeChildren(resd);\n      var resultDom = UTILS.showHttpResult(response, 'connect', resd, self.ui);\n    });\n  }) // button click\n  return form;\n} // getServerForm()\n\n// get database api calls - on click of databaseAPI nav bar - submenus of database Api defined here\nApiExplorer.prototype.getDatabaseExplorer = function(cont){\n\n  var body = document.createElement('div');\n\n  // list view of Databse tools\n  var ul = document.createElement('ul');\n  ul.setAttribute('class','terminus-ul-horizontal');\n\n  //create db\n  var a = document.createElement('a');\n  a.setAttribute('class', 'terminus-a terminus-submenu-selected terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n  var self = this;\n  a.addEventListener(\"click\", function(){\n      self.setSelectedSubMenu(this);\n      FrameHelper.removeChildren(body);\n      var dom = self.getDatabaseDom('create', body);\n      cont.appendChild(dom);\n  })\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'terminus-menu-icon fa fa-plus');\n  a.appendChild(icon);\n  var txt = document.createTextNode('Create database');\n  a.appendChild(txt);\n  ul.appendChild(a);\n\n  //delete db\n  var a = document.createElement('a');\n  a.setAttribute('class', 'terminus-a terminus-hz-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n  var self = this;\n  a.addEventListener(\"click\", function(){\n      self.setSelectedSubMenu(this);\n      FrameHelper.removeChildren(body);\n      var dom = self.getDatabaseDom('delete', body);\n      cont.appendChild(dom);\n  })\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'terminus-menu-icon fa fa-trash-alt');\n  a.appendChild(icon);\n  var txt = document.createTextNode('Delete database');\n  a.appendChild(txt);\n  ul.appendChild(a);\n\n  cont.appendChild(ul);\n\n  // landing page\n  var dom = self.getDatabaseDom('create', body);\n  cont.appendChild(dom);\n\n  return cont;\n} // getDatabaseExplorer\n\n\n// get database dom\n ApiExplorer.prototype.getDatabaseDom = function(mode, body){\n  var self = this;\n\n  var br = document.createElement('BR');\n  body.appendChild(br);\n\n  // get signature\n  var b = this.getSignature(mode);\n  body.appendChild(b);\n\n  // get header Parameter\n  body.appendChild(UTILS.getHeaderDom('Parameters'));\n\n  var br = document.createElement('BR');\n  body.appendChild(br);\n\n  //form to get database id\n  if(mode == 'create') var form = this.getDBForm(mode);\n  else var form = this.getDBForm(mode);\n\n  body.appendChild(form);\n  return body;\n\n}// getDatabaseDom()\n\n//get create & delete db form\nApiExplorer.prototype.getDBForm = function(mode){\n  // form\n  var form = document.createElement('form');\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var inpLabel = document.createElement('label');\n  inpLabel.setAttribute('class', 'terminus-control-label');\n  inpLabel.setAttribute('for', 'basicinput');\n  inpLabel.innerHTML = 'Url:';\n  fd.appendChild(inpLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var inpId = document.createElement('input');\n  inpId.setAttribute('type', 'text');\n  inpId.setAttribute('id', 'basicinput');\n  inpId.setAttribute('class', 'span8 terminus-input-text');\n  inpId.setAttribute('placeholder', 'URL : server/database_id');\n  if(this.val) inpId.value = this.val;\n  cd.appendChild(inpId);\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n  cd.appendChild(icon);\n\n  if(mode == 'create'){\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var inpLabel = document.createElement('label');\n    inpLabel.setAttribute('class', 'terminus-control-label');\n    inpLabel.setAttribute('for', 'basicinput');\n    inpLabel.innerHTML = 'Document:';\n    fd.appendChild(inpLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpTxtAr = document.createElement('textarea');\n    inpTxtAr.setAttribute('type', 'text');\n    inpTxtAr.setAttribute('class', 'terminus-input-text');\n    inpTxtAr.setAttribute('placeholder', 'Enter document to create database');\n    cd.appendChild(inpTxtAr);\n    UTILS.stylizeEditor(this.ui, inpTxtAr, 'document', 'javascript');\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n    cd.appendChild(icon);\n  } // if(mode == 'create')\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var keyLabel = document.createElement('label');\n  keyLabel.setAttribute('class', 'terminus-control-label');\n  keyLabel.setAttribute('for', 'basicinput');\n  keyLabel.innerHTML = 'Key:';\n  fd.appendChild(keyLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var inpKey = document.createElement('input');\n  inpKey.setAttribute('type', 'text');\n  inpKey.setAttribute('id', 'basicinput');\n  inpKey.setAttribute('class', 'sterminus-input-text');\n  inpKey.setAttribute('placeholder', 'key');\n  cd.appendChild(inpKey);\n\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n  button.setAttribute('type', 'button');\n  button.innerHTML = 'Send Api';\n  var gatherips = function(){\n    var input = {};\n    input.id = inpId.value;\n    input.doc = inpTxtAr.value;\n    input.key = inpKey.value;\n    return input;\n  }\n  var self = this;\n  if(mode == 'create'){\n    button.addEventListener(\"click\", function(form){\n      var input = gatherips();\n      var buttonSelf = this;\n      self.client.createDatabase(input.id, input.doc, input.key)\n      .then(function(response){\n        var currForm = buttonSelf.parentNode;\n        var resultDom = UTILS.showHttpResult(response, 'create', currForm, self.ui);\n      });\n    }) // button click\n  } // if(mode == 'create')\n  else{\n    button.addEventListener(\"click\", function(){\n      var buttonSelf = this;\n      opts = {};\n      self.client.deleteDatabase(inpId.value, opts)\n      .then(function(response){\n        var currForm = buttonSelf.parentNode;\n        var resultDom = UTILS.showHttpResult(response, 'delete', currForm, self.ui);\n      });\n    }) // button click\n  } // if(mode == 'delete')\n  form.appendChild(button);\n  return form;\n} // getDBForm()\n\n// get query api dom\nApiExplorer.prototype.getQueryApiDom = function(action, body){\n\n  var br = document.createElement('BR');\n  body.appendChild(br);\n\n  // signature\n  var b = this.getSignature(action);\n  body.appendChild(b);\n\n  // get header Parameter\n  body.appendChild(UTILS.getHeaderDom('Parameters'));\n  var br = document.createElement('BR');\n  body.appendChild(br);\n\n  var form = document.createElement('form');\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var inpLabel = document.createElement('label');\n  inpLabel.setAttribute('class', 'terminus-control-label');\n  inpLabel.setAttribute('for', 'basicinput');\n  inpLabel.innerHTML = 'Url:';\n  fd.appendChild(inpLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var inpId = document.createElement('input');\n  inpId.setAttribute('type', 'text');\n  inpId.setAttribute('id', 'basicinput');\n  inpId.setAttribute('class', 'span8 terminus-input-text');\n  inpId.setAttribute('placeholder', 'URL : server/database_id');\n  if (this.value) inpId.value = this.val;\n  cd.appendChild(inpId);\n  var icon = document.createElement('i');\n  icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n  cd.appendChild(icon);\n  fd.appendChild(cd);\n\n  var fd = document.createElement('div');\n  fd.setAttribute('class', 'terminus-control-group');\n  form.appendChild(fd);\n  var inpLabel = document.createElement('label');\n  inpLabel.setAttribute('class', 'terminus-control-label');\n  inpLabel.setAttribute('for', 'basicinput');\n  inpLabel.innerHTML = 'Query:';\n  fd.appendChild(inpLabel);\n  var cd = document.createElement('div');\n  cd.setAttribute('class', 'terminus-controls');\n  fd.appendChild(cd);\n  var txtar = document.createElement('textarea');\n  if(this.value) txtar.value = this.val;\n  cd.appendChild(txtar);\n  txtar.setAttribute('class', 'terminus-api-explorer-text-area');\n  cd.appendChild(txtar);\n  fd.appendChild(cd);\n  UTILS.stylizeEditor(this.ui, txtar, 'query', 'javascript');\n  var br = document.createElement('BR');\n  fd.appendChild(br);\n\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n  button.setAttribute('type', 'button');\n  button.innerHTML = 'Send Api';\n  var self = this;\n  button.addEventListener(\"click\", function(){\n    var buttonSelf = this;\n    var opts = {};\n    self.client.select(inpId.value, txtar.value, opts)\n    .then(function(response){\n      var currForm = buttonSelf.parentNode;\n      var resultDom = UTILS.showHttpResult(response, 'select', currForm, self.ui);\n    });\n  }) // button click\n  fd.appendChild(button);\n  body.appendChild(form);\n  return body;\n} // getQueryApiDom\n\nApiExplorer.prototype.getClassFramesForm = function(){\n    // form\n    var form = document.createElement('form');\n    form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var inpLabel = document.createElement('label');\n    inpLabel.setAttribute('class', 'terminus-control-label');\n    inpLabel.setAttribute('for', 'basicinput');\n    inpLabel.innerHTML = 'Url:';\n    fd.appendChild(inpLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpUrl = document.createElement('input');\n    inpUrl.setAttribute('type', 'text');\n    inpUrl.setAttribute('id', 'basicinput');\n    inpUrl.setAttribute('class', 'span8 terminus-input-text');\n    inpUrl.setAttribute('placeholder', 'URL : database_url');\n    if(this.val) inpUrl.value = this.val;\n    cd.appendChild(inpUrl);\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n    cd.appendChild(icon);\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var inpLabel = document.createElement('label');\n    inpLabel.setAttribute('class', 'terminus-control-label');\n    inpLabel.setAttribute('for', 'basicinput');\n    inpLabel.innerHTML = 'Url/ ID:';\n    fd.appendChild(inpLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var inpDocUrl = document.createElement('input');\n    inpDocUrl.setAttribute('type', 'text');\n    inpDocUrl.setAttribute('id', 'basicinput');\n    inpDocUrl.setAttribute('class', 'span8 terminus-input-text');\n    inpDocUrl.setAttribute('placeholder', 'Url or ID of document class');\n    cd.appendChild(inpDocUrl);\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n    cd.appendChild(icon);\n    var fd = document.createElement('div');\n    fd.setAttribute('class', 'terminus-control-group');\n    form.appendChild(fd);\n    var optLabel = document.createElement('label');\n    optLabel.setAttribute('class', 'terminus-control-label');\n    optLabel.setAttribute('for', 'basicinput');\n    optLabel.innerHTML = 'Options:';\n    fd.appendChild(optLabel);\n    var cd = document.createElement('div');\n    cd.setAttribute('class', 'terminus-controls');\n    fd.appendChild(cd);\n    var optInp = document.createElement('input');\n    optInp.setAttribute('type', 'text');\n    optInp.setAttribute('id', 'basicinput');\n    optInp.setAttribute('class', 'span8 terminus-input-text');\n    optInp.setAttribute('placeholder', 'options');\n    cd.appendChild(optInp);\n    var button = document.createElement('button');\n    button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n    button.setAttribute('type', 'button');\n    button.innerHTML = 'Send Api';\n    var gatherips = function(){\n        var input = {};\n        input.url = inpUrl.value;\n        input.docUrl = inpDocUrl.value;\n        input.options = optInp.value;\n        return input;\n    }\n    var self = this;\n    button.addEventListener(\"click\", function(form){\n      var input = gatherips();\n      var buttonSelf = this;\n      opts = {};\n      opts.explorer = true;\n      self.client.getClassFrame(input.url, input.docUrl, opts)\n      .then(function(response){\n          var currForm = buttonSelf.parentNode;\n          var resultDom = UTILS.showHttpResult(response, 'getClassFrames', currForm, self.ui);\n      });\n    }) // button click\n    form.appendChild(button);\n    return form;\n}\n\n// get schema & document dom\n ApiExplorer.prototype.getShowApiDom = function(action, body){\n   var self = this;\n\n   var br = document.createElement('BR');\n   body.appendChild(br);\n\n   // signature\n   var b = this.getSignature(action);\n   body.appendChild(b);\n\n   // get header Parameter\n   body.appendChild(UTILS.getHeaderDom('Parameters'));\n   var br = document.createElement('BR');\n   body.appendChild(br);\n\n   // get input\n   switch(action){\n     case 'getSchema':\n       // form to input schema url\n       var formDoc = document.createElement('form');\n       formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n       var fd = document.createElement('div');\n       fd.setAttribute('class', 'terminus-control-group');\n       formDoc.appendChild(fd);\n       var inpLabel = document.createElement('label');\n       inpLabel.setAttribute('class', 'terminus-control-label');\n       inpLabel.setAttribute('for', 'basicinput');\n       inpLabel.innerHTML = 'Url:';\n       fd.appendChild(inpLabel);\n       var cd = document.createElement('div');\n       cd.setAttribute('class', 'terminus-controls');\n       fd.appendChild(cd);\n       var inpId = document.createElement('input');\n       inpId.setAttribute('type', 'text');\n       inpId.setAttribute('id', 'basicinput');\n       inpId.setAttribute('class', 'span8 terminus-input-text');\n       inpId.setAttribute('placeholder', 'URL : server/database_id');\n       cd.appendChild(inpId);\n       var icon = document.createElement('i');\n       icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n       cd.appendChild(icon);\n\n       body.appendChild(formDoc);\n\n       //form to get schema\n       var form = this.getApiForm(action, inpId);\n       body.appendChild(form);\n     break;\n     case 'getClassFrames':\n        var form = this.getClassFramesForm();\n        body.appendChild(form);\n     break;\n     case 'updateSchema':\n       // form to input schema url\n       var formDoc = document.createElement('form');\n       formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n       var fd = document.createElement('div');\n       fd.setAttribute('class', 'terminus-control-group');\n       formDoc.appendChild(fd);\n       var inpLabel = document.createElement('label');\n       inpLabel.setAttribute('class', 'terminus-control-label');\n       inpLabel.setAttribute('for', 'basicinput');\n       inpLabel.innerHTML = 'Url:';\n       fd.appendChild(inpLabel);\n       var cd = document.createElement('div');\n       cd.setAttribute('class', 'terminus-controls');\n       fd.appendChild(cd);\n       var inpId = document.createElement('input');\n       inpId.setAttribute('type', 'text');\n       inpId.setAttribute('id', 'basicinput');\n       inpId.setAttribute('class', 'span8 terminus-input-text');\n       inpId.setAttribute('placeholder', 'URL : server/database_id');\n       cd.appendChild(inpId);\n       var icon = document.createElement('i');\n       icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n       cd.appendChild(icon);\n\n       body.appendChild(formDoc);\n\n       var br = document.createElement('BR');\n       body.appendChild(br);\n\n       var fd = document.createElement('div');\n       fd.setAttribute('class', 'terminus-control-group');\n       formDoc.appendChild(fd);\n       var inpLabel = document.createElement('label');\n       inpLabel.setAttribute('class', 'terminus-control-label');\n       inpLabel.setAttribute('for', 'basicinput');\n       inpLabel.innerHTML = 'Schema:';\n       fd.appendChild(inpLabel);\n       var cd = document.createElement('div');\n       cd.setAttribute('class', 'terminus-controls');\n       fd.appendChild(cd);\n       var txtar = document.createElement('textarea');\n       cd.appendChild(txtar);\n       txtar.setAttribute('class', 'terminus-api-explorer-text-area');\n       UTILS.stylizeEditor(this.ui, txtar, 'schema', 'turtle');\n       var br = document.createElement('BR');\n       body.appendChild(br);\n\n       // gather the dom objects\n       var gatherips = {};\n       gatherips.schemaUrlDom = inpId;\n       gatherips.schemaTextDom = txtar;\n       gatherips.htmlEditor   = txtar;\n\n       //form to update schema\n       var form = this.getApiForm(action, gatherips);\n       body.appendChild(form);\n     break;\n     case 'viewDocument':\n       // form\n       var formDoc = document.createElement('form');\n       formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n       var fd = document.createElement('div');\n       fd.setAttribute('class', 'terminus-control-group');\n       formDoc.appendChild(fd);\n       var inpLabel = document.createElement('label');\n       inpLabel.setAttribute('class', 'terminus-control-label');\n       inpLabel.setAttribute('for', 'basicinput');\n       inpLabel.innerHTML = 'Url:';\n       fd.appendChild(inpLabel);\n       var cd = document.createElement('div');\n       cd.setAttribute('class', 'terminus-controls');\n       fd.appendChild(cd);\n       var inpId = document.createElement('input');\n       inpId.setAttribute('type', 'text');\n       inpId.setAttribute('id', 'basicinput');\n       inpId.setAttribute('class', 'span8 terminus-input-text');\n       inpId.setAttribute('placeholder', 'URL : server/database_id/document/document_id');\n       cd.appendChild(inpId);\n       var icon = document.createElement('i');\n       icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n       cd.appendChild(icon);\n\n       body.appendChild(formDoc);\n\n       var form = this.getApiForm(action, inpId);\n\n       body.appendChild(form);\n\n     break;//viewDocument\n     case 'deleteDocument':\n       // form\n       var formDoc = document.createElement('form');\n       formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n       var fd = document.createElement('div');\n       fd.setAttribute('class', 'terminus-control-group');\n       formDoc.appendChild(fd);\n       var inpLabel = document.createElement('label');\n       inpLabel.setAttribute('class', 'terminus-control-label');\n       inpLabel.setAttribute('for', 'basicinput');\n       inpLabel.innerHTML = 'Url:';\n       fd.appendChild(inpLabel);\n       var cd = document.createElement('div');\n       cd.setAttribute('class', 'terminus-controls');\n       fd.appendChild(cd);\n       var inpId = document.createElement('input');\n       inpId.setAttribute('type', 'text');\n       inpId.setAttribute('id', 'basicinput');\n       inpId.setAttribute('class', 'span8 terminus-input-text');\n       inpId.setAttribute('placeholder', 'URL : server/database_id/document/document_id');\n       cd.appendChild(inpId);\n       var icon = document.createElement('i');\n       icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n       cd.appendChild(icon);\n\n       body.appendChild(formDoc);\n\n       var form = this.getApiForm(action, inpId);\n\n       body.appendChild(form);\n     break;\n     case 'createDocument':\n       // form to input schema url\n       var formDoc = document.createElement('form');\n       formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n       var fd = document.createElement('div');\n       fd.setAttribute('class', 'terminus-control-group');\n       formDoc.appendChild(fd);\n       var inpLabel = document.createElement('label');\n       inpLabel.setAttribute('class', 'terminus-control-label');\n       inpLabel.setAttribute('for', 'basicinput');\n       inpLabel.innerHTML = 'Url:';\n       fd.appendChild(inpLabel);\n       var cd = document.createElement('div');\n       cd.setAttribute('class', 'terminus-controls');\n       fd.appendChild(cd);\n       var inpId = document.createElement('input');\n       inpId.setAttribute('type', 'text');\n       inpId.setAttribute('id', 'basicinput');\n       inpId.setAttribute('class', 'span8 terminus-input-text');\n       inpId.setAttribute('placeholder', 'URL : server/database_id/document/document_id');\n       cd.appendChild(inpId);\n       var icon = document.createElement('i');\n       icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n       cd.appendChild(icon);\n\n       body.appendChild(formDoc);\n\n       var br = document.createElement('BR');\n       body.appendChild(br);\n\n       // text area\n       var formDoc = document.createElement('form');\n       formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n       var fd = document.createElement('div');\n       fd.setAttribute('class', 'terminus-control-group');\n       formDoc.appendChild(fd);\n       var inpLabel = document.createElement('label');\n       inpLabel.setAttribute('class', 'terminus-control-label');\n       inpLabel.setAttribute('for', 'basicinput');\n       inpLabel.innerHTML = 'Document:';\n       fd.appendChild(inpLabel);\n       var cd = document.createElement('div');\n       cd.setAttribute('class', 'terminus-controls');\n       fd.appendChild(cd);\n       var txtar = document.createElement('textarea');\n       cd.appendChild(txtar);\n       txtar.setAttribute('class', 'terminus-api-explorer-text-area');\n       UTILS.stylizeEditor(this.ui, txtar, 'document', 'javascript');\n\n       /*var editor = codeMirrorFormat(txtar, 'javascript', true);\n       // refresh load\n       setTimeout(function() {\n           editor.refresh();\n       },1);\n       // save changes of code mirror editor\n       function updateTextArea() {\n         editor.save();\n       }\n       editor.on('change', updateTextArea); */\n\n        body.appendChild(formDoc);\n\n        var br = document.createElement('BR');\n        body.appendChild(br);\n\n        // gather the dom objects\n        var gatherips = {};\n        gatherips.schemaUrlDom =  inpId;\n        gatherips.schemaTextDom =  txtar;\n        gatherips.htmlEditor =  editor;\n\n        //form to update schema\n        var form = this.getApiForm(action, gatherips);\n        body.appendChild(form);\n\n     break;\n     case 'updateDocument':\n       // form to input schema url\n       var formDoc = document.createElement('form');\n       formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n       var fd = document.createElement('div');\n       fd.setAttribute('class', 'terminus-control-group');\n       formDoc.appendChild(fd);\n       var inpLabel = document.createElement('label');\n       inpLabel.setAttribute('class', 'terminus-control-label');\n       inpLabel.setAttribute('for', 'basicinput');\n       inpLabel.innerHTML = 'Url:';\n       fd.appendChild(inpLabel);\n       var cd = document.createElement('div');\n       cd.setAttribute('class', 'terminus-controls');\n       fd.appendChild(cd);\n       var inpId = document.createElement('input');\n       inpId.setAttribute('type', 'text');\n       inpId.setAttribute('id', 'basicinput');\n       inpId.setAttribute('class', 'span8 terminus-input-text');\n       inpId.setAttribute('placeholder', 'URL : server/database_id/document/document_id');\n       cd.appendChild(inpId);\n       var icon = document.createElement('i');\n       icon.setAttribute('class', 'fa fa-asterisk terminus-mandatory-icon');\n       cd.appendChild(icon);\n\n       body.appendChild(formDoc);\n\n       var br = document.createElement('BR');\n       body.appendChild(br);\n\n       // text area\n       var formDoc = document.createElement('form');\n       formDoc.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n       var fd = document.createElement('div');\n       fd.setAttribute('class', 'terminus-control-group');\n       formDoc.appendChild(fd);\n       var inpLabel = document.createElement('label');\n       inpLabel.setAttribute('class', 'terminus-control-label');\n       inpLabel.setAttribute('for', 'basicinput');\n       inpLabel.innerHTML = 'Document:';\n       fd.appendChild(inpLabel);\n       var cd = document.createElement('div');\n       cd.setAttribute('class', 'terminus-controls');\n       fd.appendChild(cd);\n       var txtar = document.createElement('textarea');\n       cd.appendChild(txtar);\n       txtar.setAttribute('class', 'terminus-api-explorer-text-area');\n       UTILS.stylizeEditor(this.ui, txtar, 'document', 'turtle');\n\n       body.appendChild(formDoc);\n\n       var br = document.createElement('BR');\n       body.appendChild(br);\n\n       // gather the dom objects\n       var gatherips = {};\n       gatherips.schemaUrlDom =  inpId;\n       gatherips.schemaTextDom =  txtar;\n       gatherips.htmlEditor =  editor;\n\n       //form to update schema\n       var form = this.getApiForm(action, gatherips);\n       body.appendChild(form);\n\n     break;\n   }// switch(action)\n\n   return body;\n } // getShowApiDom()\n\n// define event listeners on send api of schema & documents\nApiExplorer.prototype.getApiForm = function(action, input){\n  // form\n  var form = document.createElement('form');\n  form.setAttribute('class', 'terminus-form-horizontal row-fluid');\n\n  var button = document.createElement('button');\n  button.setAttribute('class', 'terminus-btn terminus-send-api-btn');\n  button.setAttribute('type', 'button');\n  button.innerHTML = 'Send Api';\n  form.appendChild(button);\n  var resd = document.createElement('div');\n  form.appendChild(resd);\n  var self = this;\n  switch(action){\n    case 'getSchema':\n      button.addEventListener(\"click\", function(){\n        var schurl = input.value;\n        var buttonSelf = this;\n        var opts = {};\n        opts.format = 'turtle';\n        opts.responseType = 'text';\n        self.client.getSchema(schurl, opts)\n        .then(function(response){\n          FrameHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, 'getSchema', resd, self.ui);\n        });\n      }) // button click\n    break;\n    case 'updateSchema':\n      button.addEventListener(\"click\", function(){\n        var schurl = input.schemaUrlDom.value;\n        var payload = input.htmlEditor.value;\n        var buttonSelf = this;\n        opts = {};\n        opts.format = 'turtle';\n        self.client.updateSchema(schurl, payload, opts)\n        .then(function(response){\n          var gtxtar = document.createElement('textarea');\n          gtxtar.setAttribute('readonly', true);\n          gtxtar.innerHTML = response;\n          var currForm = buttonSelf.parentNode;\n          currForm.appendChild(gtxtar);\n          UTILS.stylizeEditor(this.ui, txtar, 'schema', 'turtle');\n\n        });\n      }) // button click\n    break;\n    case 'viewDocument':\n      button.addEventListener(\"click\", function(){\n      var dcurl = input.value;\n      var buttonSelf = this;\n      var opts = {};\n      opts.format = 'turtle';\n      self.client.getDocument(dcurl, opts)\n      .then(function(response){\n        FrameHelper.removeChildren(resd);\n        var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n      });\n    }) // button click\n    break;\n    case 'deleteDocument':\n      button.addEventListener(\"click\", function(){\n      var dcurl = input.value;\n      var buttonSelf = this;\n      var opts = {};\n      self.client.deleteDocument(dcurl, opts)\n      .then(function(response){\n        FrameHelper.removeChildren(resd);\n        var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n      });\n    }) // button click\n    break;\n    case 'createDocument':\n      button.addEventListener(\"click\", function(){\n        var dcurl = input.schemaUrlDom.value;\n        var payload = input.htmlEditor.getValue();\n        var buttonSelf = this;\n        opts = {};\n        self.client.createDocument(dcurl, payload, opts)\n        .then(function(response){\n          FrameHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n        });\n      }) // button click\n    break;\n    case 'updateDocument':\n      button.addEventListener(\"click\", function(){\n        var dcurl = input.schemaUrlDom.value;\n        var payload = input.htmlEditor.getValue();\n        var buttonSelf = this;\n        opts = {};\n        opts.editmode = 'replace';\n        opts.format = 'json';\n        self.client.updateDocument(dcurl, payload, opts)\n        .then(function(response){\n          FrameHelper.removeChildren(resd);\n          var resultDom = UTILS.showHttpResult(response, action, resd, self.ui);\n        });\n      }) // button click\n    break;\n  } // switch(action)\n\n  var br = document.createElement('BR');\n  form.appendChild(br);\n  var br = document.createElement('BR');\n  form.appendChild(br);\n\n  return form;\n} // getApiForm()\n\n// get signature of api calls\nApiExplorer.prototype.getSignature = function(action){\n    var api = document.createElement('div');\n\n    // get header signature\n    var sg = document.createElement('button');\n    sg.appendChild(document.createTextNode('Click to read Api Signature'));\n    sg.setAttribute('class', 'terminus-collapsible');\n    ic = document.createElement('i');\n    ic.setAttribute('class', 'terminus-cheveron-float fa fa-chevron-down');\n    sg.appendChild(ic);\n    api.appendChild(sg);\n\n    var br = document.createElement('BR');\n    api.appendChild(br);\n\n    var cl = document.createElement('div');\n    cl.setAttribute('class', 'terminus-collapsible-content content');\n\n    var sig = UTILS.getFunctionSignature(action);\n    var txt = document.createTextNode(sig.spec);\n    var pre = document.createElement('pre');\n    pre.setAttribute('class', 'terminus-api-signature-pre');\n    pre.appendChild(txt);\n    var txt =  document.createTextNode(sig.descr);\n    pre.appendChild(txt);\n    var br = document.createElement('BR');\n    pre.appendChild(br);\n    var br = document.createElement('BR');\n    pre.appendChild(br);\n    var txt = document.createTextNode(sig.result);\n    pre.appendChild(txt);\n    cl.appendChild(pre);\n    api.appendChild(cl);\n    var br = document.createElement('BR');\n    api.appendChild(br);\n\n    sg.addEventListener('click', function(){\n        UTILS.tolggleContent(ic, cl);\n    });\n\n    return api;\n} // getSignature()\n\n// displays signature only on click\nfunction tolggleSignatureContent(content){\n    if (content.style.display === \"block\")\n        content.style.display = \"none\";\n    else content.style.display = \"block\";\n}\n\nmodule.exports=ApiExplorer\n","/**\n * Helper functions for dealing with frames and linked data documents\n */\nlet FrameHelper = {\n\tstandard_urls: {\n\t\t\"rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n\t\t\"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n\t\t\"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\n\t\t\"owl\": \"http://www.w3.org/2002/07/owl#\",\n\t\t\"dcogbox\": \"https://datachemist.net/ontology/dcogbox#\",\n\t\t\"dcog\": \"https://datachemist.net/ontology/dcog#\",\n\t\t\"xdd\": \"https://datachemist.net/ontology/xdd#\",\n\t\t\"terminus\": \"https://datachemist.net/ontology/terminus#\",\n\t\t\"vio\": \"https://datachemist.net/ontology/vio#\",\n\t\t\"docu\": \"https://datachemist.net/ontology/documentation#\"\n\t}\n};\n\nFrameHelper.addURLPrefix = function(prefix, url){\n\tthis.standard_urls[prefix] = url;\n}\n\n\nFrameHelper.removeChildren = function(node){\n\tif(node) { while(node.hasChildNodes()){\n\t\tnode.removeChild(node.childNodes[0]);\n\t}}\n}\n\nFrameHelper.empty = function(obj){\n\t   // null and undefined are \"empty\"\n    if (obj == null) return true;\n    // Assume if it has a length property with a non-zero value\n    // that that property is correct.\n    if (obj.length > 0)    return false;\n    if (obj.length === 0)  return true;\n    // Otherwise, does it have any properties of its own?\n    // Note that this doesn't handle\n    // toString and valueOf enumeration bugs in IE < 9\n    for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) return false;\n    }\n    return true;\n}\n\nFrameHelper.genBNID = function(dom){\n\tlet r = Math.random().toString(36).substring(7);\n\tvar d = new Date();\n\tlet bnid = \"_:\" + r + d.getTime();\n\treturn bnid;\n}\n\nFrameHelper.getShorthand = function(link){\n\tif(link && typeof link == \"string\"){\n\t\tfor(var pref in this.standard_urls){\n\t\t\tvar full = this.standard_urls[pref];\n\t\t\tif(link.substring(0, full.length) == full){\n\t\t\t\tvar sh = pref + \":\" + link.substring(full.length);\n\t\t\t\treturn sh;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nFrameHelper.compareIDs = function(ida, idb){\n\tif(ida == idb) return true;\n\tif(this.unshorten(ida) == idb) return true;\n\tif(this.unshorten(ida) == this.unshorten(idb)) return true;\n\tvar sha = this.getShorthand(ida);\n\tvar shb = this.getShorthand(idb);\n\tif(sha && ((sha == idb) || (sha == shb))) return true;\n\tif(shb && shb == ida) return true;\n\treturn false;\n}\n\nFrameHelper.unshorten = function(url){\n\tif(this.validURL(url)) return url;\n\tif(!url) return url;\n\tvar bits = url.split(\":\");\n\tif(bits[1]){\n\t\tif(this.standard_urls[bits[0]]){\n\t\t\treturn this.standard_urls[bits[0]] + bits[1];\n\t\t}\n\t}\n\treturn url;\n}\n\nFrameHelper.validURL = function(str) {\n\tvar pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\n    'localhost|((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|'+ // domain name\n    '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\n    '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\n    '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\n    '(\\\\#[-a-z\\\\d_]*)?$','i'); // fragment locator\n\treturn !!pattern.test(str);\n}\n\nFrameHelper.labelFromURL = function(url){\n\tvar nurl = this.urlFragment(url);\n\tnurl = (nurl ? nurl : url.substring(url.lastIndexOf(\"/\")+1));\n\treturn nurl.charAt(0).toUpperCase() + nurl.slice(1);\n}\n\nFrameHelper.urlFragment = function(url){\n\turl = (typeof url != \"string\") ? window.location.href : url;\n\tbits = url.split('#');\n\tif(bits.length <= 1){\n\t\tbits = url.split(\":\");\n\t}\n\tif(bits.length >= 1){\n\t\turl = bits[1];\n\t\turl = url.split(\"?\")[0];\n\t}\n\treturn url;\n}\n\nFrameHelper.isStringType = function(stype){\n\tif(stype == \"http://www.w3.org/2001/XMLSchema#string\") return true;\n\tif(stype == \"xsd:string\") return true;\n\treturn false;\n}\n\nFrameHelper.lastURLBit = function(url){\n\turl = (typeof url == \"undefined\") ? window.location.href : url;\n\turl = url.split('#')[0];\n\turl = url.split(\"?\")[0];\n\turl = url.substring(url.lastIndexOf(\"/\")+1);\n\treturn url;\n}\n\n\nFrameHelper.getStdURL = function(pref, ext, url){\n\tif(this.standard_urls[pref]) {\n\t\tif(url) {\n\t\t\tif(url == this.standard_urls[pref] + ext) return url;\n\t\t}\n\t\telse {\n\t\t\treturn this.standard_urls[pref] + ext;\n\t\t}\n\t}\n\treturn false;\n}\n\nFrameHelper.viewIncludesProperties = function(view, type){\n\tif(view == \"full\" || view == \"production\" || view == \"terse\"){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nFrameHelper.viewIncludesChildren = function(view, type){\n\treturn this.viewIncludesProperties(view, type);\n}\n\nFrameHelper.viewIncludesValue = function(view, type){\n\treturn this.viewIncludesProperties(view, type);\n}\n\nFrameHelper.numberWithCommas = function(value){\n\tif(value >= 1000 || value <= -1000){\n\t    var parts = value.toString().split(\".\");\n\t    if(value <= -1000) parts[0] = parts[0].substring(1);\n\t    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\t    if(value <= -1000) value = \"-\" + parts.join(\".\");\n\t    else value = parts.join(\".\");\n\t}\n\treturn value;\n}\n\nFrameHelper.datatypes = [\n\t\"xdd:coordinate\", \"xdd:coordinatePolyline\",\n\t\"xdd:coordinatePolygon\", \"xdd:dateRange\", \"xdd:gYearRange\", \"xdd:integerRange\",\n\t\"xdd:decimalRange\",\"xdd:cc\", \"xdd:email\",\"xdd:html\", \"xdd:url\", \"xsd:anySimpleType\",\n\t\"xsd:string\", \"xsd:boolean\", \"xsd:decimal\", \"xsd:double\", \"xsd:float\", \"xsd:time\", \"xsd:date\",\n\t\"xsd:dateTime\", \"xsd:dateTimeStamp\", \"xsd:gYear\", \"xsd:gMonth\", \"xsd:gDay\", \"xsd:gYearMonth\",\n\t\"xsd:gMonthDay\", \"xsd:duration\", \"xsd:yearMonthDuration\", \"xsd:dayTimeDuration\",\n\t\"xsd:byte\", \"xsd:short\", \"xsd:integer\", \"xsd:long\", \"xsd:unsignedByte\",\t\"xsd:unsignedInt\",\n\t\"xsd:unsignedLong\",\t\"xsd:nonNegativeInteger\", \"xsd:positiveInteger\", \"xsd:negativeInteger\",\n\t\"xsd:nonPositiveInteger\", \"xsd:base64Binary\", \"xsd:anyURI\", \"xsd:language\", \"xsd:normalizedString\",\n\t\"xsd:token\", \"xsd:NMTOKEN\",\t\"xsd:Name\",\t\"xsd:NCName\",\"xsd:NOTATION\", \"xsd:QName\", \"xsd:ID\",\n\t\"xsd:IDREF\", \"xsd:ENTITY\", \"rdf:XMLLiteral\",\"rdf:PlainLiteral\",\"rdfs:Literal\", \"xdd:json\"\n];\n\nFrameHelper.parseDate = function(ty, value){\n\tif(ty == \"xsd:date\"){\n\t\tvar parsed = this.parseXsdDate(value);\n\t}\n\telse if(ty == \"xsd:dateTime\"){\n\t\tvar parsed = this.parseXsdDateTime(value);\n\t}\n\telse if(ty == \"xsd:gYear\"){\n\t\tvar parsed = { year: value };\n\t}\n\telse if(ty == \"xsd:gYearRange\"){\n\t\tvar parsed = { year: value };\n\t}\n\telse if(ty == \"xsd:gMonth\"){\n\t\tvar parsed = { month: value };\n\t}\n\telse if(ty == \"xsd:gDay\"){\n\t\tvar parsed = { day: value };\n\t}\n\telse if(ty == \"xsd:gYearMonth\"){\n\t\tvar bits = value.split(\"-\");\n\t\twhile (bits.length < 2) bits.push(\"\");\n\t\tvar parsed = { year: bits[0], month: bits[1]};\n\t}\n\telse if(ty == \"xsd:gMonthDay\"){\n\t\tvar bits = value.split(\"-\");\n\t\twhile (bits.length < 2) bits.push(\"\");\n\t\tvar parsed = { month: bits[0], day: bits[1]};\n\t}\n\telse if(ty == \"xsd:dateTimeStamp\"){\n\t\tvar bits = value.split(\"-\");\n\t\twhile (bits.length < 2) bits.push(\"\");\n\t\tvar parsed = { month: bits[0], day: bits[1]};\n\t}\n\treturn parsed;\n}\n\nFrameHelper.parseXsdDate = function(val){\n\tvar tz = this.extractXsdTimezone(val);\n\tif(tz){\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tif(val.substring(0, 1) == '-'){\n\t\tvar year = val.substring(0,5);\n\t}\n\telse {\n\t\tvar year = val.substring(0,4);\n\t}\n\tif(year && Math.abs(year) < 10000){\n\t\tvar month = val.substring(year.length+1, year.length+3);\n\t\tif(month) month = month.toNumber();\n\t\telse return false;\n\t\tvar day = val.substring(year.length+4);\n\t\tif(day) day = day.toNumber();\n\t\telse return false;\n\t\tvar parsed = {\n\t\t\tyear: year,\n\t\t\tmonth: month,\n\t\t\tday: day,\n\t\t\ttimezone: tz\n\t\t}\n\t}\n\treturn parsed;\n}\n\nFrameHelper.addXsdPadding = function(parsed){\n\tvar nparsed = {};\n\tif(typeof parsed.year != \"undefined\" && parsed.year !== false && parsed.year < 1000){\n\t\tif(Math.abs(parsed.year) < 10) nparsed.year = (parsed.year < 0 ? \"-000\" + Math.abs(parsed.year) : \"000\" + parsed.year);\n\t\telse if(Math.abs(parsed.year) < 100) nparsed.year = (parsed.year < 0 ? \"-00\" + Math.abs(parsed.year) : \"00\" + parsed.year);\n\t\telse nparsed.year = (parsed.year < 0 ? \"-0\" + Math.abs(parsed.year) : \"0\" + parsed.year);\n\t}\n\telse if(parsed.year){\n\t\tnparsed.year = parsed.year;\n\t}\n\tif(typeof parsed.month != \"undefined\" && parsed.month !== false && parsed.month < 10){\n\t\tnparsed.month = \"0\" + parsed.month;\n\t}\n\telse if(parsed.month){\n\t\tnparsed.month = parsed.month;\n\t}\n\tif(typeof parsed.day != \"undefined\" && parsed.day !== false && parsed.day < 10){\n\t\tnparsed.day = \"0\" + parsed.day\n\t}\n\telse if(parsed.day){\n\t\tnparsed.day = parsed.day;\n\t}\n\tif(typeof parsed.hour != \"undefined\" && parsed.hour !== false && parsed.hour < 10){\n\t\tnparsed.hour = \"0\" + parsed.hour;\n\t}\n\telse if(parsed.hour){\n\t\tnparsed.hour = parsed.hour;\n\t}\n\tif(typeof parsed.minute != \"undefined\" && parsed.minute !== false && parsed.minute < 10){\n\t\tnparsed.minute = \"0\" + parsed.minute;\n\t}\n\telse if(parsed.minute){\n\t\tnparsed.minute = parsed.minute;\n\t}\n\tif(typeof parsed.second != \"undefined\" && parsed.second !== false && parsed.second < 10){\n\t\tnparsed.second= \"0\" + parsed.second;\n\t}\n\telse if(parsed.second){\n\t\tnparsed.second = parsed.second;\n\t}\n\treturn nparsed;\n}\n\n\nFrameHelper.xsdFromParsed = function(parsed, ty){\n\tvar xparsed = this.addXsdPadding(parsed);\n\tif(ty == \"xsd:gYear\"){\n\t\tvar ret = (xparsed.year ? xparsed.year : false);\n\t}\n\telse if(ty == \"xsd:date\"){\n\t\treturn (xparsed.year && xparsed.month && xparsed.day) ? xparsed.year + \"-\" + xparsed.month + \"-\" + xparsed.day : false;\n\t}\n\telse if(ty == \"xsd:dateTime\" || ty == \"xsd:dateTimeStamp\"){\n\t\tvar ret = (xparsed.year && xparsed.month && xparsed.day) ? xparsed.year + \"-\" + xparsed.month + \"-\" + xparsed.day + \"T\" : false;\n\t\tif(ret) ret += (xparsed.hour ? xparsed.hour : \"12\") + \":\" + (xparsed.minute ? xparsed.minute : \"00\") + \":\" + (xparsed.second ? xparsed.second : \"00\");\n\t}\n\telse if(ty == \"xsd:gMonth\"){\n\t\tvar ret = (xparsed.month ? \"--\" + xparsed.month : false);\n\t}\n\telse if(ty == \"xsd:gDay\"){\n\t\tvar ret = (xparsed.day ? \"---\" + xparsed.day : false) ;\n\t}\n\telse if(ty == \"xsd:gYearMonth\"){\n\t\tvar ret = (xparsed.year && xparsed.month) ? xparsed.year + \"-\" + xparsed.month : false;\n\t}\n\telse if(ty == \"xsd:gMonthDay\"){\n\t\tvar ret = (xparsed.day && xparsed.month) ? \"--\" + xparsed.month + \"-\" + xparsed.day : false;\n\t}\n\tif(xparsed.timezone){\n\t\tret += xparsed.timezone;\n\t}\n\treturn ret;\n}\n\n\nFrameHelper.parseXsdTime = function(val){\n\tif(!val)return {};\n\tvar tz = this.extractXsdTimezone(val);\n\tif(tz){\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tvar parsed = {\n\t\thour: val.substring(0,2),\n\t\tminute: val.substring(3,5),\n\t\tsecond: val.substring(6),\n\t\ttimezone: tz\n\t}\n\treturn parsed;\n}\n\nFrameHelper.convertTimestampToXsd = function(val){\n\t  var a = new Date(val * 1000);\n\t  var parsed = {\n\t\t\tyear: a.getFullYear(),\n\t\t\tmonth: a.getMonth() + 1,\n\t\t\tday: a.getDate(),\n\t\t\thour: a.getHours(),\n\t\t\tminute: a.getMinutes(),\n\t\t\tsecond: a.getSeconds()\n\t  }\n\t  return parsed;\n}\n\nFrameHelper.parseXsdDateTime = function(val){\n\tif(!val)return {};\n\tif(typeof val == \"number\"){\n\t\treturn this.convertTimestampToXsd(val);\n\t}\n\tvar tz = this.extractXsdTimezone(val);\n\tif(tz){\n\t\tval = val.substring(0, val.length - tz.length);\n\t}\n\tvar datetime = this.parseXsdDate(val);\n\tvar ptime = this.paseXsdTime(val.substring(val.indexOf(\"T\")));\n\tfor(var i in ptime){\n\t\tdatetime[i] = ptime[i];\n\t}\n\tdatetime.timezone = tz;\n\treturn datetime;\n}\n\nFrameHelper.extractXsdTimezone = function(val){\n\tif(val && val.charAt(val.length-1) == \"Z\"){\n\t\treturn \"Z\";\n\t}\n\tif(val && val.charAt(val.length-6) == \"+\" || val.charAt(val.length-6) == \"-\" ){\n\t\tval.substring(val.length-6);\n\t}\n\treturn false;\n\n}\n\nFrameHelper.parseRangeValue = function(val, dividor){\n\tdividor = (dividor ? dividor : \",\");\n\tvar vals = [];\n\tif(typeof val == \"object\" && val.length){\n\t\tvals = val;\n\t}\n\telse if(val){\n\t\tif(typeof val != \"string\"){\n\t\t\tval = \"\" + val;\n\t\t}\n\t\tif(val.length && (val.charAt(0) == \"[\") && val.charAt(val.length -1) == \"]\"){\n\t\t\tvals.push(val.substring(1, val.indexOf(dividor)));\n\t\t\tvals.push(val.substring(val.indexOf(dividor) + 1, val.length -1));\n\t\t}\n\t\telse {\n\t\t\tvals.push(val);\n\t\t}\n\t}\n\treturn vals;\n}\n\nFrameHelper.loadDynamicScript = function(scriptid, src, callback) {\n\tconst existingScript = document.getElementById(scriptid);\n\tif (!existingScript) {\n\t\tconst script = document.createElement('script');\n\t\tscript.src = src; // URL for the third-party library being loaded.\n\t\tdocument.body.appendChild(script);\n\t\tscript.onload = function(){\n\t\t\tscript.id = scriptid; //do it here so it doesn't trigger the callback below on multiple calls\n\t\t\tif (callback) callback(scriptid);\n\t\t};\n\t}\n\tif (existingScript && callback) {\n\t\tcallback(scriptid);\n\t}\n};\n\nFrameHelper.loadDynamicCSS = function(cssid, src, callback) {\n\tconst existingScript = document.getElementById(cssid);\n\tif (!existingScript) {\n\t\tconst link = document.createElement('link');\n\t\tlink.href = src; // URL for the third-party library being loaded.\n\t\tlink.id = cssid; // e.g., googleMaps or stripe\n\t\tlink.rel = \"stylesheet\";\n\t\tdocument.body.appendChild(link);\n\t\tlink.onload = function(){\n\t\t\tif (callback) callback(cssid);\n\t\t};\n\t}\n\tif (existingScript && callback) callback(cssid);\n};\n\nmodule.exports=FrameHelper\n","/**\n * Represents a frame for visualising a specific object frame, anywhere within a document \n * Recursive data structure where this.children contains an indexed array of object frames\n * and this.dataframes contains a property indexed array of data frames\n * Every object frame carries a reference to its classframe\n * This gives us instructions as to how to create new frames according to the schema\n * After that it's turtles all the way down. \n * @param cls - ID of the class (URL)\n * @param classframe - an array of frames representing a class\n * @param archetypes list of class frames\n * @param parent parent object\n * @returns\n */\nconst FrameHelper = require('./FrameHelper');\n\nfunction ObjectFrame(cls, dataframes, classframes, parent, parentframe) {\n\t//the class of the frame - mandatory \n\tthis.empty();\n\tthis.cls = cls;\n\t\n\t//array of frames representing the full class frame (optional - required to be able to safely add missing properties)\n\tif(classframes && typeof classframes == \"object\"){\n\t\tthis.loadClassFrames(classframes);\n\t}\n\tif(dataframes && typeof dataframes == \"object\"){\n\t\tthis.originalFrames = dataframes;\n\t\tthis.loadDataFrames(dataframes);\n\t}\n\telse {\n\t\tthis.originalFrames = false;\n\t}\n\t//parent object frame\n\tthis.parent = parent;\n\t//original frame used by parent to create me\n\tthis.parentframe = parentframe;\n\t//set to true if this is a newly created document\n\tthis.newDoc = false;\n}\n\nObjectFrame.prototype.getAsFrame = function(prop, parent){\n\tif(this.parentframe) return this.parentframe;\n\tvar ff = { type: \"objectProperty\", property: prop};\n\tff.range = this.cls;\n\tff.domain = parent.cls;\n\tff.domainValue = parent.subjid;\n\tff.frame = [];\n\tfor(var prop in this.dataframes){\n\t\tfor(var i = 0; i<this.dataframes[prop].length; i++){\n\t\t\tff.frame.push(this.dataframes[prop][i].getAsFrame());\n\t\t}\n\t}\n\tfor(var prop in this.children){\n\t\tfor(var i = 0; i<this.children[prop].length; i++){\n\t\t\tff.frame.push(this.children[prop][i].getAsFrame(prop, this));\n\t\t}\n\t}\n\treturn ff;\n\t\n}\n\n\nObjectFrame.prototype.isnew = function(){\n\treturn this.newDoc;\n}\n\n/**\n * Cleans out object and sets everything empty\n */\nObjectFrame.prototype.empty = function(){\n\t//all indexed by property\n\tthis.classframes = {};\n\tthis.dataframes = {};\n\tthis.restrictions = {};\n\tthis.children = {};\n\tthis.subjid = false;\n\tthis.cls = false;\n}\n\n/*\n * Resets object state to original state\n */\nObjectFrame.prototype.reset = function(prop){\n\tif(prop){\n\t\tvar props = [];\n\t\tfor(var i = 0; i<this.originalFrames.length; i++){\n\t\t\tif(this.originalFrames[i].property == prop){\n\t\t\t\tprops.push(this.originalFrames[i]);\n\t\t\t}\n\t\t}\n\t\tif(this.children[prop]) this.children[prop] = [];\n\t\tif(this.dataframes[prop]) this.dataframes[prop] = [];\n\t\tthis.loadDataFrames(props);\n\t}\n\telse {\n\t\tthis.dataframes = {};\n\t\tthis.restrictions = {};\n\t\tthis.children = {};\t\t\t\n\t\tthis.loadDataFrames(this.originalFrames)\n\t}\n}\n\n/*\n * Clears out any specific information from a tree\n */\nObjectFrame.prototype.clear = function(){\n\tthis.clearData();\n\tvar newkids = {};\n\tfor(var prop in this.children){\n\t\t//change all the object ids in the \n\t\tfor(var i = 0; i<this.children[prop].length; i++){\n\t\t\tif(typeof newkids[prop] == \"undefined\") newkids[prop] = [];\n\t\t\tthis.children[prop][i].subjid = FrameHelper.genBNID();\n\t\t\tthis.children[prop][i].clear();\n\t\t}\n\t}\n\treturn this;\n}\n\n/**\n * Empties out all of the object's dataframes\n */\nObjectFrame.prototype.clearData = function(){\n\tfor(var prop in this.dataframes){\n\t\tfor(var i = 0; i< this.dataframes[prop].length; i++){\n\t\t\tthis.dataframes[prop][i].clear();\n\t\t}\n\t}\n\treturn this;\n}\n\n/**\n * Loads class frames for the object's class - the instructions about how to put an object together\n */\nObjectFrame.prototype.loadClassFrames = function(classframes){\n\tfor(var j = 0; j< classframes.length; j++){\n\t\tif(classframes[j][\"@context\"]) this.jsonld_context = classframes[j][\"@context\"];\n\t\tvar cf = new ClassFrame(classframes[j]);\n\t\tif(cf.isValid()){\n\t\t\tif(typeof this.classframes[classframes[j].property] == \"undefined\"){\n\t\t\t\tthis.classframes[classframes[j].property] = [];\t\t\t\t\t\n\t\t\t}\n\t\t\tthis.classframes[classframes[j].property] = cf;\n\t\t\tif(cf.isObject() && this.children[classframes[j].property]){\n\t\t\t\tfor(var i = 0; i<this.children[classframes[j].property].length; i++){\n\t\t\t\t\tthis.children[classframes[j].property][i].loadClassFrames(classframes[j].frame);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn this;\n}\n\n/**\n * Does this object have a schema loaded?\n */\nObjectFrame.prototype.hasSchema = function(){\n\treturn ! FrameHelper.empty(this.classframes);\n}\n\n/*\n * Loads an array of data frames into the object's internal index\n * {property: [frames]}\n */\nObjectFrame.prototype.loadDataFrames = function(frames){\n\tif(typeof frames != 'object' || !frames.length) return;\n\tif(!this.originalFrames) this.originalFrames = frames;\n\tif(!this.subjid && frames[0].domainValue) this.subjid = frames[0].domainValue;\n\tfor(var i = 0; i<frames.length; i++){\n\t\tif(frames[i][\"@context\"]) this.jsonld_context = frames[i][\"@context\"];\n\t\tvar cframe = this.getPropertyClassFrame(frames[i].property, frames[i]);\n\t\tif(cframe.isClassChoice()){\n\t\t\tcframe = cframe.getChosenClassFrame(frames[i].range);\n\t\t\tif(!cframe) {\n\t\t\t\talert(\"no choice frame \" + frames[i].range);\n\t\t\t}\n\t\t}\n\t\telse if(cframe.isLogic()){\n\t\t\tcframe = cframe.getChosenFrame(frames[i]);\t\t\n\t\t}\n\t\tif(cframe && cframe.isData()){\n\t\t\tvar df = new DataFrame(frames[i], this);\n\t\t\tif(typeof this.dataframes[frames[i].property] == \"undefined\"){\n\t\t\t\tthis.dataframes[frames[i].property] = [];\n\t\t\t}\n\t\t\tthis.dataframes[frames[i].property].push(df);\t\t\t\n\t\t}\n\t\telse if(cframe && cframe.isObject()){\n\t\t\tvar kid = new ObjectFrame(cframe.range, cframe.frame, frames[i].frame, this, frames[i]);\n\t\t\tif(typeof this.children[frames[i].property] == \"undefined\"){\n\t\t\t\tthis.children[frames[i].property] = [];\n\t\t\t}\n\t\t\tthis.children[frames[i].property].push(kid);\t\t\t\t\n\t\t}\n\t}\n\treturn this;\n}\n\n\nObjectFrame.prototype.matchesPattern = function(matching, pattern){\n\tif(matching.action != pattern.action) return false;\n\tif(pattern.type == \"value\" && typeof matching.value != \"undefined\"){\n\t\t//if(pattern.pattern)\n\t}\n\tif(pattern.type == \"property\" && (typeof matching.value == \"undefined\" && typeof matching.property != \"undefined\" )){ \n\t\t\n\t}\n\tif(pattern.type == \"object\" && (typeof matching.value != \"undefined\" || typeof matching.property != \"undefined\" )){ \n\t\t\n\t}\n\treturn false;\n}\n\nObjectFrame.prototype.compare = function(pat){\n\t//if(pat.range && pat.range != this.range) return false;\n\tif(pat.domain && pat.domain != this.cls) return false;\n} \n\n/**\n * If a class frame is present, it is returned for the given property\n * If no class frame is present and an instance frame is passed in the \n * this enables make it up as you go along editing\n * second argument a class frame will be created from the instance frame. \n */\nObjectFrame.prototype.getPropertyClassFrame = function(prop, instance){\n\tif(this.classframes && typeof this.classframes == \"object\" && typeof this.classframes[prop] == \"object\"){\n\t\treturn this.classframes[prop];\n\t}\n\tif(instance){\n\t\tvar cf = new ClassFrame(instance);\n\t\treturn cf;\n\t}\n\tif(this.dataframes && this.dataframes[prop]){\n\t\treturn this.dataframes[prop][0];\n\t}\n\tif(this.children && this.children[prop]){\n\t\tvar basis = this.children[prop][0].parentframe;\n\t\tif(basis){\n\t\t\tvar cf = new ClassFrame(basis);\n\t\t\treturn cf;\n\t\t}\n\t}\t\n\treturn false;\n}\n\n/**\n * Missing properties are those that are present in the classframe, \n * but not instantiated in the current object frame\n * for this to work we need to load the frame with the associated classframe\n */\nObjectFrame.prototype.getMissingPropertyList = function(){\n\tvar missing = [];\n\tif(this.classframes && typeof this.classframes == \"object\" ){\n\t\tfor(var prop in this.classframes){\n\t\t\tif(!(this.dataframes[prop] || this.children[prop])){\n\t\t\t\tvar cframe = this.getPropertyClassFrame(prop);\n\t\t\t\tvar newb = { label: cframe.getLabel(), value: prop};\n\t\t\t\tmissing.push(newb);\n\t\t\t}\n\t\t}\n\t}\n\treturn missing;\n}\n\n/**\n * List of properties that are filled in the object\n */\nObjectFrame.prototype.getFilledPropertyList = function(){\n\tvar filled = [];\n\tfor(var prop in this.dataframes){\n\t\tvar cframe = this.getPropertyClassFrame(prop);\n\t\tvar newb = { label: cframe.getLabel(), value: prop};\n\t\tfilled.push(newb);\n\t}\t\t\t\n\tfor(var prop in this.children){\n\t\tvar cframe = this.getPropertyClassFrame(prop);\n\t\tvar newb = { label: cframe.getLabel(), value: prop};\n\t\tfilled.push(newb);\n\t}\t\t\t\n\treturn filled;\n}\n\nObjectFrame.prototype.fillFromSchema = function(newid){\n\tif(newid) this.subjid = newid;\n\tvar dataframes = {};\n\tvar children = {};\n\tfor(var prop in this.classframes){\n\t\tvar pf = this.getPropertyClassFrame(prop);\n\t\tif(pf && pf.isData()){\n\t\t\tif(pf.hasRestriction() && pf.restriction.min){\n\t\t\t\tdataframes[prop] = [];\n\t\t\t\tfor(var i = 0; i < pf.restriction.min; i++){\n\t\t\t\t\tdataframes[prop].push(pf.createEmpty(newid));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdataframes[prop] = [pf.createEmpty(newid)];\n\t\t\t}\n\t\t}\n\t\telse if(pf && pf.isObject() && !pf.isClassChoice()){\n\t\t\tif(pf.hasRestriction() && pf.restriction.min){\n\t\t\t\tchildren[prop] = [];\n\t\t\t\tfor(var i = 0; i < pf.restriction.min; i++){\n\t\t\t\t\tvar empty = pf.createEmpty(FrameHelper.genBNID());\n\t\t\t\t\tchildren[prop].push(empty);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar empty = pf.createEmpty(FrameHelper.genBNID());\n\t\t\t\tchildren[prop] = [empty];\n\t\t\t}\n\t\t}\n\t\telse if(pf.isClassChoice()){\n\t\t\tvar clss = pf.getClassChoices();\n\t\t\tif(clss && clss.length){\n\t\t\t\tvar empty = pf.createEmptyChoice(clss[0], FrameHelper.genBNID())\n\t\t\t\tchildren[prop] = [empty];\n\t\t\t}\n\t\t}\n\t}\n\tthis.dataframes = dataframes;\n\tthis.children = children;\n\tthis.originalFrames = [];\n\tfor(var prop in this.dataframes){\n\t\tfor(var i = 0; i<this.dataframes[prop].length; i++){\n\t\t\tthis.originalFrames.push(this.dataframes[prop][i].getAsFrame());\n\t\t}\n\t}\n\tfor(var prop in this.children){\n\t\tfor(var i = 0; i<this.children[prop].length; i++){\n\t\t\tthis.originalFrames.push(this.children[prop][i].getAsFrame(prop, this));\n\t\t}\n\t}\n\treturn this;\n}\n\nObjectFrame.prototype.clone = function(newid){\n\tvar dataframes = {};\n\tvar children = {};\n\tvar cloned = new ObjectFrame(this.cls, false, false, this.parent);\n\tcloned.classframes = this.classframes;\n\tcloned.subjid = newid;\n\tif(this.dataframes && typeof this.dataframes == \"object\"){\n\t\tfor(var prop in this.dataframes){\n\t\t\tvar pf = this.getPropertyClassFrame(prop);\n\t\t\tif(pf.isData()){\n\t\t\t\tdataframes[prop] = [];\n\t\t\t\tfor(var i = 0; i<this.dataframes[prop].length; i++){\n\t\t\t\t\tvar clonedval = pf.clone(newid, this.dataframes[prop][i]);\n\t\t\t\t\tdataframes[prop].push(clonedval);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(this.children && typeof this.children == \"object\"){\n\t\tfor(prop in this.children){\n\t\t\tvar pf = this.getPropertyClassFrame(prop);\n\t\t\tfor(var i = 0; i<this.children[prop].length; i++){\n\t\t\t\tvar kid = this.children[prop][i];\n\t\t\t\tif(typeof children[prop] == \"undefined\") children[prop] = [];\n\t\t\t\tvar kidclone = kid.clone(FrameHelper.genBNID());\n\t\t\t\tchildren[prop].push(kidclone)\n\t\t\t}\n\t\t}\n\t}\n\tcloned.dataframes = dataframes;\n\tcloned.children = children;\n\treturn cloned;\n}\n\n\n/**\n * Returns an array of the child object frames for a given property\n * or false if there is no such property\n */\nObjectFrame.prototype.getChildren = function(prop){\n\tif(prop && typeof this.children[prop] != \"undefined\"){\n\t\treturn this.children[prop];\n\t}\n\treturn false;\n}\n\n/**\n * Returns a child frame with a particular id \n * If the second parameter is included, it will only look in that specific property\n * Otherwise searches all properties for the child \n */\nObjectFrame.prototype.getChild = function(childid, prop){\n\tif(prop && typeof this.children[prop] != \"undefined\"){\n\t\tvar kids = this.children[prop];\n\t\tfor(var i = 0; i<kids.length; i++){\n\t\t\tif(kids[i].subjid == childid) return kids[i];\n\t\t}\n\t}\n\tif(!prop){\n\t\tfor(var prop in this.children){\n\t\t\tfor(var i = 0; i<this.children[prop].length; i++){\n\t\t\t\tif(this.children[prop][i].subjid == childid) return this.children[prop][i];\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nObjectFrame.prototype.getDataFrames = function(prop){\n\tif(prop && typeof this.dataframes[prop] != \"undefined\"){\n\t\treturn this.dataframes[prop];\n\t}\n\treturn false;\n}\n\nObjectFrame.prototype.removeProperty = function(prop){\n\tif(typeof this.dataframes[prop] != \"undefined\"){\n\t\tdelete(this.dataframes[prop]);\n\t}\n\telse if(typeof this.children[prop] != \"undefined\"){\n\t\tdelete(this.children[prop]);\n\t}\n}\n\nObjectFrame.prototype.addProperty = function(prop, cls){\n\tvar cframe = this.getPropertyClassFrame(prop);\n\tif(cframe.isData()){\n\t\tvar df = cframe.copy();\n\t\tdf.set(\"\");\n\t\tif(typeof this.dataframes[prop] == \"undefined\"){\n\t\t\tthis.dataframes[prop] = [];\n\t\t}\n\t\tthis.dataframes[prop].push(df);\t\t\n\t\treturn df;\n\t}\n\telse if(cframe.isObject()) {\n\t\tif(typeof this.children[prop] == \"undefined\"){\n\t\t\tthis.children[prop] = [];\n\t\t}\n\t\tif(!cframe.isClassChoice()){\n\t\t\tvar empty = cframe.createEmpty(FrameHelper.genBNID());\n\t\t\tthis.children[prop].push(empty);\t\t\t\n\t\t\treturn empty;\n\t\t}\n\t\telse if(cls){\n\t\t\tvar empty = cframe.createEmptyChoice(cls, FrameHelper.genBNID());\n\t\t\tthis.children[prop].push(empty);\n\t\t\treturn empty;\n\t\t}\n\t\telse {\n\t\t\tvar clss = cframe.getClassChoices();\n\t\t\tif(clss && clss.length){\n\t\t\t\tvar empty = cframe.createEmptyChoice(clss[0], FrameHelper.genBNID())\n\t\t\t\tthis.children[prop].push(empty);\n\t\t\t\treturn empty;\n\t\t\t}\t\n\t\t}\n\t}\n\treturn false;\n}\n\nObjectFrame.prototype.addPropertyValue = function(prop, value){\n\tvar cframe = this.getPropertyClassFrame(prop);\n\tvar df = cframe.createEmpty();\n\tdf.set(value);\n\tthis.dataframes[prop].push(df);\n\treturn df;\n}\n\nObjectFrame.prototype.removePropertyValue = function(prop, value, index){\n\tif(typeof this.dataframes[prop] != \"undefined\"){\n\t\tvar nfvals = [];\n\t\tfor(var i = 0; i < this.dataframes[prop].length; i++){\n\t\t\tif(typeof index != \"undefined\" && index != i){\n\t\t\t\tthis.dataframes[prop][i].index = nfvals.length;\n\t\t\t\tnfvals.push(this.dataframes[prop][i]);\t\t\t\t\n\t\t\t}\n\t\t\telse if(typeof index == \"undefined\" && this.dataframes[prop][i].contents != value){\n\t\t\t\tthis.dataframes[prop][i].index = nfvals.length;\n\t\t\t\tnfvals.push(this.dataframes[prop][i]);\n\t\t\t}\n\t\t}\n\t\tif(nfvals.length){\n\t\t\tthis.dataframes[prop] = nfvals;\n\t\t}\n\t\telse {\n\t\t\tdelete(this.dataframes[prop]);\t\t\t\n\t\t}\n\t}\n\telse if(typeof this.children[prop] != \"undefined\"){\n\t\tvar kids = this.children[prop];\n\t\tvar nkids = [];\n\t\tfor(var i = 0; i<kids.length; i++){\n\t\t\tif(kids[i].subjid != value){\n\t\t\t\tnkids.push(kids[i]);\n\t\t\t}\n\t\t\tif(nkids.length){\n\t\t\t\tthis.children[prop] = nkids;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdelete(this.children[prop]);\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\talert(\"No prop \" + prop);\n\t}\n}\n\nObjectFrame.prototype.error = function(msg, more){\n\talert(msg);\n}\n\nObjectFrame.prototype.isObject = function() { return true;}\nObjectFrame.prototype.isData = function() { return false;}\n\n\n function DataFrame(frame, parent) {\n\tthis.err = false;\n\tthis.parent = parent;\n\t//the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tif(frame){\n\t\tthis.load(frame);\n\t}\n}\n\nDataFrame.prototype.isValidType = function(dt){\n\tvar vtypes = [\"datatypeProperty\", \"objectProperty\", \"restriction \"];\n\tif(vtypes.indexOf(dt) == -1) return false;\n\treturn true;\n}\n\nDataFrame.prototype.load = function(frame){\n\tif(typeof frame != \"object\") {\n\t\tthis.error(\"No frame passed to load\");\n\t\treturn;\n\t}\n\t//all the meta-data carried in frames: \n\tthis.type = frame.type;\n\tthis.property = frame.property;\n\tthis.range = frame.range; \n\tthis.rangeValue = frame.rangeValue;\n\tthis.domain = frame.domain;\n\tthis.domainValue = frame.domainValue;\n\tthis.frame = frame.frame;\n\tthis.label = frame.label;\n\tthis.comment = frame.comment;\n\tvar restriction = frame.restriction;\n\tif(restriction && typeof restriction == \"object\"){\n\t\tthis.restriction = new Restriction(restriction);\n\t}\n\telse this.restriction = false;\n}\n\nDataFrame.prototype.getAsFrame = function(){\n\t var ff = { type: this.type, property: this.property};\n\t if(this.range) ff.range = this.range;\n\t if(this.rangeValue) ff.rangeValue = this.rangeValue;\n\t if(this.domain) ff.domain = this.domain;\n\t if(this.domainValue) ff.domainValue = this.domainValue;\n\t if(this.frame) ff.frame = this.frame;\n\t if(this.label) ff.label = this.label;\n\t if(this.comment) ff.comment = this.comment;\n\t return ff;\n}\n\nDataFrame.prototype.hasRestriction = function(){\n\t if(this.restriction) {\n\t\t return this.restriction.hasCardRestriction();\n\t }\n\t return false;\n}\n\nDataFrame.prototype.copy = function(newid){\n\tvar copy = new DataFrame(this, this.parent);\n\tif(newid) copy.domainValue = newid;\n\treturn copy;\n} \n\nDataFrame.prototype.getLabel = function(){\n\tvar lab = \"\";\n\tif(this.label && typeof this.label == 'object') lab = this.label[\"@value\"]; \n\tif(this.label && typeof this.label == 'string') lab = this.label; \n\tif(!lab && this.property) lab = FrameHelper.labelFromURL(this.property);//always return something\n\tif(!lab) lab = FrameHelper.labelFromURL(this.cls);\n\treturn lab\n}\n\nDataFrame.prototype.getType = function(){\n\tif(this.range) return this.range;\n\tif(this.rangeValue && this.rangeValue.type) return this.rangeValue.type;\n\treturn false;\n}\n\nObjectFrame.prototype.getLabel = DataFrame.prototype.getLabel;\n\nDataFrame.prototype.getComment = function(){\n\tvar comment = \"\";\n\tif(this.comment && typeof this.comment == 'object') comment = this.comment[\"@value\"]; \n\tif(this.comment && typeof this.comment == 'string') comment = this.comment; \n\treturn comment;\n}\n\nObjectFrame.prototype.getComment = DataFrame.prototype.getComment;\n\n\nDataFrame.prototype.error = function(msg){\n\tif(msg)\tthis.err = msg;\n\treturn this.err;\n}\n\nDataFrame.prototype.isValid = function(){\n\tif(!(this.type && this.isValidType(this.type))){\n\t\tthis.error(\"Missing or Illegal Frame Type \" + this.type);\n\t\treturn false;\n\t}\n\tif(!(this.property)){\n\t\tthis.error(\"Missing Frame Property\");\n\t\treturn false;\n\t}\n\tif(!(this.domain)){\n\t\tthis.error(\"Missing Frame Domain\");\n\t\treturn false;\n\t}\n\tif(!(this.range)){\n\t\tthis.error(\"Missing Frame Range\");\n\t\treturn false;\n\t}\n\tif(this.isObjectProperty() && !(this.frame && typeof this.frame == \"object\")){\n\t\tthis.error(\"Missing Object Frame\");\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nDataFrame.prototype.isObjectProperty = function(){\n\treturn this.type == \"objectProperty\";\n}\n\nDataFrame.prototype.isDatatypeProperty = function(){\n\treturn this.type == \"datatypeProperty\";\n}\n\nDataFrame.prototype.isLogic = function(){\n\tif(this.type == \"and\" || this.type == \"or\" || this.type == \"xor\"){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nDataFrame.prototype.isRestriction = function(){\n\treturn this.type == \"restriction\";\n}\n\nDataFrame.prototype.ftype = function(){\n\tif(this.isEntity()) return \"entity\";\n\tif(this.isDatatypeProperty()) return \"data\";\n\tif(this.isChoice()) return \"oneOf\";\n\tif(this.isObject()) return \"object\";\n\tif(this.isLogic()) return \"logic\";\n\tif(this.isClassChoice()) return \"class_choice\";\n}\n\nDataFrame.prototype.isClassChoice = function(){\n\treturn(this.frame && this.frame.type == \"class_choice\");\n}\n\nDataFrame.prototype.isString = function(){\n\tif(this.range == FrameHelper.getStdURL(\"xsd\", \"string\")){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nDataFrame.prototype.getChoiceOptions = function(){\n\tvar opts = [];\n\tfor(var i = 0; i<this.frame.elements.length; i++){\n\t\tvar option = {};\n\t    if(this.frame.elements[i].label){\n\t    \toption.label = this.frame.elements[i].label[\"@value\"];\n\t    }\n\t    else {\n\t    \toption.label = FrameHelper.labelFromURL(this.frame.elements[i].class);\n\t    }\n\t    option.value = this.frame.elements[i].class;\n\t    opts.push(option);\n\t}\n\treturn opts;\n}\n\nDataFrame.prototype.lang = function(){\n\treturn \"en\";\n}\n\nDataFrame.prototype.isChoice = function(){\n\treturn(this.frame && this.frame.type == \"oneOf\");\t\n}\n\nDataFrame.prototype.isEntity = function(){\n\treturn(this.frame && this.frame.type == \"entity\");\t\n}\n\nDataFrame.prototype.isData = function(){\t\n\treturn (this.isEntity() || this.isChoice() || this.isDatatypeProperty());\n}\n\nDataFrame.prototype.isObject = function(){\t\n\treturn (this.isObjectProperty() && this.frame && !(this.isChoice() || this.isEntity()));\n}\n\nDataFrame.prototype.getTypeShorthand = function(){\n\tif(this.isEntity()) return \"entity\";\n\telse if(this.isChoice()) return \"choice\";\n\telse return FrameHelper.getShorthand(this.range);\n}\n\nDataFrame.prototype.get = function(format){\t\n\tif(this.contents){\n\t\treturn this.contents;\n\t}\n\tif(this.isDatatypeProperty() &&  this.rangeValue &&  typeof this.rangeValue[\"@value\"] != \"undefined\"){\n\t\treturn this.rangeValue[\"@value\"];\n\t}\n\telse if(this.isChoice() || this.isEntity()){\n\t\treturn this.frame.domainValue;\n\t}\n\treturn \"\";\n}\n\nDataFrame.prototype.set = function(value, normalizer){\n\tif(normalizer) value = normalizer(value, this);\n\tthis.contents = value;\n\tif(this.isChoice() || this.isEntity()){\n\t\tthis.frame.domainValue = value;\n\t}\n\tif(this.isDatatypeProperty() && this.rangeValue){\n\t\tthis.rangeValue[\"@value\"] = value;\n\t}\n}\n\nDataFrame.prototype.clear = function(){\t\n\tif(this.isEntity() || this.isChoice() || this.isDatatypeProperty()){\n\t\tthis.set(\"\");\n\t}\n}\n\n function ClassFrame(frame, parent) {\n\tthis.err = false;\n\tthis.parent = parent;\n\tthis.children = {};\n\t//the id of the object that owns this dataframe\n\tthis.subjid = (parent ? parent.subjid : false);\n\tif(frame){\n\t\tthis.load(frame);\n\t}\n}\n\nClassFrame.prototype = DataFrame.prototype;\n\nClassFrame.prototype.loadFromObjectFrame = function(par, child){\n\t//all the meta-data carried in frames: \n\tthis.type = \"objectProperty\";\n\tthis.property = par.property;\n\tthis.range = par.range; \n\tthis.rangeValue = child.subjid;\n\tthis.domain = par.cls;\n\tthis.domainValue = par.subjid;\n\tthis.label = par.getLabel();\n\tthis.comment = par.getComment();\n\tthis.restriction = par.restriction;\t\n}\n\nClassFrame.prototype.createEmptyChoice = function(cls, newid){\n\tvar cf = this.getChosenClassFrames(cls);\n\tvar objframe = new ObjectFrame(cls);\n\tif(newid) objframe.subjid = newid;\n\tobjframe.loadClassFrames(cf);\n\tvar fframe = objframe.fillFromSchema();\n\treturn fframe;\n}\n\nClassFrame.prototype.getChosenClassFrames = function(chosen){\n\tvar nc = [];\n\tfor(var i = 0; i<this.frame.operands.length; i++){\n\t\tfor(var j = 0; j<this.frame.operands[i].length; j++){\n\t\t\tif(chosen == this.frame.operands[i][j].domain){\n\t\t\t\tnc = nc.concat(this.frame.operands[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\treturn nc;\n}\n\nClassFrame.prototype.createEmpty = function(newid){\n\tif(this.isObject()){\n\t\tvar objframe = new ObjectFrame(this.range);\n\t\tif(newid) objframe.subjid = newid;\n\t\tobjframe.loadClassFrames(this.frame);\n\t\tvar fframe = objframe.fillFromSchema();\n\t\treturn fframe;\n\t}\n\telse if(this.isData()){\n\t\tvar dataframe = this.copy();\n\t\tdataframe.set(\"\");\n\t\treturn dataframe;\n\t}\n}\n\nClassFrame.prototype.cloneDataFrame = function(newid, other){\n\treturn other;\n} \n\nClassFrame.prototype.clone = function(newid, other){\n\tif(this.isObject()){\n\t\talert(\"cannot clone class frame\");\n\t}\n\telse if(this.isData()){\n\t\treturn this.cloneDataFrame(newid, other);\n\t}\n\t\n}\n\nClassFrame.prototype.getClassChoices = function(){\n\tvar choices = [];\n\tfor(var i = 0; i<this.frame.operands.length; i++){\n\t\tfor(var j = 0; j<this.frame.operands[i].length; j++){\n\t\t\tvar domcls = this.frame.operands[i][j].domain;\n\t\t\tif(domcls && choices.indexOf(domcls) == -1){\n\t\t\t\tchoices.push(domcls);\n\t\t\t}\n\t\t}\n\t}\n\treturn choices;\n\t\n}\n\nClassFrame.prototype.getChosenClassFrame = function(chosen){\n\tfor(var i = 0; i<this.frame.operands.length; i++){\n\t\tvar operand = this.frame.operands[i];\n\t\tif(operand.length){\n\t\t\tfor(var j = 0; j<operand.length; j++){\n\t\t\t\tif(operand[j] && (chosen == operand[j].domain)){\n\t\t\t\t\tvar cf = new ClassFrame(operand);\n\t\t\t\t\treturn cf;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if(operand.range && chosen == operand.range){\n\t\t\tvar cf = new ClassFrame(operand);\n\t\t\treturn cf;\n\t\t}\n\t}\n\treturn false;\n}\n\nClassFrame.prototype.getChosenFrame = function(dataframe){\n\treturn dataframe;\n}\n\n\nfunction Restriction(restriction){\n\tthis.min = 0;\n\tthis.max = 0;\n\tif(restriction) this.loadRestriction(restriction);\n}\n\nRestriction.prototype.hasCardRestriction = function(){\n\tif(this.min == 0 && this.max == 0) return false;\n\treturn true;\n}\n\nRestriction.prototype.loadRestriction = function(restriction){\n\tif(typeof restriction.cardinality != \"undefined\"){\n\t\tthis.max = restriction.cardinality;\n\t\tthis.min = restriction.cardinality;\n\t}\n\telse if(typeof restriction.maxCardinality != \"undefined\"){\n\t\tthis.max = restriction.maxCardinality;\n\t}\n\telse if(typeof restriction.minCardinality != \"undefined\"){\n\t\tthis.min = restriction.minCardinality;\n\t}\n\telse if(typeof restriction.type != \"undefined\" && restriction.type == \"and\" && typeof restriction.operands == \"object\"){\n\t\tfor(var i = 0; i<restriction.operands.length; i++){\n\t\t\tvar nrest = new Restriction(restriction.operands[i]);\n\t\t\tif(this.max == 0 && nrest.max > 0) this.max = nrest.max;\n\t\t\telse if(this.max > 0 && nrest.max > 0 && nrest.max < this.max) this.max = nrest.max;\t\t\t\t\n\t\t\tif(this.min == 0 && nrest.min > 0) this.min = nrest.min; \n\t\t\telse if(this.min > 0 && nrest.min > 0 && nrest.min > this.min) this.min = nrest.min;\n\t\t}\n\t}\n}\n\nmodule.exports=ObjectFrame\n","/**\n * Terminus UI object\n *\n * Traffic control of messages going between different Terminus UI pages and features\n *\n * @param opts - options array\n */\nconst FrameHelper = require('./FrameHelper');\nconst ApiExplorer = require('./ApiExplorer');\nconst TerminusDocumentViewer = require('./client/TerminusDocument');\nconst TerminusDBsdk = require('./client/TerminusDB');\nconst TerminusQueryViewer = require('./client/TerminusQuery');\nconst TerminusMappingViewer = require('./client/TerminusMapping');\nconst TerminusSchemaViewer = require('./client/TerminusSchema');\nconst TerminusServersdk = require('./client/TerminusServer');\nconst TerminusURLLoader = require('./client/TerminusURL');\nconst TerminusPluginManager = require('./plugins/TerminusPlugin');\n\nfunction TerminusUI(opts){\n\tthis.client = new TerminusDB.WOQLClient();\n\tthis.controls = [];\n\tthis.setOptions(opts);\n}\n\n/*\n * Client connects to specified server and specified part\n * opts is a json with the following fields:\n * server: mandatory URL of the server to connect to\n * key: optional client API key\n * dbid: id of the database to connect to\n * schema: if set, the UI will load the schema page after connecting\n * query: if set, the query will be sent to the server and the results will be loaded on the query page\n * document: if set, the document page corresponding to this document will be loaded after connecting\n *\n * (note: schema, query, document are mutually exclusive and must also have a dbid set)\n */\nTerminusUI.prototype.connect = function(opts){\n\tvar self = this;\n\tthis.client.connectionConfig.server = false;\n\tvar key = ((opts && opts.key) ? opts.key : false);\n\tthis.showBusy(\"Connecting to server at \" + opts.server);\n\treturn this.client.connect(opts.server, key)\n\t.then( function(response) {\n\t\tself.clearBusy();\n\t\tif(opts && opts.db && self.getDBRecord(opts.db)){\n\t\t\tself.connectToDB(opts.db);\n\t\t\tif(opts.document && self.showView(\"get_document\")){\n\t\t\t\tself.showDocument(opts.document);\n\t\t\t}\n\t\t\telse if(opts.schema && self.showView(\"get_schema\")){\n\t\t\t\tself.showSchemaPage(opts.schema);\n\t\t\t}\n\t\t\telse if(opts.query && self.showView(\"woql_select\")){\n\t\t\t\tself.showQueryPage(opts.query);\n\t\t\t}\n\t\t\telse if(opts.explorer && self.showView(\"api_explorer\")){\n\t\t\t\tself.showExplorer(opts.explorer);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tself.showDBMainPage();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tself.showServerMainPage();\n\t\t}\n\t\tself.redraw();\n\t})\n\t.catch(function(err) {\n\t\tself.clearBusy();\n\t\tself.showError(err);\n\t});\n}\n\n/**\n * Sends a request to create a new database to the server and interprets the response\n *\n * dbdets is a json object with the following fields:\n * id: the id of the new database (alphanumeric, no spaces, url friendly) mandatory\n * title: the text name of the new database for tables, etc. mandatory\n * description: text description of the database (optional)\n * key: a API client key for server auth\n * schema: the url of another Terminus DB from which to import schema\n * instance: the url of another Terminus DB from which to import data\n *\n */\nTerminusUI.prototype.createDatabase = function(dbdets){\n\tvar self = this;\n\tif(!dbdets.id || !dbdets.title){\n        return Promise.reject(new Error(self.getBadArguments(\"createDatabase\", \"ID and title are mandatory fields\")));\n\t}\n\tvar dbid = dbdets.id;\n\tvar myserver = this.client.connectionConfig.server;\n\tself.showBusy(\"Creating Database \" + dbdets.title + \" with id \" + dbid);\n\tvar dbdoc = this.generateNewDatabaseDocument(dbdets);\n\treturn this.client.createDatabase(dbid, dbdoc)\n\t.then(function(response){ //import schema into newly created DB\n\t\tif(dbdets.schema){\n\t\t\tself.showBusy(\"Fetching imported schema from \" + dbdets.schema);\n\t\t\tvar opts = (dbdets.key ?  {key: dbdets.key } : {});\n\t\t\treturn self.client.getSchema(dbdets.schema, opts)\n\t\t\t.then(function(response){\n\t\t\t\tself.showBusy(\"Updating database with new schema\");\n\t\t\t\tself.client.connectionConfig.server = myserver;\n\t\t\t\tself.client.connectionConfig.dbid = dbid;\n\t\t\t\treturn self.client.updateSchema(false, response);\n\t\t\t})\n\t\t\t.then(function(response){\n\t\t\t\tself.clearBusy();\n\t\t\t\treturn response;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tself.clearBusy();\n\t\t}\n\t\treturn response;\n\t})\n\t.then(function(response){ //reload list of databases in background..\n\t\treturn self.refreshDBList()\n\t\t.then(function(response){\n\t\t\tif(crec = self.client.connection.getDBRecord(dbid)){\n\t\t\t\tself.client.connectionConfig.dbid = dbid;\n\t\t\t\tself.showDBMainPage();\n\t\t\t\tself.showMessage(\"Successfully Created Database \" + dbid, \"success\");\n\t\t\t}\n\t\t\telse {\n\t\t        return Promise.reject(new Error(self.getCrashString(\"createDatabase\", \"Failed to retrieve record of created database \" + dbid)));\n\t\t\t}\n\t\t})\n\t})\n\t.catch(function(error){\n\t\tself.clearBusy();\n\t\tself.showError(error);\n\t});\n}\n\n/**\n * Deletes the database with the passed id from the currently connected server\n */\nTerminusUI.prototype.deleteDatabase = function(dbid){\n\tvar self = this;\n\tvar delrec = this.client.connection.getDBRecord();\n\tvar lid = (dbid ? dbid : this.db());\n\tvar dbn = (delrec && delrec['rdfs:label'] && delrec['rdfs:label'][\"@value\"] ? delrec['rdfs:label'][\"@value\"] + \" (id: \" + lid + \")\" : lid);\n\tthis.showBusy(\"Deleting database \" + dbn);\n\treturn this.client.deleteDatabase(dbid)\n\t.then(function(response){\n\t\tself.clearBusy();\n\t\tself.client.connectionConfig.dbid = false;\n\t\tself.removeDB(dbid);\n\t\tself.showServerMainPage();\n\t\tself.showMessage(\"Successfully Deleted Database \" + dbn, \"success\");\n\t\tself.refreshDBList();\n\t\treturn response;\n\t})\n\t.catch(function(error){\n\t\tself.clearBusy();\n\t\tself.showError(error);\n\t});\n}\n\n/*\n * Transforms a details (id, title, description) array into  json-ld document\n */\nTerminusUI.prototype.generateNewDatabaseDocument = function(dets){\n\tvar doc = {\n\t\t\"@context\" : {\n\t\t\trdfs: \"http://www.w3.org/2000/01/rdf-schema#\",\n\t\t\tterminus: \"https://datachemist.net/ontology/terminus#\"\n\t\t},\n\t\t\"@type\": \"terminus:Database\"\n\t}\n\tif(dets.title){\n\t\tdoc['rdfs:label'] = {\n\t\t\t\"@language\":  \"en\",\n\t\t\t\"@value\": dets.title\n\t\t};\n\t}\n\tif(dets.description){\n\t\tdoc['rdfs:comment'] = {\n\t\t\t\"@language\":  \"en\",\n\t\t\t\"@value\": dets.description\n\t\t};\n\t}\n\tdoc['terminus:allow_origin'] = { \"@type\" : \"xsd:string\", \"@value\" : \"*\" };\n\treturn doc;\n}\n\nTerminusUI.prototype.getBadArguments = function(fname, str){\n\treturn \"Bad arguments to \" + fname + \": \" + str;\n}\n\nTerminusUI.prototype.getCrashString = function(fname, str){\n\treturn \"Results from \" + fname + \" indicate the possibility of a system failure \" + str;\n}\n\n/*\n * Parses the passed URL and turns it into a call to the connect function - loads the appropriate endpoing\n */\nTerminusUI.prototype.load = function(url, key){\n\tvar args = {};\n\tif(url && url.indexOf(\"/document/\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/document/\"));\n\t\targs.document = url.substring(url.indexOf(\"/document/\")+10);\n\t}\n\telse if(url && url.indexOf(\"/schema\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/schema\"));\n\t\targs.schema = {};\n\t}\n\telse if(url && url.indexOf(\"/woql\") != -1){\n\t\turl = url.substring(0, url.indexOf(\"/query\"));\n\t\targs.query = url.substring(url.indexOf(\"/query\")+7);\n\t}\n\targs.server = url;\n\tif(key) args.key = key;\n\treturn this.connect(args);\n}\n\n/**\n * Fetches the DB URL from the url by chopping off the extra bits\n */\nTerminusUI.prototype.getConnectionEndpoint = function(url){\n\tif(url && url.lastIndexOf(\"/schema\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/schema\"));\n\t}\n\tif(url && url.lastIndexOf(\"/document\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/document\"));\n\t}\n\tif(url && url.lastIndexOf(\"/frame\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/frame\"));\n\t}\n\tif(url && url.lastIndexOf(\"/woql\") != -1){\n\t\treturn url.substring(0, url.lastIndexOf(\"/woql\"));\n\t}\n\treturn url;\n}\n\nTerminusUI.prototype.server = function(){\n\treturn this.client.connectionConfig.server;\n}\n\nTerminusUI.prototype.db = function(){\n\treturn this.client.connectionConfig.dbid;\n}\n\nTerminusUI.prototype.clearServer = function(){\n\tthis.client.connectionConfig.server = false;\n}\n\nTerminusUI.prototype.connectToDB = function(dbid){\n\tthis.client.connectionConfig.dbid = dbid;\n}\n\nTerminusUI.prototype.clearDB = function(){\n\tthis.client.connectionConfig.dbid = false;\n}\n\nTerminusUI.prototype.removeDB = function(db, url){\n\tthis.client.connection.removeDBFromConnection(db, url);\n}\n\nTerminusUI.prototype.getDBRecord = function(db, url){\n\treturn this.client.connection.getDBRecord(db, url);\n}\n\nTerminusUI.prototype.refreshDBList = function(){\n\tvar self = this;\n\treturn this.client.connect();\n}\n\nTerminusUI.prototype.showServerMainPage = function(){\n\tthis.viewer = new TerminusServersdk.TerminusServerViewer(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showLoadURLPage = function(val){\n\tthis.viewer = new TerminusURLLoader(this, val);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showDBMainPage = function(){\n\tthis.viewer = new TerminusDBsdk.TerminusDBViewer(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showCreateDBPage = function(){\n\tthis.viewer = new TerminusDBsdk.TerminusDBCreator(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showSchemaPage = function(durl){\n\tthis.viewer = new TerminusSchemaViewer(this);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showQueryPage = function(query){\n\tthis.viewer = new TerminusQueryViewer(this, query, this.options);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showMappingPage = function(mapping){\n\tthis.viewer = new TerminusMappingViewer(this, mapping, this.options);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showDocument = function(durl){\n\tthis.viewer = new TerminusDocumentViewer(this, \"view\", this.getDocViewerOptions());\n\tthis.viewer.loadDocument(durl);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.showCreateDocument = function(durl){\n\tthis.viewer = new TerminusDocumentViewer(this, \"create\", this.getDocCreatorOptions());\n\tthis.viewer.loadCreateDocument(durl);\n\tthis.redrawMainPage();\n}\n\nTerminusUI.prototype.redrawMainPage = function(){\n\tFrameHelper.removeChildren(this.main);\n\tif(this.viewer){\n\t\tthis.main.appendChild(this.viewer.getAsDOM());\n\t}\n}\n\nTerminusUI.prototype.showResult = function(response){\n\tthis.showMessage(response, \"success\");\n};\n\nTerminusUI.prototype.showError = function(response){\n\tthis.showMessage(response, \"error\");\n};\n\nTerminusUI.prototype.clearMessages = function(response){\n\tif(this.messages) FrameHelper.removeChildren(this.messages);\n};\n\nTerminusUI.prototype.clearMainPage = function(){\n\tif(this.main) FrameHelper.removeChildren(this.main);\n}\n\nTerminusUI.prototype.setMessageDOM = function(dom){\n\tthis.messages = dom;\n}\n\nTerminusUI.prototype.setbuttonControls = function(dom){\n\tthis.buttons = dom;\n}\n\nTerminusUI.prototype.setControllerDOM = function(dom){\n\tthis.controller = dom;\n}\n\nTerminusUI.prototype.setExplorerDOM = function(dom){\n\tthis.explorer = dom;\n}\n\nTerminusUI.prototype.setPluginsDOM = function(dom){\n\tthis.plugins = dom;\n}\n\nTerminusUI.prototype.setViewerDOM = function(dom){\n\tthis.main = dom;\n}\n\nTerminusUI.prototype.draw = function(comps, slocation){\n\tif(comps && comps.buttons) this.setbuttonControls(comps.buttons);\n\tif(comps && comps.messages) this.setMessageDOM(comps.messages);\n\tif(comps && comps.controller) this.setControllerDOM(comps.controller);\n\tif(comps && comps.explorer) this.setExplorerDOM(comps.explorer);\n\tif(comps && comps.viewer) this.setViewerDOM(comps.viewer);\n\tif(comps && comps.plugins) this.setPluginsDOM(comps.plugins);\n\tif(this.buttons){\n\t\tthis.toggleControl();\n\t}\n\tif(this.controller){\n\t\tthis.drawControls();\n\t}\n\tif(this.plugins){\n\t\tthis.drawPlugins();\n\t}\n\tif(slocation && slocation.server){\n\t\tif(typeof this.client.connection.connection[slocation.server] == \"undefined\") this.connect(slocation)\n\t\t.catch(function(error){\n\t\t\tthis.showLoadURLPage();\n\t\t\tthis.showError(error);\n\t\t});\n\t}\n\telse {\n\t\tthis.showLoadURLPage();\n\t};\n}\n\nTerminusUI.prototype.redraw = function(msg){\n\tthis.clearMessages();\n\tif(this.controller){\n\t\tFrameHelper.removeChildren(this.controller);\n\t\tthis.drawControls();\n\t}\n\tif(this.explorer){\n\t\tFrameHelper.removeChildren(this.explorer);\n\t\t//this.drawExplorer();\n\t}\n\tif(this.viewer){\n\t\tthis.redrawMainPage();\n\t}\n\tif(msg) this.showMessage(msg);\n};\n\nTerminusUI.prototype.toggleControl = function(){\n  var self = this;\n  this.buttons.client.addEventListener('click', function(){\n    FrameHelper.removeChildren(self.controller);\n    FrameHelper.removeChildren(self.explorer);\n    self.drawControls();\n    self.showServerMainPage();\n  })\n  this.buttons.explorer.addEventListener('click', function(){\n    FrameHelper.removeChildren(self.controller);\n    FrameHelper.removeChildren(self.explorer);\n    self.drawExplorer();\n  })\n}\n\nTerminusUI.prototype.drawControls = function(){\n\tthis.controls = [];\n\tthis.loadControls();\n\tfor(var i = 0; i<this.controls.length; i++){\n\t\tvar ncontrol = this.controls[i];\n\t\tif(ncontrol && (nd = ncontrol.getAsDOM())){\n\t\t\tthis.controller.appendChild(nd);\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.drawExplorer = function(){\n\tif(this.explorer){\n\t\tif(this.showControl(\"api_explorer\")){\n\t\t\tvar exp = new ApiExplorer(this);\n\t\t\tae = exp.getAsDOM();\n\t\t\tthis.explorer.appendChild(ae);\n\t\t\tthis.explorer.style.display = 'block';\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.loadControls = function(){\n\tif(this.showControl('server')){\n\t\tvar sc = new TerminusServersdk.TerminusServerController(this);\n\t\tif(sc) {\n\t\t\tthis.controls.push(sc);\n\t\t}\n\t\tif(this.db() && this.showControl(\"db\")){\n\t\t\tvar sc = new TerminusDBsdk.TerminusDBController(this);\n\t\t\tif(sc) this.controls.push(sc);\n\t\t}\n\t}\n}\n\nTerminusUI.prototype.showControl = function(el){\n\tif(this.show_controls.indexOf(el) == -1) return false;\n\tif(this.pseudoCapability(el)) return true;\n\tif(this.client.connection.capabilitiesPermit(el)) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.showView = function(el){\n\tif(this.show_views.indexOf(el) == -1) return false;\n\tif(this.pseudoCapability(el)) return true;\n\tif(this.client.connection.capabilitiesPermit(el)) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.clearBusy = function(response){\n\tthis.clearMessages();\n\tif(this.viewer && typeof this.viewer.busy == \"function\") this.viewer.busy(false);\n}\n\nTerminusUI.prototype.showMessage = function(msg, type){\n\tif(this.messages){\n        var md = document.createElement('div');\n        md.setAttribute('class', 'terminus-show-msg terminus-msg-' + type);\n        md.appendChild(document.createTextNode(msg));\n\t\tthis.messages.appendChild(md);\n\t}\n};\n\nTerminusUI.prototype.showBusy = function(msg){\n\tthis.showMessage(msg, \"busy\");\n\tif(this.viewer && typeof this.viewer.busy == \"function\") this.viewer.busy(msg);\n};\n\nTerminusUI.prototype.pseudoCapability = function(el){\n\tvar pseuds = [\"server\", \"db\", \"change-server\", \"api_explorer\", \"import_schema\", \"schema_format\"];\n\tif(pseuds.indexOf(el) == -1) return false;\n\treturn true;\n}\n\nTerminusUI.prototype.setOptions = function(opts){\n\tthis.show_controls = opts && opts.controls ? opts.controls :\n\t\t[\"server\", \"db\", \"change-server\", \"schema_format\",\n\t\t\t\"import_schema\", \"class_frame\", \"create_database\",\n\t\t\t\"create_document\", \"get_document\", \"update_schema\",\n\t\t\t\"get_schema\", \"woql_select\"\n\t\t];\n\tthis.show_views = opts && opts.views ? opts.views : this.show_controls;\n\tif(opts.document){\n\t\tthis.document_options = opts.document;\n\t}\n\tif(opts.schema){\n\t\tthis.schema_options = opts.schema;\n\t}\n\tthis.piman = new TerminusPluginManager();\n\tvar self = this;\n\tthis.piman.init(opts.plugins, function(){\n\t\tself.redraw();\n\t});\n\tif(opts.css && this.piman){\n\t\tthis.piman.loadPageCSS(opts.css);\n\t}\n\tthis.loadControls();\n}\n\nTerminusUI.prototype.pluginAvailable = function(p){\n\treturn this.piman.pluginAvailable(p);\n}\n\nTerminusUI.prototype.drawPlugins = function(){\n\tif(!this.piman) {\n\t\tconsole.log(new Error(\"No plugin manager initialised in UI object\"));\n\t\treturn false;\n\t}\n\tthis.plugins.appendChild(this.piman.getAsDOM(this));\n}\n\nTerminusUI.prototype.getDocViewerOptions = function(){\n\tif(this.document_options && this.document_options['view']){\n\t\treturn this.document_options['view'];\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.getDocCreatorOptions = function(){\n\tif(this.document_options && this.document_options['view']){\n\t\treturn this.document_options['view'];\n\t}\n\treturn false;\n}\n\nTerminusUI.prototype.getClassFrameOptions = function(){\n\treturn this.viewdoc_options;\n}\n\nmodule.exports=TerminusUI\n","/**\n * @file Javascript Api explorer tool\n * @author Kitty Jose\n * @license Copyright 2018-2019 Data Chemist Limited, All Rights Reserved. See LICENSE file for more\n *\n * @summary Set of functions used across scripts\n */\nconst Codemirror= require('./plugins/codemirror.terminus')\n// function to read Files\nfunction readFile(file){\n  if (window.XMLHttpRequest){\n    // code for IE7+, Firefox, Chrome, Opera, Safari\n    xmlhttp=new XMLHttpRequest();\n  }\n  else{\n    // code for IE6, IE5\n    xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\");\n  }\n  xmlhttp.open(\"GET\",file,false);\n  xmlhttp.send();\n  xmlDoc=xmlhttp.responseText;\n  return xmlDoc;\n} // readFile()\n\n// function to write api call signatures from woql client\nfunction getFunctionSignature(which){\n  var sigs = {};\n  sigs.connect = {\n    spec   : \"WOQLClient.connect(server_url, key)\",\n    descr  : \"\\n\\nConnect to a Terminus server at the given URI with an API key\"\n                + \"Stores the terminus:ServerCapability document returned in the connection register\"\n                + \"which stores, the url, key, capabilities, and database meta-data for the connected server\"\n                + \"If the curl argument is false or null, the this.server will be used if present,\"\n                + \" or the promise will be rejected.\",\n    result : \"HTTP 200 on success, 409 for already existing database, otherwise error code\",\n    args   : {server_url : 'url', key: 'Api key'},\n    options: { title: \"\", description: \"\" }\n  };\n  sigs.create = {\n    spec    : \"WOQLClient.createDatabase(database_url, details, key)\",\n    descr   : \"\\n\\nCreate a Terminus Database by posting a terminus:\"\n                + \"The dburl argument can be \\n1) a valid URL of a terminus database or \\n2) a valid Terminus \"\n                + \"database id or \\n3) can be omitted\"\n                + \"\\nin case 2) the current server will be used, \"\n    \t\t        + \"\\nin case 3) the database id will be set from the @id field of the terminuse:Database document.\"\n                + \"\\nThe second (details) argument contains a \\nterminus:Database document with a mandatory \"\n                + \"\\nrdfs:label field and an optional rdfs:comment field.\"\n                +  \"\\nThe third (key) argument contains an optional API key \",\n    result : \"HTTP 200 on success, 409 for already existing database, otherwise error code\",\n    args   : {database_url : 'url', details: '', key: ' Api key'},\n    options: { title: \"\", description: \"\" }\n  };\n  sigs.delete = {\n      spec  : \"WOQLClient.deleteDatabase(database_url, options)\",\n      descr : \"\\n\\nDeletes a Database\"\n                + \"\\nThe first (dburl) argument can \\n1) a valid URL of a terminus database or \\n2) a valid database id\"\n                + \" or \\n3) ommitted in case \\n2) the current server will be used, and in case \\n3) the current server \"\n                + \"and database will be used. \\nThe second argument (opts) is an options json - no options are\"\n                + \" currently supported for this function\",\n      result: \"HTTP 200 on success, otherwise error code\",\n  };\n  sigs.getSchema = {\n    spec   : \"WOQLClient.getSchema(schema_url, options)\",\n    descr  : \"\\n\\nGets the schema of a database. \\nThe first (schurl) argument can be \"\n              + \"\\n1) a valid URL of a terminus database or \\n2) a valid database id or \"\n              + \"\\n3) omitted, \\nin case 2) the current server will be used, and \\nin case 3) the current server and\"\n              + \"database will be used the second argument (opts) is an options json - \"\n              + \"\\nopts.format is optional and defines which format is requested (*json / turtle)\"\n              + \"\\nopts.key is an optional API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    options: { format: \"turtle\" }\n  };\n  sigs.getClassFrames = {\n    spec   : \"WOQLClient.getClassFrame = function(cfurl, cls, opts)\",\n    descr  : \"\\n\\nRetrieves a WOQL query on the specified database which updates the state and returns the results\"\n              +  \"\\nThe first (cfurl) argument can be\"\n              + \"\\n1) a valid URL of a terminus database or\"\n              +  \"\\n2) omitted - the current database will be used\"\n              +  \"\\nthe second argument (cls) is the URL / ID of a document class that exists in the database schema\"\n              +  \"\\nthe third argument (opts) is an options json - opts.key is an optional API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    options: { format: \"turtle\" }\n  };\n  sigs.updateSchema = {\n    spec    : \"WOQLClient.updateSchema(schema_url, docs, options)\",\n    descr   : \"\\n\\nUpdates the Schema of the specified database\"\n              + \"\\nThe first (schurl) argument can be \\n1) a valid URL of a terminus database or \\n2)\"\n              + \" a valid database id or \\n3) omitted, \\nin case 2) the current server will be used,\"\n              + \" and \\nin case 3) the current server and database will be used\"\n              + \"\\nThe second argument (doc) is a valid owl ontology in json-ld or turtle format\"\n              + \"\\nthe third argument (opts) is an options json - \"\n     \t\t      + \"opts.format is used to specify which format is being used (*json / turtle)\"\n     \t\t      + \"opts.key is an optional API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args   : {document : 'doc'},\n    options: { format: \"turtle\", editmode: \"replace\"}\n  };\n  sigs.createDocument = {\n    spec   : \"WOQLClient.createDocument(document_url, document, options)\",\n    descr  : \"\\n\\nCreates a new document in the specified database\"\n              + \"\\nThe first (docurl) argument can be\"\n              + \"\\n1) a valid URL of a terminus database (an id will be randomly assigned) or\"\n              + \"\\n2) a valid URL or of a terminus document (the document will be given the passed URL) or\"\n              + \"\\n3) a valid terminus document id (the current server and database will be used)\"\n              + \"\\n4) can be ommitted (the URL will be taken from the document if present)\"\n              + \"\\nThe second argument (doc) is a valid document in json-ld\"\n              + \"\\nthe third argument (opts) is an options json - opts.key is an optional API key\",\n    result : \"Created Document on success (HTTP 200), Violation Report Otherwise (HTTP 400+)\",\n    args   : {document_url : 'url', document: \"doc\"},\n    options: { format: \"turtle\", fail_on_id_denied: false}\n  };\n  sigs.viewDocument = {\n    spec    : \"WOQLClient.getDocument(document_url, options)\",\n    descr   : \"\\n\\nRetrieves a document from the specified database\"\n              + \"\\nThe first (docurl) argument can be\"\n              + \"\\n1) a valid URL of a terminus document or\"\n              + \"\\n2) a valid ID of a terminus document in the current database\"\n              + \"\\nthe second argument (opts) is an options json - \"\n              + \"\\nopts.key is an optional API key\"\n              + \"\\nopts.shape is frame | *document \",\n    result : \"Document (HTTP 200), Violation Report Otherwise (HTTP 400+)\",\n    args   : {document_url : 'url'},\n    options: { format: \"turtle\"}\n  };\n  sigs.updateDocument = {\n    spec   : \"WOQLClient.updateDocument(document_url, document, options)\",\n    descr  : \"\\n\\nUpdates a document in the specified database with a new version\"\n              + \"\\nThe first (docurl) argument can be\"\n              + \"\\n1) a valid URL of a terminus document or \"\n              + \"\\n2) a valid ID of a terminus document in the current database or\"\n              + \"\\n3) ommitted in which case the id will be taken from the document @id field\"\n              + \"\\nthe second argument (doc) is a document in json-ld format\"\n              + \"\\nthe third argument (opts) is an options json - opts.key is an optional API key\",\n    result : \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args   : {document_url : 'url', document: \"doc\"},\n    options: { format: \"turtle\", editmode: \"replace\"}\n  };\n  sigs.deleteDocument = {\n    spec  : \"WOQLClient.deleteDocument(document_url, options)\",\n    descr : \"\\n\\nDeletes a document from the specified database\"\n            + \"\\nThe first (docurl) argument can be\"\n            + \"\\n1) a valid URL of a terminus document or\"\n            + \"\\n2) a valid ID of a terminus document in the current database\"\n            + \"\\n3) omitted - the current document will be used\"\n            + \"\\nthe second argument (opts) is an options json - opts.key is an optional API key\",\n    result: \"Ontology Document on success (HTTP 200), 409 for already existing database, otherwise error code\",\n    args  : {document_url : 'url'},\n  };\n  sigs.select = {\n    spec: \"WOQLClient.select(database_url, woql, options)\",\n    descr: \"\\n\\nExecutes a read-only WOQL query on the specified database and returns the results\"\n              + \"\\nThe first (qurl) argument can be \"\n              + \"\\n1) a valid URL of a terminus database or \"\n              + \"\\n2) omitted - the current database will be used \"\n              + \"\\nthe second argument (woql) is a woql select statement encoded as a string\"\n              + \"\\nthe third argument (opts) is an options json - opts.key is an optional API key\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {woql: 'woql'},\n  };\n  sigs.update = {\n    spec  : \"WOQLClient.update(database_url, woql, options)\",\n    descr : \"\\n\\nExecutes a WOQL query on the specified database which updates the state and returns the results\"\n            + \"\\nThe first (qurl) argument can be \"\n            + \"\\n1) a valid URL of a terminus database or \"\n            + \"\\n2) omitted - the current database will be used \"\n            + \"\\nthe second argument (woql) is a woql select statement encoded as a string\"\n            + \"\\nthe third argument (opts) is an options json - opts.key is an optional API key\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args  : {woql: 'woql'},\n  };\n  sigs.lookup = {\n    spec: \"WOQLClient.lookup(database_url, woql, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url', term: 'string'},\n  };\n  sigs.map = {\n    spec: \"WOQLClient.lookup(source, target, woql, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {source: 'json', target: \"json\", woql: 'json'},\n  };\n  sigs.getClassFrame = {\n    spec: \"WOQLClient.getClassFrame(class, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url'},\n  };\n  sigs.getPropertyFrame = {\n    spec: \"WOQLClient.getPropertyFrame(class, property, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url', property: 'url'},\n  };\n  sigs.getFilledPropertyFrame = {\n    spec: \"WOQLClient.getPropertyFrame(document_url, property, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {document_url: 'url', property: 'url'},\n  };\n  sigs.getSubClasses = {\n    spec: \"WOQLClient.getSubClasses(class, options)\",\n    result: \"WOQL Result (HTTP 200), otherwise error code\",\n    args: {class: 'url'},\n  };\n  return sigs[which];\n}//getFunctionSignature\n\n// returns dom element for header text\nfunction getHeaderDom(text){\n  var hd = document.createElement('div');\n  hd.setAttribute('class', 'terminus-module-head');\n  var h = document.createElement('h3');\n  h.innerHTML = text;\n  hd.appendChild(h);\n  return hd;\n} // getHeaderTextDom\n\n// returns dom for alert banner\nfunction getInfoAlertDom(type, label, msg){\n  var ald = document.createElement('div');\n  if(type == 'info') ald.setAttribute('class', 'terminus-alert terminus-alert-success');\n  else ald.setAttribute('class', 'alert');\n  var str = document.createElement('STRONG');\n  str.innerHTML = label;\n  ald.appendChild(str);\n  var txt = document.createTextNode(msg);\n  ald.appendChild(txt);\n  return ald;\n} // getInfoAlertDom()\n\n// formats response results from platform\nfunction getResponse(currForm, action, response, terminator){\n\n  var rd = document.createElement('div');\n\n  // get header result\n  rd.appendChild(UTILS.getHeaderDom('Result'));\n  var br = document.createElement('BR');\n  rd.appendChild(br);\n\n  var data = JSON.stringify(response, 0, 4);\n\n  var pre = document.createElement('pre');\n  pre.setAttribute('class', 'terminus-api-view terminus-scheme-pre');\n  pre.innerHTML = data;\n\n  var cm = stylizeCodeDisplay(terminator, pre, rd, 'javascript');\n  if(!cm) rd.appendChild(pre);\n\n  var br = document.createElement('BR');\n  rd.appendChild(br);\n\n  currForm.appendChild(rd);\n\n  return currForm;\n}\n\n// formats the response from fetch call and spits out Http header and result\nfunction showHttpResult(response, action, currForm, terminator){\n    //var currForm = document.createElement('div');\n\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n\n    // get header result\n    currForm.appendChild(UTILS.getHeaderDom('HTTP Header'));\n\n    var br = document.createElement('BR');\n    currForm.appendChild(br);\n\n     var retHttpHeaders  = '';\n\n     // iterate over all headers\n     for (let [key, value] of response.headers) {\n       retHttpHeaders = retHttpHeaders +  `${key} = ${value}` + '\\n';\n     }\n\n    // http header result\n    var hdres = document.createElement('pre');\n    hdres.setAttribute('class', 'terminus-api-signature-pre');\n    var txt = document.createTextNode(retHttpHeaders);\n    hdres.appendChild(txt);\n\n    var cm = stylizeCodeDisplay(terminator, hdres, currForm, 'message/http');\n    if(!cm) currForm.appendChild(hdres);\n\n    return response.json()\n    .then(function(response){\n      getResponse(currForm, action, response, terminator); // get return response\n    })\n\n} // UTILS.showHttpResult()\n\n\nfunction deleteStylizedEditor(ui, qip){\n    if(ui.pluginAvailable(\"codemirror\")){\n\t\tvar cm = qip.nextElementSibling;\n\t\tcm.setAttribute('class', 'terminus-hide');\n\t\tFrameHelper.removeChildren(cm);\n\t}\n}\n\n/* ui: terminus ui reference\n   txt: text area to be stylized\n   view: defines the size of editor to appear in pages (schema/ query)\n   mode: format to be displayed in\n*/\nfunction stylizeEditor(ui, txt, view, mode){\n    var cmConfig = ui.pluginAvailable(\"codemirror\");\n    if(!(cmConfig)) return;\n\tvar cm = new Codemirror(txt, mode, cmConfig);\n\tvar ar = cm.colorizeTextArea(view);\n\tcm.updateTextArea(ar);\n}\n\n/* ui: terminus ui reference\n   txt: text area to be stylized\n   dom: stylized pre area is appended to dom\n   mode: format to be displayed in\n*/\nfunction stylizeCodeDisplay(ui, txt, dom, mode){\n    var cmConfig = ui.pluginAvailable(\"codemirror\");\n    if(!(cmConfig)) return false;\n    var cm = new Codemirror(txt, mode, cmConfig);\n    var pr = cm.colorizePre();\n    dom.appendChild(pr);\n    return true;\n}\n\n/* name: classname to find and remove classes from elements\n*/\nfunction removeSelectedNavClass(name){\n    var el = document.getElementsByClassName(name);\n    for(var i=0; i<el.length; i++){\n        el[i].classList.remove(name);\n    }\n}\n\n// toggles between contents\nfunction tolggleContent(icon, content){\n    if (content.style.display === \"block\"){\n        removeSelectedNavClass(\"fa-chevron-up\");\n        icon.classList.add(\"fa-chevron-down\");\n        content.style.display = \"none\";\n    }\n    else{\n        removeSelectedNavClass(\"fa-chevron-down\");\n        icon.classList.add(\"fa-chevron-up\");\n        content.style.display = \"block\";\n    }\n}\n\nmodule.exports={tolggleContent,\n               removeSelectedNavClass,\n               stylizeCodeDisplay,\n               stylizeEditor,\n               deleteStylizedEditor,\n               showHttpResult,\n               getHeaderDom,\n               getInfoAlertDom,\n               getFunctionSignature}\n","const FrameHelper = require('../FrameHelper');\nconst TerminusPluginManager = require('../plugins/TerminusPlugin');\n\nlet HTMLFrameHelper = {};\n\nHTMLFrameHelper.getActionControl = function(type, control, label, callback, disabled){\n\tvar pman = new TerminusPluginManager();\n\tvar dpropDOM = document.createElement(\"span\");\n\tdpropDOM.setAttribute(\"class\", \"terminus-action-control \" + type + \"-\" + control);\n\tvar pman = new TerminusPluginManager();\n    if(pman.pluginAvailable(\"font-awesome\")){\n\t\tvar icon = document.createElement('icon');\n\t\tvar faic = this.getControlIcon(control);\n\t\tif(disabled){\n\t\t\ticon.setAttribute(\"class\", \"terminus-frame-control frame-control-action action-disabled fa fa\" + faic + \" \" + type + \"-\" + control + \"-disabled terminus-font-align\");\n\t\t\ticon.setAttribute(\"title\", disabled);\n\t\t}\n\t\telse {\n\t\t\ticon.setAttribute(\"class\", \"terminus-frame-control frame-control-action frame-control-action fa fa\" + faic + \" \" + type + \"-\" + control + \" terminus-font-align\");\n\t\t\ticon.addEventListener(\"click\", function(){\n\t\t\t\tcallback(control);\n\t\t\t});\n\t\t}\n\t\tdpropDOM.appendChild(icon);\n\t}\n\telse{\n\t\tvar button = document.createElement(\"button\");\n\t\tbutton.appendChild(document.createTextNode(label));\n\t\tif(disabled){\n\t\t\tbutton.setAttribute(\"class\", \"terminus-frame-control terminus-btn frame-control-action action-disabled \" + type + \"-\" + control + \"-disabled\");\n\t\t\tbutton.setAttribute(\"title\", disabled);\n\t\t}\n\t\telse {\n\t\t\tbutton.setAttribute(\"class\", \"terminus-frame-control terminus-btn frame-control-action \" + type + \"-\" + control);\n\t\t\tbutton.addEventListener(\"click\", function(){\n\t\t\t\tcallback(control);\n\t\t\t});\n\t\t}\n\t\tdpropDOM.appendChild(button);\n\t}\n\treturn dpropDOM;\n}\n\nHTMLFrameHelper.getSettingsControl = function(){\n\tvar pman = new TerminusPluginManager();\n\tif(pman.pluginAvailable(\"font-awesome\")){\n\t\tvar icon = document.createElement('icon');\n\t\ticon.setAttribute('class', 'fa fa-bars');\n\t\treturn icon;\n\t}\n\telse{\n\t\tvar button = document.createElement(\"button\");\n\t\tbutton.appendChild(document.createTextNode('Settings'));\n\t\treturn button;\n\t}\n}\n\nHTMLFrameHelper.getControlIcon = function(control){\n\tvar icon;\n\tswitch(control){\n\t\tcase 'delete':\n\t\t\ticon = '-alt-delete';\n\t\tbreak;\n\t\tcase 'add':\n\t\t\ticon = '-plus';\n\t\tbreak;\n\t\tcase 'reset':\n\t\t\ticon = '-undo';\n\t\tbreak;\n\t\tcase 'save':\n\t\t\ticon = '-save';\n\t\tbreak;\n\t\tcase 'hide':\n\t\t\ticon = '-eye-slash';\n\t\tbreak;\n\t}\n\treturn icon;\n}\n\nHTMLFrameHelper.getSelectionControl = function(type, options, selected, callback){\n\tvar sel = document.createElement(\"select\");\n\tsel.setAttribute(\"class\", \"terminus-frame-selector frame-control-selection \" + type);\n\tfor(var i = 0; i < options.length; i++){\n\t\tvar opt = document.createElement(\"option\");\n\t\tif(typeof options[i] == \"object\"){\n\t\t\topt.value = options[i].value;\n\t\t\tvar label = (options[i].label ?  document.createTextNode(options[i].label) : document.createTextNode(FrameHelper.labelFromURL(options[i].value)));\n\t\t\topt.appendChild(label);\n\t\t}\n\t\telse {\n\t\t\topt.value = options[i];\n\t\t\tlabel = FrameHelper.labelFromURL(opt.value);\n\t\t\topt.appendChild(document.createTextNode(label));\n\t\t}\n\t\tif(selected == opt.value){\n\t\t\topt.setAttribute(\"selected\", \"selected\");\n\t\t}\n\t\tsel.appendChild(opt);\n\t}\n\tsel.addEventListener(\"change\", function(){\n\t\tcallback(this.value);\n\t});\n\treturn sel;\n}\n\nHTMLFrameHelper.getModeSelectorDOM = function(which, renderer){\n\tvar viewsDOM = document.createElement(\"span\");\n\tviewsDOM.setAttribute(\"class\", \"terminus-mode terminus-\"+which+\"-mode\");\n\tif(renderer.mode == \"view\"){\n\t\tvar callback = function(){ renderer.setMode(\"edit\");}\n\t\tviewsDOM.appendChild(HTMLFrameHelper.getActionControl(\"terminus-mode terminus-\"+which+\"-mode\", \"edit\", \" Edit \", callback));\n\t}\n\telse if(renderer.isNew()){\n\t\treturn false;\n\t}\n\telse {\n\t\tvar callback = function(){ renderer.cancel();}\n\t\tviewsDOM.appendChild(HTMLFrameHelper.getActionControl(which, \"cancel\", \"Cancel\", callback));\n\t}\n\treturn viewsDOM;\n}\n\nHTMLFrameHelper.goToName = function(s, p, i){\n\tvar url = window.location.href;\n\tif(url){\n\t\tvar wbits = url.split(\"#\");\n\t\tvar loc = wbits[0];\n\t\tvar sh = FrameHelper.getShorthand(s);\n\t    if(!sh) sh = s;\n\t\tvar bits = sh.split(\":\");\n\t\tif(bits.length > 1) sh = bits[1];\n\t\tvar htmlid = sh;\n\t\tif(p){\n\t\t\tvar prop = FrameHelper.getShorthand(p);\n\t\t\tif(!prop ) prop = p;\n\t\t\tvar bits = prop.split(\":\");\n\t\t\tif(bits.length > 1) prop = bits[1];\n\t\t\thtmlid += \"_\" + prop;\n\t\t\tif(i){\n\t\t\t\thtmlid += \"_\" + i;\n\t\t\t}\n\t\t}\n\t\twindow.location = loc + \"#\" + htmlid;\n\t}\n}\n\n\n\n/*HTMLFrameHelper.getFrameRow = function(){\n\tvar row = document.createElement('div');\n\trow.setAttribute('class', 'terminus-frame-row');\n\treturn row;\n}\n\nHTMLFrameHelper.getFrameGroup = function(frow){\n\tvar fl = document.createElement('div');\n\tfl.setAttribute('class', 'terminus-frame-length');\n\tfrow.appendChild(fl);\n\n\tvar fg = document.createElement('div');\n\tfg.setAttribute('class', 'terminus-frame-group');\n\tfl.appendChild(fg);\n\treturn fl;\n}*/\n\nHTMLFrameHelper.getInfoboxDOM = function(type, label, value, help, input){\n\t/*var frow = this.getFrameRow();\n\tvar fgroup = this.getFrameGroup(frow);*/\n\tvar infoDOM = document.createElement(\"span\");\n\tinfoDOM.setAttribute(\"class\", \"terminus-frame-infobox-box \" + \"terminus-\" +type );\n\t//fgroup.appendChild(infoDOM);\n\tif(help){\n\t\tinfoDOM.setAttribute(\"title\", help);\n\t}\n\tif(label){\n\t\tvar linfo = document.createElement(\"span\");\n\t\tlinfo.setAttribute(\"class\", \"terminus-frame-infobox-label \" + \"terminus-\" +type + \"-label\");\n\t\tlinfo.appendChild(document.createTextNode(label));\n\t\tinfoDOM.appendChild(linfo);\n\t}\n\tvar lspacer = document.createElement(\"span\");\n\tlspacer.setAttribute(\"class\", \"terminus-frame-infobox-spacer \" + \"terminus-\" +type + \"-spacer\");\n\tlspacer.appendChild(document.createTextNode(\" \"));\n\tinfoDOM.appendChild(lspacer);\n\tvar lval = document.createElement(\"span\");\n\tlval.setAttribute(\"class\", \"terminus-frame-infobox-value \" + \"terminus-\" +type + \"-value terminus-property-label-align\");\n\tif(input){\n\t\tinput.value = value;\n\t\tlval.appendChild(input);\n\t}\n\telse if(value) {\n\t\tvar sh = FrameHelper.getShorthand(value);\n        if(sh){\n    \t   \tvar bits = sh.split(\":\");\n            sh = bits[1];\n   \t\t\tlval.setAttribute(\"title\", value);\n\t\t\tlval.appendChild(document.createTextNode(sh));\n\t\t}\n\t\telse {\n\t\t\tlval.appendChild(document.createTextNode(value));\n\t\t}\n\t}\n\tinfoDOM.appendChild(lval);\n\treturn infoDOM;\n}\n\nmodule.exports=HTMLFrameHelper\n","/**\n * object renderer binds to object frame - provides filters, sorts and manipulations of underlying object frame\n * and coordinates viewer to draw updates\n\n * Object Renderer - provides sorting / filtering / state management of objects\n * @param obj ObjectFrame object - contains underlying data and frame structure\n * @param parent PropertyRenderer - property that owns this object (if any)\n * @param options options json\n * @returns\n */\nconst PropertyRenderer = require('./PropertyRenderer');\nconst RenderingMap = require('./RenderingMap');\n\nfunction ObjectRenderer(obj, parent, options){\n\tthis.objframe = obj;\n\tthis.parent = parent;\n\tthis.options = this.setOptions(options);\n\tthis.properties = {};\n\tthis.originalProperties = false;\n\tthis.newProperties = [];\n}\n\n//options has to include mode, viewer, facet, controls, features, hide_disabled_controls\n\nObjectRenderer.prototype.setOptions = function(options){\n\t//var rendconf = new RendererConfigurationMatcher(options);\n\treturn RenderingMap.decorateRenderer(options, this);\n\t/*rendconf.setObjectRenderingConfiguration(this);\n\toptions = (options ? options : {});\n\tif(options.mode) this.mode = options.mode;\n\telse {\n\t\tthis.mode = (this.parent && this.parent.mode ? this.parent.mode : \"view\");\n\t\toptions.mode = this.mode;\n\t}\n\tif(options.view) this.view = options.view;\n\telse {\n\t\tthis.view = (this.parent && this.parent.view ? this.parent.view : \"full\");\n\t\toptions.view = this.view;\n\t}\n\tif(options.facet) this.facet = options.facet;\n\telse this.facet = this.getDefaultFacet();\n\tthis.hide_disabled_controls = (options && options.hide_disabled_controls ? options.hide_disabled_controls : true);\n\tthis.facets = {\n\t\tlabel: \t[\"facet\", \"status\", \"label\"],\n\t\tsummary: [\"facet\", \"satus\", \"label\", \"type\", \"summary\", \"status\", \"facet\"],\n\t\tline: [\"facet\", \"label\", \"comment\", \"id\", \"type\", \"body\", \"status\", \"facet\"],\n\t\tpage: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"].concat(this.controls)\n\t}\n\tif(options && options.facets){\n\t\tfor(var facet in options.facets){\n\t\t\tthis.facets[facet] = options.facets[facet];\n\t\t}\n\t}\n\t//this.loadConfigurationFromOptions(options);\n\tif(options && options.features){\n\t\tthis.features = options.features;\n\t}\n\telse {\n\t\tthis.features = [\"body\", \"id\", \"type\", \"summary\", \"status\", \"label\", \"facet\", \"control\", \"viewer\", \"view\", \"comment\"];\n\t}\n\tif(options && options.controls){\n\t\tthis.controls = options.controls;\n\t}\n\telse {\n\t\tthis.controls = [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"];\n\t}\n\treturn options;*/\n}\n\nObjectRenderer.prototype.getOptionsForProperty = function(prop){\n\treturn this.options;\n}\n\nObjectRenderer.prototype.render = function(viewer){\n\tthis.buildPropertyRenderers();\n\tthis.viewer = (viewer ? viewer: this.getViewerForObject());\n\tfor(var prop in this.properties){\n\t\tvar renderedprop = this.properties[prop].render();\n\t\tif(renderedprop && this.showFeature(\"body\")) this.viewer.addRenderedProperty(prop, renderedprop);\n\t}\n\treturn this.viewer.render(this.view);\n}\n\nObjectRenderer.prototype.buildPropertyRenderers = function(){\n\tvar props = this.getPropertiesToRender();\n\tif(this.originalProperties === false) this.originalProperties = props;\n\tvar renders = {};\n\tfor(var j = 0; j<props.length; j++){\n\t\tif(typeof this.properties[props[j]] == \"undefined\"){\n\t\t\trenders[props[j]] = new PropertyRenderer(props[j], this, this.getOptionsForProperty(props[j]));\n\t\t}\n\t\telse {\n\t\t\trenders[props[j]] = this.properties[props[j]];\n\t\t}\n\t\tif(this.newProperties.indexOf(props[j]) != -1) {\n\t\t\trenders[props[j]].setNew(); \n\t\t\trenders[props[j]].mode = \"edit\"; \n\t\t}\n\t}\n\tthis.properties = renders;\n}\n\nObjectRenderer.prototype.subject = function(){\n\tif(this.objframe) return this.objframe.subjid;\n\treturn false;\n}\n\nObjectRenderer.prototype.subjectClass = function(){\n\tif(this.objframe) return this.objframe.cls;\n\treturn false;\n}\n\nObjectRenderer.prototype.getAvailableViewers = function(){\n\t//if(this.mode == \"view\"){\n\t//\treturn RenderingMap.getAvailableObjectViewers(this);\t\t\n\t//}\n\t//return RenderingMap.getAvailableObjectEditors(this);\t\t\t\t\n\treturn [\"html\", \"json\"];\n}\n\nObjectRenderer.prototype.depth = function(){\n\tif(this.parent) return (this.parent.depth() + 1);\n\treturn 0;\n}\n\n\nObjectRenderer.prototype.property = function(){\n\tif(this.parent) return this.parent.property();\n\treturn false;\n}\n\nObjectRenderer.prototype.parentObject = function(){\n\tif(this.parent && this.parent.parent && this.parent.parent.objframe){\n\t\treturn this.parent.parent.objframe;\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.root = function(){\n\tif(this.parent) return false;\n\treturn true;\n}\n\nObjectRenderer.prototype.load = function(link){\n\tvar self = this;\n\tif(this.controller){\n\t\tthis.controller.ui.showDocument(link);\n\t}\n\telse if(this.parent) {\n\t\tthis.parent.load(link);\n\t}\n}\n\nObjectRenderer.prototype.copy = function(nkid){\n\tnkid = (nkid ? nkid : this.objframe);\n\tvar other = new ObjectRenderer(nkid, this.parent, this.options);\n\treturn other;\n}\n\nObjectRenderer.prototype.clone = function(){\n\tif(this.root()){\n\t\tthis.objframe = this.objframe.clone(\"_:\");\n\t\tthis.objframe.newDoc = true;\n\t\tthis.setMode(\"edit\");\n\t}\n\telse {\n\t\tvar nkid = this.objframe.clone(FrameHelper.genBNID());\n\t\tvar parentobj = this.parentObject();\n\t\tvar prop = this.property();\n\t\tif(parentobj && prop){\n\t\t\tif(typeof parentobj.children[prop] == \"undefined\"){\n\t\t\t\tparentobj.children[prop] = [];\n\t\t\t}\n\t\t\tparentobj.children[prop].push(nkid);\n\t\t\tvar newrend = this.copy(nkid);\n\t\t\tthis.parent.values.push(newrend);\n\t\t}\n\t\tthis.parent.redraw();\n\t}\n}\n\nObjectRenderer.prototype.cancel = function(){\n\tthis.reset();\n\tthis.setMode(\"view\");\n}\n\nObjectRenderer.prototype.save = function(){\n\tif(this.controller){\n\t\tif(this.isNewDocument()){\n\t\t\tvar demandid = this.inputID();\n\t\t\tif(demandid == \"_:\") demandid = \"\";\n\t\t\tthis.controller.createDocument(demandid);\n\t\t}\n\t\telse {\n\t\t\tthis.controller.updateDocument();\n\t\t}\n\t}\n\telse if(this.parent) {\n\t\tthis.parent.save();\n\t}\n}\n\nObjectRenderer.prototype.delete = function(){\n\tvar dval = this.subject();\n\tif(this.controller && this.root()){\n\t\tif(!this.isNewDocument()){\n\t\t\tthis.controller.deleteDocument(dval);\n\t\t}\n\t\tthis.nukeViewer();\n\t}\n\telse {\n\t\tif(this.parent){\n\t\t\tthis.parent.deletePropertyValue(dval);\t\t\n\t\t\tthis.parent.redraw();\n\t\t}\n\t}\n}\n\nObjectRenderer.prototype.reset = function(){\n\tthis.objframe.reset();\n\tvar nprops = {};\n\tfor(var i = 0; i<this.originalProperties.length; i++){\n\t\tvar prop = this.originalProperties[i];\n\t\tif(typeof this.properties[prop] == \"object\"){\n\t\t\tthis.properties[prop].reset();\n\t\t\tnprops[prop] = this.properties[prop];\n\t\t}\n\t}\n\tthis.properties = nprops;\n\tthis.redraw();\n}\n\nObjectRenderer.prototype.deleteProperty = function(prop){\n\tthis.objframe.removeProperty(prop);\n\tdelete(this.properties[prop]);\n\tthis.updated();\n}\n\nObjectRenderer.prototype.addProperty = function(prop){\n\tthis.objframe.addProperty(prop);\n\tthis.updated();\n\tthis.redraw();\n}\n\nObjectRenderer.prototype.addNewProperty = function(prop){\n\tthis.objframe.addProperty(prop);\n\tthis.updated();\n\tthis.newProperties.push(prop);\n\tthis.redraw();\n\tthis.goToProperty(prop);\n}\n\nObjectRenderer.prototype.addPropertyClass = function(prop, cls){\n\tthis.objframe.addProperty(prop, cls);\n\tthis.updated();\n}\n\nObjectRenderer.prototype.changeClass = function(cls){\n\tif(this.parent){\n\t\tthis.parent.addClass(cls);\t\t\n\t\tthis.parent.deletePropertyValue(this.subject());\t\t\n\t}\n}\n\nObjectRenderer.prototype.getClassMeta = function(cls){\n\tvar ctl = this.getController();\n\tif(ctl && ctl.classmeta && ctl.classmeta[cls]){\n\t\treturn ctl.classmeta[cls];\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.getController = function(){\n\tif(this.controller){\n\t\treturn this.controller;\n\t}\n\tif(this.parent && this.parent.parent){\n\t\treturn this.parent.parent.getController();\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.getClient = function(){\n\tif(this.controller){\n\t\treturn this.controller.getClient();\n\t}\n\telse {\n\t\tif(this.parent && this.parent.parent){\n\t\t\treturn(this.parent.parent.getClient())\n\t\t}\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.inputID = function(){\n\tif(this.idDOM){\n\t\treturn this.idDOM.value;\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.isNew = function(){\n\tif(this.new_object){\n\t\treturn true;\n\t}\n\tif(this.isPartOfNewDocument()){\n\t\treturn true;\n\t}\n\tif(this.parent) return this.parent.isNew();\n\treturn false;\n}\n\nObjectRenderer.prototype.setNew = function(){\n\tthis.new_object = true;\n}\n\nObjectRenderer.prototype.isUpdated = function(){\n\tvar i = 0;\n\tfor(var prop in this.properties){\n\t\tif(this.originalProperties[i] != prop) return true;\n\t\tif(this.properties[prop].isUpdated()) return true;\n\t\ti++;\t\t\n\t}\n\tif(i != this.originalProperties.length) return true;\n\treturn false;\n}\n\nObjectRenderer.prototype.childUpdated = function(){\n\tthis.viewer.redrawHeader();\n\tif(this.parent) this.parent.childUpdated();\n}\n\nObjectRenderer.prototype.updated = ObjectRenderer.prototype.childUpdated;\n\nObjectRenderer.prototype.isNewDocument = function(){\n\tif(this.root() && this.objframe.isnew()) return true;\n\treturn false;\n}\n\nObjectRenderer.prototype.isPartOfNewDocument = function(){\n\tif(this.isNewDocument()) return true;\n\tif(this.parent && this.parent.parent){\n\t\treturn this.parent.parent.isPartOfNewDocument();\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.setFacet = function(facet, nocascade){\n\tthis.facet = facet;\n\tif(!nocascade){\n\t\tfor(var prop in this.properties){\n\t\t\tthis.properties[prop].parentFacetChange(facet);\n\t\t}\n\t}\n\tif(this.parent){\n\t\tthis.parent.redraw();\n\t}\n\telse {\n\t\tthis.redraw();\n\t}\n}\n\nObjectRenderer.prototype.getDefaultFacets = function(){\n\tvar defs = {\n\t\tpage: {\n\t\t\tlabel: \"Full Page\", value: \"page\", \n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"],\n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"] \n\t\t},\n\t\tline: {\n\t\t\tlabel: \"Single Line\", value: \"line\",\n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"type\", \"body\", \"status\", \"facet\"], \n\t\t\tcontrols: [] \n\t\t},\n\t\tsummary: {\n\t\t\tlabel: \"Summary\", value: \"summary\",\n\t\t\tfeatures: [\"facet\", \"satus\", \"label\", \"type\", \"summary\", \"status\", \"facet\"], \n\t\t\tcontrols: [] \n\t\t},\n\t\tlabel: {\n\t\t\tlabel: \"Label\", value: \"label\",\n\t\t\tfeatures: [\"facet\", \"status\", \"label\"],\n\t\t\tcontrols: []\n\t\t}\n\t}\n\treturn defs;\n}\n\nObjectRenderer.prototype.getAvailableFacets = function(){\n\treturn Object.keys(this.facets);\n}\n\nObjectRenderer.prototype.currentFacet = function(){\n\treturn this.facet;\n}\n\nObjectRenderer.prototype.getDefaultFacet = function(){\n\tif(!this.parent) return \"page\";\n\tvar pfacet = this.parent.currentFacet();\n\tif(pfacet == \"page\"){\n\t\treturn \"page\";\n\t}\n\tif(pfacet == \"multiline\") return \"line\";\n\tif(pfacet == \"line\") return \"summary\";\n\treturn \"label\";\n}\n\nObjectRenderer.prototype.parentFacetChange = function(pfacet){\n\tif(pfacet == \"page\") this.setFacet(\"page\");\n\tif(pfacet == \"multiline\") this.setFacet(\"summary\");\n\tif(pfacet == \"line\") this.setFacet(\"summary\");\n\tif(pfacet == \"summary\") this.setFacet(\"summary\");\n}\n\nObjectRenderer.prototype.getContentOrientation = function(){\n\tif(this.currentFacet() == \"page\"){\n\t\treturn \"page\";\n\t}\n\tif(this.currentFacet() == \"line\"){\n\t\treturn \"line\";\n\t}\n\treturn \"label\";\n}\n\nObjectRenderer.prototype.getLabel = function(){\n\tfor(var prop in this.properties){\n\t\tif(FrameHelper.getShorthand(prop) == \"rdfs:label\"){\n\t\t\tvar prend = this.properties[prop];\n\t\t\tvar vrend = prend.values[0];\n\t\t\tif(vrend){\n\t\t\t\tvar sum = vrend.getSummary();\n\t\t\t\tif(sum.long != \"empty\") return sum.long;\n\t\t\t}\n\t\t}\n\t}\n\tvar s = this.subject();\n\tif(s && s.substring(0, 2) == \"_:\"){\n\t\tvar ty = this.subjectClass();\n\t\tvar sh = FrameHelper.getShorthand(ty);\n\t\tif(sh){\n\t\t\tvar b = sh.split(\":\");\n\t\t\tif(b.length > 1){\n\t\t\t\treturn \"New \" + b[1];\n\t\t\t}\n\t\t}\n\t\treturn \"New Object\";\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.getSummary = function(){\n\tvar ret = { status: \"ok\" };\n\tif(this.isUpdated()) ret.status = \"updated\";\n\tif(this.isNew()) ret.status = \"new\";\n\tret.propcount = 0;\n\tfor(var prop in this.properties){\n\t\tret.propcount++;\n\t}\n\tret.long = ret.propcount + \" properties\";\n\treturn ret;\t\n}\n\nObjectRenderer.prototype.getObjectHeaderViewer = function(){\n\treturn this.header_viewer;\n}\n\nObjectRenderer.prototype.getViewerForObject = function(format){\n\treturn RenderingMap.getViewerForObject(format, this);\t\n}\n\nObjectRenderer.prototype.getFeaturesForFacet = function(facet){\n\treturn this.facets[facet].features.concat(this.facets[facet].controls);\n}\n \nObjectRenderer.prototype.hideDisabledControls = function(){\n\treturn this.hide_disabled_controls;\n}\n\nObjectRenderer.prototype.showFeature = function(which){\n\tif(this.features.indexOf(which) == -1 && this.controls.indexOf(which) == -1) {\n\t\treturn false;\n\t}\n\tvar cardcontrols = [\"delete\", \"clone\", \"add\"];\n\tif(cardcontrols.indexOf(which) != -1){\n\t\tif(!this.cardControlAllows(which)) return false;\n\t}\n\tvar updcontrols = [\"update\", \"reset\"];\n\tif(this.hideDisabledControls() && updcontrols.indexOf(which) != -1 ){\n\t\tif(!this.isUpdated()){\n\t\t\treturn false;\n\t\t}\n\t}\n\tif(this.isNewDocument() && which == \"clone\") return false;\n\tif(which == 'hide' && this.view == \"hidden\") return false;\n\tif(which == 'show' && this.view != \"hidden\") return false;\n\tvar fets = this.getFeaturesForFacet(this.facet);\n\tif (fets.indexOf(which) != -1){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nObjectRenderer.prototype.cardControlAllows = function(action){\n\tif(!this.parent) return true;\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nObjectRenderer.prototype.goToProperty = function(prop){\n\tthis.viewer.goTo(this.subject(), prop);\n}\n\nObjectRenderer.prototype.setMode = function(mode){\n\tthis.mode = mode;\n\tfor(var prop in this.properties){\n\t\tthis.properties[prop].setMode(mode);\n\t}\n\tthis.viewer.redraw();\n}\n\nObjectRenderer.prototype.currentViewer = function(){return this.viewerType;}\n\n\nObjectRenderer.prototype.setViewer = function(viewer){\n\tvar nviewer = this.getViewerForObject(viewer);\n\tif(nviewer){\n\t\tthis.viewerType = viewer;\n\t\tthis.viewer = nviewer;\n\t\tthis.viewer.redraw();\n\t}\n}\n\n\nObjectRenderer.prototype.setView = function(view){\n\tvar views = {\n\t\t\"full\": {\n\t\t\t\n\t\t},\n\t\t\"hidden\": {\n\t\t\t\n\t\t}\n\t};\n\tthis.view = view;\n\tthis.viewer.redraw();\n}\n\n\nObjectRenderer.prototype.hide = function(){\n\tthis.setView(\"hidden\");\n}\n\nObjectRenderer.prototype.show = function(){\n\tthis.setView(\"full\");\n}\n\nObjectRenderer.prototype.nukeViewer = function(){\n\tthis.viewer.remove();\n}\n\nObjectRenderer.prototype.getViewableProperties = function(){\n\treturn this.objframe.getFilledPropertyList();\t\n}\n\nObjectRenderer.prototype.getAddableProperties = function(){\n\tvar props = this.objframe.getMissingPropertyList();\t\n\treturn props;\n}\n\nObjectRenderer.prototype.getPropertiesToRender = function(options){\n\tvar sort = this.standardSort;\n\tvar filter = function(){return true};\n\tif(options && options.map && options.map.patterns){\n\t\tfor(var i = 0; i<options.map.patterns.length; i++){\n\t\t\tif(this.objframe.matchesPattern({property: this.property(), action: \"sort\"}, options.map.patterns[i])){\n\t\t\t\tsort = options.map.patterns[i].sort;\n\t\t\t}\n\t\t\tif(this.objframe.matchesPattern({property: this.property(), action: \"filter\"}, options.map.patterns[i])){\n\t\t\t\tfilter = options.map.patterns[i].filter;\n\t\t\t}\n\t\t}\n\t}\n\treturn sort(this.objframe, filter);\n}\n\nObjectRenderer.prototype.standardSort = function(objframe, filter){\n\tvar sorted = [];\n\tvar rdft = FrameHelper.getStdURL(\"rdfs\", \"label\");\n\tif(objframe.dataframes[rdft] && filter(objframe, rdft, objframe.dataframes[rdft])){\n\t\tsorted.push(rdft);\n\t}\n\tvar rdfc = FrameHelper.getStdURL(\"rdfs\", \"comment\");\n\tif(objframe.dataframes[rdfc]){\n\t\tsorted.push(rdfc);\n\t}\n\tfor(var prop in objframe.dataframes){\n\t\tif(sorted.indexOf(prop) == -1) sorted.push(prop);\n\t}\n\tfor(var prop in objframe.children){\n\t\tif(sorted.indexOf(prop) == -1) sorted.push(prop);\t\t\n\t}\n\treturn sorted;\n}\n\n\nObjectRenderer.prototype.redraw = function(){\n\tthis.viewer.clear();\n\tthis.render(this.viewer);\n}\n\nObjectRenderer.prototype.extractLDO = function(extracts){\n\textracts[\"rdf:type\"] = this.objframe.cls;\n\tvar full = {};\n\tfull[this.subject()] = extracts;\n\treturn full;\t\n}\n\nObjectRenderer.prototype.extractJSONLD = function(extracts){\n\textracts[\"@type\"] = this.objframe.cls;\n\tif(this.subject() != \"_:\")\textracts[\"@id\"] = this.subject();\n\tif(this.objframe.jsonld_context) extracts['@context'] = this.objframe.jsonld_context;\n\treturn extracts;\n}\n\nObjectRenderer.prototype.extract = function(){\n\tvar extracts = {};\n\tfor(var i in this.properties){\n\t\tvar extracted = this.properties[i].extract();\n\t\tif(!FrameHelper.empty(extracted)){\n\t\t\textracts[i] = extracted;\n\t\t}\n\t}\n\tif(FrameHelper.empty(extracts) && this.parent){\n\t\treturn false;\n\t}\n\telse {\n\t\treturn this.extractJSONLD(extracts);\n\t\t//return this.extractLDO(extracts);\n\t}\n}\n\nmodule.exports=ObjectRenderer\n\n","/**\n * Object for producing a HTML view of a given object in a frame\n */\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\nfunction HTMLObjectViewer(renderer){\n\tthis.renderer = renderer;\n\tthis.properties = [];\n\tthis.headerViewer = renderer.getObjectHeaderViewer();\n\t//this.featureViewers = {};\n}\n\n/**\n * Functions for rendering / re-rendering the object as header and body components\n */\nHTMLObjectViewer.prototype.render = function(){\n\tif(this.renderedDOM){\n\t\tvar renderedDOM = this.getObjectDOM();\n\t\tthis.renderedDOM.replaceWith(renderedDOM);\n\t\tthis.renderedDOM = renderedDOM;\n\t}\n\telse {\n\t\tthis.renderedDOM = this.getObjectDOM();\n\t}\n\tthis.renderedDOM.appendChild(this.getObjectIDMarker(this.renderer));\n\tif(this.headerViewer){\n\t\tthis.header = this.headerViewer.getAsDOM(this.renderer);\n\t\tif(this.header) this.renderedDOM.appendChild(this.header);\n\t}\n\tthis.body = this.getObjectBodyDOM();\n\tif(this.body) this.renderedDOM.appendChild(this.body);\n\treturn this.renderedDOM;\n}\n\nHTMLObjectViewer.prototype.getObjectDOM = function(){\n\tvar orientation = this.renderer.getContentOrientation();\n\tvar pcls = \"terminus-object-frame-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar sp = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar sp = document.createElement(\"span\");\n\t}\n\tvar css = \"terminus-object-frame \" + pcls + (this.renderer.parent ? \"\" : \" terminus-root-frame\") + \" terminus-object-frame-\" + this.renderer.mode;\n\tsp.setAttribute(\"class\", css);\n\tsp.setAttribute(\"data-class\", this.renderer.subjectClass());\n\tsp.setAttribute(\"data-id\", this.renderer.subject());\n\treturn sp;\n}\n\nHTMLObjectViewer.prototype.getObjectBodyDOM = function(){\n\tvar orientation = this.renderer.getContentOrientation();\n\tvar pcls = \"terminus-object-properties-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar vholder = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar vholder = document.createElement(\"span\");\n\t}\n    vholder.setAttribute('class', 'terminus-object-properties ' + pcls);\n    for(var prop in this.properties){\n\t\tif(this.properties[prop]) vholder.appendChild(this.properties[prop]);\n\t}\n\treturn vholder;\n}\n\nHTMLObjectViewer.prototype.getFeatureDOM = function(feature){\n\tif(this.hasFeatureViewer(feature)){\n\t\treturn this.featureViewer[feature](this.renderer, this);\n\t}\n}\n\nHTMLObjectViewer.prototype.redraw = function(){\n\tFrameHelper.removeChildren(this.renderedDOM);\n\tthis.properties = [];\n\tthis.renderer.render(this);\n}\n\nHTMLObjectViewer.prototype.redrawHeader = function(){\n\tif(this.headerViewer && this.header) {\n\t\tvar nheader = this.headerViewer.getAsDOM(this.renderer);\n\t\tthis.header.replaceWith(nheader);\n\t\tthis.header = nheader;\n\t}\n}\n\nHTMLObjectViewer.prototype.redrawBody = function(){\n\tif(this.body){\n\t\tvar nbody = this.getObjectBodyDOM();\n\t\tthis.body.replaceWith(nbody);\n\t\tthis.body = nbody;\n\t}\n}\n\n/**\n * Adds a rendered version of a property to the internal properties array\n */\nHTMLObjectViewer.prototype.addRenderedProperty = function(prop, renderedprop){\n\tthis.properties[prop] = renderedprop;\n}\n\nHTMLObjectViewer.prototype.clear = function(){\n\tFrameHelper.removeChildren(this.renderedDOM);\n\tthis.properties = {};\n}\n\n/**\n * Removes the object from the dom\n */\nHTMLObjectViewer.prototype.remove = function(){\n\tthis.renderedDOM.parentNode.removeChild(this.renderedDOM);\n}\n\nHTMLObjectViewer.prototype.goTo = function(subj, property){\n\tHTMLFrameHelper.goToName(subj, property);\n}\n\n/**\n * Generates a html anchor element to use as a marker to find the object on the page\n */\nHTMLObjectViewer.prototype.getObjectIDMarker = function(renderer){\n\tvar idm = document.createElement(\"a\");\n\tidm.setAttribute(\"class\", \"terminus-object-idmarker\");\n\tvar sh = FrameHelper.getShorthand(renderer.subject());\n    if(!sh) sh = renderer.subject();\n    if(sh){\n\t\tvar bits = sh.split(\":\");\n\t\tif(bits.length > 1) sh = bits[1];\n\t\tidm.setAttribute(\"name\", sh);\n    }\n\treturn idm;\n}\n\nfunction HTMLObjectHeaderViewer(){}\n\nHTMLObjectHeaderViewer.prototype.getAsDOM = function(renderer){\n\tvar orientation = renderer.getContentOrientation();\n\tvar pcls = \"terminus-object-frame-btn terminus-object-header-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar objDOM = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar objDOM = document.createElement(\"span\");\n\t}\n\tobjDOM.setAttribute(\"class\", \"terminus-object-header \" + pcls);\n\tif(renderer.showFeature(\"facet\")){\n\t\tvar facetDOM = this.getObjectFacetDOM(renderer);\n\t\tif(facetDOM) objDOM.appendChild(facetDOM);\n\t}\n\tif(renderer.showFeature(\"label\")){\n\t\tvar sumDOM = this.getObjectLabelDOM(renderer);\n\t\tif(sumDOM) objDOM.appendChild(sumDOM);\n\t}\n\tif(renderer.showFeature(\"id\")){\n\t\tvar idDOM = this.getObjectIDDOM(renderer);\n\t\tif(idDOM) objDOM.appendChild(idDOM);\n\t}\n\tif(renderer.showFeature(\"type\")){\n\t\tvar typeDOM = this.getObjectTypeDOM(renderer);\n\t\tif(typeDOM) objDOM.appendChild(typeDOM);\n\t}\n\tif(renderer.showFeature(\"status\")){\n\t\tvar sumDOM = this.getObjectStatusDOM(renderer);\n\t\tif(sumDOM) objDOM.appendChild(sumDOM);\n\t}\n\tif(renderer.showFeature(\"view\")){\n\t\tvar viewDOM = this.getViewPropertyDOM(renderer);\n\t\tif(viewDOM) objDOM.appendChild(viewDOM);\n\t}\n\tif(renderer.showFeature(\"viewer\")){\n\t\tvar hideDOM = this.getViewerSelectorDOM(renderer);\n\t\tif(hideDOM) objDOM.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"add\")){\n\t\tvar addDOM = this.getAddPropertyDOM(renderer);\n\t\tif(addDOM) objDOM.appendChild(addDOM);\n\t}\n\tif(renderer.showFeature(\"control\")){\n\t\tvar controlsDOM = this.getObjectControlsDOM(renderer);\n\t\tif(controlsDOM) objDOM.appendChild(controlsDOM);\n\t}\n\tif(renderer.showFeature(\"summary\")){\n\t\tvar controlsDOM = this.getObjectSummaryDOM(renderer);\n\t\tif(controlsDOM) objDOM.appendChild(controlsDOM);\n\t}\n\tobjDOM.addEventListener('click', function(){\n\t\tif((this.nextSibling.style.display == 'block') || (this.nextSibling.style.display == '')) \n\t\t\tthis.nextSibling.style.display = 'none';\n\t\telse this.nextSibling.style.display = 'block';\n\t});\n\treturn objDOM;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectSummaryDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-summary\", false, sum.long, sum.status);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectControlsDOM = function(renderer){\n\tvar controlsDOM = document.createElement(\"span\");\n\tcontrolsDOM.setAttribute(\"class\", \"terminus-object-controls\");\n\tif(renderer.showFeature(\"mode\")){\n\t\tvar viewsDOM = HTMLFrameHelper.getModeSelectorDOM(\"object\", renderer);\n\t\tif(viewsDOM) controlsDOM.appendChild(viewsDOM);\n\t}\n\tif(renderer.showFeature(\"delete\")){\n\t\tvar dpropDOM = this.getObjectDeleteDOM(renderer);\n\t\tif(dpropDOM) controlsDOM.appendChild(dpropDOM);\n\t}\n\tif(renderer.showFeature(\"clone\")){\n\t\tvar cpropDOM = this.getObjectCloneDOM(renderer);\n\t\tif(cpropDOM) controlsDOM.appendChild(cpropDOM);\n\t}\n\tif(renderer.showFeature(\"reset\")){\n\t\tvar rpropDOM = this.getObjectResetDOM(renderer);\n\t\tif(rpropDOM) controlsDOM.appendChild(rpropDOM);\n\t}\n\tif(renderer.showFeature(\"update\")){\n\t\tvar upropDOM = this.getObjectUpdateDOM(renderer);\n\t\tif(upropDOM) controlsDOM.appendChild(upropDOM);\n\t}\n\tif(renderer.showFeature(\"show\")){\n\t\tvar showDOM = this.getObjectShowDOM(renderer);\n\t\tif(showDOM) controlsDOM.appendChild(showDOM);\n\t}\n\tif(renderer.showFeature(\"hide\")){\n\t\tvar hideDOM = this.getObjectHideDOM(renderer);\n\t\tif(hideDOM) controlsDOM.appendChild(hideDOM);\n\t}\n\treturn controlsDOM;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectFacetDOM = function(renderer){\n\tvar viewables = renderer.getAvailableFacets();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-facet\");\n\t\tvar callback = function(val){\n\t\t\tif(val){\n\t\t\t\trenderer.setFacet(val);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"object-facet\", viewables, renderer.currentFacet(), callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectLabelDOM = function(renderer){\n\tvar lab = renderer.getLabel();\n\tif(lab){\n\t\treturn HTMLFrameHelper.getInfoboxDOM(\"object-label\", false, lab);\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectIDDOM = function(renderer){\n\tvar val = renderer.subject();\n\tvar input = false;\n\tif(renderer.mode == \"edit\" && renderer.isNewDocument()){\n\t\tif(renderer.idDOM) val = renderer.idDOM.value;\n\t\tinput = document.createElement(\"input\");\n\t\tinput.setAttribute(\"class\", \"terminus-object-id-input\");\n\t\tif(val == \"_:\") val = \"\";\n\t\trenderer.idDOM = input;\n\t}\n\telse {\n\t\tif(renderer.isNewDocument() && val == \"_:\") val = \"New Document\";\n\t}\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-id\", \"ID\", val, \"Every fragment of data is identified by a unique URL\", input);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectTypeDOM = function(renderer){\n\tif(renderer.mode == \"edit\" && renderer.parent && renderer.parent.isClassChoice() && renderer.isNew()){\n\t\tvar cs = renderer.parent.getAvailableClassChoices();\n\t\tif(cs && cs.length){\n\t\t\tvar mpropDOM = document.createElement(\"span\");\n\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-change-class\");\n\t\t\tvar mlabDOM = document.createElement(\"span\");\n\t\t\tmlabDOM.setAttribute(\"class\", \"terminus-property-change-label\");\n\t\t\tmlabDOM.appendChild(document.createTextNode(\"Type\"));\n\t\t\tmpropDOM.appendChild(mlabDOM);\n\t\t\tvar callback = function(cls){\n\t\t\t\tif(cls){\n\t\t\t\t\trenderer.changeClass(cls);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"change-class\", cs, renderer.subjectClass(), callback);\n\t\t\tmpropDOM.appendChild(sel);\n\t\t\treturn mpropDOM;\n\t\t}\n\t}\n\tvar cm = renderer.getClassMeta(renderer.subjectClass());\n\tvar lab = renderer.subjectClass();\n\tvar cmt = \"All objects have types, identified by a unique URL\";\n\tif(cm){\n\t\tlab = (cm.Label && cm.Label[\"@value\"] ? cm.Label[\"@value\"]: lab);\n\t\tcmt = (cm.Comment && cm.Comment[\"@value\"] ? renderer.subjectClass() + \" \" + cm.Comment[\"@value\"] : cmt);\n\t}\n\treturn HTMLFrameHelper.getInfoboxDOM(\"object-type\", \"Type\", lab, cmt);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectStatusDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"status-\"+sum.status, false, sum.status, sum.status);\n}\n\nHTMLObjectHeaderViewer.prototype.getAddPropertyDOM = function(renderer){\n\tvar addables = renderer.getAddableProperties();\n\tif(addables && addables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-add-property\");\n\t\taddables.unshift({ value: \"\", label: \"Add New Property\"});\n\t\tvar callback = function(add){\n\t\t\tif(add){\n\t\t\t\trenderer.addNewProperty(add);\n\t\t\t}\n\t\t}\n\t\tvar disabled = (renderer.cardControlAllows(\"add\") ? false : \"Cardinality Rules Forbid Add\");\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"add-property\", addables, \"\", callback, disabled);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getViewPropertyDOM = function(renderer){\n\tvar viewables = renderer.getViewableProperties();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-view-property\");\n\t\tviewables.unshift({ value: \"\", label: \"View Property\"});\n\t\tvar callback = function(add){\n\t\t\tif(add){\n\t\t\t\trenderer.goToProperty(add);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"view-property\", viewables, \"\", callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectDeleteDOM = function(renderer){\n\tvar callback = function(){renderer.delete()};\n\tvar disabled = (renderer.cardControlAllows(\"delete\") ? false : \"Cardinality Rules Forbid Delete\");\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"delete\", \"Delete\", callback, disabled);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectCloneDOM = function(renderer){\n\tvar callback = function(){renderer.clone()};\n\tvar disabled = (renderer.cardControlAllows(\"clone\") ? false : \"Cardinality Rules Forbid Clone\");\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"clone\", \"Clone\", callback, disabled);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectResetDOM = function(renderer){\n\tvar callback = function(){renderer.reset()};\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to reset\");\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"reset\", \"Reset\", callback, disabled);\n}\n\nHTMLObjectHeaderViewer.prototype.getViewerSelectorDOM = function(renderer){\n\tvar viewers = renderer.getAvailableViewers();\n\tif(viewers && viewers.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-object-viewer\");\n\t\tvar callback = function(viewer){\n\t\t\tif(viewer){\n\t\t\t\trenderer.setViewer(viewer);\n\t\t\t}\n\t\t}\n\t\tvar selected = renderer.currentViewer();\n\t\tvar sel = HTMLFrameHelper.getSelectionControl('object-viewer', viewers, selected, callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectHideDOM = function(renderer){\n\tvar callback = function(){renderer.hide()};\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"hide\", \"Hide\", callback);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectShowDOM = function(renderer){\n\tvar callback = function(){renderer.show()};\n\treturn HTMLFrameHelper.getActionControl(\"object\", \"show\", \"Show\", callback);\n}\n\nHTMLObjectHeaderViewer.prototype.getObjectUpdateDOM = function(renderer){\n\tvar dpropDOM = document.createElement(\"span\");\n\tdpropDOM.setAttribute(\"class\", \"terminus-object-update\");\n\tif(renderer.isNewDocument()){\n\t\tvar disabled = false;//(renderer.isUpdated() ? false : \"No changes\");\n\t}\n\telse {\n\t\tvar disabled = (renderer.isUpdated() ? false : \"No changes\");\n\t}\n\tvar saveback = function(){renderer.save()};\n\tdpropDOM.appendChild(HTMLFrameHelper.getActionControl(\"object\", \"save\", \"Save\", saveback, disabled));\n\treturn dpropDOM;\n}\n\nmodule.exports={HTMLObjectViewer,HTMLObjectHeaderViewer}\n","const FrameHelper = require('../FrameHelper');\nconst ObjectRenderer = require('./ObjectRenderer');\nconst ValueRenderer = require('./ValueRenderer');\nconst RenderingMap = require('./RenderingMap');\n\nfunction PropertyRenderer(prop, parent, options){\n\t/*\n\tif(options && options.features){\n\t\tthis.features = options.features;\n\t}\n\telse {\n\t\tthis.features = [\"body\", \"type\", \"cardinality\", \"summary\", \"label\", \"status\", \"facet\", \"control\", \"viewer\", \"view\", \"comment\", \"id\", \"toolbox\", \"help\t\"];\n\t}\n\tif(options && options.controls){\n\t\tthis.controls = options.controls;\n\t}\n\telse {\n\t\tthis.controls = [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"];\n\t}*/\n\tthis.predicate = prop;\n\tthis.parent = parent;\n\tthis.cframe = this.parent.objframe.getPropertyClassFrame(this.predicate);\n\tthis.options = this.setOptions(options);\n\tthis.originalValues = false;\n\tthis.changed = false;\n\tthis.values = [];\n}\n\nPropertyRenderer.prototype.setOptions = function(options){\n\treturn RenderingMap.decorateRenderer(options, this);\n\t/*options = (options ? options : {});\n\tif(options.mode) this.mode = options.mode;\n\telse {\n\t\tthis.mode = (this.parent && this.parent.mode ? this.parent.mode : \"view\");\n\t\toptions.mode = this.mode;\n\t}\n\tif(options.view) this.view = options.view;\n\telse {\n\t\tthis.view = (this.parent && this.parent.view ? this.parent.view : \"full\");\n\t\toptions.view = this.view;\n\t}\n\tif(options.viewer) this.viewerType = options.viewer;\n\telse this.viewerType = this.getViewerForDataValue();\n\tif(options.facet) this.facet = options.facet;\n\telse this.facet = this.getDefaultFacet();\n\tthis.hide_disabled_controls = (options && options.hide_disabled_controls ? options.hide_disabled_controls : true);\n\tthis.facets = {\n\t\ticon: \t[\"facet\", \"summary\"],\n\t\tlabel: \t[\"facet\", \"status\", \"label\", \"summary\"],\n\t\tsummary: [\"facet\", \"satus\", \"label\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\"],\n\t\tline: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\"].concat(this.controls),\n\t\tmultiline: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"].concat(this.controls),\n\t\tpage: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"].concat(this.controls)\n\t}\n\tif(options && options.facets){\n\t\tfor(var facet in options.facets){\n\t\t\tthis.facets[facet] = options.facets[facet];\n\t\t}\n\t}*/\n\treturn options;\n}\n\n\nPropertyRenderer.prototype.getOptionsForChild = function(){\n\tvar opts = {};\n\tif(this.options.features){ opts.features = this.options.features };\n\tif(this.options.controls){ opts.controls = this.options.controls};\n\t//return opts;\n\treturn this.options;\n}\n\nPropertyRenderer.prototype.getOptionsForValue = function(df, index){\n\treturn this.getOptionsForChild();\n}\n\nPropertyRenderer.prototype.getOptionsForObject = function(objframe){\n\treturn this.getOptionsForChild();\n}\n\n\nPropertyRenderer.prototype.render = function(viewer){\n \tthis.buildValueRenderers();\n \tif(this.cframe && this.cframe.property){\n \t\tthis.viewer = (viewer ? viewer : this.getViewerForProperty());\n \t\tfor(var i = 0; i<this.values.length; i++){\n \t\t\tvar renderedval = this.values[i].render();\n \t\t\tif(renderedval && this.showFeature(\"body\")) this.viewer.addRenderedValue(renderedval);\n \t\t}\n \t\treturn this.viewer.render();\n \t}\n} \n\n/*\n * Creates the array of object renderer or value renderer objects corresponding to the property values. \n */\nPropertyRenderer.prototype.buildValueRenderers = function(){\n \tvar adorig = (this.originalValues === false ? true : false);\n \tthis.cframe = this.parent.objframe.getPropertyClassFrame(this.predicate);\n \tif(!this.cframe){\n \t\tconsole.error(\"No frame for \" + this.property() + \" id: \" + this.subject());\n \t\treturn false;\n \t}\n \tif(this.cframe && this.cframe.isData()){\n \t\tvar dataframes = this.getDataFramesToRender();\n \t\tif(dataframes.length == 0){\n \t\t\talert(this.predicate);\n \t\t}\n \t\tvar vals = [];\n \t\tfor(var i = this.values.length; i<dataframes.length; i++){\n \t\t\tvar vr = new ValueRenderer(dataframes[i], i, this, this.getOptionsForValue(dataframes[i], i));\n \t\t\tthis.values.push(vr);\n \t\t\tvals.push(vr.value());\n \t\t}\n \t\tif(adorig) this.originalValues = vals;\n \t}\n \telse {\n \t\tif(adorig) this.originalValues = [];\n \t\tvar kids = this.getChildrenToRender();\n \t\tif(kids && kids.length){\n \t\t\tfor(var i = this.values.length; i<kids.length; i++){\n \t\t\t\tvar kidf = new ObjectRenderer(kids[i], this, this.getOptionsForObject(kids[i]));\n \t\t\t\tif(adorig) this.originalValues.push(kidf.subject());\n \t\t\t\tthis.values.push(kidf);\n \t\t\t}\n \t\t}\n \t}\n}\n\n/*\n * Returns the array of values that should be rendered (enables value filtering)\n */\nPropertyRenderer.prototype.getDataFramesToRender = function(options){\n \tvar allvals = this.parent.objframe.getDataFrames(this.property());\n \treturn allvals;\n}\n\n/*\n * Returns the array of child / objects that should be rendered (enables value filtering)\n */\nPropertyRenderer.prototype.getChildrenToRender = function(options){\n \t/*var sort = this.standardSort;\n \tvar filter = function(){return true};\n \tfor(var i = 0; i<options.map.patterns.length; i++){\n \t\tif(this.objframe.matchesPattern(\"sort\", options.map.patterns[i])){\n \t\t\tsort = options.map.patterns[i].sort;\n \t\t}\n \t\tif(this.objframe.matchesPattern(\"filter\", options.map.patterns[i])){\n \t\t\tfilter = options.map.patterns[i].filter;\n \t\t}\n \t}\n \treturn sort(this.values, filter);*/\n \tif(FrameHelper.viewIncludesChildren(this.view, \"property\")){\n \t\tvar allkids = this.parent.objframe.getChildren(this.property());\n \t}\n \telse {\n \t\tvar allkids = [];\n \t}\n \treturn allkids;\n}\n\nPropertyRenderer.prototype.redraw = function(){\n \tthis.viewer.clear();\n \tthis.render(this.viewer);\n}\n\nPropertyRenderer.prototype.extract = function(){\n \tvar extracts = [];\n \tfor(var i = 0; i<this.values.length; i++){\n \t\tvar val = this.values[i].extract();\n \t\tif(val !== \"\" && typeof val != \"undefined\") extracts.push(val);\n \t}\n \tif(this.cframe.isData()){\n \t\treturn extracts;\n \t}\n \telse {\n \t\tvar extr = {};\n \t\tfor(var i = 0; i<extracts.length; i++){\n \t\t\tfor(var subjid in extracts[i]){\n \t\t\t\textr[subjid] = extracts[i][subjid];\n \t\t\t}\n \t\t}\n \t\treturn extr;\n \t}\n}\n\n/*\n * simple wrapper functions\n */\nPropertyRenderer.prototype.currentViewer = function(){return this.viewerType;}\nPropertyRenderer.prototype.property = function(){return this.predicate;}\nPropertyRenderer.prototype.subject = function(){return (this.parent ? this.parent.subject() : false);};\nPropertyRenderer.prototype.depth = function(){return (this.parent ? this.parent.depth() : false);};\nPropertyRenderer.prototype.subjectClass = function(){return (this.parent ? this.parent.subjectClass() : false);};\nPropertyRenderer.prototype.updated = function(){ return (this.parent ? this.parent.childUpdated() : false);};\nPropertyRenderer.prototype.range = function(){\treturn (this.cframe ? this.cframe.range : \"\");};\nPropertyRenderer.prototype.getLabel = function(){ return (this.cframe ? this.cframe.getLabel() : \"\" );};\nPropertyRenderer.prototype.getComment = function(){ return (this.cframe ? this.cframe.getComment() : false);}\nPropertyRenderer.prototype.load = function(link){ return (this.parent ? this.parent.load(link) : false);}\nPropertyRenderer.prototype.hasCardinalityRestriction = function(){return (this.cframe ? this.cframe.hasRestriction() : false);};\nPropertyRenderer.prototype.getRestriction = function(){return (this.cframe ? this.cframe.restriction : false);};\nPropertyRenderer.prototype.isClassChoice = function(){\treturn (this.cframe ? this.cframe.isClassChoice() : false);};\nPropertyRenderer.prototype.currentFacet = function(){\treturn this.facet;} ;\nPropertyRenderer.prototype.save = function(){ return (this.parent ? this.parent.save() : false);};\n\nPropertyRenderer.prototype.cancel = function(){\n\tthis.reset();\n\tthis.setMode(\"view\");\n}\n\nPropertyRenderer.prototype.getAvailableClassChoices = function(){ \n\tif(this.cframe){\n\t\tvar cf = this.cframe.getClassChoices();\n\t\tif(this.parent){\n\t\t\tvar choices = [];\n\t\t\tfor(var i = 0; i < cf.length; i++){\n\t\t\t\tvar clsmeta = this.parent.getClassMeta(cf[i]);\n\t\t\t\tvar lab = ((clsmeta && clsmeta.Label && clsmeta.Label[\"@value\"]) ? clsmeta.Label[\"@value\"] : FrameHelper.labelFromURL(cf[i]));\n\t\t\t\tchoices.push({value: cf[i], label: lab});\n\t\t\t}\n\t\t\treturn choices;\n\t\t}\n\t\treturn cf;\n\t\t\n\t}\n\treturn false;\n};\n\n\nPropertyRenderer.prototype.delete = function(){\n\tvar prop = this.predicate;\n\tif(prop){\n\t\tthis.reset();\n\t\tthis.parent.deleteProperty(prop);\t\n\t\tthis.parent.redraw();\n\t}\n}\n\nPropertyRenderer.prototype.add = function(view){\n\tthis.parent.addProperty(this.property(), view);\n\tthis.updated();\n\tif(view) {\n\t\tthis.values[this.values.length-1].setMode(view);\n\t\tthis.values[this.values.length-1].setNew();\n\t}\n\tthis.redraw();\n\tthis.goToValue(this.values.length-1);\n}\n\nPropertyRenderer.prototype.goToValue = function(index){\n\tthis.viewer.goTo(this.subject(), this.property(), index);\n}\n\nPropertyRenderer.prototype.addClass = function(cls){\n\tthis.parent.addPropertyClass(this.property(), cls);\n\tthis.updated();\n\tvar newb = this.values[this.values.length-1];\n\tif(newb){\n\t\tnewb.setNew();\n\t\tnewb.setMode(\"edit\");\n\t}\n\tthis.redraw();\n\tif(newb) this.viewer.goTo(newb.subject());\n}\n\nPropertyRenderer.prototype.reset = function(){\n\tthis.parent.objframe.reset(this.predicate);\n\tif(this.cframe && this.cframe.isData()){\n\t\tfor(var i = 0; i<this.values.length; i++){\n\t\t\tthis.values[i].reset();\n\t\t}\n\t\tthis.values = [];\n\t}\n\telse {\n\t\tvar nvals = [];\n\t\tfor(var i = 0; i<this.originalValues.length; i++){\n\t\t\tfor(var j = 0; j<this.values.length; j++){\n\t\t\t\tthis.values[j].reset();\n\t\t\t\tif(this.values[j].subject() == this.originalValues[i]){\n\t\t\t\t\tnvals.push(this.values[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.values = nvals;\n\t}\n\tthis.redraw();\t\n\tthis.parent.childUpdated();\n}\n\nPropertyRenderer.prototype.deletePropertyValue = function(value, index){\n\tthis.parent.objframe.removePropertyValue(this.property(), value, index);\n\tvar nvals = [];\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(typeof index == \"undefined\"){\n\t\t\tif(this.values[i].subject() == value){\n\t\t\t\tthis.values[i].reset();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnvals.push(this.values[i]);\n\t\t\t}\n\t\t}\n\t\telse if(i != index){\n\t\t\tthis.values[i].index = nvals.length;\n\t\t\tnvals.push(this.values[i]);\n\t\t}\n\t\telse {\n\t\t\tthis.values[i].reset();\n\t\t}\n\t}\n\tthis.values = nvals;\n\tthis.parent.childUpdated();\n\tthis.parent.redraw();\n}\n\nPropertyRenderer.prototype.addPropertyValue = function(value){\n\tthis.updated();\n\treturn this.parent.objframe.addPropertyValue(this.property(), value);\n}\n\n/*\n * Checks to see if an action (add, clone, delete) which affects the cardinality of the property is allowed by cardinality rules.\n */\nPropertyRenderer.prototype.cardControlAllows = function(action){\n\tif(this.cframe.hasRestriction()){\n\t\tvar rest = this.cframe.restriction;\n\t\tvar currentnum = this.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nPropertyRenderer.prototype.isNew = function(){\n\tif(this.new_property){\n\t\treturn true;\n\t}\n\treturn this.parent.isNew();\n}\n\nPropertyRenderer.prototype.setNew = function(){\n\tthis.new_property = true;\n}\n\n\nPropertyRenderer.prototype.isUpdated = function(){\n\tif(this.values.length != this.originalValues.length) return true;\n\tfor(var i = 0 ; i < this.values.length; i++){\n\t\tif(this.cframe && this.cframe.isData()){\n\t\t\tif(this.values[i].value() != this.originalValues[i]){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif(this.values[i].subject() != this.originalValues[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(this.values[i].isUpdated()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nPropertyRenderer.prototype.childUpdated = function(){\n\tthis.viewer.redrawHeader();\n\tif(this.parent) this.parent.childUpdated();\n}\n\n\n/**\n * Sets mode of viewer to either \"view\" or \"edit\"\n */\nPropertyRenderer.prototype.setMode = function(mode){\n\tthis.mode = mode;\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tthis.values[i].setMode(mode);\n\t}\n\tthis.redraw();\n}\n\n/*\n * Jump to property value\n */\nPropertyRenderer.prototype.getViewableValues = function(){\n\tvar viewables = [];\n\tif(this.cframe && this.cframe.isData())\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tvar sum = this.values[i].getSummary();\n\t\tvar lab = sum.long;\n\t\tviewables.push({label: lab, value: i});\n\t}\n\treturn viewables;\n}\n\nPropertyRenderer.prototype.hideDisabledControls = function(){\n\treturn this.hide_disabled_controls;\n}\n\nPropertyRenderer.prototype.setFacet = function(facet, nocascade){\n\tthis.facet = facet;\n\tif(!nocascade){\n\t\tfor(var i = 0; i<this.values.length; i++){\n\t\t\tthis.values[i].parentFacetChange(facet);\n\t\t}\n\t}\n\tthis.redraw();\n}\n\nPropertyRenderer.prototype.parentFacetChange = function(facet){\n\tif(facet == 'page'){\n\t\tif(!(this.facet == \"page\" || this.facet == \"multiline\")){\n\t\t\tthis.setFacet('multiline');\n\t\t}\n\t}\n\tif(facet == 'line'){\n\t\tthis.setFacet(\"label\");\n\t}\n\t\t\n}\n\n\n\nPropertyRenderer.prototype.getDefaultFacets = function(){\n\tvar defs = {\n\t\tpage: {\n\t\t\tlabel: \"Full Page\", value: \"page\", \n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"], \n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\n\t\t},\n\t\tmultiline: {\n\t\t\tlabel: \"Multiple Lines\", value: \"multiline\",\n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"view\", \"viewer\"], \n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\n\t\t},\n\t\tline: {\n\t\t\tlabel: \"Single Line\", value: \"line\",\n\t\t\tfeatures: [\"facet\", \"label\", \"comment\", \"id\", \"control\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\"], \n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"]\n\t\t},\n\t\tsummary: {\n\t\t\tlabel: \"Summary\", value: \"summary\",\n\t\t\tfeatures: [\"facet\", \"satus\", \"label\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\"], \n\t\t\tcontrols: [] \n\t\t},\n\t\tlabel: {\n\t\t\tlabel: \"Label\", value: \"label\",\n\t\t\tfeatures: [\"facet\", \"status\", \"label\", \"summary\"],\n\t\t\tcontrols: []\n\t\t},\n\t\ticon: {\n\t\t\tlabel: \"Snippet\", value: \"icon\",\n\t\t\tfeatures: [\"facet\", \"summary\"],\n\t\t\tcontrols: []\n\t\t}\n\t}\n\treturn defs;\t\n}\n\nPropertyRenderer.prototype.getAvailableFacets = function(){\n\treturn Object.values(this.facets);\n\tvar facets = [];\n\tfacets.push({label: \"Full Page\", value: \"page\"});\n\tfacets.push({label: \"Multiple Lines\", value: \"multiline\"});\n\tfacets.push({label: \"Single Line\", value: \"line\"});\n\tfacets.push({label: \"Summary\", value: \"summary\"});\n\tfacets.push({label: \"Label\", value: \"label\"});\n\tfacets.push({label: \"Snippet\", value: \"icon\"});\n\treturn facets;\n}\n\nPropertyRenderer.prototype.getContentOrientation = function(facet){\n\tif(this.currentFacet() == \"page\" || this.containsPage()){\n\t\treturn \"page\";\n\t}\n\tif(this.currentFacet() == \"line\" || this.currentFacet() == \"multiline\" || this.currentFacet() == \"summary\"){\n\t\treturn \"line\";\n\t}\n\treturn \"label\";\n}\n\n\nPropertyRenderer.prototype.getDefaultFacet = function(){\n\tif(this.cframe && this.cframe.isObject()){\n\t\treturn \"page\";\n\t}\n\treturn \"multiline\";\n}\n\n/*\n * Viewers for specific properties\n */\n\nPropertyRenderer.prototype.hide = function(){\n\tthis.setView(\"hidden\");\n}\n\nPropertyRenderer.prototype.show = function(){\n\tthis.setView(\"full\");\n}\n\nPropertyRenderer.prototype.setView = function(view){\n\tthis.view = view;\n\tthis.redraw();\n}\n\nPropertyRenderer.prototype.getAvailableViewers = function(){\n\tif(this.mode == \"view\"){\n\t\treturn RenderingMap.getAvailablePropertyViewers(this);\t\t\n\t}\n\treturn RenderingMap.getAvailablePropertyEditors(this);\t\t\t\t\n}\n\nPropertyRenderer.prototype.getViewerForDataValue = function(){\n\t/*if(this.cframe && this.cframe.isData()){\n\t\tvar dt = this.cframe.getTypeShorthand();\n\t\tvar ft = this.cframe.ftype();\n\t\tif(this.mode == \"edit\"){\n\t\t\treturn RenderingMap.getEditorForFrame(dt, ft);\t\t\t\t\n\t\t}\n\t\treturn RenderingMap.getViewerForFrame(dt, ft);\t\t\n\t}*/\n}\n\nPropertyRenderer.prototype.setViewer = function(viewer){\n\t//this.viewerType = viewer;\n\t//for(var i = 0; i<this.values.length; i++){\n\t//\tthis.values[i].setViewer(viewer);\n\t//}\n\t//this.redraw();\n}\n\nPropertyRenderer.prototype.nukeViewer = function(){\n\tthis.viewer.remove();\n}\n\nPropertyRenderer.prototype.containsPage = function(){\n\t//collapsed facets do not show their values\n\tif(this.currentFacet() == \"icon\" || this.currentFacet() == \"label\") return false;\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tif(this.values[i].facet == \"page\") {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nPropertyRenderer.prototype.getViewerForProperty = function(ptype){\n\tif(this.mode == \"edit\"){\n\t\treturn RenderingMap.getEditorForProperty(ptype, this);\t\t\t\t\n\t}\n\treturn RenderingMap.getViewerForProperty(ptype, this);\t\n}\n\nPropertyRenderer.prototype.getPropertyHeaderViewer = function(){\n\treturn new HTMLPropertyHeaderViewer();\n}\n\nPropertyRenderer.prototype.getSummary = function(){\n\tvar status = \"ok\";\n\tif(this.isNew()) status = \"new\";\n\telse if(this.isUpdated()) status = \"updated\";\n\tvar ret = {\n\t\tstatus: status,\n\t\tvalcount: this.values.length\n\t};\n\tret.long = ((ret.valcount != 1) ? \"(\" + ret.valcount + \") \" : \"\");\n\tfor(var i = 0; i<this.values.length; i++){\n\t\tvsum = this.values[i].getSummary();\n\t\tret.long += vsum.long;\n\t\tif(i < this.values.length-1) ret.long += \", \";\n\t}\n\treturn ret;\t\n}\n\nPropertyRenderer.prototype.getFeaturesForFacet = function(facet){\n\treturn this.facets[facet].features.concat(this.facets[facet].controls);\n}\n \nPropertyRenderer.prototype.showFeature = function(which){\n\tif(this.features.indexOf(which) == -1 && this.controls.indexOf(which) == -1) {\n\t\treturn false;\n\t}\n\tvar cardcontrols = [\"delete\", \"clone\", \"add\"];\n\tif(cardcontrols.indexOf(which) != -1){\n\t\tif(!this.cardControlAllows(which)) return false;\n\t}\n\tvar updcontrols = [\"update\", \"reset\"];\n\tif(this.hideDisabledControls() && updcontrols.indexOf(which) != -1 ){\n\t\tif(!this.isUpdated()){\n\t\t\treturn false;\n\t\t}\n\t}\n\tif(which == 'hide' && this.view == \"hidden\") return false;\n\tif(which == 'show' && this.view != \"hidden\") return false;\n\tvar fets = this.getFeaturesForFacet(this.facet);\n\treturn (fets.indexOf(which) != -1);\n}\n\nmodule.exports=PropertyRenderer\n\n","const FrameHelper = require('../FrameHelper');\nconst HTMLFrameHelper = require('./HTMLFrameHelper');\n\n/**\n * Property Viewer\n */\nfunction HTMLPropertyViewer(renderer){\n\tthis.renderer = renderer;\n\tthis.values = [];\n\tthis.headerViewer = renderer.getPropertyHeaderViewer();\n}\n\n\n/**\n * Draws the property as header and body components\n */\nHTMLPropertyViewer.prototype.render = function(){\n\tvar block = document.createElement('div');\n\tblock.setAttribute('style', 'display: flex; margin: 10px 10px 0px 0px;');\n\tvar br = document.createElement('br');\n\tblock.appendChild(br);\n\tif(this.propDOM){\n\t\tvar npropDOM = this.getPropertyDOM();\n\t\tblock.appendChild(npropDOM);\n\t\tthis.propDOM.replaceWith(npropDOM);\n\t\t//11092019 this.propDOM = npropDOM;\n\t\tthis.propDOM = block;\n\t}\n\telse {\n\t\tblock.appendChild(this.getPropertyDOM());\n\t\tthis.propDOM = block;\n\t\t//11092019 this.propDOM = this.getPropertyDOM();\n\t}\n\tthis.propDOM.appendChild(this.getPropertyIDMarker(this.renderer));\n\tif(this.headerViewer){\n\t\tthis.header = this.headerViewer.getAsDOM(this.renderer);\n\t\tif(this.header) this.propDOM.appendChild(this.header);\n\t}\n\tthis.body = this.getPropertyBodyDOM();\n\tif(this.body) this.propDOM.appendChild(this.body);\n\treturn this.propDOM;\n}\n\nHTMLPropertyViewer.prototype.getPropertyDOM = function(){\n\tvar orientation = this.renderer.getContentOrientation();\n\tvar pcls = \" terminus-property-frame-display terminus-property-frame-\" + orientation;\n\tif(orientation == \"label\"){\n\t\tvar sp = document.createElement(\"span\");\n\t}\n\telse {\n\t\tvar sp = document.createElement(\"div\");\n\t}\n\t//terminus-property-frame-spacer\n\n\tsp.setAttribute(\"class\", \"WHATER terminus-property-frame \"+ sp + \" terminus-property-frame-\" + this.renderer.mode + \" \" + pcls);\n\tsp.setAttribute('data-property', this.renderer.property());\n\treturn sp;\n}\n\nHTMLPropertyViewer.prototype.getPropertyBodyDOM = function(){\n\tvar orientation = this.renderer.getContentOrientation();\n\tvar pcls = \"terminus-property-values-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar vholder = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar vholder = document.createElement(\"span\");\n\t}\n    vholder.setAttribute('class', 'terminus-property-values ' + pcls + ' terminus-property-values-align');\n\tfor(var i =0; i<this.values.length; i++){\n\t\tvholder.appendChild(this.values[i]);\n\t}\n\treturn vholder;\n}\n\nHTMLPropertyViewer.prototype.addRenderedValue = function(renderedval){\n\tthis.values.push(renderedval);\n}\n\nHTMLPropertyViewer.prototype.clear = function(){\n\tFrameHelper.removeChildren(this.propDOM);\n\tthis.values = [];\n}\n\n\n/**\n * Removes the property from the dom\n */\nHTMLPropertyViewer.prototype.remove = function(){\n\tthis.propDOM.parentNode.removeChild(this.propDOM);\n}\n\n/**\n * Redraws the property to reflect an updated state\n */\nHTMLPropertyViewer.prototype.redraw = function(){\n\tvar npropDOM = this.getPropertyDOM();\n\tthis.propDOM.replaceWith(npropDOM);\n\tthis.propDOM = npropDOM;\n\tthis.values = [];\n\tthis.renderer.render(this);\n}\n\nHTMLPropertyViewer.prototype.redrawHeader = function(){\n\tif(this.headerViewer && this.header) {\n\t\tvar nheader = this.headerViewer.getAsDOM(this.renderer);\n\t\tthis.header.replaceWith(nheader);\n\t\tthis.header = nheader;\n\t}\n}\n\nHTMLPropertyViewer.prototype.redrawBody = function(){\n\tif(this.body){\n\t\tvar nbody = this.getPropertyBodyDOM();\n\t\tthis.body.replaceWith(nbody);\n\t\tthis.body = nbody;\n\t}\n}\n\n/**\n * Generates a html anchor element to use as a marker to find the property on the page\n */\nHTMLPropertyViewer.prototype.getPropertyIDMarker = function(renderer){\n\tvar idm = document.createElement(\"a\");\n\tidm.setAttribute(\"class\", \"terminus-property-idmarker\");\n\tvar subj = FrameHelper.getShorthand(renderer.subject());\n\tif(!subj ) subj = renderer.subject();\n\tvar bits = subj .split(\":\");\n\tif(bits.length > 1) subj = bits[1];\n\tvar prop = FrameHelper.getShorthand(renderer.property());\n\tif(!prop ) prop = renderer.property();\n\tvar bits = prop.split(\":\");\n\tif(bits.length > 1) prop = bits[1];\n\tidm.setAttribute(\"name\", subj + \"_\" + prop);\n\treturn idm;\n}\n\nHTMLPropertyViewer.prototype.goTo = function(subj, property, index){\n\tHTMLFrameHelper.goToName(subj, property, index);\n}\n\nfunction HTMLPropertyHeaderViewer(){}\n\nHTMLPropertyHeaderViewer.prototype.getAsDOM = function(renderer){\n\tvar orientation = renderer.getContentOrientation();\n\tvar pcls = \"terminus-property-header-\" + orientation;\n\tif(orientation == \"page\"){\n\t\tvar objDOM = document.createElement(\"div\");\n\t}\n\telse {\n\t\tvar objDOM = document.createElement(\"span\");\n\t}\n\tobjDOM.setAttribute(\"class\", \"terminus-text terminus-property-header \" + pcls);\n\tvar wrapper = document.createElement(\"span\");\n\twrapper.setAttribute(\"class\", \"terminus-property-header-wrapper\");\n\tif(renderer.showFeature(\"control\")){\n\t\tvar controlsDOM = this.getPropertyControlsDOM(renderer);\n\t\tif(controlsDOM) wrapper.appendChild(controlsDOM);\n\t}\n\tif(renderer.showFeature(\"label\")){\n\t\tvar sumDOM = this.getPropertyLabelDOM(renderer);\n\t\tif(renderer.showFeature(\"status\")){\n\t\t\tvar statDOM = this.getPropertyStatusDOM(renderer);\n\t\t\tif(statDOM) sumDOM.prepend(statDOM);\n\t\t}\n\t\tif(sumDOM) wrapper.appendChild(sumDOM);\n\t}\n\telse if(renderer.showFeature(\"status\")){\n\t\tvar statDOM = this.getPropertyStatusDOM(renderer);\n\t\tif(statDOM) wrapper.appendChild(statDOM);\n\t}\n\tif(renderer.showFeature(\"summary\")){\n\t\tvar sumDOM = this.getPropertySummaryDOM(renderer);\n\t\tif(sumDOM) wrapper.appendChild(sumDOM);\n\t}\n\tvar prelude = document.createElement(\"span\");\n\tprelude.setAttribute(\"class\", \"terminus-property-header-info terminus-property-header-info-\"+renderer.currentFacet());\n\tif(renderer.showFeature(\"facet\")){\n\t\tvar facetDOM = this.getPropertyFacetDOM(renderer);\n\t\tif(facetDOM) prelude.appendChild(facetDOM);\n\t}\n\tif(renderer.showFeature(\"view\")){\n\t\tvar viewDOM = this.getViewValueDOM(renderer);\n\t\tif(viewDOM) prelude.appendChild(viewDOM);\n\t}\n\tif(renderer.showFeature(\"id\")){\n\t\tvar idDOM = this.getPropertyIDDOM(renderer);\n\t\tif(idDOM) prelude.appendChild(idDOM);\n\t}\n\tif(renderer.showFeature(\"type\")){\n\t\tvar typeDOM = this.getPropertyRangeDOM(renderer);\n\t\tif(typeDOM) prelude.appendChild(typeDOM);\n\t}\n\tif(renderer.showFeature(\"cardinality\") && renderer.hasCardinalityRestriction()){\n\t\tvar hideDOM = this.getPropertyCardinalityDOM(renderer);\n\t\tif(hideDOM) prelude.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"comment\")){\n\t\tvar sumDOM = this.getPropertyCommentDOM(renderer);\n\t\tif(sumDOM) prelude.appendChild(sumDOM);\n\t}\n\twrapper.appendChild(prelude);\n\tobjDOM.appendChild(wrapper);\n\treturn objDOM;\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyFacetDOM = function(renderer){\n\tvar viewables = renderer.getAvailableFacets();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-facet\");\n\t\tvar callback = function(val){\n\t\t\tif(val){\n\t\t\t\trenderer.setFacet(val);\n\t\t\t}\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"property-facet\", viewables, renderer.currentFacet(), callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyIDDOM = function(renderer){\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-id\", \"Property\", renderer.property(), \"This property is identified by this unique URL: \" + renderer.property());\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyRangeDOM = function(renderer){\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-type\", \"Type\", renderer.range(), \"The type of arguments that this property accepts\");\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertySummaryDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-summary\", false, sum.long, sum.status);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyStatusDOM = function(renderer){\n\tvar sum = renderer.getSummary();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"status-\"+sum.status, false, sum.status, sum.status);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyLabelDOM = function(renderer){\n\tvar lab = renderer.getLabel();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-label\", false, lab);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyCommentDOM = function(renderer){\n\tvar lab = renderer.getComment();\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-comment\", false, lab);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyCardinalityDOM = function(renderer){\n\tvar restriction = renderer.getRestriction();\n\tif(restriction.min && restriction.max){\n\t\tif(restriction.min == restriction.max){\n\t\t\tvar lab = restriction.min;\n\t\t\tvar help = \"Cardinality: \" + restriction.min;\n\t\t}\n\t\telse {\n\t\t\tvar lab = restriction.min + \"-\" + restriction.max;\n\t\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\n\t\t\thelp += \", Maximum Cardinality: \" + restriction.max;\n\t\t}\n\t}\n\telse if(restriction.min){\n\t\tvar lab = \">\"+(restriction.min-1);\n\t\tvar help = \"Minimum Cardinality: \" + restriction.min;\n\t}\n\telse if(restriction.max){\n\t\tvar lab = \"<\"+(restriction.max+1);\n\t\tvar help = \"Maximum Cardinality: \" + restriction.max;\n\t}\n\telse {\n\t\treturn false;\n\t}\n\treturn HTMLFrameHelper.getInfoboxDOM(\"property-cardinality\", \"Cardinality\", lab, help);\n}\n\nHTMLPropertyHeaderViewer.prototype.getActionControlDOM = function(settingsDOM, renderer){\n\tif(renderer.showFeature(\"mode\")){\n\t\tvar viewsDOM = HTMLFrameHelper.getModeSelectorDOM(\"property\", renderer);\n\t\tif (viewsDOM) settingsDOM.appendChild(viewsDOM);\n\t}\n\tif(renderer.showFeature(\"delete\")){\n\t\tvar dpropDOM = this.getPropertyDeleteDOM(renderer);\n\t\tif (dpropDOM) settingsDOM.appendChild(dpropDOM);\n\t}\n\tif(renderer.showFeature(\"add\") && !renderer.isClassChoice()){\n\t\tvar addDOM = this.getAddValueDOM(renderer);\n\t\tif(addDOM) settingsDOM.appendChild(addDOM);\n\t}\n\tif(renderer.showFeature(\"reset\")){\n\t\tvar rpropDOM = this.getPropertyResetDOM(renderer);\n\t\tif(rpropDOM) settingsDOM.appendChild(rpropDOM);\n\t}\n\tif(renderer.showFeature(\"update\")){\n\t\tvar upropDOM = this.getPropertyUpdateDOM(renderer);\n\t\tif(upropDOM) settingsDOM.appendChild(upropDOM);\n\t}\n\tif(renderer.showFeature(\"show\")){\n\t\tvar showDOM = this.getPropertyShowDOM(renderer);\n\t\tif(showDOM) settingsDOM.appendChild(showDOM);\n\t}\n\tif(renderer.showFeature(\"hide\")){\n\t\tvar hideDOM = this.getPropertyHideDOM(renderer);\n\t\tif(hideDOM) settingsDOM.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"viewer\")){\n\t\tvar hideDOM = this.getViewerSelectorDOM(renderer);\n\t\tif(hideDOM) settingsDOM.appendChild(hideDOM);\n\t}\n\tif(renderer.showFeature(\"add\") && renderer.isClassChoice()){\n\t\tvar addDOM = this.getAddValueDOM(renderer);\n\t\tif(addDOM) settingsDOM.appendChild(addDOM);\n\t}\n}\n\nHTMLPropertyHeaderViewer.prototype.getSettingsControlDOM = function(controlsDOM, renderer){\n\tvar settings = document.createElement(\"div\");\n\tvar sControl = HTMLFrameHelper.getSettingsControl();\n\tvar popup = document.createElement('div');\n\tpopup.setAttribute('class', 'terminus-hide terminus-popup');\n\tpopup.appendChild(document.createTextNode('blah blah'));\n\tsControl.appendChild(popup);\n\tsControl.addEventListener('click', function(){\n\t\tif(this.children[0].style.display == 'none') this.children[0].style.display = 'block';\n\t\telse this.children[0].style.display = 'block';\n\n\t});\n    settings.appendChild(sControl);\n\tcontrolsDOM.appendChild(settings);\n\t// append action controls to pop up\n\tthis.getActionControlDOM(popup, renderer);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyControlsDOM = function(renderer){\n\tvar controlsDOM = document.createElement(\"span\");\n\tcontrolsDOM.setAttribute(\"class\", \"terminus-property-controls\");\n\t// get settings icon or button\n\tthis.getSettingsControlDOM(controlsDOM, renderer);\n\treturn controlsDOM;\n}\n\nHTMLPropertyHeaderViewer.prototype.getAddValueDOM = function(renderer){\n\tif(renderer.isClassChoice()){\n\t\tvar cs = renderer.getAvailableClassChoices();\n\t\tif(cs && cs.length){\n\t\t\tvar mpropDOM = document.createElement(\"span\");\n\t\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-add-class\");\n\t\t\tcs.unshift({ value: \"\", label: \"Add Type\"});\n\t\t\tvar callback = function(cls){\n\t\t\t\tif(cls){\n\t\t\t\t\trenderer.addClass(cls);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"add-property\", cs, \"\", callback);\n\t\t\tmpropDOM.appendChild(sel);\n\t\t\treturn mpropDOM;\n\t\t}\n\t}\n\telse {\n\t\tvar callback = function(){renderer.add(\"edit\")};\n\t\tvar disabled = (renderer.cardControlAllows(\"add\") ? false : \"Cardinality Rules Forbid Add\");\n\t\treturn HTMLFrameHelper.getActionControl(\"property\", \"add\", \"Add\", callback, disabled);\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.getViewValueDOM = function(renderer){\n\tvar viewables = renderer.getViewableValues();\n\tvar self = this;\n\tif(viewables && viewables.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-view-value\");\n\t\tviewables.unshift({ value: \"\", label: \"View Value\"});\n\t\tvar callback = function(val){\n\t\t\trenderer.goToValue(val);\n\t\t}\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"view-values\", viewables, \"\", callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyDeleteDOM = function(renderer){\n\tvar callback = function(){renderer.delete()};\n\tvar disabled = (renderer.cardControlAllows(\"delete\") ? false : \"Cardinality Rules Forbid Delete\");\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"delete\", \"Delete\", callback, disabled);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyHideDOM = function(renderer){\n\tvar callback = function(){renderer.hide()};\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"hide\", \"Hide\", callback);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyResetDOM = function(renderer){\n\tvar callback = function(){renderer.reset()};\n\tvar disabled = (renderer.isUpdated() ? false : \"Nothing to reset\");\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"reset\", \"Reset\", callback, disabled);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyShowDOM = function(renderer){\n\tvar callback = function(){renderer.show()};\n\treturn HTMLFrameHelper.getActionControl(\"property\", \"show\", \"Show\", callback);\n}\n\nHTMLPropertyHeaderViewer.prototype.getPropertyUpdateDOM = function(renderer){\n\tvar dpropDOM = document.createElement(\"span\");\n\tdpropDOM.setAttribute(\"class\", \"terminus-property-update\");\n\tvar disabled = (renderer.isUpdated() ? false : \"No Change\");\n\tvar saveback = function(){renderer.save()};\n\tdpropDOM.appendChild(HTMLFrameHelper.getActionControl(\"property\", \"save\", \"Save\", saveback, disabled));\n\treturn dpropDOM;\n}\n\nHTMLPropertyHeaderViewer.prototype.getViewerSelectorDOM = function(renderer){\n\tvar viewers = renderer.getAvailableViewers();\n\tif(viewers && viewers.length){\n\t\tvar mpropDOM = document.createElement(\"span\");\n\t\tmpropDOM.setAttribute(\"class\", \"terminus-property-viewer\");\n\t\tvar callback = function(viewer){\n\t\t\tif(viewer){\n\t\t\t\trenderer.setViewer(viewer);\n\t\t\t}\n\t\t}\n\t\tvar selected = renderer.currentViewer();\n\t\tvar sel = HTMLFrameHelper.getSelectionControl(\"property-viewers\", viewers, selected, callback);\n\t\tmpropDOM.appendChild(sel);\n\t\treturn mpropDOM;\n\t}\n\treturn false;\n}\n\nHTMLPropertyHeaderViewer.prototype.showValue = function(renderer, index){\n\tvar htmlid = renderer.subject() + \"->\" + renderer.property() + \"_\" + index;\n\twindow.location = (\"\"+window.location).replace(/#[A-Za-z0-9_]*$/,'') + \"#\" + htmlid;\n}\n\nfunction HTMLDataViewer(renderer){\n\tthis.renderer = renderer;\n\tthis.headerViewer = renderer.getValueHeaderViewer();\n}\n\nmodule.exports={HTMLPropertyViewer,HTMLPropertyHeaderViewer}\n","const FrameHelper = require('../FrameHelper');\nconst HTMLPropertyViewer = require('./PropertyViewer');\nconst ObjectViewer= require(\"./ObjectViewer\")\n\nlet RenderingMap = {\n\tregisteredDataViewers: {},\n\tregisteredDataEditors: {},\t\n\tregisteredPropertyViewers: {},\n\tregisteredPropertyEditors: {},\n\tregisteredObjectViewers: {},\n\tregisteredObjectEditors: {},\n\tgetValidDataViewerList: function(type, frametype){\n\t\tvar valids = ['HTMLStringViewer'];\n\t\tif(frametype && typeof this.registeredDataViewers[frametype] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredDataViewers[frametype]);\n\t\t}\n\t\tif(typeof this.registeredDataViewers[type] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredDataViewers[type]);\n\t\t}\n\t\treturn valids;\n\t},\n\tgetValidDataEditorList: function(type, frametype){\n\t\tvar valids = ['HTMLStringEditor'];\n\t\tif(frametype && typeof this.registeredDataEditors[frametype] != \"undefined\"){\n\t\t\tvar nftypes = this.registeredDataEditors[frametype];\n\t\t\tif(nftypes){\n\t\t\t\tfor(var i = 0; i<nftypes.length; i++){\n\t\t\t\t\tif(valids.indexOf(nftypes[i]) == -1) valids.push(nftypes[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(typeof this.registeredDataEditors[type] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredDataEditors[type]);\n\t\t}\n\t\treturn valids;\n\t},\n\tgetValidPropertyViewerList: function(property, proptype, proprange, propdom){\n\t\tvar valids = ['HTMLPropertyViewer'];\n\t\tif(property && typeof this.registeredPropertyViewers[property] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[property]);\n\t\t}\n\t\tif(proprange && typeof this.registeredPropertyViewers[proprange] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[proprange]);\n\t\t}\n\t\tif(propdom && typeof this.registeredPropertyViewers[propdom] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[propdom]);\n\t\t}\n\t\tif(proptype && typeof this.registeredPropertyViewers[proptype] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyViewers[proptype]);\n\t\t}\n\t\treturn valids;\n\t},\n\tgetValidPropertyEditorList: function(property, proptype, proprange, propdom){\n\t\tvar valids = ['HTMLPropertyViewer'];\n\t\tif(property && typeof this.registeredPropertyEditors[property] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[property]);\n\t\t}\n\t\tif(proprange && typeof this.registeredPropertyEditors[proprange] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[proprange]);\n\t\t}\n\t\tif(propdom && typeof this.registeredPropertyEditors[propdom] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[propdom]);\n\t\t}\n\t\tif(proptype && typeof this.registeredPropertyEditors[proptype] != \"undefined\"){\n\t\t\tvalids = valids.concat(this.registeredPropertyEditors[proptype]);\n\t\t}\n\t\treturn valids;\n\t},\n\tgetViewer: function(type, options){\n\t\tvar vi = this.renderers[type];\n\t\toptions = (options ? options: {});\n\t\ttry {\n\t\t\tvar viewer = eval(\"new \" + type + \"(\" + JSON.stringify(options) + \")\");\t\n\t\t\treturn viewer;\n\t\t}\n\t\tcatch(e){\n\t\t\talert(e.toString());\n\t\t}\n\t},\n\tgetAvailablePropertyViewers: function(type, renderer) {\n\t\tvar viewers = [];\n\t\tvar nviewers = []\n\t\tvar opts = this.getValidPropertyViewerList(type);\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\n\t\t\t\tnviewers.push(opts[i]);\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i<nviewers.length; i++){\n\t\t\tif(this.renderers[nviewers[i]]){\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\n\t\t\t}\n\t\t}\n\t\treturn viewers;\n\t},\n\tgetAvailablePropertyEditors: function(type, renderer) {\n\t\tvar viewers = [];\n\t\tvar nviewers = []\n\t\tvar opts = this.getValidPropertyEditorList();\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\n\t\t\t\tnviewers.push(opts[i]);\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i<nviewers.length; i++){\n\t\t\tif(this.renderers[nviewers[i]]){\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\n\t\t\t}\n\t\t}\n\t\treturn viewers;\n\t\t\n\t},\n\tgetAvailableDataViewers: function(type, frametype){\n\t\tvar viewers = [];\n\t\tvar nviewers = []\n\t\tvar opts = this.getValidDataViewerList(type, frametype);\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\n\t\t\t\tnviewers.push(opts[i]);\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i<nviewers.length; i++){\n\t\t\tif(this.renderers[nviewers[i]]){\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\n\t\t\t}\n\t\t}\n\t\treturn viewers;\n\t},\n\tgetAvailableDataEditors: function(type, frametype){\n\t\tvar viewers = [];\n\t\tvar nviewers = []\n\t\tvar opts = this.getValidDataEditorList(type, frametype);\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tif(nviewers.indexOf(opts[i]) == -1) {\n\t\t\t\tnviewers.push(opts[i]);\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i<nviewers.length; i++){\n\t\t\tif(this.renderers[nviewers[i]]){\n\t\t\t\tvar sets = this.renderers[nviewers[i]];\n\t\t\t\tviewers.push({value: nviewers[i], label: sets.label});\n\t\t\t}\n\t\t}\n\t\treturn viewers;\n\t},\n\tgetViewerForDataFrame: function(type, frametype){\n\t\tvar vals = this.getValidDataViewerList(type, frametype);\n\t\treturn vals[vals.length-1];\n\t},\n\tgetEditorForDataFrame: function(type, frametype){\n\t\tvar vals = this.getValidDataEditorList(type, frametype);\n\t\treturn vals[vals.length-1];\n\t},\n\tregisterViewerForTypes: function(viewer, label, types){\n\t\tfor(var i = 0; i < types.length; i++){\n\t\t\tif(typeof this.registeredDataViewers[types[i]] == \"undefined\"){\n\t\t\t\tthis.registeredDataViewers[types[i]] = [];\n\t\t\t}\n\t\t\tif(this.registeredDataViewers[types[i]].indexOf(viewer) == -1){\n\t\t\t\tthis.registeredDataViewers[types[i]].push(viewer);\n\t\t\t\tthis.renderers[viewer] = {label: label};\n\t\t\t}\n\t\t}\n\t},\n\tregisterEditorForTypes: function(viewer, label, types){\n\t\tfor(var i = 0; i < types.length; i++){\n\t\t\tif(typeof this.registeredDataEditors[types[i]] == \"undefined\"){\n\t\t\t\tthis.registeredDataEditors[types[i]] = [];\n\t\t\t}\n\t\t\tif(this.registeredDataEditors[types[i]].indexOf(viewer) == -1){\n\t\t\t\tthis.registeredDataEditors[types[i]].push(viewer);\n\t\t\t\tthis.renderers[viewer] = {label: label};\n\t\t\t}\t\t\t\n\t\t}\n\t},\n\tregisterEditorForFrameType: function(viewer, label, frametype){\n\t\tthis.renderers[viewer] = {label: label};\n\t\tif(typeof this.registeredDataEditors[frametype] == \"undefined\") this.registeredDataEditors[frametype] = [];\n\t\tif(this.registeredDataEditors[frametype].indexOf(viewer) == -1){\n\t\t\tthis.registeredDataEditors[frametype].push(viewer);\n\t\t}\n\t},\n\tregisterViewerForFrameType: function(viewer, label, frametype){\n\t\tthis.renderers[viewer] = {label: label};\n\t\tif(typeof this.registeredDataViewers[frametype] == \"undefined\") this.registeredDataViewers[frametype] = [];\n\t\tif(this.registeredDataViewers[frametype].indexOf(viewer) == -1){\n\t\t\tthis.registeredDataViewers[frametype].push(viewer);\n\t\t}\n\t},\n\tregisterViewerForProperties: function(viewer, label, properties){\n\t\tfor(var i = 0; i < properties.length; i++){\n\t\t\tif(typeof this.registeredPropertyViewers[properties[i]] == \"undefined\"){\n\t\t\t\tthis.registeredPropertyViewers[properties[i]] = [];\n\t\t\t}\n\t\t\tif(this.registeredPropertyViewers[properties[i]].indexOf(viewer) == -1){\n\t\t\t\tthis.registeredPropertyViewers[properties[i]].push(viewer);\n\t\t\t\tthis.renderers[viewer] = {label: label};\n\t\t\t}\n\t\t}\n\t},\n\tregisterEditorForProperties: function(viewer, label, properties){\n\t\tfor(var i = 0; i < properties.length; i++){\n\t\t\tif(typeof this.registeredPropertyEditors[properties[i]] == \"undefined\"){\n\t\t\t\tthis.registeredPropertyEditors[properties[i]] = [];\n\t\t\t}\n\t\t\tif(this.registeredPropertyEditors[properties[i]].indexOf(viewer) == -1){\n\t\t\t\tthis.registeredPropertyEditors[properties].push(viewer);\n\t\t\t\tthis.renderers[viewer] = {label: label};\n\t\t\t}\n\t\t}\n\t},\n\trenderers: {\n\t\tHTMLStringViewer: { label: \"String Viewer\"},\n\t\tHTMLStringEditor: { label: \"String Editor\"},\n\t\tHTMLPropertyViewer: { label: \"HTML Property Viewer\"}\n\t},\n\tpatternMatchesRenderer: function(pattern, renderer){\n\t\tif(typeof pattern == \"object\" && pattern.length){ //multiple patterns are ANDed\n\t\t\tfor(var i = 0 ; i<pattern.length; i++){\n\t\t\t\tvar fp = new FramePattern(pattern[i]);\n\t\t\t\tif(!fp.checkRenderer(renderer)) return false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\tvar fp = new FramePattern(pattern);\n\t\t\treturn fp.checkRenderer(renderer);\n\t\t}\n\t}\n}\n\n\nRenderingMap.getViewerForProperty = function(target, renderer){\n\treturn new HTMLPropertyViewer(renderer);\n}\n\nRenderingMap.getEditorForProperty = function(target, renderer){\n\treturn new HTMLPropertyViewer(renderer);\n}\n\n\nRenderingMap.getViewerForObject = function(target, renderer){\n\tif(target == \"json\"){\n\t\treturn new JSONObjectViewer(renderer);\n\t}\n\treturn new ObjectViewer.HTMLObjectViewer(renderer);\n}\n\nRenderingMap.getEditorForObject = RenderingMap.getViewerForObject;\n\nRenderingMap.getAvailableObjectViewers = function(renderer){\n\tvar entries = ['html', 'json'];\n\treturn entries;\n}\n\nRenderingMap.decorateRenderer = function(options, renderer){\n\tvar compiled_options = this.compileOptions(options, renderer);\n\tif(compiled_options && compiled_options.mode){\n\t\trenderer.mode = compiled_options.mode;\n\t}\n\telse {\n\t\tif(renderer.parent && renderer.parent.mode) renderer.mode = renderer.parent.mode;\n\t\telse renderer.mode = \"view\";\n\t}\n\tif(compiled_options && compiled_options.view){\n\t\trenderer.view = compiled_options.view;\n\t}\n\telse {\n\t\tif(renderer.parent && renderer.parent.view) renderer.view = renderer.parent.view;\n\t\telse renderer.view = \"full\";\n\t}\n\tif(compiled_options && compiled_options.facets){\n\t\trenderer.facets = compiled_options.facets;\n\t}\n\telse {\n\t\trenderer.facets = renderer.getDefaultFacets();\n\t}\n\tif(compiled_options && compiled_options.facet && typeof renderer.facets[compiled_options.facet] == \"object\"){\n\t\trenderer.facet = compiled_options.facet;\n\t}\t\n\telse {\n\t\tvar deffacet = renderer.getDefaultFacet();\n\t\tif(typeof renderer.facets[deffacet] == \"object\"){\n\t\t\trenderer.facet = deffacet;\n\t\t}\n\t\telse {\n\t\t\trenderer.facet = key(renderer.facets);\n\t\t}\n\t}\n\tif(compiled_options && compiled_options.hide_disabled_buttons){\n\t\trenderer.hide_disabled_buttons = compiled_options.hide_disabled_buttons;\n\t}\n\telse if(renderer.parent) renderer.hide_disabled_buttons = parent.hide_disabled_buttons;\n\telse renderer.hide_disabled_buttons = true;\n\t\n\tif(compiled_options && typeof compiled_options.features == \"object\"){\n\t\trenderer.features = compiled_options.features;\n\t}\n\telse {\n\t\trenderer.features = renderer.facets[renderer.facet].features;\n\t\t//renderer.features = renderer.getDefaultFeatures(renderer.facet);\n\t}\n\tif(compiled_options && typeof compiled_options.controls == \"object\"){\n\t\trenderer.controls = compiled_options.controls;\n\t}\n\telse {\n\t\trenderer.controls = renderer.facets[renderer.facet].controls;\n\t\t//renderer.controls = renderer.getDefaultControls();\n\t}\n\tif(compiled_options && typeof compiled_options.viewerType != \"undefined\"){\n\t\trenderer.viewerType = compiled_options.viewerType;\n\t\tif(compiled_options.viewerOptions)\n\t\t\trenderer.viewerOptions = compiled_options.viewerOptions;\n\t}\n\tif(compiled_options && typeof compiled_options.header != \"undefined\"){}\n\telse {\n\t\trenderer.header_viewer = new ObjectViewer.HTMLObjectHeaderViewer();\n\t}\n\tif(compiled_options && typeof compiled_options.filter != \"undefined\"){}\n\telse {}\n\tif(compiled_options && typeof compiled_options.sort != \"undefined\"){}\n\telse {}\n\treturn options;\n}\t\n\nRenderingMap.compileOptions = function(options, renderer){\n\tvar compiled_options = {};\n\tvar rules = [];\n\tfor(var key in options){\n\t\tif(key != \"rules\"){\n\t\t\tcompiled_options[key] = options[key];\n\t\t}\n\t}\n\tif(options.rules){\n\t\tfor(var i = 0; i<options.rules.length; i++){\n\t\t\tvar match = (!options.rules[i].pattern || this.patternMatchesRenderer(options.rules[i].pattern, renderer));\n\t\t\tif(match && options.rules[i].output){\n\t\t\t\tfor(var k in options.rules[i].output){\n\t\t\t\t\tcompiled_options[k] = options.rules[i].output[k];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn compiled_options;\n}\n\nFramePattern = function(pattern){\n\tthis.renderer = (pattern.renderer ? pattern.renderer : false);\n\tthis.label = (pattern.value ? pattern.value : false);\n\tthis.frame_type = (pattern.frame_type ? pattern.frame_type : false);\n\tthis.subject = (pattern.subject ? pattern.subject : false);\n\tthis.subjectClass = (pattern.subjectClass ? pattern.subjectClass : false);\n\tthis.range = (pattern.range ? pattern.range : false);\n\tthis.property = (pattern.property ? pattern.property : false);\n\tthis.value = (pattern.value ? pattern.value : false);\n\tthis.parent = (pattern.parent ? new FramePattern(pattern.parent) : false);\n\tthis.children = [];\n\tif(pattern.children){\n\t\tfor(var i = 0 ; i < pattern.children.length ; i++){\n\t\t\tthis.children.push(new FramePattern(pattern.children[i]));\n\t\t}\n\t}\n\tthis.depth = (typeof pattern.depth != \"undefined\" ? pattern.depth : false);\n\tthis.index = (pattern.index ? pattern.index : false);\n\tthis.status = (pattern.status ? pattern.status : false);\n}\n\nFramePattern.prototype.checkRenderer = function(renderer){\n\tvar rtype = this.getRendererType(renderer);\n\tif(!rtype) return false;\n\tif(this.renderer && this.renderer != rtype) return false;\n\tif(this.illegalRuleType(rtype)) return false;\n\tif(this.frame_type && !this.checkFrameType(rtype, renderer)) return false;\n\tif(this.label && !this.checkLabel(rtype, renderer)) return false;\n\tif(this.subject && !this.checkSubject(rtype, renderer)) return false;\n\tif(this.subjectClass && !this.checkSubjectClass(rtype, renderer)) return false;\n\tif(this.property && !this.checkProperty(rtype, renderer)) return false;\n\tif(this.depth !== false && !this.checkDepth(rtype, renderer)) return false;\n\tif(this.range && !this.checkRange(rtype, renderer)) return false;\n\tif(this.value && !this.checkValue(rtype, renderer)) return false;\n\tif(this.parent && !this.checkParent(rtype, renderer)) return false;\n\tif(this.children && this.children.length && !this.checkChildren(rtype, renderer)) return false;\n\tif(this.index && !this.checkIndex(rtype, renderer)) return false;\n\tif(this.status && !this.checkStatus(rtype, renderer)) return false;\n\treturn true;\n} \n\nFramePattern.prototype.illegalRuleType = function(rtype){\n\tif(rtype == 'value' && (this.children.length || this.label)) return true;\n\tif(rtype == 'object' && this.range ) return true;\n\treturn false;\n}\n\n/* subject is an id or an array of ids, \n/* match is positive if the renderer's subject appears in the array or is the id\n */\nFramePattern.prototype.checkSubject = function(subject, renderer){\n\tif(typeof this.subject != \"object\" || !this.subject.length) this.subject = [this.subject];\n\tvar rsubj = renderer.subject();\n\tfor(var i = 0 ; i<this.subject.length; i++){\n\t\tif(this.IDsMatch(subject[i], rsubj)){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\n//at least one child must match all child rules\nFramePattern.prototype.checkChildren = function(rtype, renderer){\n\tfor(var i = 0 ; i<this.children.length; i++){\n\t\tvar found = false;\n\t\tif(rtype == \"object\"){\n\t\t\tfor(var prop in renderer.properties){\n\t\t\t\tif(this.children[i].checkRenderer(renderer.properties[prop])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if(rtype == \"property\"){\n\t\t\tfor(var j = 0; j <= renderer.values.length; j++){\n\t\t\t\tif(this.children[j].checkRenderer(renderer.values[j])) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(!found) return false;\n\t}\n\treturn true;\n}\n\nFramePattern.prototype.checkStatus = function(rtype, renderer){\n\tif(typeof this.status != \"object\" || this.status.length == 0) this.status = [this.status];\n\tfor(var i = 0; i<this.status.length; i++){\n\t\tif(this.status[i] == \"updated\" && !renderer.isUpdated()) return false;\n\t\tif(this.status[i] == \"new\" && !renderer.isNew()) return false;\n\t\tif(this.status[i] == \"unchanged\" && renderer.isUpdated()) return false;\n\t}\n\treturn true;\n}\n\nFramePattern.prototype.checkDepth = function(rtype, renderer){\n\treturn this.numberMatch(this.depth, renderer.depth());\n}\n\nFramePattern.prototype.checkParent = function(rtype, renderer){\n\treturn this.parent.checkRenderer(renderer.parent);\n}\n\nFramePattern.prototype.checkIndex = function(rtype, renderer){\n\tif(rtype == 'value'){\n\t\treturn this.index == renderer.index;\n\t}\n\treturn false;\n}\n\nFramePattern.prototype.checkProperty  = function(rtype, renderer){\n\tif(typeof this.property != \"object\" || !this.property.length) this.property = [this.property];\n\tfor(var i = 0 ; i<this.property.length; i++){\n\t\tif(this.propertyIDsMatch(renderer.property(), this.property[i])){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\n//returns true if any of the values are found\nFramePattern.prototype.checkValue = function(rtype, renderer){\n\tif(typeof this.value != \"object\" || !this.value.length) this.value = [this.value];\n\tfor(var i = 0 ; i<this.value.length; i++){\n\t\tif(rtype == \"value\"){\n\t\t\tif(this.valuesMatch(renderer.value(), this.value[i])){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse if(rtype == \"property\"){\n\t\t\tfor(var j = 0; j<= renderer.values.length;  j++){\n\t\t\t\tif(this.getRendererType(renderer.values[i]) == 'value' &&\n\t\t\t\t\t\tthis.valuesMatch(renderer.values[i].value(), this.value[i])){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if(rtype == \"object\"){\n\t\t\tfor(var prop in renderer.properties){\n\t\t\t\tif(this.checkValue(this.getRendererType(renderer.properties[prop]), renderer.properties[prop])){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nFramePattern.prototype.checkRange  = function(rtype, renderer){\n\tif(typeof this.range != \"object\" || !this.range.length) this.range = [this.range];\n\tfor(var i = 0 ; i<this.range.length; i++){\n\t\tif(this.rangeIDsMatch(renderer.range(), this.range[i])){ \n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nFramePattern.prototype.checkSubjectClass = function(rtype, renderer){\n\tif(typeof this.subjectClass != \"object\" || !this.subjectClass.length) this.subjectClass = [this.subjectClass];\n\tvar rcls = renderer.subjectClass();\n\tfor(var i = 0 ; i<this.subjectClass.length; i++){\n\t\tif(this.classIDsMatch(this.subjectClass[i], rcls)){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nFramePattern.prototype.checkFrameType = function (rtype, renderer){\n\tif(rtype == \"object\") return this.frame_type == \"object\";\n\tif(rtype == \"value\") {\n\t\tif(renderer.frame){\n\t\t\treturn this.frame_type == renderer.frame.ftype();\n\t\t}\n\t\telse {\n\t\t\talert(JSON.stringify(renderer));\n\t\t\talert(\"No frame\");\n\t\t}\n\t}\n\tif(rtype == \"property\") return false;\n}\n\nFramePattern.prototype.checkLabel = function(rtype, renderer){\n\tif(typeof renderder.getLabel != \"function\"){\n\t\tconsole.log(new Error(\"Rule passed to check label with broken renderer object - no getLabel\"));\n\t\treturn false;\n\t}\n\treturn this.stringMatch(this.label, renderer.getLabel());\n}\n\nFramePattern.prototype.IDsMatch = function(ida, idb){\n\treturn FrameHelper.compareIDs(ida, idb);\n}\n\nFramePattern.prototype.classIDsMatch = function(ida, idb){\n\treturn this.IDsMatch(ida, idb);\n}\nFramePattern.prototype.propertyIDsMatch = function(ida, idb){\n\tvar match = this.IDsMatch(ida, idb);\n\treturn match;\n}\nFramePattern.prototype.rangeIDsMatch = function(ida, idb){\n\treturn this.IDsMatch(ida, idb);\n}\nFramePattern.prototype.valuesMatch = function(vala, valb){\n\treturn vala == valb;\n}\nFramePattern.prototype.numberMatch = function(vala, valb){\n\tif(typeof vala == \"string\"){\n\t\ttry {\n\t\t\treturn eval(valb + vala);\n\t\t}\n\t\tcatch(e){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn vala === valb;\n}\n\nFramePattern.prototype.stringMatch = function(vala, valb){\n\tvar pat = new RegExp(vala);\n\treturn pat.test(valb);\n}\n\nFramePattern.prototype.getRendererType = function(renderer){\n\tif(renderer.constructor.name == \"ValueRenderer\") return \"value\";\n\tif(renderer.constructor.name == \"PropertyRenderer\") return \"property\";\n\tif(renderer.constructor.name == \"ObjectRenderer\") return \"object\";\n\tconsole.log(new Error(\"frame configuration passed non-renderer type: \" + renderer.constructor.name));\n\treturn false;\n}\n\nmodule.exports=RenderingMap\n","/*\n * Utility class which runs a query against the schema and presents the returned classes as a drop-down / class filter list\n */\nconst FrameHelper = require('../FrameHelper');\nconst WOQLQuery = require('../query/WOQLQuery');\n\nTerminusClassChooser = function(ui, filter, chosen){\n\tthis.ui = ui;\n\tthis.choice = (chosen ? chosen : false);\n\tthis.filter = filter;\n\tthis.show_single = true;\n}\n\nTerminusClassChooser.prototype.setRoot = function(root){\n\tthis.root = root;\n}\n\nTerminusClassChooser.prototype.setFilter = function(filter){\n\tthis.filter = filter;\n}\n\nTerminusClassChooser.prototype.change = function(cls){\n\talert(\"Need to specify class chooser function (\" + cls + \")\");\n}\n\nTerminusClassChooser.prototype.getAsDOM = function(style){\n\tvar ccdom = document.createElement(\"span\");\n\tccdom.setAttribute(\"class\", \"terminus-class-chooser\");\n\tvar ccsel = document.createElement(\"select\");\n\tccsel.setAttribute(\"class\", style + \" terminus-type-select\");\n\t// ccsel.setAttribute(\"class\", \"terminus-class-select terminus-type-select terminus-query-select\");\n\tvar self = this;\n\tccsel.addEventListener(\"change\", function(){\n\t\tif(this.value != this.choice){\n\t\t\tthis.choice = this.value;\n\t\t\tself.change(this.value);\n\t\t}\n\t});\n\tccdom.appendChild(ccsel);\n\tvar wq = new WOQLQuery(this.ui.client);\n\tvar woql = wq.getClassListMetaDataQuery(this.filter);\n\tvar self = this;\n\twq.execute(woql)\n\t.then(function(response){\n\t\tvar opts = self.getResultsAsOptions(response);\n\t\tif(opts){\n\t\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\t\tccsel.appendChild(opts[i]);\n\t\t\t}\n\t\t\tself.options = opts;\n\t\t}\n\t\telse {\n\t\t\tccdom.removeChild(ccsel);\n\t\t}\n\t});\n\treturn ccdom;\n}\n\nTerminusClassChooser.prototype.getResultsAsOptions = function(clist){\n\tvar choices = [];\n\tif(clist.bindings){\n\t\tif(this.show_single == false && clist.bindings.length < 2) return false;\n\t\tif(this.empty_choice){\n\t\t\tvar opt1 = document.createElement(\"option\");\n\t\t\topt1.setAttribute(\"class\", \"terminus-class-choice terminus-empty-choice\");\n\t\t\topt1.value = \"\";\n\t\t\topt1.appendChild(document.createTextNode(this.empty_choice));\n\t\t\tchoices.push(opt1);\n\t\t}\n\t\tvar added = [];\n\t\tfor(var i = 0; i<clist.bindings.length; i++){\n\t\t\tif(clist.bindings[i].Class && added.indexOf(clist.bindings[i].Class) == -1){\n\t\t\t\tadded.push(clist.bindings[i].Class);\n\t\t\t\tvar opt = document.createElement(\"option\");\n\t\t\t\topt.setAttribute(\"class\", \"terminus-class-choice\");\n\t\t\t\topt.value = clist.bindings[i].Class;\n\t\t\t\tif(opt.value == this.choice){\n\t\t\t\t\topt.selected = true;\n\t\t\t\t}\n\t\t\t\tvar lab = clist.bindings[i].Label;\n\t\t\t\tif(!lab || lab == \"unknown\"){\n\t\t\t\t\tlab = FrameHelper.labelFromURL(clist.bindings[i].Class);\n\t\t\t\t}\n\t\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\n\t\t\t\topt.appendChild(document.createTextNode(lab));\n\t\t\t\tchoices.push(opt);\n\t\t\t}\n\t\t}\n\t}\n\treturn choices;\n}\n\nmodule.exports=TerminusClassChooser\n","/*\n * User Interface elements dealing with database level functions - view, delete, create, db\n * view document etc\n */\nconst FrameHelper = require('../FrameHelper');\nconst WOQLResultsViewer = require('../query/WOQLResultsViewer');\nconst TerminusClassChooser = require('./TerminusClassChooser');\nconst TerminusDocumentChooser = require('./TerminusDocumentChooser');\nconst WOQLQuery=require('../query/WOQLQuery')\nconst UTILS=require('../Utils')\n\nfunction TerminusDBController(ui){\n\t this.ui = ui;\n}\n\n/*\n * Controller provides access to the server level functions (create/delete db) and db-level functions (schema, query, document)\n */\nTerminusDBController.prototype.getAsDOM = function(){\n\tvar self = this;\n\tvar dbc = document.createElement(\"div\");\n\tdbc.setAttribute(\"class\", \"terminus-db-controller\");\n\tif(this.ui && this.ui.db()){\n\t\tvar scd = document.createElement(\"div\");\n\t\tscd.setAttribute(\"class\", \"terminus-field terminus-db-connection\");\n\t\tvar lab = document.createElement(\"span\");\n\t\tlab.setAttribute(\"class\", \"terminus-label terminus-db-label terminus-control-panel-label\");\n\t\tlab.appendChild(document.createTextNode(\"DB \"));\n\t\tvar val = document.createElement(\"span\");\n\t\tval.setAttribute(\"class\", \"terminus-value terminus-db-value terminus-control-panel-value\");\n\t\tvar dbrec = this.ui.client.connection.getDBRecord();\n\t\tvar nm = (dbrec && dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.ui.db());\n\t\tval.appendChild(document.createTextNode(nm));\n\t\tscd.appendChild(lab);\n\t\tscd.appendChild(val);\n\t\t//dbc.appendChild(scd);\n\t\tvar nav = document.createElement('div');\n\t\tnav.setAttribute('class', 'span3');\n\t\tdbc.appendChild(nav);\n\t\tvar ul = document.createElement('ul');\n\t\tul.setAttribute('class','terminus-ul' );\n\t\tnav.appendChild(ul);\n\t\tif(this.ui.showControl(\"db\")){\n\t\t\tvar item = this.getControlHTML(\"Database Home\", \"fa-home\");\n\t\t\titem.classList.add(\"terminus-selected\");\n\t\t    item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.removeSelectedNavClass(\"terminus-selected\");\n                this.classList.add(\"terminus-selected\");\n\t\t\t\tself.ui.showDBMainPage();\n\t\t\t });\n\t        ul.appendChild(item);\n\t    }\n\t\tif(this.ui.showControl(\"delete_database\")){\n\t\t\tvar item = this.getControlHTML(\"Delete Database\", \"fa-trash-alt\");\n\t\t    item.addEventListener(\"click\", function(){ self.ui.deleteDatabase(); });\n\t        ul.appendChild(item);\n\t\t}\n\t\tif(this.ui.showControl(\"woql_select\")){\n\t\t\tvar item = this.getControlHTML(\"Query\", \"fa-search\");\n\t\t    item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.removeSelectedNavClass(\"terminus-selected\");\n                this.classList.add(\"terminus-selected\");\n\t\t\t\tself.ui.showQueryPage();\n\t\t\t});\n\t        ul.appendChild(item);\n\t\t}\n\t\tif(this.ui.showControl(\"woql_update\")){\n\t\t\tvar item = this.getControlHTML(\"Mapping\", \"fa-file-import\");\n\t        item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.removeSelectedNavClass(\"terminus-selected\");\n                this.classList.add(\"terminus-selected\");\n\t\t\t\tself.ui.showMappingPage();\n\t\t\t})\n\t        ul.appendChild(item);\n\t\t}\n\t\tif(this.ui.showControl(\"get_schema\")){\n\t\t\tvar item = this.getControlHTML(\"Schema\", \"fa-cog\");\n\t        item.addEventListener(\"click\", function(){\n\t\t\t\tUTILS.removeSelectedNavClass(\"terminus-selected\");\n                this.classList.add(\"terminus-selected\");\n\t\t\t\tself.ui.showSchemaPage();\n\t\t\t})\n\t        ul.appendChild(item);\n\t\t}\n\t\t/*var li = document.createElement('li');\n\t\tli.setAttribute(\"class\", \"terminus-control-button terminus-change-server-button terminus-doc-li active terminus-pointer\");\n\t\tul.appendChild(li);*/\n\t\tvar a = document.createElement('a');\n\t\ta.setAttribute('class', 'terminus-doc terminus-list-group-a terminus-list-group-a-action terminus-nav-width');\n\t\tul.appendChild(a);\n\t\tvar icon = document.createElement('i');\n\t\ticon.setAttribute('class', 'terminus-menu-icon fa fa-file');\n\t\ta.appendChild(icon);\n\t\tvar txt = document.createTextNode('Documents');\n\t\ta.appendChild(txt);\n\t\t//li.appendChild(a);\n\t\tvar icon = document.createElement('i');\n\t\tif(this.ui.showControl(\"get_document\")){\n\t\t\ta.appendChild(this.getDocumentChooserDOM());\n\t\t}\n\t\tif(this.ui.showControl(\"create_document\")){\n\t\t\ta.appendChild(this.getDocumentCreatorDOM());\n\t\t}\n\t}\n\treturn dbc;\n}\n\nTerminusDBController.prototype.getControlHTML = function(text, ic, css){\n    var self = this;\n    var a = document.createElement('a');\n\ta.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n    var icon = document.createElement('i');\n    icon.setAttribute('class', 'terminus-menu-icon fa ' + ic);\n    a.appendChild(icon);\n    var txt = document.createTextNode(text);\n    a.appendChild(txt);\n    return a;\n}\n\nTerminusDBController.prototype.getDocumentChooserDOM = function(){\n\tvar self = this;\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-document-chooser terminus-form-horizontal terminus-control-group terminus-choose-by-id\");\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"terminus-document-chooser-label terminus-control-label terminus-control-label-padding\");\n\t//lab.appendChild(document.createTextNode(\"ID \"));\n\tvar dcip = document.createElement(\"input\");\n\tdcip.setAttribute(\"class\", \"terminus-form-value terminus-document-chooser terminus-doc-input-text\");\n\tdcip.setAttribute(\"placeholder\", \"Enter Document ID\");\n\tvar nbut = document.createElement(\"button\");\n\tnbut.setAttribute('class', \"terminus-control-button terminus-document-button terminus-doc-btn\")\n\tnbut.appendChild(document.createTextNode(\"View Document\"));\n\tnbut.addEventListener(\"click\", function(){\n\t\tif(dcip.value) self.ui.showDocument(dcip.value);\n\t})\n\tif(this.ui.client.connectionConfig.platformEndpoint() && this.ui.pluginAvailable(\"select2\")){\n\t\tvar mcls = FrameHelper.unshorten(\"dcog:Document\");\n\t\tvar d2ch = new TerminusDocumentChooser(this.ui, mcls);\n\t\td2ch.change = function(val){\n\t\t\talert(\"changed to \" + val);\n\t\t\tself.ui.showDocument(val);\n\t\t}\n\t\td2ch.view = \"label\";\n\t\tvar sdom = d2ch.getAsDOM('terminus-class-select');\n\t\t/*\n\t\tvar showDoc = function(durl){\n\t\t\tself.ui.showDocument(durl);\n\t\t}\n\t\tvar callback = showDoc;\n\t\tvar searchurl = self.ui.client.dbURL() + \"/search\";\n\t\tvar sdom = getS2EntityChooser(false, searchurl, this.ui.client, mcls, callback);*/\n\t\tjQuery(dcip).hide();\n\t\tjQuery(nbut).hide();\n\t\tvar nlab = document.createElement(\"a\");\n\t\tnlab.setAttribute(\"href\", \"#\");\n\t\tnlab.setAttribute(\"class\", \"terminus-document-which-chooser\");\n\t\tnlab.appendChild(document.createTextNode(\"Choose by ID\"));\n\t\tvar show = \"label\";\n\t\tjQuery(nlab).click(function(){\n\t\t\tif(show == \"label\"){\n\t\t\t\tshow = \"id\";\n\t\t\t\tjQuery(dcip).show();\n\t\t\t\tjQuery(nbut).show();\n\t\t\t\tjQuery(sdom).hide();\n\t\t\t\tjQuery(nlab).text(\"Choose by Label\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tshow = \"label\";\n\t\t\t\tjQuery(dcip).hide();\n\t\t\t\tjQuery(nbut).hide();\n\t\t\t\tjQuery(sdom).show();\n\t\t\t\tjQuery(nlab).text(\"Choose by ID\");\n\t\t\t}\n\t\t})\n\t\tscd.appendChild(sdom);\n\t\tscd.prepend(nlab);\n\t}\n\tvar nbuts = document.createElement(\"div\");\n\tnbuts.setAttribute(\"class\", \"terminus-control-buttons terminus-document-chooser-buttons\");\n\tnbuts.appendChild(nbut);\n\tscd.appendChild(lab);\n\tscd.appendChild(dcip);\n\tscd.appendChild(nbuts);\n\treturn scd;\n};\n\nTerminusDBController.prototype.getDocumentCreatorDOM = function(){\n\tvar self = this;\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-document-creator terminus-form-horizontal terminus-control-group terminus-choose-by-id\");\n\tvar dcip = document.createElement(\"input\");\n\tdcip.setAttribute(\"class\", \"terminus-form-value terminus-document-creator terminus-doc-input-text\");\n\tdcip.setAttribute(\"placeholder\", \"Enter Document Type\");\n\tvar nbut = document.createElement(\"button\");\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"document-creator-label terminus-control-label terminus-control-label-padding\");\n\t//lab.appendChild(document.createTextNode(\"Type \"));\n\tnbut.setAttribute('class', \"terminus-control-button create-document-button terminus-doc-btn\")\n\tnbut.appendChild(document.createTextNode(\"Create Document\"));\n\tnbut.addEventListener(\"click\", function(){\n\t\tif(dcip.value) self.ui.showCreateDocument(dcip.value);\n\t})\n\tvar nbuts = document.createElement(\"div\");\n\tnbuts.setAttribute(\"class\", \"terminus-control-buttons terminus-document-creator-buttons\");\n\t//nbuts.appendChild(nbut);\n\t//scd.appendChild(lab);\n\t//scd.appendChild(dcip);\n\t//scd.appendChild(nbuts);\n\tvar wq = new WOQLQuery(this.ui.client, {});\n\tvar filter = wq.getSubclassQueryPattern(\"Class\", \"dcog/'Document'\") + \", not(\" + wq.getAbstractQueryPattern(\"Class\") + \")\";\n\t//var filter = \"not(\" + wq.getAbstractQueryPattern(\"Class\") + \")\";\n\n\tvar termcc = new TerminusClassChooser(this.ui, filter);\n\ttermcc.empty_choice = \"Create Document of Type\";\n\ttermcc.change = function(new_class){\n\t\tif(new_class){\n\t\t\tself.ui.showCreateDocument(new_class);\n\t\t\ttermcc.choice = false;\n\t\t}\n\t}\n\tvar tcdom = termcc.getAsDOM('terminus-class-select');\n\tvar nlab = document.createElement(\"a\");\n\tnlab.setAttribute(\"href\", \"#\");\n\tnlab.setAttribute(\"class\", \"document-which-chooser document-chooser-a\");\n\tnlab.appendChild(document.createTextNode(\"Text Input\"));\n\tvar nlabs = document.createElement(\"div\");\n\tnlabs.appendChild(nlab);\n\tscd.appendChild(nlabs);\n\tvar ccDOM = document.createElement(\"span\");\n\tccDOM.setAttribute(\"class\", \"create-document-list\");\n\tccDOM.appendChild(tcdom);\n\tscd.appendChild(ccDOM);\n\tvar which = \"select\";\n\tnlab.addEventListener(\"click\", function(){\n\t\tFrameHelper.removeChildren(scd);\n\t\tscd.appendChild(nlabs);\n\t\tif(which == \"select\"){\n\t\t\tFrameHelper.removeChildren(nlab);\n\t\t\tnlab.appendChild(document.createTextNode(\"Dropdown List\"));\n\t\t\tscd.appendChild(lab);\n\t\t\tscd.appendChild(dcip);\n\t\t\tscd.appendChild(nbut);\n\t\t\twhich = \"text\";\n\t\t}\n\t\telse {\n\t\t\tscd.appendChild(ccDOM);\n\t\t\tFrameHelper.removeChildren(nlab);\n\t\t\tnlab.appendChild(document.createTextNode(\"Text Input\"));\n\t\t\twhich = \"select\";\n\t\t}\n\t});\n\treturn scd;\n};\n\n\nfunction TerminusDBViewer(ui){\n\tthis.ui = ui;\n\tthis.wquery = new WOQLQuery(ui.client, this.options);\n}\n\nTerminusDBViewer.prototype.getAsDOM = function(selected){\n\tvar pd = document.createElement(\"span\");\n\tpd.setAttribute(\"class\", \"terminus-db-home-page\");\n\tvar sth = document.createElement('div');\n\tvar banner = document.createElement('div');\n\tpd.appendChild(banner);\n\tbanner.setAttribute('class', 'terminus-banner');\n\tvar dhp = document.createElement(\"span\");\n\tdhp.setAttribute('class', 'terminus-home-heading');\n\tdhp.appendChild(document.createTextNode(\"DB Home Page - \"));\n\tsth.appendChild(dhp);\n\tvar scd = document.createElement(\"span\");\n\tscd.setAttribute(\"class\", \"terminus-db-details\");\n\tvar scs = document.createElement(\"span\");\n\tscs.setAttribute(\"class\", \"terminus-db-details-value \");\n\tvar dbrec = this.ui.getDBRecord();\n\tif(dbrec){\n\t\tvar nm = (dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.db);\n\t\tscs.appendChild(document.createTextNode(nm));\n\t\tscs.setAttribute('class', 'terminus-home-heading');\n\t}\n\tscd.appendChild(scs);\n\tsth.appendChild(scd);\n\tbanner.appendChild(sth);\n\t//pd.appendChild(sth);\n\tpd.appendChild(UTILS.getHeaderDom('Summary'));\n\tthis.getDBSummary(pd);\n\tpd.appendChild(pd.appendChild(UTILS.getHeaderDom('List of Documents')));\n\tthis.getClassesDOM(pd);\n\treturn pd;\n}\n\nTerminusDBViewer.prototype.getDbInfoBox = function(r, module){\n\tvar sp = document.createElement('span');\n    sp.setAttribute('class', 'terminus-db-info-box');\n\tvar info = document.createElement('div');\n\tinfo.appendChild(document.createTextNode(module.charAt(0).toUpperCase() + module.slice(1)));\n\tinfo.setAttribute('class', 'terminus-db-info');\n\tsp.appendChild(info);\n\n    var i = document.createElement('i');\n\tswitch(module){\n\t\tcase 'size':\n\t\t\ti.setAttribute('class', 'terminus-icon fa fa-balance-scale');\n\t\t    var txt = document.createTextNode('2 Gb');\n\t\tbreak;\n\t\tcase 'created':\n\t\t\ti.setAttribute('class', 'terminus-icon fa fa-calendar');\n\t\t    var txt = document.createTextNode('16 July 2015');\n\t\tbreak;\n\t\tcase 'modified':\n\t\t\ti.setAttribute('class', 'terminus-icon fa fa-clock');\n\t\t    var txt = document.createTextNode('22 Dec 2019');\n\t\tbreak;\n\t}\n    sp.appendChild(i);\n\tif(txt) sp.appendChild(txt);\n    r.appendChild(sp);\n}\n\nTerminusDBViewer.prototype.getDBSummary = function(d){\n\t// delete database\n    var del = document.createElement('button');\n    del.setAttribute('class', 'terminus-del-btn');\n    del.setAttribute('type', 'button');\n    del.innerHTML = 'Delete';\n\tvar dbrec = this.ui.getDBRecord();\n\tif(dbrec)\n\t\tvar nm = (dbrec[\"rdfs:label\"] && dbrec[\"rdfs:label\"][\"@value\"] ? dbrec[\"rdfs:label\"][\"@value\"] : this.db);\n    var self = this;\n    del.addEventListener(\"click\", function(){\n      self.ui.deleteDatabase(nm);\n    });\n    d.appendChild(del);\n\n    var r = document.createElement('span');\n    r.setAttribute('class', 'terminus-db-info-box-display');\n    d.appendChild(r);\n\n    /* getDbInfoBox() calls can change according to further requirments */\n    this.getDbInfoBox(r, 'size');\n    this.getDbInfoBox(r, 'created');\n    this.getDbInfoBox(r, 'modified');\n}\n\nTerminusDBViewer.prototype.getClassesDOM = function(d){\n\tvar q = this.wquery.getClassesQuery();\n\tvar self = this;\n\tthis.wquery.execute(q)\n\t.then(function(result){\n\t\tif(true || !self.result){\n\t\t\tself.result = new WOQLResultsViewer(this.ui, result, {}, {});\n\t\t}\n\t\telse {\n\t\t\t//self.result.newResult(result);\n\t\t}\n\t\tif(self.result){\n\t\t\tvar nd = self.result.getAsDOM();\n\t\t\tif(nd){\n\t\t\t\tnd.setAttribute('class', 'terminus-margin-box');\n\t\t\t\td.appendChild(nd);\n\t        }\n\t\t\telse d.appendChild(document.createTextNode(\"No results returned\"));\n\t\t}\n\t})\n\t.catch(function(err){\n\t\tconsole.error(err);\n\t\tself.ui.showError(err);\n\t});\n\treturn d;\n}\n\n\nfunction TerminusDBCreator(ui){\n\tthis.ui = ui;\n}\n\nTerminusDBCreator.prototype.getAsDOM = function(selected){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-db-creator\");\n\tvar sct = document.createElement(\"h3\");\n\tsct.setAttribute(\"class\", \"terminus-db-creator-title terminus-module-head\");\n\tsct.appendChild(document.createTextNode(\"Create New Database\"));\n\tscd.appendChild(sct);\n\tvar mfd = document.createElement('div');\n\tmfd.setAttribute('class', 'terminus-form-border');\n\tscd.appendChild(mfd);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-id-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"ID\"));\n\tsci.appendChild(slab);\n\tvar idip = document.createElement(\"input\");\n\tidip.setAttribute(\"type\", \"text\");\n\tidip.setAttribute(\"class\", \"terminus-form-value terminus-input-text\");\n\tidip.setAttribute(\"placeholder\", \"No spaces or special characters allowed in IDs\");\n\tsci.appendChild(idip);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-title-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Title\"));\n\tvar titip = document.createElement(\"input\");\n\ttitip.setAttribute(\"type\", \"text\");\n\ttitip.setAttribute(\"placeholder\", \"A brief title for the Database\");\n\ttitip.setAttribute(\"class\", \"terminus-form-value terminus-input-text\");\n\tsci.appendChild(slab);\n\tsci.appendChild(titip);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-title-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Description\"));\n\tsci.appendChild(slab);\n\tvar descip = document.createElement(\"textarea\");\n\tdescip.setAttribute(\"class\", \"terminus-textarea terminus-db-description terminus-textarea \");\n\tdescip.setAttribute(\"placeholder\", \"A short text describing the database and its purpose\");\n\tsci.appendChild(descip);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-schema-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Import Schema\"));\n\tsci.appendChild(slab);\n\tvar schem = document.createElement(\"input\");\n\tschem.setAttribute(\"placeholder\", \"Terminus DB URL\");\n\tschem.setAttribute(\"type\", \"text\");\n\tschem.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-input-text\");\n\n\tsci.appendChild(schem);\n\tmfd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-form-field-spacing terminus-form-horizontal terminus-control-group\");\n\tvar slab = document.createElement(\"span\");\n\tslab.setAttribute(\"class\", \"terminus-data-label terminus-form-label terminus-control-label\");\n\tslab.appendChild(document.createTextNode(\"Import Data\"));\n\tsci.appendChild(slab);\n\tvar datip = document.createElement(\"input\");\n\tdatip.setAttribute(\"type\", \"text\");\n\tdatip.setAttribute(\"placeholder\", \"Terminus DB URL\");\n\tdatip.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-input-text\");\n\tsci.appendChild(datip);\n\tmfd.appendChild(sci);\n\tvar butfield = document.createElement(\"div\");\n\tbutfield.setAttribute(\"class\", \"terminus-control-buttons\");\n\tvar cancbut = document.createElement(\"button\");\n\tcancbut.setAttribute(\"class\", \"terminus-control-button terminus-cancel-db-button terminus-btn\");\n\tcancbut.appendChild(document.createTextNode(\"Cancel\"));\n\tvar loadbut = document.createElement(\"button\");\n\tloadbut.setAttribute(\"class\", \"terminus-control-button terminus-create-db-button terminus-btn\");\n\tloadbut.appendChild(document.createTextNode(\"Create\"));\n\tvar self = this;\n\tvar gatherips = function(){\n\t\tvar input = {};\n\t\tinput.id = idip.value;\n\t\tinput.title = titip.value;\n\t\tinput.description = descip.value;\n\t\tinput.schema = schem.value;\n\t\tinput.data = datip.value;\n\t\treturn input;\n\t}\n\tvar self = this;\n\tloadbut.addEventListener(\"click\", function(){\n\t\tvar input = gatherips();\n\t\tself.ui.createDatabase(input);\n\t})\n\tcancbut.addEventListener(\"click\", function(){\n\t\tself.ui.showServerMainPage();\n\t})\n\tbutfield.appendChild(cancbut);\n\tbutfield.appendChild(loadbut);\n\tmfd.appendChild(butfield);\n\treturn scd;\n}\n\nmodule.exports={TerminusDBViewer:TerminusDBViewer,\n\t            TerminusDBController:TerminusDBController,\n\t            TerminusDBCreator:TerminusDBCreator}\n","const FrameHelper = require('../FrameHelper');\nconst ObjectFrame = require('../ObjectFrame');\nconst WOQLQuery = require('../query/WOQLQuery');\n//const FrameConfig = require('./FrameConfig');\nconst ObjectRenderer = require('./ObjectRenderer');\n\nfunction TerminusDocumentViewer(ui, action, options){\n\tthis.ui = ui;\n\tthis.server = this.ui.server();\n\tthis.db = this.ui.db();\n\tthis.init();\n\tthis.mode = (options && options.mode ? options.mode : \"view\");\n\tthis.editor = (options && options.editor ? options.editor : false);\n\tthis.load_schema = (options && options.load_schema ? options.load_schema : true);\n\tthis.config_options = this.getBuiltInViewerOptions();\n\tthis.options = (options ? options : this.config_options[action]);\n\tthis.action = action;\n\tthis.document = false;\n}\n\nTerminusDocumentViewer.prototype.init = function(){\n\tvar wq = new WOQLQuery(this.ui.client, this.options);\n\tvar woql = wq.getClassMetaDataQuery();\n\tvar self = this;\n\tself.classmeta = {};\n\tself.instancemeta = {};\n\twq.execute(woql).then(function(wresult){\n\t\tif(wresult && wresult.hasBindings()){\n\t\t\tfor(var i = 0; i<wresult.bindings.length; i++){\n\t\t\t\tvar cls = wresult.bindings[i].Class;\n\t\t\t\tif(cls && typeof self.classmeta[cls] == \"undefined\"){\n\t\t\t\t\tself.classmeta[cls] = wresult.bindings[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tself.refreshPage();\n\t\t}\n\t})\n\t.catch(function(e){\n\t\tconsole.log(e);\n\t});\n}\n\nTerminusDocumentViewer.prototype.getInstanceMeta = function(elid){\n\tvar self = this;\n\t//if(typeof self.instancemeta[elid] != \"undefined\") return self.instancemeta[elid] ;\n\tvar wq = new WOQLQuery(this.ui.client, this.options);\n\tvar woql = wq.getInstanceMeta(elid);\t\n\treturn wq.execute(woql).then(function(wresult){\n\t\tif(wresult && wresult.hasBindings()){\n\t\t\tvar res = wresult.bindings[0];\n\t\t\treturn res;\n\t\t}\n\t\treturn false;\n\t})\n\t.catch(function(e){\n\t\tconsole.log(e);\n\t});\n}\n\nTerminusDocumentViewer.prototype.getClassMeta = function(cls){\n\tif(typeof this.classmeta[cls]){\n\t\treturn this.classmeta[cls];\n\t}\n\treturn false;\n}\n\nTerminusDocumentViewer.prototype.loadCreateDocument = function(url){\n\tif(url){\n\t\tthis.ui.showBusy(\"Fetching frame for document class \" + url);\n\t\tvar self = this;\n\t\tthis.mode = \"edit\";\n\t\tthis.page_config = \"create\";\n\t\tif(url.indexOf(\"/\") == -1 && url.indexOf(\":\") == -1) {\n\t\t\turl = \"schema:\" + url;\n\t\t}\n\t\treturn this.loadDocumentSchema(url)\n\t\t.then(function(response){\n\t\t\tself.ui.clearBusy();\n\t\t\tself.setLabel();\n\t\t})\n\t\t.catch(function(error) {\n\t\t\tconsole.error(error);\n\t\t\tself.ui.clearBusy();\n\t\t\tself.ui.showError(error);\n\t\t});\n\t}\n}\n\nTerminusDocumentViewer.prototype.loadDocument = function(url, cls){\n\tif(!url) return false;\n\tvar self = this;\n\tif(url.substring(0,4) == \"doc:\"){\n\t\turl = url.substring(4);\n\t}\n\tthis.page_config = \"view\";\n\turl = url.replace(\"/candidate\", \"/platform/document\");\n\tthis.ui.showBusy(\"Loading Document from \" + url);\n\treturn this.ui.client.getDocument(url, {\"terminus:encoding\": \"terminus:frame\"})\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t\tself.loadDataFrames(response);\n\t\tself.setLabel();\n\t\tself.refreshPage();\n\t\tif(self.load_schema){\n\t\t\treturn self.loadDocumentSchema(self.document.cls).then(function(){ self.refreshPage()}).catch(function(e){console.error(e)});\t\t\t\n\t\t}\n\t\treturn response;\n\t})\n\t.catch(function(error) {\n\t\tconsole.error(error);\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\n}\n\nTerminusDocumentViewer.prototype.loadDocumentSchema = function(cls){\n\tvar self = this;\n\treturn this.ui.client.getClassFrame(false, cls)\n\t.then(function(response){\n\t\tself.loadSchemaFrames(response, cls);\n\t\tself.refreshPage();\t\t\n\t});\n}\n\nTerminusDocumentViewer.prototype.deleteDocument = function(URL){\n\tthis.document = false;\n\tvar self = this;\n\tthis.ui.showBusy(\"Deleting Document \" + URL);\n\treturn this.ui.client.deleteDocument(URL)\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t}).catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\t\n}\n\nTerminusDocumentViewer.prototype.createDocument = function(id){\n\tvar self = this;\n\tvar extr = this.renderer.extract();\n\tvar opts = { \"terminus:encoding\": \"jsonld\" };\n\tthis.ui.showBusy(\"Creating document\");\n\treturn this.ui.client.createDocument(id, extr, opts)\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showDocument(id);\n\t}).catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\t\n}\n\nTerminusDocumentViewer.prototype.updateDocument = function(){\n\tvar durl = this.document.subjid;\n\tvar extr = this.renderer.extract();\n\tvar self = this;\n\tvar opts = { \"terminus:encoding\": \"jsonld\" };\n\tthis.ui.showBusy(\"Updating document \" + durl);\n\treturn this.ui.client.updateDocument(durl, extr, opts)\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showDocument(durl);\n\t}).catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\t\n}\n\nTerminusDocumentViewer.prototype.loadDataFrames = function(dataframes, cls){\n\tif(!cls){\n\t\tif(this.document) cls = this.document.cls;\n\t\telse {\n\t\t\tif(dataframes && dataframes.length && dataframes[0] && dataframes[0].domain){\n\t\t\t\tcls = dataframes[0].domain;\n\t\t\t}\n\t\t}\t\t\n\t}\n\tif(cls){\n\t\tif(!this.document){\n\t\t\tthis.document = new ObjectFrame(cls, dataframes);\n\t\t}\n\t\telse {\n\t\t\tthis.document.loadDataFrames(dataframes);\n\t\t}\n\t}\n\telse {\n\t\talert(\"Missing Class\" + \" \" + \"Failed to add dataframes due to missing class\");\n\t}\n}\n\n\nTerminusDocumentViewer.prototype.loadSchemaFrames = function(classframes, cls){\n\tif(!cls){\n\t\tif(classframes && classframes.length && classframes[0] && classframes[0].domain){\n\t\t\tcls = classframes[0].domain;\n\t\t}\n\t}\n\tif(cls){\n\t\tif(!this.document){\n\t\t\tthis.document = new ObjectFrame(cls);\n\t\t}\n\t\tif(classframes){\n\t\t\tthis.document.loadClassFrames(classframes);\n\t\t\tif(!this.document.subjid){\n\t\t\t\tthis.document.newDoc = true;\n\t\t\t\tthis.document.fillFromSchema(\"_:\");\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tthis.error(\"Missing Class\", \"Failed to add class frames due to missing class\");\n\t}\n}\n\nTerminusDocumentViewer.prototype.render = function(){\n\tif(!this.renderer && this.document){\n\t\tif(this.page_config){\n\t\t\tthis.options = this.getOptionsFromPageConfig(this.page_config);\t\n\t\t}\n\t\tthis.renderer = new ObjectRenderer(this.document, false, this.options);\n\t\tthis.renderer.mode = this.mode;\n\t\tthis.renderer.controller = this;\n\t}\n\tif(this.renderer){\n\t\treturn this.renderer.render();\n\t}\n}\n\nTerminusDocumentViewer.prototype.getBuiltInViewerOptions = function(){\n\treturn FrameConfig;\n}\n\nTerminusDocumentViewer.prototype.getOptionsFromPageConfig = function(pageconf){\n\tif(typeof this.config_options[pageconf] == \"object\") {\n\t\treturn this.config_options[pageconf];\n\t}\n\treturn this.options;\n}\n\n\nTerminusDocumentViewer.prototype.getClient = function(){\n\treturn this.ui.client;\n}\n\nTerminusDocumentViewer.prototype.extract = function(options){\n\treturn this.renderer.extract();\n}\n\nTerminusDocumentViewer.prototype.getLabel = function(){\n\tvar lab = (this.cls ? this.cls : false);\n\tif(!lab) lab = (this.docid ? this.docid : \"Void\");\n\treturn lab;\n}\n\nTerminusDocumentViewer.prototype.setLabel = function(){\n\tif(this.document && this.labdom){\n\t\tFrameHelper.removeChildren(this.labdom);\n\t\tvar dfs = this.document.getDataFrames(FrameHelper.getStdURL(\"rdfs\", \"label\"));\n\t\tfor(var i = 0; i< dfs.length; i++){\n\t\t\tvar lab = dfs[i].get();\n\t\t\tif(lab) {\n\t\t\t\tthis.labdom.appendChild(document.createTextNode(lab));\n\t\t\t} \n\t\t}\n\t}\n}\n\nTerminusDocumentViewer.prototype.refreshPage = function(){\n\tif(this.pagedom){\n\t\tFrameHelper.removeChildren(this.pagedom); \n\t\tvar rends = this.render();\n\t\tif(rends){\n\t\t\tthis.pagedom.appendChild(rends);\n\t\t}\n\t}\n}\n\nTerminusDocumentViewer.prototype.getAsDOM = function(){\n\tvar holder = document.createElement(\"div\");\n\tholder.setAttribute(\"class\", \"terminus-document-holder\");\n\tthis.controldom = document.createElement(\"div\");\n\tthis.controldom.setAttribute(\"class\", \"terminus-document-controller\");\n\tthis.controldom.appendChild(this.getDocumentPageControls());\n\tthis.pagedom = document.createElement(\"div\");\n\tthis.pagedom.setAttribute(\"class\", \"terminus-document-page\");\n\tvar rends = this.render();\n\tif(rends){\n\t\tthis.pagedom.appendChild(rends);\n\t}\n\tholder.appendChild(this.controldom);\n\tholder.appendChild(this.pagedom);\n\treturn holder;\n}\n\nTerminusDocumentViewer.prototype.getDocumentPageControls = function(){\n\tvar dpc = document.createElement(\"select\");\n\tdpc.setAttribute(\"class\", \"terminus-form-select terminus-document-config\");\n\tfor(var i in this.config_options){\n\t\tvar opt = document.createElement(\"option\");\n\t\topt.value = i;\n\t\tif(this.page_config == i){\n\t\t\topt.selected = true;\n\t\t}\n\t\topt.appendChild(document.createTextNode(this.config_options[i].label));\n\t\tdpc.appendChild(opt);\n\t}\n\tvar self = this;\n\tdpc.addEventListener(\"change\", function(){\n\t\tself.page_config = this.value;\n\t\tself.renderer = false;\n\t\tself.refreshPage();\n\t})\n\treturn dpc;\n}\n\nmodule.exports=TerminusDocumentViewer\n\n","const FrameHelper = require('../FrameHelper');\nconst WOQLQuery = require('../query/WOQLQuery');\nconst TerminusClassChooser = require('./TerminusClassChooser');\n/*\n * Utility class which allows the user to choose a document by id or by label (if select2 and full text indexing is turned on)\n */\n\nTerminusDocumentChooser = function(ui, root, value, view){\n\tthis.ui = ui;\n\tthis.root = root;\n\t//this.filter = (currentcls ? FrameHelper.unshorten(currentcls) : false);\n\tthis.choice = value;\n\tthis.view = (view ? view : \"id\");\n\tthis.show_button = true;\n}\n\nTerminusDocumentChooser.prototype.setRoot = function(root){\n\tthis.root = root;\n}\n\nTerminusDocumentChooser.prototype.setFilter = function(filter){\n\tthis.filter = filter;\n}\n\nTerminusDocumentChooser.prototype.change = function(docid){\n\talert(\"Need to specify doc chooser function (\" + docid + \")\");\n}\n\nTerminusDocumentChooser.prototype.getAsDOM = function(style){\n\tif(this.view == \"label\" && \tthis.ui.client.connectionConfig.platformEndpoint() && this.ui.pluginAvailable(\"select2\")){\n\t\treturn this.getS2DOM(style);\n\t}\n\treturn this.getIDDOM();\n}\n\nTerminusDocumentChooser.prototype.getS2DOM = function(style){\n\tvar docchooser = document.createElement(\"span\");\n\tdocchooser.setAttribute(\"class\", \"terminus-document-chooser terminus-doc-holder\");\n\tvar wq = new WOQLQuery(this.ui.client, {});\n\tvar cfilter = wq.getSubclassQueryPattern(\"Class\", \"'\"+this.root+\"'\");\n\tvar termcc = new TerminusClassChooser(this.ui, cfilter);\n\ttermcc.empty_choice = \"Filter by Type\";\n\ttermcc.show_single = false;\n\tvar self = this;\n\ttermcc.change = function(new_class){\n\t\tif(new_class){\n\t\t\tself.filter = new_class;\n\t\t}\n\t}\n\ttdom = termcc.getAsDOM(style);\n\tif(tdom) docchooser.appendChild(tdom);\n\tvar holder = document.createElement(\"span\");\n\tholder.setAttribute(\"class\", \"terminus-entity-reference-value\");\n\tvar sel = document.createElement(\"select\");\n\tsel.setAttribute(\"class\", \"terminus-entity-class-input\");\n\tholder.appendChild(sel);\n\tvar opt = document.createElement(\"option\");\n\tvar lookup = function (params) {\n\t\tparams.class = self.filter;\n\t\treturn JSON.stringify(params);\n    }\n\tvar searchurl = this.ui.client.dbURL() + \"/search\";\n\tvar s2config = {\n\t\tajax: {\n\t\t    url: searchurl,\n\t\t    dataType: 'json',\n\t\t    data: lookup,\n\t\t    type: \"POST\",\n\t\t\tcontentType: \"application/json; charset=utf-8\",\n\t\t    delay: 250,\n\t\t    cache: true\n\t\t},\n\t\tplaceholder: \"Enter Document Name\",\n\t\twidth: 200\n\t};\n\tjQuery(sel).select2(s2config).change(function(){\n\t\tcallback(this.value);\n\t});\n\tdocchooser.appendChild(holder);\n\treturn docchooser;\n}\n\nTerminusDocumentChooser.prototype.getIDDOM = function(){\n\tvar docchooser = document.createElement(\"span\");\n\tdocchooser.setAttribute(\"class\", \"terminus-document-chooser terminus-doc-holder\");\n\tvar dcip = document.createElement(\"input\");\n\tdcip.setAttribute(\"class\", \"terminus-document-chooser terminus-query-text\");\n\t//11092019 dcip.setAttribute(\"class\", \"terminus-form-value terminus-document-chooser\");\n\tdcip.setAttribute(\"placeholder\", \"Enter Document ID\");\n\tdcip.addEventListener('keypress', function(e){\n\t\tvar key = e.which || e.keyCode;\n\t\t// on enter\n\t\tif (key === 13 && dcip.value) {\n\t\t\tself.choice = dcip.value;\n\t\t\tself.change(dcip.value);\n\t\t}\n\t});\n\tdocchooser.appendChild(dcip);\n\tif(this.show_button){\n\t\tvar dbut = document.createElement(\"button\");\n\t\tdbut.setAttribute(\"class\", \"terminus-control-button terminus-query-go-btn\");\n\t\tvar self = this;\n\t\tdbut.addEventListener(\"click\", function(){\n\t\t\tif(dcip.value) {\n\t\t\t\tself.choice = dcip.value;\n\t\t\t\tself.change(dcip.value);\n\t\t\t}\n\t\t});\n\t\t//11092019 dbut.appendChild(document.createTextNode(\"View Document Properties\"));\n\t\tdbut.appendChild(document.createTextNode(\"Go\"));\n\t\tdocchooser.appendChild(dbut);\n\t}\n\treturn docchooser;\n}\n\nTerminusDocumentChooser.prototype.toggleView = function(){\n\tif(this.view == \"id\") this.view = \"label\";\n\telse this.view = \"id\";\n}\n\nTerminusDocumentChooser.prototype.getChangeViewText = function(){\n\tif(this.view == \"id\"){\n\t\treturn \"Document Lookup\";\n\t}\n\treturn \"Load Document ID\";\n}\n\nmodule.exports=TerminusDocumentChooser\n","function TerminusMappingViewer(ui, mode){\n\tthis.ui = ui;\n\tthis.mode = (mode ? mode : \"data\");\n}\n\nTerminusMappingViewer.prototype.getAsDOM = function(){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-mapping-page terminus-page\");\n\tvar tsel = document.createElement(\"select\");\n\tvar o1 = document.createElement(\"option\");\n\to1.value = \"data\";\n\to1.appendChild(document.createTextNode(\"Data Map\"))\n\ttsel.appendChild(o1);\n\tvar o2 = document.createElement(\"option\");\n\to2.value = \"model\";\n\to2.appendChild(document.createTextNode(\"Model Map\"))\n\ttsel.appendChild(o2);\n\tvar ff = this.getFormFieldDOM(\"Map Type\");\n\tff.appendChild(tsel);\n\tscd.appendChild(ff);\n\tvar source = this.getFormField(scd, \"Map Source\");\n\tvar target = this.getFormField(scd, \"Map Target\");\n\tvar queries = this.getFormField(scd, \"Queries\");\n\tvar options = this.getFormField(scd, \"Options\");\n\t\n\tvar mdom = this.getFormFieldDOM(\"Existing Mapping\");\n\tvar mapping = document.createElement(\"input\");\n\tmapping.setAttribute(\"type\", \"text\");\n\tmapping.setAttribute(\"size\", 80);\n\tmdom.appendChild(mapping);\n\tscd.appendChild(mdom);\n\t\n\tvar submit = document.createElement(\"button\");\n\tsubmit.setAttribute(\"class\", \"terminus-btn terminus-control-button\");\n\tsubmit.appendChild(document.createTextNode(\"Execute Mapping\"));\n\tvar self = this;\n\tsubmit.addEventListener(\"click\", function(){\n\t\tvar jsonip = {\n\t\t\tmap_source: JSON.parse(source.value),\n\t\t};\n\t\tif(tsel.value == \"data\"){\n\t\t\tjsonip[\"rdf:type\"] = \"dcogmodel:DataMap\";\n\t\t}\n\t\telse {\n\t\t\tjsonip[\"rdf:type\"] = \"dcogmodel:ModelMap\";\t\t\t\n\t\t}\n\t\tif(target.value) jsonip.map_target = target.value;\n\t\tif(queries.value) jsonip.queries = queries.value;\n\t\tif(options.value) jsonip.options = options.value;\n\t\tif(mapping.value) jsonip.mapping = mapping.value;\n\t\tself.ui.client.update(false, jsonip);\n\t})\n\tscd.appendChild(submit);\n\treturn scd;\n}\n\nTerminusMappingViewer.prototype.getFormFieldDOM = function(label){\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field terminus-mapping-field\");\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"terminus-form-label terminus-mapping-label\");\n\tlab.appendChild(document.createTextNode(label));\n\tsci.appendChild(lab);\n\treturn sci;\n}\n\nTerminusMappingViewer.prototype.getFormField = function(holder, label){\n\tvar ff = this.getFormFieldDOM(label);\n\tvar source = document.createElement(\"textarea\");\n\tsource.setAttribute(\"class\", \"terminus-form-value terminus-textarea\");\n\tff.appendChild(source);\n\tholder.appendChild(ff);\n\treturn source;\n}\n\nmodule.exports=TerminusMappingViewer\n","/*\n * Utility Property which runs a query against the schema and presents the returned Propertyes as a drop-down / Property filter list\n */\nconst FrameHelper = require('../FrameHelper');\nconst WOQLQuery = require('../query/WOQLQuery');\n\nTerminusPropertyChooser = function(ui, filter){\n\tthis.ui = ui;\n\tthis.choice = false;\n\tthis.filter = filter;\n}\n\nTerminusPropertyChooser.prototype.setRoot = function(root){\n\tthis.root = root;\n}\n\nTerminusPropertyChooser.prototype.setFilter = function(filter){\n\tthis.filter = filter;\n}\n\nTerminusPropertyChooser.prototype.change = function(cls){\n\talert(\"Need to specify Property chooser function (\" + cls + \")\");\n}\n\nTerminusPropertyChooser.prototype.getAsDOM = function(){\n\tvar ccdom = document.createElement(\"span\");\n\tccdom.setAttribute(\"Class\", \"terminus-Class-chooser\");\n\tvar ccsel = document.createElement(\"select\");\n\tccsel.setAttribute(\"Class\", \" terminus-type-select terminus-query-select\");\n\tvar self = this;\n\tccsel.addEventListener(\"change\", function(){\n\t\tif(this.value != this.choice){\n\t\t\tthis.choice = this.value;\n\t\t\tself.change(this.value);\n\t\t}\n\t});\n\tccdom.appendChild(ccsel);\n\tvar wq = new WOQLQuery(this.ui.client);\n\tvar woql = wq.getPropertyListQuery(this.filter);\n\tvar self = this;\n\twq.execute(woql)\n\t.then(function(response){\n\t\tvar opts = self.getResultsAsOptions(response);\n\t\tfor(var i = 0; i<opts.length; i++){\n\t\t\tccsel.appendChild(opts[i]);\n\t\t}\n\t});\n\treturn ccdom;\n}\n\nTerminusPropertyChooser.prototype.getResultsAsOptions = function(clist){\n\tvar choices = [];\n\tif(this.empty_choice){\n\t\tvar opt1 = document.createElement(\"option\");\n\t\topt1.setAttribute(\"Class\", \"terminus-class-choice terminus-empty-choice\");\n\t\topt1.value = \"\";\n\t\topt1.appendChild(document.createTextNode(this.empty_choice));\n\t\tchoices.push(opt1);\n\t}\n\tif(clist.bindings){\n\t\tvar added = [];\n\t\tfor(var i = 0; i<clist.bindings.length; i++){\n\t\t\tif(clist.bindings[i].Property && added.indexOf(clist.bindings[i].Property) == -1){\n\t\t\t\tadded.push(clist.bindings[i].Property);\n\t\t\t\tvar opt = document.createElement(\"option\");\n\t\t\t\topt.setAttribute(\"Class\", \"terminus-class-choice\");\n\t\t\t\topt.value = clist.bindings[i].Property;\n\t\t\t\tvar lab = clist.bindings[i].Label;\n\t\t\t\tif(!lab || lab == \"unknown\"){\n\t\t\t\t\tlab = FrameHelper.labelFromURL(clist.bindings[i].Property);\n\t\t\t\t}\n\t\t\t\tif(lab[\"@value\"]) lab = lab[\"@value\"];\n\t\t\t\topt.appendChild(document.createTextNode(lab));\n\t\t\t\tchoices.push(opt);\n\t\t\t}\n\t\t}\n\t}\n\treturn choices;\n}\n\nmodule.exports=TerminusPropertyChooser\n","const FrameHelper = require('../FrameHelper');\nconst WOQLQuery = require('../query/WOQLQuery');\nconst WOQLResult = require('../query/WOQLResult');\nconst WOQLResultsViewer = require('../query/WOQLResultsViewer');\nconst WOQLTextboxGenerator = require('../query/WOQLTextboxGenerator');\nconst WOQLGraphBrowserGenerator = require('../query/WOQLGraphBrowserGenerator');\nconst TerminusPluginManager = require('../plugins/TerminusPlugin');\n\nfunction TerminusQueryViewer(ui, options){\n\tthis.ui = ui;\n\tthis.options = options;\n\tthis.meta = {};\n\tthis.init();\n\tthis.generator = false;\n\tthis.result = false;\n\tthis.wquery = new WOQLQuery(ui.client, this.options);\n\tthis.results_first = false;\n\tthis.pman = new TerminusPluginManager();\n\tthis.gentype = (options && options.generator ? options.generator : \"textbox\");\n\tthis.generators = {\n\t\t\"textbox\" : { label: \"Simple Text Box\", value: \"textbox\"},\n\t}\n\tif(ui.pluginAvailable(\"jqueryui\")){\n\t\tthis.generators.gbrowse = { label: \"Graph Browser\", value: \"gbrowse\"};\n\t}\n\tthis.loadGenerator();\n}\n\nTerminusQueryViewer.prototype.hasGeneratorOptions = function(){\n\tvar yup = false;\n\tfor(var gen in this.generators){\n\t\tif(yup) return true;\n\t\telse yup = true;\n\t}\n\treturn false;\n}\n\nTerminusQueryViewer.prototype.changeGenerator = function(ng){\n\tif(this.gentype != ng){\n\t\tthis.gentype = ng;\n\t\tthis.loadGenerator();\n\t\tthis.redrawGenerator();\n\t}\n}\nTerminusQueryViewer.prototype.redrawGenerator = function(q){\n\tFrameHelper.removeChildren(this.inputDOM);\n\tthis.inputDOM.appendChild(this.getQueryInputDOM(q));\n}\n\nTerminusQueryViewer.prototype.loadGenerator = function(){\n\tvar self = this;\n\tvar nquery = function(q, settings){\n\t\tself.query(q, settings)\n\t}\n\tif(this.gentype == \"textbox\"){\n\t\tthis.generator = new WOQLTextboxGenerator(nquery, this, this.ui);\n\t}\n\telse if(this.gentype == \"gbrowse\"){\n\t\tthis.generator = new WOQLGraphBrowserGenerator(nquery, this, this.ui);\n\t}\n}\n\nTerminusQueryViewer.prototype.init = function(){\n\tvar wq = new WOQLQuery(this.ui.client, this.options);\n\tvar woql = wq.getElementMetaDataQuery();\n\tvar self = this;\n\tself.meta = {};\n\twq.execute(woql).then(function(wresult){\n\t\tvar wqlR = new WOQLResult(wresult, null ,null);\n\t\tif(wqlR.hasBindings(wresult)){\n\t\t\tfor(var i = 0; i<wresult.bindings.length; i++){\n\t\t\t\tvar el = wresult.bindings[i].Element;\n\t\t\t\tif(el && typeof self.meta[el] == \"undefined\"){\n\t\t\t\t\tself.meta[el] = wresult.bindings[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n\t.catch(function(e){\n\t\tconsole.error(e);\n\t});\n}\n\n\nTerminusQueryViewer.prototype.query = function(val, settings, tab){\n\tvar self = this;\n\tFrameHelper.removeChildren(this.resultDOM);\n\tthis.wquery.execute(val)\n\t.then(function(result){\n\t\tif(true || !self.result){\n\t\t\tself.result = new WOQLResultsViewer(self.ui, result, self.options, settings);\n\t\t}\n\t\telse {\n\t\t\t//self.result.newResult(result);\n\t\t}\n\t\tvar nd = self.result.getAsDOM(self.resultDOM);\n\t\tif(nd){\n\t\t\t self.resultDOM.appendChild(nd);\n\t\t}\n\t})\n\t.catch(function(err){\n\t\tconsole.error(err);\n\t\tself.ui.showError(err);\n\t});\n}\n\nTerminusQueryViewer.prototype.getResultViewDom = function(){\n\tthis.resultDOM = document.createElement(\"div\");\n\tthis.resultDOM.setAttribute(\"class\", \"terminus-query-results\");\n}\n\nTerminusQueryViewer.prototype.getAsDOM = function(q){\n\tvar qbox = document.createElement(\"div\");\n\tqbox.setAttribute(\"class\", \"terminus-query-page\");\n\tif(this.hasGeneratorOptions()){\n\t\tqbox.appendChild(this.getQueryCreatorChoiceDOM(q));\n\t}\n\tthis.resultDOM = document.createElement(\"div\");\n\tthis.resultDOM.setAttribute(\"class\", \"terminus-query-results\");\n\tthis.inputDOM = document.createElement(\"div\");\n\tthis.inputDOM.setAttribute(\"class\", \"terminus-query-input\");\n\tthis.inputDOM.appendChild(this.getQueryInputDOM(q));\n\tif(this.results_first){\n\t\tqbox.appendChild(this.resultDOM);\n\t\tqbox.appendChild(this.inputDOM);\n\t}\n\telse {\n\t\tqbox.appendChild(this.inputDOM);\n\t\tqbox.appendChild(this.resultDOM);\n\t}\n\treturn qbox;\n}\n\nTerminusQueryViewer.prototype.getQueryCreatorChoiceDOM = function(){\n\tvar qcc = document.createElement(\"select\");\n\tqcc.setAttribute(\"class\", \"terminus-query-generator-selector\");\n\tfor(var c in this.generators){\n\t\tvar gen = this.generators[c];\n\t\tvar opt = document.createElement(\"option\");\n\t\topt.value = (gen.value ? gen.value : c);\n\t\tvar lab = (gen.label ? gen.label : c);\n\t\topt.appendChild(document.createTextNode(lab));\n\t\tqcc.appendChild(opt);\n\t}\n\tvar self = this;\n\tqcc.addEventListener(\"change\", function(){\n\t\tself.changeGenerator(this.value);\n\t});\n\treturn qcc;\n}\n\nTerminusQueryViewer.prototype.getQueryInputDOM = function(q){\n\t//input options ...\n\t//this.inputDOM.appendChild(this.getQueryCreatorChoiceDOM());\n\treturn this.generator.getAsDOM(q);\n}\n\nmodule.exports=TerminusQueryViewer\n","/*\n * Draws the screen for viewing and updating the schema\n * and provides wrappers around the client's schema API\n */\nconst FrameHelper = require('../FrameHelper');\nconst TerminusClassChooser = require('./TerminusClassChooser');\nconst TerminusDocumentViewer = require('./TerminusDocument');\nconst UTILS=require('../Utils')\n\nfunction TerminusSchemaViewer(ui){\n\tthis.ui = ui;\n\tthis.mode = \"view\";\n\tthis.format = \"turtle\";\n\tthis.confirm_before_update = true;\n}\n\n/*\n * Retrieves schema from API and writes the response into the page\n */\nTerminusSchemaViewer.prototype.getAsDOM = function(){\n\tthis.holder = document.createElement(\"div\");\n\tthis.controldom = document.createElement(\"div\");\n\tthis.controldom.setAttribute(\"class\", \"terminus-schema-controls\");\n\tthis.pagedom = document.createElement(\"div\");\n\tthis.pagedom.setAttribute(\"class\", \"terminus-schema-viewer\");\n\tthis.loadSchema();\n\tthis.holder.appendChild(this.controldom);\n\tthis.holder.appendChild(this.pagedom);\n\treturn this.holder;\n}\n\nTerminusSchemaViewer.prototype.loadSchema = function(){\n\tvar self = this;\n\tthis.ui.showBusy(\"Fetching Database Schema\");\n\tthis.ui.client.getSchema(false, {\"terminus:encoding\": \"terminus:\" + this.format})\n\t.then(function(response){\n\t\tself.ui.clearBusy();\n\t\tself.schema = response;\n\t\tself.refreshPage();\n\t})\n\t.catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\n}\n\nTerminusSchemaViewer.prototype.resetControlDOM = function(){\n\tFrameHelper.removeChildren(this.controldom);\n\tif(this.mode == \"edit\"){\n\t\tthis.controldom.appendChild(this.getSchemaSaveButtons());\n\t}\n\telse if(this.mode == \"import\"){\n\t\tthis.controldom.appendChild(this.getSchemaImportActionButtons());\n\t}\n\telse if(this.mode == \"class_frame\"){\n\t\tif(this.ui.showControl(\"get_schema\")){\n\t\t\tthis.controldom.appendChild(this.getShowSchemaButton());\n\t\t}\n\t\tif(this.ui.showControl(\"class_frame\")){\n\t\t\tthis.controldom.appendChild(this.getClassFrameChooser());\n\t\t}\n\t}\n\telse if(this.mode == \"view\"){\n\t\tif(this.ui.showControl(\"import_schema\")){\n\t\t\tthis.controldom.appendChild(this.getImportButton());\n\t\t}\n\t\tif(this.ui.showControl(\"update_schema\")){\n\t\t\tthis.controldom.appendChild(this.getSchemaEditButton());\n\t\t}\n\t\tif(this.ui.showControl(\"schema_format\")){\n\t\t\tthis.controldom.appendChild(this.getFormatChoices());\n\t\t}\n\t\tif(this.ui.showControl(\"class_frame\")){\n\t\t\tthis.controldom.appendChild(this.getClassFrameChooser());\n\t\t}\n\t}\n}\n\nTerminusSchemaViewer.prototype.getFormatChoices = function(){\n\tvar fc = document.createElement(\"select\");\n\tfc.setAttribute(\"class\", \"terminus-form-select terminus-schema-format terminus-type-select\");\n\tvar tc = document.createElement(\"option\");\n\ttc.setAttribute(\"class\", \"terminus-schema-turtle\");\n\ttc.value = \"turtle\";\n\ttc.appendChild(document.createTextNode(\"Turtle\"));\n\tif(this.format == \"turtle\") tc.selected = true;\n\tfc.appendChild(tc);\n\tvar tj = document.createElement(\"option\");\n\ttj.setAttribute(\"class\", \"terminus-schema-jsonld\");\n\ttj.value = \"jsonld\";\n\ttj.appendChild(document.createTextNode(\"Json LD\"));\n\tif(this.format == \"jsonld\") tj.selected = true;\n\tfc.appendChild(tj);\n\tvar self = this;\n\tfc.addEventListener(\"change\", function(e){\n\t\tself.format = this.value;\n\t\tself.loadSchema();\n\t});\n\treturn fc;\n}\n\n\nTerminusSchemaViewer.prototype.refreshPage = function(){\n\tif(this.controldom) this.resetControlDOM();\n\tif(this.pagedom) this.refreshMainPage();\n}\n\nTerminusSchemaViewer.prototype.refreshMainPage = function(){\n\tFrameHelper.removeChildren(this.pagedom);\n\tif(this.mode == 'view'){\n\t\tthis.pagedom.appendChild(this.getSchemaViewDOM());\n\t}\n\telse if(this.mode == \"edit\"){\n\t\tthis.pagedom.appendChild(this.getSchemaEditDOM());\n\t}\n\telse if(this.mode == \"import\"){\n\t\tthis.pagedom.appendChild(this.getSchemaImportDOM());\n\t}\n\telse if(this.mode == \"class_frame\"){\n\t\tthis.pagedom.appendChild(this.getClassFrameDOM());\n\t}\n}\n\nTerminusSchemaViewer.prototype.getSchemaSaveButtons = function(){\n\tvar ssb = document.createElement(\"span\");\n\tssb.setAttribute(\"class\", \"terminus-schema-save-buttons\");\n\tssb.appendChild(this.getCancelButton());\n\tssb.appendChild(this.getSaveButton());\n\treturn ssb;\n}\n\nTerminusSchemaViewer.prototype.getSchemaImportActionButtons = function(){\n\tvar ssb = document.createElement(\"span\");\n\tssb.setAttribute(\"class\", \"terminus-schema-import-buttons\");\n\tssb.appendChild(this.getCancelButton());\n\tssb.appendChild(this.getImportPreviewButton());\n\tssb.appendChild(this.getImportSaveButton());\n\treturn ssb;\n}\n\nTerminusSchemaViewer.prototype.getShowSchemaButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.mode = \"view\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"View Schema\", \"get_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getImportPreviewButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.mode = \"preview\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"Preview\", \"preview\", func);\n}\n\nTerminusSchemaViewer.prototype.getCancelButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.mode = \"view\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"Cancel\", \"cancel_update\", func);\n}\n\nTerminusSchemaViewer.prototype.getImportSaveButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tif(typeof self.doImport == \"function\"){\n\t\t\tself.doImport();\n\t\t}\n\t}\n\treturn this.getSchemaButton(\"Import\", \"import_schema\", func)\n}\n\nTerminusSchemaViewer.prototype.getSaveButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tvar text = self.schema_edit_dom.value;\n\t\tif(typeof(self.schema) == \"object\"){\n\t\t\ttext = JSON.parse(text);\n\t\t}\n\t\treturn self.updateSchema(text, {\"terminus:encoding\": \"terminus:\" + self.format});\n\t}\n\treturn this.getSchemaButton(\"Save\", \"update_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getSchemaEditButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.mode = \"edit\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"Edit\", \"update_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getImportButton = function(){\n\tvar self = this;\n\tvar func = function(){\n\t\tself.mode = \"import\";\n\t\tself.refreshPage();\n\t}\n\treturn this.getSchemaButton(\"Import Schema\", \"import_schema\", func);\n}\n\nTerminusSchemaViewer.prototype.getSchemaButton = function(label, action, func){\n\tvar opt = document.createElement(\"button\");\n\topt.appendChild(document.createTextNode(label));\n\topt.setAttribute(\"class\", \"terminus-btn terminus-control-button terminus-schema-\" + action);\n\topt.addEventListener(\"click\", func);\n\treturn opt;\n}\n\n/*\n * Updates schema, then fetches updated version and updates the page with it\n */\nTerminusSchemaViewer.prototype.updateSchema  = function(text, opts){\n\tthis.ui.showBusy(\"Updating Database Schema\");\n\tvar self = this;\n\treturn this.ui.client.updateSchema(false, text, opts)\n\t.then(function(response){\n\t\tself.ui.showBusy(\"Retrieving updated schema\");\n\t\tself.loadSchema()\n\t\t.then(function(response){\n\t\t\tself.ui.clearBusy();\n\t\t\tself.schema = response;\n\t\t\tself.mode = \"view\";\n\t\t\tself.refreshPage(\"Successfully updated schema\");\n\t\t});\n\t})\n\t.catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\n}\n\n/*\n * Imports a schema from the passed url\n * mode: replace | append\n */\nTerminusSchemaViewer.prototype.load  = function(url, key, mode){\n\tvar self = this;\n\tmode = (mode ? mode : \"replace\");\n\tthis.ui.showBusy(\"Loading schema from \" + url);\n\treturn this.ui.client.getSchema(url, {key: key, format: this.format})\n\t.then(function(response){\n\t\tvar newschema = (mode == \"append\") ? self.appendSchema(response) : response;\n\t\tif(self.confirm_before_update){\n\t\t\tself.showConfirmPage(newschema);\n\t\t}\n\t\telse {\n\t\t\tself.ui.showBusy(\"Updating schema\");\n\t\t\tself.updateSchema(false, newschema).then(function(response){\n\t\t\t\tself.ui.clearBusy();\n\t\t\t\tself.ui.showResult(\"Successfully deployed new schema from \" + url);\n\t\t\t\treturn response;\n\t\t\t});\n\t\t}\n\t}).catch(function(error){\n\t\tself.ui.clearBusy();\n\t\tself.ui.showError(error);\n\t});\n}\n\nTerminusSchemaViewer.prototype.appendSchema = function(s2){\n\tvar nschema = this.schema;\n\tif(this.format == 'turtle'){\n\t\tnschema = this.schema + s2;\n\t}\n\telse if(this.format == 'jsonld'){\n\t\tfor(var i in s2){\n\t\t\tnschema[i] = s2[i];\n\t\t}\n\t}\n\treturn nschema;\n}\n\nTerminusSchemaViewer.prototype.getClassFrameChooser = function(){\n\tvar np = document.createElement(\"span\");\n\tnp.setAttribute(\"class\", \"terminus-classframe-chooser\");\n\tvar termcc = new TerminusClassChooser(this.ui);\n\ttermcc.empty_choice = \"View Individual Class Frames\";\n\tvar self = this;\n\ttermcc.change = function(new_class){\n\t\tif(new_class){\n\t\t\tself.cls = new_class;\n\t\t\tif(self.mode != \"class_frame\"){\n\t\t\t\tself.mode = \"class_frame\";\n\t\t\t\tself.refreshPage();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tself.refreshMainPage();\n\t\t\t}\n\t\t}\n\t}\n\tvar tcdom = termcc.getAsDOM();\n\tnp.appendChild(tcdom);\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.getClassFrameDOM = function(){\n\tvar np = document.createElement(\"div\");\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-classframe-page\");\n\tvar docviewer = new TerminusDocumentViewer(this.ui, \"model\");\n\tdocviewer.loadCreateDocument(this.cls);\n\tdocviewer.page_config = \"model\";\n\n\tnp.appendChild(docviewer.getAsDOM());\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.showConfirmPage = function(newschema){\n\tthis.schema = newschema;\n\tthis.confirm_before_update = false;\n\tthis.mode = \"edit\";\n\tthis.refreshPage(\"Confirm new schema\");\n}\n\nTerminusSchemaViewer.prototype.getSchemaEditDOM = function(){\n\tvar np = document.createElement(\"div\");\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-edit-page\");\n\tvar ipval = document.createElement(\"textarea\");\n\tipval.setAttribute(\"class\", \"terminus-schema-edit terminus-schema-textarea\");\n\tipval.setAttribute(\"width\", \"100%\");\n\tipval.setAttribute(\"style\", \"min-width: 400px; min-height: 400px;\");\n\tif(typeof(this.schema) == \"string\"){\n\t\tipval.innerHTML = this.schema;\n\t}\n\telse if(typeof (this.schema) == \"object\") {\n\t\tipval.innerHTML = JSON.stringify(this.schema, 0, 4);\n\t}\n\tthis.schema_edit_dom = ipval;\n\tnp.appendChild(ipval);\n\tUTILS.stylizeEditor(this.ui, ipval, 'schema', 'turtle');\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.getSchemaViewDOM = function(){\n\tvar self = this;\n\tvar np = document.createElement(\"div\");\n\tnp.setAttribute(\"class\", \"terminus-schema-page terminus-schema-view-page\");\n\tvar ipval = document.createElement(\"pre\");\n\tipval.setAttribute(\"class\", \"terminus-schema-view terminus-scheme-pre\");\n\tif(typeof(this.schema) == \"string\"){\n\t\tvar txt = this.schema.replace(/&/g, \"&amp;\")\n         .replace(/</g, \"&lt;\")\n         .replace(/>/g, \"&gt;\")\n         .replace(/\"/g, \"&quot;\")\n         .replace(/'/g, \"&#039;\");\n\t\tipval.innerHTML = txt;\n\t}\n\telse if(typeof (this.schema) == \"object\") {\n\t\tipval.innerHTML = JSON.stringify(this.schema, 0, 4);\n\t}\n\tvar cm = UTILS.stylizeCodeDisplay(this.ui, ipval, np, 'turtle');\n\tif(!cm) np.appendChild(ipval);\n\treturn np;\n}\n\nTerminusSchemaViewer.prototype.getSchemaImportDOM = function(){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-schema-page terminus-schema-import-page\");\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field\");\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"terminus-form-label terminus-url-loader-input\");\n\tlab.appendChild(document.createTextNode(\"URL\"))\n\tvar ip = document.createElement(\"input\");\n\tip.setAttribute(\"type\", \"text\");\n\tip.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-url-connect\");\n\tif(this.val){\n\t\tip.value = this.val;\n\t}\n\tsci.appendChild(lab);\n\tsci.appendChild(ip);\n\tscd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field\");\n\tvar klab = document.createElement(\"span\");\n\tklab.setAttribute(\"class\", \"terminus-form-label terminus-import_mode-input\");\n\tklab.appendChild(document.createTextNode(\"Import Mode\"))\n\tvar modes = document.createElement(\"select\");\n\tmodes.setAttribute(\"class\", \"terminus-form-select\");\n\n\tvar overwrite = document.createElement(\"option\");\n\toverwrite.value = \"replace\";\n\toverwrite.appendChild(document.createTextNode(\"Replace Mode\"))\n\tmodes.appendChild(overwrite);\n\tvar append = document.createElement(\"option\");\n\tappend.value = \"append\";\n\tappend.appendChild(document.createTextNode(\"Append Mode\"))\n\tmodes.appendChild(append);\n\tmodes.setAttribute(\"class\", \"terminus-form-select terminus-import-mode\");\n\tsci.appendChild(klab);\n\tsci.appendChild(modes);\n\tscd.appendChild(sci);\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-field\");\n\tvar klab = document.createElement(\"span\");\n\tklab.setAttribute(\"class\", \"terminus-form-label terminus-url-key-input\");\n\tklab.appendChild(document.createTextNode(\"Key\"))\n\tvar key = document.createElement(\"input\");\n\tkey.setAttribute(\"type\", \"text\");\n\tkey.setAttribute(\"class\", \"terminus-form-value terminus-url-key\");\n\tsci.appendChild(klab);\n\tsci.appendChild(key);\n\tscd.appendChild(sci);\n\tvar self = this;\n\tthis.doImport = function(){\n\t\tif(ip.value){\n\t\t\tself.load(ip.value, key.value, modes.value);\n\t\t}\n\t}\n\treturn scd;\n}\n\nmodule.exports=TerminusSchemaViewer","/**\n * User interface elements that relate to server context\n *\n * TerminusServerController is a control widget that invokes server actions\n * TerminusServerViewer is a window that displays server actions and server screens\n *\n */\n const Datatables = require('../plugins/datatables.terminus');\n const UTILS =require('../Utils')\n function TerminusServerController(ui){\n\t this.ui = ui;\n }\n\nTerminusServerController.prototype.getAsDOM = function(){\n\tvar rsc = document.createElement(\"div\");\n\trsc.setAttribute(\"class\", \"terminus-server-controller\");\n\tvar self = this;\n\tif(this.ui && this.ui.server()){\n\t\tvar scd = document.createElement(\"div\");\n\t\tscd.setAttribute(\"class\", \"terminus-server-connection\");\n        var nav = document.createElement('div');\n        nav.setAttribute('class', 'span3');\n        var ul = document.createElement('ul');\n        ul.setAttribute('class', 'terminus-ul');\n        nav.appendChild(ul);\n        rsc.appendChild(nav);\n        // change server\n        if(this.ui.showControl(\"change-server\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n                UTILS.removeSelectedNavClass(\"terminus-selected\");\n                this.classList.add(\"terminus-selected\");\n                self.ui.showLoadURLPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-link');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Change Server');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n        // view databases\n        if(this.ui.showControl(\"db\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n                UTILS.removeSelectedNavClass(\"terminus-selected\");\n                this.classList.add(\"terminus-selected\");\n                if(self.ui.db()){\n                    //self.ui.clearDB();\n                }\n                self.ui.showServerMainPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-eye');\n            a.appendChild(icon);\n            var txt = document.createTextNode('View Databases');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n        if(this.ui.showControl(\"create_database\")){\n            var a = document.createElement('a');\n            a.setAttribute('class', 'terminus-a terminus-list-group-a terminus-list-group-a-action terminus-nav-width terminus-pointer');\n            var self = this;\n            a.addEventListener(\"click\", function(){\n                UTILS.removeSelectedNavClass(\"terminus-selected\");\n                this.classList.add(\"terminus-selected\");\n                if(self.ui.db()){\n                    //self.ui.clearDB();\n                }\n                self.ui.showCreateDBPage();\n            })\n            var icon = document.createElement('i');\n            icon.setAttribute('class', 'terminus-menu-icon fa fa-plus');\n            a.appendChild(icon);\n            var txt = document.createTextNode('Create New Database');\n            a.appendChild(txt);\n            ul.appendChild(a);\n        }\n\t}\n\treturn rsc;\n}\n\nTerminusServerController.prototype.getServerLabelDOM = function(){\n\tvar srec = this.ui.client.connection.getServerRecord();\n\tvar lab = (srec && srec['rdfs:label'] && srec['rdfs:label'][\"@value\"] ? srec['rdfs:label'][\"@value\"] : this.ui.server());\n\tvar desc = (srec && srec['rdfs:comment'] && srec['rdfs:comment'][\"@value\"] ? srec['rdfs:comment'][\"@value\"] : \"\");\n\tdesc += \" Server URL: \"+ this.ui.server();\n\tvar val = document.createElement(\"span\");\n\tval.setAttribute(\"class\", \"terminus-server-value\");\n\tval.setAttribute(\"title\", desc);\n\tval.appendChild(document.createTextNode(lab));\n    val =  document.createElement('div');\n\treturn val;\n}\n\nfunction TerminusServerViewer(ui){\n\tthis.ui = ui;\n\tthis.server = this.ui.server();\n}\n\nTerminusServerViewer.prototype.getAsDOM = function(selected){\n\tvar self = this;\n\tvar pd = document.createElement(\"span\");\n\tpd.setAttribute(\"class\", \"terminus-server-home-page\");\n\tif(this.ui.server()){\n\t\tvar scd = document.createElement(\"span\");\n\t\tscd.setAttribute(\"class\", \"terminus-server-home\");\n\t\tif(this.ui.showView(\"server\")){\n\t\t\t// 11092019 scd.appendChild(this.getServerDetailsDOM());\n\t\t}\n\t\tif(this.ui.showView(\"change-server\")){\n\t\t\tvar csbut = document.createElement(\"button\");\n\t\t\tcsbut.setAttribute(\"class\", \"terminus-control-button terminus-change-server-button terminus-btn\")\n\t\t\tcsbut.appendChild(document.createTextNode(\"Disconnect\"));\n\t\t\tcsbut.addEventListener(\"click\", function(){\n\t\t\t\t//self.ui.clearDB();\n\t\t\t\t//self.ui.clearServer();\n\t\t\t\tself.ui.showLoadURLPage();\n\t\t\t})\n\t\t\t// 11092019 scd.appendChild(csbut);\n\t\t}\n\t\tif(this.ui.showView(\"create_database\")){\n\t\t\tvar crbut = document.createElement(\"button\");\n\t\t\tcrbut.setAttribute(\"class\", \"terminus-control-button terminus-create-db-button terminus-btn\")\n\t\t\tcrbut.appendChild(document.createTextNode(\"Create New Database\"));\n\t\t\tcrbut.addEventListener(\"click\", function(){\n\t\t\t\tif(self.ui.db()){\n\t\t\t\t\t//self.ui.clearDB();\n\t\t\t\t}\n\t\t\t\tself.ui.clearMessages();\n\t\t\t\tself.ui.showCreateDBPage();\n\t\t\t})\n\t\t\t// 11092019 scd.appendChild(crbut);\n\t\t}\n\t\tif(this.ui.showView(\"db\")){\n\t\t\tscd.appendChild(this.getDBListDOM());\n\t\t}\n\t\tpd.appendChild(scd);\n\t}\n\telse {\n\t\tself.ui.showLoadURLPage();\n\n\t\t//pd.appendChild(this.getLoadURLPage());\n\t}\n\treturn pd;\n}\n\nTerminusServerViewer.prototype.getServerDetailsDOM = function(){\n\tvar scd = document.createElement(\"span\");\n\tscd.setAttribute(\"class\", \"terminus-server-details terminus-server-banner\");\n\tvar scl = document.createElement(\"span\");\n\tscl.setAttribute(\"class\", \"terminus-label terminus-server-info\");\n\tscl.appendChild(document.createTextNode(\"Connected to Server - \"))\n\tvar scs = document.createElement(\"span\");\n\tscs.setAttribute(\"class\", \"terminus-value terminus-server-info\");\n\tscs.appendChild(document.createTextNode(this.ui.server()))\n\tscd.appendChild(scl);\n\tscd.appendChild(scs);\n\treturn scd;\n}\n\nTerminusServerViewer.prototype.wrapTableLinkCell = function(dbid, text){\n\tvar self = this;\n\tvar wrap = document.createElement(\"a\");\n\twrap.setAttribute(\"href\", \"#\");\n\twrap.setAttribute(\"class\", \"terminus-table-content\");\n\twrap.appendChild(document.createTextNode(text));\n\twrap.addEventListener(\"click\", function(){\n\t\tself.ui.connectToDB(dbid);\n\t\tself.ui.showDBMainPage();\n\t});\n\treturn wrap;\n}\n\nTerminusServerViewer.prototype.getDBListDOM = function(){\n\tvar self = this;\n\tvar sec = document.createElement(\"div\");\n\tsec.setAttribute(\"class\", \"terminus-db-list-section\");\n\tvar lihed = document.createElement(\"h3\");\n\tlihed.setAttribute(\"class\", \"terminus-db-list-title terminus-module-head\");\n\tlihed.appendChild(document.createTextNode(\"Available Databases\"));\n\tsec.appendChild(lihed);\n\tvar scd = document.createElement(\"table\");\n\tscd.setAttribute(\"class\", \"terminus-db-list terminus-db-size terminus-db-border\");\n\tvar thead = document.createElement(\"thead\");\n\tvar thr = document.createElement(\"tr\");\n\tvar th1 = document.createElement(\"th\");\n\tth1.appendChild(document.createTextNode(\"ID\"));\n\tth1.setAttribute(\"class\", \"terminus-db-id terminus-table-th\");\n\tvar th2 = document.createElement(\"th\");\n\tth2.appendChild(document.createTextNode(\"Title\"));\n\tth2.setAttribute(\"class\", \"terminus-db-title terminus-table-th\");\n\tvar th3 = document.createElement(\"th\");\n\tth3.appendChild(document.createTextNode(\"Description\"));\n\tth3.setAttribute(\"class\", \"terminus-db-description terminus-table-th\");\n\tvar th4 = document.createElement(\"th\");\n\tth4.setAttribute(\"class\", \"terminus-db-size terminus-table-th\");\n\tth4.appendChild(document.createTextNode(\"Size\"));\n\tvar th5 = document.createElement(\"th\");\n\tth5.setAttribute(\"class\", \"terminus-db-created terminus-table-th\");\n\tth5.appendChild(document.createTextNode(\"Created\"));\n\tvar th6 = document.createElement(\"th\");\n\tth6.appendChild(document.createTextNode(\"Delete\"));\n\tth6.setAttribute(\"class\", \"terminus-db-delete terminus-table-th\");\n\tthr.appendChild(th1);\n\tthr.appendChild(th2);\n\tthr.appendChild(th3);\n\tthr.appendChild(th4);\n\tthr.appendChild(th5);\n\tthr.appendChild(th6);\n\tthead.appendChild(thr);\n\tscd.appendChild(thead);\n\tvar tbody = document.createElement(\"tbody\");\n\tvar dbrecs = this.ui.client.connection.getServerDBRecords();\n\tfor(var fullid in dbrecs){\n\t\tvar dbrec = dbrecs[fullid];\n\t\tvar dbid = fullid.split(\":\")[1];\n\t\tvar tr = document.createElement(\"tr\");\n\t\tvar td1 = document.createElement(\"td\");\n\t\ttd1.appendChild(this.wrapTableLinkCell(dbid, dbid));\n\t\ttd1.setAttribute(\"class\", \"terminus-db-id\");\n\t\tvar td2 = document.createElement(\"td\");\n\t\ttd2.setAttribute(\"class\", \"terminus-db-title\");\n\t\tvar txt = (dbrec && dbrec['rdfs:label'] && dbrec['rdfs:label']['@value'] ? dbrec['rdfs:label']['@value'] : \"\");\n\t\ttd2.appendChild(this.wrapTableLinkCell(dbid, txt));\n\t\tvar td3 = document.createElement(\"td\");\n\t\ttd3.setAttribute(\"class\", \"terminus-db-description\");\n\t\tvar txt = (dbrec && dbrec['rdfs:comment'] && dbrec['rdfs:comment']['@value'] ? dbrec['rdfs:comment']['@value'] : \"\");\n\t\ttd3.appendChild(this.wrapTableLinkCell(dbid, txt));\n\t\tvar td4 = document.createElement(\"td\");\n\t\ttd4.setAttribute(\"class\", \"terminus-db-size\");\n\t\tvar txt = (dbrec && dbrec['terminus:size'] && dbrec['terminus:size']['@value'] ? dbrec['terminus:size']['@value'] : \"\");\n\t\ttd4.appendChild(this.wrapTableLinkCell(dbid, txt));\n\t\tvar td5 = document.createElement(\"td\");\n\t\ttd5.setAttribute(\"class\", \"terminus-db-created\");\n\t\tvar txt = (dbrec && dbrec['terminus:last_updated'] && dbrec['terminus:last_updated']['@value'] ? dbrec['terminus:last_updated']['@value'] : \"\");\n\t\ttd5.appendChild(this.wrapTableLinkCell(dbid, txt));\n\t\tvar td6 = document.createElement(\"td\");\n\t\ttd6.setAttribute(\"class\", \"db-delete\");\n\t\tif(this.deleteDBPermitted(dbid)){\n            if(this.ui.pluginAvailable(\"font-awesome\")){\n                var delbut = document.createElement('i');\n        \t\tdelbut.setAttribute(\"class\", \"terminus-db-list-del-icon fa fa-times-circle\");\n        \t}\n            else{\n                var delbut = document.createElement(\"button\");\n    \t\t\tdelbut.appendChild(document.createTextNode(\"Delete\"));\n    \t\t\tdelbut.setAttribute(\"class\", \"terminus-control-button terminus-delete-db-button\");\n            }\n\t\t\t// function to fix db in a closure\n\t\t\tvar delDB = function(db){ return function(){self.ui.deleteDatabase(db);}};\n\t\t\tdelbut.addEventListener(\"click\", delDB(dbid));\n\t\t\ttd6.appendChild(delbut);\n\t\t}\n\t\ttr.appendChild(td1);\n\t\ttr.appendChild(td2);\n\t\ttr.appendChild(td3);\n\t\ttr.appendChild(td4);\n\t\ttr.appendChild(td5);\n\t\ttr.appendChild(td6);\n\t\ttbody.appendChild(tr);\n\t}\n\tscd.appendChild(tbody);\n\tsec.appendChild(scd);\n\n\tif(this.ui.pluginAvailable(\"datatables\")){\n        var dt = new Datatables();\n\t\tvar tab = dt.draw(false, scd);\n\t}\n\treturn sec;\n}\n\nTerminusServerViewer.prototype.deleteDBPermitted = function(dbid){\n\tif(this.ui.client.connection.capabilitiesPermit(\"delete_database\", dbid)) return true;\n\treturn false;\n}\n\nmodule.exports = {TerminusServerViewer,TerminusServerController}\n","function TerminusURLLoader(ui, val){\n\tthis.ui = ui;\n\tthis.val = val;\n\tthis.url_input = false;\n\tthis.key_input = false;\n}\n\nTerminusURLLoader.prototype.getLabelDOM = function(){\n\treturn document.createTextNode(\"Connect\");\n}\n\nTerminusURLLoader.prototype.getFormFieldDOM = function(ip, fname, ltxt, pholder){\n\tvar sci = document.createElement(\"div\");\n\tsci.setAttribute(\"class\", \"terminus-form-horizontal terminus-control-group terminus-form-field-spacing terminus-form-field terminus-field-\"+fname);\n\tvar lab = document.createElement(\"span\");\n\tlab.setAttribute(\"class\", \"terminus-control-label terminus-form-label terminus-form-field-label terminus-label-\"+fname);\n\tlab.appendChild(document.createTextNode(ltxt))\n\tip.setAttribute(\"type\", \"text\");\n\tip.setAttribute(\"placeholder\", pholder);\n\tsci.appendChild(lab);\n\tsci.appendChild(ip);\n\treturn sci;\n}\n\nTerminusURLLoader.prototype.getAsDOM = function(){\n\tvar scd = document.createElement(\"div\");\n\tscd.setAttribute(\"class\", \"terminus-form terminus-url-loader\");\n\tvar stit = document.createElement(\"h3\");\n\tstit.setAttribute(\"class\", \"terminus-form-header terminus-connect-header terminus-module-head\");\n\tstit.appendChild(document.createTextNode(\"Connect To Terminus Server\"));\n\tscd.appendChild(stit);\n\tvar mfd = document.createElement('div');\n\tmfd.setAttribute('class', 'terminus-form-border');\n\tscd.appendChild(mfd);\n\tthis.url_input = document.createElement(\"input\");\n\tthis.url_input.setAttribute(\"class\", \"terminus-form-value terminus-form-url terminus-form-field-input terminus-input-text\");\n\tif(this.val){\n\t\tthis.url_input.value = this.val;\n\t}\n\tmfd.appendChild(this.getFormFieldDOM(this.url_input, \"connect\", \"URL\", \"Terminus DB URL\"));\n\tthis.key_input = document.createElement(\"input\");\n\tthis.key_input.setAttribute(\"class\", \"terminus-form-value terminus-value terminus-input-text\");\n\tmfd.appendChild(this.getFormFieldDOM(this.key_input, \"connect\", \"Key\", \"Server API Key\"));\n\tvar loadbuts = document.createElement(\"div\");\n\tloadbuts.setAttribute(\"class\", \"terminus-control-buttons\");\n\tvar loadbut = document.createElement(\"button\");\n\tloadbut.setAttribute(\"class\", \"terminus-control-button terminus-url-load terminus-btn\");\n\tloadbut.appendChild(document.createTextNode(\"Connect\"));\n\tvar self = this;\n\tloadbut.addEventListener(\"click\", function(){\n\t\tif(self.url_input.value){\n\t\t\tself.ui.load(self.url_input.value, self.key_input.value);\n\t\t}\n\t});\n\tloadbuts.appendChild(loadbut);\n\tmfd.appendChild(loadbuts);\n\treturn scd;\n}\n\n\nmodule.exports=TerminusURLLoader\n","const HTMLPropertyViewer = require('./PropertyViewer');\nconst RenderingMap = require('./RenderingMap');\n\nfunction ValueRenderer(dataframe, index, parent, options){\n\tthis.frame = dataframe;\n\tthis.index = index;\n\tthis.parent = parent;\n\tthis.options = this.setOptions(options);\n\tthis.originalValue = this.value();\n} \n\nValueRenderer.prototype.depth = function(){return (this.parent ? this.parent.depth() : false);};\nValueRenderer.prototype.property = function(){ return (this.parent ? this.parent.property() : false);};\nValueRenderer.prototype.subject = function(){ return (this.parent ? this.parent.subject() : false);};\nValueRenderer.prototype.subjectClass = function(){ return (this.parent ? this.parent.subjectClass() : false);};\nValueRenderer.prototype.type = function(){\treturn (this.frame ? this.frame.range : false);};\nValueRenderer.prototype.range = function(){\treturn (this.frame ? this.frame.range : false);};\nValueRenderer.prototype.value = function(){\treturn (this.frame ? this.frame.get() : false);};\nValueRenderer.prototype.isEntity = function(){\treturn (this.frame ? this.frame.isEntity() : false);};\nValueRenderer.prototype.currentViewer = function(){\treturn this.viewerType;}\n\nValueRenderer.prototype.copy = function(nf){\n\tvar nvr = new ValueRenderer(nf, false, this.parent, this.options);\n\tnvr.mode = this.mode;\n\tnvr.view = this.view;\n\treturn nvr;\n}\n \nValueRenderer.prototype.setFacet = function(facet){\n\tthis.facet = facet;\n\tthis.parent.redraw();\n}\n\nValueRenderer.prototype.parentFacetChange = function(pfacet){\n\tif(pfacet == \"page\") this.setFacet(\"page\");\n\tif(pfacet == \"multiline\") this.setFacet(\"line\");\n\tif(pfacet == \"line\") this.setFacet(\"inline\");\n\tif(pfacet == \"summary\") this.setFacet(\"icon\");\n}\n\nValueRenderer.prototype.getDefaultFacet = function(){\n\tif(this.parent.currentFacet() == \"page\" || this.parent.currentFacet() == \"multiline\"){\n\t\treturn \"line\";\n\t}\n\treturn \"inline\";\n}\n\nValueRenderer.prototype.getAvailableFacets = function(){\n\treturn Object.values(this.facets);\n}\n\nValueRenderer.prototype.getDefaultFacets = function(){\n\tvar defs = {\n\t\tpage: {\n\t\t\tlabel: \"Full Page\", value: \"page\", \n\t\t\tfeatures: [\"facet\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\", \"control\"], \n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"] \n\t\t},\n\t\tline: {\n\t\t\tlabel: \"Single Line\", value: \"line\",\n\t\t\tfeatures: [\"facet\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\", \"control\"], \n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"] \n\t\t},\n\t\tinline: {\n\t\t\tlabel: \"Inline\", value: \"inline\",\n\t\t\tfeatures: [\"facet\", \"type\", \"cardinality\", \"body\", \"status\", \"facet\", \"viewer\", \"control\"], \n\t\t\tcontrols: [\"delete\", \"clone\", \"add\", \"reset\", \"cancel\", \"update\", \"mode\", \"show\", \"hide\"] \n\t\t},\n\t\tlabel: {\n\t\t\tlabel: \"Label\", value: \"label\",\n\t\t\tfeatures: [\"facet\", \"status\", \"body\"],\n\t\t\tcontrols: []\n\t\t},\n\t\ticon: {\n\t\t\tlabel: \"Snippet\", value: \"icon\",\n\t\t\tfeatures: [\"facet\", \"summary\"],\n\t\t\tcontrols: []\n\t\t}\n\t}\n\treturn defs;\n}\n\nValueRenderer.prototype.currentFacet = function(){\n\treturn this.facet;\n}\n\nValueRenderer.prototype.setOptions = function(options){\n\treturn RenderingMap.decorateRenderer(options, this);\n}\n\nValueRenderer.prototype.hideDisabledControls = function(){\n\treturn this.hide_disabled_controls;\n}\n\nValueRenderer.prototype.setMode = function(mode){\n\tthis.mode = mode;\n\tthis.options.mode = mode;\n\tthis.viewerType = false;\n\tthis.redraw();\n}\n\nValueRenderer.prototype.setView = function(view){\n\tthis.view = view;\n\tthis.options.view = view;\n\tthis.redraw();\n}\n\nValueRenderer.prototype.getAPIURL = function(a, b){\n\tif(this.parent && this.parent.parent){\n\t\tif(client = this.parent.parent.getClient()){\n\t\t\tvar apiurl = client.dbURL() + a + \"/\" + b;\n\t\t\treturn apiurl;\n\t\t}\n\t}\n\treturn false;\n}\n\nValueRenderer.prototype.getClient = function(){\n\tif(this.parent && this.parent.parent){\n\t\treturn this.parent.parent.getClient();\n\t}\t\n\treturn false;\n}\n\nValueRenderer.prototype.getController = function(){\n\tif(this.parent && this.parent.parent){\n\t\treturn this.parent.parent.getController();\n\t}\t\n\treturn false;\n}\n\nValueRenderer.prototype.DBURL = function(){\n\tif(this.parent && this.parent.parent){\n\t\tif(client = this.parent.parent.getClient()){\n\t\t\treturn client.dbURL();\n\t\t}\n\t}\t\n\treturn false;\n}\n\nValueRenderer.prototype.getEntityReference = function(url, cls, entities, opts){\n\tif(this.parent && this.parent.parent){\n\t\tif(client = this.parent.parent.getClient()){\n\t\t\treturn client.getEntityReference(url, cls, entities, opts);\n\t\t}\n\t}\n}\n\nValueRenderer.prototype.badData = function(bd){\n\talert(\"bad data \" + bd);\n}\n\nValueRenderer.prototype.setNew = function(){\n\tthis.new_value = true;\n}\n\nValueRenderer.prototype.isNew = function(){\n\tif(this.new_value){\n\t\treturn true;\n\t}\n\treturn this.parent.isNew();\n}\n\n\nValueRenderer.prototype.isUpdated = function(){\n\tif(this.frame.get() != this.originalValue){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nValueRenderer.prototype.getSummary = function(){\n\tvar ret = { status: \"ok\" };\n\tif(this.isNew()) ret.status = \"new\";\n\telse if(this.isUpdated()) ret.status = \"updated\";\n\tvar val = this.frame.get();\n\tif(val){\n\t\tif(val.length && val.length > this.text_summary_length){\n\t\t\tret.long = val.substring(0, this.text_summary_length) + \"...\" + \" (\" + val.length + \" characters)\"; \t\n\t\t}\n\t\telse {\n\t\t\tret.long = val;\n\t\t}\n\t}\n\telse {\n\t\tret.long = \"empty\";\n\t}\n\treturn ret;\n}\n\nValueRenderer.prototype.cardControlAllows = function(action){\n\tif(this.parent.cframe.hasRestriction()){\n\t\tvar rest = this.parent.cframe.restriction;\n\t\tvar currentnum = this.parent.values.length;\n\t\tif(action == \"add\" || action == \"clone\"){\n\t\t\tif(rest.max && currentnum >= rest.max){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif(action == \"delete\" && (rest.min && currentnum <= rest.min)){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nValueRenderer.prototype.set = function(v){\n\tthis.frame.set(v);\n\tthis.viewer.redrawHeader();\n\tthis.parent.childUpdated();\n}\n\nValueRenderer.prototype.delete = function(){\n\tthis.parent.deletePropertyValue(this.value(), this.index);\n\tthis.parent.parent.redraw();\n}\n\nValueRenderer.prototype.load = function(link){\n\tthis.parent.load(link);\n}\n\nValueRenderer.prototype.hide = function(){\n\tthis.setView(\"hidden\");\n}\n\nValueRenderer.prototype.show = function(){\n\tthis.setView(\"full\");\n}\n\nValueRenderer.prototype.cancel = function(){\n\tthis.reset();\n\tthis.setMode(\"view\");\n}\n\nValueRenderer.prototype.save = function(){\n\tif(this.parent) {\n\t\tthis.parent.save();\n\t}\n}\n\nValueRenderer.prototype.reset = function(){\n\tthis.set(this.originalValue);\n\tthis.redraw();\t\n}\n\nValueRenderer.prototype.clone = function(){\n\tvar newb = this.parent.addPropertyValue(this.value());\n\tvar nrend = this.copy(newb);\n\tnrend.setNew();\n\tnrend.mode = \"edit\";\n\tnrend.index = this.parent.values.length;\n\tthis.parent.values.push(nrend);\n\tthis.parent.childUpdated();\n\tthis.parent.redraw();\n\tthis.parent.goToValue(this.parent.values.length-1);\n}\n\nValueRenderer.prototype.getViewerForValue = function(){\n\treturn new HTMLDataViewer(this);\n}\n\nValueRenderer.prototype.getFeaturesForFacet = function(facet){\n\treturn this.facets[facet].features.concat(this.facets[facet].controls);\n}\n \nValueRenderer.prototype.showFeature = function(which){\n\tif(this.features.indexOf(which) == -1 && this.controls.indexOf(which) == -1) {\n\t\treturn false;\n\t}\n\tvar cardcontrols = [\"delete\", \"clone\", \"add\"];\n\tif(cardcontrols.indexOf(which) != -1){\n\t\tif(!this.cardControlAllows(which)) return false;\n\t}\n\tvar updcontrols = [\"update\", \"reset\"];\n\tif(this.hideDisabledControls() && updcontrols.indexOf(which) != -1 ){\n\t\tif(!this.isUpdated()){\n\t\t\treturn false;\n\t\t}\n\t}\n\tif(which == 'hide' && this.view == \"hidden\") return false;\n\tif(which == 'show' && this.view != \"hidden\") return false;\n\tvar fets = this.getFeaturesForFacet(this.facet);\n\treturn (fets.indexOf(which) != -1);\n}\n\n\nValueRenderer.prototype.render = function(viewer){\n\tthis.viewer = (viewer ? viewer : this.getViewerForValue());\n\treturn this.viewer.render();\n} \n\nValueRenderer.prototype.extract = function(){\n\tvar val = this.value();\n\tif(val !== \"\" && val !== false && this.frame.isDatatypeProperty()){\n\t\tvar objlit = { \"@value\": this.value()}\n\t\t\n\t\t//var objlit = { data: this.value()}\n\t\tif(this.frame.isString()) objlit[\"@language\"] = this.frame.lang();\n\t\telse objlit[\"@type\"] = this.type();\n\t\treturn objlit;\n\t}\n\telse return val;\n} \n\nValueRenderer.prototype.getValueHeaderViewer = function(){\n\treturn new HTMLDataHeaderViewer();\n}\n\nValueRenderer.prototype.getDataValueViewer = function(){\n\tif(!this.viewerType) {\n\t\tthis.viewerType = this.getViewerForDataValue();\n\t}\n\treturn RenderingMap.getViewer(this.viewerType, this.viewerOptions);\t\t\n}\n\nValueRenderer.prototype.getAvailableViewers = function(){\n\tvar dt = this.frame.getTypeShorthand();\n\tif(!dt){\n\t\talert(\"here\");\n\t}\n\tvar ft = this.frame.ftype();\n\tif(this.mode == \"view\"){\n\t\treturn RenderingMap.getAvailableDataViewers(dt, ft);\t\t\n\t}\n\treturn RenderingMap.getAvailableDataEditors(dt, ft);\t\t\t\t\n}\n\nValueRenderer.prototype.setViewer = function(viewer){\n\tthis.viewerType = viewer;\n\tthis.redraw();\n}\n\nValueRenderer.prototype.getViewerForDataValue = function(){\n\tvar dt = this.frame.getTypeShorthand();\n\tvar ft = this.frame.ftype();\n\tif(this.mode == \"edit\"){\n\t\treturn RenderingMap.getEditorForDataFrame(dt, ft);\t\t\t\t\n\t}\n\treturn RenderingMap.getViewerForDataFrame(dt, ft);\t\t\n}\n\nValueRenderer.prototype.redraw = function(){\n\tthis.viewer.clear();\n\tthis.render(this.viewer);\n}\n\nmodule.exports=ValueRenderer","const TerminusUI = require('./TerminusUI');\nconst FrameHelper = require('./FrameHelper');\nconst RenderingMap = require('./client/RenderingMap');\n\nvar terminator = new TerminusUI(TerminusConfig);\nvar pconfig = {};\npconfig.buttons = {'client'   : document.getElementById(\"terminus-client-btn\"),\n\t'explorer' : document.getElementById(\"terminus-explorer-btn\")}\npconfig.controller \t= document.getElementById(\"terminus-control-panel\");\npconfig.messages = document.getElementById(\"terminus-user-messages\");\npconfig.plugins = document.getElementById(\"terminus-plugin-loader\");\npconfig.explorer = document.getElementById(\"terminus-explorer\");\npconfig.viewer = document.getElementById(\"terminus-content-viewer\");\nvar nlocation = (TerminusConfig && TerminusConfig.location) ? TerminusConfig.location : false;\nterminator.draw(pconfig, nlocation);\n/* 11092019 var cssloader = document.getElementById(\"terminus-css-loader\");\ncssloader.addEventListener(\"change\", function(){\n\tterminator.piman.loadPageCSS(this.value);\n}); */\nfunction showPanel(mode){\n\ttoggleHeaders(mode, document.getElementById(\"terminus-content-viewer\"));\n}\n\nmodule.exports={TerminusUI:TerminusUI,\n                FrameHelper:FrameHelper,\n                RenderingMap:RenderingMap}","const FrameHelper = require('../FrameHelper');\n\nfunction TerminusPluginManager(){\n\tthis.preloaded = [];\n\tthis.loaded = [];\n\tthis.loading = [];\n\tthis.precluded = [];\n\tthis.plugins = {};\n\tthis.plugins[\"font-awesome\"] = {\n\t\tlabel: \"Font Awesome\",\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0-11/css/all.css\"]\n\t};\n\tthis.plugins[\"quill\"] = {\n\t\tlabel: \"Quill\",\n\t\tjs: [\"https://cdn.quilljs.com/1.3.6/quill.min.js\"],\n\t\tcss: [\"https://cdn.quilljs.com/1.3.6/quill.snow.css\"],\n\t\tplugin: \"quill.terminus.js\",\n\t};\n\tthis.plugins[\"codemirror\"] = {\n\t\tlabel : \"Code Mirror\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/xml/xml.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/css/css.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/turtle/turtle.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/mode/javascript/javascript.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/anyword-hint.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/runmode/runmode.js\",\n\t\t  \t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/http/http.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/closebrackets.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/edit/matchbrackets.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/addon/display/placeholder.js\"\n\t  ],\n\t\tcss: [\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/codemirror.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.2/addon/hint/show-hint.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/neo.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/erlang-dark.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/theme/eclipse.css\"\n\t\t]\n\t};\n\tthis.plugins[\"jquery\"] = {\n\t\tlabel: \"jQuery\",\n\t\tjs: [\"https://code.jquery.com/jquery-2.2.4.min.js\"]\n\t};\n\tthis.plugins[\"jqueryui\"] = {\n\t\tlabel: \"jQuery UI\",\n\t\tcss: [\"https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css\"],\n\t\tjs: [\"https://code.jquery.com/ui/1.12.0/jquery-ui.js\"],\n\t\trequires: ['jquery']\n\t};\n\tthis.plugins[\"datatables\"] = {\n\t\tlabel: \"Data Tables\",\n\t\tjs: [\"https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js\"],\n\t\tcss: [\"https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css\"],\n\t\trequires: ['jquery']\n\t};\n\t/*this.plugins[\"prettify\"] = {\n\t\tlabel: \"Prettify\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.css\"],\n\t\trequires: ['jquery']\n\t};*/\n\tthis.plugins[\"gmaps\"] = {\n\t\tlabel: \"Google Maps\",\n\t\tjs: [\"https://maps.googleapis.com/maps/api/js\"],\n\t\tplugin: \"gmaps.terminus.js\"\n\t};\n\tthis.plugins[\"d3\"] = {\n\t\tlabel: \"d3\",\n\t\tjs: [\"https://code.jquery.com/jquery-2.2.4.min.js\"],\n\t\trequires: ['jquery']\n\t};\n\tthis.plugins[\"select2\"] = {\n\t\tlabel: \"Select 2\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css\"],\n\t\tplugin: \"select2.terminus.js\",\n\t\trequires: ['jquery']\n\t};\n\tthis.plugins[\"jsoneditor\"] = {\n\t\tlabel: \"JSON Editor\",\n\t\tjs: [\"plugins/libs/jsoneditor.min.js\"],\n\t\tcss: [\"plugins/libs/jsoneditor.min.css\"],\n\t\tplugin: \"jsoneditor.terminus.js\"\n\t};\n\t/*this.plugins[\"bootstrap\"] = {\n\t\tlabel: \"Bootstrap\",\n\t\tjs: [\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"],\n\t\tcss: [\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap.min.css\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap-responsive.min.css\"]\n\t};\n\tthis.plugins[\"flot\"] = {\n\t\tlabel: \"Flot\",\n\t\tjs: [\"https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.min.js\",\n\t\t\t\"https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.resize.min.js\"],\n\t\trequires: [\"jquery\"]\n\t};*/\n}\n\nTerminusPluginManager.prototype.setPluginOptions = function(opts){\n\tfor(var p in opts){\n\t\tif(!this.plugins[p]) continue;\n\t\tfor(var k in opts[p]){\n\t\t\tthis.plugins[p][k] = opts[p][k];\n\t\t}\n\t}\n}\n\nTerminusPluginManager.prototype.init = function(opts, then){\n\tif(opts) this.setPluginOptions(opts);\n\tthis.calculatePreloaded();\n\tvar toload = this.calculateRequiredInitPlugins(opts);\n\tif(toload && toload[0].length) {\n\t\tif(toload[1].length){\n\t\t\tvar self = this;\n\t\t\tvar nthen = function(){\n\t\t\t\tself.loadPlugins(toload[1], then);\n\t\t\t}\n\t\t\tthis.loadPlugins(toload[0], nthen);\n\t\t}\n\t\telse {\n\t\t\tthis.loadPlugins(toload[0], then);\n\t\t}\n\t}\n\telse if(then){\n\t\tthen();\n\t}\n}\n\nTerminusPluginManager.prototype.calculateRequiredInitPlugins = function(opts){\n\tif(opts){\n\t\tvar pins = [];\n\t\tfor(var pid in opts){\n\t\t\tif(opts[pid] && pins.indexOf(pid) == -1){\n\t\t\t\tif(typeof opts[pid] != \"object\" && opts[pid]){\n\t\t\t\t\tpins.push(pid);\n\t\t\t\t}\n\t\t\t\telse if(typeof opts[pid] == \"object\"){\n\t\t\t\t\tif(!(typeof opts[pid].loaded != \"undefined\" && !opts[pid].loaded)){\n\t\t\t\t\t\tpins.push(pid);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tvar pins = this.getDefaultPlugins();\n\t}\n\tvar needed_pins = [];\n\tfor(var i = 0; i<pins.length; i++){\n\t\tif(this.loaded.indexOf(pins[i]) == -1 && this.preloaded.indexOf(pins[i]) == -1 ){\n\t\t\tneeded_pins.push(pins[i])\n\t\t}\n\t}\n\tvar loading_order = [[], []];\n\tfor(var i = 0; i<needed_pins.length; i++){\n\t\tif(this.plugins[needed_pins[i]].requires && this.plugins[needed_pins[i]].requires.length){\n\t\t\tloading_order[1].push(needed_pins[i]);\n\t\t}\n\t\telse {\n\t\t\tloading_order[0].push(needed_pins[i]);\n\t\t}\n\t}\n\treturn loading_order;\n}\n\nTerminusPluginManager.prototype.getAvailablePlugins = function(){\n\treturn this.plugins;\n}\n\nTerminusPluginManager.prototype.calculatePreloaded = function(){\n\tfor(var pl in this.plugins){\n\t\tif(this.pluginAvailable(pl)){\n\t\t\tthis.preloaded.push(pl);\n\t\t}\n\t}\n}\n\nTerminusPluginManager.prototype.pluginAvailable = function(plugin, version_check){\n\tif(typeof this.plugins[plugin] == \"object\"){\n\t\tvar pluginmeta = this.plugins[plugin];\n\t\tif(pluginmeta.requires && pluginmeta.requires.length){\n\t\t\tfor(var i =0 ; i < pluginmeta.requires.length; i++){\n\t\t\t\tif(!this.pluginAvailable(pluginmeta.requires[i], version_check)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar required_version = (pluginmeta.version ? pluginmeta.version : false);\n\t\tswitch(plugin){\n\t\t\tcase \"jquery\": {\n\t\t\t\tif(typeof jQuery == \"undefined\") return false;\n\t\t\t\tif(version_check && required_version){}\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"jqueryui\": {\n\t\t\t\tif(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.slider )) return true;\n\t\t\t\treturn false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"quill\": {\n\t\t\t\tif(typeof Quill == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"jsoneditor\": {\n\t\t\t\tif(typeof JSONEditor == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"codemirror\": {\n\t\t\t\tif(typeof CodeMirror == \"undefined\") return false;\n\t\t\t\treturn this.plugins[plugin];  // sent plugin config with darkmode true/ false\n\t\t\t}\n\t\t\tcase \"font-awesome\": {\n\t\t\t\t//if(typeof CodeMirror != \"undefined\") return true;\n\t\t\t\treturn this.fontAwesomeCheck();\n\t\t\t}\n\t\t\tcase \"datatables\": {\n\t\t\t\t if(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.dataTable)) return true;\n\t\t\t\t return false;\n\t\t\t}\n\t\t\tcase \"select2\": {\n\t\t\t\t if(typeof jQuery != \"undefined\" && jQuery.isFunction( jQuery.fn.select2 )) return true;\n\t\t\t\t return false;\n\t\t\t}\n\t\t\tcase \"gmaps\": {\n\t\t\t\tif(typeof google == \"undefined\" || typeof google.maps == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase \"openlayers\": {\n\t\t\t\tif(typeof ol == \"undefined\" || typeof ol.Map == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcase \"d3\": {\n\t\t\t\tif(typeof d3 == \"undefined\") return false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tconsole.log(new Error(plugin + \" is not a supported plugin ID\"));\n\t}\n\treturn false;\n};\n\nTerminusPluginManager.prototype.fontAwesomeCheck = function(){\n\tvar span = document.createElement('span');\n\tspan.className = 'fa';\n\tspan.style.display = 'none';\n\tdocument.body.insertBefore(span, document.body.firstChild);\n\tfunction css(element, property) {\n\t  return window.getComputedStyle(element, null).getPropertyValue(property);\n\t}\n\tvar loaded = false;\n\tvar fontAwsm = css(span, 'font-family');\n\tif (fontAwsm.replace(/\"/g, \"\") == 'Font Awesome 5 Free') { // remove double quotes\n\t\tloaded = true;\n\t}\n\tdocument.body.removeChild(span);\n\treturn loaded;\n}\n\nTerminusPluginManager.prototype.getDefaultPlugins = function(){\n\tvar defplugs = [\"font-awesome\"];\n\treturn defplugs;\n}\n\nTerminusPluginManager.prototype.loadPlugins = function(plugins, then){\n\tvar ticker = plugins.length;\n\tvar cback = function(){\n\t\tif(--ticker <= 1 && then){\n\t\t\tthen();\n\t\t}\n\t};\n\tfor(var i = 0; i < plugins.length; i++){\n\t\tthis.loadPlugin(plugins[i], cback);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPlugin = function(plugin, then){\n\tvar pug = this.plugins[plugin];\n\tif(pug.css){\n\t\tfor(var i=0; i<pug.css.length; i++){\n\t\t\tvar cssid = plugin + \"_css_\" + i;\n\t\t\tFrameHelper.loadDynamicCSS(cssid, pug.css[i]);\n\t\t}\n\t}\n\tvar scripts = (pug.js ? pug.js : []);\n\tif(plugin == \"gmaps\" && pug.key){\n\t\tscripts[0] += \"?key=\" + pug.key;\n\t}\n\tif(pug.plugin){\n\t\tscripts.push(\"plugins/\" + pug.plugin);\n\t}\n\tif(plugin == \"codemirror\"){\n\t\tvar cm = scripts[0];\n\t\tvar sid = plugin + \"_js_\" + (scripts.length -1);\n\t\tscripts.splice(0, 1);\n\t\tvar self = this;\n\t\tvar cback = function(){\n\t\t\tself.loadPluginScripts(plugin, scripts, then);\n\t\t}\n\t\tFrameHelper.loadDynamicScript(sid, cm, cback);\n\t}\n\telse {\n\t\tthis.loadPluginScripts(plugin, scripts, then);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPluginScripts = function(plugin, scripts, then){\n\tvar ticker = scripts.length - 1;\n\tvar self = this;\n\tvar cback = function(){\n\t\tif(ticker == 0) {\n\t\t\tif(self.loaded.indexOf(plugin) == -1){\n\t\t\t\tself.loaded.push(plugin);\n\t\t\t}\n\t\t\tif(self.loading.indexOf(plugin) != -1){\n\t\t\t\tself.loading.splice(self.loading.indexOf(plugin), 1);\n\t\t\t}\n\t\t\tthen();\n\t\t}\n\t\tticker--;\n\t};\n\tif(scripts.length == 0){\n\t\tthis.loaded.push(plugin);\n\t}\n\telse {\n\t\tthis.loading.push(plugin);\n\t}\n\tfor(var i = 0; i<scripts.length; i++){\n\t\tvar sid = plugin + \"_js_\" + i;\n\t\tFrameHelper.loadDynamicScript(sid, scripts[i], cback);\n\t}\n}\n\nTerminusPluginManager.prototype.loadPageCSS = function(css){\n\tcssfid = \"terminus_client_css\";\n\tvar cssdom = document.getElementById(cssfid);\n\tif(cssdom){\n\t\tcssdom.parentNode.removeChild(cssdom);\n\t}\n\tif(css){\n\t\tcssurl = \"css/\" + css + \".css\";\n\t\tFrameHelper.loadDynamicCSS(cssfid, cssurl);\n\t}\n}\n\nTerminusPluginManager.prototype.pluginLoadable = function(pid){\n\treturn (this.precluded.indexOf(pid) !== -1 || this.pluginLoadedOrLoading(pid));\n}\n\nTerminusPluginManager.prototype.pluginLoadedOrLoading = function(pid){\n\tif(this.loaded.indexOf(pid) != -1) return true;\n\tif(this.preloaded.indexOf(pid) != -1) return true;\n\tif(this.loading.indexOf(pid) != -1) return true;\n\treturn false;\n}\n\nTerminusPluginManager.prototype.disabled = function(pid, obj){\n\tif(this.precluded.indexOf(pid) != -1) return true;\n\tif(obj.requires){\n\t\tfor(var i = 0; i<obj.requires.length; i++){\n\t\t\tif(!this.pluginLoadedOrLoading(obj.requires[i])) return true;\n\t\t}\n\t}\n\treturn false;\n}\n\nTerminusPluginManager.prototype.getPluginDOM = function(plugid, obj, ui){\n\tvar a = document.createElement(\"a\");\n\tvar cl = document.createElement(\"span\");\n\ta.appendChild(cl);\n\tcl.setAttribute(\"class\", \"terminus-plugin-control\");\n\tvar cbox = document.createElement(\"input\");\n\tcbox.id = \"terminus-plugin-control-\" + plugid;\n\tcbox.type = \"checkbox\";\n\tif(this.preloaded.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t\tcbox.disabled = true;\n\t}\n\telse if(this.loaded.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t}\n\telse if(this.loading.indexOf(plugid) != -1){\n\t\tcbox.checked = true;\n\t}\n\telse if(this.disabled(plugid, obj)){\n\t\tcbox.disabled = true;\n\t}\n\tvar clab = document.createElement(\"label\");\n\tclab.setAttribute(\"class\", \"terminus-plugin-label terminus-pointer\");\n\tclab.setAttribute(\"for\", cbox.id);\n\tclab.appendChild(document.createTextNode(obj.label));\n\tcl.appendChild(clab);\n\tcl.appendChild(cbox);\n\tvar self = this;\n\tcbox.addEventListener(\"change\", function(){\n\t\tself.togglePlugin(plugid, ui);\n\t});\n\treturn a;\n}\n\nTerminusPluginManager.prototype.togglePlugin = function(plugid, ui){\n\tif(this.loaded.indexOf(plugid) == -1){\n\t\tvar then = function(){\n\t\t\tui.redraw();\n\t\t}\n\t\tthis.loadPlugin(plugid, then);\n\t}\n\telse {\n\t\tthis.unloadPlugin(plugid);\n\t}\n\tFrameHelper.removeChildren(ui.plugins);\n\tui.drawPlugins();\n}\n\nTerminusPluginManager.prototype.unloadPlugin = function(plugid){\n\tif(!this.plugins[plugid] || this.loaded.indexOf(plugid) == -1) {\n\t\tconsole.log(new Error(plugid + \" plugin unload request when it is not loaded\"));\n\t\treturn false;\n\t}\n\tvar pug = this.plugins[plugid];\n\tvar num = (pug.js) ? pug.js.length : 0;\n\tif(pug.plugin) num++;\n\tfor(var i=0; i< num; i++){\n\t\tvar cssfid = plugid + \"_js_\" + i;\n\t\tvar cssdom = document.getElementById(cssfid);\n\t\tif(cssdom){\n\t\t\tcssdom.parentNode.removeChild(cssdom);\n\t\t}\n\t}\n\tnum = (pug.css ? pug.css.length : 0);\n\tfor(var i=0; i< num; i++){\n\t\tvar cssfid = plugid + \"_css_\" + i;\n\t\tvar cssdom = document.getElementById(cssfid);\n\t\tif(cssdom){\n\t\t\tcssdom.parentNode.removeChild(cssdom);\n\t\t}\n\t}\n\tthis.loaded.splice(this.loaded.indexOf(plugid), 1);\n}\n\nTerminusPluginManager.prototype.getAsDOM = function(ui){\n\tvar dm = document.createElement(\"span\");\n\tdm.setAttribute(\"class\", \"terminus-plugin-manager\");\n\tvar clh = document.createElement(\"span\");\n\tclh.setAttribute(\"class\", \"terminus-plugin-control-header terminus-plugin-nav terminus-pointer\");\n\tclh.appendChild(document.createTextNode(\"Plugins\"));\n\tdm.appendChild(clh);\n\tvar a = document.createElement('a');\n\tthis.showPlugins(a, ui);\n\tclh.appendChild(a);\n\ta.style.display = 'none';\n\tclh.addEventListener('click', function(){\n\t\tif(a.style.display == 'none')\n\t\t\ta.style.display = 'block';\n\t\telse a.style.display = 'none';\n\t})\n\treturn dm;\n}\n\nTerminusPluginManager.prototype.showPlugins = function(a, ui){\n\ta.setAttribute('style', 'background-color: #111;');\n\tfor(var pid in this.plugins){\n\t\ta.appendChild(this.getPluginDOM(pid, this.plugins[pid], ui));\n\t}\n}\n\nmodule.exports=TerminusPluginManager\n","function Codemirror(text, format, config){\n  this.textdom = text;\n  this.mode = format;\n  this.darkMode = config.darkMode;\n  if(this.jsonldCheck(format)) this.mode = 'javascript';\n}\n\n/*\ntxtar    : editor is attached to textar\nmode     : format for highlighting, ex: json, html etc.\neditable : readOnly false/ nocursor is special value in code editor to set readonly true */\nCodemirror.prototype.colorizeTextArea = function(mode){\n  //initize auto complete\n  /*CodeMirror.commands.autocomplete = function(cm) {\n    cm.showHint({hint: CodeMirror.hint.anyword});\n  }*/\n\n  // initialise code editor on text area\n  var editor = CodeMirror.fromTextArea(this.textdom, {\n    mode                : this.mode,\n    firstLineNumber     : 1,\n    lineNumbers         : true,\n    styleActiveLine     : true,\n    lineWrapping        : true,\n    smartIndent         : true,\n    indentWithTabs      : true,\n    newlineAndIndent    : true,\n    autoCloseBrackets   : true,\n    matchBrackets       : {afterCursor: true},\n    extraKeys           : {\"Ctrl-F\": \"find\", \"Tab\": \"autocomplete\" },\n    refresh             : true\n   });\n\n   this.setCodemirrorSize(editor, mode);\n   editor.defaultCharWidth('20px');\n   if(this.darkMode) editor.setOption(\"theme\", 'erlang-dark');\n   else editor.setOption(\"theme\", 'neo');\n\n   return editor;\n} // colorizeTextArea()\n\n/*\n  set editor size according to screens\n  editor : code mirror editor Object\n  mode   : editor being viewed from schema/ doc/ query page*/\nCodemirror.prototype.setCodemirrorSize = function(editor, mode){\n  switch(mode){\n    case 'query':\n      editor.setSize('', '300');\n    break;\n    case 'schema':\n      editor.setSize('1200', '1550');\n    break;\n    case 'document':\n     editor.setSize('1000', '250');\n    break;\n  } // switch(mode)\n} // setCodemirrorSize()\n\n// updateTextArea(): highlights new changes on editor\nCodemirror.prototype.updateTextArea = function(editor){\n  editor.save();\n  setTimeout(function() {\n      editor.refresh();\n  },1);\n  // save changes of code mirror editor\n  editor.on('change', function(){\n    editor.save();\n  });\n} //updateTextArea()\n\n/*\ncolorizePre() to colorise pre tags (read only mode)\ntext (string)    : The document to run through the highlighter.\nmode (mode spec) : format to highlight color\noutput (DOM node): The tokens will be converted to spans as in an editor,\n                   and inserted into the node (through innerHTML).*/\nCodemirror.prototype.colorizePre = function(){\n  CodeMirror.runMode(this.textdom.innerText, this.mode, this.textdom);\n  if(this.darkMode)\n    var theme = 'cm-s-erlang-dark';\n  else var theme = 'cm-s-neo';\n  this.textdom.setAttribute('class', 'CodeMirror CodeMirror-wrap ' + theme + ' terminus-wrap-text terminus-wrapper-height ');\n  return this.textdom;\n} // colorizePre()\n\nCodemirror.prototype.jsonldCheck = function(format){\n  if(format == 'jsonld') return true;\n}\n\nmodule.exports=Codemirror\n","const FrameHelper = require('../FrameHelper');\nconst WOQLQuery = require('../query/WOQLQuery');\nconst WOQLResult = require('../query/WOQLResult');\nconst WOQLResultsViewer = require('../query/WOQLResultsViewer');\nconst UTILS= require('../Utils')\n\nfunction Datatables(){}\n\nDatatables.prototype.convertToDatatable = function(tab){\n    var table = jQuery(tab).DataTable({\n         searching : false,\n         pageLength: 25,\n         lengthMenu: [10, 25, 50, 75, 100],\n         paging    : true,\n         select    : true,\n         columnDefs:[{targets:'_all',className:\"truncate\"}],\n         createdRow: function(row){\n                            var td = $(row).find(\".truncate\");\n                            td.attr(\"title\", td.html());},\n         dom       : 'lrtip'\n    }); //jQuery(tab)\n\n    //styling\n    tab.setAttribute('class'      , 'stripe dataTable terminus-db-size terminus-db-border');\n    tab.setAttribute('cellpadding', '1');\n    tab.setAttribute('cellspacing', '1');\n    tab.setAttribute('border'     , '0');\n    return tab;\n}\n\n/*\n    dcb: datatable drawCallBack reference\n    ui: terminus ui reference\n    dt: datatable reference\n    query: new woqlquery with current pagination changes\n    pageInfo: current drawCallBack page change info\n    resultDOM: result dom on veiwer page\n*/\nDatatables.prototype.executeQuery = function(dcb, ui, dt, query, pageInfo, resultDOM){\n    var self = this;\n    dcb.wquery.execute(query)\n      .then(function(result){\n          if(true || !self.result){\n              self.result = new WOQLResultsViewer(ui, result, null, pageInfo);\n          }\n          var rtab = self.result.getTable(result.bindings);\n          if(rtab){\n              self.getDataFromServer(rtab, pageInfo, ui, resultDOM);\n          }\n      })\n      .catch(function(err){\n          console.error(err);\n          self.ui.showError(err);\n      });\n}\n\n/* get query string based on datatable pagination and current query */\nDatatables.prototype.getQueryOnPagination = function(wq, settings){\n    switch(settings.query){\n        case 'Show_All_Documents':\n            return wq.getAllDocumentQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Data':\n            return wq.getEverythingQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Schema_Elements':\n            return wq.getElementMetaDataQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_Document_Classes':\n            return wq.getClassMetaDataQuery(wq.getSubclassQueryPattern(\"Class\", \"dcog/'Document'\")\n    \t\t\t\t\t\t\t\t\t\t  + \", not(\" + wq.getAbstractQueryPattern(\"Class\") + \")\",\n                                                 settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Properties':\n            return wq.getPropertyListQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_All_Classes':\n            return wq.getClassMetaDataQuery(null, settings.pageLength, settings.start);\n        break;\n        case 'Show_Data_Class':\n            return  wq.getDataOfChosenClassQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        case 'Show_Property_Class':\n            return wq.getDataOfChosenPropertyQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        case 'Show_Document_Info_by_Id':\n            return wq.getDocumentQuery(settings.chosenValue, settings.pageLength, settings.start);\n        break;\n        default:\n            console.log('invalid woql option passed');\n        break;\n\n    }\n}\n\n/*\n    dcb: datatable drawCallBack reference\n    ui: terminus ui reference\n    dt: datatable reference\n    pageInfo: current drawCallBack page change info\n*/\nDatatables.prototype.generateNewQueryOnPageChange = function(dcb, ui, dt, pageInfo){\n    dcb.wquery = new WOQLQuery(ui.client, null);\n    UTILS.deleteStylizedEditor(ui, pageInfo.qTextDom);\n    var query = dt.getQueryOnPagination(dcb.wquery, pageInfo)\n    pageInfo.qTextDom.value = query;\n    UTILS.stylizeEditor(ui, pageInfo.qTextDom);\n    return query;\n}\n\n/*\n    dt: Datatable reference\n    len : current number of records to display\n*/\nDatatables.prototype.getCallbackSettings = function(dt, len){\n    var pageInfo = {};\n    pageInfo.pageLength = len;\n    pageInfo.start      = 0;\n    pageInfo.qTextDom   = dt.qTextDom;\n    pageInfo.query      = dt.query;\n    pageInfo.chosenValue = dt.chosenValue;\n    return pageInfo;\n}\n\n/*\n    tab: datatable table dom\n    settings : settings from woql txt generator\n    resultDOM: result dom of viewer\n*/\nDatatables.prototype.setUp = function(tab, settings, resultDOM){\n    // delete previous datatable\n    FrameHelper.removeChildren(this.dtdom);\n    this.dtdom = document.createElement('div');\n    this.dtdom.appendChild(tab);\n    resultDOM.appendChild(this.dtdom);\n    // saving query text box dom to change limit value on change of datatable page length\n    this.qTextDom = settings.qTextDom;\n    this.query = settings.query;\n    this.chosenValue = settings.chosenValue;\n}\n\nDatatables.prototype.getDataFromServer = function(tab, settings, ui, resultDOM){\n    var dt = this;\n    this.setUp(tab, settings, resultDOM);\n    // initialize datatables\n    var table = jQuery(tab).DataTable({\n         searching   : false,\n         pageLength  : settings.pageLength,\n         lengthMenu  : [5, 10, 25, 50, 75, 100],\n         paging      : true,\n         select      : true,\n         columnDefs  :[{targets:'_all',className:\"truncate\"}],\n         createdRow  : function(row){\n                            var td = $(row).find(\".truncate\");\n                            td.attr(\"title\", td.html());},\n         dom         : 'lrtip',\n         drawCallback: function(settings) {\n                             // on change of page length\n                             $(this).on( 'length.dt', function (e, settings, len){\n                                  var pageInfo = dt.getCallbackSettings(dt, len);\n                                  var query = dt.generateNewQueryOnPageChange(this, ui, dt, pageInfo);\n                                  return dt.executeQuery(this, ui, dt, query, pageInfo, resultDOM);\n                             });\n\n        }\n    }); //jQuery(tab)\n\n    //styling\n    tab.setAttribute('class'      , 'stripe dataTable');\n    tab.setAttribute('cellpadding', '1');\n    tab.setAttribute('cellspacing', '1');\n    tab.setAttribute('border'     , '0');\n\n    return tab;\n}\n\n/*\nserverside: true or false\n*/\nDatatables.prototype.draw = function(serverside, tab, settings, ui, resultDOM){\n    if(serverside)\n        return(this.getDataFromServer(tab, settings, ui, resultDOM));\n    else return(this.convertToDatatable(tab));\n}\n\nmodule.exports=Datatables\n","const WOQLQuery = require('./WOQLQuery');\nconst WOQLTimePicker = require('./WOQLTimePicker');\n\nfunction WOQLGraphBrowserGenerator(tq, qman, ui){\n\tthis.query = tq;\n\tthis.wquery = qman.wquery;\n\t//this.filter = new WOQLQueryFilter(this);\n\tthis.slider = new WOQLTimePicker();\n}\n\nWOQLGraphBrowserGenerator.prototype.getAsDOM = function(q){\n\tvar qbox = document.createElement(\"div\");\n\tqbox.setAttribute(\"class\", \"terminus-query-textbox-input\");\n\tqbox.appendChild(document.createTextNode(\"afsdfa\"));\n\tqbox.appendChild(this.slider.getSliderDOM());\n\treturn qbox;\n}\n\n\nfunction DCOGBrowser(controller, model, config){\n\tthis.myowner = controller;\n\tthis.model = model;\n\tthis.config = config;\n\tthis.default_viewport = (config && config.view ? config.view : \"graph\");\n\tthis.current_viewport = false;\n\n\t//internal state\n\tthis.viewports = {};\n\tthis.viewportDOMs = {};\n\tthis.browserid = randomString(8);\n\tthis.query_timeslice = false;\n\tthis.current_result = false;\n\tthis.focus_node = false;//(config && config.focus_node ? config.focus_node : \"https://datachemist.net/ipg/candidate/osoba_ipg11704456\");\n\tthis.show_filter = false;\n\t//this.relationships = model.mgraphs['main'].elements.relationships;\n\t//this.entities = model.mgraphs['main'].elements.entities;\n\t\t\n\t//this.setUpIPGSpecials();\n\t\n\tthis.entity_count = false;\n\n\tthis.config.default_display = {\n\t\ticon: \"fas fa-question\",\n\t\ticon_unicode: \"\\uf128\",\n\t\tcolor: [255,125,125],\n\t\tforward: \"Unknown\",\n\t\tbackward: \"Unknown\",\n\t\ttext: \"Unknown\"\n\t};\n}\n\n\nDCOGBrowser.prototype.init = function(){\n\tthis.filter = new DCOGQueryFilter(this, this.config, this.model);\n\tthis.slider = new DCOGTimePicker(this, this.config);\n\t//this.viewports['graph'] = new DCOGGVis(this, this.config);\n\t//this.viewports['table'] = new DCOGTable(this, this.config);\n\t//this.viewports['map'] = new DCOGMap(this, this.config);\n\t//this.viewports['api'] = new DCOGAPIView(this, this.config);\n\t//this.viewports['timeline'] = new DCOGTimeline(this, this.config);\n};\n\nDCOGBrowser.prototype.getViewportAsDOM = function(){\n\tvar vpdom = document.createElement(\"div\");\n\tvpdom.setAttribute(\"class\", \"dcog-viewport\");\n\tfor(var k in this.viewports){\n\t\tif(typeof this.viewportDOMs[k] == \"undefined\"){\n\t\t\tthis.viewportDOMs[k] = this.viewports[k].getAsDOM();\n\t\t}\n\t\tvpdom.appendChild(this.viewportDOMs[k]);\n\t}\n\treturn vpdom;\n}\n\nDCOGBrowser.prototype.newQuery = function(query, success, error){\n\tquery = (query ? query : this.getQuery());\n\tvar self = this;\n\tvar busy = this.setBusy(\"Fetching Results from Data Chemist Server\");\n\tvar handle = function(data){\n\t\tself.clearBusy(busy);\n\t\tself.current_result = new DCOGQueryResult(data, query);\n\t\tif(self.current_result.containsData()){\n\t\t\tself.setViewportData(self.current_result);\n\t\t\tif(self.focus_node){\n\t\t\t\tvar node = self.current_result.getNodeOrFringe(query.focus_node);\n\t\t\t}\n\t\t\telse if(query.from_node){\n\t\t\t\tvar node = self.current_result.getNodeOrFringe(query.from_node);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tself.entity_count = data.nodeCount;\n\t\t\t\tself.myowner.fillInfoBoxes();\n\t\t\t}\n\t\t\tif(node){\n\t\t\t\tself.nodeSelected(node);\n\t\t\t}\n\t\t\tself.rebuildController();\t\t\t\n\t\t}\n\t\telse {\n\t\t\tself.tellUser(\"No results returned\", \"warning\");\n\t\t}\n\t\tif(typeof success == \"function\") {\n\t\t\tsuccess(self.current_result);\n\t\t}\n\t};\n\tvar ehandle = function(a){\n\t\tvar msg = {title: \"Results Overload\", body: \"Your query was terminated because it would have returned too many records - please reduce the depth of your search or add extra constraints and try again\"};\n\t\tself.tellUser(msg, \"error\");\n\t\tself.clearBusy(busy);\n\t}\n\tthis.untell();\n\tthis.model.client.query(query, handle, ehandle);\n}\n\nDCOGBrowser.prototype.moreResults = function(nfocus, success){\n\tvar busy = this.setBusy(\"Fetching Results from Data Chemist Server\");\n\tvar ehandle = function(a){\n\t\tvar msg = {title: \"Results Overload\", body: \"Your query was terminated because it would have returned too many records - please reduce the depth of your search or add extra constraints and try again\"};\n\t\tself.tellUser(msg, \"error\");\n\t\tself.clearBusy(busy);\n\t}\n\tthis.focus_node = nfocus;\n\tvar self = this;\n\tvar handle = function(data){\n\t\tself.clearBusy(busy);\n\t\tself.current_result.addMoreResults(data, self.getQuery());\n\t\tself.updateViewportData(self.current_result);\n\t\tself.rebuildController();\n\t\tif(typeof success == \"function\"){\n\t\t\tsuccess(self.current_result);\n\t\t}\n\t};\n\tthis.untell();\n\tthis.model.client.query(this.getQuery(), handle, ehandle);\n}\n\nDCOGBrowser.prototype.setBusy = function(msg){\n\tvar busy = showBusyOverlay(this.myowner.insert_patterns.browser, msg);\n\tthis.busy = busy;\n\treturn busy;\n}\n\nDCOGBrowser.prototype.getQuery = function(dqr){\n\tvar qstruct = {};\n\tif(this.focus_node){\n\t\tqstruct.focus_node = this.focus_node;\n\t}\n\telse if(this.from_node && this.to_node){\n\t\tqstruct.source_node = this.from_node;\n\t\tqstruct.target_node = this.to_node;\n\t}\n\tif(this.filter && this.filter.current_relationships){\n\t\tqstruct.relationships = this.filter.current_relationships;\n\t}\n\tif(this.filter && this.filter.current_depth){\n\t\tqstruct.max_path_length = this.filter.current_depth;\n\t}\n\tif(this.filter && this.filter.current_threshold && this.filter.current_threshold > 0 && qstruct.relationships.indexOf(\"share\") != -1){\n\t\tqstruct.filters = {shareholding_threshold: this.filter.current_threshold};\n\t}\n\tif(this.slider && this.slider.server_side && this.slider.timeslice){\n\t\tthis.query_timeslice = this.slider.timeslice;\n\t}\n\telse {\n\t\tthis.query_timeslice = false;\n\t}\n\tif(this.query_timeslice){\n\t\tqstruct.date = this.query_timeslice;\n\t}\n\treturn qstruct;\n}\n\nDCOGBrowser.prototype.setView = function(which){\n\tif(which != this.current_viewport){\n\t\tthis.current_viewport = which;\n\t\tfor(var k in this.viewports){\n\t\t\tif(k != this.current_viewport) {\n\t\t\t\tif(typeof this.viewports[k][\"hibernate\"] == \"function\"){\n\t\t\t\t\t//this.viewports[k].hiberate();\n\t\t\t\t}\n\t\t\t\tjQuery(this.viewportDOMs[k]).hide();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(typeof this.viewports[k][\"wake\"] == \"function\"){\n\t\t\t\t\tthis.viewports[k].wake();\n\t\t\t\t}\n\t\t\t\tjQuery(this.viewportDOMs[k]).show();\n\t\t\t}\n\t\t\tthis.rebuildController();\n\t\t}\n\t}\n}\n\n\n/**\n * @summary Initialises the viewports by firing off a starter query and loading it into the contained viewports\n */\nDCOGBrowser.prototype.initData = function(which){\n\tthis.current_viewport = (which ? which : this.default_viewport);\n\tvar self = this;\n\tvar setInitNodes = function(dqr){\n\t\tif(self.focus_node){\n\t\t\tvar node = dqr.getNodeOrFringe(self.focus_node);\n\t\t\tif(node && node.groupID){\n\t\t\t\tself.nodeSelected(node);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t\n\t\t}\n\t\tfor(var k in self.viewports){\n\t\t\tif(typeof self.viewports[k].initDOM == \"function\"){\n\t\t\t\tself.viewports[k].initDOM(self.viewportDOMs[k]);\n\t\t\t}\n\t\t\tif(k != self.current_viewport) jQuery(self.viewportDOMs[k]).hide();\n\t\t\telse if(typeof self.viewportDOMs[k].wake == \"function\") self.viewportDOMs[k].wake()\n\t\t}\n\t}\n\tvar qstr = this.getQuery();\n\tif(qstr){\n\t\tthis.newQuery(qstr, setInitNodes);\n\t}\n\telse {\n\t\talert(\"No query string - must set filter and focus node before initialisation\");\n\t}\n}\n\nDCOGBrowser.prototype.setViewportData = function(dqr){\n\tfor(var k in this.viewports){\n\t\tthis.viewports[k].setData(dqr, k == this.current_viewport);\n\t}\n}\n\nDCOGBrowser.prototype.updateViewportData = function(dqr){\n\tfor(var k in this.viewports){\n\t\tthis.viewports[k].updateData(dqr, k == this.current_viewport);\n\t}\n}\nDCOGBrowser.prototype.setViewportFilter = function(dqr){\n\tfor(var k in this.viewports){\n\t\tif(typeof this.viewports[k].setFilter == \"function\"){\n\t\t\tthis.viewports[k].setFilter(dqr, k == this.current_viewport);\n\t\t}\n\t\telse {\n\t\t\talert(k + \" does not implement set filter browser function\");\n\t\t}\n\t}\n}\n\nDCOGBrowser.prototype.nodeSelected = function(node){\n\tif(this.focus_node != node.id){\n\t\tthis.focus_node = node.id;\n\t}\n\tvar sections = this.getNodeInfoSections(node);\n\tthis.myowner.nodeSelected(node, sections);\n}\n\nDCOGBrowser.prototype.getNodeInfoSections = function(node){\n\treturn [];\n}\n\nDCOGBrowser.prototype.followNode = function(node, success){\n\tthis.moreResults(node.id, success);\n}\n\nDCOGBrowser.prototype.setFocusNode = function(id){\n\tvar self = this;\n\tthis.focus_node = id;\n\tthis.newQuery(this.getQuery());\n}\n\nDCOGBrowser.prototype.setPathSearch = function(node_from, node_to){\n\tthis.focus_node = false;\n\tthis.from_node = node_from;\n\tthis.to_node = node_to;\n\tthis.newQuery(this.getQuery());\n}\n\nDCOGBrowser.prototype.changeTimeSlice = function(val, valto, force){\n\tif(this.current_result){\n\t\tif(!this.current_result.isTemporalSuperset(this.query_timeslice, val, valto)){\n\t\t\tthis.current_result.setQueryTimeslice(val, valto);\n\t\t\tthis.query_timeslice = this.current_result.getTimeslice()\n\t\t\tthis.newQuery(this.getQuery());\n\t\t}\n\t\telse {\n\t\t\tthis.current_result.setFilterTimeslice(val, valto);\n\t\t\tthis.setViewportFilter(this.current_result);\n\t\t}\n\t}\n}\n\nDCOGBrowser.prototype.getControllerAsDOM = function(){\n\tvar cdom = document.createElement(\"div\");\n\tcdom.setAttribute(\"class\", \"dcog-browser-controller-wrapper\");\n\tcdom.appendChild(this.getControllerViewButtonsAsDOM());\n\tcdom.appendChild(this.slider.getSliderDOM());\n\tthis.toolboxDOM = this.getUserToolboxDOM();\n\tcdom.appendChild(this.toolboxDOM);\n\tthis.rebuildController();\n\tcdom.appendChild(this.filterDOM);\n\tcdom.appendChild(this.legendDOM);\n\treturn cdom;\n}\n\nDCOGBrowser.prototype.getControllerFilterAsDOM = function(){\n\tif(this.filterDOM) {\n\t\tjQuery(this.filterDOM).empty();\n\t}\n\telse {\n\t\tvar cdom = document.createElement(\"div\");\n\t\tcdom.setAttribute(\"class\", \"dcog-browser-controller-filter\");\n\t\tthis.filterDOM = cdom;\n\t}\n\tvar fdom = this.filter.getRelationshipFilterAsDOM();\n\tvar ndom = this.filter.getQueryParameterDOM();\n\tvar ipfield = this.slider.getSliderTypeDOM();\n\tndom.appendChild(ipfield);\n\tvar self = this;\n\tvar gobut = document.createElement(\"button\");\n\tgobut.setAttribute(\"class\", \"dcog-filter-submit dcog-dashboard-button\");\n\tgobut.appendChild(document.createTextNode(\"Go\"));\n\tgobut.addEventListener(\"click\", function(){\n\t\tself.newQuery();\n\t});\n\t\n\tthis.filterDOM.appendChild(fdom);\n\tthis.filterDOM.appendChild(ndom);\n\tndom.appendChild(gobut);\n\t\n\tif(!this.show_filter){\n\t\tjQuery(this.filterDOM).hide();\n\t}\n\treturn this.filterDOM;\n}\n\nDCOGBrowser.prototype.toggleFilterVisibility = function(){\n\tif(this.show_filter){\n\t\tjQuery(this.filterDOM).hide();\n\t}\n\telse {\n\t\tjQuery(this.filterDOM).show();\n\t}\n\tthis.show_filter = !this.show_filter;\n}\n\n\nDCOGBrowser.prototype.rebuildController = function(){\n\tthis.getControllerFilterAsDOM();\n\tthis.legendDOM = this.getLegendAsDOM();\n}\n\nDCOGBrowser.prototype.untell = function(){\n\tjQuery(this.userMessageDOM).empty(); \n}\n\n\nDCOGBrowser.prototype.tellUser = function(msg, type){\n\tif(typeof msg == \"undefined\") {\n\t\tjQuery(this.userMessageDOM).empty(); \n\t}\n\telse {\n\t\ttype = (type ? type : \"info\");\n\t\tvar msgdom = document.createElement(\"span\");\n\t\tmsgdom.setAttribute(\"class\", \"dcog-browser-message dcog-message-\" + type);\n\t\tif(typeof msg == \"object\"){\n\t\t\tmsg = \"<b>\" + msg.title + \"</b> \" + msg.body;\n\t\t}\n\t\tmsgdom.innerHTML = msg;\n\t\tjQuery(this.userMessageDOM).html(msgdom);\n\t}\n}\n\nDCOGBrowser.prototype.clearBusy = function(busy){\n\tbusy = (busy ? busy : this.busy);\n\tif(busy){\t\n\t\tjQuery(busy).remove();\n\t}\n}\n\nDCOGBrowser.prototype.getUserToolboxDOM = function(){\n\tvar cdom = document.createElement(\"div\");\n\tcdom.setAttribute(\"class\", \"dcog-browser-toolbox\");\n\tvar msgdom = document.createElement(\"span\");\n\tmsgdom.setAttribute(\"class\", \"dcog-browser-message-container\");\n\tthis.userMessageDOM = msgdom;\n\tcdom.appendChild(msgdom);\n\tvar tdom = document.createElement(\"span\");\n\ttdom.setAttribute(\"class\", \"dcog-browser-tools\");\n\t//var dld = document.createElement(\"i\");\n\t//dld.setAttribute(\"class\", \"fas fa-download dcog-browser-tool-icon\");\n\tvar self = this;\n\t/*dld.addEventListener(\"click\", function(){\n\t\tif(typeof told == \"undefined\" || !told){\n\t\t\tself.tellUser(\"this is the user dialogue box - it will tell the user how to download the data\");\n\t\t\ttold = true;\n\t\t}\n\t\telse {\n\t\t\ttold = false;\n\t\t\tself.tellUser();\n\t\t}\n\t});*/\n\t//tdom.appendChild(dld);\n\tvar dlc = document.createElement(\"i\");\n\tdlc.setAttribute(\"class\", \"fas fa-cog dcog-browser-tool-icon\");\n\tdlc.addEventListener(\"click\", function(){\n\t\tself.toggleFilterVisibility();\n\t});\n\ttdom.appendChild(dlc);\n\tcdom.appendChild(tdom);\n\treturn cdom;\n}\n\nDCOGBrowser.prototype.getControllerViewButtonsAsDOM = function(){\n\tvar self = this;\n\tvar bdoms = [];\n\tvar cdom = document.createElement(\"div\");\n\tcdom.setAttribute(\"class\", \"dcog-browser-view-buttons\");\n\tfor(var k in this.viewports){\n\t\tvar bdom = document.createElement(\"button\");\n\t\tbdom.appendChild(document.createTextNode(k));\n\t\tvar i = document.createElement(\"i\");\n\t\tif(k == \"graph\"){\n\t\t\ti.setAttribute(\"class\", \"dcog-viewer-icon fas fa-code-branch\")\n\t\t}\n\t\telse if(k == \"map\"){\n\t\t\ti.setAttribute(\"class\", \"dcog-viewer-icon fas fa-globe\")\t\t\t\n\t\t}\n\t\telse if(k == \"table\"){\n\t\t\ti.setAttribute(\"class\", \"dcog-viewer-icon fas fa-list\")\t\t\t\n\t\t}\n\t\telse if(k == \"api\"){\n\t\t\ti.setAttribute(\"class\", \"dcog-viewer-icon fas fa-robot\")\t\t\t\n\t\t}\n\t\tbdom.appendChild(i);\n\t\tbdom.setAttribute(\"id\", this.browserid + k);\n\t\tif(k == this.current_viewport){\n\t\t\tbdom.setAttribute(\"class\", \"selected\");\n\t\t}\n\t\telse {\n\t\t\tbdom.setAttribute(\"class\", \"not-selected\");\n\t\t}\n\t\tbdom.addEventListener(\"click\", function(){\n\t\t\tfor(var i=0; i<bdoms.length; i++){\n\t\t\t\tbdoms[i].setAttribute(\"class\", \"not-selected\");\n\t\t\t}\n\t\t\tthis.setAttribute(\"class\", \"selected\");\n\t\t\tself.setView(this.id.substring(self.browserid.length));\n\t\t});\n\t\tbdoms.push(bdom);\n\t\tcdom.appendChild(bdom);\n\t}\n\treturn cdom;\t\n}\n\nDCOGBrowser.prototype.getLegendAsDOM = function(){\n\tif(this.legendDOM) {\n\t\tjQuery(this.legendDOM).empty();\n\t}\n\telse {\n\t\tthis.legendDOM = document.createElement(\"div\");\n\t\tthis.legendDOM.setAttribute(\"class\", \"dcog-viewport-legend\");\n\t}\n\tif(typeof this.viewports[this.current_viewport].legend == \"function\"){\n\t\tvar dom = this.viewports[this.current_viewport].legend();\n\t\tif(dom){\n\t\t\tthis.legendDOM.appendChild(dom);\n\t\t\tjQuery(this.legendDOM).show();\n\t\t}\n\t\telse {\n\t\t\tjQuery(this.legendDOM).hide();\n\t\t}\n\t}\n\treturn this.legendDOM;\n}\n\n/*\n * Display settings for shared look and field between different views - eventually to be kicked back to model \n */\n\nDCOGBrowser.prototype.getNodeRelativeSize = function(node){\n\tvar nconf = this.getNodeDisplaySettings(node);\n\tif(nconf.size) return nconf.size;\n\treturn 1;\n}\n\nDCOGBrowser.prototype.getLineWidth = function(node){\n\tvar nconf = this.getNodeDisplaySettings(node);\n\tif(nconf.size) return nconf.size;\n\treturn 4;\n}\n\nDCOGBrowser.prototype.getModelElementDisplaySettings = function(elt){\n\tif(typeof this.config.modeldisplay[elt] != \"undefined\"){\n\t\treturn jQuery.extend(true, {}, this.config.modeldisplay[elt]);\n\t}\n\talert(elt);\n\treturn jQuery.extend(true, {}, this.config.default_display);\n}\n\nDCOGBrowser.prototype.isBidirectional = function(edge){\n\tif(edge.typeID){\n\t\tvar conf = this.config.modeldisplay[edge.typeID];\n\t\tif(!conf){\n\t\t\t//jpr(edge);\n\t\t}\n\t\telse if(conf.forward && conf.backward){\n\t\t\tvar s = this.current_result.getNodeOrFringe(edge.source);\n\t\t\tvar t = this.current_result.getNodeOrFringe(edge.target);\n\t\t\tif((t && s && t.groupID && s.groupID) && (s.groupID.indexOf(\"Person\") == -1 && t.groupID.indexOf(\"Person\") == -1) )\n\t\t\t\treturn true;\t\t\n\t\t}\n\t}\n\treturn false;\n}\n\n\nDCOGBrowser.prototype.getRelationshipClass = function(nick){\n\treturn nick;\n\t//if(this.config.cmap[nick]) return this.config.cmap[nick];\n\t//return false;\n}\n\nDCOGBrowser.prototype.getGraphElementDisplaySettings = function(node){\n\tif(node){\n\t\tvar nds = this.getNodeDisplaySettings(node);\n\t\tif(!nds){\n\t\t\tnds = this.getLinkDisplaySettings(node);\n\t\t}\n\t\treturn nds;\n\t}\n\treturn false;\n}\n\nDCOGBrowser.prototype.getNodeDisplaySettings = function(node){\n\tif(typeof node.groupID != \"undefined\"){\n\t\treturn this.getModelElementDisplaySettings(node.groupID);\n\t}\n\treturn false;\n}\n\nDCOGBrowser.prototype.getLinkDisplaySettings = function(link){\n\tif(typeof link.typeID != \"undefined\"){\n\t\treturn this.getModelElementDisplaySettings(link.typeID);\n\t}\n\treturn false;\n}\n\nDCOGBrowser.prototype.getElementIcon = function(elt){\n\tvar settings = this.getGraphElementDisplaySettings(elt);\n\tif(!settings) settings = this.config.default_display;\n\treturn settings.icon;\n}\n\nDCOGBrowser.prototype.getClassIcon = function(cls){\n\tvar settings = this.getModelElementDisplaySettings(cls);\n\tif(!settings) settings = this.config.default_display;\n\treturn settings.icon;\n}\n\nDCOGBrowser.prototype.getElementIconUnicode = function(elt){\n\tvar settings = this.getGraphElementDisplaySettings(elt);\n\tif(!settings) settings = this.config.default_display;\n\treturn settings.icon_unicode;\n}\n\nDCOGBrowser.prototype.getElementColour = function(elt){\n\tvar settings = this.getGraphElementDisplaySettings(elt);\n\tif(!settings) settings = this.config.default_display;\n\treturn jQuery.extend(true, [], settings.color);\n}\n\n\nDCOGBrowser.prototype.setUpIPGSpecials = function(){\n\tthis.config.modeldisplay = {};\n\tvar reldisptypes = [\n\t\t{\n\t\t\ticon: \"fas fa-caret-right\",\n\t\t\ticon_unicode: \"\\uf0d6\",\n\t\t\tsize: 6,\n\t\t\tcolor: [125,125,255],\n\t\t},\n\t\t{\n\t\t\ticon: \"fab fa-creative-commons-by\",\n\t\t\ticon_unicode: \"\\uf4e7\",\n\t\t\tsize: 5,\n\t\t\tcolor: [255,125,125],\n\t\t},\n\t\t{\n\t\t\ticon: \"fas fa-handshake\",\n\t\t\tcolor: [125,255,125],\n\t\t\tsize: 7,\n\t\t\ticon_unicode: \"\\uf2b5\",\n\t\t},\n\t\t{\n\t\t\ticon: \"fas fa-creative-commons-nc-eu\",\n\t\t\ticon_unicode: \"\\uf4e9\",\n\t\t\tsize: 4,\n\t\t\tcolor: [50,50,50],\n\t\t},\n\t\t{\n\t\t\ticon: \"fas fa-sitemap\",\n\t\t\ticon_unicode: \"\\uf0e8\",\n\t\t\tsize: 8,\n\t\t\tcolor: [125,255,255],\n\t\t}\n\t];\n\tvar entdisptypes = [ \n\t\t {\n\t\t    \ticon: \"fas fa-users\",\n\t\t\t\tsize: 1,\n\t\t\t\ticon_unicode: \"\\uf0c0\",\n\t\t\t\tcolor: [255,125,125],\n\t\t\t},\n\t\t{\n\t\t\ticon: \"fas fa-industry\",\n\t\t\tsize: 1.5,\n\t\t\ticon_unicode: \"\\uf275\",\n\t\t\tcolor: [100,125,255],\n\t    },\n\t\t{\n\t\t\ticon: \"fas fa-user\",\n\t\t\tsize: 0.9,\n\t\t\ticon_unicode: \"\\uf007\",\n\t\t\tcolor: [125,255,125],\n\t\t},\n\t   {\n\t\t\ticon: \"fas fa-building\",\n\t\t\ticon_unicode: \"\\uf1ad\",\n\t\t\tsize: 1.4,\n\t\t\tcolor: [125,125,225],\n\t\t},\n\t\t{\n\t\t\ticon: \"fas fa-briefcase\",\n\t\t\ticon_unicode: \"\\uf0b1\",\n\t\t\tcolor: [125,125,200],\n\t\t\tsize: 1.2,\n\t\t},\n\t\t{\n\t\t\ticon: \"fas fa-user-astronaut\",\n\t\t\ticon_unicode: \"\\uf4fb\",\n\t\t\tsize: 0.9,\n\t\t\tcolor: [125,220,125],\n\t\t}\n\t];\n\t\n\tvar i = 0;\n\tfor(var rid in this.relationships){\n\t\tif(i >= reldisptypes.length) i = 0;\n\t\tvar disptype = reldisptypes[i];\n\t\tdisptype['forward'] = this.relationships[rid].label;\n\t\tthis.config.modeldisplay[rid] = disptype;\n\t\ti++;\n\t}\n\ti = 0;\n\tfor(var eid in this.entities){\n\t\tif(i >= reldisptypes.length) i = 0;\n\t\tvar disptype = entdisptypes[i];\n\t\tdisptype['text'] = this.entities[eid].label;\n\t\tthis.config.modeldisplay[eid] = disptype;\n\t\ti++;\n\t}\n}\n\nmodule.exports=WOQLGraphBrowserGenerator\n\n","const FrameHelper = require('../FrameHelper');\nconst WOQLResult = require('./WOQLResult');\n\nfunction WOQLQuery(client, options){\n\tthis.client = client;\n\tthis.options = options;\n\tthis.default_limit = 1000;\n\tthis.prefixes = {};\n\tif(client.connectionConfig.platformEndpoint()){\n\t\tvar sid = client.connectionConfig.server.substring(0, client.connectionConfig.server.lastIndexOf(\"platform\"));\n\t\tthis.sid = sid;\n\t\tvar colid = client.connectionConfig.server.substring(0, client.connectionConfig.server.lastIndexOf(\"platform\")) + client.connectionConfig.dbid;\n\t\tthis.prefixes['s'] = colid + \"/ontology/main#\";\n\t\tthis.prefixes['g'] = sid;\n\t\tthis.prefixes['db'] = colid + \"/\";\n\t\tthis.prefixes['doc'] = colid + \"/candidate/\";\n\t\tthis.prefixes['dg'] = colid + \"/graph/main/\";\n\t}\n\telse {\n\t\tthis.sid = client.connectionConfig.serverURL();\n\t\tthis.prefixes['s'] = client.connectionConfig.schemaURL() + \"#\";\n\t\tthis.prefixes['dg'] = client.connectionConfig.dbURL() + \"/schema\";\n\t\tthis.prefixes['doc'] = client.connectionConfig.docURL();\n\t\tthis.prefixes['db'] = client.connectionConfig.dbURL() + \"/\";\n\t\tthis.prefixes['g'] = client.connectionConfig.serverURL();\n\t}\n\tfor(var pref in FrameHelper.standard_urls){\n\t\tthis.prefixes[pref] = FrameHelper.standard_urls[pref];\n\t}\n}\n\nWOQLQuery.prototype.shorten = function(url){\n\tfor(var pref in this.prefixes){\n\t\tif(this.prefixes[pref] == url.substring(0, this.prefixes[pref].length)){\n\t\t\treturn ( pref + \"/\" + url.substring(this.prefixes[pref].length));\n\t\t}\n\t}\n\treturn url;\n}\n\nWOQLQuery.prototype.execute = function(woql){\n\tvar wrapped = this.wrap(woql);\n\tvar self = this;\n\treturn this.client.select(false, wrapped)\n\t.then(function(response){\n\t\tvar res = new WOQLResult(response, self, self.options);\n\t\treturn res;\n\t});\n}\n\nWOQLQuery.prototype.wrap = function(woql){\n\tvar wstr = \"prefixes([ \";\n\tvar i = 0;\n\tfor(var pref in this.prefixes){\n\t\tif(i++ > 0) wstr += \",\"\n\t\twstr += pref + \"='\" + this.prefixes[pref] + \"'\";\n\t}\n\twstr += \"], from(g/'\" + this.client.connectionConfig.dbid + \"',\" + woql + \"))\";\n\treturn wstr;\n}\n\nWOQLQuery.prototype.getAbstractQueryPattern = function(varname){\n\tvar aqp = \"t(v('\" + varname + \"'), dcog/tag, dcog/abstract, schema)\";\n\treturn aqp;\n}\n\nWOQLQuery.prototype.getSubclassQueryPattern = function(varname, clsname){\n\tvar sqp = \"(v('\" + varname + \"') << (\" + clsname + \"))\";\n\treturn sqp;\n}\n\nWOQLQuery.prototype.getAllDocumentQuery = function(constraint, limit, start){\n\tlimit = limit ? limit : this.default_limit ;\n\tstart = start ? start : 0;\n\tvar woql = \"limit( \" + limit + \", start(\" + start + \",\"\n\tvar vdoc = \"t(v('Document'), rdf/type, v('Type'))\";\n\twoql += \"select([v('Document'), v('Type')],(\" + vdoc;\n\twoql += \", (v('Type') << (dcog/'Document'))\";\n\tif(constraint) woql += \", \" + constraint;\n\twoql += \"))))\";\n\treturn woql;\n}\n\nWOQLQuery.prototype.getEverythingQuery = function(constraint, limit, start){\n\tlimit = limit ? limit : this.default_limit ;\n\tstart = start ? start : 0;\n\tvar woql = \"limit( \" + limit + \", start(\" + start + \",\"\n\tvar vdoc = \"t(v('Subject'), v('Predicate'), v('Object'))\";\n\twoql += \"select([v('Subject'), v('Predicate'), v('Object')],(\" + vdoc;\n\tif(constraint) woql += \", \" + constraint;\n\twoql += \"))))\";\n\treturn woql;\n}\n\nWOQLQuery.prototype.getPropertyListQuery = function(constraint){\n\tvar vEl = \"t(v('Property'), rdfs/range, v('Range'), schema)\";\n\tvar opts = [];\n\topts.push(\"t(v('Property'), rdf/type, v('Type'), schema)\");\n\topts.push(\"t(v('Property'), rdfs/label, v('Label'), schema)\");\n\topts.push(\"t(v('Property'), rdfs/comment, v('Comment'), schema)\");\n\topts.push(\"t(v('Property'), rdfs/domain, v('Domain'), schema)\");\n\tvar woql = \"select([v('Property'), v('Label'), v('Comment'), v('Domain'), v('Type'), v('Range')],(\" + vEl;\n\tif(constraint) woql += \", \" + constraint;\n\tfor(var i = 0; i<opts.length; i++){\n\t\twoql += \", opt(\" + opts[i] + \")\";\n\t}\n\twoql += \"))\";\n\treturn woql;\n}\n\n\nWOQLQuery.prototype.getElementMetaDataQuery = function(constraint, limit, start){\n\tlimit = (limit ? limit : this.default_limit);\n\tstart = (start ? start : 0);\n\tvar vEl = \"t(v('Element'), rdf/type, v('Type'), schema)\";\n\tvar opts = [];\n\topts.push(\"t(v('Element'), rdfs/label, v('Label'), schema)\");\n\topts.push(\"t(v('Element'), rdfs/comment, v('Comment'), schema)\");\n\topts.push(\"t(v('Element'), dcog/tag, v('Abstract'), schema)\");\n\topts.push(\"t(v('Element'), rdfs/domain, v('Domain'), schema)\");\n\topts.push(\"t(v('Element'), rdfs/range, v('Range'), schema)\");\n\tvar woql =\"limit( \" + limit + \", start(\" + start + \",\";\n\twoql += \"select([v('Element'), v('Type'), v('Label'), v('Comment'), v('Domain'), v('Range'), v('Abstract')],(\" + vEl;\n\tif(constraint) woql += \", \" + constraint;\n\tfor(var i = 0; i<opts.length; i++){\n\t\twoql += \", opt(\" + opts[i] + \")\";\n\t}\n\twoql += \"))))\";\n\treturn woql;\n}\n\nWOQLQuery.prototype.getClassListMetaDataQuery = function(constraint){\n\tvar vClass = \"t(v('Class'), rdf/type, owl/'Class', schema)\";\n\tvar opts = [];\n\topts.push(\"t(v('Class'), rdfs/label, v('Label'), schema)\");\n\topts.push(\"t(v('Class'), rdfs/comment, v('Comment'), schema)\");\n\topts.push(\"t(v('Class'), dcog/tag, v('Abstract'), schema)\");\n\tvar woql = \"select([v('Class'), v('Label'), v('Comment'), v('Abstract')],(\" + vClass;\n\tif(constraint) woql += \", \" + constraint;\n\tfor(var i = 0; i<opts.length; i++){\n\t\twoql += \", opt(\" + opts[i] + \")\";\n\t}\n\twoql += \"))\";\n\treturn woql;\n}\n\nWOQLQuery.prototype.getClassMetaDataQuery = function(constraint, limit, start){\n\tlimit = (limit ? limit : this.default_limit);\n\tstart = (start ? start : 0);\n\tvar vClass = \"t(v('Class'), rdf/type, owl/'Class', schema)\";\n\tvar opts = [];\n\topts.push(\"t(v('Class'), rdfs/label, v('Label'), schema)\");\n\topts.push(\"t(v('Class'), rdfs/comment, v('Comment'), schema)\");\n\topts.push(\"t(v('Class'), dcog/tag, v('Abstract'), schema)\");\n\tvar woql =\"limit( \" + limit + \", start(\" + start + \",\";\n\twoql += \"select([v('Class'), v('Label'), v('Comment'), v('Abstract')],(\" + vClass;\n\tif(constraint) woql += \", \" + constraint;\n\tfor(var i = 0; i<opts.length; i++){\n\t\twoql += \", opt(\" + opts[i] + \")\";\n\t}\n\twoql += \"))))\";\n\treturn woql;\n}\n\nWOQLQuery.prototype.getDataOfChosenClassQuery = function(chosen, limit, start){\n\tlimit = (limit ? limit : this.default_limit);\n\tstart = (start ? start : 0);\n\tvar gLink = \"'\"+chosen+\"'\";//\"g/'\" + chosen.substring(this.sid.length, chosen.length) + \"'\";\n\tvar vEl = \"t(v('Document'), rdf/type, \" + gLink + \")\";\n\tvar opts = \"t(v('Document'),  v('Property'), v('Value'))\";\n\tvar woql = \"limit( \" + limit + \", start(\" + start + \",\";\n\twoql += \"select([v('Document'), v('Property'), v('Value')],(\" + vEl + \",\";\n\twoql += opts;\n\twoql += \"))))\";\n\treturn woql;\n}\n\nWOQLQuery.prototype.getDataOfChosenPropertyQuery = function(chosen, limit, start){\n\tlimit = (limit ? limit : this.default_limit);\n\tstart = (start ? start : 0);\n\tvar gLink = \"'\"+chosen+\"'\";//\"g/'\" + chosen.substring(this.sid.length, chosen.length) + \"'\";\n\tvar vdoc = \"t(v('Document'), \" + gLink + \", v('Value')),\";\n\tvar ldoc = \"opt(t(v('Document'), rdfs/label, v('Label')))\";\n\tvar woql = \"limit( \" + limit + \", start(\" + start + \",\";\n\twoql += \"select([v('Document'), v('Label'), v('Value')],(\" + vdoc + ldoc;\n\twoql += \"))))\";\n\treturn woql;\n}\n\nWOQLQuery.prototype.getInstanceMeta = function(url){\n\tvar docid = \"'\" + url + \"'\";\n\tvar vEl = \"t(\" + docid + \", rdfs/label, v('InstanceLabel'))\";\n\tvEl += \", t(\" + docid + \", rdf/type, v('InstanceType'))\" \n\tvar opts = [];\n\topts.push(\"t(doc/\" + docid + \", rdfs/comment, v('InstanceComment'))\");\n\topts.push(\"t(v('InstanceType'), rdfs/label, v('ClassLabel'), schema)\");\n\tvar woql = \"select([v('InstanceLabel'), v('InstanceType'), v('InstanceComment'), v('ClassLabel')],(\" + vEl;\n\tfor(var i = 0; i<opts.length; i++){\n\t\twoql += \", opt(\" + opts[i] + \")\";\n\t}\n\twoql += \"))\";\n\treturn woql;\t\n}\n\n\nWOQLQuery.prototype.getDocumentQuery = function(id, limit, start){\n\tlimit = (limit ? limit : this.default_limit);\n\tstart = (start ? start : 0);\n\tvar docid = \"'\" + id + \"'\";\n\tvar vEl = \"t(doc/\" + docid + \", v('Property'), v('Property Value'))\";\n\tvar opts = [];\n\topts.push(\"t(v('Property'), rdfs/label, v('Property Label'), schema)\");\n\topts.push(\"t(v('Property'), rdf/type, v('Property Type'), schema)\");\n\tvar woql = \"limit( \" + limit + \", start(\" + start + \",\";\n\twoql += \"select([v('Property Label'), v('Property'), v('Property Value'), v('Property Type')],(\" + vEl;\n\tfor(var i = 0; i<opts.length; i++){\n\t\twoql += \", opt(\" + opts[i] + \")\";\n\t}\n\twoql += \"))))\";\n\treturn woql;\n}\n\nWOQLQuery.prototype.getClassesQuery = function(){\n\tvar vEl = \"t(v('ID'), rdf/type, v('Class'))\";\n\tvar opts = [];\n\topts.push(\"t(v('ID'), rdfs/label, v('Label'))\");\n\topts.push(\"t(v('ID'), rdfs/comment, v('Comment'))\");\n\topts.push(\"t(v('Class'), rdfs/label, v('Type'),schema)\");\n\tvar woql = \"select([v('Label'),v('Comment'),v('ID'),v('Type'),v('Class')],(\" + vEl;\n\twoql += \", (v('Class') << (dcog/'Document'))\";\n\tfor(var i = 0; i<opts.length; i++){\n\t\twoql += \", opt(\" + opts[i] + \")\";\n\t}\n\twoql += \"))\";\n\treturn woql;\n}\n\nmodule.exports=WOQLQuery\n","function WOQLResult(res, query ,options){\n\tthis.query = query;\n\tthis.bindings = ((res && res.result) ? res.result.bindings : []);\n}\n\nWOQLResult.prototype.count = function(){\n\treturn this.bindings.length;\n}\n\nWOQLResult.prototype.shorten = function(url){\n\treturn this.query.shorten(url);\n}\n\n\nWOQLResult.prototype.hasBindings = function(result){\n\tif(result) return (result.bindings && result.bindings.length);\n\telse return (this.bindings && this.bindings.length);\n}\n\n\nmodule.exports=WOQLResult\n","const WOQLResult = require('./WOQLResult');\nconst TerminusPluginManager = require('../plugins/TerminusPlugin');\nconst Datatables = require('../plugins/datatables.terminus');\n\nfunction WOQLResultsViewer(ui, wresult, options, settings){\n\tthis.ui = ui;\n\tthis.result = wresult;\n\tthis.options = options;\n\t//this.wqlRes = new WOQLResult();\n\tthis.pman = new TerminusPluginManager();\n\tthis.settings = settings;\n}\n\nWOQLResultsViewer.prototype.showTable = function(){\n\tif(this.options && typeof this.options.show_table != \"undefined\") return this.options.show_table;\n\treturn true;\n}\n\nWOQLResultsViewer.prototype.orderColumns = function(sample){\n\tvar ordered = [];\n\tfor(var h in sample){\n\t\tif(ordered.indexOf(h) == -1){\n\t\t\tordered.unshift(h);\n\t\t}\n\t}\n\treturn ordered;\n}\n\nWOQLResultsViewer.prototype.getAsDOM = function(resultDOM){\n\tvar rs = document.createElement('div');\n\tvar rh = document.createElement('div');\n\trh.setAttribute(\"class\", \"terminus-margin-top-bottom terminus-module-head\");\n\trh.appendChild(document.createTextNode(\"Results\"));\n\trs.appendChild(rh);\n\tif(this.result && this.result.hasBindings() && this.showTable()){\n\t\tthis.getTableDOM(this.result.bindings, rs);\n\t\treturn rs;\n\t}\n\telse {\n\t\tconsole.log(\"no bindings for query\");\n\t}\n}\n\nWOQLResultsViewer.prototype.getTableDOM = function(bindings, resultDOM){\n\tvar tab = this.getTable(bindings);\n\tif(this.pman.pluginAvailable(\"datatables\")){\n    \tvar dt = new Datatables();\n\t\tvar tab = dt.draw(true, tab, this.settings, this.ui, resultDOM);\n\t\tresultDOM.setAttribute('class', 'terminus-expandable');\n\t\treturn tab;\n    }\n\telse resultDOM.appendChild(tab);\n}\n\nWOQLResultsViewer.prototype.getTable = function(bindings){\n\tvar tab = document.createElement(\"table\");\n\ttab.setAttribute(\"class\", \"terminus-query-results-table\");\n\tvar thead = document.createElement(\"thead\");\n\tvar thr = document.createElement(\"tr\");\n\tvar ordered_headings = this.orderColumns(bindings[0]);\n\tfor(var i = 0; i<ordered_headings.length; i++){\n\t\tvar th = document.createElement(\"th\");\n\t\tth.setAttribute('class', 'terminus-table-header-full-css');\n\t\tth.appendChild(document.createTextNode(ordered_headings[i]));\n\t\tthr.appendChild(th);\n\t}\n\tthead.appendChild(thr);\n\ttab.appendChild(thead);\n\tvar tbody = document.createElement(\"tbody\");\n\tfor(var i = 0; i<bindings.length; i++){\n\t\tvar tr = document.createElement(\"tr\");\n\t\tfor(var j = 0; j<ordered_headings.length; j++){\n\t\t\tvar td = document.createElement(\"td\");\n\t\t\tif(typeof bindings[i][ordered_headings[j]] == \"object\"){\n\t\t\t\tvar lab = (bindings[i][ordered_headings[j]].data ? bindings[i][ordered_headings[j]].data : \"Object?\");\n\t\t\t\ttd.appendChild(document.createTextNode(lab));\n\t\t\t}\n\t\t\telse if(typeof bindings[i][ordered_headings[j]] == \"string\"){\n\t\t\t\tvar lab = this.result.shorten(bindings[i][ordered_headings[j]]);\n\t\t\t\tif(lab == \"unknown\") lab = \"\";\n\t\t\t\ttd.appendChild(document.createTextNode(lab));\n\t\t\t}\n\t\t\ttr.appendChild(td);\n\t\t}\n\t\ttbody.appendChild(tr);\n\t}\n\ttab.appendChild(tbody);\n\treturn tab;\n}\n\n\nmodule.exports=WOQLResultsViewer\n","const FrameHelper = require('../FrameHelper');\nconst TerminusClassChooser = require('../client/TerminusClassChooser');\nconst TerminusPropertyChooser = require('../client/TerminusPropertyChooser');\nconst TerminusDocumentChooser = require('../client/TerminusDocumentChooser');\nconst UTILS= require('../Utils')\nfunction WOQLTextboxGenerator(tq, qman, ui){\n\tthis.query = tq;\n\tthis.wquery = qman.wquery;\n\tthis.ui = ui;\n\t// default datatable settings if datatable plug in available\n\tthis.datatable = {};\n\tthis.datatable.pageLength = 5;\n\tthis.datatable.start = 0;\n}\n\nWOQLTextboxGenerator.prototype.gatherDatatableSettings = function(txtArea, queryName){\n\tthis.datatable.qTextDom =  txtArea;\n\tthis.datatable.query =  queryName;\n\tthis.datatable.chosenValue = null;\n}\n\nWOQLTextboxGenerator.prototype.getQueryButtonGroups = function(qbox){\n\tvar row = document.createElement('div');\n\trow.setAttribute('class', 'terminus-query-group-row');\n\tqbox.appendChild(row);\n\treturn row;\n}\n\nWOQLTextboxGenerator.prototype.qGroupQueries = function(qrow, header, descr){\n\tvar g = document.createElement('div');\n\tg.setAttribute('class', 'terminus-group-box');\n\n\tvar cd = document.createElement('div');\n\tcd.setAttribute('class', 'terminus-group');\n\tg.appendChild(cd);\n\n\tvar ch = document.createElement('div');\n\tch.setAttribute('class', 'terminus-group-header');\n\tcd.appendChild(ch);\n\n\tvar h = document.createElement('h3');\n\th.appendChild(document.createTextNode(header));\n\tch.appendChild(h);\n\n\tvar t = document.createElement('h5');\n\tt.setAttribute('class', 'terminus-group-sub-title');\n\tt.appendChild(document.createTextNode(descr));\n\tch.appendChild(t);\n\n\tqrow.appendChild(g);\n\n\treturn g;\n}\n\nWOQLTextboxGenerator.prototype.setDatatableSettings = function(query){\n\tvar newQuery = query.replace(/\\s/g,'');  // remove spaces\n\tvar searchStr = 'limit(';\n\tif(newQuery.indexOf(searchStr) !== -1){\n\t\tvar remString = newQuery.substring(searchStr.length, newQuery.length);\n\t\tvar limit = remString.substr(0, remString.indexOf(','));\n\t\tthis.datatable.pageLength = limit;\n\t\tthis.datatable.start = 0;\n\t}\n}\n\nWOQLTextboxGenerator.prototype.getQueryTextAreaDOM = function(q, box){\n\tvar qbox = document.createElement(\"div\");\n\tqbox.setAttribute(\"class\", \"terminus-query-textbox-input\");\n\n\tvar eqh = document.createElement(\"H3\");\n\teqh.appendChild(document.createTextNode(\"Enter Query\"));\n\teqh.setAttribute('class', 'terminus-full-css-margin-top terminus-module-head');\n\tqbox.appendChild(eqh);\n\n\tvar qip = document.createElement(\"textarea\");\n\tqip.setAttribute(\"class\", \"terminus-query-box\");\n\tqip.setAttribute(\"placeholder\", \"Enter new query or load queries from example buttons provided below ...\");\n\tqip.setAttribute(\"style\", \"min-width: 400px; min-height: 60px;\");\n\tif(q) qip.value = q;\n\tqbox.appendChild(qip);\n\tUTILS.stylizeEditor(this.ui, qip, 'query', 'javascript');\n\tvar self = this;\n\tvar qbut = document.createElement(\"button\");\n\tqbut.setAttribute(\"class\", \"terminus-control-button terminus-query-btn\")\n\tqbut.appendChild(document.createTextNode(\"Send Query\"));\n\tqbut.addEventListener(\"click\", function(){\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Any_Query');\n\t\t\tself.setDatatableSettings(qip.value);\n\t\t\tself.query(qip.value, self.datatable);\n\t\t}\n\t\telse self.query(qip.value);\n\t})\n\tqbox.appendChild(qbut);\n\tbox.appendChild(qbox);\n\treturn qip;\n}\n\nWOQLTextboxGenerator.prototype.getAsDOM = function(q, qip){\n\tvar qbox = document.createElement(\"div\");\n\tqbox.setAttribute(\"class\", \"terminus-query-textbox-input\");\n\tvar qbuts = document.createElement(\"div\");\n\tqbuts.setAttribute(\"class\", \"terminus-control-buttons\");\n\t//qbuts.appendChild(qbut);\n\tqbox.appendChild(qbuts);\n\tvar qexs = document.createElement(\"div\");\n\tqexs.setAttribute(\"class\", \"terminus-query-examples terminus-db-list-title \");\n\tvar qh = document.createElement(\"H3\");\n\tqh.appendChild(document.createTextNode(\"Load query from examples\"));\n\tqh.setAttribute('class', 'terminus-full-css-margin-top terminus-module-head');\n\tqexs.appendChild(qh);\n\n\tvar qrow = this.getQueryButtonGroups(qexs);\n\tqexs.appendChild(qrow);\n\n\t/* grouping class queries */\n\tvar qcGroup = this.qGroupQueries(qrow, 'Schema Queries', 'descr blah blah');\n\n\tvar nqbut = document.createElement(\"button\");\n\tnqbut.appendChild(document.createTextNode(\"Show All Classes\"));\n\tnqbut.setAttribute(\"class\", \"terminus-control-button terminus-query-btn terminus-query-btn-size\");\n\tnqbut.addEventListener(\"click\", function(){\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tqip.value = self.wquery.getClassMetaDataQuery(null, self.datatable.pageLength, self.datatable.start);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Classes');\n\t\t\tself.query(qip.value, self.datatable);\n\t\t}\n\t\telse self.query(qip.value);\n\t})\n\n\tvar aqbut = document.createElement(\"button\");\n\taqbut.appendChild(document.createTextNode(\"Show Document Classes\"));\n\taqbut.setAttribute(\"class\", \"terminus-control-button terminus-query-btn terminus-query-btn-size\");\n\taqbut.addEventListener(\"click\", function(){\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tqip.value = self.wquery.getClassMetaDataQuery(self.wquery.getSubclassQueryPattern(\"Class\", \"dcog/'Document'\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ \", not(\" + self.wquery.getAbstractQueryPattern(\"Class\") + \")\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tself.datatable.pageLength, self.datatable.start);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_Document_Classes');\n\t\t\tself.query(qip.value, self.datatable);\n\t\t}\n\t\telse self.query(qip.value);\n\t})\n\n\tvar ebut = document.createElement(\"button\");\n\tebut.appendChild(document.createTextNode(\"Show All Schema Elements\"));\n\tebut.setAttribute(\"class\", \"terminus-control-button terminus-query-btn terminus-query-btn-size\");\n\tvar self = this;\n\tebut.addEventListener(\"click\", function(){\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tqip.value = self.wquery.getElementMetaDataQuery(null, self.datatable.pageLength, self.datatable.start);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Schema_Elements');\n\t\t\tself.query(qip.value, self.datatable);\n\t\t}\n\t\telse self.query(qip.value);\n\t})\n\tvar dbut = document.createElement(\"button\");\n\tdbut.appendChild(document.createTextNode(\"Show All Documents\"));\n\tdbut.setAttribute(\"class\", \"terminus-control-button terminus-query-btn terminus-query-btn-size\");\n\tdbut.addEventListener(\"click\", function(){\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tqip.value = self.wquery.getAllDocumentQuery(null, self.datatable.pageLength, self.datatable.start);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Documents');\n\t\t\tself.query(qip.value, self.datatable);\n\t\t}\n\t\telse self.query(qip.value);\n\t})\n\tvar pbut = document.createElement(\"button\");\n\tpbut.appendChild(document.createTextNode(\"Show All Data\"));\n\tpbut.setAttribute(\"class\", \"terminus-control-button terminus-query-btn terminus-query-btn-size\");\n\tpbut.addEventListener(\"click\", function(){\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tqip.value = self.wquery.getEverythingQuery(null, self.datatable.pageLength, self.datatable.start);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Data');\n\t\t\tself.query(qip.value, self.datatable);\n\t\t}\n\t\telse self.query(qip.value);\n\t})\n\n\tvar prbut = document.createElement(\"button\");\n\tprbut.appendChild(document.createTextNode(\"Show All Properties\"));\n\tprbut.setAttribute(\"class\", \"terminus-control-button terminus-query-btn terminus-query-btn-size\");\n\tprbut.addEventListener(\"click\", function(){\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tqip.value = self.wquery.getPropertyListQuery(null, self.datatable.pageLength, self.datatable.start);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_All_Properties');\n\t\t\tself.query(qip.value, self.datatable);\n\t\t}\n\t\telse self.query(qip.value);\n\t})\n\n\t/* grouping data queries */\n\tvar qdGroup = this.qGroupQueries(qrow, 'Data Queries', 'descr blah blah');\n\n\tvar termcc = new TerminusClassChooser(this.ui);\n\ttermcc.empty_choice = \"View data of type...\";\n\tvar self = this;\n\ttermcc.change = function(new_class){\n\t\tif(new_class){\n\t\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\t\tqip.value = self.wquery.getDataOfChosenClassQuery(new_class, self.datatable.pageLength, self.datatable.start);\n\t\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\t\tself.gatherDatatableSettings(qip, 'Show_Data_Class');\n\t\t\t\tself.datatable.chosenValue = new_class; // set chosen val from drop down\n\t\t\t\tself.query(qip.value, self.datatable);\n\t\t\t}\n\t\t\telse self.query(qip.value);\n\t\t}\n\t}\n\tvar tcdom = termcc.getAsDOM('terminus-query-select');\n\n\tvar termpc = new TerminusPropertyChooser(this.ui);\n\ttermpc.empty_choice = \"Show data for property...\";\n\tvar self = this;\n\ttermpc.change = function(new_property){\n\t\tif(new_property){\n\t\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\t\tqip.value = self.wquery.getDataOfChosenPropertyQuery(new_property, self.datatable.pageLength, self.datatable.start);\n\t\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\t\tself.gatherDatatableSettings(qip, 'Show_Property_Class');\n\t\t\t\tself.datatable.chosenValue = new_property; // set chosen val from drop down\n\t\t\t\tself.query(qip.value, self.datatable);\n\t\t\t}\n\t\t\telse self.query(qip.value);\n\t\t}\n\t}\n\n\t/* grouping document queries */\n\tvar qdocGroup = this.qGroupQueries(qrow, 'Document Queries', 'descr blah blah');\n\n\tvar pdom = termpc.getAsDOM();\n\tvar docch = new TerminusDocumentChooser(this.ui);\n\tdocch.change = function(val){\n\t\tUTILS.deleteStylizedEditor(self.ui, qip);\n\t\tqip.value = self.wquery.getDocumentQuery(val, self.datatable.pageLength, self.datatable.start);\n\t\tUTILS.stylizeEditor(self.ui, qip, 'query', 'javascript');\n\t\tif(self.ui.pluginAvailable(\"datatables\")){\n\t\t\tself.gatherDatatableSettings(qip, 'Show_Document_Info_by_Id');\n\t\t\tself.datatable.chosenValue = val;\n\t\t\tself.query(qip.value, self.datatable);\n\t\t}\n\t\telse self.query(qip.value);\n\t}\n\tvar docdom = docch.getAsDOM('terminus-query-select');\n\tvar d2ch = new TerminusDocumentChooser(this.ui, FrameHelper.unshorten(\"dcog:Document\"));\n\td2ch.view = \"label\";\n\tvar d2dom = d2ch.getAsDOM('terminus-query-select');\n\tvar p = document.createElement(\"p\");\n\tp.appendChild(d2dom);\n\n\t/* class queries */\n\tqcGroup.appendChild(ebut);\n\tvar br = document.createElement('BR');\n\tqcGroup.appendChild(br);\n\tqcGroup.appendChild(nqbut);\n\tvar br = document.createElement('BR');\n\tqcGroup.appendChild(br);\n\tqcGroup.appendChild(aqbut);\n\tvar br = document.createElement('BR');\n\tqcGroup.appendChild(br);\n\tqcGroup.appendChild(prbut);\n\tvar br = document.createElement('BR');\n\tqcGroup.appendChild(br);\n\n\tqbox.appendChild(qexs);\n\n\t/* data queries */\n\tqdGroup.appendChild(tcdom);\n\tqdGroup.appendChild(pdom);\n\tvar br = document.createElement('BR');\n\tqdGroup.appendChild(br);\n\tqdGroup.appendChild(pbut);\n\n\t/* document queries */\n\tqdocGroup.appendChild(docdom);\n\tqdocGroup.appendChild(dbut);\n\tqdocGroup.appendChild(p);\n\n\treturn qbox;\n}\n\nmodule.exports=WOQLTextboxGenerator\n","WOQLTimePicker = function(config){\n\tthis.type = (config && config.slidertype ? config.slidertype : \"range\");\n\tthis.timeslice = false;\n\tvar defch = function(from, to, ss){\n\t\talert(\"changed to: (from) \" + from + \" ... (to) \" + to + \" (\" + ss + \")\");\n\t};\n\tthis.change = config && config.change ? config.change : defch;  \n\tthis.years = (config && config.years ? config.years : 20);\n\tthis.server_side = false;\n}\n\nWOQLTimePicker.prototype.toggleServerSideFiltering = function(val){\n\tthis.server_side = !this.server_side;\n}\n\nWOQLTimePicker.prototype.getSliderParameters = function(val){\n\tstart = 0;\n\tend = this.years;\n\tvar self = this;\n\tvar pointInit = {\n\t\t\tmin: start, \n\t\t\tmax: end, \n\t\t\tvalue: val,\n\t\t\tslide: function(event, ui){\n\t\t\t\tvar tt = self.tickToTime(ui.value);\n\t\t\t\tself.changeTimeSlice(tt);\n\t\t\t}\n\t}\n\tvar rangeInit = {\n\t\t\trange: true,\n\t\t\tmin: start, \n\t\t\tmax: end, \n\t\t\tvalues: val,\n\t\t\tslide: function(event, ui){\n\t\t\t\tself.changeTimeSlice(self.tickToTime(ui.values[0]), self.tickToTime(ui.values[1]));\n\t\t\t}\n\t}\n\tvar sconfig = (this.type == \"range\" ? rangeInit : pointInit);\n\treturn sconfig;\n}\n\nWOQLTimePicker.prototype.changeTimeSlice = function(val, val2, noshow){\n\tif(this.type == \"range\"){\n\t\tthis.timeslice = {};\n\t\tthis.timeslice.from = val;\n\t\tthis.timeslice.to = val2;\n\t\tthis.change(val, val2, this.server_side);\n\t}\n\telse {\n\t\tthis.timeslice = val;\n\t\tthis.change(val, false, this.server_side);\n\t}\n\tif(!noshow){\t\n\t\tthis.showCurrentPick();\n\t}\n}\n\nWOQLTimePicker.prototype.tickToTime = function(ticknum){\n\tif(ticknum == 0){\n\t\tvar nval = 0;\n\t}\n\telse {\n\t\tvar year = 31622400 ;\n\t\tvar seconds_ago = year * (this.years - ticknum);\n\t\tvar now = new Date().getTime()/1000;\n\t\tvar nval = now - seconds_ago;\n\t}\n\treturn nval;\n}\n\n\nWOQLTimePicker.prototype.timeToTick = function(timeval){\n\tif(timeval){\n\t\tvar y = (new Date(timeval * 1000)).getFullYear();\n\t\tvar thisy = (new Date()).getFullYear();\n\t\treturn this.years - (thisy -y);\n\t}\n\treturn 0;\n}\n\nWOQLTimePicker.prototype.changeSliderType = function(ntype){\n\tvar val, val2;\n\tif(this.type == \"point\" && ntype == \"range\"){\n\t\tif(this.timeslice){\n\t\t\tval = this.timeslice\n\t\t\tval2 = this.timeslice;\n\t\t}\n\t}\n\telse if(this.type == \"range\" && ntype == \"point\"){\n\t\tif(this.timeslice){\n\t\t\tif(this.timeslice.from == 0 && this.timeslice.to == 0) val = false;\n\t\t\telse if(this.timeslice.from == 0) val = this.timeslice.to;\n\t\t\telse if(this.timeslice.to == 0) val = this.timeslice.from;\n\t\t\telse val = (this.timeslice.from + this.timeslice.to) / 2;\n\t\t\tval2 = false;\n\t\t}\n\t\telse {\n\t\t\tval = 0;\n\t\t}\n\t\t\n\t}\n\tthis.type = ntype;\n\tthis.changeTimeSlice(val, val2, true);\n\tthis.updateSliderDOM();\n}\n\nWOQLTimePicker.prototype.getSliderTypeDOM = function(){\n\tvar dcd = document.createElement(\"span\");\n\tdcd.setAttribute(\"class\", \"terminus-parameter\");\n\tvar lab = document.createElement(\"label\");\n\tlab.appendChild(document.createTextNode(\"Dates\"));\n\tdcd.appendChild(lab);\n\tvar self = this;\n\tvar sel = document.createElement(\"select\");\n\tvar opt = document.createElement(\"option\");\n\topt.value = \"\";\n\topt.appendChild(document.createTextNode(\"None\"));\n\tif(this.type == \"\"){\n\t\topt.setAttribute(\"selected\", \"selected\");\n\t}\n\tsel.appendChild(opt);\n\topt = document.createElement(\"option\");\n\topt.value = \"point\";\n\topt.appendChild(document.createTextNode(\"Point\"));\n\tif(this.type == \"point\"){\n\t\topt.setAttribute(\"selected\", \"selected\");\n\t}\n\tsel.appendChild(opt);\n\topt = document.createElement(\"option\");\n\topt.value = \"range\";\n\topt.appendChild(document.createTextNode(\"Range\"));\n\tif(this.type == \"range\"){\n\t\topt.setAttribute(\"selected\", \"selected\");\n\t}\n\tsel.appendChild(opt);\n\tvar self = this;\n\tsel.addEventListener(\"change\", function(){\n\t\tif(this.value != self.type){\n\t\t\tself.changeSliderType(this.value);\n\t\t}\n\t});\n\tdcd.appendChild(sel);\n\t\n\tvar cb = document.createElement(\"input\");\n\tcb.setAttribute(\"type\", \"checkbox\");\n\tvar elid = this.browserid + \"-ssp\";\n\tif(this.server_side){\n\t\tcb.setAttribute(\"checked\", true);\n\t}\n\tvar self = this;\n\tcb.addEventListener(\"change\", function(){\n\t\tself.toggleServerSideFiltering();\n\t});\n\tvar lb = document.createElement(\"label\");\n\tlb.setAttribute(\"for\", elid);\n\tlb.appendChild(document.createTextNode(\"Server Side\"));\n\tdcd.appendChild(lb);\n\tdcd.appendChild(cb);\n\treturn dcd;\n\t\n}\n\nWOQLTimePicker.prototype.updateSliderDOM = function(){\n\tthis.slideDOM = this.getSliderDOM();\n}\n\nWOQLTimePicker.prototype.getSliderDOM = function(start, end){\n\tif(this.slideDOM){\n\t\tjQuery(this.slideDOM).empty();\n\t}\n\telse {\n\t\tthis.slideDOM = document.createElement(\"div\");\n\t\tthis.slideDOM.setAttribute(\"class\", \"terminus-controller-slider\");\n\t}\n\tif(this.type == \"\"){\n\t\tthis.changeTimeSlice(false);\n\t\treturn this.slideDOM;\n\t}\n\tvar TopAxisDOM = document.createElement(\"div\");\n\tTopAxisDOM.setAttribute(\"class\", \"terminus-controller-slider-panel terminus-controller-slider-topaxis\");\n\tif(this.type == \"point\"){\n\t\tthis.curdate = document.createElement(\"span\");\n\t\tthis.curdate.setAttribute(\"class\", \"terminus-slider-current terminus-slider-current-date\");\n\t\tTopAxisDOM.appendChild(this.curdate);\n\t}\n\telse if(this.type == \"range\") {\n\t\tthis.cursdate = document.createElement(\"span\");\n\t\tthis.cursdate.setAttribute(\"class\", \"terminus-slider-current terminus-slider-current-date-start\");\n\t\tTopAxisDOM.appendChild(this.cursdate);\n\t\tthis.curedate = document.createElement(\"span\");\t\t\n\t\tthis.curedate.setAttribute(\"class\", \"terminus-slider-current terminus-slider-current-date-end\");\n\t\tTopAxisDOM.appendChild(this.curedate);\n\t}\n\tthis.slideDOM.appendChild(TopAxisDOM);\n\tthis.showCurrentPick();\n\tvar LabelDOM = document.createElement(\"span\");\n\tLabelDOM.setAttribute(\"class\", \"terminus-controller-slider-label terminus-controller-slider-startlabel\");\n\tthis.slideDOM.appendChild(LabelDOM);\n\tvar PayloadDOM = document.createElement(\"div\");\n\tPayloadDOM.setAttribute(\"class\", \"terminus-controller-slider-payload\");\n\tthis.slideDOM.appendChild(PayloadDOM);\n\tvar L2DOM = document.createElement(\"span\");\n\tL2DOM.setAttribute(\"class\", \"terminus-controller-slider-label terminus-controller-slider-endlabel\");\n\tthis.slideDOM.appendChild(L2DOM);\n\tL2DOM.appendChild(this.getSliderAxisDOM());\n\tvar sconfig = this.getSliderParameters(this.getTimesliceAsTicks());\n\tjQuery(PayloadDOM).slider(sconfig);\n\treturn this.slideDOM;\n}\n\nWOQLTimePicker.prototype.getTimesliceAsTicks = function(){\n\tif(this.timeslice){\n\t\tif(this.type == \"range\"){\n\t\t\tvtf = (this.timeslice.from ? this.timeToTick(this.timeslice.from) : 0);\n\t\t\tvtt = (this.timeslice.to ? this.timeToTick(this.timeslice.to) : 0);\n\t\t\tvar val = [vtf, vtt];\n\t\t}\n\t\telse {\n\t\t\tvar val = this.timeToTick(this.timeslice)\n\t\t}\n\t}\n\telse {\n\t\tvar val = (this.type == \"range\" ? [0, this.years] : 0);\n\t}\n\treturn val;\n}\n\nWOQLTimePicker.prototype.showCurrentPick = function(){\n\tif(this.type == \"range\"){\n\t\tif(!this.timeslice.from) {\n\t\t\tvar nd  = new Date();\n\t\t\tvar fy = nd.getFullYear() - this.years;\n\t\t}\n\t\telse {\n\t\t\tvar nd = new Date(this.timeslice.from * 1000);\n\t\t\tvar fy = nd.getFullYear(); \n\t\t}\n\t\tthis.cursdate.innerHTML = fy;\n\t\tthis.adjustOffset(this.cursdate, this.timeslice.from);\n\t\tif(!this.timeslice.to) {\n\t\t\tvar ty = new Date().getFullYear();\n\t\t}\n\t\telse {\n\t\t\tvar ty = new Date(this.timeslice.to * 1000).getFullYear(); \n\t\t}\n\t\tif(ty != fy){\n\t\t\tthis.curedate.innerHTML = ty;\n\t\t\tthis.adjustOffset(this.curedate, this.timeslice.to, true);\n\t\t\t//jQuery(this.curedate).show();\n\t\t}\n\t\telse {\n\t\t\tthis.curedate.innerHTML = \"\";\n\t\t}\n\t}\n\telse {\n\t\tif(this.timeslice){\n\t\t\tvar nd = new Date(this.timeslice * 1000);\n\t\t\tfy = nd.getFullYear(); \n\t\t}\n\t\telse {\n\t\t\tfy = \"off\";\n\t\t}\n\t\tthis.curdate.innerHTML = fy;\n\t\tthis.adjustOffset(this.curdate, this.timeslice);\n\t}\n}\n\nWOQLTimePicker.prototype.adjustOffset = function(dom, tval, r){\n\tvar tick = this.timeToTick(tval);\n\tvar totwidth = 50 + (this.slideDOM.offsetWidth ? this.slideDOM.offsetWidth : 0);\n\tvar unit = totwidth / (this.years + 1);\n\tvar box = -25;\n\tvar which = (r ? \"margin-right\" : \"margin-left\");\n\tif(r){\n\t\tif(tick){\n\t\t\tvar off = ((this.years - tick) * unit) + box;\n\t\t}\n\t\telse {\n\t\t\tvar off = box;\n\t\t}\n\t\tdom.setAttribute(\"style\", \"margin-right: \" + off + \"px\");\n\t}\n\telse {\n\t\tvar off = unit * tick + box;\n\t\tdom.setAttribute(\"style\", \"margin-left: \" + off + \"px\");\n\t}\n}\n\nWOQLTimePicker.prototype.getSliderAxisDOM = function(){\n\tvar cdom = document.createElement(\"div\");\n\tcdom.setAttribute(\"class\", \"terminus-slider-axis-wrapper\");\n\tvar fy = new Date().getFullYear();\n\tvar sd = fy%5;\n\tvar vals = [];\n\tfor(var i = this.years; i>0; i-=5){\n\t\tvar val = (fy-i) - sd + 5;\n\t\tvals.push(val);\n\t}\n\tfor(var i = 0; i<vals.length; i++){\n\t\tvar ldom = document.createElement(\"label\");\n\t\tldom.setAttribute(\"class\", \"terminus-axis-label\");\n\t\tldom.innerHTML = \"<div class='terminus-tick'>|</div>\"+ vals[i];\n\t\tcdom.appendChild(ldom);\n\t}\n\tndom = document.createElement(\"label\");\n\tndom.setAttribute(\"class\", \"terminus-axis-label terminus-axis-now-label\");\n\tcdom.appendChild(ndom);\n\treturn cdom;\n}\n\nWOQLTimePicker.prototype.Y2Time = function(y){\n\treturn (new Date(y+ \"-12-31T12:00:00.000Z\").getTime() / 1000);\n}\n\nmodule.exports=WOQLTimePicker\n"],"sourceRoot":""}